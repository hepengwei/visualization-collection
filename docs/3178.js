(self.webpackChunkvisualization_collection=self.webpackChunkvisualization_collection||[]).push([[3178],{50607:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});const a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"}},49856:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>x});var a=n(96540),r=n(89740),s=n(50400),l=n(55238),c=n(6442),o=n(49706),i=(n(86748),n(9033),n(49527));const u="NotBlockPeopleBarrage_container__g5VWx",p="NotBlockPeopleBarrage_content__KP88f",d="NotBlockPeopleBarrage_barrageBox__IT1iB",y="NotBlockPeopleBarrage_bottomBox__kTapl";var m=n(74848),g=function(e){return e[e.ready=0]="ready",e[e.playing=1]="playing",e[e.pause=2]="pause",e}(g||{});const f=324,h=576,x=()=>{const e=(0,c.A)(),t=(0,a.useRef)(null),n=(0,a.useRef)(null),[x,v]=(0,a.useState)(""),[k,w]=(0,a.useState)(g.ready),_=(0,a.useRef)(null),A=(0,a.useRef)(null),b=async()=>{if(t.current&&n.current){const e=(0,i.qF)(t.current,f,h);if(e){const t={flipHorizontal:!1,multiSegmentaion:!1,segmentBodyParts:!1,segmentationThreshold:1},a=await _.current.segmentPeople(e,t),r={r:0,g:0,b:0,a:0},s={r:0,g:0,b:0,a:255},l=await o.JM(a,r,s,false,.3),c=(0,i.sv)(l);n.current.style["-webkit-mask-image"]="url(".concat(c,")"),n.current.style["-webkit-mask-size"]="".concat(f,"px ").concat(h,"px");const{children:u}=n.current;u&&u.length>0&&Array.prototype.forEach.call(u,(e=>{const{left:t}=e.style;if(t<-324){var a;null===(a=n.current)||void 0===a||a.removeChild(e)}else{const{left:t}=e.style;e.style.left="".concat(Number(t.substring(0,t.length-2))-2,"px")}})),A.current=window.requestAnimationFrame(b)}}},B=()=>{if(x){if(n.current){const e=document.createElement("span");e.innerText=x,e.style.fontSize="".concat(20,"px"),e.style.fontWeight="500",e.style.color="#fff",e.style.whiteSpace="nowrap",e.style.position="absolute";const t=24*Math.floor(10*Math.random())+20;e.style.top="".concat(t,"px"),e.style.left="".concat(f,"px"),n.current.appendChild(e)}else r.Ay.warning(e.formatMessage({id:"common.tryingToLoad"}));v("")}};return(0,a.useEffect)((()=>((async()=>{if(t.current){t.current.oncanplay=()=>{var e;t.current&&(null===(e=t.current)||void 0===e?void 0:e.readyState)===t.current.HAVE_ENOUGH_DATA&&_.current&&(w(g.playing),t.current.play(),b())};const e=o.JZ.MediaPipeSelfieSegmentation,n={runtime:"mediapipe",modelType:"landscape",solutionPath:"https://cdn.jsdelivr.net/npm/@mediapipe/selfie_segmentation"},a=await o.TT(e,n);_.current=a,k===g.ready&&(w(g.playing),t.current.play(),b())}})(),()=>{A.current&&cancelAnimationFrame(A.current)})),[]),(0,m.jsxs)("div",{className:u,children:[(0,m.jsxs)("div",{className:p,style:{width:"".concat(f,"px"),height:"".concat(h,"px")},children:[(0,m.jsx)("video",{style:{width:"".concat(f,"px"),height:"".concat(h,"px")},muted:!1,preload:"true",loop:!0,"x5-video-player-fullscreen":"true","x5-playsinline":"true",playsInline:!0,"webkit-playsinline":"true",crossOrigin:"anonymous",ref:t,children:(0,m.jsx)("source",{src:"public/dance.mp4"})}),(0,m.jsx)("div",{className:d,ref:n}),k!==g.ready&&(0,m.jsx)(s.Ay,{type:"primary",ghost:!0,onClick:()=>{t.current&&(k===g.playing?(w(g.pause),t.current.pause()):(w(g.playing),t.current.play()))},children:k===g.playing?e.formatMessage({id:"common.pause"}):e.formatMessage({id:"common.play"})})]}),(0,m.jsxs)("div",{className:y,children:[(0,m.jsx)(l.A,{placeholder:e.formatMessage({id:"page.AIApplication.sendBarrage"}),value:x,maxLength:20,onChange:e=>v(e.target.value||""),onKeyDown:e=>{"Enter"===(null==e?void 0:e.key)&&B()}}),(0,m.jsx)(s.Ay,{type:"primary",onClick:B,children:e.formatMessage({id:"page.AIApplication.send"})})]})]})}},85817:()=>{},18590:()=>{},41234:()=>{}}]);