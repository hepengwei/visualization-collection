"use strict";(self.webpackChunkvisualization_collection=self.webpackChunkvisualization_collection||[]).push([[5819],{12650:(e,t,r)=>{r.d(t,{A:()=>a});r(96540);const o="Tabs_container__H2AQt";var n=r(74848);const a=e=>{const{data:t=[],selectedTabId:r,onChange:a,className:i}=e;return(0,n.jsx)("div",{className:"".concat(o).concat(i?" ".concat(i):""),children:t.map((e=>(0,n.jsxs)("div",{className:"tabs-tabItem".concat(r===e.id?" active":""),onClick:()=>{a&&a(e.id)},children:[e.isNew&&(0,n.jsx)("div",{className:"isNew"}),(0,n.jsx)("div",{className:"tabText",children:e.label})]},e.id)))})}},15819:(e,t,r)=>{r.r(t),r.d(t,{default:()=>bt});var o=r(96540),n=r(89740),a=r(50400),i=r(24959),s=r(6442),c=r(12650),l=r(49527),g=r(75965),d=r(81657);const u="ImageProcessingTool_container__gyUxl",m="ImageProcessingTool_content__n+v5A",h="ImageProcessingTool_tabs__z4iqp",f="ImageProcessingTool_imgBox__ih+F9",p="ImageProcessingTool_fileBox__UJpUJ",y="ImageProcessingTool_fileInfo__p4WWh",v="ImageProcessingTool_item__2U26V",x="ImageProcessingTool_emptyBox__Az6Xc",w="ImageProcessingTool_uploadBtn__5egS2",_="ImageProcessingTool_text__DnXFS",M="ImageProcessingTool_tips__taQE0",j="ImageProcessingTool_tip__Pzv9q",A="ImageProcessingTool_operationBtns__HvOvd",S="ImageProcessingTool_left__boNsS",D="ImageProcessingTool_operationBtn__SS8TE",N="ImageProcessingTool_right__AU-+v";var b=r(74848);const T=e=>{const{imgInfo:t,imgDragOver:r,onDragOver:o,onDragLeave:n,onDrop:a}=e,i=(0,s.A)();return(0,b.jsx)("div",{className:f,style:{borderColor:r?"#0E5E6F":"#3A8891"},onDragOver:o,onDragLeave:n,onDrop:a,children:(0,b.jsxs)("div",{className:p,children:[(0,b.jsx)("img",{src:t.imgUrl,alt:""}),(0,b.jsxs)("div",{className:y,children:[(0,b.jsxs)("div",{className:v,children:[i.formatMessage({id:"common.filename"}),"：",t.name]}),(0,b.jsxs)("div",{className:v,children:[i.formatMessage({id:"common.format"}),"：",t.fileType]}),(0,b.jsxs)("div",{className:v,children:[i.formatMessage({id:"common.dimension"}),"：",t.width&&t.height?"".concat(t.width,"x").concat(t.height):i.formatMessage({id:"common.unknown"})]}),(0,b.jsxs)("div",{className:v,children:[i.formatMessage({id:"common.size"}),"：",(0,l.ye)(t.size)]})]})]})})},k={flipSideToSideStatus:{doing:!1,imageData:null},flipUpsideDownStatus:{doing:!1,imageData:null},leftRotateStatus:{doing:!1,imageData:null},rightRotateStatus:{doing:!1,imageData:null},toGreyStatus:{doing:!1,imageData:null},toBlackAndWhiteStatus:{doing:!1,imageData:null},sharpenStatus:{doing:!1,imageData:null},marginSharpenStatus:{doing:!1,imageData:null},toOppositeStatus:{doing:!1,imageData:null},toRedStatus:{doing:!1,imageData:null},toGreenStatus:{doing:!1,imageData:null},toBlueStatus:{doing:!1,imageData:null},toRedAndGreenStatus:{doing:!1,imageData:null},toRedAndBlueStatus:{doing:!1,imageData:null},toBlueAndGreenStatus:{doing:!1,imageData:null},toRedAndGreyStatus:{doing:!1,imageData:null},toGreenAndGreyStatus:{doing:!1,imageData:null},toBlueAndGreyStatus:{doing:!1,imageData:null},toGaussianBlurStatus:{doing:!1,imageData:null},jpgToPngStatus:{doing:!1,imageData:null},pngToJpgStatus:{doing:!1,imageData:null}},L=e=>{const{imgInfo:t,exportImage:r,imgDragOver:i,onDragOver:c,onDragLeave:l,onDrop:u,onClear:m}=e,h=(0,s.A)(),f=(0,o.useRef)((0,g.A)(k)),p=(e,o,a)=>{if(e&&e.imageData)r(e.imageData);else{if(e.doing)return void n.Ay.warning(h.formatMessage({id:"common.workHard"}));if(null!=t&&t.imageData){e.doing=!0;let i=t.imageData;o===d.uv&&(i=(0,g.A)(i));const s=o(i);s?(e.imageData=s,r(s,a)):n.Ay.error(h.formatMessage({id:"common.operationFailure"})),e.doing=!1}}};return(0,o.useEffect)((()=>{f.current=(0,g.A)(k)}),[t]),(0,b.jsxs)("div",{children:[(0,b.jsx)(T,{imgInfo:t,imgDragOver:i,onDragOver:c,onDragLeave:l,onDrop:u}),(0,b.jsxs)("div",{className:A,children:[(0,b.jsxs)("div",{className:S,children:[(0,b.jsx)(a.Ay,{type:"primary",className:D,onClick:()=>p(f.current.flipSideToSideStatus,d.hz),children:h.formatMessage({id:"common.flipSideToSide"})}),(0,b.jsx)(a.Ay,{type:"primary",className:D,onClick:()=>p(f.current.flipUpsideDownStatus,d.gL),children:h.formatMessage({id:"common.flipTopToBottom"})}),(0,b.jsx)(a.Ay,{type:"primary",className:D,onClick:()=>p(f.current.leftRotateStatus,d.XA),children:h.formatMessage({id:"common.rotateLeft"})}),(0,b.jsx)(a.Ay,{type:"primary",className:D,onClick:()=>p(f.current.rightRotateStatus,d.Sd),children:h.formatMessage({id:"common.rotateRight"})}),(0,b.jsx)(a.Ay,{type:"primary",className:D,onClick:()=>p(f.current.toGreyStatus,d.$S),children:h.formatMessage({id:"common.graying"})}),(0,b.jsx)(a.Ay,{type:"primary",className:D,onClick:()=>p(f.current.toBlackAndWhiteStatus,d.ZE),children:h.formatMessage({id:"common.vampix"})}),(0,b.jsx)(a.Ay,{type:"primary",className:D,onClick:()=>p(f.current.sharpenStatus,d.gR),children:h.formatMessage({id:"page.imageProcessingTool.shmpch"})}),(0,b.jsx)(a.Ay,{type:"primary",className:D,onClick:()=>p(f.current.marginSharpenStatus,d.oA),children:h.formatMessage({id:"page.imageProcessingTool.edgeSharpening"})}),(0,b.jsx)(a.Ay,{type:"primary",className:D,onClick:()=>p(f.current.toOppositeStatus,d.xY),children:h.formatMessage({id:"page.imageProcessingTool.filterContrast"})}),(0,b.jsx)(a.Ay,{type:"primary",className:D,onClick:()=>p(f.current.toRedStatus,d.z),children:h.formatMessage({id:"page.imageProcessingTool.redFilter"})}),(0,b.jsx)(a.Ay,{type:"primary",className:D,onClick:()=>p(f.current.toGreenStatus,d.nG),children:h.formatMessage({id:"page.imageProcessingTool.greenFilter"})}),(0,b.jsx)(a.Ay,{type:"primary",className:D,onClick:()=>p(f.current.toBlueStatus,d.Qn),children:h.formatMessage({id:"page.imageProcessingTool.blueFilter"})}),(0,b.jsx)(a.Ay,{type:"primary",className:D,onClick:()=>p(f.current.toRedAndGreenStatus,d.RJ),children:h.formatMessage({id:"page.imageProcessingTool.redGreenFilter"})}),(0,b.jsx)(a.Ay,{type:"primary",className:D,onClick:()=>p(f.current.toRedAndBlueStatus,d.Uh),children:h.formatMessage({id:"page.imageProcessingTool.redBlueFilter"})}),(0,b.jsx)(a.Ay,{type:"primary",className:D,onClick:()=>p(f.current.toBlueAndGreenStatus,d.c1),children:h.formatMessage({id:"page.imageProcessingTool.blueGreenFilter"})}),(0,b.jsx)(a.Ay,{type:"primary",className:D,onClick:()=>p(f.current.toRedAndGreyStatus,d.dN),children:h.formatMessage({id:"page.imageProcessingTool.redGreyFilter"})}),(0,b.jsx)(a.Ay,{type:"primary",className:D,onClick:()=>p(f.current.toGreenAndGreyStatus,d.hR),children:h.formatMessage({id:"page.imageProcessingTool.greenGreyFilter"})}),(0,b.jsx)(a.Ay,{type:"primary",className:D,onClick:()=>p(f.current.toBlueAndGreyStatus,d.iT),children:h.formatMessage({id:"page.imageProcessingTool.blueGreyFilter"})}),(0,b.jsx)(a.Ay,{type:"primary",className:D,onClick:()=>p(f.current.toGaussianBlurStatus,d.uv),children:h.formatMessage({id:"page.imageProcessingTool.gaussianBlur"})}),["JPG","JPEG"].includes(t.fileType)&&(0,b.jsx)(a.Ay,{type:"primary",className:D,onClick:()=>p(f.current.jpgToPngStatus,d.yy,"PNG"),children:h.formatMessage({id:"page.imageProcessingTool.jpgToPng"})}),"PNG"===t.fileType&&(0,b.jsx)(a.Ay,{type:"primary",className:D,onClick:()=>p(f.current.pngToJpgStatus,d.WG,"JPEG"),children:h.formatMessage({id:"page.imageProcessingTool.pngToJpg"})})]}),(0,b.jsx)(a.Ay,{className:N,ghost:!0,type:"primary",onClick:m,children:h.formatMessage({id:"common.clear"})})]})]})};var P=r(40961),O=r(53681),E=r(19532),C=r(46935);const R="RectSelect_container__-cWuh",I="RectSelect_imgBox__E+CNG",B="RectSelect_content__5AI1k",F="RectSelect_leftBox__XOzNw",G="RectSelect_img1__Bds0c",U="RectSelect_img2__sJxZh",W="RectSelect_mask__hQSDH",z="RectSelect_clipBox__SIS31",H="RectSelect_dot__iXY+Z",Y="RectSelect_leftUp__Iv4HR",J="RectSelect_up__JRsdj",K="RectSelect_rightUp__2KLY-",Z="RectSelect_right__Be0tJ",X="RectSelect_rightDown__RIFoZ",Q="RectSelect_down__2+TZz",V="RectSelect_leftDown__8Vyym",q="RectSelect_left__HRdFn",$="RectSelect_operationBtns__srR7U",ee="RectSelect_operationBtn__54pSj";var te=function(e){return e[e.leftUp=0]="leftUp",e[e.up=1]="up",e[e.rightUp=2]="rightUp",e[e.right=3]="right",e[e.rightDown=4]="rightDown",e[e.down=5]="down",e[e.leftDown=6]="leftDown",e[e.left=7]="left",e}(te||{});const re=10,oe=e=>{const{imgInfo:t,exportImage:r,imgDragOver:i,onDragOver:c,onDragLeave:l,onDrop:g,onClear:u,type:m}=e,h=(0,s.A)(),{scrollTop:f,locale:p}=(0,C.S)(),[y,v]=(0,o.useState)(!1),[x,w]=(0,o.useState)(!1),[_,M]=(0,o.useState)(10),j=(0,o.useRef)(!1),A=(0,o.useRef)(null),S=Math.max(Math.floor(t.width/2),re),D=Math.max(Math.floor(t.height/2),re),[N,T]=(0,o.useState)(S),[k,L]=(0,o.useState)(D),[oe,ne]=(0,o.useState)(0),[ae,ie]=(0,o.useState)(0),se=(0,o.useRef)(!1),ce=(0,o.useRef)(!1),le=(0,o.useRef)(null),ge=(0,o.useRef)(null),de=(0,o.useRef)(0),ue=(0,o.useRef)(0),me=(0,o.useRef)(0),he=(0,o.useRef)(0),fe=(0,o.useRef)(0),pe=(0,o.useRef)(0),ye=(0,o.useRef)(),ve=e=>{var t=e.offsetLeft,r=e.offsetTop;let o=e.offsetParent;for(;null!=o;)t+=o.offsetLeft,r+=o.offsetTop,o=o.offsetParent;return{left:t,top:r}},xe=e=>{let t=e.clientX;const r=P.findDOMNode(ge.current),{left:o}=ve(r),n=o,a=n+de.current;t>a?t=a:t<n&&(t=n);const i=P.findDOMNode(A.current),s=N-2,c=t-s-ve(i).left;T(Math.max(Math.floor(s+c),re))},we=e=>{let t=e.clientY+f;const r=P.findDOMNode(ge.current),{top:o}=ve(r),n=o,a=P.findDOMNode(A.current),i=ve(a).top,s=i+a.offsetHeight;t<n?t=n:t>s&&(t=s),ne(Math.min(Math.floor(oe+t-i),ue.current-re));const c=k;L(Math.max(Math.floor(c+i-t),re))},_e=e=>{let t=e.clientX;const r=P.findDOMNode(ge.current),{left:o}=ve(r),n=o,a=P.findDOMNode(A.current),i=ve(a).left,s=i+a.offsetWidth;t<n?t=n:t>s&&(t=s),ie(Math.min(Math.floor(ae+t-i),de.current-re));const c=N;T(Math.max(Math.floor(c+i-t),re))},Me=e=>{let t=e.clientY+f;const r=P.findDOMNode(ge.current),{top:o}=ve(r),n=o,a=n+ue.current;t<n?t=n:t>a&&(t=a);const i=P.findDOMNode(A.current),s=k-2,c=t-s-ve(i).top;L(Math.max(Math.floor(s+c),re))},je=(e,t)=>{e.stopPropagation(),e.target.style.backgroundColor="#DC0000",se.current=!0,ye.current=t},Ae=()=>{se.current=!1,ce.current=!1,A.current&&Array.prototype.forEach.call(A.current.children,(e=>{e.style.backgroundColor="#FF8E9E"}))};(0,o.useEffect)((()=>{const{width:e,height:r}=t;if(e<20||r<20)return n.Ay.error(h.formatMessage({id:"page.imageProcessingTool.imageTooSmall"})),void v(!1);if(e>1350||r>1350)return n.Ay.error(h.formatMessage({id:"page.imageProcessingTool.imageTooLarge"})),void v(!1);const o=Math.max(Math.floor(t.width/2),re),a=Math.max(Math.floor(t.height/2),re);if(T(o),L(a),ie(0),ne(0),y){if(ge.current){const e=P.findDOMNode(ge.current),{offsetWidth:t,offsetHeight:r}=e;de.current=t,ue.current=r}}else v(!0);"clip"===m&&w(!1)}),[t]),(0,o.useEffect)((()=>{if(y&&ge.current){const e=P.findDOMNode(ge.current),{offsetWidth:t,offsetHeight:r}=e;de.current=t,ue.current=r}}),[y]);return(0,b.jsxs)("div",{className:R,children:[(0,b.jsx)("div",{className:I,style:{borderColor:i?"#0E5E6F":"#3A8891"},onDragOver:c,onDragLeave:l,onDrop:g,children:y&&(0,b.jsx)("div",{className:B,style:{width:"".concat(t.width,"px"),height:"".concat(t.height,"px")},onMouseMove:e=>{if(ce.current){const t=P.findDOMNode(A.current),{offsetWidth:r,offsetHeight:o}=t,n=e.clientX-me.current,a=e.clientY-he.current,i=Math.floor(pe.current+a),s=Math.floor(fe.current+n);i<0?ne(0):i>ue.current-o-2?ne(Math.max(ue.current-o-2,0)):ne(i),s<0?ie(0):s>de.current-r-2?ie(Math.max(de.current-r-2,0)):ie(s)}if(se.current)switch(ye.current){case te.right:xe(e);break;case te.up:we(e);break;case te.left:_e(e);break;case te.down:Me(e);break;case te.leftUp:_e(e),we(e);break;case te.leftDown:_e(e),Me(e);break;case te.rightUp:xe(e),we(e);break;case te.rightDown:xe(e),Me(e)}},onMouseUp:Ae,onMouseLeave:Ae,ref:le,children:(0,b.jsxs)("div",{className:F,ref:ge,children:[(0,b.jsx)("img",{src:t.imgUrl,className:G}),(0,b.jsx)("div",{className:W}),(0,b.jsx)("img",{src:t.imgUrl,className:U,style:{clip:"rect(".concat(oe,"px, ").concat(ae+N,"px, ").concat(oe+k,"px, ").concat(ae,"px)")}}),(0,b.jsxs)("div",{className:z,style:{position:"absolute",width:"".concat(N,"px"),height:"".concat(k,"px"),top:"".concat(oe,"px"),left:"".concat(ae,"px")},onMouseDown:e=>{me.current=e.clientX,he.current=e.clientY;const t=P.findDOMNode(A.current);pe.current=t.offsetTop,fe.current=t.offsetLeft,ce.current=!0},ref:A,children:[(0,b.jsx)("div",{className:"".concat(H," ").concat(Y),onMouseDown:e=>je(e,te.leftUp)}),(0,b.jsx)("div",{className:"".concat(H," ").concat(J),onMouseDown:e=>je(e,te.up)}),(0,b.jsx)("div",{className:"".concat(H," ").concat(K),onMouseDown:e=>je(e,te.rightUp)}),(0,b.jsx)("div",{className:"".concat(H," ").concat(Z),onMouseDown:e=>je(e,te.right)}),(0,b.jsx)("div",{className:"".concat(H," ").concat(X),onMouseDown:e=>je(e,te.rightDown)}),(0,b.jsx)("div",{className:"".concat(H," ").concat(Q),onMouseDown:e=>je(e,te.down)}),(0,b.jsx)("div",{className:"".concat(H," ").concat(V),onMouseDown:e=>je(e,te.leftDown)}),(0,b.jsx)("div",{className:"".concat(H," ").concat(q),onMouseDown:e=>je(e,te.left)})]})]})})}),y&&(0,b.jsxs)("div",{className:$,children:[(0,b.jsxs)("div",{className:q,children:["clip"===m&&(0,b.jsx)(O.A,{checked:x,onChange:e=>{w(e.target.checked)},children:h.formatMessage({id:"page.imageProcessingTool.WhetherRetainOriginalDimension"})}),(0,b.jsx)(E.A,{style:{width:"zh-cn"===p?"160px":"200px"},min:re,max:t.width,precision:0,value:N,addonBefore:h.formatMessage({id:"common.clippingWidth"}),onChange:e=>{const{width:r}=t;e&&e+ae>r&&ie(r-e),T(e||0)}}),(0,b.jsx)(E.A,{style:{width:"zh-cn"===p?"160px":"200px"},min:re,max:t.height,precision:0,value:k,addonBefore:h.formatMessage({id:"common.clippingHeight"}),onChange:e=>{const{height:r}=t;e&&e+oe>r&&ne(r-e),L(e||0)}}),(0,b.jsx)(E.A,{style:{width:"zh-cn"===p?"160px":"190px"},min:0,max:t.width-re,precision:0,value:ae,addonBefore:h.formatMessage({id:"common.distanceLeft"}),onChange:e=>{ie(e||0);const{width:r}=t;e&&e+N>r&&T(r-e)}}),(0,b.jsx)(E.A,{style:{width:"zh-cn"===p?"160px":"190px"},min:0,max:t.height-re,precision:0,value:oe,addonBefore:h.formatMessage({id:"common.distanceTop"}),onChange:e=>{ne(e||0);const{height:r}=t;e&&e+k>r&&L(r-e)}}),"mosaic"===m&&(0,b.jsx)(E.A,{style:{width:"zh-cn"===p?"200px":"220px"},min:2,max:40,precision:0,value:_,addonBefore:h.formatMessage({id:"common.mosaicGrainSize"}),onChange:e=>{M(e||0)}}),(0,b.jsx)(a.Ay,{type:"primary",className:ee,onClick:()=>{if(j.current)return void n.Ay.warning(h.formatMessage({id:"common.workHard"}));j.current=!0;let e=null;"clip"===m?e=(0,d.J)(t.imageData,N,k,oe,ae,x,t.fileType):"mosaic"===m&&(e=(0,d.z7)(t.imageData,N,k,oe,ae,_)),e?r(e):n.Ay.error(h.formatMessage({id:"common.operationFailure"})),j.current=!1},disabled:!y,children:h.formatMessage({id:"common.confirm"})})]}),(0,b.jsx)(a.Ay,{className:Z,ghost:!0,type:"primary",onClick:u,children:h.formatMessage({id:"common.clear"})})]})]})},ne=e=>(0,b.jsx)(oe,{...e,type:"clip"}),ae={container:"RadiusClip_container__vpAMK",imgBox:"RadiusClip_imgBox__PrwTJ",content:"RadiusClip_content__3F1vb",operationBtns:"RadiusClip_operationBtns__RI0He",left:"RadiusClip_left__0vgFZ",operationBtn:"RadiusClip_operationBtn__0tefh",right:"RadiusClip_right__5TaKJ"},ie=e=>{const{imgInfo:t,exportImage:r,imgDragOver:i,onDragOver:c,onDragLeave:l,onDrop:g,onClear:u}=e,m=(0,s.A)(),[h,f]=(0,o.useState)(!1),p=(0,o.useRef)(!1),[y,v]=(0,o.useState)(!1),[x,w]=(0,o.useState)(4);(0,o.useEffect)((()=>{const{width:e,height:r}=t;return e<20||r<20?(n.Ay.error(m.formatMessage({id:"page.imageProcessingTool.imageTooSmall"})),void f(!1)):e>1350||r>1350?(n.Ay.error(m.formatMessage({id:"page.imageProcessingTool.imageTooLarge"})),void f(!1)):(f(!0),v(!1),void w(4))}),[t]);return(0,b.jsxs)("div",{className:ae.container,children:[(0,b.jsx)("div",{className:ae.imgBox,style:{borderColor:i?"#0E5E6F":"#3A8891"},onDragOver:c,onDragLeave:l,onDrop:g,children:h&&(0,b.jsx)("div",{className:ae.content,style:{width:"".concat(t.width,"px"),height:"".concat(t.height,"px"),borderRadius:"".concat(x,"px")},children:(0,b.jsx)("img",{src:t.imgUrl,className:ae.img})})}),h&&(0,b.jsxs)("div",{className:ae.operationBtns,children:[(0,b.jsxs)("div",{className:ae.left,children:["PNG"!==t.fileType&&(0,b.jsx)(O.A,{checked:y,onChange:e=>{v(e.target.checked)},children:m.formatMessage({id:"page.imageProcessingTool.clippedAndConvertedToPng"})}),(0,b.jsx)(E.A,{style:{width:"180px"},min:0,max:Math.min(Math.floor(t.width/2),Math.floor(t.height/2)),precision:0,value:x,addonBefore:m.formatMessage({id:"page.imageProcessingTool.filletRadius"}),onChange:e=>{w(e)}}),(0,b.jsx)(a.Ay,{type:"primary",className:ae.operationBtn,onClick:()=>{if(p.current)return void n.Ay.warning(m.formatMessage({id:"common.workHard"}));if(!x)return void n.Ay.warning(m.formatMessage({id:"page.imageProcessingTool.pleaseEnterFilletRadius"}));p.current=!0;const e=(0,d.Zc)(t.imageData,x,t.fileType,y);e?r(e,y?"PNG":t.fileType):n.Ay.error(m.formatMessage({id:"common.operationFailure"})),p.current=!1},disabled:!h,children:m.formatMessage({id:"common.confirm"})})]}),(0,b.jsx)(a.Ay,{className:ae.right,ghost:!0,type:"primary",onClick:u,children:m.formatMessage({id:"common.clear"})})]})]})},se=1e4,ce=e=>{const{imgInfo:t,exportImage:r,imgDragOver:i,onDragOver:c,onDragLeave:l,onDrop:g,onClear:u}=e,m=(0,s.A)(),[h,f]=(0,o.useState)(!0),[p,y]=(0,o.useState)(t.width),[v,x]=(0,o.useState)(t.height),w=(0,o.useRef)(!1);return(0,o.useEffect)((()=>{y(t.width),x(t.height)}),[t]),(0,b.jsxs)("div",{children:[(0,b.jsx)(T,{imgInfo:t,imgDragOver:i,onDragOver:c,onDragLeave:l,onDrop:g}),(0,b.jsxs)("div",{className:A,children:[(0,b.jsxs)("div",{className:S,children:[(0,b.jsx)(O.A,{checked:h,onChange:e=>{f(e.target.checked);const{width:r,height:o}=t;if(e.target.checked){if(p&&v)y(null),x(null);else if(p){const e=Math.floor(p*o/r);x(e)}else if(v){const e=Math.floor(v*r/o);y(e)}}else p||v||(y(r),x(o))},children:m.formatMessage({id:"common.whetherMaintainOriginalProportion"})}),(0,b.jsx)(E.A,{style:{width:"160px"},min:1,max:se,precision:0,value:p,addonBefore:m.formatMessage({id:"common.width"}),onChange:e=>{if(y(e),h&&e){const{width:r,height:o}=t,n=Math.floor(e*o/r);x(n)}}}),(0,b.jsx)(E.A,{style:{width:"160px"},min:1,max:se,precision:0,value:v,addonBefore:m.formatMessage({id:"common.height"}),onChange:e=>{if(x(e),h&&e){const{width:r,height:o}=t,n=Math.floor(e*r/o);y(n)}}}),(0,b.jsx)(a.Ay,{type:"primary",className:D,onClick:()=>{if(w.current)return void n.Ay.warning(m.formatMessage({id:"common.workHard"}));const{imgUrl:e,width:o,height:a}=t;if(!p||!v)return void n.Ay.warning(m.formatMessage({id:"common.pleaseEnterWidthOrHeight"}));w.current=!0;const i=(0,d.QZ)(e,o,a,p,v,se);i?r(i):n.Ay.error(m.formatMessage({id:"common.operationFailure"})),w.current=!1},children:m.formatMessage({id:"common.confirm"})})]}),(0,b.jsx)(a.Ay,{className:N,ghost:!0,type:"primary",onClick:u,children:m.formatMessage({id:"common.clear"})})]})]})};var le=r(6531);const ge=e=>{const{imgInfo:t,exportImage:r,imgDragOver:i,onDragOver:c,onDragLeave:l,onDrop:g,onClear:u}=e,m=(0,s.A)(),[h,f]=(0,o.useState)(0),p=(0,o.useRef)(!1),y=e=>{f(e)};return(0,o.useEffect)((()=>{f(0)}),[t]),(0,b.jsxs)("div",{children:[(0,b.jsx)(T,{imgInfo:t,imgDragOver:i,onDragOver:c,onDragLeave:l,onDrop:g}),(0,b.jsxs)("div",{className:A,children:[(0,b.jsxs)("div",{className:S,children:[(0,b.jsxs)("div",{className:D,children:[(0,b.jsx)("span",{style:{color:"#444",marginRight:"6px"},children:m.formatMessage({id:"page.imageProcessingTool.darken"})}),(0,b.jsx)(le.A,{min:-255,max:255,marks:{0:"0"},value:"number"==typeof h?h:0,onChange:y}),(0,b.jsx)("span",{style:{color:"#444",marginLeft:"6px"},children:m.formatMessage({id:"page.imageProcessingTool.lighten"})}),(0,b.jsx)(E.A,{style:{margin:"0 16px"},min:-255,max:255,precision:0,value:h,onChange:y})]}),(0,b.jsx)(a.Ay,{type:"primary",className:D,onClick:()=>{if(p.current)return void n.Ay.warning(m.formatMessage({id:"common.workHard"}));const{imageData:e}=t;if(!h)return void n.Ay.warning(m.formatMessage({id:"page.imageProcessingTool.pleaseEnterBrightness"}));p.current=!0;const o=(0,d.eZ)(e,h);o?r(o):n.Ay.error(m.formatMessage({id:"common.operationFailure"})),p.current=!1},children:m.formatMessage({id:"common.confirm"})})]}),(0,b.jsx)(a.Ay,{className:N,ghost:!0,type:"primary",onClick:u,children:m.formatMessage({id:"common.clear"})})]})]})},de=e=>{const{imgInfo:t,exportImage:r,imgDragOver:i,onDragOver:c,onDragLeave:l,onDrop:g,onClear:u}=e,m=(0,s.A)(),[h,f]=(0,o.useState)(!1),[p,y]=(0,o.useState)(!1),[v,x]=(0,o.useState)(0),w=(0,o.useRef)(!1),_=e=>{x(e)};return(0,o.useEffect)((()=>{"PNG"!==t.fileType?(n.Ay.warning(m.formatMessage({id:"page.imageProcessingTool.pleaseUploadPng"})),f(!1)):f(!0),x(0),y(!1)}),[t]),(0,b.jsxs)("div",{children:[(0,b.jsx)(T,{imgInfo:t,imgDragOver:i,onDragOver:c,onDragLeave:l,onDrop:g}),h&&(0,b.jsxs)("div",{className:A,children:[(0,b.jsxs)("div",{className:S,children:[(0,b.jsx)(O.A,{checked:p,onChange:e=>{y(e.target.checked),e.target.checked&&x(1)},children:m.formatMessage({id:"page.imageProcessingTool.whetherValueFixed"})}),!p&&(0,b.jsxs)("div",{className:D,children:[(0,b.jsx)("span",{style:{color:"#444",marginRight:"6px"},children:m.formatMessage({id:"page.imageProcessingTool.becomeTransparent"})}),(0,b.jsx)(le.A,{min:-1,max:1,step:.1,marks:{0:"0"},value:"number"==typeof v?v:0,onChange:_}),(0,b.jsx)("span",{style:{color:"#444",marginLeft:"6px"},children:m.formatMessage({id:"page.imageProcessingTool.becomeOpaque"})})]}),(0,b.jsx)(E.A,{min:p?0:-1,max:1,step:.1,precision:1,value:v,onChange:_}),(0,b.jsx)(a.Ay,{type:"primary",className:D,onClick:()=>{if(w.current)return void n.Ay.warning(m.formatMessage({id:"common.workHard"}));if("number"!=typeof v)return void n.Ay.warning(m.formatMessage({id:"page.imageProcessingTool.pleaseEnterDiaphaneity"}));w.current=!0;const{imageData:e}=t,o=(0,d.PE)(e,v,p);o?r(o):n.Ay.error(m.formatMessage({id:"common.operationFailure"})),w.current=!1},children:m.formatMessage({id:"common.confirm"})})]}),(0,b.jsx)(a.Ay,{className:N,ghost:!0,type:"primary",onClick:u,children:m.formatMessage({id:"common.clear"})})]})]})},ue="AddWatermark_container__NEuoJ",me="AddWatermark_imgBox__3qbq3",he="AddWatermark_content__QQFS3",fe="AddWatermark_leftBox__Sd-0G",pe="AddWatermark_img1__uP899",ye="AddWatermark_clipBox__Evais",ve="AddWatermark_operationBtns__vlegX",xe="AddWatermark_left__9eyaB",we="AddWatermark_box__pVtiw",_e="AddWatermark_top__0u+bM",Me="AddWatermark_uploadBtn__dbBA2",je="AddWatermark_bottom__rsuAd",Ae="AddWatermark_operationBtn__oP0RW",Se="AddWatermark_right__aIKCm",De=20,Ne=e=>{const{imgInfo:t,exportImage:r,imgDragOver:c,onDragOver:g,onDragLeave:u,onDrop:m,onClear:h}=e,f=(0,s.A)(),[p,y]=(0,o.useState)(!1),[v,x]=(0,o.useState)(null),w=(0,o.useRef)(!1),_=(0,o.useRef)(null),M=Math.max(Math.floor(t.width/2),De),j=Math.max(Math.floor(t.height/2),De),[A,S]=(0,o.useState)(M),[D,N]=(0,o.useState)(j),[T,k]=(0,o.useState)(0),[L,O]=(0,o.useState)(0),C=(0,o.useRef)(!1),R=(0,o.useRef)(null),I=(0,o.useRef)(null),B=(0,o.useRef)(0),F=(0,o.useRef)(0),G=(0,o.useRef)(0),U=(0,o.useRef)(0),W=(0,o.useRef)(0),z=(0,o.useRef)(0),H=()=>{const e=Math.max(Math.floor(t.width/2),De),r=Math.max(Math.floor(t.height/2),De);S(e),N(r),O(0),k(0)},Y=()=>{C.current=!1};(0,o.useEffect)((()=>{const{width:e,height:r}=t;return e<De||r<De?(n.Ay.error(f.formatMessage({id:"page.imageProcessingTool.imageTooSmall"})),void y(!1)):e>=1350||r>=1350?(n.Ay.error(f.formatMessage({id:"page.imageProcessingTool.imageTooLarge"})),void y(!1)):(y(!0),void x(null))}),[t]),(0,o.useEffect)((()=>{if(p&&v&&I.current){const e=P.findDOMNode(I.current),{offsetWidth:t,offsetHeight:r}=e;B.current=t,F.current=r}}),[p,v]);return(0,b.jsxs)("div",{className:ue,children:[(0,b.jsx)("div",{className:me,style:{borderColor:c?"#0E5E6F":"#3A8891"},onDragOver:e=>{v?(e.stopPropagation(),e.preventDefault()):g(e)},onDragLeave:e=>{v?(e.stopPropagation(),e.preventDefault()):u(e)},onDrop:e=>{v?(e.stopPropagation(),e.preventDefault()):m(e)},children:p&&(0,b.jsx)("div",{className:he,style:{width:"".concat(t.width,"px"),height:"".concat(t.height,"px")},onMouseMove:e=>{if(C.current&&_.current){const t=P.findDOMNode(_.current),{offsetWidth:r,offsetHeight:o}=t,n=e.clientX-G.current,a=e.clientY-U.current,i=Math.floor(z.current+a),s=Math.floor(W.current+n);i<0?k(0):i>F.current-o-2?k(Math.max(F.current-o-2,0)):k(i),s<0?O(0):s>B.current-r-2?O(Math.max(B.current-r-2,0)):O(s)}},onMouseUp:Y,onMouseLeave:Y,ref:R,children:(0,b.jsxs)("div",{className:fe,ref:I,children:[(0,b.jsx)("img",{src:t.imgUrl,className:pe}),v&&(0,b.jsx)("div",{className:ye,style:{position:"absolute",width:"".concat(A,"px"),height:"".concat(D,"px"),top:"".concat(T,"px"),left:"".concat(L,"px")},onMouseDown:e=>{G.current=e.clientX,U.current=e.clientY;const t=P.findDOMNode(_.current);z.current=t.offsetTop,W.current=t.offsetLeft,C.current=!0},ref:_,children:(0,b.jsx)("img",{src:v.imgUrl,alt:""})})]})})}),p&&(0,b.jsxs)("div",{className:ve,children:[(0,b.jsx)("div",{className:xe,children:(0,b.jsxs)("div",{className:we,children:[(0,b.jsxs)("div",{className:_e,children:[(0,b.jsxs)(a.Ay,{type:"primary",className:Me,children:[(0,b.jsx)(i.A,{}),f.formatMessage({id:"common.uploadWatermark"}),(0,b.jsx)("input",{type:"file",accept:"image/jpg, image/jpeg, image/png",onChange:e=>{const{files:r}=e.target;r&&0!==r.length&&(0,l._v)(r[0],(e=>{if(e){const{width:r,height:o}=e;if(r<=20||o<=20)return x(null),H(),void n.Ay.error(f.formatMessage({id:"common.watermarkSizeLimit"}));if(r>t.width||o>t.height)return x(null),H(),void n.Ay.error(f.formatMessage({id:"common.watermarkSizeTooLarge"}));x(e),S(r),N(o),O(0),k(0)}else x(null),H(),n.Ay.error(f.formatMessage({id:"common.parsingDataFailure"}))}))}})]}),v?v.name:f.formatMessage({id:"common.noData"})]}),v&&(0,b.jsxs)("div",{className:je,children:[(0,b.jsx)(E.A,{style:{width:"160px"},min:0,max:t.width-De,precision:0,value:L,addonBefore:f.formatMessage({id:"common.distanceLeft"}),onChange:e=>{O(e||0);const{width:r}=t;e&&e+A>r&&S(r-e)}}),(0,b.jsx)(E.A,{style:{width:"160px"},min:0,max:t.height-De,precision:0,value:T,addonBefore:f.formatMessage({id:"common.distanceTop"}),onChange:e=>{k(e||0);const{height:r}=t;e&&e+D>r&&N(r-e)}}),(0,b.jsx)(a.Ay,{type:"primary",className:Ae,onClick:()=>{if(w.current)n.Ay.warning(f.formatMessage({id:"common.workHard"}));else{if(v){w.current=!0;const e=(0,d.Qm)(t.imageData,v.imageData,T,L);e?r(e):n.Ay.error(f.formatMessage({id:"common.operationFailure"}))}w.current=!1}},disabled:!p,children:f.formatMessage({id:"common.confirm"})})]})]})}),(0,b.jsx)(a.Ay,{className:Se,ghost:!0,type:"primary",onClick:h,children:f.formatMessage({id:"common.clear"})})]})]})},be=e=>(0,b.jsx)(oe,{...e,type:"mosaic"}),Te=e=>{const{imgInfo:t,imgDragOver:r,onDragOver:i,onDragLeave:c,onDrop:g,onClear:u}=e,m=(0,s.A)(),{locale:h}=(0,C.S)(),[f,p]=(0,o.useState)(70),y=(0,o.useRef)(!1),v=e=>{if(!e)return;let r="image";if(t&&t.name){const e=t.name.split(".");e.length>1?(e.splice(e.length-1,1,t.fileType.toLowerCase()),r=e.join(".")):(e.push(t.fileType.toLowerCase()),r=e.join("."))}(0,l.HP)(e,r)};return(0,o.useEffect)((()=>{p(70)}),[t]),(0,b.jsxs)("div",{children:[(0,b.jsx)(T,{imgInfo:t,imgDragOver:r,onDragOver:i,onDragLeave:c,onDrop:g}),(0,b.jsxs)("div",{className:A,children:[(0,b.jsxs)("div",{className:S,children:[(0,b.jsx)(E.A,{style:{width:"zh-cn"===h?"200px":"240px"},min:10,max:90,precision:0,value:f,addonBefore:m.formatMessage({id:"page.imageProcessingTool.compressibility"}),addonAfter:"%",onChange:e=>{p(e||10)}}),(0,b.jsx)(a.Ay,{type:"primary",className:D,onClick:()=>{if(y.current)return void n.Ay.warning(m.formatMessage({id:"common.workHard"}));const{imageData:e,imgUrl:r,width:o,height:a,fileType:i}=t;y.current=!0,["JPG","JPEG"].includes(i)?(0,d.HT)(r,o,a,i,f,(e=>{e?v(e):n.Ay.error(m.formatMessage({id:"common.operationFailure"})),y.current=!1})):(0,d.HT)(e,o,a,i,f,(e=>{e?v(e):n.Ay.error(m.formatMessage({id:"common.operationFailure"})),y.current=!1}))},children:m.formatMessage({id:"common.confirm"})})]}),(0,b.jsx)(a.Ay,{className:N,ghost:!0,type:"primary",onClick:u,children:m.formatMessage({id:"common.clear"})})]})]})};var ke=r(55238),Le=r(97795);function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}function Oe(e,t,r,o,n,a,i){try{var s=e[a](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}function Ee(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(-1!==t.indexOf(o))continue;r[o]=e[o]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Ce(){Ce=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function g(e,t,r,o){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),s=new k(o||[]);return n(i,"_invoke",{value:D(e,r,s)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=g;var u="suspendedStart",m="suspendedYield",h="executing",f="completed",p={};function y(){}function v(){}function x(){}var w={};l(w,i,(function(){return this}));var _=Object.getPrototypeOf,M=_&&_(_(L([])));M&&M!==r&&o.call(M,i)&&(w=M);var j=x.prototype=y.prototype=Object.create(w);function A(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(n,a,i,s){var c=d(e[n],e,a);if("throw"!==c.type){var l=c.arg,g=l.value;return g&&"object"==typeof g&&o.call(g,"__await")?t.resolve(g.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(g).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,s)}))}s(c.arg)}var a;n(this,"_invoke",{value:function(e,o){function n(){return new t((function(t,n){r(e,o,t,n)}))}return a=a?a.then(n,n):n()}})}function D(t,r,o){var n=u;return function(a,i){if(n===h)throw Error("Generator is already running");if(n===f){if("throw"===a)throw i;return{value:e,done:!0}}for(o.method=a,o.arg=i;;){var s=o.delegate;if(s){var c=N(s,o);if(c){if(c===p)continue;return c}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(n===u)throw n=f,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);n=h;var l=d(t,r,o);if("normal"===l.type){if(n=o.done?f:m,l.arg===p)continue;return{value:l.arg,done:o.done}}"throw"===l.type&&(n=f,o.method="throw",o.arg=l.arg)}}}function N(t,r){var o=r.method,n=t.iterator[o];if(n===e)return r.delegate=null,"throw"===o&&t.iterator.return&&(r.method="return",r.arg=e,N(t,r),"throw"===r.method)||"return"!==o&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+o+"' method")),p;var a=d(n,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,p;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function r(){for(;++n<t.length;)if(o.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(typeof t+" is not iterable")}return v.prototype=x,n(j,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:v,configurable:!0}),v.displayName=l(x,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,l(e,c,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},A(S.prototype),l(S.prototype,s,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,o,n,a){void 0===a&&(a=Promise);var i=new S(g(e,r,o,n),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},A(j),l(j,c,"Generator"),l(j,i,(function(){return this})),l(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var o in t)r.push(o);return r.reverse(),function e(){for(;r.length;){var o=r.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},t.values=L,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(o,n){return s.type="throw",s.arg=t,r.next=o,n&&(r.method="next",r.arg=e),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=o.call(i,"catchLoc"),l=o.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var o=r.completion;if("throw"===o.type){var n=o.arg;T(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(t,r,o){return this.delegate={iterator:L(t),resultName:r,nextLoc:o},"next"===this.method&&(this.arg=e),p}},t}function Re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,n,a,i,s=[],c=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t);else for(;!(c=(o=a.call(r)).done)&&(s.push(o.value),s.length!==t);c=!0);}catch(e){l=!0,n=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw n}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Pe(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}!function(e){var t=function(e){var t,r=Object.prototype,o=r.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function g(e,t,r,o){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),s=new k(o||[]);return n(i,"_invoke",{value:D(e,r,s)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=g;var u="suspendedStart",m="suspendedYield",h="executing",f="completed",p={};function y(){}function v(){}function x(){}var w={};l(w,i,(function(){return this}));var _=Object.getPrototypeOf,M=_&&_(_(L([])));M&&M!==r&&o.call(M,i)&&(w=M);var j=x.prototype=y.prototype=Object.create(w);function A(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(n,a,i,s){var c=d(e[n],e,a);if("throw"!==c.type){var l=c.arg,g=l.value;return g&&"object"==typeof g&&o.call(g,"__await")?t.resolve(g.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(g).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,s)}))}s(c.arg)}var a;n(this,"_invoke",{value:function(e,o){function n(){return new t((function(t,n){r(e,o,t,n)}))}return a=a?a.then(n,n):n()}})}function D(e,t,r){var o=u;return function(n,a){if(o===h)throw new Error("Generator is already running");if(o===f){if("throw"===n)throw a;return P()}for(r.method=n,r.arg=a;;){var i=r.delegate;if(i){var s=N(i,r);if(s){if(s===p)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===u)throw o=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var c=d(e,t,r);if("normal"===c.type){if(o=r.done?f:m,c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=f,r.method="throw",r.arg=c.arg)}}}function N(e,r){var o=r.method,n=e.iterator[o];if(n===t)return r.delegate=null,"throw"===o&&e.iterator.return&&(r.method="return",r.arg=t,N(e,r),"throw"===r.method)||"return"!==o&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+o+"' method")),p;var a=d(n,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,p;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,p):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function L(e){if(e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function r(){for(;++n<e.length;)if(o.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}return{next:P}}function P(){return{value:t,done:!0}}return v.prototype=x,n(j,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:v,configurable:!0}),v.displayName=l(x,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,l(e,c,"GeneratorFunction")),e.prototype=Object.create(j),e},e.awrap=function(e){return{__await:e}},A(S.prototype),l(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,o,n,a){void 0===a&&(a=Promise);var i=new S(g(t,r,o,n),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},A(j),l(j,c,"Generator"),l(j,i,(function(){return this})),l(j,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var o in t)r.push(o);return r.reverse(),function e(){for(;r.length;){var o=r.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},e.values=L,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(o,n){return s.type="throw",s.arg=e,r.next=o,n&&(r.method="next",r.arg=t),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=o.call(i,"catchLoc"),l=o.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var o=r.completion;if("throw"===o.type){var n=o.arg;T(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,o){return this.delegate={iterator:L(e),resultName:r,nextLoc:o},"next"===this.method&&(this.arg=t),p}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}({exports:{}});var Ie=(e,t)=>"".concat(e,"-").concat(t,"-").concat(Math.random().toString(16).slice(3,8));const Be=Ie;let Fe=0;var Ge=e=>{let{id:t,action:r,payload:o={}}=e,n=t;return void 0===n&&(n=Be("Job",Fe),Fe+=1),{id:n,action:r,payload:o}},Ue={};let We=!1;Ue.logging=We,Ue.setLogging=e=>{We=e},Ue.log=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return We?console.log.apply(undefined,t):null};const ze=Ge,{log:He}=Ue,Ye=Ie;let Je=0;const Ke=function(){return"undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||(!("undefined"==typeof process||"object"!=typeof process.versions||!process.versions.electron)||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)};const Ze="browser"===(e=>{const t={};return"undefined"!=typeof WorkerGlobalScope?t.type="webworker":Ke()?t.type="electron":"object"==typeof document?t.type="browser":"object"==typeof process&&(t.type="node"),void 0===e?t:t[e]})("type")?e=>new URL(e,window.location.href).href:e=>e;var Xe={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};var Qe={...{workerBlobURL:!0,logger:()=>{}},workerPath:"https://cdn.jsdelivr.net/npm/tesseract.js@v".concat("5.1.0","/dist/worker.min.js")};const Ve=e=>new Promise(((t,r)=>{const o=new FileReader;o.onload=()=>{t(o.result)},o.onerror=e=>{let{target:{error:{code:t}}}=e;r(Error("File could not be read! Code=".concat(t)))},o.readAsArrayBuffer(e)})),qe=async e=>{let t=e;if(void 0===e)return"undefined";if("string"==typeof e)if(/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(e))t=atob(e.split(",")[1]).split("").map((e=>e.charCodeAt(0)));else{const r=await fetch(e);t=await r.arrayBuffer()}else if("undefined"!=typeof HTMLElement&&e instanceof HTMLElement)"IMG"===e.tagName&&(t=await qe(e.src)),"VIDEO"===e.tagName&&(t=await qe(e.poster)),"CANVAS"===e.tagName&&await new Promise((r=>{e.toBlob((async e=>{t=await Ve(e),r()}))}));else if("undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas){const r=await e.convertToBlob();t=await Ve(r)}else(e instanceof File||e instanceof Blob)&&(t=await Ve(e));return new Uint8Array(t)};var $e={defaultOptions:Qe,spawnWorker:e=>{let t,{workerPath:r,workerBlobURL:o}=e;if(Blob&&URL&&o){const e=new Blob(['importScripts("'.concat(r,'");')],{type:"application/javascript"});t=new Worker(URL.createObjectURL(e))}else t=new Worker(r);return t},terminateWorker:e=>{e.terminate()},onMessage:(e,t)=>{e.onmessage=e=>{let{data:r}=e;t(r)}},send:async(e,t)=>{e.postMessage(t)},loadImage:qe};const et=e=>{const t={...e};return["corePath","workerPath","langPath"].forEach((r=>{e[r]&&(t[r]=Ze(t[r]))})),t},tt=e=>{const t=[],r=[],o=[],n=[],a=[];return e.blocks&&e.blocks.forEach((i=>{i.paragraphs.forEach((t=>{t.lines.forEach((r=>{r.words.forEach((o=>{o.symbols.forEach((n=>{a.push({...n,page:e,block:i,paragraph:t,line:r,word:o})})),n.push({...o,page:e,block:i,paragraph:t,line:r})})),o.push({...r,page:e,block:i,paragraph:t})})),r.push({...t,page:e,block:i})})),t.push({...i,page:e})})),{...e,blocks:t,paragraphs:r,lines:o,words:n,symbols:a}},rt=Ge,{log:ot}=Ue,nt=Ie,at=Xe,{defaultOptions:it,spawnWorker:st,terminateWorker:ct,onMessage:lt,loadImage:gt,send:dt}=$e;let ut=0;var mt=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"eng",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:at.LSTM_ONLY,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const n=nt("Worker",ut),{logger:a,errorHandler:i,...s}=et({...it,...r}),c={},l={},g="string"==typeof e?e.split("+"):e;let d=t,u=o;const m=[at.DEFAULT,at.LSTM_ONLY].includes(t)&&!s.legacyCore;let h,f;const p=new Promise(((e,t)=>{f=e,h=t}));let y=st(s);y.onerror=e=>{h(e.message)},ut+=1;const v=(e,t)=>{c[e]=t},x=(e,t)=>{l[e]=t},w=e=>{let{id:t,action:r,payload:o}=e;return new Promise(((e,a)=>{ot("[".concat(n,"]: Start ").concat(t,", action=").concat(r));const i="".concat(r,"-").concat(t);v(i,e),x(i,a),dt(y,{workerId:n,jobId:t,action:r,payload:o})}))},_=(e,t)=>w(rt({id:t,action:"loadLanguage",payload:{langs:e,options:{langPath:s.langPath,dataPath:s.dataPath,cachePath:s.cachePath,cacheMethod:s.cacheMethod,gzip:s.gzip,lstmOnly:[at.LSTM_ONLY,at.TESSERACT_LSTM_COMBINED].includes(d)&&!s.legacyLang}}})),M=(e,t,r,o)=>w(rt({id:o,action:"initialize",payload:{langs:e,oem:t,config:r}}));lt(y,(e=>{let{workerId:t,jobId:r,status:o,action:n,data:s}=e;const g="".concat(n,"-").concat(r);if("resolve"===o){ot("[".concat(t,"]: Complete ").concat(r));let e=s;"recognize"===n?e=tt(s):"getPDF"===n&&(e=Array.from({...s,length:Object.keys(s).length})),c[g]({jobId:r,data:e})}else if("reject"===o){if(l[g](s),"load"===n&&h(s),!i)throw Error(s);i(s)}else"progress"===o&&a({...s,userJobId:r})}));const j={id:n,worker:y,setResolve:v,setReject:x,load:()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),writeText:(e,t,r)=>w(rt({id:r,action:"FS",payload:{method:"writeFile",args:[e,t]}})),readText:(e,t)=>w(rt({id:t,action:"FS",payload:{method:"readFile",args:[e,{encoding:"utf8"}]}})),removeFile:(e,t)=>w(rt({id:t,action:"FS",payload:{method:"unlink",args:[e]}})),FS:(e,t,r)=>w(rt({id:r,action:"FS",payload:{method:e,args:t}})),loadLanguage:()=>console.warn("`loadLanguage` is depreciated and should be removed from code (workers now come with language pre-loaded)"),initialize:()=>console.warn("`initialize` is depreciated and should be removed from code (workers now come pre-initialized)"),reinitialize:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"eng",t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;if(m&&[at.TESSERACT_ONLY,at.TESSERACT_LSTM_COMBINED].includes(t))throw Error("Legacy model requested but code missing.");const n=t||d;d=n;const a=r||u;u=a;const i=("string"==typeof e?e.split("+"):e).filter((e=>!g.includes(e)));return g.push(...i),i.length>0?_(i,o).then((()=>M(e,n,a,o))):M(e,n,a,o)},setParameters:function(){return w(rt({id:arguments.length>1?arguments[1]:void 0,action:"setParameters",payload:{params:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}}))},recognize:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{blocks:!0,text:!0,hocr:!0,tsv:!0};return w(rt({id:arguments.length>3?arguments[3]:void 0,action:"recognize",payload:{image:await gt(e),options:t,output:r}}))},getPDF:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Tesseract OCR Result",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0;return console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),w(rt({id:r,action:"getPDF",payload:{title:e,textonly:t}}))},detect:async(e,t)=>{if(m)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return w(rt({id:t,action:"detect",payload:{image:await gt(e)}}))},terminate:async()=>(null!==y&&(ct(y),y=null),Promise.resolve())};var A;return w(rt({id:A,action:"load",payload:{options:{lstmOnly:m,corePath:s.corePath,logging:s.logging}}})).then((()=>_(e))).then((()=>M(e,t,o))).then((()=>f(j))).catch((()=>{})),p};const ht=mt;const ft=()=>{const e=Ye("Scheduler",Je),t={},r={};let o=[];Je+=1;const n=()=>Object.keys(t).length,a=()=>{if(0!==o.length){const e=Object.keys(t);for(let n=0;n<e.length;n+=1)if(void 0===r[e[n]]){o[0](t[e[n]]);break}}};return{addWorker:r=>(t[r.id]=r,He("[".concat(e,"]: Add ").concat(r.id)),He("[".concat(e,"]: Number of workers=").concat(n())),a(),r.id),addJob:async function(t){if(0===n())throw Error("[".concat(e,"]: You need to have at least one worker before adding jobs"));for(var i=arguments.length,s=new Array(i>1?i-1:0),c=1;c<i;c++)s[c-1]=arguments[c];return((t,n)=>new Promise(((i,s)=>{const c=ze({action:t,payload:n});o.push((async e=>{o.shift(),r[e.id]=c;try{i(await e[t].apply(void 0,[...n,c.id]))}catch(e){s(e)}finally{delete r[e.id],a()}})),He("[".concat(e,"]: Add ").concat(c.id," to JobQueue")),He("[".concat(e,"]: JobQueue length=").concat(o.length)),a()})))(t,s)},terminate:async()=>{Object.keys(t).forEach((async e=>{await t[e].terminate()})),o=[]},getQueueLen:()=>o.length,getNumWorkers:n}},pt=mt,yt={recognize:async(e,t,r)=>{const o=await ht(t,1,r);return o.recognize(e).finally((async()=>{await o.terminate()}))},detect:async(e,t)=>{const r=await ht("osd",0,t);return r.detect(e).finally((async()=>{await r.terminate()}))}},vt={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},xt=Xe,wt={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"},{setLogging:_t}=Ue;var Mt={languages:vt,OEM:xt,PSM:wt,createScheduler:ft,createWorker:pt,setLogging:_t,...yt},jt=["language","errorHandler"],At=function(){var e=Re((0,o.useState)(null),2),t=e[0],r=e[1],n=Re((0,o.useState)(""),2),a=n[0],i=n[1],s=Re((0,o.useState)(!1),2),c=s[0],l=s[1],g=(0,o.useCallback)(function(){var e,t=(e=Ce().mark((function e(t){var o,n,a,s,c,g,d,u,m=arguments;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=m.length>1&&void 0!==m[1]?m[1]:{},r(null),i(""),l(!0),n=o.language,a=void 0===n?"eng":n,s=o.errorHandler,c=Ee(o,jt),e.prev=5,e.next=8,Mt.createWorker(a);case 8:return g=e.sent,e.next=11,g.recognize(t,c);case 11:return d=e.sent,u=d.data,i(u.text),e.abrupt("return",u);case 17:throw e.prev=17,e.t0=e.catch(5),r(e.t0.message),s&&s(e.t0),e.t0;case 22:return e.prev=22,e.next=25,g.terminate();case 25:return l(!1),e.finish(22);case 27:case"end":return e.stop()}}),e,null,[[5,17,22,27]])})),function(){var t=this,r=arguments;return new Promise((function(o,n){var a=e.apply(t,r);function i(e){Oe(a,o,n,i,s,"next",e)}function s(e){Oe(a,o,n,i,s,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),[]);return{recognize:g,error:t,result:a,isRecognizing:c}};const{TextArea:St}=ke.A,Dt=e=>{const{imgInfo:t,imgDragOver:r,onDragOver:i,onDragLeave:c,onDrop:l,onClear:g}=e,d=(0,s.A)(),u=(0,o.useRef)(!1),{recognize:m,isRecognizing:h}=At(),[f,p]=(0,o.useState)([]),[y,v]=(0,o.useState)("");(0,o.useEffect)((()=>{p([]),v("")}),[t]);const x=(0,o.useMemo)((()=>Object.keys(vt).map((e=>({label:e,value:vt[e]})))),[]);return(0,b.jsxs)("div",{children:[(0,b.jsx)(T,{imgInfo:t,imgDragOver:r,onDragOver:i,onDragLeave:c,onDrop:l}),(0,b.jsxs)("div",{className:A,style:{alignItems:"center"},children:[(0,b.jsxs)("div",{className:S,children:[(0,b.jsxs)("span",{style:{color:"#333",marginTop:"6px"},children:[d.formatMessage({id:"page.imageProcessingTool.possibleLanguages"}),"："]}),(0,b.jsx)(Le.A,{mode:"multiple",allowClear:!0,maxTagTextLength:8,maxTagCount:2,style:{width:"300px"},value:f,onChange:e=>{p(e)},options:x}),(0,b.jsx)(a.Ay,{type:"primary",className:D,onClick:async()=>{if(u.current)return void n.Ay.warning(d.formatMessage({id:"common.workHard"}));if(f.length<=0)return void n.Ay.warning(d.formatMessage({id:"page.imageProcessingTool.pleaseSelectPossibleLanguages"}));const{imgUrl:e}=t;u.current=!0;const r=await m(e,{language:f,errorHandler:e=>console.error(e),tessedit_ocr_engine_mode:1,tessedit_pageseg_mode:1});v(r.text),u.current=!1},children:d.formatMessage({id:"common.confirm"})})]}),(0,b.jsx)(a.Ay,{className:N,ghost:!0,type:"primary",onClick:g,children:d.formatMessage({id:"common.clear"})})]}),(0,b.jsx)(St,{rows:12,value:y,style:{marginTop:"8px"}})]})};var Nt=function(e){return e[e.basicOperation=0]="basicOperation",e[e.rectClip=1]="rectClip",e[e.radiusClip=2]="radiusClip",e[e.changeSize=3]="changeSize",e[e.changeBrightness=4]="changeBrightness",e[e.changeDiaphaneity=5]="changeDiaphaneity",e[e.addWatermark=6]="addWatermark",e[e.coverWithMosaic=7]="coverWithMosaic",e[e.photoCompression=8]="photoCompression",e[e.textRecognition=9]="textRecognition",e}(Nt||{});const bt=()=>{const e=(0,s.A)(),[t,r]=(0,o.useState)(!1),[g,d]=(0,o.useState)(null),p=t=>{t&&0!==t.length&&(0,l._v)(t[0],(t=>{d(t),t||n.Ay.error(e.formatMessage({id:"common.parsingDataFailure"}))}))},y=e=>{e.stopPropagation(),e.preventDefault(),t||r(!0)},v=e=>{e.stopPropagation(),e.preventDefault(),t&&r(!1)},A=e=>{e.stopPropagation(),e.preventDefault(),t&&r(!1);const{files:o}=e.dataTransfer;p(o)},S={imgInfo:g,exportImage:(e,t)=>{if(!e||!g)return;const r=t?t.toLowerCase():g.fileType.toLowerCase();(0,l.Q1)(e,r,(e=>{if(e){let t="image";if(g&&g.name){const e=g.name.split(".");e.length>1?e.splice(e.length-1,1,r):e.push(r),t=e.join(".")}(0,l.HP)(e,t)}}))},imgDragOver:t,onDragOver:y,onDragLeave:v,onDrop:A,onClear:()=>{d(null)}},D=[{id:Nt.basicOperation,label:e.formatMessage({id:"menu.imageProcessingTool.basicOperation"}),element:(0,b.jsx)(L,{...S})},{id:Nt.rectClip,label:e.formatMessage({id:"menu.imageProcessingTool.rectangularClipping"}),element:(0,b.jsx)(ne,{...S})},{id:Nt.radiusClip,label:e.formatMessage({id:"menu.imageProcessingTool.roundedCornerClipping"}),element:(0,b.jsx)(ie,{...S})},{id:Nt.changeSize,label:e.formatMessage({id:"menu.imageProcessingTool.modifyTheSize"}),element:(0,b.jsx)(ce,{...S})},{id:Nt.changeBrightness,label:e.formatMessage({id:"menu.imageProcessingTool.modifyBrightness"}),element:(0,b.jsx)(ge,{...S})},{id:Nt.changeDiaphaneity,label:e.formatMessage({id:"menu.imageProcessingTool.modifyTransparency"}),element:(0,b.jsx)(de,{...S})},{id:Nt.addWatermark,label:e.formatMessage({id:"menu.imageProcessingTool.addWatermark"}),element:(0,b.jsx)(Ne,{...S})},{id:Nt.coverWithMosaic,label:e.formatMessage({id:"menu.imageProcessingTool.coverWithMosaics"}),element:(0,b.jsx)(be,{...S})},{id:Nt.photoCompression,label:e.formatMessage({id:"menu.imageProcessingTool.imageCompression"}),element:(0,b.jsx)(Te,{...S})},{id:Nt.textRecognition,label:e.formatMessage({id:"menu.imageProcessingTool.textRecognition"}),isNew:!0,element:(0,b.jsx)(Dt,{...S})}],[N,T]=(0,o.useState)(D[0].id);return(0,b.jsx)("div",{className:u,children:(0,b.jsxs)("div",{className:m,children:[(0,b.jsx)(c.A,{className:h,data:D,selectedTabId:N,onChange:e=>{T(e)}}),!g&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:f,style:{borderColor:t?"#0E5E6F":"#3A8891"},onDragOver:y,onDragLeave:v,onDrop:A,children:(0,b.jsxs)("div",{className:x,children:[(0,b.jsxs)(a.Ay,{type:"primary",className:w,children:[(0,b.jsx)(i.A,{}),e.formatMessage({id:"common.uploadFile"}),(0,b.jsx)("input",{type:"file",accept:"image/jpg, image/jpeg, image/png",onChange:e=>{const{files:t}=e.target;p(t)}})]}),(0,b.jsx)("p",{className:_,children:e.formatMessage({id:"common.dragTheFileHere"})}),(0,b.jsx)("p",{className:M,children:e.formatMessage({id:"common.supportedImageType"})})]})}),(0,b.jsxs)("div",{className:j,children:[e.formatMessage({id:"page.imageProcessingTool.extensionTipFront"}),(0,b.jsx)("span",{onClick:()=>{window.open("https://github.com/hepengwei/processing-image-tool")},children:" processing-image-tool "}),e.formatMessage({id:"page.imageProcessingTool.extensionTipBehind"})]})]}),g&&D.filter((e=>e.id===N))[0].element]})})}}}]);