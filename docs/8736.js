"use strict";(self.webpackChunkvisualization_collection=self.webpackChunkvisualization_collection||[]).push([[8736],{12650:(e,a,o)=>{o.d(a,{A:()=>s});o(96540);const r="Tabs_container__19GNQ";var t=o(74848);const s=e=>{const{data:a=[],selectedTabId:o,onChange:s,className:i}=e;return(0,t.jsx)("div",{className:"".concat(r).concat(i?" ".concat(i):""),children:a.map((e=>(0,t.jsx)("div",{className:"tabs-tabItem ".concat(o===e.id?"active":""),onClick:()=>{s&&s(e.id)},children:e.label},e.id)))})}},28736:(e,a,o)=>{o.r(a),o.d(a,{default:()=>Pe});var r=o(96540),t=o(89740),s=o(68777),i=o(24959),n=o(6442),c=o(12650),l=o(49527),m=o(75965),g=o(81657);const d="ImageProcessingTool_container__WAkOX",p="ImageProcessingTool_content__nCEwY",u="ImageProcessingTool_tabs__lU6sy",f="ImageProcessingTool_imgBox__xANeR",h="ImageProcessingTool_fileBox__Evibs",x="ImageProcessingTool_fileInfo__zFv8M",y="ImageProcessingTool_item__FSSP-",M="ImageProcessingTool_emptyBox__GhkSM",v="ImageProcessingTool_uploadBtn__jbITo",_="ImageProcessingTool_text__NoL1R",j="ImageProcessingTool_tips__7DkHP",D="ImageProcessingTool_tip__dYcLC",A="ImageProcessingTool_operationBtns__uCE1C",N="ImageProcessingTool_left__ohBzm",S="ImageProcessingTool_operationBtn__+5IT6",T="ImageProcessingTool_right__UDKib";var w=o(74848);const C=e=>{const{imgInfo:a,imgDragOver:o,onDragOver:r,onDragLeave:t,onDrop:s}=e,i=(0,n.A)();return(0,w.jsx)("div",{className:f,style:{borderColor:o?"#0E5E6F":"#3A8891"},onDragOver:r,onDragLeave:t,onDrop:s,children:(0,w.jsxs)("div",{className:h,children:[(0,w.jsx)("img",{src:a.imgUrl,alt:""}),(0,w.jsxs)("div",{className:x,children:[(0,w.jsxs)("div",{className:y,children:[i.formatMessage({id:"common.filename"}),"：",a.name]}),(0,w.jsxs)("div",{className:y,children:[i.formatMessage({id:"common.format"}),"：",a.fileType]}),(0,w.jsxs)("div",{className:y,children:[i.formatMessage({id:"common.dimension"}),"：",a.width&&a.height?"".concat(a.width,"x").concat(a.height):i.formatMessage({id:"common.unknown"})]}),(0,w.jsxs)("div",{className:y,children:[i.formatMessage({id:"common.size"}),"：",(0,l.ye)(a.size)]})]})]})})},k={flipSideToSideStatus:{doing:!1,imageData:null},flipUpsideDownStatus:{doing:!1,imageData:null},leftRotateStatus:{doing:!1,imageData:null},rightRotateStatus:{doing:!1,imageData:null},toGreyStatus:{doing:!1,imageData:null},toBlackAndWhiteStatus:{doing:!1,imageData:null},sharpenStatus:{doing:!1,imageData:null},marginSharpenStatus:{doing:!1,imageData:null},toOppositeStatus:{doing:!1,imageData:null},toRedStatus:{doing:!1,imageData:null},toGreenStatus:{doing:!1,imageData:null},toBlueStatus:{doing:!1,imageData:null},toRedAndGreenStatus:{doing:!1,imageData:null},toRedAndBlueStatus:{doing:!1,imageData:null},toBlueAndGreenStatus:{doing:!1,imageData:null},toRedAndGreyStatus:{doing:!1,imageData:null},toGreenAndGreyStatus:{doing:!1,imageData:null},toBlueAndGreyStatus:{doing:!1,imageData:null},toGaussianBlurStatus:{doing:!1,imageData:null},jpgToPngStatus:{doing:!1,imageData:null},pngToJpgStatus:{doing:!1,imageData:null}},P=e=>{const{imgInfo:a,exportImage:o,imgDragOver:i,onDragOver:c,onDragLeave:l,onDrop:d,onClear:p}=e,u=(0,n.A)(),f=(0,r.useRef)((0,m.A)(k)),h=(e,r,s)=>{if(e&&e.imageData)o(e.imageData);else{if(e.doing)return void t.Ay.warning(u.formatMessage({id:"common.workHard"}));if(null!=a&&a.imageData){e.doing=!0;let i=a.imageData;r===g.uv&&(i=(0,m.A)(i));const n=r(i);n?(e.imageData=n,o(n,s)):t.Ay.error(u.formatMessage({id:"common.operationFailure"})),e.doing=!1}}};return(0,r.useEffect)((()=>{f.current=(0,m.A)(k)}),[a]),(0,w.jsxs)("div",{children:[(0,w.jsx)(C,{imgInfo:a,imgDragOver:i,onDragOver:c,onDragLeave:l,onDrop:d}),(0,w.jsxs)("div",{className:A,children:[(0,w.jsxs)("div",{className:N,children:[(0,w.jsx)(s.Ay,{type:"primary",className:S,onClick:()=>h(f.current.flipSideToSideStatus,g.hz),children:u.formatMessage({id:"common.flipSideToSide"})}),(0,w.jsx)(s.Ay,{type:"primary",className:S,onClick:()=>h(f.current.flipUpsideDownStatus,g.gL),children:u.formatMessage({id:"common.flipTopToBottom"})}),(0,w.jsx)(s.Ay,{type:"primary",className:S,onClick:()=>h(f.current.leftRotateStatus,g.XA),children:u.formatMessage({id:"common.rotateLeft"})}),(0,w.jsx)(s.Ay,{type:"primary",className:S,onClick:()=>h(f.current.rightRotateStatus,g.Sd),children:u.formatMessage({id:"common.rotateRight"})}),(0,w.jsx)(s.Ay,{type:"primary",className:S,onClick:()=>h(f.current.toGreyStatus,g.$S),children:u.formatMessage({id:"common.graying"})}),(0,w.jsx)(s.Ay,{type:"primary",className:S,onClick:()=>h(f.current.toBlackAndWhiteStatus,g.ZE),children:u.formatMessage({id:"common.vampix"})}),(0,w.jsx)(s.Ay,{type:"primary",className:S,onClick:()=>h(f.current.sharpenStatus,g.gR),children:u.formatMessage({id:"page.imageProcessingTool.shmpch"})}),(0,w.jsx)(s.Ay,{type:"primary",className:S,onClick:()=>h(f.current.marginSharpenStatus,g.oA),children:u.formatMessage({id:"page.imageProcessingTool.edgeSharpening"})}),(0,w.jsx)(s.Ay,{type:"primary",className:S,onClick:()=>h(f.current.toOppositeStatus,g.xY),children:u.formatMessage({id:"page.imageProcessingTool.filterContrast"})}),(0,w.jsx)(s.Ay,{type:"primary",className:S,onClick:()=>h(f.current.toRedStatus,g.z),children:u.formatMessage({id:"page.imageProcessingTool.redFilter"})}),(0,w.jsx)(s.Ay,{type:"primary",className:S,onClick:()=>h(f.current.toGreenStatus,g.nG),children:u.formatMessage({id:"page.imageProcessingTool.greenFilter"})}),(0,w.jsx)(s.Ay,{type:"primary",className:S,onClick:()=>h(f.current.toBlueStatus,g.Qn),children:u.formatMessage({id:"page.imageProcessingTool.blueFilter"})}),(0,w.jsx)(s.Ay,{type:"primary",className:S,onClick:()=>h(f.current.toRedAndGreenStatus,g.RJ),children:u.formatMessage({id:"page.imageProcessingTool.redGreenFilter"})}),(0,w.jsx)(s.Ay,{type:"primary",className:S,onClick:()=>h(f.current.toRedAndBlueStatus,g.Uh),children:u.formatMessage({id:"page.imageProcessingTool.redBlueFilter"})}),(0,w.jsx)(s.Ay,{type:"primary",className:S,onClick:()=>h(f.current.toBlueAndGreenStatus,g.c1),children:u.formatMessage({id:"page.imageProcessingTool.blueGreenFilter"})}),(0,w.jsx)(s.Ay,{type:"primary",className:S,onClick:()=>h(f.current.toRedAndGreyStatus,g.dN),children:u.formatMessage({id:"page.imageProcessingTool.redGreyFilter"})}),(0,w.jsx)(s.Ay,{type:"primary",className:S,onClick:()=>h(f.current.toGreenAndGreyStatus,g.hR),children:u.formatMessage({id:"page.imageProcessingTool.greenGreyFilter"})}),(0,w.jsx)(s.Ay,{type:"primary",className:S,onClick:()=>h(f.current.toBlueAndGreyStatus,g.iT),children:u.formatMessage({id:"page.imageProcessingTool.blueGreyFilter"})}),(0,w.jsx)(s.Ay,{type:"primary",className:S,onClick:()=>h(f.current.toGaussianBlurStatus,g.uv),children:u.formatMessage({id:"page.imageProcessingTool.gaussianBlur"})}),["JPG","JPEG"].includes(a.fileType)&&(0,w.jsx)(s.Ay,{type:"primary",className:S,onClick:()=>h(f.current.jpgToPngStatus,g.yy,"PNG"),children:u.formatMessage({id:"page.imageProcessingTool.jpgToPng"})}),"PNG"===a.fileType&&(0,w.jsx)(s.Ay,{type:"primary",className:S,onClick:()=>h(f.current.pngToJpgStatus,g.WG,"JPEG"),children:u.formatMessage({id:"page.imageProcessingTool.pngToJpg"})})]}),(0,w.jsx)(s.Ay,{className:T,ghost:!0,type:"primary",onClick:p,children:u.formatMessage({id:"common.clear"})})]})]})};var R=o(40961),b=o(40920),O=o(7142),B=o(46935);const I="RectSelect_container__NRGSf",L="RectSelect_imgBox__Eht8b",E="RectSelect_content__Oqfay",G="RectSelect_leftBox__fnaRf",W="RectSelect_img1__uK-Ip",F="RectSelect_img2__gx56-",U="RectSelect_mask__dh-Ij",H="RectSelect_clipBox__jD4yw",z="RectSelect_dot__wL+4K",J="RectSelect_leftUp__UPsGg",Y="RectSelect_up__iPqcg",X="RectSelect_rightUp__fbUgr",Z="RectSelect_right__HXwDY",K="RectSelect_rightDown__vHPOv",Q="RectSelect_down__x6Tgo",q="RectSelect_leftDown__JVMR9",V="RectSelect_left__frsug",$="RectSelect_operationBtns__b-UEE",ee="RectSelect_operationBtn__tFBfu";var ae=function(e){return e[e.leftUp=0]="leftUp",e[e.up=1]="up",e[e.rightUp=2]="rightUp",e[e.right=3]="right",e[e.rightDown=4]="rightDown",e[e.down=5]="down",e[e.leftDown=6]="leftDown",e[e.left=7]="left",e}(ae||{});const oe=10,re=e=>{const{imgInfo:a,exportImage:o,imgDragOver:i,onDragOver:c,onDragLeave:l,onDrop:m,onClear:d,type:p}=e,u=(0,n.A)(),{scrollTop:f,locale:h}=(0,B.S)(),[x,y]=(0,r.useState)(!1),[M,v]=(0,r.useState)(!1),[_,j]=(0,r.useState)(10),D=(0,r.useRef)(!1),A=(0,r.useRef)(null),N=Math.max(Math.floor(a.width/2),oe),S=Math.max(Math.floor(a.height/2),oe),[T,C]=(0,r.useState)(N),[k,P]=(0,r.useState)(S),[re,te]=(0,r.useState)(0),[se,ie]=(0,r.useState)(0),ne=(0,r.useRef)(!1),ce=(0,r.useRef)(!1),le=(0,r.useRef)(null),me=(0,r.useRef)(null),ge=(0,r.useRef)(0),de=(0,r.useRef)(0),pe=(0,r.useRef)(0),ue=(0,r.useRef)(0),fe=(0,r.useRef)(0),he=(0,r.useRef)(0),xe=(0,r.useRef)(),ye=e=>{var a=e.offsetLeft,o=e.offsetTop;let r=e.offsetParent;for(;null!=r;)a+=r.offsetLeft,o+=r.offsetTop,r=r.offsetParent;return{left:a,top:o}},Me=e=>{let a=e.clientX;const o=R.findDOMNode(me.current),{left:r}=ye(o),t=r,s=t+ge.current;a>s?a=s:a<t&&(a=t);const i=R.findDOMNode(A.current),n=T-2,c=a-n-ye(i).left;C(Math.max(Math.floor(n+c),oe))},ve=e=>{let a=e.clientY+f;const o=R.findDOMNode(me.current),{top:r}=ye(o),t=r,s=R.findDOMNode(A.current),i=ye(s).top,n=i+s.offsetHeight;a<t?a=t:a>n&&(a=n),te(Math.min(Math.floor(re+a-i),de.current-oe));const c=k;P(Math.max(Math.floor(c+i-a),oe))},_e=e=>{let a=e.clientX;const o=R.findDOMNode(me.current),{left:r}=ye(o),t=r,s=R.findDOMNode(A.current),i=ye(s).left,n=i+s.offsetWidth;a<t?a=t:a>n&&(a=n),ie(Math.min(Math.floor(se+a-i),ge.current-oe));const c=T;C(Math.max(Math.floor(c+i-a),oe))},je=e=>{let a=e.clientY+f;const o=R.findDOMNode(me.current),{top:r}=ye(o),t=r,s=t+de.current;a<t?a=t:a>s&&(a=s);const i=R.findDOMNode(A.current),n=k-2,c=a-n-ye(i).top;P(Math.max(Math.floor(n+c),oe))},De=(e,a)=>{e.stopPropagation(),e.target.style.backgroundColor="#DC0000",ne.current=!0,xe.current=a},Ae=()=>{ne.current=!1,ce.current=!1,A.current&&Array.prototype.forEach.call(A.current.children,(e=>{e.style.backgroundColor="#FF8E9E"}))};(0,r.useEffect)((()=>{const{width:e,height:o}=a;if(e<20||o<20)return t.Ay.error(u.formatMessage({id:"page.imageProcessingTool.imageTooSmall"})),void y(!1);if(e>1350||o>1350)return t.Ay.error(u.formatMessage({id:"page.imageProcessingTool.imageTooLarge"})),void y(!1);const r=Math.max(Math.floor(a.width/2),oe),s=Math.max(Math.floor(a.height/2),oe);if(C(r),P(s),ie(0),te(0),x){if(me.current){const e=R.findDOMNode(me.current),{offsetWidth:a,offsetHeight:o}=e;ge.current=a,de.current=o}}else y(!0);"clip"===p&&v(!1)}),[a]),(0,r.useEffect)((()=>{if(x&&me.current){const e=R.findDOMNode(me.current),{offsetWidth:a,offsetHeight:o}=e;ge.current=a,de.current=o}}),[x]);return(0,w.jsxs)("div",{className:I,children:[(0,w.jsx)("div",{className:L,style:{borderColor:i?"#0E5E6F":"#3A8891"},onDragOver:c,onDragLeave:l,onDrop:m,children:x&&(0,w.jsx)("div",{className:E,style:{width:"".concat(a.width,"px"),height:"".concat(a.height,"px")},onMouseMove:e=>{if(ce.current){const a=R.findDOMNode(A.current),{offsetWidth:o,offsetHeight:r}=a,t=e.clientX-pe.current,s=e.clientY-ue.current,i=Math.floor(he.current+s),n=Math.floor(fe.current+t);i<0?te(0):i>de.current-r-2?te(Math.max(de.current-r-2,0)):te(i),n<0?ie(0):n>ge.current-o-2?ie(Math.max(ge.current-o-2,0)):ie(n)}if(ne.current)switch(xe.current){case ae.right:Me(e);break;case ae.up:ve(e);break;case ae.left:_e(e);break;case ae.down:je(e);break;case ae.leftUp:_e(e),ve(e);break;case ae.leftDown:_e(e),je(e);break;case ae.rightUp:Me(e),ve(e);break;case ae.rightDown:Me(e),je(e)}},onMouseUp:Ae,onMouseLeave:Ae,ref:le,children:(0,w.jsxs)("div",{className:G,ref:me,children:[(0,w.jsx)("img",{src:a.imgUrl,className:W}),(0,w.jsx)("div",{className:U}),(0,w.jsx)("img",{src:a.imgUrl,className:F,style:{clip:"rect(".concat(re,"px, ").concat(se+T,"px, ").concat(re+k,"px, ").concat(se,"px)")}}),(0,w.jsxs)("div",{className:H,style:{position:"absolute",width:"".concat(T,"px"),height:"".concat(k,"px"),top:"".concat(re,"px"),left:"".concat(se,"px")},onMouseDown:e=>{pe.current=e.clientX,ue.current=e.clientY;const a=R.findDOMNode(A.current);he.current=a.offsetTop,fe.current=a.offsetLeft,ce.current=!0},ref:A,children:[(0,w.jsx)("div",{className:"".concat(z," ").concat(J),onMouseDown:e=>De(e,ae.leftUp)}),(0,w.jsx)("div",{className:"".concat(z," ").concat(Y),onMouseDown:e=>De(e,ae.up)}),(0,w.jsx)("div",{className:"".concat(z," ").concat(X),onMouseDown:e=>De(e,ae.rightUp)}),(0,w.jsx)("div",{className:"".concat(z," ").concat(Z),onMouseDown:e=>De(e,ae.right)}),(0,w.jsx)("div",{className:"".concat(z," ").concat(K),onMouseDown:e=>De(e,ae.rightDown)}),(0,w.jsx)("div",{className:"".concat(z," ").concat(Q),onMouseDown:e=>De(e,ae.down)}),(0,w.jsx)("div",{className:"".concat(z," ").concat(q),onMouseDown:e=>De(e,ae.leftDown)}),(0,w.jsx)("div",{className:"".concat(z," ").concat(V),onMouseDown:e=>De(e,ae.left)})]})]})})}),x&&(0,w.jsxs)("div",{className:$,children:[(0,w.jsxs)("div",{className:V,children:["clip"===p&&(0,w.jsx)(b.A,{className:ee,checked:M,onChange:e=>{v(e.target.checked)},children:u.formatMessage({id:"page.imageProcessingTool.WhetherRetainOriginalDimension"})}),(0,w.jsx)(O.A,{className:ee,style:{width:"zh-cn"===h?"160px":"200px"},min:oe,max:a.width,precision:0,value:T,addonBefore:u.formatMessage({id:"common.clippingWidth"}),onChange:e=>{const{width:o}=a;e&&e+se>o&&ie(o-e),C(e||0)}}),(0,w.jsx)(O.A,{className:ee,style:{width:"zh-cn"===h?"160px":"200px"},min:oe,max:a.height,precision:0,value:k,addonBefore:u.formatMessage({id:"common.clippingHeight"}),onChange:e=>{const{height:o}=a;e&&e+re>o&&te(o-e),P(e||0)}}),(0,w.jsx)(O.A,{className:ee,style:{width:"zh-cn"===h?"160px":"190px"},min:0,max:a.width-oe,precision:0,value:se,addonBefore:u.formatMessage({id:"common.distanceLeft"}),onChange:e=>{ie(e||0);const{width:o}=a;e&&e+T>o&&C(o-e)}}),(0,w.jsx)(O.A,{className:ee,style:{width:"zh-cn"===h?"160px":"190px"},min:0,max:a.height-oe,precision:0,value:re,addonBefore:u.formatMessage({id:"common.distanceTop"}),onChange:e=>{te(e||0);const{height:o}=a;e&&e+k>o&&P(o-e)}}),"mosaic"===p&&(0,w.jsx)(O.A,{className:ee,style:{width:"zh-cn"===h?"200px":"220px"},min:2,max:40,precision:0,value:_,addonBefore:u.formatMessage({id:"common.mosaicGrainSize"}),onChange:e=>{j(e||0)}}),(0,w.jsx)(s.Ay,{type:"primary",className:ee,onClick:()=>{if(D.current)return void t.Ay.warning(u.formatMessage({id:"common.workHard"}));D.current=!0;let e=null;"clip"===p?e=(0,g.J)(a.imageData,T,k,re,se,M,a.fileType):"mosaic"===p&&(e=(0,g.z7)(a.imageData,T,k,re,se,_)),e?o(e):t.Ay.error(u.formatMessage({id:"common.operationFailure"})),D.current=!1},disabled:!x,children:u.formatMessage({id:"common.confirm"})})]}),(0,w.jsx)(s.Ay,{className:Z,ghost:!0,type:"primary",onClick:d,children:u.formatMessage({id:"common.clear"})})]})]})},te=e=>(0,w.jsx)(re,{...e,type:"clip"}),se={container:"RadiusClip_container__bZNss",imgBox:"RadiusClip_imgBox__SFDg7",content:"RadiusClip_content__iPE9l",operationBtns:"RadiusClip_operationBtns__Ie5iK",left:"RadiusClip_left__cn1dW",operationBtn:"RadiusClip_operationBtn__8mksR",right:"RadiusClip_right__bHjkd"},ie=e=>{const{imgInfo:a,exportImage:o,imgDragOver:i,onDragOver:c,onDragLeave:l,onDrop:m,onClear:d}=e,p=(0,n.A)(),[u,f]=(0,r.useState)(!1),h=(0,r.useRef)(!1),[x,y]=(0,r.useState)(!1),[M,v]=(0,r.useState)(4);(0,r.useEffect)((()=>{const{width:e,height:o}=a;return e<20||o<20?(t.Ay.error(p.formatMessage({id:"page.imageProcessingTool.imageTooSmall"})),void f(!1)):e>1350||o>1350?(t.Ay.error(p.formatMessage({id:"page.imageProcessingTool.imageTooLarge"})),void f(!1)):(f(!0),y(!1),void v(4))}),[a]);return(0,w.jsxs)("div",{className:se.container,children:[(0,w.jsx)("div",{className:se.imgBox,style:{borderColor:i?"#0E5E6F":"#3A8891"},onDragOver:c,onDragLeave:l,onDrop:m,children:u&&(0,w.jsx)("div",{className:se.content,style:{width:"".concat(a.width,"px"),height:"".concat(a.height,"px"),borderRadius:"".concat(M,"px")},children:(0,w.jsx)("img",{src:a.imgUrl,className:se.img})})}),u&&(0,w.jsxs)("div",{className:se.operationBtns,children:[(0,w.jsxs)("div",{className:se.left,children:["PNG"!==a.fileType&&(0,w.jsx)(b.A,{className:se.operationBtn,checked:x,onChange:e=>{y(e.target.checked)},children:p.formatMessage({id:"page.imageProcessingTool.clippedAndConvertedToPng"})}),(0,w.jsx)(O.A,{className:se.operationBtn,style:{width:"180px"},min:0,max:Math.min(Math.floor(a.width/2),Math.floor(a.height/2)),precision:0,value:M,addonBefore:p.formatMessage({id:"page.imageProcessingTool.filletRadius"}),onChange:e=>{v(e)}}),(0,w.jsx)(s.Ay,{type:"primary",className:se.operationBtn,onClick:()=>{if(h.current)return void t.Ay.warning(p.formatMessage({id:"common.workHard"}));if(!M)return void t.Ay.warning(p.formatMessage({id:"page.imageProcessingTool.pleaseEnterFilletRadius"}));h.current=!0;const e=(0,g.Zc)(a.imageData,M,a.fileType,x);e?o(e,x?"PNG":a.fileType):t.Ay.error(p.formatMessage({id:"common.operationFailure"})),h.current=!1},disabled:!u,children:p.formatMessage({id:"common.confirm"})})]}),(0,w.jsx)(s.Ay,{className:se.right,ghost:!0,type:"primary",onClick:d,children:p.formatMessage({id:"common.clear"})})]})]})},ne=1e4,ce=e=>{const{imgInfo:a,exportImage:o,imgDragOver:i,onDragOver:c,onDragLeave:l,onDrop:m,onClear:d}=e,p=(0,n.A)(),[u,f]=(0,r.useState)(!0),[h,x]=(0,r.useState)(a.width),[y,M]=(0,r.useState)(a.height),v=(0,r.useRef)(!1);return(0,r.useEffect)((()=>{x(a.width),M(a.height)}),[a]),(0,w.jsxs)("div",{children:[(0,w.jsx)(C,{imgInfo:a,imgDragOver:i,onDragOver:c,onDragLeave:l,onDrop:m}),(0,w.jsxs)("div",{className:A,children:[(0,w.jsxs)("div",{className:N,children:[(0,w.jsx)(b.A,{className:S,checked:u,onChange:e=>{f(e.target.checked);const{width:o,height:r}=a;if(e.target.checked){if(h&&y)x(null),M(null);else if(h){const e=Math.floor(h*r/o);M(e)}else if(y){const e=Math.floor(y*o/r);x(e)}}else h||y||(x(o),M(r))},children:p.formatMessage({id:"common.whetherMaintainOriginalProportion"})}),(0,w.jsx)(O.A,{className:S,style:{width:"160px"},min:1,max:ne,precision:0,value:h,addonBefore:p.formatMessage({id:"common.width"}),onChange:e=>{if(x(e),u&&e){const{width:o,height:r}=a,t=Math.floor(e*r/o);M(t)}}}),(0,w.jsx)(O.A,{className:S,style:{width:"160px"},min:1,max:ne,precision:0,value:y,addonBefore:p.formatMessage({id:"common.height"}),onChange:e=>{if(M(e),u&&e){const{width:o,height:r}=a,t=Math.floor(e*o/r);x(t)}}}),(0,w.jsx)(s.Ay,{type:"primary",className:S,onClick:()=>{if(v.current)return void t.Ay.warning(p.formatMessage({id:"common.workHard"}));const{imgUrl:e,width:r,height:s}=a;if(!h||!y)return void t.Ay.warning(p.formatMessage({id:"common.pleaseEnterWidthOrHeight"}));v.current=!0;const i=(0,g.QZ)(e,r,s,h,y,ne);i?o(i):t.Ay.error(p.formatMessage({id:"common.operationFailure"})),v.current=!1},children:p.formatMessage({id:"common.confirm"})})]}),(0,w.jsx)(s.Ay,{className:T,ghost:!0,type:"primary",onClick:d,children:p.formatMessage({id:"common.clear"})})]})]})};var le=o(6531);const me=e=>{const{imgInfo:a,exportImage:o,imgDragOver:i,onDragOver:c,onDragLeave:l,onDrop:m,onClear:d}=e,p=(0,n.A)(),[u,f]=(0,r.useState)(0),h=(0,r.useRef)(!1),x=e=>{f(e)};return(0,r.useEffect)((()=>{f(0)}),[a]),(0,w.jsxs)("div",{children:[(0,w.jsx)(C,{imgInfo:a,imgDragOver:i,onDragOver:c,onDragLeave:l,onDrop:m}),(0,w.jsxs)("div",{className:A,children:[(0,w.jsxs)("div",{className:N,children:[(0,w.jsxs)("div",{className:S,children:[(0,w.jsx)("span",{style:{color:"#444",marginRight:"6px"},children:p.formatMessage({id:"page.imageProcessingTool.darken"})}),(0,w.jsx)(le.A,{min:-255,max:255,marks:{0:"0"},value:"number"==typeof u?u:0,onChange:x}),(0,w.jsx)("span",{style:{color:"#444",marginLeft:"6px"},children:p.formatMessage({id:"page.imageProcessingTool.lighten"})}),(0,w.jsx)(O.A,{style:{margin:"0 16px"},min:-255,max:255,precision:0,value:u,onChange:x})]}),(0,w.jsx)(s.Ay,{type:"primary",className:S,onClick:()=>{if(h.current)return void t.Ay.warning(p.formatMessage({id:"common.workHard"}));const{imageData:e}=a;if(!u)return void t.Ay.warning(p.formatMessage({id:"page.imageProcessingTool.pleaseEnterBrightness"}));h.current=!0;const r=(0,g.eZ)(e,u);r?o(r):t.Ay.error(p.formatMessage({id:"common.operationFailure"})),h.current=!1},children:p.formatMessage({id:"common.confirm"})})]}),(0,w.jsx)(s.Ay,{className:T,ghost:!0,type:"primary",onClick:d,children:p.formatMessage({id:"common.clear"})})]})]})},ge=e=>{const{imgInfo:a,exportImage:o,imgDragOver:i,onDragOver:c,onDragLeave:l,onDrop:m,onClear:d}=e,p=(0,n.A)(),[u,f]=(0,r.useState)(!1),[h,x]=(0,r.useState)(!1),[y,M]=(0,r.useState)(0),v=(0,r.useRef)(!1),_=e=>{M(e)};return(0,r.useEffect)((()=>{"PNG"!==a.fileType?(t.Ay.warning(p.formatMessage({id:"page.imageProcessingTool.pleaseUploadPng"})),f(!1)):f(!0),M(0),x(!1)}),[a]),(0,w.jsxs)("div",{children:[(0,w.jsx)(C,{imgInfo:a,imgDragOver:i,onDragOver:c,onDragLeave:l,onDrop:m}),u&&(0,w.jsxs)("div",{className:A,children:[(0,w.jsxs)("div",{className:N,children:[(0,w.jsx)(b.A,{className:S,checked:h,onChange:e=>{x(e.target.checked),e.target.checked&&M(1)},children:p.formatMessage({id:"page.imageProcessingTool.whetherValueFixed"})}),!h&&(0,w.jsxs)("div",{className:S,children:[(0,w.jsx)("span",{style:{color:"#444",marginRight:"6px"},children:p.formatMessage({id:"page.imageProcessingTool.becomeTransparent"})}),(0,w.jsx)(le.A,{min:-1,max:1,step:.1,marks:{0:"0"},value:"number"==typeof y?y:0,onChange:_}),(0,w.jsx)("span",{style:{color:"#444",marginLeft:"6px"},children:p.formatMessage({id:"page.imageProcessingTool.becomeOpaque"})})]}),(0,w.jsx)("div",{className:S,children:(0,w.jsx)(O.A,{min:h?0:-1,max:1,step:.1,precision:1,value:y,onChange:_})}),(0,w.jsx)(s.Ay,{type:"primary",className:S,onClick:()=>{if(v.current)return void t.Ay.warning(p.formatMessage({id:"common.workHard"}));if("number"!=typeof y)return void t.Ay.warning(p.formatMessage({id:"page.imageProcessingTool.pleaseEnterDiaphaneity"}));v.current=!0;const{imageData:e}=a,r=(0,g.PE)(e,y,h);r?o(r):t.Ay.error(p.formatMessage({id:"common.operationFailure"})),v.current=!1},children:p.formatMessage({id:"common.confirm"})})]}),(0,w.jsx)(s.Ay,{className:T,ghost:!0,type:"primary",onClick:d,children:p.formatMessage({id:"common.clear"})})]})]})},de="AddWatermark_container__eVhbf",pe="AddWatermark_imgBox__ZRRUr",ue="AddWatermark_content__q-ZzY",fe="AddWatermark_leftBox__S-y1M",he="AddWatermark_img1__s1l8c",xe="AddWatermark_clipBox__EW8Jl",ye="AddWatermark_operationBtns__Sua9p",Me="AddWatermark_left__hmpKc",ve="AddWatermark_box__X5Tyg",_e="AddWatermark_top__MW-nl",je="AddWatermark_uploadBtn__TXNYs",De="AddWatermark_bottom__EipS9",Ae="AddWatermark_operationBtn__-tdIk",Ne="AddWatermark_right__KM8W0",Se=20,Te=e=>{const{imgInfo:a,exportImage:o,imgDragOver:c,onDragOver:m,onDragLeave:d,onDrop:p,onClear:u}=e,f=(0,n.A)(),[h,x]=(0,r.useState)(!1),[y,M]=(0,r.useState)(null),v=(0,r.useRef)(!1),_=(0,r.useRef)(null),j=Math.max(Math.floor(a.width/2),Se),D=Math.max(Math.floor(a.height/2),Se),[A,N]=(0,r.useState)(j),[S,T]=(0,r.useState)(D),[C,k]=(0,r.useState)(0),[P,b]=(0,r.useState)(0),B=(0,r.useRef)(!1),I=(0,r.useRef)(null),L=(0,r.useRef)(null),E=(0,r.useRef)(0),G=(0,r.useRef)(0),W=(0,r.useRef)(0),F=(0,r.useRef)(0),U=(0,r.useRef)(0),H=(0,r.useRef)(0),z=()=>{const e=Math.max(Math.floor(a.width/2),Se),o=Math.max(Math.floor(a.height/2),Se);N(e),T(o),b(0),k(0)},J=()=>{B.current=!1};(0,r.useEffect)((()=>{const{width:e,height:o}=a;return e<Se||o<Se?(t.Ay.error(f.formatMessage({id:"page.imageProcessingTool.imageTooSmall"})),void x(!1)):e>=1350||o>=1350?(t.Ay.error(f.formatMessage({id:"page.imageProcessingTool.imageTooLarge"})),void x(!1)):(x(!0),void M(null))}),[a]),(0,r.useEffect)((()=>{if(h&&y&&L.current){const e=R.findDOMNode(L.current),{offsetWidth:a,offsetHeight:o}=e;E.current=a,G.current=o}}),[h,y]);return(0,w.jsxs)("div",{className:de,children:[(0,w.jsx)("div",{className:pe,style:{borderColor:c?"#0E5E6F":"#3A8891"},onDragOver:e=>{y?(e.stopPropagation(),e.preventDefault()):m(e)},onDragLeave:e=>{y?(e.stopPropagation(),e.preventDefault()):d(e)},onDrop:e=>{y?(e.stopPropagation(),e.preventDefault()):p(e)},children:h&&(0,w.jsx)("div",{className:ue,style:{width:"".concat(a.width,"px"),height:"".concat(a.height,"px")},onMouseMove:e=>{if(B.current&&_.current){const a=R.findDOMNode(_.current),{offsetWidth:o,offsetHeight:r}=a,t=e.clientX-W.current,s=e.clientY-F.current,i=Math.floor(H.current+s),n=Math.floor(U.current+t);i<0?k(0):i>G.current-r-2?k(Math.max(G.current-r-2,0)):k(i),n<0?b(0):n>E.current-o-2?b(Math.max(E.current-o-2,0)):b(n)}},onMouseUp:J,onMouseLeave:J,ref:I,children:(0,w.jsxs)("div",{className:fe,ref:L,children:[(0,w.jsx)("img",{src:a.imgUrl,className:he}),y&&(0,w.jsx)("div",{className:xe,style:{position:"absolute",width:"".concat(A,"px"),height:"".concat(S,"px"),top:"".concat(C,"px"),left:"".concat(P,"px")},onMouseDown:e=>{W.current=e.clientX,F.current=e.clientY;const a=R.findDOMNode(_.current);H.current=a.offsetTop,U.current=a.offsetLeft,B.current=!0},ref:_,children:(0,w.jsx)("img",{src:y.imgUrl,alt:""})})]})})}),h&&(0,w.jsxs)("div",{className:ye,children:[(0,w.jsx)("div",{className:Me,children:(0,w.jsxs)("div",{className:ve,children:[(0,w.jsxs)("div",{className:_e,children:[(0,w.jsxs)(s.Ay,{type:"primary",className:je,children:[(0,w.jsx)(i.A,{}),f.formatMessage({id:"common.uploadWatermark"}),(0,w.jsx)("input",{type:"file",accept:"image/jpg, image/jpeg, image/png",onChange:e=>{const{files:o}=e.target;o&&0!==o.length&&(0,l._v)(o[0],(e=>{if(e){const{width:o,height:r}=e;if(o<=20||r<=20)return M(null),z(),void t.Ay.error(f.formatMessage({id:"common.watermarkSizeLimit"}));if(o>a.width||r>a.height)return M(null),z(),void t.Ay.error(f.formatMessage({id:"common.watermarkSizeTooLarge"}));M(e),N(o),T(r),b(0),k(0)}else M(null),z(),t.Ay.error(f.formatMessage({id:"common.parsingDataFailure"}))}))}})]}),y?y.name:f.formatMessage({id:"common.noData"})]}),y&&(0,w.jsxs)("div",{className:De,children:[(0,w.jsx)(O.A,{className:Ae,style:{width:"160px"},min:0,max:a.width-Se,precision:0,value:P,addonBefore:f.formatMessage({id:"common.distanceLeft"}),onChange:e=>{b(e||0);const{width:o}=a;e&&e+A>o&&N(o-e)}}),(0,w.jsx)(O.A,{className:Ae,style:{width:"160px"},min:0,max:a.height-Se,precision:0,value:C,addonBefore:f.formatMessage({id:"common.distanceTop"}),onChange:e=>{k(e||0);const{height:o}=a;e&&e+S>o&&T(o-e)}}),(0,w.jsx)(s.Ay,{type:"primary",className:Ae,onClick:()=>{if(v.current)t.Ay.warning(f.formatMessage({id:"common.workHard"}));else{if(y){v.current=!0;const e=(0,g.Qm)(a.imageData,y.imageData,C,P);e?o(e):t.Ay.error(f.formatMessage({id:"common.operationFailure"}))}v.current=!1}},disabled:!h,children:f.formatMessage({id:"common.confirm"})})]})]})}),(0,w.jsx)(s.Ay,{className:Ne,ghost:!0,type:"primary",onClick:u,children:f.formatMessage({id:"common.clear"})})]})]})},we=e=>(0,w.jsx)(re,{...e,type:"mosaic"}),Ce=e=>{const{imgInfo:a,imgDragOver:o,onDragOver:i,onDragLeave:c,onDrop:m,onClear:d}=e,p=(0,n.A)(),{locale:u}=(0,B.S)(),[f,h]=(0,r.useState)(70),x=(0,r.useRef)(!1),y=e=>{if(!e)return;let o="image";if(a&&a.name){const e=a.name.split(".");e.length>1?(e.splice(e.length-1,1,a.fileType.toLowerCase()),o=e.join(".")):(e.push(a.fileType.toLowerCase()),o=e.join("."))}(0,l.HP)(e,o)};return(0,r.useEffect)((()=>{h(70)}),[a]),(0,w.jsxs)("div",{children:[(0,w.jsx)(C,{imgInfo:a,imgDragOver:o,onDragOver:i,onDragLeave:c,onDrop:m}),(0,w.jsxs)("div",{className:A,children:[(0,w.jsxs)("div",{className:N,children:[(0,w.jsx)(O.A,{className:S,style:{width:"zh-cn"===u?"200px":"240px"},min:10,max:90,precision:0,value:f,addonBefore:p.formatMessage({id:"page.imageProcessingTool.compressibility"}),addonAfter:"%",onChange:e=>{h(e||10)}}),(0,w.jsx)(s.Ay,{type:"primary",className:S,onClick:()=>{if(x.current)return void t.Ay.warning(p.formatMessage({id:"common.workHard"}));const{imageData:e,imgUrl:o,width:r,height:s,fileType:i}=a;x.current=!0,["JPG","JPEG"].includes(i)?(0,g.HT)(o,r,s,i,f,(e=>{e?y(e):t.Ay.error(p.formatMessage({id:"common.operationFailure"})),x.current=!1})):(0,g.HT)(e,r,s,i,f,(e=>{e?y(e):t.Ay.error(p.formatMessage({id:"common.operationFailure"})),x.current=!1}))},children:p.formatMessage({id:"common.confirm"})})]}),(0,w.jsx)(s.Ay,{className:T,ghost:!0,type:"primary",onClick:d,children:p.formatMessage({id:"common.clear"})})]})]})};var ke=function(e){return e[e.basicOperation=0]="basicOperation",e[e.rectClip=1]="rectClip",e[e.radiusClip=2]="radiusClip",e[e.changeSize=3]="changeSize",e[e.changeBrightness=4]="changeBrightness",e[e.changeDiaphaneity=5]="changeDiaphaneity",e[e.addWatermark=6]="addWatermark",e[e.coverWithMosaic=7]="coverWithMosaic",e[e.photoCompression=8]="photoCompression",e}(ke||{});const Pe=()=>{const e=(0,n.A)(),[a,o]=(0,r.useState)(!1),[m,g]=(0,r.useState)(null),h=a=>{a&&0!==a.length&&(0,l._v)(a[0],(a=>{g(a),a||t.Ay.error(e.formatMessage({id:"common.parsingDataFailure"}))}))},x=e=>{e.stopPropagation(),e.preventDefault(),a||o(!0)},y=e=>{e.stopPropagation(),e.preventDefault(),a&&o(!1)},A=e=>{e.stopPropagation(),e.preventDefault(),a&&o(!1);const{files:r}=e.dataTransfer;h(r)},N={imgInfo:m,exportImage:(e,a)=>{if(!e||!m)return;const o=a?a.toLowerCase():m.fileType.toLowerCase();(0,l.Q1)(e,o,(e=>{if(e){let a="image";if(m&&m.name){const e=m.name.split(".");e.length>1?e.splice(e.length-1,1,o):e.push(o),a=e.join(".")}(0,l.HP)(e,a)}}))},imgDragOver:a,onDragOver:x,onDragLeave:y,onDrop:A,onClear:()=>{g(null)}},S=[{id:ke.basicOperation,label:e.formatMessage({id:"menu.imageProcessingTool.basicOperation"}),element:(0,w.jsx)(P,{...N})},{id:ke.rectClip,label:e.formatMessage({id:"menu.imageProcessingTool.rectangularClipping"}),element:(0,w.jsx)(te,{...N})},{id:ke.radiusClip,label:e.formatMessage({id:"menu.imageProcessingTool.roundedCornerClipping"}),element:(0,w.jsx)(ie,{...N})},{id:ke.changeSize,label:e.formatMessage({id:"menu.imageProcessingTool.modifyTheSize"}),element:(0,w.jsx)(ce,{...N})},{id:ke.changeBrightness,label:e.formatMessage({id:"menu.imageProcessingTool.modifyBrightness"}),element:(0,w.jsx)(me,{...N})},{id:ke.changeDiaphaneity,label:e.formatMessage({id:"menu.imageProcessingTool.modifyTransparency"}),element:(0,w.jsx)(ge,{...N})},{id:ke.addWatermark,label:e.formatMessage({id:"menu.imageProcessingTool.addWatermark"}),element:(0,w.jsx)(Te,{...N})},{id:ke.coverWithMosaic,label:e.formatMessage({id:"menu.imageProcessingTool.coverWithMosaics"}),element:(0,w.jsx)(we,{...N})},{id:ke.photoCompression,label:e.formatMessage({id:"menu.imageProcessingTool.imageCompression"}),element:(0,w.jsx)(Ce,{...N})}],[T,C]=(0,r.useState)(S[0].id);return(0,w.jsx)("div",{className:d,children:(0,w.jsxs)("div",{className:p,children:[(0,w.jsx)(c.A,{className:u,data:S,selectedTabId:T,onChange:e=>{C(e)}}),!m&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:f,style:{borderColor:a?"#0E5E6F":"#3A8891"},onDragOver:x,onDragLeave:y,onDrop:A,children:(0,w.jsxs)("div",{className:M,children:[(0,w.jsxs)(s.Ay,{type:"primary",className:v,children:[(0,w.jsx)(i.A,{}),e.formatMessage({id:"common.uploadFile"}),(0,w.jsx)("input",{type:"file",accept:"image/jpg, image/jpeg, image/png",onChange:e=>{const{files:a}=e.target;h(a)}})]}),(0,w.jsx)("p",{className:_,children:e.formatMessage({id:"common.dragTheFileHere"})}),(0,w.jsx)("p",{className:j,children:e.formatMessage({id:"common.supportedImageType"})})]})}),(0,w.jsxs)("div",{className:D,children:[e.formatMessage({id:"page.imageProcessingTool.extensionTipFront"}),(0,w.jsx)("span",{onClick:()=>{window.open("https://github.com/hepengwei/processing-image-tool")},children:" processing-image-tool "}),e.formatMessage({id:"page.imageProcessingTool.extensionTipBehind"})]})]}),m&&S.filter((e=>e.id===T))[0].element]})})}}}]);