(self.webpackChunkvisualization_collection=self.webpackChunkvisualization_collection||[]).push([[800],{20439:(t,e,n)=>{"use strict";n.d(e,{z1:()=>_,cM:()=>y,uy:()=>b});var r=n(62456),i=n(76250),o=2,a=.16,s=.05,u=.05,l=.15,c=5,h=4,d=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function f(t){var e=t.r,n=t.g,i=t.b,o=(0,r.wE)(e,n,i);return{h:360*o.h,s:o.s,v:o.v}}function p(t){var e=t.r,n=t.g,i=t.b;return"#".concat((0,r.Ob)(e,n,i,!1))}function m(t,e,n){var r;return(r=Math.round(t.h)>=60&&Math.round(t.h)<=240?n?Math.round(t.h)-o*e:Math.round(t.h)+o*e:n?Math.round(t.h)+o*e:Math.round(t.h)-o*e)<0?r+=360:r>=360&&(r-=360),r}function g(t,e,n){return 0===t.h&&0===t.s?t.s:((r=n?t.s-a*e:e===h?t.s+a:t.s+s*e)>1&&(r=1),n&&e===c&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2)));var r}function v(t,e,n){var r;return(r=n?t.v+u*e:t.v-l*e)>1&&(r=1),Number(r.toFixed(2))}function y(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=(0,i.RO)(t),o=c;o>0;o-=1){var a=f(r),s=p((0,i.RO)({h:m(a,o,!0),s:g(a,o,!0),v:v(a,o,!0)}));n.push(s)}n.push(p(r));for(var u=1;u<=h;u+=1){var l=f(r),y=p((0,i.RO)({h:m(l,u),s:g(l,u),v:v(l,u)}));n.push(y)}return"dark"===e.theme?d.map((function(t){var r,o,a,s=t.index,u=t.opacity;return p((r=(0,i.RO)(e.backgroundColor||"#141414"),o=(0,i.RO)(n[s]),a=100*u/100,{r:(o.r-r.r)*a+r.r,g:(o.g-r.g)*a+r.g,b:(o.b-r.b)*a+r.b}))})):n}var b={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},x={},w={};Object.keys(b).forEach((function(t){x[t]=y(b[t]),x[t].primary=x[t][5],w[t]=y(b[t],{theme:"dark",backgroundColor:"#141414"}),w[t].primary=w[t][5]}));x.red,x.volcano,x.gold,x.orange,x.yellow,x.lime,x.green,x.cyan;var _=x.blue;x.geekblue,x.purple,x.magenta,x.grey,x.grey},64552:(t,e,n)=>{"use strict";n.d(e,{Mo:()=>se,an:()=>k,Ki:()=>F,zA:()=>D,RC:()=>oe,hV:()=>tt,IV:()=>re});var r=n(64467),i=n(5544),o=n(60436),a=n(89379);const s=function(t){for(var e,n=0,r=0,i=t.length;i>=4;++r,i-=4)e=1540483477*(65535&(e=255&t.charCodeAt(r)|(255&t.charCodeAt(++r))<<8|(255&t.charCodeAt(++r))<<16|(255&t.charCodeAt(++r))<<24))+(59797*(e>>>16)<<16),n=1540483477*(65535&(e^=e>>>24))+(59797*(e>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&t.charCodeAt(r+2))<<16;case 2:n^=(255&t.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)};var u=n(85089),l=n(96540),c=n.t(l,2),h=(n(28104),n(43210),n(23029)),d=n(92901),f="%";function p(t){return t.join(f)}const m=function(){function t(e){(0,h.A)(this,t),(0,r.A)(this,"instanceId",void 0),(0,r.A)(this,"cache",new Map),this.instanceId=e}return(0,d.A)(t,[{key:"get",value:function(t){return this.opGet(p(t))}},{key:"opGet",value:function(t){return this.cache.get(t)||null}},{key:"update",value:function(t,e){return this.opUpdate(p(t),e)}},{key:"opUpdate",value:function(t,e){var n=e(this.cache.get(t));null===n?this.cache.delete(t):this.cache.set(t,n)}}]),t}();var g="data-token-hash",v="data-css-hash",y="__cssinjs_instance__";function b(){var t=Math.random().toString(12).slice(2);if("undefined"!=typeof document&&document.head&&document.body){var e=document.body.querySelectorAll("style[".concat(v,"]"))||[],n=document.head.firstChild;Array.from(e).forEach((function(e){e[y]=e[y]||t,e[y]===t&&document.head.insertBefore(e,n)}));var r={};Array.from(document.querySelectorAll("style[".concat(v,"]"))).forEach((function(e){var n,i=e.getAttribute(v);r[i]?e[y]===t&&(null===(n=e.parentNode)||void 0===n||n.removeChild(e)):r[i]=!0}))}return new m(t)}var x=l.createContext({hashPriority:"low",cache:b(),defaultCache:!0});const w=x;var _=n(82284),S=n(20998);var E=function(){function t(){(0,h.A)(this,t),(0,r.A)(this,"cache",void 0),(0,r.A)(this,"keys",void 0),(0,r.A)(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return(0,d.A)(t,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i={map:this.cache};return t.forEach((function(t){var e;i?i=null===(e=i)||void 0===e||null===(e=e.map)||void 0===e?void 0:e.get(t):i=void 0})),null!==(e=i)&&void 0!==e&&e.value&&r&&(i.value[1]=this.cacheCallTimes++),null===(n=i)||void 0===n?void 0:n.value}},{key:"get",value:function(t){var e;return null===(e=this.internalGet(t,!0))||void 0===e?void 0:e[0]}},{key:"has",value:function(t){return!!this.internalGet(t)}},{key:"set",value:function(e,n){var r=this;if(!this.has(e)){if(this.size()+1>t.MAX_CACHE_SIZE+t.MAX_CACHE_OFFSET){var o=this.keys.reduce((function(t,e){var n=(0,i.A)(t,2)[1];return r.internalGet(e)[1]<n?[e,r.internalGet(e)[1]]:t}),[this.keys[0],this.cacheCallTimes]),a=(0,i.A)(o,1)[0];this.delete(a)}this.keys.push(e)}var s=this.cache;e.forEach((function(t,i){if(i===e.length-1)s.set(t,{value:[n,r.cacheCallTimes++]});else{var o=s.get(t);o?o.map||(o.map=new Map):s.set(t,{map:new Map}),s=s.get(t).map}}))}},{key:"deleteByPath",value:function(t,e){var n,r=t.get(e[0]);if(1===e.length)return r.map?t.set(e[0],{map:r.map}):t.delete(e[0]),null===(n=r.value)||void 0===n?void 0:n[0];var i=this.deleteByPath(r.map,e.slice(1));return r.map&&0!==r.map.size||r.value||t.delete(e[0]),i}},{key:"delete",value:function(t){if(this.has(t))return this.keys=this.keys.filter((function(e){return!function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}(e,t)})),this.deleteByPath(this.cache,t)}}]),t}();(0,r.A)(E,"MAX_CACHE_SIZE",20),(0,r.A)(E,"MAX_CACHE_OFFSET",5);var A=n(68210),M=0,C=function(){function t(e){(0,h.A)(this,t),(0,r.A)(this,"derivatives",void 0),(0,r.A)(this,"id",void 0),this.derivatives=Array.isArray(e)?e:[e],this.id=M,0===e.length&&(0,A.$e)(e.length>0,"[Ant Design CSS-in-JS] Theme should have at least one derivative function."),M+=1}return(0,d.A)(t,[{key:"getDerivativeToken",value:function(t){return this.derivatives.reduce((function(e,n){return n(t,e)}),void 0)}}]),t}(),T=new E;function k(t){var e=Array.isArray(t)?t:[t];return T.has(e)||T.set(e,new C(e)),T.get(e)}var I=new WeakMap,N={};var P=new WeakMap;function O(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=P.get(t)||"";return n||(Object.keys(t).forEach((function(r){var i=t[r];n+=r,i instanceof C?n+=i.id:i&&"object"===(0,_.A)(i)?n+=O(i,e):n+=i})),e&&(n=s(n)),P.set(t,n)),n}function L(t,e){return s("".concat(e,"_").concat(O(t,!0)))}"random-".concat(Date.now(),"-").concat(Math.random()).replace(/\./g,"");var R=(0,S.A)();function D(t){return"number"==typeof t?"".concat(t,"px"):t}function z(t,e,n){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(arguments.length>4&&void 0!==arguments[4]&&arguments[4])return t;var s=(0,a.A)((0,a.A)({},o),{},(i={},(0,r.A)(i,g,e),(0,r.A)(i,v,n),i)),u=Object.keys(s).map((function(t){var e=s[t];return e?"".concat(t,'="').concat(e,'"'):null})).filter((function(t){return t})).join(" ");return"<style ".concat(u,">").concat(t,"</style>")}var F=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"--".concat(e?"".concat(e,"-"):"").concat(t).replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z]+)([A-Z][a-z0-9]+)/g,"$1-$2").replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase()},B=function(t,e,n){return Object.keys(t).length?".".concat(e).concat(null!=n&&n.scope?".".concat(n.scope):"","{").concat(Object.entries(t).map((function(t){var e=(0,i.A)(t,2),n=e[0],r=e[1];return"".concat(n,":").concat(r,";")})).join(""),"}"):""},U=function(t,e,n){var r={},o={};return Object.entries(t).forEach((function(t){var e,a,s=(0,i.A)(t,2),u=s[0],l=s[1];if(null!=n&&null!==(e=n.preserve)&&void 0!==e&&e[u])o[u]=l;else if(!("string"!=typeof l&&"number"!=typeof l||null!=n&&null!==(a=n.ignore)&&void 0!==a&&a[u])){var c,h=F(u,null==n?void 0:n.prefix);r[h]="number"!=typeof l||null!=n&&null!==(c=n.unitless)&&void 0!==c&&c[u]?String(l):"".concat(l,"px"),o[u]="var(".concat(h,")")}})),[o,B(r,e,{scope:null==n?void 0:n.scope})]},j=n(30981),V=(0,a.A)({},c).useInsertionEffect;const H=V?function(t,e,n){return V((function(){return t(),e()}),n)}:function(t,e,n){l.useMemo(t,n),(0,j.A)((function(){return e(!0)}),n)};const G=void 0!==(0,a.A)({},c).useInsertionEffect?function(t){var e=[],n=!1;return l.useEffect((function(){return n=!1,function(){n=!0,e.length&&e.forEach((function(t){return t()}))}}),t),function(t){n||e.push(t)}}:function(){return function(t){t()}};const W=function(){return!1};function X(t,e,n,r,a){var s=l.useContext(w).cache,u=p([t].concat((0,o.A)(e))),c=G([u]),h=(W(),function(t){s.opUpdate(u,(function(e){var r=e||[void 0,void 0],o=(0,i.A)(r,2),a=o[0];var s=[void 0===a?0:a,o[1]||n()];return t?t(s):s}))});l.useMemo((function(){h()}),[u]);var d=s.opGet(u)[1];return H((function(){null==a||a(d)}),(function(t){return h((function(e){var n=(0,i.A)(e,2),r=n[0],o=n[1];return t&&0===r&&(null==a||a(d)),[r+1,o]})),function(){s.opUpdate(u,(function(e){var n=e||[],o=(0,i.A)(n,2),a=o[0],l=void 0===a?0:a,h=o[1];return 0===l-1?(c((function(){!t&&s.opGet(u)||null==r||r(h,!1)})),null):[l-1,h]}))}}),[u]),d}var Y={},q="css",$=new Map;var K=0;function Z(t,e){$.set(t,($.get(t)||0)-1);var n=Array.from($.keys()),r=n.filter((function(t){return($.get(t)||0)<=0}));n.length-r.length>K&&r.forEach((function(t){!function(t,e){"undefined"!=typeof document&&document.querySelectorAll("style[".concat(g,'="').concat(t,'"]')).forEach((function(t){var n;t[y]===e&&(null===(n=t.parentNode)||void 0===n||n.removeChild(t))}))}(t,e),$.delete(t)}))}var Q=function(t,e,n,r){var i=n.getDerivativeToken(t),o=(0,a.A)((0,a.A)({},i),e);return r&&(o=r(o)),o},J="token";function tt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(0,l.useContext)(w),c=r.cache.instanceId,h=r.container,d=n.salt,f=void 0===d?"":d,p=n.override,m=void 0===p?Y:p,b=n.formatToken,x=n.getComputedToken,_=n.cssVar,S=function(t,e){for(var n=I,r=0;r<e.length;r+=1){var i=e[r];n.has(i)||n.set(i,new WeakMap),n=n.get(i)}return n.has(N)||n.set(N,t()),n.get(N)}((function(){return Object.assign.apply(Object,[{}].concat((0,o.A)(e)))}),e),E=O(S),A=O(m),M=_?O(_):"",C=X(J,[f,t.id,E,A,M],(function(){var e,n=x?x(S,m,t):Q(S,m,t,b),r=(0,a.A)({},n),o="";if(_){var u=U(n,_.key,{prefix:_.prefix,ignore:_.ignore,unitless:_.unitless,preserve:_.preserve}),l=(0,i.A)(u,2);n=l[0],o=l[1]}var c=L(n,f);n._tokenKey=c,r._tokenKey=L(r,f);var h=null!==(e=null==_?void 0:_.key)&&void 0!==e?e:c;n._themeKey=h,function(t){$.set(t,($.get(t)||0)+1)}(h);var d="".concat(q,"-").concat(s(c));return n._hashId=d,[n,d,r,o,(null==_?void 0:_.key)||""]}),(function(t){Z(t[0]._themeKey,c)}),(function(t){var e=(0,i.A)(t,4),n=e[0],r=e[3];if(_&&r){var o=(0,u.BD)(r,s("css-variables-".concat(n._themeKey)),{mark:v,prepend:"queue",attachTo:h,priority:-999});o[y]=c,o.setAttribute(g,n._themeKey)}}));return C}var et=n(58168);const nt={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var rt="comm",it="rule",ot="decl",at="@import",st="@keyframes",ut="@layer",lt=Math.abs,ct=String.fromCharCode;Object.assign;function ht(t){return t.trim()}function dt(t,e,n){return t.replace(e,n)}function ft(t,e,n){return t.indexOf(e,n)}function pt(t,e){return 0|t.charCodeAt(e)}function mt(t,e,n){return t.slice(e,n)}function gt(t){return t.length}function vt(t,e){return e.push(t),t}function yt(t,e){for(var n="",r=0;r<t.length;r++)n+=e(t[r],r,t,e)||"";return n}function bt(t,e,n,r){switch(t.type){case ut:if(t.children.length)break;case at:case ot:return t.return=t.return||t.value;case rt:return"";case st:return t.return=t.value+"{"+yt(t.children,r)+"}";case it:if(!gt(t.value=t.props.join(",")))return""}return gt(n=yt(t.children,r))?t.return=t.value+"{"+n+"}":""}var xt=1,wt=1,_t=0,St=0,Et=0,At="";function Mt(t,e,n,r,i,o,a,s){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:xt,column:wt,length:a,return:"",siblings:s}}function Ct(){return Et=St>0?pt(At,--St):0,wt--,10===Et&&(wt=1,xt--),Et}function Tt(){return Et=St<_t?pt(At,St++):0,wt++,10===Et&&(wt=1,xt++),Et}function kt(){return pt(At,St)}function It(){return St}function Nt(t,e){return mt(At,t,e)}function Pt(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Ot(t){return xt=wt=1,_t=gt(At=t),St=0,[]}function Lt(t){return At="",t}function Rt(t){return ht(Nt(St-1,Ft(91===t?t+2:40===t?t+1:t)))}function Dt(t){for(;(Et=kt())&&Et<33;)Tt();return Pt(t)>2||Pt(Et)>3?"":" "}function zt(t,e){for(;--e&&Tt()&&!(Et<48||Et>102||Et>57&&Et<65||Et>70&&Et<97););return Nt(t,It()+(e<6&&32==kt()&&32==Tt()))}function Ft(t){for(;Tt();)switch(Et){case t:return St;case 34:case 39:34!==t&&39!==t&&Ft(Et);break;case 40:41===t&&Ft(t);break;case 92:Tt()}return St}function Bt(t,e){for(;Tt()&&t+Et!==57&&(t+Et!==84||47!==kt()););return"/*"+Nt(e,St-1)+"*"+ct(47===t?t:Tt())}function Ut(t){for(;!Pt(kt());)Tt();return Nt(t,St)}function jt(t){return Lt(Vt("",null,null,null,[""],t=Ot(t),0,[0],t))}function Vt(t,e,n,r,i,o,a,s,u){for(var l=0,c=0,h=a,d=0,f=0,p=0,m=1,g=1,v=1,y=0,b="",x=i,w=o,_=r,S=b;g;)switch(p=y,y=Tt()){case 40:if(108!=p&&58==pt(S,h-1)){-1!=ft(S+=dt(Rt(y),"&","&\f"),"&\f",lt(l?s[l-1]:0))&&(v=-1);break}case 34:case 39:case 91:S+=Rt(y);break;case 9:case 10:case 13:case 32:S+=Dt(p);break;case 92:S+=zt(It()-1,7);continue;case 47:switch(kt()){case 42:case 47:vt(Gt(Bt(Tt(),It()),e,n,u),u);break;default:S+="/"}break;case 123*m:s[l++]=gt(S)*v;case 125*m:case 59:case 0:switch(y){case 0:case 125:g=0;case 59+c:-1==v&&(S=dt(S,/\f/g,"")),f>0&&gt(S)-h&&vt(f>32?Wt(S+";",r,n,h-1,u):Wt(dt(S," ","")+";",r,n,h-2,u),u);break;case 59:S+=";";default:if(vt(_=Ht(S,e,n,l,c,i,s,b,x=[],w=[],h,o),o),123===y)if(0===c)Vt(S,e,_,_,x,o,h,s,w);else switch(99===d&&110===pt(S,3)?100:d){case 100:case 108:case 109:case 115:Vt(t,_,_,r&&vt(Ht(t,_,_,0,0,i,s,b,i,x=[],h,w),w),i,w,h,s,r?x:w);break;default:Vt(S,_,_,_,[""],w,0,s,w)}}l=c=f=0,m=v=1,b=S="",h=a;break;case 58:h=1+gt(S),f=p;default:if(m<1)if(123==y)--m;else if(125==y&&0==m++&&125==Ct())continue;switch(S+=ct(y),y*m){case 38:v=c>0?1:(S+="\f",-1);break;case 44:s[l++]=(gt(S)-1)*v,v=1;break;case 64:45===kt()&&(S+=Rt(Tt())),d=kt(),c=h=gt(b=S+=Ut(It())),y++;break;case 45:45===p&&2==gt(S)&&(m=0)}}return o}function Ht(t,e,n,r,i,o,a,s,u,l,c,h){for(var d=i-1,f=0===i?o:[""],p=function(t){return t.length}(f),m=0,g=0,v=0;m<r;++m)for(var y=0,b=mt(t,d+1,d=lt(g=a[m])),x=t;y<p;++y)(x=ht(g>0?f[y]+" "+b:dt(b,/&\f/g,f[y])))&&(u[v++]=x);return Mt(t,e,n,0===i?it:s,u,l,c,h)}function Gt(t,e,n,r){return Mt(t,e,n,rt,ct(Et),mt(t,2,-2),0,r)}function Wt(t,e,n,r,i){return Mt(t,e,n,ot,mt(t,0,r),mt(t,r+1,-1),r,i)}var Xt,Yt="data-ant-cssinjs-cache-path",qt="_FILE_STYLE__";var $t=!0;function Kt(t){return function(){if(!Xt&&(Xt={},(0,S.A)())){var t=document.createElement("div");t.className=Yt,t.style.position="fixed",t.style.visibility="hidden",t.style.top="-9999px",document.body.appendChild(t);var e=getComputedStyle(t).content||"";(e=e.replace(/^"/,"").replace(/"$/,"")).split(";").forEach((function(t){var e=t.split(":"),n=(0,i.A)(e,2),r=n[0],o=n[1];Xt[r]=o}));var n,r=document.querySelector("style[".concat(Yt,"]"));r&&($t=!1,null===(n=r.parentNode)||void 0===n||n.removeChild(r)),document.body.removeChild(t)}}(),!!Xt[t]}var Zt="_multi_value_";function Qt(t){return yt(jt(t),bt).replace(/\{%%%\:[^;];}/g,";")}var Jt=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{root:!0,parentSelectors:[]},s=r.root,u=r.injectHash,l=r.parentSelectors,c=n.hashId,h=n.layer,d=(n.path,n.hashPriority),f=n.transformers,p=void 0===f?[]:f,m=(n.linters,""),g={};function v(e){var r=e.getName(c);if(!g[r]){var o=t(e.style,n,{root:!1,parentSelectors:l}),a=(0,i.A)(o,1)[0];g[r]="@keyframes ".concat(e.getName(c)).concat(a)}}var y=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.forEach((function(e){Array.isArray(e)?t(e,n):e&&n.push(e)})),n}(Array.isArray(e)?e:[e]);return y.forEach((function(e){var r="string"!=typeof e||s?e:{};if("string"==typeof r)m+="".concat(r,"\n");else if(r._keyframe)v(r);else{var h=p.reduce((function(t,e){var n;return(null==e||null===(n=e.visit)||void 0===n?void 0:n.call(e,t))||t}),r);Object.keys(h).forEach((function(e){var r=h[e];if("object"!==(0,_.A)(r)||!r||"animationName"===e&&r._keyframe||function(t){return"object"===(0,_.A)(t)&&t&&("_skip_check_"in t||Zt in t)}(r)){var f;function M(t,e){var n=t.replace(/[A-Z]/g,(function(t){return"-".concat(t.toLowerCase())})),r=e;nt[t]||"number"!=typeof r||0===r||(r="".concat(r,"px")),"animationName"===t&&null!=e&&e._keyframe&&(v(e),r=e.getName(c)),m+="".concat(n,":").concat(r,";")}var p=null!==(f=null==r?void 0:r.value)&&void 0!==f?f:r;"object"===(0,_.A)(r)&&null!=r&&r[Zt]&&Array.isArray(p)?p.forEach((function(t){M(e,t)})):M(e,p)}else{var y=!1,b=e.trim(),x=!1;(s||u)&&c?b.startsWith("@")?y=!0:b=function(t,e,n){if(!e)return t;var r=".".concat(e),i="low"===n?":where(".concat(r,")"):r;return t.split(",").map((function(t){var e,n=t.trim().split(/\s+/),r=n[0]||"",a=(null===(e=r.match(/^\w+/))||void 0===e?void 0:e[0])||"";return[r="".concat(a).concat(i).concat(r.slice(a.length))].concat((0,o.A)(n.slice(1))).join(" ")})).join(",")}(e,c,d):!s||c||"&"!==b&&""!==b||(b="",x=!0);var w=t(r,n,{root:x,injectHash:y,parentSelectors:[].concat((0,o.A)(l),[b])}),S=(0,i.A)(w,2),E=S[0],A=S[1];g=(0,a.A)((0,a.A)({},g),A),m+="".concat(b).concat(E)}}))}})),s?h&&(m="@layer ".concat(h.name," {").concat(m,"}"),h.dependencies&&(g["@layer ".concat(h.name)]=h.dependencies.map((function(t){return"@layer ".concat(t,", ").concat(h.name,";")})).join("\n"))):m="{".concat(m,"}"),[m,g]};function te(t,e){return s("".concat(t.join("%")).concat(e))}function ee(){return null}var ne="style";function re(t,e){var n=t.token,s=t.path,c=t.hashId,h=t.layer,d=t.nonce,f=t.clientOnly,p=t.order,m=void 0===p?0:p,b=l.useContext(w),x=b.autoClear,_=(b.mock,b.defaultCache),E=b.hashPriority,A=b.container,M=b.ssrInline,C=b.transformers,T=b.linters,k=b.cache,I=b.layer,N=n._tokenKey,P=[N];I&&P.push("layer"),P.push.apply(P,(0,o.A)(s));var O=R;var L=X(ne,P,(function(){var t=P.join("|");if(Kt(t)){var n=function(t){var e=Xt[t],n=null;if(e&&(0,S.A)())if($t)n=qt;else{var r=document.querySelector("style[".concat(v,'="').concat(Xt[t],'"]'));r?n=r.innerHTML:delete Xt[t]}return[n,e]}(t),r=(0,i.A)(n,2),o=r[0],a=r[1];if(o)return[o,N,a,{},f,m]}var u=e(),l=Jt(u,{hashId:c,hashPriority:E,layer:I?h:void 0,path:s.join("-"),transformers:C,linters:T}),d=(0,i.A)(l,2),p=d[0],g=d[1],y=Qt(p),b=te(P,y);return[y,N,b,g,f,m]}),(function(t,e){var n=(0,i.A)(t,3)[2];(e||x)&&R&&(0,u.m6)(n,{mark:v})}),(function(t){var e=(0,i.A)(t,4),n=e[0],r=(e[1],e[2]),o=e[3];if(O&&n!==qt){var s={mark:v,prepend:!I&&"queue",attachTo:A,priority:m},l="function"==typeof d?d():d;l&&(s.csp={nonce:l});var c=[],h=[];Object.keys(o).forEach((function(t){t.startsWith("@layer")?c.push(t):h.push(t)})),c.forEach((function(t){(0,u.BD)(Qt(o[t]),"_layer-".concat(t),(0,a.A)((0,a.A)({},s),{},{prepend:!0}))}));var f=(0,u.BD)(n,r,s);f[y]=k.instanceId,f.setAttribute(g,N),h.forEach((function(t){(0,u.BD)(Qt(o[t]),"_effect-".concat(t),s)}))}})),D=(0,i.A)(L,3),z=D[0],F=D[1],B=D[2];return function(t){var e,n;M&&!O&&_?e=l.createElement("style",(0,et.A)({},(n={},(0,r.A)(n,g,F),(0,r.A)(n,v,B),n),{dangerouslySetInnerHTML:{__html:z}})):e=l.createElement(ee,null);return l.createElement(l.Fragment,null,e,t)}}var ie="cssVar";const oe=function(t,e){var n=t.key,r=t.prefix,a=t.unitless,s=t.ignore,c=t.token,h=t.scope,d=void 0===h?"":h,f=(0,l.useContext)(w),p=f.cache.instanceId,m=f.container,b=c._tokenKey,x=[].concat((0,o.A)(t.path),[n,d,b]);return X(ie,x,(function(){var t=e(),o=U(t,n,{prefix:r,unitless:a,ignore:s,scope:d}),u=(0,i.A)(o,2),l=u[0],c=u[1];return[l,c,te(x,c),n]}),(function(t){var e=(0,i.A)(t,3)[2];R&&(0,u.m6)(e,{mark:v})}),(function(t){var e=(0,i.A)(t,3),r=e[1],o=e[2];if(r){var a=(0,u.BD)(r,o,{mark:v,prepend:"queue",attachTo:m,priority:-999});a[y]=p,a.setAttribute(g,n)}}))};var ae;ae={},(0,r.A)(ae,ne,(function(t,e,n){var r=(0,i.A)(t,6),o=r[0],a=r[1],s=r[2],u=r[3],l=r[4],c=r[5],h=(n||{}).plain;if(l)return null;var d=o,f={"data-rc-order":"prependQueue","data-rc-priority":"".concat(c)};return d=z(o,a,s,f,h),u&&Object.keys(u).forEach((function(t){if(!e[t]){e[t]=!0;var n=z(Qt(u[t]),a,"_effect-".concat(t),f,h);t.startsWith("@layer")?d=n+d:d+=n}})),[c,s,d]})),(0,r.A)(ae,J,(function(t,e,n){var r=(0,i.A)(t,5),o=r[2],a=r[3],s=r[4],u=(n||{}).plain;if(!a)return null;var l=o._tokenKey;return[-999,l,z(a,s,l,{"data-rc-order":"prependQueue","data-rc-priority":"".concat(-999)},u)]})),(0,r.A)(ae,ie,(function(t,e,n){var r=(0,i.A)(t,4),o=r[1],a=r[2],s=r[3],u=(n||{}).plain;if(!o)return null;return[-999,a,z(o,s,a,{"data-rc-order":"prependQueue","data-rc-priority":"".concat(-999)},u)]}));const se=function(){function t(e,n){(0,h.A)(this,t),(0,r.A)(this,"name",void 0),(0,r.A)(this,"style",void 0),(0,r.A)(this,"_keyframe",!0),this.name=e,this.style=n}return(0,d.A)(t,[{key:"getName",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t?"".concat(t,"-").concat(this.name):this.name}}]),t}();function ue(t){return t.notSplit=!0,t}ue(["borderTop","borderBottom"]),ue(["borderTop"]),ue(["borderBottom"]),ue(["borderLeft","borderRight"]),ue(["borderLeft"]),ue(["borderRight"])},87064:(t,e,n)=>{"use strict";n.d(e,{A:()=>k});var r=n(58168),i=n(5544),o=n(64467),a=n(53986),s=n(96540),u=n(46942),l=n.n(u),c=n(20439),h=n(61053),d=n(89379),f=n(82284),p=n(85089),m=n(72633),g=n(68210);function v(t){return"object"===(0,f.A)(t)&&"string"==typeof t.name&&"string"==typeof t.theme&&("object"===(0,f.A)(t.icon)||"function"==typeof t.icon)}function y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(t).reduce((function(e,n){var r,i=t[n];if("class"===n)e.className=i,delete e.class;else delete e[n],e[(r=n,r.replace(/-(.)/g,(function(t,e){return e.toUpperCase()})))]=i;return e}),{})}function b(t,e,n){return n?s.createElement(t.tag,(0,d.A)((0,d.A)({key:e},y(t.attrs)),n),(t.children||[]).map((function(n,r){return b(n,"".concat(e,"-").concat(t.tag,"-").concat(r))}))):s.createElement(t.tag,(0,d.A)({key:e},y(t.attrs)),(t.children||[]).map((function(n,r){return b(n,"".concat(e,"-").concat(t.tag,"-").concat(r))})))}function x(t){return(0,c.cM)(t)[0]}function w(t){return t?Array.isArray(t)?t:[t]:[]}var _=["icon","className","onClick","style","primaryColor","secondaryColor"],S={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};var E=function(t){var e,n,r,i,o,u,l,c=t.icon,f=t.className,y=t.onClick,w=t.style,E=t.primaryColor,A=t.secondaryColor,M=(0,a.A)(t,_),C=s.useRef(),T=S;if(E&&(T={primaryColor:E,secondaryColor:A||x(E)}),e=C,n=(0,s.useContext)(h.A),r=n.csp,i=n.prefixCls,o="\n.anticon {\n  display: inline-flex;\n  alignItems: center;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n",i&&(o=o.replace(/anticon/g,i)),(0,s.useEffect)((function(){var t=e.current,n=(0,m.j)(t);(0,p.BD)(o,"@ant-design-icons",{prepend:!0,csp:r,attachTo:n})}),[]),u=v(c),l="icon should be icon definiton, but got ".concat(c),(0,g.Ay)(u,"[@ant-design/icons] ".concat(l)),!v(c))return null;var k=c;return k&&"function"==typeof k.icon&&(k=(0,d.A)((0,d.A)({},k),{},{icon:k.icon(T.primaryColor,T.secondaryColor)})),b(k.icon,"svg-".concat(k.name),(0,d.A)((0,d.A)({className:f,onClick:y,style:w,"data-icon":k.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},M),{},{ref:C}))};E.displayName="IconReact",E.getTwoToneColors=function(){return(0,d.A)({},S)},E.setTwoToneColors=function(t){var e=t.primaryColor,n=t.secondaryColor;S.primaryColor=e,S.secondaryColor=n||x(e),S.calculated=!!n};const A=E;function M(t){var e=w(t),n=(0,i.A)(e,2),r=n[0],o=n[1];return A.setTwoToneColors({primaryColor:r,secondaryColor:o})}var C=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];M(c.z1.primary);var T=s.forwardRef((function(t,e){var n=t.className,u=t.icon,c=t.spin,d=t.rotate,f=t.tabIndex,p=t.onClick,m=t.twoToneColor,g=(0,a.A)(t,C),v=s.useContext(h.A),y=v.prefixCls,b=void 0===y?"anticon":y,x=v.rootClassName,_=l()(x,b,(0,o.A)((0,o.A)({},"".concat(b,"-").concat(u.name),!!u.name),"".concat(b,"-spin"),!!c||"loading"===u.name),n),S=f;void 0===S&&p&&(S=-1);var E=d?{msTransform:"rotate(".concat(d,"deg)"),transform:"rotate(".concat(d,"deg)")}:void 0,M=w(m),T=(0,i.A)(M,2),k=T[0],I=T[1];return s.createElement("span",(0,r.A)({role:"img","aria-label":u.name},g,{ref:e,tabIndex:S,onClick:p,className:_}),s.createElement(A,{icon:u,primaryColor:k,secondaryColor:I,style:E}))}));T.displayName="AntdIcon",T.getTwoToneColor=function(){var t=A.getTwoToneColors();return t.calculated?[t.primaryColor,t.secondaryColor]:t.primaryColor},T.setTwoToneColor=M;const k=T},61053:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r=(0,n(96540).createContext)({})},44663:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v584zM639.5 414h-45c-3 0-5.8 1.7-7.1 4.4L514 563.8h-2.8l-73.4-145.4a8 8 0 00-7.1-4.4h-46c-1.3 0-2.7.3-3.8 1-3.9 2.1-5.3 7-3.2 10.9l89.3 164h-48.6c-4.4 0-8 3.6-8 8v21.3c0 4.4 3.6 8 8 8h65.1v33.7h-65.1c-4.4 0-8 3.6-8 8v21.3c0 4.4 3.6 8 8 8h65.1V752c0 4.4 3.6 8 8 8h41.3c4.4 0 8-3.6 8-8v-53.8h65.4c4.4 0 8-3.6 8-8v-21.3c0-4.4-3.6-8-8-8h-65.4v-33.7h65.4c4.4 0 8-3.6 8-8v-21.3c0-4.4-3.6-8-8-8h-49.1l89.3-164.1c.6-1.2 1-2.5 1-3.8.1-4.4-3.4-8-7.9-8z"}}]},name:"account-book",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},77639:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M952 474H829.8C812.5 327.6 696.4 211.5 550 194.2V72c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v122.2C327.6 211.5 211.5 327.6 194.2 474H72c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h122.2C211.5 696.4 327.6 812.5 474 829.8V952c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V829.8C696.4 812.5 812.5 696.4 829.8 550H952c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zM512 756c-134.8 0-244-109.2-244-244s109.2-244 244-244 244 109.2 244 244-109.2 244-244 244z"}},{tag:"path",attrs:{d:"M512 392c-32.1 0-62.1 12.4-84.8 35.2-22.7 22.7-35.2 52.7-35.2 84.8s12.5 62.1 35.2 84.8C449.9 619.4 480 632 512 632s62.1-12.5 84.8-35.2C619.4 574.1 632 544 632 512s-12.5-62.1-35.2-84.8A118.57 118.57 0 00512 392z"}}]},name:"aim",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},99328:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M193 796c0 17.7 14.3 32 32 32h574c17.7 0 32-14.3 32-32V563c0-176.2-142.8-319-319-319S193 386.8 193 563v233zm72-233c0-136.4 110.6-247 247-247s247 110.6 247 247v193H404V585c0-5.5-4.5-10-10-10h-44c-5.5 0-10 4.5-10 10v171h-75V563zm-48.1-252.5l39.6-39.6c3.1-3.1 3.1-8.2 0-11.3l-67.9-67.9a8.03 8.03 0 00-11.3 0l-39.6 39.6a8.03 8.03 0 000 11.3l67.9 67.9c3.1 3.1 8.1 3.1 11.3 0zm669.6-79.2l-39.6-39.6a8.03 8.03 0 00-11.3 0l-67.9 67.9a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l67.9-67.9c3.1-3.2 3.1-8.2 0-11.3zM832 892H192c-17.7 0-32 14.3-32 32v24c0 4.4 3.6 8 8 8h688c4.4 0 8-3.6 8-8v-24c0-17.7-14.3-32-32-32zM484 180h56c4.4 0 8-3.6 8-8V76c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v96c0 4.4 3.6 8 8 8z"}}]},name:"alert",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},66480:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.42 0 448 200.58 448 448S759.42 960 512 960 64 759.42 64 512 264.58 64 512 64m32.5 168c-69.67 0-86.06 16.84-86.72 39.08l-.02 1.43v46.62H291.45c-9.92 0-14.28 23.05-14.27 39.3 0 2.7 2.08 4.93 4.77 4.93h175.81v58.3h-116.5c-9.96 0-14.3 23.76-14.27 39.47a4.77 4.77 0 004.77 4.76h233.45c-4.53 41.06-15.43 77.59-30.72 109.32l-1.22 2.5-.32-.28c-60.24-28.47-120.43-52.57-194.4-52.57l-2.62.01c-84.98 1.11-144.71 56.5-145.91 127.04l-.02 1.22.02 2.13c1.24 70.4 63.56 126.45 148.52 126.45 61.25 0 116.38-16.85 163.46-45.02a138.58 138.58 0 0014.07-7.96 345.6 345.6 0 0050.3-41.16l9.45 6.35 12.46 8.32c57.53 38.26 113.76 72.62 169.86 79.27a142.62 142.62 0 0018.31 1.16c43.02 0 55-52.68 57.39-95.51l.14-2.84c.4-8.46-6.2-15.6-14.65-15.86-75.46-2.37-136.45-22.05-192-46.11l-6.27-2.75c35.15-56.8 56.66-121.81 57.15-186.66l.09-1.08c.4-5.51-4-10.2-9.52-10.2H549.33v-58.3h165.73c9.92 0 14.28-22.12 14.27-39.31a4.85 4.85 0 00-4.78-4.92H549.32v-82.35a4.8 4.8 0 00-4.83-4.78M328 583.85c54.63 0 107.08 22.41 158.1 52.19l5.76 3.4c-103.57 119.84-247.17 95.9-261.72 26.37a66.89 66.89 0 01-1.14-9.83l-.06-2.34.02-.9c.97-40.12 45.33-68.9 99.04-68.9"}}]},name:"alipay-circle",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},11033:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M557.2 129a6.68 6.68 0 016.72 6.65V250.2h243.8a6.74 6.74 0 016.65 6.84c.02 23.92-6.05 54.69-19.85 54.69H563.94v81.1h166.18c7.69 0 13.8 6.51 13.25 14.18l-.11 1.51c-.7 90.2-30.63 180.64-79.52 259.65l8.71 3.82c77.3 33.48 162.15 60.85 267.15 64.14a21.08 21.08 0 0120.38 22.07l-.2 3.95c-3.34 59.57-20 132.85-79.85 132.85-8.8 0-17.29-.55-25.48-1.61-78.04-9.25-156.28-57.05-236.32-110.27l-17.33-11.57-13.15-8.83a480.83 480.83 0 01-69.99 57.25 192.8 192.8 0 01-19.57 11.08c-65.51 39.18-142.21 62.6-227.42 62.62-118.2 0-204.92-77.97-206.64-175.9l-.03-2.95.03-1.7c1.66-98.12 84.77-175.18 203-176.72l3.64-.03c102.92 0 186.66 33.54 270.48 73.14l.44.38 1.7-3.47c21.27-44.14 36.44-94.95 42.74-152.06h-324.8a6.64 6.64 0 01-6.63-6.62c-.04-21.86 6-54.91 19.85-54.91h162.1v-81.1H191.92a6.71 6.71 0 01-6.64-6.85c-.01-22.61 6.06-54.68 19.86-54.68h231.4v-64.85l.02-1.99c.9-30.93 23.72-54.36 120.64-54.36M256.9 619c-74.77 0-136.53 39.93-137.88 95.6l-.02 1.26.08 3.24a92.55 92.55 0 001.58 13.64c20.26 96.5 220.16 129.71 364.34-36.59l-8.03-4.72C405.95 650.11 332.94 619 256.9 619"}}]},name:"alipay",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},80002:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868.2 377.4c-18.9-45.1-46.3-85.6-81.2-120.6a377.26 377.26 0 00-120.5-81.2A375.65 375.65 0 00519 145.8c-41.9 0-82.9 6.7-121.9 20C306 123.3 200.8 120 170.6 120c-2.2 0-7.4 0-9.4.2-11.9.4-22.8 6.5-29.2 16.4-6.5 9.9-7.7 22.4-3.4 33.5l64.3 161.6a378.59 378.59 0 00-52.8 193.2c0 51.4 10 101 29.8 147.6 18.9 45 46.2 85.6 81.2 120.5 34.7 34.8 75.4 62.1 120.5 81.2C418.3 894 467.9 904 519 904c51.3 0 100.9-10.1 147.7-29.8 44.9-18.9 85.5-46.3 120.4-81.2 34.7-34.8 62.1-75.4 81.2-120.6a376.5 376.5 0 0029.8-147.6c-.2-51.2-10.1-100.8-29.9-147.4zm-66.4 266.5a307.08 307.08 0 01-65.9 98c-28.4 28.5-61.3 50.7-97.7 65.9h-.1c-38 16-78.3 24.2-119.9 24.2a306.51 306.51 0 01-217.5-90.2c-28.4-28.5-50.6-61.4-65.8-97.8v-.1c-16-37.8-24.1-78.2-24.1-119.9 0-55.4 14.8-109.7 42.8-157l13.2-22.1-9.5-23.9L206 192c14.9.6 35.9 2.1 59.7 5.6 43.8 6.5 82.5 17.5 114.9 32.6l19 8.9 19.9-6.8c31.5-10.8 64.8-16.2 98.9-16.2a306.51 306.51 0 01217.5 90.2c28.4 28.5 50.6 61.4 65.8 97.8l.1.1.1.1c16 37.6 24.1 78 24.2 119.8-.1 41.7-8.3 82-24.3 119.8zM681.1 364.2c-20.4 0-37.1 16.7-37.1 37.1v55.1c0 20.4 16.6 37.1 37.1 37.1s37.1-16.7 37.1-37.1v-55.1c0-20.5-16.7-37.1-37.1-37.1zm-175.2 0c-20.5 0-37.1 16.7-37.1 37.1v55.1c0 20.4 16.7 37.1 37.1 37.1 20.5 0 37.1-16.7 37.1-37.1v-55.1c0-20.5-16.7-37.1-37.1-37.1z"}}]},name:"aliwangwang",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},43965:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M959.2 383.9c-.3-82.1-66.9-148.6-149.1-148.6H575.9l21.6 85.2 201 43.7a42.58 42.58 0 0132.9 39.7c.1.5.1 216.1 0 216.6a42.58 42.58 0 01-32.9 39.7l-201 43.7-21.6 85.3h234.2c82.1 0 148.8-66.5 149.1-148.6V383.9zM225.5 660.4a42.58 42.58 0 01-32.9-39.7c-.1-.6-.1-216.1 0-216.6.8-19.4 14.6-35.5 32.9-39.7l201-43.7 21.6-85.2H213.8c-82.1 0-148.8 66.4-149.1 148.6V641c.3 82.1 67 148.6 149.1 148.6H448l-21.6-85.3-200.9-43.9zm200.9-158.8h171v21.3h-171z"}}]},name:"aliyun",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},91046:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M825 768.9c-3.3-.9-7.3-.4-11.9 1.3-61.6 28.2-121.5 48.3-179.7 60.2C507.7 856 385.2 842.6 266 790.3c-33.1-14.6-79.1-39.2-138-74a9.36 9.36 0 00-5.3-2c-2-.1-3.7.1-5.3.9-1.6.8-2.8 1.8-3.7 3.1-.9 1.3-1.1 3.1-.4 5.4.6 2.2 2.1 4.7 4.6 7.4 10.4 12.2 23.3 25.2 38.6 39s35.6 29.4 60.9 46.8c25.3 17.4 51.8 32.9 79.3 46.4 27.6 13.5 59.6 24.9 96.1 34.1s73 13.8 109.4 13.8c36.2 0 71.4-3.7 105.5-10.9 34.2-7.3 63-15.9 86.5-25.9 23.4-9.9 45-21 64.8-33 19.8-12 34.4-22.2 43.9-30.3 9.5-8.2 16.3-14.6 20.2-19.4 4.6-5.7 6.9-10.6 6.9-14.9.1-4.5-1.7-7.1-5-7.9zM527.4 348.1c-15.2 1.3-33.5 4.1-55 8.3-21.5 4.1-41.4 9.3-59.8 15.4s-37.2 14.6-56.3 25.4c-19.2 10.8-35.5 23.2-49 37s-24.5 31.1-33.1 52c-8.6 20.8-12.9 43.7-12.9 68.7 0 27.1 4.7 51.2 14.3 72.5 9.5 21.3 22.2 38 38.2 50.4 15.9 12.4 34 22.1 54 29.2 20 7.1 41.2 10.3 63.2 9.4 22-.9 43.5-4.3 64.4-10.3 20.8-5.9 40.4-15.4 58.6-28.3 18.2-12.9 33.1-28.2 44.8-45.7 4.3 6.6 8.1 11.5 11.5 14.7l8.7 8.9c5.8 5.9 14.7 14.6 26.7 26.1 11.9 11.5 24.1 22.7 36.3 33.7l104.4-99.9-6-4.9c-4.3-3.3-9.4-8-15.2-14.3-5.8-6.2-11.6-13.1-17.2-20.5-5.7-7.4-10.6-16.1-14.7-25.9-4.1-9.8-6.2-19.3-6.2-28.5V258.7c0-10.1-1.9-21-5.7-32.8-3.9-11.7-10.7-24.5-20.7-38.3-10-13.8-22.4-26.2-37.2-37-14.9-10.8-34.7-20-59.6-27.4-24.8-7.4-52.6-11.1-83.2-11.1-31.3 0-60.4 3.7-87.6 10.9-27.1 7.3-50.3 17-69.7 29.2-19.3 12.2-35.9 26.3-49.7 42.4-13.8 16.1-24.1 32.9-30.8 50.4-6.7 17.5-10.1 35.2-10.1 53.1L408 310c5.5-16.4 12.9-30.6 22-42.8 9.2-12.2 17.9-21 25.8-26.5 8-5.5 16.6-9.9 25.7-13.2 9.2-3.3 15.4-5 18.6-5.4 3.2-.3 5.7-.4 7.6-.4 26.7 0 45.2 7.9 55.6 23.6 6.5 9.5 9.7 23.9 9.7 43.3v56.6c-15.2.6-30.4 1.6-45.6 2.9zM573.1 500c0 16.6-2.2 31.7-6.5 45-9.2 29.1-26.7 47.4-52.4 54.8-22.4 6.6-43.7 3.3-63.9-9.8-21.5-14-32.2-33.8-32.2-59.3 0-19.9 5-36.9 15-51.1 10-14.1 23.3-24.7 40-31.7s33-12 49-14.9c15.9-3 33-4.8 51-5.4V500zm335.2 218.9c-4.3-5.4-15.9-8.9-34.9-10.7-19-1.8-35.5-1.7-49.7.4-15.3 1.8-31.1 6.2-47.3 13.4-16.3 7.1-23.4 13.1-21.6 17.8l.7 1.3.9.7 1.4.2h4.6c.8 0 1.8-.1 3.2-.2 1.4-.1 2.7-.3 3.9-.4 1.2-.1 2.9-.3 5.1-.4 2.1-.1 4.1-.4 6-.7.3 0 3.7-.3 10.3-.9 6.6-.6 11.4-1 14.3-1.3 2.9-.3 7.8-.6 14.5-.9 6.7-.3 12.1-.3 16.1 0 4 .3 8.5.7 13.6 1.1 5.1.4 9.2 1.3 12.4 2.7 3.2 1.3 5.6 3 7.1 5.1 5.2 6.6 4.2 21.2-3 43.9s-14 40.8-20.4 54.2c-2.8 5.7-2.8 9.2 0 10.7s6.7.1 11.9-4c15.6-12.2 28.6-30.6 39.1-55.3 6.1-14.6 10.5-29.8 13.1-45.7 2.4-15.9 2-26.2-1.3-31z"}}]},name:"amazon",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},70792:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M448.3 225.2c-18.6 0-32 13.4-32 31.9s13.5 31.9 32 31.9c18.6 0 32-13.4 32-31.9.1-18.4-13.4-31.9-32-31.9zm393.9 96.4c-13.8-13.8-32.7-21.5-53.2-21.5-3.9 0-7.4.4-10.7 1v-1h-3.6c-5.5-30.6-18.6-60.5-38.1-87.4-18.7-25.7-43-47.9-70.8-64.9l25.1-35.8v-3.3c0-.8.4-2.3.7-3.8.6-2.4 1.4-5.5 1.4-8.9 0-18.5-13.5-31.9-32-31.9-9.8 0-19.5 5.7-25.9 15.4l-29.3 42.1c-30-9.8-62.4-15-93.8-15-31.3 0-63.7 5.2-93.8 15L389 79.4c-6.6-9.6-16.1-15.4-26-15.4-18.6 0-32 13.4-32 31.9 0 6.2 2.5 12.8 6.7 17.4l22.6 32.3c-28.7 17-53.5 39.4-72.2 65.1-19.4 26.9-32 56.8-36.7 87.4h-5.5v1c-3.2-.6-6.7-1-10.7-1-20.3 0-39.2 7.5-53.1 21.3-13.8 13.8-21.5 32.6-21.5 53v235c0 20.3 7.5 39.1 21.4 52.9 13.8 13.8 32.8 21.5 53.2 21.5 3.9 0 7.4-.4 10.7-1v93.5c0 29.2 23.9 53.1 53.2 53.1H331v58.3c0 20.3 7.5 39.1 21.4 52.9 13.8 13.8 32.8 21.5 53.2 21.5 20.3 0 39.2-7.5 53.1-21.3 13.8-13.8 21.5-32.6 21.5-53v-58.2H544v58.1c0 20.3 7.5 39.1 21.4 52.9 13.8 13.8 32.8 21.5 53.2 21.5 20.4 0 39.2-7.5 53.1-21.6 13.8-13.8 21.5-32.6 21.5-53v-58.2h31.9c29.3 0 53.2-23.8 53.2-53.1v-91.4c3.2.6 6.7 1 10.7 1 20.3 0 39.2-7.5 53.1-21.3 13.8-13.8 21.5-32.6 21.5-53v-235c-.1-20.3-7.6-39-21.4-52.9zM246 609.6c0 6.8-3.9 10.6-10.7 10.6-6.8 0-10.7-3.8-10.7-10.6V374.5c0-6.8 3.9-10.6 10.7-10.6 6.8 0 10.7 3.8 10.7 10.6v235.1zm131.1-396.8c37.5-27.3 85.3-42.3 135-42.3s97.5 15.1 135 42.5c32.4 23.7 54.2 54.2 62.7 87.5H314.4c8.5-33.4 30.5-64 62.7-87.7zm39.3 674.7c-.6 5.6-4.4 8.7-10.5 8.7-6.8 0-10.7-3.8-10.7-10.6v-58.2h21.2v60.1zm202.3 8.7c-6.8 0-10.7-3.8-10.7-10.6v-58.2h21.2v60.1c-.6 5.6-4.3 8.7-10.5 8.7zm95.8-132.6H309.9V364h404.6v399.6zm85.2-154c0 6.8-3.9 10.6-10.7 10.6-6.8 0-10.7-3.8-10.7-10.6V374.5c0-6.8 3.9-10.6 10.7-10.6 6.8 0 10.7 3.8 10.7 10.6v235.1zM576.1 225.2c-18.6 0-32 13.4-32 31.9s13.5 31.9 32 31.9c18.6 0 32.1-13.4 32.1-32-.1-18.6-13.4-31.8-32.1-31.8z"}}]},name:"android",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},77584:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M378.9 738c-3.1 0-6.1-.5-8.8-1.5l4.4 30.7h26.3l-15.5-29.9c-2.1.5-4.2.7-6.4.7zm421-291.2c-12.6 0-24.8 1.5-36.5 4.2-21.4-38.4-62.3-64.3-109.3-64.3-6.9 0-13.6.6-20.2 1.6-35.4-77.4-113.4-131.1-203.9-131.1-112.3 0-205.3 82.6-221.6 190.4C127.3 455.5 64 523.8 64 607c0 88.4 71.6 160.1 160 160.2h50l13.2-27.6c-26.2-8.3-43.3-29-39.1-48.8 4.6-21.6 32.8-33.9 63.1-27.5 22.9 4.9 40.4 19.1 45.5 35.1a26.1 26.1 0 0122.1-12.4h.2c-.8-3.2-1.2-6.5-1.2-9.9 0-20.1 14.8-36.7 34.1-39.6v-25.4c0-4.4 3.6-8 8-8s8 3.6 8 8v26.3c4.6 1.2 8.8 3.2 12.6 5.8l19.5-21.4c3-3.3 8-3.5 11.3-.5 3.3 3 3.5 8 .5 11.3l-20 22-.2.2a40 40 0 01-46.9 59.2c-.4 5.6-2.6 10.7-6 14.8l20 38.4H804v-.1c86.5-2.2 156-73 156-160.1 0-88.5-71.7-160.2-160.1-160.2zM338.2 737.2l-4.3 30h24.4l-5.9-41.5c-3.5 4.6-8.3 8.5-14.2 11.5zM797.5 305a48 48 0 1096 0 48 48 0 10-96 0zm-65.7 61.3a24 24 0 1048 0 24 24 0 10-48 0zM303.4 742.9l-11.6 24.3h26l3.5-24.7c-5.7.8-11.7 1-17.9.4z"}}]},name:"ant-cloud",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},4716:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M716.3 313.8c19-18.9 19-49.7 0-68.6l-69.9-69.9.1.1c-18.5-18.5-50.3-50.3-95.3-95.2-21.2-20.7-55.5-20.5-76.5.5L80.9 474.2a53.84 53.84 0 000 76.4L474.6 944a54.14 54.14 0 0076.5 0l165.1-165c19-18.9 19-49.7 0-68.6a48.7 48.7 0 00-68.7 0l-125 125.2c-5.2 5.2-13.3 5.2-18.5 0L189.5 521.4c-5.2-5.2-5.2-13.3 0-18.5l314.4-314.2c.4-.4.9-.7 1.3-1.1 5.2-4.1 12.4-3.7 17.2 1.1l125.2 125.1c19 19 49.8 19 68.7 0zM408.6 514.4a106.3 106.2 0 10212.6 0 106.3 106.2 0 10-212.6 0zm536.2-38.6L821.9 353.5c-19-18.9-49.8-18.9-68.7.1a48.4 48.4 0 000 68.6l83 82.9c5.2 5.2 5.2 13.3 0 18.5l-81.8 81.7a48.4 48.4 0 000 68.6 48.7 48.7 0 0068.7 0l121.8-121.7a53.93 53.93 0 00-.1-76.4z"}}]},name:"ant-design",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},31942:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908 640H804V488c0-4.4-3.6-8-8-8H548v-96h108c8.8 0 16-7.2 16-16V80c0-8.8-7.2-16-16-16H368c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h108v96H228c-4.4 0-8 3.6-8 8v152H116c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16H292v-88h440v88H620c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16zm-564 76v168H176V716h168zm84-408V140h168v168H428zm420 576H680V716h168v168z"}}]},name:"apartment",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},13740:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M917.7 148.8l-42.4-42.4c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-76.1 76.1a199.27 199.27 0 00-112.1-34.3c-51.2 0-102.4 19.5-141.5 58.6L432.3 308.7a8.03 8.03 0 000 11.3L704 591.7c1.6 1.6 3.6 2.3 5.7 2.3 2 0 4.1-.8 5.7-2.3l101.9-101.9c68.9-69 77-175.7 24.3-253.5l76.1-76.1c3.1-3.2 3.1-8.3 0-11.4zM769.1 441.7l-59.4 59.4-186.8-186.8 59.4-59.4c24.9-24.9 58.1-38.7 93.4-38.7 35.3 0 68.4 13.7 93.4 38.7 24.9 24.9 38.7 58.1 38.7 93.4 0 35.3-13.8 68.4-38.7 93.4zm-190.2 105a8.03 8.03 0 00-11.3 0L501 613.3 410.7 523l66.7-66.7c3.1-3.1 3.1-8.2 0-11.3L441 408.6a8.03 8.03 0 00-11.3 0L363 475.3l-43-43a7.85 7.85 0 00-5.7-2.3c-2 0-4.1.8-5.7 2.3L206.8 534.2c-68.9 69-77 175.7-24.3 253.5l-76.1 76.1a8.03 8.03 0 000 11.3l42.4 42.4c1.6 1.6 3.6 2.3 5.7 2.3s4.1-.8 5.7-2.3l76.1-76.1c33.7 22.9 72.9 34.3 112.1 34.3 51.2 0 102.4-19.5 141.5-58.6l101.9-101.9c3.1-3.1 3.1-8.2 0-11.3l-43-43 66.7-66.7c3.1-3.1 3.1-8.2 0-11.3l-36.6-36.2zM441.7 769.1a131.32 131.32 0 01-93.4 38.7c-35.3 0-68.4-13.7-93.4-38.7a131.32 131.32 0 01-38.7-93.4c0-35.3 13.7-68.4 38.7-93.4l59.4-59.4 186.8 186.8-59.4 59.4z"}}]},name:"api",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},69877:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M747.4 535.7c-.4-68.2 30.5-119.6 92.9-157.5-34.9-50-87.7-77.5-157.3-82.8-65.9-5.2-138 38.4-164.4 38.4-27.9 0-91.7-36.6-141.9-36.6C273.1 298.8 163 379.8 163 544.6c0 48.7 8.9 99 26.7 150.8 23.8 68.2 109.6 235.3 199.1 232.6 46.8-1.1 79.9-33.2 140.8-33.2 59.1 0 89.7 33.2 141.9 33.2 90.3-1.3 167.9-153.2 190.5-221.6-121.1-57.1-114.6-167.2-114.6-170.7zm-10.6 267c-14.3 19.9-28.7 35.6-41.9 45.7-10.5 8-18.6 11.4-24 11.6-9-.1-17.7-2.3-34.7-8.8-1.2-.5-2.5-1-4.2-1.6l-4.4-1.7c-17.4-6.7-27.8-10.3-41.1-13.8-18.6-4.8-37.1-7.4-56.9-7.4-20.2 0-39.2 2.5-58.1 7.2-13.9 3.5-25.6 7.4-42.7 13.8-.7.3-8.1 3.1-10.2 3.9-3.5 1.3-6.2 2.3-8.7 3.2-10.4 3.6-17 5.1-22.9 5.2-.7 0-1.3-.1-1.8-.2-1.1-.2-2.5-.6-4.1-1.3-4.5-1.8-9.9-5.1-16-9.8-14-10.9-29.4-28-45.1-49.9-27.5-38.6-53.5-89.8-66-125.7-15.4-44.8-23-87.7-23-128.6 0-60.2 17.8-106 48.4-137.1 26.3-26.6 61.7-41.5 97.8-42.3 5.9.1 14.5 1.5 25.4 4.5 8.6 2.3 18 5.4 30.7 9.9 3.8 1.4 16.9 6.1 18.5 6.7 7.7 2.8 13.5 4.8 19.2 6.6 18.2 5.8 32.3 9 47.6 9 15.5 0 28.8-3.3 47.7-9.8 7.1-2.4 32.9-12 37.5-13.6 25.6-9.1 44.5-14 60.8-15.2 4.8-.4 9.1-.4 13.2-.1 22.7 1.8 42.1 6.3 58.6 13.8-37.6 43.4-57 96.5-56.9 158.4-.3 14.7.9 31.7 5.1 51.8 6.4 30.5 18.6 60.7 37.9 89 14.7 21.5 32.9 40.9 54.7 57.8-11.5 23.7-25.6 48.2-40.4 68.8zm-94.5-572c50.7-60.2 46.1-115 44.6-134.7-44.8 2.6-96.6 30.5-126.1 64.8-32.5 36.8-51.6 82.3-47.5 133.6 48.4 3.7 92.6-21.2 129-63.7z"}}]},name:"apple",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},41723:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zm52 132H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200zM424 712H296V584c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v128H104c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h128v128c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V776h128c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"appstore-add",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},1372:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zM464 544H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H212V612h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200z"}}]},name:"appstore",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},95718:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M682 455V311l-76 76v68c-.1 50.7-42 92.1-94 92a95.8 95.8 0 01-52-15l-54 55c29.1 22.4 65.9 36 106 36 93.8 0 170-75.1 170-168z"}},{tag:"path",attrs:{d:"M833 446h-60c-4.4 0-8 3.6-8 8 0 140.3-113.7 254-254 254-63 0-120.7-23-165-61l-54 54a334.01 334.01 0 00179 81v102H326c-13.9 0-24.9 14.3-25 32v36c.1 4.4 2.9 8 6 8h408c3.2 0 6-3.6 6-8v-36c0-17.7-11-32-25-32H547V782c165.3-17.9 294-157.9 294-328 0-4.4-3.6-8-8-8zm13.1-377.7l-43.5-41.9a8 8 0 00-11.2.1l-129 129C634.3 101.2 577 64 511 64c-93.9 0-170 75.3-170 168v224c0 6.7.4 13.3 1.2 19.8l-68 68A252.33 252.33 0 01258 454c-.2-4.4-3.8-8-8-8h-60c-4.4 0-8 3.6-8 8 0 53 12.5 103 34.6 147.4l-137 137a8.03 8.03 0 000 11.3l42.7 42.7c3.1 3.1 8.2 3.1 11.3 0L846.2 79.8l.1-.1c3.1-3.2 3-8.3-.2-11.4zM417 401V232c0-50.6 41.9-92 94-92 46 0 84.1 32.3 92.3 74.7L417 401z"}}]},name:"audio-muted",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},43348:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M842 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 140.3-113.7 254-254 254S258 594.3 258 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 168.7 126.6 307.9 290 327.6V884H326.7c-13.7 0-24.7 14.3-24.7 32v36c0 4.4 2.8 8 6.2 8h407.6c3.4 0 6.2-3.6 6.2-8v-36c0-17.7-11-32-24.7-32H548V782.1c165.3-18 294-158 294-328.1zM512 624c93.9 0 170-75.2 170-168V232c0-92.8-76.1-168-170-168s-170 75.2-170 168v224c0 92.8 76.1 168 170 168zm-94-392c0-50.6 41.9-92 94-92s94 41.4 94 92v224c0 50.6-41.9 92-94 92s-94-41.4-94-92V232z"}}]},name:"audio",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},43450:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M296 250c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm184 144H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm-48 458H208V148h560v320c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm440-88H728v-36.6c46.3-13.8 80-56.6 80-107.4 0-61.9-50.1-112-112-112s-112 50.1-112 112c0 50.7 33.7 93.6 80 107.4V764H520c-8.8 0-16 7.2-16 16v152c0 8.8 7.2 16 16 16h352c8.8 0 16-7.2 16-16V780c0-8.8-7.2-16-16-16zM646 620c0-27.6 22.4-50 50-50s50 22.4 50 50-22.4 50-50 50-50-22.4-50-50zm180 266H566v-60h260v60z"}}]},name:"audit",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},84145:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M894 462c30.9 0 43.8-39.7 18.7-58L530.8 126.2a31.81 31.81 0 00-37.6 0L111.3 404c-25.1 18.2-12.2 58 18.8 58H192v374h-72c-4.4 0-8 3.6-8 8v52c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-52c0-4.4-3.6-8-8-8h-72V462h62zM512 196.7l271.1 197.2H240.9L512 196.7zM264 462h117v374H264V462zm189 0h117v374H453V462zm307 374H642V462h118v374z"}}]},name:"bank",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},76371:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M120 160H72c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8zm833 0h-48c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8zM200 736h112c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8H200c-4.4 0-8 3.6-8 8v560c0 4.4 3.6 8 8 8zm321 0h48c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v560c0 4.4 3.6 8 8 8zm126 0h178c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8H647c-4.4 0-8 3.6-8 8v560c0 4.4 3.6 8 8 8zm-255 0h48c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v560c0 4.4 3.6 8 8 8zm-79 64H201c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h112c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm257 0h-48c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm256 0H648c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h178c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm-385 0h-48c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"barcode",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},3674:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"bars",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},73142:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M634 294.3h199.5v48.4H634zM434.1 485.8c44.1-21.1 67.2-53.2 67.2-102.8 0-98.1-73-121.9-157.3-121.9H112v492.4h238.5c89.4 0 173.3-43 173.3-143 0-61.8-29.2-107.5-89.7-124.7zM220.2 345.1h101.5c39.1 0 74.2 10.9 74.2 56.3 0 41.8-27.3 58.6-66 58.6H220.2V345.1zm115.5 324.8H220.1V534.3H338c47.6 0 77.7 19.9 77.7 70.3 0 49.6-35.9 65.3-80 65.3zm575.8-89.5c0-105.5-61.7-193.4-173.3-193.4-108.5 0-182.3 81.7-182.3 188.8 0 111 69.9 187.2 182.3 187.2 85.1 0 140.2-38.3 166.7-120h-86.3c-9.4 30.5-47.6 46.5-77.3 46.5-57.4 0-87.4-33.6-87.4-90.7h256.9c.3-5.9.7-12.1.7-18.4zM653.9 537c3.1-46.9 34.4-76.2 81.2-76.2 49.2 0 73.8 28.9 78.1 76.2H653.9z"}}]},name:"behance",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},86706:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zM598.5 350.9h138.4v33.7H598.5v-33.7zM512 628.8a89.52 89.52 0 01-27 31c-11.8 8.2-24.9 14.2-38.8 17.7a167.4 167.4 0 01-44.6 5.7H236V342.1h161c16.3 0 31.1 1.5 44.6 4.3 13.4 2.8 24.8 7.6 34.4 14.1 9.5 6.5 17 15.2 22.3 26 5.2 10.7 7.9 24.1 7.9 40 0 17.2-3.9 31.4-11.7 42.9-7.9 11.5-19.3 20.8-34.8 28.1 21.1 6 36.6 16.7 46.8 31.7 10.4 15.2 15.5 33.4 15.5 54.8 0 17.4-3.3 32.3-10 44.8zM790.8 576H612.4c0 19.4 6.7 38 16.8 48 10.2 9.9 24.8 14.9 43.9 14.9 13.8 0 25.5-3.5 35.5-10.4 9.9-6.9 15.9-14.2 18.1-21.8h59.8c-9.6 29.7-24.2 50.9-44 63.7-19.6 12.8-43.6 19.2-71.5 19.2-19.5 0-37-3.2-52.7-9.3-15.1-5.9-28.7-14.9-39.9-26.5a121.2 121.2 0 01-25.1-41.2c-6.1-16.9-9.1-34.7-8.9-52.6 0-18.5 3.1-35.7 9.1-51.7 11.5-31.1 35.4-56 65.9-68.9 16.3-6.8 33.8-10.2 51.5-10 21 0 39.2 4 55 12.2a111.6 111.6 0 0138.6 32.8c10.1 13.7 17.2 29.3 21.7 46.9 4.3 17.3 5.8 35.5 4.6 54.7zm-122-95.6c-10.8 0-19.9 1.9-26.9 5.6-7 3.7-12.8 8.3-17.2 13.6a48.4 48.4 0 00-9.1 17.4c-1.6 5.3-2.7 10.7-3.1 16.2H723c-1.6-17.3-7.6-30.1-15.6-39.1-8.4-8.9-21.9-13.7-38.6-13.7zm-248.5-10.1c8.7-6.3 12.9-16.7 12.9-31 .3-6.8-1.1-13.5-4.1-19.6-2.7-4.9-6.7-9-11.6-11.9a44.8 44.8 0 00-16.6-6c-6.4-1.2-12.9-1.8-19.3-1.7h-70.3v79.7h76.1c13.1.1 24.2-3.1 32.9-9.5zm11.8 72c-9.8-7.5-22.9-11.2-39.2-11.2h-81.8v94h80.2c7.5 0 14.4-.7 21.1-2.1s12.7-3.8 17.8-7.2c5.1-3.3 9.2-7.8 12.3-13.6 3-5.8 4.5-13.2 4.5-22.1 0-17.7-5-30.2-14.9-37.8z"}}]},name:"behance-square",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},40562:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M816 768h-24V428c0-141.1-104.3-257.7-240-277.1V112c0-22.1-17.9-40-40-40s-40 17.9-40 40v38.9c-135.7 19.4-240 136-240 277.1v340h-24c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h216c0 61.8 50.2 112 112 112s112-50.2 112-112h216c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM512 888c-26.5 0-48-21.5-48-48h96c0 26.5-21.5 48-48 48zM304 768V428c0-55.6 21.6-107.8 60.9-147.1S456.4 220 512 220c55.6 0 107.8 21.6 147.1 60.9S720 372.4 720 428v340H304z"}}]},name:"bell",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},51711:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M856 376H648V168c0-8.8-7.2-16-16-16H168c-8.8 0-16 7.2-16 16v464c0 8.8 7.2 16 16 16h208v208c0 8.8 7.2 16 16 16h464c8.8 0 16-7.2 16-16V392c0-8.8-7.2-16-16-16zm-480 16v188H220V220h360v156H392c-8.8 0-16 7.2-16 16zm204 52v136H444V444h136zm224 360H444V648h188c8.8 0 16-7.2 16-16V444h156v360z"}}]},name:"block",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},83762:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-260 72h96v209.9L621.5 312 572 347.4V136zm220 752H232V136h280v296.9c0 3.3 1 6.6 3 9.3a15.9 15.9 0 0022.3 3.7l83.8-59.9 81.4 59.4c2.7 2 6 3.1 9.4 3.1 8.8 0 16-7.2 16-16V136h64v752z"}}]},name:"book",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},97189:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M740 161c-61.8 0-112 50.2-112 112 0 50.1 33.1 92.6 78.5 106.9v95.9L320 602.4V318.1c44.2-15 76-56.9 76-106.1 0-61.8-50.2-112-112-112s-112 50.2-112 112c0 49.2 31.8 91 76 106.1V706c-44.2 15-76 56.9-76 106.1 0 61.8 50.2 112 112 112s112-50.2 112-112c0-49.2-31.8-91-76-106.1v-27.8l423.5-138.7a50.52 50.52 0 0034.9-48.2V378.2c42.9-15.8 73.6-57 73.6-105.2 0-61.8-50.2-112-112-112zm-504 51a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm96 600a48.01 48.01 0 01-96 0 48.01 48.01 0 0196 0zm408-491a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"branches",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},66893:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M304 280h56c4.4 0 8-3.6 8-8 0-28.3 5.9-53.2 17.1-73.5 10.6-19.4 26-34.8 45.4-45.4C450.9 142 475.7 136 504 136h16c28.3 0 53.2 5.9 73.5 17.1 19.4 10.6 34.8 26 45.4 45.4C650 218.9 656 243.7 656 272c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8 0-40-8.8-76.7-25.9-108.1a184.31 184.31 0 00-74-74C596.7 72.8 560 64 520 64h-16c-40 0-76.7 8.8-108.1 25.9a184.31 184.31 0 00-74 74C304.8 195.3 296 232 296 272c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M940 512H792V412c76.8 0 139-62.2 139-139 0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8a63 63 0 01-63 63H232a63 63 0 01-63-63c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 76.8 62.2 139 139 139v100H84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h148v96c0 6.5.2 13 .7 19.3C164.1 728.6 116 796.7 116 876c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8 0-44.2 23.9-82.9 59.6-103.7a273 273 0 0022.7 49c24.3 41.5 59 76.2 100.5 100.5S460.5 960 512 960s99.8-13.9 141.3-38.2a281.38 281.38 0 00123.2-149.5A120 120 0 01836 876c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8 0-79.3-48.1-147.4-116.7-176.7.4-6.4.7-12.8.7-19.3v-96h148c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM716 680c0 36.8-9.7 72-27.8 102.9-17.7 30.3-43 55.6-73.3 73.3C584 874.3 548.8 884 512 884s-72-9.7-102.9-27.8c-30.3-17.7-55.6-43-73.3-73.3A202.75 202.75 0 01308 680V412h408v268z"}}]},name:"bug",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},142:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M916 210H376c-17.7 0-32 14.3-32 32v236H108c-17.7 0-32 14.3-32 32v272c0 17.7 14.3 32 32 32h540c17.7 0 32-14.3 32-32V546h236c17.7 0 32-14.3 32-32V242c0-17.7-14.3-32-32-32zm-504 68h200v200H412V278zm-68 468H144V546h200v200zm268 0H412V546h200v200zm268-268H680V278h200v200z"}}]},name:"build",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},58937:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M632 888H392c-4.4 0-8 3.6-8 8v32c0 17.7 14.3 32 32 32h192c17.7 0 32-14.3 32-32v-32c0-4.4-3.6-8-8-8zM512 64c-181.1 0-328 146.9-328 328 0 121.4 66 227.4 164 284.1V792c0 17.7 14.3 32 32 32h264c17.7 0 32-14.3 32-32V676.1c98-56.7 164-162.7 164-284.1 0-181.1-146.9-328-328-328zm127.9 549.8L604 634.6V752H420V634.6l-35.9-20.8C305.4 568.3 256 484.5 256 392c0-141.4 114.6-256 256-256s256 114.6 256 256c0 92.5-49.4 176.3-128.1 221.8z"}}]},name:"bulb",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},56679:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M251.2 387H320v68.8c0 1.8 1.8 3.2 4 3.2h48c2.2 0 4-1.4 4-3.3V387h68.8c1.8 0 3.2-1.8 3.2-4v-48c0-2.2-1.4-4-3.3-4H376v-68.8c0-1.8-1.8-3.2-4-3.2h-48c-2.2 0-4 1.4-4 3.2V331h-68.8c-1.8 0-3.2 1.8-3.2 4v48c0 2.2 1.4 4 3.2 4zm328 0h193.6c1.8 0 3.2-1.8 3.2-4v-48c0-2.2-1.4-4-3.3-4H579.2c-1.8 0-3.2 1.8-3.2 4v48c0 2.2 1.4 4 3.2 4zm0 265h193.6c1.8 0 3.2-1.8 3.2-4v-48c0-2.2-1.4-4-3.3-4H579.2c-1.8 0-3.2 1.8-3.2 4v48c0 2.2 1.4 4 3.2 4zm0 104h193.6c1.8 0 3.2-1.8 3.2-4v-48c0-2.2-1.4-4-3.3-4H579.2c-1.8 0-3.2 1.8-3.2 4v48c0 2.2 1.4 4 3.2 4zm-195.7-81l61.2-74.9c4.3-5.2.7-13.1-5.9-13.1H388c-2.3 0-4.5 1-5.9 2.9l-34 41.6-34-41.6a7.85 7.85 0 00-5.9-2.9h-50.9c-6.6 0-10.2 7.9-5.9 13.1l61.2 74.9-62.7 76.8c-4.4 5.2-.8 13.1 5.8 13.1h50.8c2.3 0 4.5-1 5.9-2.9l35.5-43.5 35.5 43.5c1.5 1.8 3.7 2.9 5.9 2.9h50.8c6.6 0 10.2-7.9 5.9-13.1L383.5 675zM880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-36 732H180V180h664v664z"}}]},name:"calculator",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},26362:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V460h656v380zM184 392V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v136H184z"}}]},name:"calendar",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},24089:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 248H728l-32.4-90.8a32.07 32.07 0 00-30.2-21.2H358.6c-13.5 0-25.6 8.5-30.1 21.2L296 248H160c-44.2 0-80 35.8-80 80v456c0 44.2 35.8 80 80 80h704c44.2 0 80-35.8 80-80V328c0-44.2-35.8-80-80-80zm8 536c0 4.4-3.6 8-8 8H160c-4.4 0-8-3.6-8-8V328c0-4.4 3.6-8 8-8h186.7l17.1-47.8 22.9-64.2h250.5l22.9 64.2 17.1 47.8H864c4.4 0 8 3.6 8 8v456zM512 384c-88.4 0-160 71.6-160 160s71.6 160 160 160 160-71.6 160-160-71.6-160-160-160zm0 256c-53 0-96-43-96-96s43-96 96-96 96 43 96 96-43 96-96 96z"}}]},name:"camera",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},3105:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M380 704h264c4.4 0 8-3.6 8-8v-84c0-4.4-3.6-8-8-8h-40c-4.4 0-8 3.6-8 8v36H428v-36c0-4.4-3.6-8-8-8h-40c-4.4 0-8 3.6-8 8v84c0 4.4 3.6 8 8 8zm340-123a40 40 0 1080 0 40 40 0 10-80 0zm239-167.6L935.3 372a8 8 0 00-10.9-2.9l-50.7 29.6-78.3-216.2a63.9 63.9 0 00-60.9-44.4H301.2c-34.7 0-65.5 22.4-76.2 55.5l-74.6 205.2-50.8-29.6a8 8 0 00-10.9 2.9L65 413.4c-2.2 3.8-.9 8.6 2.9 10.8l60.4 35.2-14.5 40c-1.2 3.2-1.8 6.6-1.8 10v348.2c0 15.7 11.8 28.4 26.3 28.4h67.6c12.3 0 23-9.3 25.6-22.3l7.7-37.7h545.6l7.7 37.7c2.7 13 13.3 22.3 25.6 22.3h67.6c14.5 0 26.3-12.7 26.3-28.4V509.4c0-3.4-.6-6.8-1.8-10l-14.5-40 60.3-35.2a8 8 0 003-10.8zM840 517v237H184V517l15.6-43h624.8l15.6 43zM292.7 218.1l.5-1.3.4-1.3c1.1-3.3 4.1-5.5 7.6-5.5h427.6l75.4 208H220l72.7-199.9zM224 581a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"car",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},24423:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v584zM688 420h-55.2c-5.1 0-10 2.5-13 6.6L468.9 634.4l-64.7-89c-3-4.1-7.8-6.6-13-6.6H336c-6.5 0-10.3 7.4-6.5 12.7l126.4 174a16.1 16.1 0 0026 0l212.6-292.7c3.8-5.4 0-12.8-6.5-12.8z"}}]},name:"carry-out",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},38811:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},26067:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},3766:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 512.3v-.3c0-229.8-186.2-416-416-416S96 282.2 96 512v.4c0 229.8 186.2 416 416 416s416-186.2 416-416v-.3.2zm-6.7-74.6l.6 3.3-.6-3.3zM676.7 638.2c53.5-82.2 52.5-189.4-11.1-263.7l162.4-8.4c20.5 44.4 32 93.8 32 145.9 0 185.2-144.6 336.6-327.1 347.4l143.8-221.2zM512 652.3c-77.5 0-140.2-62.7-140.2-140.2 0-77.7 62.7-140.2 140.2-140.2S652.2 434.5 652.2 512 589.5 652.3 512 652.3zm369.2-331.7l-3-5.7 3 5.7zM512 164c121.3 0 228.2 62.1 290.4 156.2l-263.6-13.9c-97.5-5.7-190.2 49.2-222.3 141.1L227.8 311c63.1-88.9 166.9-147 284.2-147zM102.5 585.8c26 145 127.1 264 261.6 315.1C229.6 850 128.5 731 102.5 585.8zM164 512c0-55.9 13.2-108.7 36.6-155.5l119.7 235.4c44.1 86.7 137.4 139.7 234 121.6l-74 145.1C302.9 842.5 164 693.5 164 512zm324.7 415.4c4 .2 8 .4 12 .5-4-.2-8-.3-12-.5z"}}]},name:"chrome",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},67345:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},36029:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},99552:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},47852:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},82510:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-download",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},138:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M811.4 368.9C765.6 248 648.9 162 512.2 162S258.8 247.9 213 368.8C126.9 391.5 63.5 470.2 64 563.6 64.6 668 145.6 752.9 247.6 762c4.7.4 8.7-3.3 8.7-8v-60.4c0-4-3-7.4-7-7.9-27-3.4-52.5-15.2-72.1-34.5-24-23.5-37.2-55.1-37.2-88.6 0-28 9.1-54.4 26.2-76.4 16.7-21.4 40.2-36.9 66.1-43.7l37.9-10 13.9-36.7c8.6-22.8 20.6-44.2 35.7-63.5 14.9-19.2 32.6-36 52.4-50 41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.3c19.9 14 37.5 30.8 52.4 50 15.1 19.3 27.1 40.7 35.7 63.5l13.8 36.6 37.8 10c54.2 14.4 92.1 63.7 92.1 120 0 33.6-13.2 65.1-37.2 88.6-19.5 19.2-44.9 31.1-71.9 34.5-4 .5-6.9 3.9-6.9 7.9V754c0 4.7 4.1 8.4 8.8 8 101.7-9.2 182.5-94 183.2-198.2.6-93.4-62.7-172.1-148.6-194.9z"}},{tag:"path",attrs:{d:"M376.9 656.4c1.8-33.5 15.7-64.7 39.5-88.6 25.4-25.5 60-39.8 96-39.8 36.2 0 70.3 14.1 96 39.8 1.4 1.4 2.7 2.8 4.1 4.3l-25 19.6a8 8 0 003 14.1l98.2 24c5 1.2 9.9-2.6 9.9-7.7l.5-101.3c0-6.7-7.6-10.5-12.9-6.3L663 532.7c-36.6-42-90.4-68.6-150.5-68.6-107.4 0-195 85.1-199.4 191.7-.2 4.5 3.4 8.3 8 8.3H369c4.2-.1 7.7-3.4 7.9-7.7zM703 664h-47.9c-4.2 0-7.7 3.3-8 7.6-1.8 33.5-15.7 64.7-39.5 88.6-25.4 25.5-60 39.8-96 39.8-36.2 0-70.3-14.1-96-39.8-1.4-1.4-2.7-2.8-4.1-4.3l25-19.6a8 8 0 00-3-14.1l-98.2-24c-5-1.2-9.9 2.6-9.9 7.7l-.4 101.4c0 6.7 7.6 10.5 12.9 6.3l23.2-18.2c36.6 42 90.4 68.6 150.5 68.6 107.4 0 195-85.1 199.4-191.7.2-4.5-3.4-8.3-8-8.3z"}}]},name:"cloud-sync",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},92446:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M518.3 459a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V856c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V613.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 459z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-upload",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},72226:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M709.6 210l.4-.2h.2L512 96 313.9 209.8h-.2l.7.3L151.5 304v416L512 928l360.5-208V304l-162.9-94zM482.7 843.6L339.6 761V621.4L210 547.8V372.9l272.7 157.3v313.4zM238.2 321.5l134.7-77.8 138.9 79.7 139.1-79.9 135.2 78-273.9 158-274-158zM814 548.3l-128.8 73.1v139.1l-143.9 83V530.4L814 373.1v175.2z"}}]},name:"code-sandbox",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},94131:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M488.1 414.7V303.4L300.9 428l83.6 55.8zm254.1 137.7v-79.8l-59.8 39.9zM512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm278 533c0 1.1-.1 2.1-.2 3.1 0 .4-.1.7-.2 1a14.16 14.16 0 01-.8 3.2c-.2.6-.4 1.2-.6 1.7-.2.4-.4.8-.5 1.2-.3.5-.5 1.1-.8 1.6-.2.4-.4.7-.7 1.1-.3.5-.7 1-1 1.5-.3.4-.5.7-.8 1-.4.4-.8.9-1.2 1.3-.3.3-.6.6-1 .9-.4.4-.9.8-1.4 1.1-.4.3-.7.6-1.1.8-.1.1-.3.2-.4.3L525.2 786c-4 2.7-8.6 4-13.2 4-4.7 0-9.3-1.4-13.3-4L244.6 616.9c-.1-.1-.3-.2-.4-.3l-1.1-.8c-.5-.4-.9-.7-1.3-1.1-.3-.3-.6-.6-1-.9-.4-.4-.8-.8-1.2-1.3a7 7 0 01-.8-1c-.4-.5-.7-1-1-1.5-.2-.4-.5-.7-.7-1.1-.3-.5-.6-1.1-.8-1.6-.2-.4-.4-.8-.5-1.2-.2-.6-.4-1.2-.6-1.7-.1-.4-.3-.8-.4-1.2-.2-.7-.3-1.3-.4-2-.1-.3-.1-.7-.2-1-.1-1-.2-2.1-.2-3.1V427.9c0-1 .1-2.1.2-3.1.1-.3.1-.7.2-1a14.16 14.16 0 01.8-3.2c.2-.6.4-1.2.6-1.7.2-.4.4-.8.5-1.2.2-.5.5-1.1.8-1.6.2-.4.4-.7.7-1.1.6-.9 1.2-1.7 1.8-2.5.4-.4.8-.9 1.2-1.3.3-.3.6-.6 1-.9.4-.4.9-.8 1.3-1.1.4-.3.7-.6 1.1-.8.1-.1.3-.2.4-.3L498.7 239c8-5.3 18.5-5.3 26.5 0l254.1 169.1c.1.1.3.2.4.3l1.1.8 1.4 1.1c.3.3.6.6 1 .9.4.4.8.8 1.2 1.3.7.8 1.3 1.6 1.8 2.5.2.4.5.7.7 1.1.3.5.6 1 .8 1.6.2.4.4.8.5 1.2.2.6.4 1.2.6 1.7.1.4.3.8.4 1.2.2.7.3 1.3.4 2 .1.3.1.7.2 1 .1 1 .2 2.1.2 3.1V597zm-254.1 13.3v111.3L723.1 597l-83.6-55.8zM281.8 472.6v79.8l59.8-39.9zM512 456.1l-84.5 56.4 84.5 56.4 84.5-56.4zM723.1 428L535.9 303.4v111.3l103.6 69.1zM384.5 541.2L300.9 597l187.2 124.6V610.3l-103.6-69.1z"}}]},name:"codepen-circle",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},82138:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M911.7 385.3l-.3-1.5c-.2-1-.3-1.9-.6-2.9-.2-.6-.4-1.1-.5-1.7-.3-.8-.5-1.7-.9-2.5-.2-.6-.5-1.1-.8-1.7-.4-.8-.8-1.5-1.2-2.3-.3-.5-.6-1.1-1-1.6-.8-1.2-1.7-2.4-2.6-3.6-.5-.6-1.1-1.3-1.7-1.9-.4-.5-.9-.9-1.4-1.3-.6-.6-1.3-1.1-1.9-1.6-.5-.4-1-.8-1.6-1.2-.2-.1-.4-.3-.6-.4L531.1 117.8a34.3 34.3 0 00-38.1 0L127.3 361.3c-.2.1-.4.3-.6.4-.5.4-1 .8-1.6 1.2-.7.5-1.3 1.1-1.9 1.6-.5.4-.9.9-1.4 1.3-.6.6-1.2 1.2-1.7 1.9-1 1.1-1.8 2.3-2.6 3.6-.3.5-.7 1-1 1.6-.4.7-.8 1.5-1.2 2.3-.3.5-.5 1.1-.8 1.7-.3.8-.6 1.7-.9 2.5-.2.6-.4 1.1-.5 1.7-.2.9-.4 1.9-.6 2.9l-.3 1.5c-.2 1.5-.3 3-.3 4.5v243.5c0 1.5.1 3 .3 4.5l.3 1.5.6 2.9c.2.6.3 1.1.5 1.7.3.9.6 1.7.9 2.5.2.6.5 1.1.8 1.7.4.8.7 1.5 1.2 2.3.3.5.6 1.1 1 1.6.5.7.9 1.4 1.5 2.1l1.2 1.5c.5.6 1.1 1.3 1.7 1.9.4.5.9.9 1.4 1.3.6.6 1.3 1.1 1.9 1.6.5.4 1 .8 1.6 1.2.2.1.4.3.6.4L493 905.7c5.6 3.8 12.3 5.8 19.1 5.8 6.6 0 13.3-1.9 19.1-5.8l365.6-243.5c.2-.1.4-.3.6-.4.5-.4 1-.8 1.6-1.2.7-.5 1.3-1.1 1.9-1.6.5-.4.9-.9 1.4-1.3.6-.6 1.2-1.2 1.7-1.9l1.2-1.5 1.5-2.1c.3-.5.7-1 1-1.6.4-.8.8-1.5 1.2-2.3.3-.5.5-1.1.8-1.7.3-.8.6-1.7.9-2.5.2-.5.4-1.1.5-1.7.3-.9.4-1.9.6-2.9l.3-1.5c.2-1.5.3-3 .3-4.5V389.8c-.3-1.5-.4-3-.6-4.5zM546.4 210.5l269.4 179.4-120.3 80.4-149-99.6V210.5zm-68.8 0v160.2l-149 99.6-120.3-80.4 269.3-179.4zM180.7 454.1l86 57.5-86 57.5v-115zm296.9 358.5L208.3 633.2l120.3-80.4 149 99.6v160.2zM512 592.8l-121.6-81.2L512 430.3l121.6 81.2L512 592.8zm34.4 219.8V652.4l149-99.6 120.3 80.4-269.3 179.4zM843.3 569l-86-57.5 86-57.5v115z"}}]},name:"codepen",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},60227:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M275 281c19.9 0 36-16.1 36-36V36c0-19.9-16.1-36-36-36s-36 16.1-36 36v209c0 19.9 16.1 36 36 36zm613 144H768c0-39.8-32.2-72-72-72H200c-39.8 0-72 32.2-72 72v248c0 3.4.2 6.7.7 9.9-.5 7-.7 14-.7 21.1 0 176.7 143.3 320 320 320 160.1 0 292.7-117.5 316.3-271H888c39.8 0 72-32.2 72-72V497c0-39.8-32.2-72-72-72zM696 681h-1.1c.7 7.6 1.1 15.2 1.1 23 0 137-111 248-248 248S200 841 200 704c0-7.8.4-15.4 1.1-23H200V425h496v256zm192-8H776V497h112v176zM613 281c19.9 0 36-16.1 36-36V36c0-19.9-16.1-36-36-36s-36 16.1-36 36v209c0 19.9 16.1 36 36 36zm-170 0c19.9 0 36-16.1 36-36V36c0-19.9-16.1-36-36-36s-36 16.1-36 36v209c0 19.9 16.1 36 36 36z"}}]},name:"coffee",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},13255:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm198.4-588.1a32 32 0 00-24.5.5L414.9 415 296.4 686c-3.6 8.2-3.6 17.5 0 25.7 3.4 7.8 9.7 13.9 17.7 17 3.8 1.5 7.7 2.2 11.7 2.2 4.4 0 8.7-.9 12.8-2.7l271-118.6 118.5-271a32.06 32.06 0 00-17.7-42.7zM576.8 534.4l26.2 26.2-42.4 42.4-26.2-26.2L380 644.4 447.5 490 422 464.4l42.4-42.4 25.5 25.5L644.4 380l-67.6 154.4zM464.4 422L422 464.4l25.5 25.6 86.9 86.8 26.2 26.2 42.4-42.4-26.2-26.2-86.8-86.9z"}}]},name:"compass",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},90888:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M301.3 496.7c-23.8 0-40.2-10.5-41.6-26.9H205c.9 43.4 36.9 70.3 93.9 70.3 59.1 0 95-28.4 95-75.5 0-35.8-20-55.9-64.5-64.5l-29.1-5.6c-23.8-4.7-33.8-11.9-33.8-24.2 0-15 13.3-24.5 33.4-24.5 20.1 0 35.3 11.1 36.6 27h53c-.9-41.7-37.5-70.3-90.3-70.3-54.4 0-89.7 28.9-89.7 73 0 35.5 21.2 58 62.5 65.8l29.7 5.9c25.8 5.2 35.6 11.9 35.6 24.4.1 14.7-14.5 25.1-36 25.1z"}},{tag:"path",attrs:{d:"M928 140H96c-17.7 0-32 14.3-32 32v496c0 17.7 14.3 32 32 32h380v112H304c-8.8 0-16 7.2-16 16v48c0 4.4 3.6 8 8 8h432c4.4 0 8-3.6 8-8v-48c0-8.8-7.2-16-16-16H548V700h380c17.7 0 32-14.3 32-32V172c0-17.7-14.3-32-32-32zm-40 488H136V212h752v416z"}},{tag:"path",attrs:{d:"M828.5 486.7h-95.8V308.5h-57.4V534h153.2zm-298.6 53.4c14.1 0 27.2-2 39.1-5.8l13.3 20.3h53.3L607.9 511c21.1-20 33-51.1 33-89.8 0-73.3-43.3-118.8-110.9-118.8s-111.2 45.3-111.2 118.8c-.1 73.7 43 118.9 111.1 118.9zm0-190c31.6 0 52.7 27.7 52.7 71.1 0 16.7-3.6 30.6-10 40.5l-5.2-6.9h-48.8L542 491c-3.9.9-8 1.4-12.2 1.4-31.7 0-52.8-27.5-52.8-71.2.1-43.6 21.2-71.1 52.9-71.1z"}}]},name:"console-sql",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},30074:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M594.3 601.5a111.8 111.8 0 0029.1-75.5c0-61.9-49.9-112-111.4-112s-111.4 50.1-111.4 112c0 29.1 11 55.5 29.1 75.5a158.09 158.09 0 00-74.6 126.1 8 8 0 008 8.4H407c4.2 0 7.6-3.3 7.9-7.5 3.8-50.6 46-90.5 97.2-90.5s93.4 40 97.2 90.5c.3 4.2 3.7 7.5 7.9 7.5H661a8 8 0 008-8.4c-2.8-53.3-32-99.7-74.7-126.1zM512 578c-28.5 0-51.7-23.3-51.7-52s23.2-52 51.7-52 51.7 23.3 51.7 52-23.2 52-51.7 52zm416-354H768v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56H548v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56H328v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56H96c-17.7 0-32 14.3-32 32v576c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V256c0-17.7-14.3-32-32-32zm-40 568H136V296h120v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56h148v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56h148v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56h120v496z"}}]},name:"contacts",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},82463:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-40 824H232V687h97.9c11.6 32.8 32 62.3 59.1 84.7 34.5 28.5 78.2 44.3 123 44.3s88.5-15.7 123-44.3c27.1-22.4 47.5-51.9 59.1-84.7H792v-63H643.6l-5.2 24.7C626.4 708.5 573.2 752 512 752s-114.4-43.5-126.5-103.3l-5.2-24.7H232V136h560v752zM320 341h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zm0 160h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}}]},name:"container",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},46802:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656zM340 683v77c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-77c-10.1 3.3-20.8 5-32 5s-21.9-1.8-32-5zm64-198V264c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v221c10.1-3.3 20.8-5 32-5s21.9 1.8 32 5zm-64 198c10.1 3.3 20.8 5 32 5s21.9-1.8 32-5c41.8-13.5 72-52.7 72-99s-30.2-85.5-72-99c-10.1-3.3-20.8-5-32-5s-21.9 1.8-32 5c-41.8 13.5-72 52.7-72 99s30.2 85.5 72 99zm.1-115.7c.3-.6.7-1.2 1-1.8v-.1l1.2-1.8c.1-.2.2-.3.3-.5.3-.5.7-.9 1-1.4.1-.1.2-.3.3-.4.5-.6.9-1.1 1.4-1.6l.3-.3 1.2-1.2.4-.4c.5-.5 1-.9 1.6-1.4.6-.5 1.1-.9 1.7-1.3.2-.1.3-.2.5-.3.5-.3.9-.7 1.4-1 .1-.1.3-.2.4-.3.6-.4 1.2-.7 1.9-1.1.1-.1.3-.1.4-.2.5-.3 1-.5 1.6-.8l.6-.3c.7-.3 1.3-.6 2-.8.7-.3 1.4-.5 2.1-.7.2-.1.4-.1.6-.2.6-.2 1.1-.3 1.7-.4.2 0 .3-.1.5-.1.7-.2 1.5-.3 2.2-.4.2 0 .3 0 .5-.1.6-.1 1.2-.1 1.8-.2h.6c.8 0 1.5-.1 2.3-.1s1.5 0 2.3.1h.6c.6 0 1.2.1 1.8.2.2 0 .3 0 .5.1.7.1 1.5.2 2.2.4.2 0 .3.1.5.1.6.1 1.2.3 1.7.4.2.1.4.1.6.2.7.2 1.4.4 2.1.7.7.2 1.3.5 2 .8l.6.3c.5.2 1.1.5 1.6.8.1.1.3.1.4.2.6.3 1.3.7 1.9 1.1.1.1.3.2.4.3.5.3 1 .6 1.4 1 .2.1.3.2.5.3.6.4 1.2.9 1.7 1.3s1.1.9 1.6 1.4l.4.4 1.2 1.2.3.3c.5.5 1 1.1 1.4 1.6.1.1.2.3.3.4.4.4.7.9 1 1.4.1.2.2.3.3.5l1.2 1.8s0 .1.1.1a36.18 36.18 0 015.1 18.5c0 6-1.5 11.7-4.1 16.7-.3.6-.7 1.2-1 1.8 0 0 0 .1-.1.1l-1.2 1.8c-.1.2-.2.3-.3.5-.3.5-.7.9-1 1.4-.1.1-.2.3-.3.4-.5.6-.9 1.1-1.4 1.6l-.3.3-1.2 1.2-.4.4c-.5.5-1 .9-1.6 1.4-.6.5-1.1.9-1.7 1.3-.2.1-.3.2-.5.3-.5.3-.9.7-1.4 1-.1.1-.3.2-.4.3-.6.4-1.2.7-1.9 1.1-.1.1-.3.1-.4.2-.5.3-1 .5-1.6.8l-.6.3c-.7.3-1.3.6-2 .8-.7.3-1.4.5-2.1.7-.2.1-.4.1-.6.2-.6.2-1.1.3-1.7.4-.2 0-.3.1-.5.1-.7.2-1.5.3-2.2.4-.2 0-.3 0-.5.1-.6.1-1.2.1-1.8.2h-.6c-.8 0-1.5.1-2.3.1s-1.5 0-2.3-.1h-.6c-.6 0-1.2-.1-1.8-.2-.2 0-.3 0-.5-.1-.7-.1-1.5-.2-2.2-.4-.2 0-.3-.1-.5-.1-.6-.1-1.2-.3-1.7-.4-.2-.1-.4-.1-.6-.2-.7-.2-1.4-.4-2.1-.7-.7-.2-1.3-.5-2-.8l-.6-.3c-.5-.2-1.1-.5-1.6-.8-.1-.1-.3-.1-.4-.2-.6-.3-1.3-.7-1.9-1.1-.1-.1-.3-.2-.4-.3-.5-.3-1-.6-1.4-1-.2-.1-.3-.2-.5-.3-.6-.4-1.2-.9-1.7-1.3s-1.1-.9-1.6-1.4l-.4-.4-1.2-1.2-.3-.3c-.5-.5-1-1.1-1.4-1.6-.1-.1-.2-.3-.3-.4-.4-.4-.7-.9-1-1.4-.1-.2-.2-.3-.3-.5l-1.2-1.8v-.1c-.4-.6-.7-1.2-1-1.8-2.6-5-4.1-10.7-4.1-16.7s1.5-11.7 4.1-16.7zM620 539v221c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V539c-10.1 3.3-20.8 5-32 5s-21.9-1.8-32-5zm64-198v-77c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v77c10.1-3.3 20.8-5 32-5s21.9 1.8 32 5zm-64 198c10.1 3.3 20.8 5 32 5s21.9-1.8 32-5c41.8-13.5 72-52.7 72-99s-30.2-85.5-72-99c-10.1-3.3-20.8-5-32-5s-21.9 1.8-32 5c-41.8 13.5-72 52.7-72 99s30.2 85.5 72 99zm.1-115.7c.3-.6.7-1.2 1-1.8v-.1l1.2-1.8c.1-.2.2-.3.3-.5.3-.5.7-.9 1-1.4.1-.1.2-.3.3-.4.5-.6.9-1.1 1.4-1.6l.3-.3 1.2-1.2.4-.4c.5-.5 1-.9 1.6-1.4.6-.5 1.1-.9 1.7-1.3.2-.1.3-.2.5-.3.5-.3.9-.7 1.4-1 .1-.1.3-.2.4-.3.6-.4 1.2-.7 1.9-1.1.1-.1.3-.1.4-.2.5-.3 1-.5 1.6-.8l.6-.3c.7-.3 1.3-.6 2-.8.7-.3 1.4-.5 2.1-.7.2-.1.4-.1.6-.2.6-.2 1.1-.3 1.7-.4.2 0 .3-.1.5-.1.7-.2 1.5-.3 2.2-.4.2 0 .3 0 .5-.1.6-.1 1.2-.1 1.8-.2h.6c.8 0 1.5-.1 2.3-.1s1.5 0 2.3.1h.6c.6 0 1.2.1 1.8.2.2 0 .3 0 .5.1.7.1 1.5.2 2.2.4.2 0 .3.1.5.1.6.1 1.2.3 1.7.4.2.1.4.1.6.2.7.2 1.4.4 2.1.7.7.2 1.3.5 2 .8l.6.3c.5.2 1.1.5 1.6.8.1.1.3.1.4.2.6.3 1.3.7 1.9 1.1.1.1.3.2.4.3.5.3 1 .6 1.4 1 .2.1.3.2.5.3.6.4 1.2.9 1.7 1.3s1.1.9 1.6 1.4l.4.4 1.2 1.2.3.3c.5.5 1 1.1 1.4 1.6.1.1.2.3.3.4.4.4.7.9 1 1.4.1.2.2.3.3.5l1.2 1.8v.1a36.18 36.18 0 015.1 18.5c0 6-1.5 11.7-4.1 16.7-.3.6-.7 1.2-1 1.8v.1l-1.2 1.8c-.1.2-.2.3-.3.5-.3.5-.7.9-1 1.4-.1.1-.2.3-.3.4-.5.6-.9 1.1-1.4 1.6l-.3.3-1.2 1.2-.4.4c-.5.5-1 .9-1.6 1.4-.6.5-1.1.9-1.7 1.3-.2.1-.3.2-.5.3-.5.3-.9.7-1.4 1-.1.1-.3.2-.4.3-.6.4-1.2.7-1.9 1.1-.1.1-.3.1-.4.2-.5.3-1 .5-1.6.8l-.6.3c-.7.3-1.3.6-2 .8-.7.3-1.4.5-2.1.7-.2.1-.4.1-.6.2-.6.2-1.1.3-1.7.4-.2 0-.3.1-.5.1-.7.2-1.5.3-2.2.4-.2 0-.3 0-.5.1-.6.1-1.2.1-1.8.2h-.6c-.8 0-1.5.1-2.3.1s-1.5 0-2.3-.1h-.6c-.6 0-1.2-.1-1.8-.2-.2 0-.3 0-.5-.1-.7-.1-1.5-.2-2.2-.4-.2 0-.3-.1-.5-.1-.6-.1-1.2-.3-1.7-.4-.2-.1-.4-.1-.6-.2-.7-.2-1.4-.4-2.1-.7-.7-.2-1.3-.5-2-.8l-.6-.3c-.5-.2-1.1-.5-1.6-.8-.1-.1-.3-.1-.4-.2-.6-.3-1.3-.7-1.9-1.1-.1-.1-.3-.2-.4-.3-.5-.3-1-.6-1.4-1-.2-.1-.3-.2-.5-.3-.6-.4-1.2-.9-1.7-1.3s-1.1-.9-1.6-1.4l-.4-.4-1.2-1.2-.3-.3c-.5-.5-1-1.1-1.4-1.6-.1-.1-.2-.3-.3-.4-.4-.4-.7-.9-1-1.4-.1-.2-.2-.3-.3-.5l-1.2-1.8v-.1c-.4-.6-.7-1.2-1-1.8-2.6-5-4.1-10.7-4.1-16.7s1.5-11.7 4.1-16.7z"}}]},name:"control",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},43774:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M899.6 276.5L705 396.4 518.4 147.5a8.06 8.06 0 00-12.9 0L319 396.4 124.3 276.5c-5.7-3.5-13.1 1.2-12.2 7.9L188.5 865c1.1 7.9 7.9 14 16 14h615.1c8 0 14.9-6 15.9-14l76.4-580.6c.8-6.7-6.5-11.4-12.3-7.9zm-126 534.1H250.3l-53.8-409.4 139.8 86.1L512 252.9l175.7 234.4 139.8-86.1-53.9 409.4zM512 509c-62.1 0-112.6 50.5-112.6 112.6S449.9 734.2 512 734.2s112.6-50.5 112.6-112.6S574.1 509 512 509zm0 160.9c-26.6 0-48.2-21.6-48.2-48.3 0-26.6 21.6-48.3 48.2-48.3s48.2 21.6 48.2 48.3c0 26.6-21.6 48.3-48.2 48.3z"}}]},name:"crown",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},7079:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 128c-212.1 0-384 171.9-384 384v360c0 13.3 10.7 24 24 24h184c35.3 0 64-28.7 64-64V624c0-35.3-28.7-64-64-64H200v-48c0-172.3 139.7-312 312-312s312 139.7 312 312v48H688c-35.3 0-64 28.7-64 64v208c0 35.3 28.7 64 64 64h184c13.3 0 24-10.7 24-24V512c0-212.1-171.9-384-384-384zM328 632v192H200V632h128zm496 192H696V632h128v192z"}}]},name:"customer-service",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},48990:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 385.6a446.7 446.7 0 00-96-142.4 446.7 446.7 0 00-142.4-96C631.1 123.8 572.5 112 512 112s-119.1 11.8-174.4 35.2a446.7 446.7 0 00-142.4 96 446.7 446.7 0 00-96 142.4C75.8 440.9 64 499.5 64 560c0 132.7 58.3 257.7 159.9 343.1l1.7 1.4c5.8 4.8 13.1 7.5 20.6 7.5h531.7c7.5 0 14.8-2.7 20.6-7.5l1.7-1.4C901.7 817.7 960 692.7 960 560c0-60.5-11.9-119.1-35.2-174.4zM761.4 836H262.6A371.12 371.12 0 01140 560c0-99.4 38.7-192.8 109-263 70.3-70.3 163.7-109 263-109 99.4 0 192.8 38.7 263 109 70.3 70.3 109 163.7 109 263 0 105.6-44.5 205.5-122.6 276zM623.5 421.5a8.03 8.03 0 00-11.3 0L527.7 506c-18.7-5-39.4-.2-54.1 14.5a55.95 55.95 0 000 79.2 55.95 55.95 0 0079.2 0 55.87 55.87 0 0014.5-54.1l84.5-84.5c3.1-3.1 3.1-8.2 0-11.3l-28.3-28.3zM490 320h44c4.4 0 8-3.6 8-8v-80c0-4.4-3.6-8-8-8h-44c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8zm260 218v44c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8v-44c0-4.4-3.6-8-8-8h-80c-4.4 0-8 3.6-8 8zm12.7-197.2l-31.1-31.1a8.03 8.03 0 00-11.3 0l-56.6 56.6a8.03 8.03 0 000 11.3l31.1 31.1c3.1 3.1 8.2 3.1 11.3 0l56.6-56.6c3.1-3.1 3.1-8.2 0-11.3zm-458.6-31.1a8.03 8.03 0 00-11.3 0l-31.1 31.1a8.03 8.03 0 000 11.3l56.6 56.6c3.1 3.1 8.2 3.1 11.3 0l31.1-31.1c3.1-3.1 3.1-8.2 0-11.3l-56.6-56.6zM262 530h-80c-4.4 0-8 3.6-8 8v44c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8v-44c0-4.4-3.6-8-8-8z"}}]},name:"dashboard",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},80088:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-600 72h560v208H232V136zm560 480H232V408h560v208zm0 272H232V680h560v208zM304 240a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"database",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},93598:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},88668:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888.3 693.2c-42.5-24.6-94.3-18-129.2 12.8l-53-30.7V523.6c0-15.7-8.4-30.3-22-38.1l-136-78.3v-67.1c44.2-15 76-56.8 76-106.1 0-61.9-50.1-112-112-112s-112 50.1-112 112c0 49.3 31.8 91.1 76 106.1v67.1l-136 78.3c-13.6 7.8-22 22.4-22 38.1v151.6l-53 30.7c-34.9-30.8-86.8-37.4-129.2-12.8-53.5 31-71.7 99.4-41 152.9 30.8 53.5 98.9 71.9 152.2 41 42.5-24.6 62.7-73 53.6-118.8l48.7-28.3 140.6 81c6.8 3.9 14.4 5.9 22 5.9s15.2-2 22-5.9L674.5 740l48.7 28.3c-9.1 45.7 11.2 94.2 53.6 118.8 53.3 30.9 121.5 12.6 152.2-41 30.8-53.6 12.6-122-40.7-152.9zm-673 138.4a47.6 47.6 0 01-65.2-17.6c-13.2-22.9-5.4-52.3 17.5-65.5a47.6 47.6 0 0165.2 17.6c13.2 22.9 5.4 52.3-17.5 65.5zM522 463.8zM464 234a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm170 446.2l-122 70.3-122-70.3V539.8l122-70.3 122 70.3v140.4zm239.9 133.9c-13.2 22.9-42.4 30.8-65.2 17.6-22.8-13.2-30.7-42.6-17.5-65.5s42.4-30.8 65.2-17.6c22.9 13.2 30.7 42.5 17.5 65.5z"}}]},name:"deployment-unit",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},68456:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M573.7 252.5C422.5 197.4 201.3 96.7 201.3 96.7c-15.7-4.1-17.9 11.1-17.9 11.1-5 61.1 33.6 160.5 53.6 182.8 19.9 22.3 319.1 113.7 319.1 113.7S326 357.9 270.5 341.9c-55.6-16-37.9 17.8-37.9 17.8 11.4 61.7 64.9 131.8 107.2 138.4 42.2 6.6 220.1 4 220.1 4s-35.5 4.1-93.2 11.9c-42.7 5.8-97 12.5-111.1 17.8-33.1 12.5 24 62.6 24 62.6 84.7 76.8 129.7 50.5 129.7 50.5 33.3-10.7 61.4-18.5 85.2-24.2L565 743.1h84.6L603 928l205.3-271.9H700.8l22.3-38.7c.3.5.4.8.4.8S799.8 496.1 829 433.8l.6-1h-.1c5-10.8 8.6-19.7 10-25.8 17-71.3-114.5-99.4-265.8-154.5z"}}]},name:"dingding",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},44627:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M573.7 252.5C422.5 197.4 201.3 96.7 201.3 96.7c-15.7-4.1-17.9 11.1-17.9 11.1-5 61.1 33.6 160.5 53.6 182.8 19.9 22.3 319.1 113.7 319.1 113.7S326 357.9 270.5 341.9c-55.6-16-37.9 17.8-37.9 17.8 11.4 61.7 64.9 131.8 107.2 138.4 42.2 6.6 220.1 4 220.1 4s-35.5 4.1-93.2 11.9c-42.7 5.8-97 12.5-111.1 17.8-33.1 12.5 24 62.6 24 62.6 84.7 76.8 129.7 50.5 129.7 50.5 33.3-10.7 61.4-18.5 85.2-24.2L565 743.1h84.6L603 928l205.3-271.9H700.8l22.3-38.7c.3.5.4.8.4.8S799.8 496.1 829 433.8l.6-1h-.1c5-10.8 8.6-19.7 10-25.8 17-71.3-114.5-99.4-265.8-154.5z"}}]},name:"dingtalk",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},14103:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},40756:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},84032:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 96C282.6 96 96 282.6 96 512s186.6 416 416 416 416-186.6 416-416S741.4 96 512 96zm275.1 191.8c49.5 60.5 79.5 137.5 80.2 221.4-11.7-2.5-129.2-26.3-247.4-11.4-2.5-6.1-5-12.2-7.6-18.3-7.4-17.3-15.3-34.6-23.6-51.5C720 374.3 779.6 298 787.1 287.8zM512 157.2c90.3 0 172.8 33.9 235.5 89.5-6.4 9.1-59.9 81-186.2 128.4-58.2-107-122.7-194.8-132.6-208 27.3-6.6 55.2-9.9 83.3-9.9zM360.9 191c9.4 12.8 72.9 100.9 131.7 205.5C326.4 440.6 180 440 164.1 439.8c23.1-110.3 97.4-201.9 196.8-248.8zM156.7 512.5c0-3.6.1-7.3.2-10.9 15.5.3 187.7 2.5 365.2-50.6 10.2 19.9 19.9 40.1 28.8 60.3-4.7 1.3-9.4 2.7-14 4.2C353.6 574.9 256.1 736.4 248 750.1c-56.7-63-91.3-146.3-91.3-237.6zM512 867.8c-82.2 0-157.9-28-218.1-75 6.4-13.1 78.3-152 278.7-221.9l2.3-.8c49.9 129.6 70.5 238.3 75.8 269.5A350.46 350.46 0 01512 867.8zm198.5-60.7c-3.6-21.6-22.5-125.6-69-253.3C752.9 536 850.7 565.2 862.8 569c-15.8 98.8-72.5 184.2-152.3 238.1z"}}]},name:"dribbble",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},73576:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M64 556.9l264.2 173.5L512.5 577 246.8 412.7zm896-290.3zm0 0L696.8 95 512.5 248.5l265.2 164.2L512.5 577l184.3 153.4L960 558.8 777.7 412.7zM513 609.8L328.2 763.3l-79.4-51.5v57.8L513 928l263.7-158.4v-57.8l-78.9 51.5zM328.2 95L64 265.1l182.8 147.6 265.7-164.2zM64 556.9z"}}]},name:"dropbox",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},52318:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},7541:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},52629:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},8597:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},30234:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},6516:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-32 736H663.9V602.2h104l15.6-120.7H663.9v-77.1c0-35 9.7-58.8 59.8-58.8h63.9v-108c-11.1-1.5-49-4.8-93.2-4.8-92.2 0-155.3 56.3-155.3 159.6v89H434.9v120.7h104.3V848H176V176h672v672z"}}]},name:"facebook",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},21883:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M553.1 509.1l-77.8 99.2-41.1-52.4a8 8 0 00-12.6 0l-99.8 127.2a7.98 7.98 0 006.3 12.9H696c6.7 0 10.4-7.7 6.3-12.9l-136.5-174a8.1 8.1 0 00-12.7 0zM360 442a40 40 0 1080 0 40 40 0 10-80 0zm494.6-153.4L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file-image",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},36436:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:function(t,e){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M534 352V136H232v752h560V394H576a42 42 0 01-42-42z",fill:e}},{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602 137.8L790.2 326H602V137.8zM792 888H232V136h302v216a42 42 0 0042 42h216v494z",fill:t}}]}},name:"file",theme:"twotone"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},87942:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M834.1 469.2A347.49 347.49 0 00751.2 354l-29.1-26.7a8.09 8.09 0 00-13 3.3l-13 37.3c-8.1 23.4-23 47.3-44.1 70.8-1.4 1.5-3 1.9-4.1 2-1.1.1-2.8-.1-4.3-1.5-1.4-1.2-2.1-3-2-4.8 3.7-60.2-14.3-128.1-53.7-202C555.3 171 510 123.1 453.4 89.7l-41.3-24.3c-5.4-3.2-12.3 1-12 7.3l2.2 48c1.5 32.8-2.3 61.8-11.3 85.9-11 29.5-26.8 56.9-47 81.5a295.64 295.64 0 01-47.5 46.1 352.6 352.6 0 00-100.3 121.5A347.75 347.75 0 00160 610c0 47.2 9.3 92.9 27.7 136a349.4 349.4 0 0075.5 110.9c32.4 32 70 57.2 111.9 74.7C418.5 949.8 464.5 959 512 959s93.5-9.2 136.9-27.3A348.6 348.6 0 00760.8 857c32.4-32 57.8-69.4 75.5-110.9a344.2 344.2 0 0027.7-136c0-48.8-10-96.2-29.9-140.9zM713 808.5c-53.7 53.2-125 82.4-201 82.4s-147.3-29.2-201-82.4c-53.5-53.1-83-123.5-83-198.4 0-43.5 9.8-85.2 29.1-124 18.8-37.9 46.8-71.8 80.8-97.9a349.6 349.6 0 0058.6-56.8c25-30.5 44.6-64.5 58.2-101a240 240 0 0012.1-46.5c24.1 22.2 44.3 49 61.2 80.4 33.4 62.6 48.8 118.3 45.8 165.7a74.01 74.01 0 0024.4 59.8 73.36 73.36 0 0053.4 18.8c19.7-1 37.8-9.7 51-24.4 13.3-14.9 24.8-30.1 34.4-45.6 14 17.9 25.7 37.4 35 58.4 15.9 35.8 24 73.9 24 113.1 0 74.9-29.5 145.4-83 198.4z"}}]},name:"fire",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},24959:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M484 443.1V528h-84.5c-4.1 0-7.5 3.1-7.5 7v42c0 3.8 3.4 7 7.5 7H484v84.9c0 3.9 3.2 7.1 7 7.1h42c3.9 0 7-3.2 7-7.1V584h84.5c4.1 0 7.5-3.2 7.5-7v-42c0-3.9-3.4-7-7.5-7H540v-84.9c0-3.9-3.1-7.1-7-7.1h-42c-3.8 0-7 3.2-7 7.1zm396-144.7H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder-add",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},22630:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M840 192h-56v-72c0-13.3-10.7-24-24-24H168c-13.3 0-24 10.7-24 24v272c0 13.3 10.7 24 24 24h592c13.3 0 24-10.7 24-24V256h32v200H465c-22.1 0-40 17.9-40 40v136h-44c-4.4 0-8 3.6-8 8v228c0 .6.1 1.3.2 1.9A83.99 83.99 0 00457 960c46.4 0 84-37.6 84-84 0-2.1-.1-4.1-.2-6.1.1-.6.2-1.2.2-1.9V640c0-4.4-3.6-8-8-8h-44V520h351c22.1 0 40-17.9 40-40V232c0-22.1-17.9-40-40-40zM720 352H208V160h512v192zM477 876c0 11-9 20-20 20s-20-9-20-20V696h40v180z"}}]},name:"format-painter",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},53578:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 310H732.4c13.6-21.4 21.6-46.8 21.6-74 0-76.1-61.9-138-138-138-41.4 0-78.7 18.4-104 47.4-25.3-29-62.6-47.4-104-47.4-76.1 0-138 61.9-138 138 0 27.2 7.9 52.6 21.6 74H144c-17.7 0-32 14.3-32 32v200c0 4.4 3.6 8 8 8h40v344c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V550h40c4.4 0 8-3.6 8-8V342c0-17.7-14.3-32-32-32zm-334-74c0-38.6 31.4-70 70-70s70 31.4 70 70-31.4 70-70 70h-70v-70zm-138-70c38.6 0 70 31.4 70 70v70h-70c-38.6 0-70-31.4-70-70s31.4-70 70-70zM180 482V378h298v104H180zm48 68h250v308H228V550zm568 308H546V550h250v308zm48-376H546V378h298v104z"}}]},name:"gift",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},17122:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0138.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"}}]},name:"github",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},16125:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M913.9 552.2L805 181.4v-.1c-7.6-22.9-25.7-36.5-48.3-36.5-23.4 0-42.5 13.5-49.7 35.2l-71.4 213H388.8l-71.4-213c-7.2-21.7-26.3-35.2-49.7-35.2-23.1 0-42.5 14.8-48.4 36.6L110.5 552.2c-4.4 14.7 1.2 31.4 13.5 40.7l368.5 276.4c2.6 3.6 6.2 6.3 10.4 7.8l8.6 6.4 8.5-6.4c4.9-1.7 9-4.7 11.9-8.9l368.4-275.4c12.4-9.2 18-25.9 13.6-40.6zM751.7 193.4c1-1.8 2.9-1.9 3.5-1.9 1.1 0 2.5.3 3.4 3L818 394.3H684.5l67.2-200.9zm-487.4 1c.9-2.6 2.3-2.9 3.4-2.9 2.7 0 2.9.1 3.4 1.7l67.3 201.2H206.5l57.8-200zM158.8 558.7l28.2-97.3 202.4 270.2-230.6-172.9zm73.9-116.4h122.1l90.8 284.3-212.9-284.3zM512.9 776L405.7 442.3H620L512.9 776zm157.9-333.7h119.5L580 723.1l90.8-280.8zm-40.7 293.9l207.3-276.7 29.5 99.2-236.8 177.5z"}}]},name:"gitlab",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},87851:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M881 442.4H519.7v148.5h206.4c-8.9 48-35.9 88.6-76.6 115.8-34.4 23-78.3 36.6-129.9 36.6-99.9 0-184.4-67.5-214.6-158.2-7.6-23-12-47.6-12-72.9s4.4-49.9 12-72.9c30.3-90.6 114.8-158.1 214.7-158.1 56.3 0 106.8 19.4 146.6 57.4l110-110.1c-66.5-62-153.2-100-256.6-100-149.9 0-279.6 86-342.7 211.4-26 51.8-40.8 110.4-40.8 172.4S151 632.8 177 684.6C240.1 810 369.8 896 519.7 896c103.6 0 190.4-34.4 253.8-93 72.5-66.8 114.4-165.2 114.4-282.1 0-27.2-2.4-53.3-6.9-78.5z"}}]},name:"google",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},29566:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M879.5 470.4c-.3-27-.4-54.2-.5-81.3h-80.8c-.3 27-.5 54.1-.7 81.3-27.2.1-54.2.3-81.2.6v80.9c27 .3 54.2.5 81.2.8.3 27 .3 54.1.5 81.1h80.9c.1-27 .3-54.1.5-81.3 27.2-.3 54.2-.4 81.2-.7v-80.9c-26.9-.2-54.1-.2-81.1-.5zm-530 .4c-.1 32.3 0 64.7.1 97 54.2 1.8 108.5 1 162.7 1.8-23.9 120.3-187.4 159.3-273.9 80.7-89-68.9-84.8-220 7.7-284 64.7-51.6 156.6-38.9 221.3 5.8 25.4-23.5 49.2-48.7 72.1-74.7-53.8-42.9-119.8-73.5-190-70.3-146.6-4.9-281.3 123.5-283.7 270.2-9.4 119.9 69.4 237.4 180.6 279.8 110.8 42.7 252.9 13.6 323.7-86 46.7-62.9 56.8-143.9 51.3-220-90.7-.7-181.3-.6-271.9-.3z"}}]},name:"google-plus",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},46061:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M145 96l66 746.6L511.8 928l299.6-85.4L878.7 96H145zm610.9 700.6l-244.1 69.6-245.2-69.6-56.7-641.2h603.8l-57.8 641.2zM281 249l1.7 24.3 22.7 253.5h206.5v-.1h112.9l-11.4 118.5L511 672.9v.2h-.8l-102.4-27.7-6.5-73.2h-91l11.3 144.7 188.6 52h1.7v-.4l187.7-51.7 1.7-16.3 21.2-242.2 3.2-24.3H511v.2H389.9l-8.2-94.2h352.1l1.7-19.5 4.8-47.2L742 249H511z"}}]},name:"html5",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},92136:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M852.6 367.6c16.3-36.9 32.1-90.7 32.1-131.8 0-109.1-119.5-147.6-314.5-57.9-161.4-10.8-316.8 110.5-355.6 279.7 46.3-52.3 117.4-123.4 183-151.7C316.1 378.3 246.7 470 194 565.6c-31.1 56.9-66 148.8-66 217.5 0 147.9 139.3 129.8 270.4 63 47.1 23.1 99.8 23.4 152.5 23.4 145.7 0 276.4-81.4 325.2-219H694.9c-78.8 132.9-295.2 79.5-295.2-71.2h493.2c9.6-65.4-2.5-143.6-40.3-211.7zM224.8 648.3c26.6 76.7 80.6 143.8 150.4 185-133.1 73.4-259.9 43.6-150.4-185zm174-163.3c3-82.7 75.4-142.3 156-142.3 80.1 0 153 59.6 156 142.3h-312zm276.8-281.4c32.1-15.4 72.8-33 108.8-33 47.1 0 81.4 32.6 81.4 80.6 0 30-11.1 73.5-21.9 101.8-39.3-63.5-98.9-122.4-168.3-149.4z"}}]},name:"ie",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},17850:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},29248:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},50329:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},84890:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM305.8 637.7c3.1 3.1 8.1 3.1 11.3 0l138.3-137.6L583 628.5c3.1 3.1 8.2 3.1 11.3 0l275.4-275.3c3.1-3.1 3.1-8.2 0-11.3l-39.6-39.6a8.03 8.03 0 00-11.3 0l-230 229.9L461.4 404a8.03 8.03 0 00-11.3 0L266.3 586.7a8.03 8.03 0 000 11.3l39.5 39.7z"}}]},name:"line-chart",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},80069:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M847.7 112H176.3c-35.5 0-64.3 28.8-64.3 64.3v671.4c0 35.5 28.8 64.3 64.3 64.3h671.4c35.5 0 64.3-28.8 64.3-64.3V176.3c0-35.5-28.8-64.3-64.3-64.3zm0 736c-447.8-.1-671.7-.2-671.7-.3.1-447.8.2-671.7.3-671.7 447.8.1 671.7.2 671.7.3-.1 447.8-.2 671.7-.3 671.7zM230.6 411.9h118.7v381.8H230.6zm59.4-52.2c37.9 0 68.8-30.8 68.8-68.8a68.8 68.8 0 10-137.6 0c-.1 38 30.7 68.8 68.8 68.8zm252.3 245.1c0-49.8 9.5-98 71.2-98 60.8 0 61.7 56.9 61.7 101.2v185.7h118.6V584.3c0-102.8-22.2-181.9-142.3-181.9-57.7 0-96.4 31.7-112.3 61.7h-1.6v-52.2H423.7v381.8h118.6V604.8z"}}]},name:"linkedin",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},93567:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},58676:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M834.7 279.8l61.3-58.9V208H683.7L532.4 586.4 360.3 208H137.7v12.9l71.6 86.6c7 6.4 10.6 15.8 9.7 25.2V673c2.2 12.3-1.7 24.8-10.3 33.7L128 805v12.7h228.6v-12.9l-80.6-98a39.99 39.99 0 01-11.1-33.7V378.7l200.7 439.2h23.3l172.6-439.2v349.9c0 9.2 0 11.1-6 17.2l-62.1 60.3V819h301.2v-12.9l-59.9-58.9c-5.2-4-7.9-10.7-6.8-17.2V297a18.1 18.1 0 016.8-17.2z"}}]},name:"medium",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},31201:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 000 13.8z"}}]},name:"menu-fold",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},76157:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 000-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0014.4 7z"}}]},name:"menu-unfold",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},90911:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482.2 508.4L331.3 389c-3-2.4-7.3-.2-7.3 3.6V478H184V184h204v128c0 2.2 1.8 4 4 4h60c2.2 0 4-1.8 4-4V144c0-15.5-12.5-28-28-28H144c-15.5 0-28 12.5-28 28v736c0 15.5 12.5 28 28 28h284c15.5 0 28-12.5 28-28V712c0-2.2-1.8-4-4-4h-60c-2.2 0-4 1.8-4 4v128H184V546h140v85.4c0 3.8 4.4 6 7.3 3.6l150.9-119.4a4.5 4.5 0 000-7.2zM880 116H596c-15.5 0-28 12.5-28 28v168c0 2.2 1.8 4 4 4h60c2.2 0 4-1.8 4-4V184h204v294H700v-85.4c0-3.8-4.3-6-7.3-3.6l-151 119.4a4.52 4.52 0 000 7.1l151 119.5c2.9 2.3 7.3.2 7.3-3.6V546h140v294H636V712c0-2.2-1.8-4-4-4h-60c-2.2 0-4 1.8-4 4v168c0 15.5 12.5 28 28 28h284c15.5 0 28-12.5 28-28V144c0-15.5-12.5-28-28-28z"}}]},name:"merge-cells",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},78854:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},54466:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z"}}]},name:"paper-clip",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},90628:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:function(t,e){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2z",fill:t}},{tag:"path",attrs:{d:"M424.6 765.8l-150.1-178L136 752.1V792h752v-30.4L658.1 489z",fill:e}},{tag:"path",attrs:{d:"M136 652.7l132.4-157c3.2-3.8 9-3.8 12.2 0l144 170.7L652 396.8c3.2-3.8 9-3.8 12.2 0L888 662.2V232H136v420.7zM304 280a88 88 0 110 176 88 88 0 010-176z",fill:e}},{tag:"path",attrs:{d:"M276 368a28 28 0 1056 0 28 28 0 10-56 0z",fill:e}},{tag:"path",attrs:{d:"M304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z",fill:t}}]}},name:"picture",theme:"twotone"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},75132:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M719.4 499.1l-296.1-215A15.9 15.9 0 00398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 15.9 0 000-25.8zm-257.6 134V390.9L628.5 512 461.8 633.1z"}}]},name:"play-circle",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},46221:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M824.8 613.2c-16-51.4-34.4-94.6-62.7-165.3C766.5 262.2 689.3 112 511.5 112 331.7 112 256.2 265.2 261 447.9c-28.4 70.8-46.7 113.7-62.7 165.3-34 109.5-23 154.8-14.6 155.8 18 2.2 70.1-82.4 70.1-82.4 0 49 25.2 112.9 79.8 159-26.4 8.1-85.7 29.9-71.6 53.8 11.4 19.3 196.2 12.3 249.5 6.3 53.3 6 238.1 13 249.5-6.3 14.1-23.8-45.3-45.7-71.6-53.8 54.6-46.2 79.8-110.1 79.8-159 0 0 52.1 84.6 70.1 82.4 8.5-1.1 19.5-46.4-14.5-155.8z"}}]},name:"qq",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},68e3:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},32977:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 736c0-111.6-65.4-208-160-252.9V317.3c0-15.1-5.3-29.7-15.1-41.2L536.5 95.4C530.1 87.8 521 84 512 84s-18.1 3.8-24.5 11.4L335.1 276.1a63.97 63.97 0 00-15.1 41.2v165.8C225.4 528 160 624.4 160 736h156.5c-2.3 7.2-3.5 15-3.5 23.8 0 22.1 7.6 43.7 21.4 60.8a97.2 97.2 0 0043.1 30.6c23.1 54 75.6 88.8 134.5 88.8 29.1 0 57.3-8.6 81.4-24.8 23.6-15.8 41.9-37.9 53-64a97 97 0 0043.1-30.5 97.52 97.52 0 0021.4-60.8c0-8.4-1.1-16.4-3.1-23.8H864zM762.3 621.4c9.4 14.6 17 30.3 22.5 46.6H700V558.7a211.6 211.6 0 0162.3 62.7zM388 483.1V318.8l124-147 124 147V668H388V483.1zM239.2 668c5.5-16.3 13.1-32 22.5-46.6 16.3-25.2 37.5-46.5 62.3-62.7V668h-84.8zm388.9 116.2c-5.2 3-11.2 4.2-17.1 3.4l-19.5-2.4-2.8 19.4c-5.4 37.9-38.4 66.5-76.7 66.5-38.3 0-71.3-28.6-76.7-66.5l-2.8-19.5-19.5 2.5a27.7 27.7 0 01-17.1-3.5c-8.7-5-14.1-14.3-14.1-24.4 0-10.6 5.9-19.4 14.6-23.8h231.3c8.8 4.5 14.6 13.3 14.6 23.8-.1 10.2-5.5 19.6-14.2 24.5zM464 400a48 48 0 1096 0 48 48 0 10-96 0z"}}]},name:"rocket",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},68388:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H188V494h440v326z"}},{tag:"path",attrs:{d:"M819.3 328.5c-78.8-100.7-196-153.6-314.6-154.2l-.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7.4 12.6-6.1v-63.9c12.9.1 25.9.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8a325.95 325.95 0 016.5 140.9h74.9c14.8-103.6-11.3-213-81-302.3z"}}]},name:"rotate-left",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},42877:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},78602:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"}}]},name:"setting",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},51600:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M883.7 578.6c4.1-22.5 6.3-45.5 6.3-68.5 0-51-10-100.5-29.7-147-19-45-46.3-85.4-81-120.1a375.79 375.79 0 00-120.1-80.9c-46.6-19.7-96-29.7-147-29.7-24 0-48.1 2.3-71.5 6.8A225.1 225.1 0 00335.6 113c-59.7 0-115.9 23.3-158.1 65.5A222.25 222.25 0 00112 336.6c0 38 9.8 75.4 28.1 108.4-3.7 21.4-5.7 43.3-5.7 65.1 0 51 10 100.5 29.7 147 19 45 46.2 85.4 80.9 120.1 34.7 34.7 75.1 61.9 120.1 80.9 46.6 19.7 96 29.7 147 29.7 22.2 0 44.4-2 66.2-5.9 33.5 18.9 71.3 29 110 29 59.7 0 115.9-23.2 158.1-65.5 42.3-42.2 65.5-98.4 65.5-158.1.1-38-9.7-75.5-28.2-108.7zm-88.1 216C766.9 823.4 729 839 688.4 839c-26.1 0-51.8-6.8-74.6-19.7l-22.5-12.7-25.5 4.5c-17.8 3.2-35.8 4.8-53.6 4.8-41.4 0-81.3-8.1-119.1-24.1-36.3-15.3-69-37.3-97.2-65.5a304.29 304.29 0 01-65.5-97.1c-16-37.7-24-77.6-24-119 0-17.4 1.6-35.2 4.6-52.8l4.4-25.1L203 410a151.02 151.02 0 01-19.1-73.4c0-40.6 15.7-78.5 44.4-107.2C257.1 200.7 295 185 335.6 185a153 153 0 0171.4 17.9l22.4 11.8 24.8-4.8c18.9-3.6 38.4-5.5 58-5.5 41.4 0 81.3 8.1 119 24 36.5 15.4 69.1 37.4 97.2 65.5 28.2 28.1 50.2 60.8 65.6 97.2 16 37.7 24 77.6 24 119 0 18.4-1.7 37-5.1 55.5l-4.7 25.5 12.6 22.6c12.6 22.5 19.2 48 19.2 73.7 0 40.7-15.7 78.5-44.4 107.2zM583.4 466.2L495 446.6c-33.6-7.7-72.3-17.8-72.3-49.5s27.1-53.9 76.1-53.9c98.7 0 89.7 67.8 138.7 67.8 25.8 0 48.4-15.2 48.4-41.2 0-60.8-97.4-106.5-180-106.5-89.7 0-185.2 38.1-185.2 139.5 0 48.8 17.4 100.8 113.6 124.9l119.4 29.8c36.1 8.9 45.2 29.2 45.2 47.6 0 30.5-30.3 60.3-85.2 60.3-107.2 0-92.3-82.5-149.7-82.5-25.8 0-44.5 17.8-44.5 43.1 0 49.4 60 115.4 194.2 115.4 127.7 0 191-61.5 191-144 0-53.1-24.5-109.6-121.3-131.2z"}}]},name:"skype",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},86405:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M409.4 128c-42.4 0-76.7 34.4-76.7 76.8 0 20.3 8.1 39.9 22.4 54.3a76.74 76.74 0 0054.3 22.5h76.7v-76.8c0-42.3-34.3-76.7-76.7-76.8zm0 204.8H204.7c-42.4 0-76.7 34.4-76.7 76.8s34.4 76.8 76.7 76.8h204.6c42.4 0 76.7-34.4 76.7-76.8.1-42.4-34.3-76.8-76.6-76.8zM614 486.4c42.4 0 76.8-34.4 76.7-76.8V204.8c0-42.4-34.3-76.8-76.7-76.8-42.4 0-76.7 34.4-76.7 76.8v204.8c0 42.5 34.3 76.8 76.7 76.8zm281.4-76.8c0-42.4-34.4-76.8-76.7-76.8S742 367.2 742 409.6v76.8h76.7c42.3 0 76.7-34.4 76.7-76.8zm-76.8 128H614c-42.4 0-76.7 34.4-76.7 76.8 0 20.3 8.1 39.9 22.4 54.3a76.74 76.74 0 0054.3 22.5h204.6c42.4 0 76.7-34.4 76.7-76.8.1-42.4-34.3-76.7-76.7-76.8zM614 742.4h-76.7v76.8c0 42.4 34.4 76.8 76.7 76.8 42.4 0 76.8-34.4 76.7-76.8.1-42.4-34.3-76.7-76.7-76.8zM409.4 537.6c-42.4 0-76.7 34.4-76.7 76.8v204.8c0 42.4 34.4 76.8 76.7 76.8 42.4 0 76.8-34.4 76.7-76.8V614.4c0-20.3-8.1-39.9-22.4-54.3a76.92 76.92 0 00-54.3-22.5zM128 614.4c0 20.3 8.1 39.9 22.4 54.3a76.74 76.74 0 0054.3 22.5c42.4 0 76.8-34.4 76.7-76.8v-76.8h-76.7c-42.3 0-76.7 34.4-76.7 76.8z"}}]},name:"slack",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},25167:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zM529 311.4c0-27.8 22.5-50.4 50.3-50.4 27.8 0 50.3 22.6 50.3 50.4v134.4c0 27.8-22.5 50.4-50.3 50.4-27.8 0-50.3-22.6-50.3-50.4V311.4zM361.5 580.2c0 27.8-22.5 50.4-50.3 50.4a50.35 50.35 0 01-50.3-50.4c0-27.8 22.5-50.4 50.3-50.4h50.3v50.4zm134 134.4c0 27.8-22.5 50.4-50.3 50.4-27.8 0-50.3-22.6-50.3-50.4V580.2c0-27.8 22.5-50.4 50.3-50.4a50.35 50.35 0 0150.3 50.4v134.4zm-50.2-218.4h-134c-27.8 0-50.3-22.6-50.3-50.4 0-27.8 22.5-50.4 50.3-50.4h134c27.8 0 50.3 22.6 50.3 50.4-.1 27.9-22.6 50.4-50.3 50.4zm0-134.4c-13.3 0-26.1-5.3-35.6-14.8S395 324.8 395 311.4c0-27.8 22.5-50.4 50.3-50.4 27.8 0 50.3 22.6 50.3 50.4v50.4h-50.3zm134 403.2c-27.8 0-50.3-22.6-50.3-50.4v-50.4h50.3c27.8 0 50.3 22.6 50.3 50.4 0 27.8-22.5 50.4-50.3 50.4zm134-134.4h-134a50.35 50.35 0 01-50.3-50.4c0-27.8 22.5-50.4 50.3-50.4h134c27.8 0 50.3 22.6 50.3 50.4 0 27.8-22.5 50.4-50.3 50.4zm0-134.4H663v-50.4c0-27.8 22.5-50.4 50.3-50.4s50.3 22.6 50.3 50.4c0 27.8-22.5 50.4-50.3 50.4z"}}]},name:"slack-square",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},17836:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M938.2 508.4L787.3 389c-3-2.4-7.3-.2-7.3 3.6V478H636V184h204v128c0 2.2 1.8 4 4 4h60c2.2 0 4-1.8 4-4V144c0-15.5-12.5-28-28-28H596c-15.5 0-28 12.5-28 28v736c0 15.5 12.5 28 28 28h284c15.5 0 28-12.5 28-28V712c0-2.2-1.8-4-4-4h-60c-2.2 0-4 1.8-4 4v128H636V546h144v85.4c0 3.8 4.4 6 7.3 3.6l150.9-119.4a4.5 4.5 0 000-7.2zM428 116H144c-15.5 0-28 12.5-28 28v168c0 2.2 1.8 4 4 4h60c2.2 0 4-1.8 4-4V184h204v294H244v-85.4c0-3.8-4.3-6-7.3-3.6l-151 119.4a4.52 4.52 0 000 7.1l151 119.5c2.9 2.3 7.3.2 7.3-3.6V546h144v294H184V712c0-2.2-1.8-4-4-4h-60c-2.2 0-4 1.8-4 4v168c0 15.5 12.5 28 28 28h284c15.5 0 28-12.5 28-28V144c0-15.5-12.5-28-28-28z"}}]},name:"split-cells",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},1399:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zM315.7 291.5c27.3 0 49.5 22.1 49.5 49.4s-22.1 49.4-49.5 49.4a49.4 49.4 0 110-98.8zM366.9 578c-13.6 42.3-10.2 26.7-64.4 144.5l-78.5-49s87.7-79.8 105.6-116.2c19.2-38.4-21.1-58.9-21.1-58.9l-60.2-37.5 32.7-50.2c45.4 33.7 48.7 36.6 79.2 67.2 23.8 23.9 20.7 56.8 6.7 100.1zm427.2 55c-15.3 143.8-202.4 90.3-202.4 90.3l10.2-41.1 43.3 9.3c80 5 72.3-64.9 72.3-64.9V423c.6-77.3-72.6-85.4-204.2-38.3l30.6 8.3c-2.5 9-12.5 23.2-25.2 38.6h176v35.6h-99.1v44.5h98.7v35.7h-98.7V622c14.9-4.8 28.6-11.5 40.5-20.5l-8.7-32.5 46.5-14.4 38.8 94.9-57.3 23.9-10.2-37.8c-25.6 19.5-78.8 48-171.8 45.4-99.2 2.6-73.7-112-73.7-112l2.5-1.3H472c-.5 14.7-6.6 38.7 1.7 51.8 6.8 10.8 24.2 12.6 35.3 13.1 1.3.1 2.6.1 3.9.1v-85.3h-101v-35.7h101v-44.5H487c-22.7 24.1-43.5 44.1-43.5 44.1l-30.6-26.7c21.7-22.9 43.3-59.1 56.8-83.2-10.9 4.4-22 9.2-33.6 14.2-11.2 14.3-24.2 29-38.7 43.5.5.8-50-28.4-50-28.4 52.2-44.4 81.4-139.9 81.4-139.9l72.5 20.4s-5.9 14-18.4 35.6c290.3-82.3 307.4 50.5 307.4 50.5s19.1 91.8 3.8 235.7z"}}]},name:"taobao-circle",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},53422:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168.5 273.7a68.7 68.7 0 10137.4 0 68.7 68.7 0 10-137.4 0zm730 79.2s-23.7-184.4-426.9-70.1c17.3-30 25.6-49.5 25.6-49.5L396.4 205s-40.6 132.6-113 194.4c0 0 70.1 40.6 69.4 39.4 20.1-20.1 38.2-40.6 53.7-60.4 16.1-7 31.5-13.6 46.7-19.8-18.6 33.5-48.7 83.8-78.8 115.6l42.4 37s28.8-27.7 60.4-61.2h36v61.8H372.9v49.5h140.3v118.5c-1.7 0-3.6 0-5.4-.2-15.4-.7-39.5-3.3-49-18.2-11.5-18.1-3-51.5-2.4-71.9h-97l-3.4 1.8s-35.5 159.1 102.3 155.5c129.1 3.6 203-36 238.6-63.1l14.2 52.6 79.6-33.2-53.9-131.9-64.6 20.1 12.1 45.2c-16.6 12.4-35.6 21.7-56.2 28.4V561.3h137.1v-49.5H628.1V450h137.6v-49.5H521.3c17.6-21.4 31.5-41.1 35-53.6l-42.5-11.6c182.8-65.5 284.5-54.2 283.6 53.2v282.8s10.8 97.1-100.4 90.1l-60.2-12.9-14.2 57.1S882.5 880 903.7 680.2c21.3-200-5.2-327.3-5.2-327.3zm-707.4 18.3l-45.4 69.7 83.6 52.1s56 28.5 29.4 81.9C233.8 625.5 112 736.3 112 736.3l109 68.1c75.4-163.7 70.5-142 89.5-200.7 19.5-60.1 23.7-105.9-9.4-139.1-42.4-42.6-47-46.6-110-93.4z"}}]},name:"taobao",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},6490:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 160h-92v-40c0-4.4-3.6-8-8-8H256c-4.4 0-8 3.6-8 8v40h-92a44 44 0 00-44 44v148c0 81.7 60 149.6 138.2 162C265.7 630.2 359 721.7 476 734.5v105.2H280c-17.7 0-32 14.3-32 32V904c0 4.4 3.6 8 8 8h512c4.4 0 8-3.6 8-8v-32.3c0-17.7-14.3-32-32-32H548V734.5C665 721.7 758.3 630.2 773.8 514 852 501.6 912 433.7 912 352V204a44 44 0 00-44-44zM184 352V232h64v207.6a91.99 91.99 0 01-64-87.6zm520 128c0 49.1-19.1 95.4-53.9 130.1-34.8 34.8-81 53.9-130.1 53.9h-16c-49.1 0-95.4-19.1-130.1-53.9-34.8-34.8-53.9-81-53.9-130.1V184h384v296zm136-128c0 41-26.9 75.8-64 87.6V232h64v120z"}}]},name:"trophy",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},87104:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 254.3c-30.6 13.2-63.9 22.7-98.2 26.4a170.1 170.1 0 0075-94 336.64 336.64 0 01-108.2 41.2A170.1 170.1 0 00672 174c-94.5 0-170.5 76.6-170.5 170.6 0 13.2 1.6 26.4 4.2 39.1-141.5-7.4-267.7-75-351.6-178.5a169.32 169.32 0 00-23.2 86.1c0 59.2 30.1 111.4 76 142.1a172 172 0 01-77.1-21.7v2.1c0 82.9 58.6 151.6 136.7 167.4a180.6 180.6 0 01-44.9 5.8c-11.1 0-21.6-1.1-32.2-2.6C211 652 273.9 701.1 348.8 702.7c-58.6 45.9-132 72.9-211.7 72.9-14.3 0-27.5-.5-41.2-2.1C171.5 822 261.2 850 357.8 850 671.4 850 843 590.2 843 364.7c0-7.4 0-14.8-.5-22.2 33.2-24.3 62.3-54.4 85.5-88.2z"}}]},name:"twitter",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},83853:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},18406:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M690.1 377.4c5.9 0 11.8.2 17.6.5-24.4-128.7-158.3-227.1-319.9-227.1C209 150.8 64 271.4 64 420.2c0 81.1 43.6 154.2 111.9 203.6a21.5 21.5 0 019.1 17.6c0 2.4-.5 4.6-1.1 6.9-5.5 20.3-14.2 52.8-14.6 54.3-.7 2.6-1.7 5.2-1.7 7.9 0 5.9 4.8 10.8 10.8 10.8 2.3 0 4.2-.9 6.2-2l70.9-40.9c5.3-3.1 11-5 17.2-5 3.2 0 6.4.5 9.5 1.4 33.1 9.5 68.8 14.8 105.7 14.8 6 0 11.9-.1 17.8-.4-7.1-21-10.9-43.1-10.9-66 0-135.8 132.2-245.8 295.3-245.8zm-194.3-86.5c23.8 0 43.2 19.3 43.2 43.1s-19.3 43.1-43.2 43.1c-23.8 0-43.2-19.3-43.2-43.1s19.4-43.1 43.2-43.1zm-215.9 86.2c-23.8 0-43.2-19.3-43.2-43.1s19.3-43.1 43.2-43.1 43.2 19.3 43.2 43.1-19.4 43.1-43.2 43.1zm586.8 415.6c56.9-41.2 93.2-102 93.2-169.7 0-124-120.8-224.5-269.9-224.5-149 0-269.9 100.5-269.9 224.5S540.9 847.5 690 847.5c30.8 0 60.6-4.4 88.1-12.3 2.6-.8 5.2-1.2 7.9-1.2 5.2 0 9.9 1.6 14.3 4.1l59.1 34c1.7 1 3.3 1.7 5.2 1.7a9 9 0 006.4-2.6 9 9 0 002.6-6.4c0-2.2-.9-4.4-1.4-6.6-.3-1.2-7.6-28.3-12.2-45.3-.5-1.9-.9-3.8-.9-5.7.1-5.9 3.1-11.2 7.6-14.5zM600.2 587.2c-19.9 0-36-16.1-36-35.9 0-19.8 16.1-35.9 36-35.9s36 16.1 36 35.9c0 19.8-16.2 35.9-36 35.9zm179.9 0c-19.9 0-36-16.1-36-35.9 0-19.8 16.1-35.9 36-35.9s36 16.1 36 35.9a36.08 36.08 0 01-36 35.9z"}}]},name:"wechat",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},75846:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-44.4 672C353.1 736 236 680.4 236 588.9c0-47.8 30.2-103.1 82.3-155.3 69.5-69.6 150.6-101.4 181.1-70.8 13.5 13.5 14.8 36.8 6.1 64.6-4.5 14 13.1 6.3 13.1 6.3 56.2-23.6 105.2-25 123.1.7 9.6 13.7 8.6 32.8-.2 55.1-4.1 10.2 1.3 11.8 9 14.1 31.7 9.8 66.9 33.6 66.9 75.5.2 69.5-99.7 156.9-249.8 156.9zm207.3-290.8a34.9 34.9 0 00-7.2-34.1 34.68 34.68 0 00-33.1-10.7 18.24 18.24 0 01-7.6-35.7c24.1-5.1 50.1 2.3 67.7 21.9 17.7 19.6 22.4 46.3 14.9 69.8a18.13 18.13 0 01-22.9 11.7 18.18 18.18 0 01-11.8-22.9zm106 34.3s0 .1 0 0a21.1 21.1 0 01-26.6 13.7 21.19 21.19 0 01-13.6-26.7c11-34.2 4-73.2-21.7-101.8a104.04 104.04 0 00-98.9-32.1 21.14 21.14 0 01-25.1-16.3 21.07 21.07 0 0116.2-25.1c49.4-10.5 102.8 4.8 139.1 45.1 36.3 40.2 46.1 95.1 30.6 143.2zm-334.5 6.1c-91.4 9-160.7 65.1-154.7 125.2 5.9 60.1 84.8 101.5 176.2 92.5 91.4-9.1 160.7-65.1 154.7-125.3-5.9-60.1-84.8-101.5-176.2-92.4zm80.2 141.7c-18.7 42.3-72.3 64.8-117.8 50.1-43.9-14.2-62.5-57.7-43.3-96.8 18.9-38.4 68-60.1 111.5-48.8 45 11.7 68 54.2 49.6 95.5zm-93-32.2c-14.2-5.9-32.4.2-41.2 13.9-8.8 13.8-4.7 30.2 9.3 36.6 14.3 6.5 33.2.3 42-13.8 8.8-14.3 4.2-30.6-10.1-36.7zm34.9-14.5c-5.4-2.2-12.2.5-15.4 5.8-3.1 5.4-1.4 11.5 4.1 13.8 5.5 2.3 12.6-.3 15.8-5.8 3-5.6 1-11.8-4.5-13.8z"}}]},name:"weibo-circle",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},790:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M457.3 543c-68.1-17.7-145 16.2-174.6 76.2-30.1 61.2-1 129.1 67.8 151.3 71.2 23 155.2-12.2 184.4-78.3 28.7-64.6-7.2-131-77.6-149.2zm-52 156.2c-13.8 22.1-43.5 31.7-65.8 21.6-22-10-28.5-35.7-14.6-57.2 13.7-21.4 42.3-31 64.4-21.7 22.4 9.5 29.6 35 16 57.3zm45.5-58.5c-5 8.6-16.1 12.7-24.7 9.1-8.5-3.5-11.2-13.1-6.4-21.5 5-8.4 15.6-12.4 24.1-9.1 8.7 3.2 11.8 12.9 7 21.5zm334.5-197.2c15 4.8 31-3.4 35.9-18.3 11.8-36.6 4.4-78.4-23.2-109a111.39 111.39 0 00-106-34.3 28.45 28.45 0 00-21.9 33.8 28.39 28.39 0 0033.8 21.8c18.4-3.9 38.3 1.8 51.9 16.7a54.2 54.2 0 0111.3 53.3 28.45 28.45 0 0018.2 36zm99.8-206c-56.7-62.9-140.4-86.9-217.7-70.5a32.98 32.98 0 00-25.4 39.3 33.12 33.12 0 0039.3 25.5c55-11.7 114.4 5.4 154.8 50.1 40.3 44.7 51.2 105.7 34 159.1-5.6 17.4 3.9 36 21.3 41.7 17.4 5.6 36-3.9 41.6-21.2v-.1c24.1-75.4 8.9-161.1-47.9-223.9zM729 499c-12.2-3.6-20.5-6.1-14.1-22.1 13.8-34.7 15.2-64.7.3-86-28-40.1-104.8-37.9-192.8-1.1 0 0-27.6 12.1-20.6-9.8 13.5-43.5 11.5-79.9-9.6-101-47.7-47.8-174.6 1.8-283.5 110.6C127.3 471.1 80 557.5 80 632.2 80 775.1 263.2 862 442.5 862c235 0 391.3-136.5 391.3-245 0-65.5-55.2-102.6-104.8-118zM443 810.8c-143 14.1-266.5-50.5-275.8-144.5-9.3-93.9 99.2-181.5 242.2-195.6 143-14.2 266.5 50.5 275.8 144.4C694.4 709 586 796.6 443 810.8z"}}]},name:"weibo",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},90580:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M433.6 595.1c-14.2-5.9-32.4.2-41.2 13.9-8.8 13.8-4.7 30.2 9.3 36.6 14.3 6.5 33.2.3 42-13.8 8.8-14.3 4.2-30.6-10.1-36.7zM880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zM467.6 736C353.1 736 236 680.4 236 588.9c0-47.8 30.2-103.1 82.3-155.3 69.5-69.6 150.6-101.4 181.1-70.8 13.5 13.5 14.8 36.8 6.1 64.6-4.5 14 13.1 6.3 13.1 6.3 56.2-23.6 105.2-25 123.1.7 9.6 13.7 8.6 32.8-.2 55.1-4.1 10.2 1.3 11.8 9 14.1 31.7 9.8 66.9 33.6 66.9 75.5.2 69.5-99.7 156.9-249.8 156.9zm207.3-290.8a34.9 34.9 0 00-7.2-34.1 34.68 34.68 0 00-33.1-10.7 18.24 18.24 0 01-7.6-35.7c24.1-5.1 50.1 2.3 67.7 21.9 17.7 19.6 22.4 46.3 14.9 69.8a18.13 18.13 0 01-22.9 11.7 18.18 18.18 0 01-11.8-22.9zm106 34.3s0 .1 0 0a21.1 21.1 0 01-26.6 13.7 21.19 21.19 0 01-13.6-26.7c11-34.2 4-73.2-21.7-101.8a104.04 104.04 0 00-98.9-32.1 21.14 21.14 0 01-25.1-16.3 21.07 21.07 0 0116.2-25.1c49.4-10.5 102.8 4.8 139.1 45.1 36.3 40.2 46.1 95.1 30.6 143.2zm-334.5 6.1c-91.4 9-160.7 65.1-154.7 125.2 5.9 60.1 84.8 101.5 176.2 92.5 91.4-9.1 160.7-65.1 154.7-125.3-5.9-60.1-84.8-101.5-176.2-92.4zm80.2 141.7c-18.7 42.3-72.3 64.8-117.8 50.1-43.9-14.2-62.5-57.7-43.3-96.8 18.9-38.4 68-60.1 111.5-48.8 45 11.7 68 54.2 49.6 95.5zm-58.1-46.7c-5.4-2.2-12.2.5-15.4 5.8-3.1 5.4-1.4 11.5 4.1 13.8 5.5 2.3 12.6-.3 15.8-5.8 3-5.6 1-11.8-4.5-13.8z"}}]},name:"weibo-square",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},2266:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M120.1 770.6L443 823.2V543.8H120.1v226.8zm63.4-163.5h196.2v141.6l-196.2-31.9V607.1zm340.3 226.5l382 62.2v-352h-382v289.8zm63.4-226.5h255.3v214.4l-255.3-41.6V607.1zm-63.4-415.7v288.8h382V128.1l-382 63.3zm318.7 225.5H587.3V245l255.3-42.3v214.2zm-722.4 63.3H443V201.9l-322.9 53.5v224.8zM183.5 309l196.2-32.5v140.4H183.5V309z"}}]},name:"windows",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},76517:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M960 509.2c0-2.2 0-4.7-.1-7.6-.1-8.1-.3-17.2-.5-26.9-.8-27.9-2.2-55.7-4.4-81.9-3-36.1-7.4-66.2-13.4-88.8a139.52 139.52 0 00-98.3-98.5c-28.3-7.6-83.7-12.3-161.7-15.2-37.1-1.4-76.8-2.3-116.5-2.8-13.9-.2-26.8-.3-38.4-.4h-29.4c-11.6.1-24.5.2-38.4.4-39.7.5-79.4 1.4-116.5 2.8-78 3-133.5 7.7-161.7 15.2A139.35 139.35 0 0082.4 304C76.3 326.6 72 356.7 69 392.8c-2.2 26.2-3.6 54-4.4 81.9-.3 9.7-.4 18.8-.5 26.9 0 2.9-.1 5.4-.1 7.6v5.6c0 2.2 0 4.7.1 7.6.1 8.1.3 17.2.5 26.9.8 27.9 2.2 55.7 4.4 81.9 3 36.1 7.4 66.2 13.4 88.8 12.8 47.9 50.4 85.7 98.3 98.5 28.2 7.6 83.7 12.3 161.7 15.2 37.1 1.4 76.8 2.3 116.5 2.8 13.9.2 26.8.3 38.4.4h29.4c11.6-.1 24.5-.2 38.4-.4 39.7-.5 79.4-1.4 116.5-2.8 78-3 133.5-7.7 161.7-15.2 47.9-12.8 85.5-50.5 98.3-98.5 6.1-22.6 10.4-52.7 13.4-88.8 2.2-26.2 3.6-54 4.4-81.9.3-9.7.4-18.8.5-26.9 0-2.9.1-5.4.1-7.6v-5.6zm-72 5.2c0 2.1 0 4.4-.1 7.1-.1 7.8-.3 16.4-.5 25.7-.7 26.6-2.1 53.2-4.2 77.9-2.7 32.2-6.5 58.6-11.2 76.3-6.2 23.1-24.4 41.4-47.4 47.5-21 5.6-73.9 10.1-145.8 12.8-36.4 1.4-75.6 2.3-114.7 2.8-13.7.2-26.4.3-37.8.3h-28.6l-37.8-.3c-39.1-.5-78.2-1.4-114.7-2.8-71.9-2.8-124.9-7.2-145.8-12.8-23-6.2-41.2-24.4-47.4-47.5-4.7-17.7-8.5-44.1-11.2-76.3-2.1-24.7-3.4-51.3-4.2-77.9-.3-9.3-.4-18-.5-25.7 0-2.7-.1-5.1-.1-7.1v-4.8c0-2.1 0-4.4.1-7.1.1-7.8.3-16.4.5-25.7.7-26.6 2.1-53.2 4.2-77.9 2.7-32.2 6.5-58.6 11.2-76.3 6.2-23.1 24.4-41.4 47.4-47.5 21-5.6 73.9-10.1 145.8-12.8 36.4-1.4 75.6-2.3 114.7-2.8 13.7-.2 26.4-.3 37.8-.3h28.6l37.8.3c39.1.5 78.2 1.4 114.7 2.8 71.9 2.8 124.9 7.2 145.8 12.8 23 6.2 41.2 24.4 47.4 47.5 4.7 17.7 8.5 44.1 11.2 76.3 2.1 24.7 3.4 51.3 4.2 77.9.3 9.3.4 18 .5 25.7 0 2.7.1 5.1.1 7.1v4.8zM423 646l232-135-232-133z"}}]},name:"youtube",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},41546:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M564.7 230.1V803h60l25.2 71.4L756.3 803h131.5V230.1H564.7zm247.7 497h-59.9l-75.1 50.4-17.8-50.4h-18V308.3h170.7v418.8zM526.1 486.9H393.3c2.1-44.9 4.3-104.3 6.6-172.9h130.9l-.1-8.1c0-.6-.2-14.7-2.3-29.1-2.1-15-6.6-34.9-21-34.9H287.8c4.4-20.6 15.7-69.7 29.4-93.8l6.4-11.2-12.9-.7c-.8 0-19.6-.9-41.4 10.6-35.7 19-51.7 56.4-58.7 84.4-18.4 73.1-44.6 123.9-55.7 145.6-3.3 6.4-5.3 10.2-6.2 12.8-1.8 4.9-.8 9.8 2.8 13 10.5 9.5 38.2-2.9 38.5-3 .6-.3 1.3-.6 2.2-1 13.9-6.3 55.1-25 69.8-84.5h56.7c.7 32.2 3.1 138.4 2.9 172.9h-141l-2.1 1.5c-23.1 16.9-30.5 63.2-30.8 65.2l-1.4 9.2h167c-12.3 78.3-26.5 113.4-34 127.4-3.7 7-7.3 14-10.7 20.8-21.3 42.2-43.4 85.8-126.3 153.6-3.6 2.8-7 8-4.8 13.7 2.4 6.3 9.3 9.1 24.6 9.1 5.4 0 11.8-.3 19.4-1 49.9-4.4 100.8-18 135.1-87.6 17-35.1 31.7-71.7 43.9-108.9L497 850l5-12c.8-1.9 19-46.3 5.1-95.9l-.5-1.8-108.1-123-22 16.6c6.4-26.1 10.6-49.9 12.5-71.1h158.7v-8c0-40.1-18.5-63.9-19.2-64.9l-2.4-3z"}}]},name:"zhihu",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},59445:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-in",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},47826:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(58168),i=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-out",theme:"outlined"};var a=n(87064),s=function(t,e){return i.createElement(a.A,(0,r.A)({},t,{ref:e,icon:o}))};const u=i.forwardRef(s)},10168:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(t,e){var n=t.nodes,r=t.edges,i=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach((function(t,e){o[t.id]=e;i.push([])})),r&&r.forEach((function(t){var n=t.source,r=t.target,a=o[n],s=o[r];!a&&0!==a||!s&&0!==s||(i[a][s]=1,e||(i[s][a]=1))})),i};e.default=n},87302:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"GADDIAsync",{enumerable:!0,get:function(){return r.GADDIAsync}}),Object.defineProperty(e,"connectedComponentAsync",{enumerable:!0,get:function(){return r.connectedComponentAsync}}),e.default=void 0,Object.defineProperty(e,"detectAllCyclesAsync",{enumerable:!0,get:function(){return r.detectAllCyclesAsync}}),Object.defineProperty(e,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return r.detectAllDirectedCycleAsync}}),Object.defineProperty(e,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return r.detectAllUndirectedCycleAsync}}),Object.defineProperty(e,"detectCycleAsync",{enumerable:!0,get:function(){return r.detectCycleAsync}}),e.detectDirectedCycleAsync=void 0,Object.defineProperty(e,"dijkstraAsync",{enumerable:!0,get:function(){return r.dijkstraAsync}}),Object.defineProperty(e,"findAllPathAsync",{enumerable:!0,get:function(){return r.findAllPathAsync}}),Object.defineProperty(e,"findShortestPathAsync",{enumerable:!0,get:function(){return r.findShortestPathAsync}}),Object.defineProperty(e,"floydWarshallAsync",{enumerable:!0,get:function(){return r.floydWarshallAsync}}),Object.defineProperty(e,"getAdjMatrixAsync",{enumerable:!0,get:function(){return r.getAdjMatrixAsync}}),Object.defineProperty(e,"getDegreeAsync",{enumerable:!0,get:function(){return r.getDegreeAsync}}),Object.defineProperty(e,"getInDegreeAsync",{enumerable:!0,get:function(){return r.getInDegreeAsync}}),Object.defineProperty(e,"getNeighborsAsync",{enumerable:!0,get:function(){return r.getNeighborsAsync}}),Object.defineProperty(e,"getOutDegreeAsync",{enumerable:!0,get:function(){return r.getOutDegreeAsync}}),Object.defineProperty(e,"labelPropagationAsync",{enumerable:!0,get:function(){return r.labelPropagationAsync}}),Object.defineProperty(e,"louvainAsync",{enumerable:!0,get:function(){return r.louvainAsync}}),Object.defineProperty(e,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return r.minimumSpanningTreeAsync}}),Object.defineProperty(e,"pageRankAsync",{enumerable:!0,get:function(){return r.pageRankAsync}});var r=n(37436),i=r.detectCycleAsync;e.detectDirectedCycleAsync=i;var o={getAdjMatrixAsync:r.getAdjMatrixAsync,connectedComponentAsync:r.connectedComponentAsync,getDegreeAsync:r.getDegreeAsync,getInDegreeAsync:r.getInDegreeAsync,getOutDegreeAsync:r.getOutDegreeAsync,detectCycleAsync:r.detectCycleAsync,detectDirectedCycleAsync:i,detectAllCyclesAsync:r.detectAllCyclesAsync,detectAllDirectedCycleAsync:r.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:r.detectAllUndirectedCycleAsync,dijkstraAsync:r.dijkstraAsync,findAllPathAsync:r.findAllPathAsync,findShortestPathAsync:r.findShortestPathAsync,floydWarshallAsync:r.floydWarshallAsync,labelPropagationAsync:r.labelPropagationAsync,louvainAsync:r.louvainAsync,minimumSpanningTreeAsync:r.minimumSpanningTreeAsync,pageRankAsync:r.pageRankAsync,getNeighborsAsync:r.getNeighborsAsync,GADDIAsync:r.GADDIAsync};e.default=o},48441:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n(52014))&&r.__esModule?r:{default:r},o=n(34170);var a=function(t,e,n,r){void 0===r&&(r=!0);var a=function(t){void 0===t&&(t={});var e,n=t,r=function(){},i=(e={},function(t){var n=t.next;return!e[n]&&(e[n]=!0,!0)});return n.allowTraversal=t.allowTraversal||i,n.enter=t.enter||r,n.leave=t.leave||r,n}(n),s=new i.default,u=t.edges,l=void 0===u?[]:u;s.enqueue(e);for(var c="",h=function(){var t=s.dequeue();a.enter({current:t,previous:c}),(0,o.getNeighbors)(t,l,r?"target":void 0).forEach((function(e){a.allowTraversal({previous:c,current:t,next:e})&&s.enqueue(e)})),a.leave({current:t,previous:c}),c=t};!s.isEmpty();)h()};e.default=a},6277:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return e?o(t):i(t)},e.detectStrongConnectComponents=e.detectConnectedComponents=void 0;var r=n(34170),i=function(t){for(var e=t.nodes,n=void 0===e?[]:e,i=t.edges,o=void 0===i?[]:i,a=[],s={},u=[],l=function t(e){u.push(e),s[e.id]=!0;for(var i=(0,r.getNeighbors)(e.id,o),a=function(e){var r=i[e];if(!s[r]){var o=n.filter((function(t){return t.id===r}));o.length>0&&t(o[0])}},l=0;l<i.length;++l)a(l)},c=0;c<n.length;c++){var h=n[c];if(!s[h.id]){l(h);for(var d=[];u.length>0;)d.push(u.pop());a.push(d)}}return a};e.detectConnectedComponents=i;var o=function(t){for(var e=t.nodes,n=void 0===e?[]:e,i=t.edges,o=void 0===i?[]:i,a=[],s={},u={},l={},c=[],h=0,d=function t(e){u[e.id]=h,l[e.id]=h,h+=1,a.push(e),s[e.id]=!0;for(var i=(0,r.getNeighbors)(e.id,o,"target").filter((function(t){return n.map((function(t){return t.id})).indexOf(t)>-1})),d=function(r){var o=i[r];if(u[o]||0===u[o])s[o]&&(l[e.id]=Math.min(l[e.id],u[o]));else{var a=n.filter((function(t){return t.id===o}));a.length>0&&t(a[0]),l[e.id]=Math.min(l[e.id],l[o])}},f=0;f<i.length;f++)d(f);if(l[e.id]===u[e.id]){for(var p=[];a.length>0;){var m=a.pop();if(s[m.id]=!1,p.push(m),m===e)break}p.length>0&&c.push(p)}},f=0,p=n;f<p.length;f++){var m=p[f];u[m.id]||0===u[m.id]||d(m)}return c};e.detectStrongConnectComponents=o},97465:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.secondReg=e.dateReg=void 0;e.secondReg=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/;e.dateReg=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/},42378:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getOutDegree=e.getInDegree=e.default=void 0;var n=function(t){var e={},n=t.nodes,r=void 0===n?[]:n,i=t.edges,o=void 0===i?[]:i;return r.forEach((function(t){e[t.id]={degree:0,inDegree:0,outDegree:0}})),o.forEach((function(t){e[t.source].degree++,e[t.source].outDegree++,e[t.target].degree++,e[t.target].inDegree++})),e},r=n;e.default=r;e.getInDegree=function(t,e){return n(t)[e]?n(t)[e].inDegree:0};e.getOutDegree=function(t,e){return n(t)[e]?n(t)[e].outDegree:0}},91042:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.detectAllUndirectedCycle=e.detectAllDirectedCycle=e.detectAllCycles=e.default=void 0;var i,o=(i=n(50115))&&i.__esModule?i:{default:i},a=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var n=u(e);if(n&&n.has(t))return n.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=t[a]}i.default=t,n&&n.set(t,i);return i}(n(6277)),s=n(34170);function u(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(u=function(t){return t?n:e})(t)}var l=function(t,e,n){var r,i;void 0===n&&(n=!0);for(var o=[],u=0,l=(0,a.default)(t,!1);u<l.length;u++){var c=l[u];if(c.length)for(var h=c[0],d=h.id,f=[h],p=((r={})[d]=h,r),m=((i={})[d]=new Set,i);f.length>0;)for(var g=f.pop(),v=g.id,y=(0,s.getNeighbors)(v,t.edges),b=function(r){var i,a=y[r],s=t.nodes.find((function(t){return t.id===a}));if(a===v)o.push(((i={})[a]=g,i));else if(a in m){if(!m[v].has(s)){for(var u=!0,l=[s,g],c=p[v];m[a].size&&!m[a].has(c)&&(l.push(c),c!==p[c.id]);)c=p[c.id];if(l.push(c),e&&n?(u=!1,l.findIndex((function(t){return e.indexOf(t.id)>-1}))>-1&&(u=!0)):e&&!n&&l.findIndex((function(t){return e.indexOf(t.id)>-1}))>-1&&(u=!1),u){for(var h={},d=1;d<l.length;d+=1)h[l[d-1].id]=l[d];l.length&&(h[l[l.length-1].id]=l[0]),o.push(h)}m[a].add(g)}}else p[a]=g,f.push(s),m[a]=new Set([g])},x=0;x<y.length;x+=1)b(x)}return o};e.detectAllUndirectedCycle=l;var c=function(t,e,n){void 0===n&&(n=!0);for(var r=[],i=new Set,o=[],u=[],l={},c={},h=function t(a,s,c){var h=!1;if(e&&!1===n&&e.indexOf(a.id)>-1)return h;r.push(a),i.add(a);for(var d=c[a.id],f=0;f<d.length;f+=1){if((g=l[d[f]])===s){for(var p={},m=1;m<r.length;m+=1)p[r[m-1].id]=r[m];r.length&&(p[r[r.length-1].id]=r[0]),u.push(p),h=!0}else i.has(g)||t(g,s,c)&&(h=!0)}if(h)!function(t){for(var e=[t];e.length>0;){var n=e.pop();i.has(n)&&(i.delete(n),o[n.id].forEach((function(t){e.push(t)})),o[n.id].clear())}}(a);else for(f=0;f<d.length;f+=1){var g=l[d[f]];o[g.id].has(a)||o[g.id].add(a)}return r.pop(),h},d=t.nodes,f=void 0===d?[]:d,p=0;p<f.length;p+=1){var m=f[p],g=m.id;c[g]=p,l[p]=m}if(e&&n){var v=function(t){var n=e[t];c[f[t].id]=c[n],c[n]=0,l[0]=f.find((function(t){return t.id===n})),l[c[f[t].id]]=f[t]};for(p=0;p<e.length;p++)v(p)}for(var y=function(r){for(var i,o,a=1/0,l=0;l<r.length;l+=1)for(var h=r[l],d=0;d<h.length;d++){var f=c[h[d].id];f<a&&(a=f,o=l)}var p=r[o],m=[];for(l=0;l<p.length;l+=1){var g=p[l];m[g.id]=[];for(var v=0,y=(0,s.getNeighbors)(g.id,t.edges,"target").filter((function(t){return p.map((function(t){return t.id})).indexOf(t)>-1}));v<y.length;v++){var b=y[v];b!==g.id||!1===n&&e.indexOf(g.id)>-1?m[g.id].push(c[b]):u.push(((i={})[g.id]=g,i))}}return{component:p,adjList:m,minIdx:a}},b=0;b<f.length;){var x=f.filter((function(t){return c[t.id]>=b})),w=(0,a.detectStrongConnectComponents)({nodes:x,edges:t.edges}).filter((function(t){return t.length>1}));if(0===w.length)break;var _=y(w),S=_.minIdx,E=_.adjList,A=_.component;if(!(A.length>1))break;A.forEach((function(t){o[t.id]=new Set}));var M=l[S];if(e&&n&&-1===e.indexOf(M.id))return u;h(M,M,E),b=S+1}return u};e.detectAllDirectedCycle=c;e.detectAllCycles=function(t,e,n,r){return void 0===r&&(r=!0),e?c(t,n,r):l(t,n,r)};var h=function(t){var e=null,n=t.nodes,r={},i={},a={},s={};(void 0===n?[]:n).forEach((function(t){i[t.id]=t}));for(var u={enter:function(t){var n=t.current,o=t.previous;if(a[n]){e={};for(var s=n,u=o;u!==n;)e[s]=u,s=u,u=r[u];e[s]=u}else a[n]=n,delete i[n],r[n]=o},leave:function(t){var e=t.current;s[e]=e,delete a[e]},allowTraversal:function(t){var n=t.next;return!e&&!s[n]}};Object.keys(i).length;){var l=Object.keys(i)[0];(0,o.default)(t,l,u)}return e};e.default=h},50115:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n,r){void 0===r&&(r=!0);i(t,e,"",function(t){void 0===t&&(t={});var e=t,n=function(){},r=(i={},function(t){var e=t.next;return!i[e]&&(i[e]=!0,!0)});var i;return e.allowTraversal=t.allowTraversal||r,e.enter=t.enter||n,e.leave=t.leave||n,e}(n),r)};var r=n(34170);function i(t,e,n,o,a){void 0===a&&(a=!0),o.enter({current:e,previous:n});var s=t.edges,u=void 0===s?[]:s;(0,r.getNeighbors)(e,u,a?"target":void 0).forEach((function(r){o.allowTraversal({previous:n,current:e,next:r})&&i(t,r,e,o,a)})),o.leave({current:e,previous:n})}},7304:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(31635),i=n(24425),o=n(34170),a=function(t,e,n,r){var i=t.nodes,a=void 0===i?[]:i,u=t.edges,l=void 0===u?[]:u,c=[],h={},d={},f={};a.forEach((function(t,n){var r=t.id;c.push(r),d[r]=1/0,r===e&&(d[r]=0)}));for(var p=a.length,m=function(t){var e=function(t,e,n){for(var r,i=1/0,o=0;o<e.length;o++){var a=e[o].id;!n[a]&&t[a]<=i&&(i=t[a],r=e[o])}return r}(d,a,h),i=e.id;if(h[i]=!0,d[i]===1/0)return"continue";(n?(0,o.getOutEdgesNodeId)(i,l):(0,o.getEdgesByNodeId)(i,l)).forEach((function(t){var n=t.target,o=t.source,a=n===i?o:n,s=r&&t[r]?t[r]:1;d[a]>d[e.id]+s?(d[a]=d[e.id]+s,f[a]=[e.id]):d[a]===d[e.id]+s&&f[a].push(e.id)}))},g=0;g<p;g++)m();f[e]=[e];var v={};for(var y in d)d[y]!==1/0&&s(e,y,f,v);var b={};for(var y in v)b[y]=v[y][0];return{length:d,path:b,allPath:v}};function s(t,e,n,o){if(t===e)return[t];if(o[e])return o[e];for(var a=[],u=0,l=n[e];u<l.length;u++){var c=s(t,l[u],n,o);if(!c)return;for(var h=0,d=c;h<d.length;h++){var f=d[h];(0,i.isArray)(f)?a.push((0,r.__spreadArray)((0,r.__spreadArray)([],f,!0),[e],!1)):a.push([f,e])}}return o[e]=a,o[e]}e.default=a},38785:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.findShortestPath=e.findAllPath=void 0;var r,i=(r=n(7304))&&r.__esModule?r:{default:r},o=n(34170);e.findShortestPath=function(t,e,n,r,o){var a=(0,i.default)(t,e,r,o),s=a.length,u=a.path,l=a.allPath;return{length:s[n],path:u[n],allPath:l[n]}};e.findAllPath=function(t,e,n,r){var i;if(e===n)return[[e]];var a=t.edges,s=void 0===a?[]:a,u=[e],l=((i={})[e]=!0,i),c=[],h=[],d=r?(0,o.getNeighbors)(e,s,"target"):(0,o.getNeighbors)(e,s);for(c.push(d);u.length>0&&c.length>0;){var f=c[c.length-1];if(f.length){var p=f.shift();if(p&&(u.push(p),l[p]=!0,d=r?(0,o.getNeighbors)(p,s,"target"):(0,o.getNeighbors)(p,s),c.push(d.filter((function(t){return!l[t]})))),u[u.length-1]===n){var m=u.map((function(t){return t}));h.push(m);g=u.pop();l[g]=!1,c.pop()}}else{var g=u.pop();l[g]=!1,c.pop()}}return h}},91510:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n(10168))&&r.__esModule?r:{default:r};var o=function(t,e){for(var n=(0,i.default)(t,e),r=[],o=n.length,a=0;a<o;a+=1){r[a]=[];for(var s=0;s<o;s+=1)a===s?r[a][s]=0:0!==n[a][s]&&n[a][s]?r[a][s]=n[a][s]:r[a][s]=1/0}for(var u=0;u<o;u+=1)for(a=0;a<o;a+=1)for(s=0;s<o;s+=1)r[a][s]>r[a][u]+r[u][s]&&(r[a][s]=r[a][u]+r[u][s]);return r};e.default=o},69611:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(24425),i=n(42541),o=function(){function t(t,e,n,r,o){this.fromNode=t,this.toNode=e,this.nodeEdgeNodeLabel={nodeLabel1:n||i.VACANT_NODE_LABEL,edgeLabel:r||i.VACANT_EDGE_LABEL,nodeLabel2:o||i.VACANT_NODE_LABEL}}return t.prototype.equalTo=function(t){return this.fromNode===t.formNode&&this.toNode===t.toNode&&this.nodeEdgeNodeLabel===t.nodeEdgeNodeLabel},t.prototype.notEqualTo=function(t){return!this.equalTo(t)},t}(),a=function(){function t(){this.rmpath=[],this.dfsEdgeList=[]}return t.prototype.equalTo=function(t){var e=this.dfsEdgeList.length;if(e!==t.length)return!1;for(var n=0;n<e;n++)if(this.dfsEdgeList[n]!==t[n])return!1;return!0},t.prototype.notEqualTo=function(t){return!this.equalTo(t)},t.prototype.pushBack=function(t,e,n,r,i){return this.dfsEdgeList.push(new o(t,e,n,r,i)),this.dfsEdgeList},t.prototype.toGraph=function(t,e){void 0===t&&(t=i.VACANT_GRAPH_ID),void 0===e&&(e=!1);var n=new i.Graph(t,!0,e);return this.dfsEdgeList.forEach((function(t){var e=t.fromNode,r=t.toNode,o=t.nodeEdgeNodeLabel,a=o.nodeLabel1,s=o.edgeLabel,u=o.nodeLabel2;a!==i.VACANT_NODE_LABEL&&n.addNode(e,a),u!==i.VACANT_NODE_LABEL&&n.addNode(r,u),a!==i.VACANT_NODE_LABEL&&u!==a&&n.addEdge(void 0,e,r,s)})),n},t.prototype.buildRmpath=function(){this.rmpath=[];for(var t=void 0,e=this.dfsEdgeList.length-1;e>=0;e--){var n=this.dfsEdgeList[e],r=n.fromNode,i=n.toNode;r<i&&(void 0===t||i===t)&&(this.rmpath.push(e),t=r)}return this.rmpath},t.prototype.getNodeNum=function(){var t={};return this.dfsEdgeList.forEach((function(e){t[e.fromNode]||(t[e.fromNode]=!0),t[e.toNode]||(t[e.toNode]=!0)})),Object.keys(t).length},t}(),s=function(){function t(t){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],t){for(;t;){var e=t.edge;this.edges.push(e),this.nodesUsed[e.from]=1,this.nodesUsed[e.to]=1,this.edgesUsed[e.id]=1,t=t.preNode}this.edges=this.edges.reverse()}}return t.prototype.hasNode=function(t){return 1===this.nodesUsed[t.id]},t.prototype.hasEdge=function(t){return 1===this.edgesUsed[t.id]},t}(),u=function(){function t(t){var e=t.graphs,n=t.minSupport,r=void 0===n?2:n,i=t.minNodeNum,o=void 0===i?1:i,s=t.maxNodeNum,u=void 0===s?4:s,l=t.top,c=void 0===l?10:l,h=t.directed,d=void 0!==h&&h,f=t.verbose,p=void 0!==f&&f;this.graphs=e,this.dfsCode=new a,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=r,this.top=c,this.directed=d,this.counter=0,this.maxNodeNum=u,this.minNodeNum=o,this.verbose=p,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return t.prototype.findForwardRootEdges=function(t,e){var n=this,r=[],i=t.nodeMap;return e.edges.forEach((function(t){(n.directed||e.label<=i[t.to].label)&&r.push(t)})),r},t.prototype.findBackwardEdge=function(t,e,n,r){if(!this.directed&&e===n)return null;for(var i=t.nodeMap,o=i[n.to].edges,a=o.length,s=0;s<a;s++){var u=o[s];if(!r.hasEdge(u)&&u.to===e.from)if(this.directed){if(i[e.from].label<i[n.to].label||i[e.from].label===i[n.to].label&&e.label<=u.label)return u}else if(e.label<u.label||e.label===u.label&&i[e.to].label<=i[n.to].label)return u}return null},t.prototype.findForwardPureEdges=function(t,e,n,r){for(var i=[],o=e.to,a=t.nodeMap[o].edges,s=a.length,u=0;u<s;u++){var l=a[u],c=t.nodeMap[l.to];n<=c.label&&!r.hasNode(c)&&i.push(l)}return i},t.prototype.findForwardRmpathEdges=function(t,e,n,r){for(var i=[],o=t.nodeMap,a=o[e.to].label,s=o[e.from].edges,u=s.length,l=0;l<u;l++){var c=s[l],h=o[c.to].label;e.to===c.to||n>h||r.hasNode(o[c.to])||(e.label<c.label||e.label===c.label&&a<=h)&&i.push(c)}return i},t.prototype.getSupport=function(t){var e={};return t.forEach((function(t){e[t.graphId]||(e[t.graphId]=!0)})),Object.keys(e).length},t.prototype.findMinLabel=function(t){var e=void 0;return Object.keys(t).forEach((function(n){var r=t[n],i=r.nodeLabel1,o=r.edgeLabel,a=r.nodeLabel2;e?(i<e.nodeLabel1||i===e.nodeLabel1&&o<e.edgeLabel||i===e.nodeLabel1&&o===e.edgeLabel&&a<e.nodeLabel2)&&(e={nodeLabel1:i,edgeLabel:o,nodeLabel2:a}):e={nodeLabel1:i,edgeLabel:o,nodeLabel2:a}})),e},t.prototype.isMin=function(){var t=this,e=this.dfsCode;if(this.verbose&&console.log("isMin checking",e),1===e.dfsEdgeList.length)return!0;var n=this.directed,r=e.toGraph(i.VACANT_GRAPH_ID,n),u=r.nodeMap,l=new a,c={};r.nodes.forEach((function(e){t.findForwardRootEdges(r,e).forEach((function(t){var n=u[t.to],i="".concat(e.label,"-").concat(t.label,"-").concat(n.label);c[i]||(c[i]={projected:[],nodeLabel1:e.label,edgeLabel:t.label,nodeLabel2:n.label});var o={graphId:r.id,edge:t,preNode:null};c[i].projected.push(o)}))}));var h=this.findMinLabel(c);if(h){l.dfsEdgeList.push(new o(0,1,h.nodeLabel1,h.edgeLabel,h.nodeLabel2));var d="".concat(h.nodeLabel1,"-").concat(h.edgeLabel,"-").concat(h.nodeLabel2);return function a(c){for(var h=l.buildRmpath(),d=l.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,f=l.dfsEdgeList[h[0]].toNode,p={},m=!1,g=0,v=n?-1:0,y=function(e){if(m)return"break";c.forEach((function(n){var i=new s(n),o=t.findBackwardEdge(r,i.edges[h[e]],i.edges[h[0]],i);o&&(p[o.label]||(p[o.label]={projected:[],edgeLabel:o.label}),p[o.label].projected.push({graphId:r.id,edge:p,preNode:n}),g=l.dfsEdgeList[h[e]].fromNode,m=!0)}))},b=h.length-1;b>v;b--){if("break"===y(b))break}if(m){var x=t.findMinLabel(p);l.dfsEdgeList.push(new o(f,g,i.VACANT_NODE_LABEL,x.edgeLabel,i.VACANT_NODE_LABEL));var w=l.dfsEdgeList.length-1;return t.dfsCode.dfsEdgeList[w]===l.dfsEdgeList[w]&&a(p[x.edgeLabel].projected)}var _={};m=!1;var S=0;c.forEach((function(e){var n=new s(e),i=t.findForwardPureEdges(r,n.edges[h[0]],d,n);i.length>0&&(m=!0,S=f,i.forEach((function(t){var n="".concat(t.label,"-").concat(u[t.to].label);_[n]||(_[n]={projected:[],edgeLabel:t.label,nodeLabel2:u[t.to].label}),_[n].projected.push({graphId:r.id,edge:t,preNode:e})})))}));var E=h.length,A=function(e){if(m)return"break";var n=h[e];c.forEach((function(e){var i=new s(e),o=t.findForwardRmpathEdges(r,i.edges[n],d,i);o.length>0&&(m=!0,S=l.dfsEdgeList[n].fromNode,o.forEach((function(t){var n="".concat(t.label,"-").concat(u[t.to].label);_[n]||(_[n]={projected:[],edgeLabel:t.label,nodeLabel2:u[t.to].label}),_[n].projected.push({graphId:r.id,edge:t,preNode:e})})))}))};for(b=0;b<E;b++){if("break"===A(b))break}if(!m)return!0;var M=t.findMinLabel(_);l.dfsEdgeList.push(new o(S,f+1,i.VACANT_NODE_LABEL,M.edgeLabel,M.nodeLabel2));var C=l.dfsEdgeList.length-1;return e.dfsEdgeList[C]===l.dfsEdgeList[C]&&a(_["".concat(M.edgeLabel,"-").concat(M.nodeLabel2)].projected)}(c[d].projected)}},t.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var t=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,r.clone)(t))}},t.prototype.subGraphMining=function(t){var e=this;if(!(this.getSupport(t)<this.minSupport)&&this.isMin()){this.report();var n=this.dfsCode.getNodeNum(),r=this.dfsCode.buildRmpath(),a=this.dfsCode.dfsEdgeList[r[0]].toNode,u=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,l={},c={};t.forEach((function(t){for(var i=e.graphs[t.graphId],o=i.nodeMap,h=new s(t),d=r.length-1;d>=0;d--){var f=e.findBackwardEdge(i,h.edges[r[d]],h.edges[r[0]],h);if(f){var p="".concat(e.dfsCode.dfsEdgeList[r[d]].fromNode,"-").concat(f.label);c[p]||(c[p]={projected:[],toNodeId:e.dfsCode.dfsEdgeList[r[d]].fromNode,edgeLabel:f.label}),c[p].projected.push({graphId:t.graphId,edge:f,preNode:t})}}if(!(n>=e.maxNodeNum)){e.findForwardPureEdges(i,h.edges[r[0]],u,h).forEach((function(e){var n="".concat(a,"-").concat(e.label,"-").concat(o[e.to].label);l[n]||(l[n]={projected:[],fromNodeId:a,edgeLabel:e.label,nodeLabel2:o[e.to].label}),l[n].projected.push({graphId:t.graphId,edge:e,preNode:t})}));var m=function(n){e.findForwardRmpathEdges(i,h.edges[r[n]],u,h).forEach((function(i){var a="".concat(e.dfsCode.dfsEdgeList[r[n]].fromNode,"-").concat(i.label,"-").concat(o[i.to].label);l[a]||(l[a]={projected:[],fromNodeId:e.dfsCode.dfsEdgeList[r[n]].fromNode,edgeLabel:i.label,nodeLabel2:o[i.to].label}),l[a].projected.push({graphId:t.graphId,edge:i,preNode:t})}))};for(d=0;d<r.length;d++)m(d)}})),Object.keys(c).forEach((function(t){var n=c[t],r=n.toNodeId,i=n.edgeLabel;e.dfsCode.dfsEdgeList.push(new o(a,r,"-1",i,"-1")),e.subGraphMining(c[t].projected),e.dfsCode.dfsEdgeList.pop()})),Object.keys(l).forEach((function(t){var n=l[t],r=n.fromNodeId,s=n.edgeLabel,u=n.nodeLabel2;e.dfsCode.dfsEdgeList.push(new o(r,a+1,i.VACANT_NODE_LABEL,s,u)),e.subGraphMining(l[t].projected),e.dfsCode.dfsEdgeList.pop()}))}},t.prototype.generate1EdgeFrequentSubGraphs=function(){var t=this.graphs,e=this.directed,n=this.minSupport,r=this.frequentSize1Subgraphs,i={},o={},a={},s={};return Object.keys(t).forEach((function(n){var r=t[n],u=r.nodeMap;r.nodes.forEach((function(t,r){var l=t.label,c="".concat(n,"-").concat(l);if(!a[c]){var h=i[l]||0;h++,i[l]=h}a[c]={graphKey:n,label:l},t.edges.forEach((function(t){var r=l,i=u[t.to].label;if(!e&&r>i){var a=i;i=r,r=a}var c=t.label,h="".concat(n,"-").concat(r,"-").concat(c,"-").concat(i),d="".concat(r,"-").concat(c,"-").concat(i);if(!o[d]){var f=o[d]||0;f++,o[d]=f}s[h]={graphId:n,nodeLabel1:r,edgeLabel:c,nodeLabel2:i}}))}))})),Object.keys(i).forEach((function(t){if(!(i[t]<n)){var e={nodes:[],edges:[]};e.nodes.push({id:"0",label:t}),r.push(e)}})),r},t.prototype.run=function(){var t=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var e=this.graphs,n=(this.directed,{});Object.keys(e).forEach((function(r){var i=e[r],o=i.nodeMap;i.nodes.forEach((function(e){t.findForwardRootEdges(i,e).forEach((function(t){var i=o[t.to],a="".concat(e.label,"-").concat(t.label,"-").concat(i.label);n[a]||(n[a]={projected:[],nodeLabel1:e.label,edgeLabel:t.label,nodeLabel2:i.label});var s={graphId:r,edge:t,preNode:null};n[a].projected.push(s)}))}))})),Object.keys(n).forEach((function(e){var r=n[e],i=r.projected,a=r.nodeLabel1,s=r.edgeLabel,u=r.nodeLabel2;t.dfsCode.dfsEdgeList.push(new o(0,1,a,s,u)),t.subGraphMining(i),t.dfsCode.dfsEdgeList.pop()}))}},t}(),l="cluster",c=function(t){var e=t.graphs,n=t.directed,r=void 0!==n&&n,o=t.nodeLabelProp,a=void 0===o?l:o,s=t.edgeLabelProp,c=void 0===s?l:s,h=function(t,e,n,r){var o={};return Object.keys(t).forEach((function(a,s){var u=t[a],l=new i.Graph(s,!0,e),c={};u.nodes.forEach((function(t,e){l.addNode(e,t[n]),c[t.id]=e})),u.edges.forEach((function(t,e){var n=c[t.source],i=c[t.target];l.addEdge(-1,n,i,t[r])})),l&&l.getNodeNum()&&(o[l.id]=l)})),o}(e,r,a,c),d=t.minSupport,f=t.maxNodeNum,p=t.minNodeNum,m=t.verbose,g=t.top,v=new u({graphs:h,minSupport:d,maxNodeNum:f,minNodeNum:p,top:g,verbose:m,directed:r});v.run();var y=function(t,e,n){var r=[];return t.forEach((function(t){var i={nodes:[],edges:[]};t.nodes.forEach((function(t){var n;i.nodes.push(((n={id:"".concat(t.id)})[e]=t.label,n))})),t.edges.forEach((function(t){var e;i.edges.push(((e={source:"".concat(t.from),target:"".concat(t.to)})[n]=t.label,e))})),r.push(i)})),r}(v.frequentSubgraphs,a,c);return y};e.default=c},42541:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VACANT_NODE_LABEL=e.VACANT_NODE_ID=e.VACANT_GRAPH_ID=e.VACANT_EDGE_LABEL=e.VACANT_EDGE_ID=e.Node=e.Graph=e.Edge=e.AUTO_EDGE_ID=void 0;e.VACANT_EDGE_ID=-1;e.VACANT_NODE_ID=-1;e.VACANT_EDGE_LABEL="-1";e.VACANT_NODE_LABEL="-1";e.VACANT_GRAPH_ID=-1;e.AUTO_EDGE_ID="-1";var n=function(t,e,n,r){void 0===t&&(t=-1),void 0===e&&(e=-1),void 0===n&&(n=-1),void 0===r&&(r="-1"),this.id=t,this.from=e,this.to=n,this.label=r};e.Edge=n;var r=function(){function t(t,e){void 0===t&&(t=-1),void 0===e&&(e="-1"),this.id=t,this.label=e,this.edges=[],this.edgeMap={}}return t.prototype.addEdge=function(t){this.edges.push(t),this.edgeMap[t.id]=t},t}();e.Node=r;var i=function(){function t(t,e,n){void 0===t&&(t=-1),void 0===e&&(e=!0),void 0===n&&(n=!1),this.id=t,this.edgeIdAutoIncrease=e,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}return t.prototype.getNodeNum=function(){return this.nodes.length},t.prototype.addNode=function(t,e){if(!this.nodeMap[t]){var n=new r(t,e);this.nodes.push(n),this.nodeMap[t]=n,this.nodeLabelMap[e]||(this.nodeLabelMap[e]=[]),this.nodeLabelMap[e].push(t)}},t.prototype.addEdge=function(t,e,r,i){if((this.edgeIdAutoIncrease||void 0===t)&&(t=this.counter++),!(this.nodeMap[e]&&this.nodeMap[r]&&this.nodeMap[r].edgeMap[t])){var o=new n(t,e,r,i);if(this.edges.push(o),this.edgeMap[t]=o,this.nodeMap[e].addEdge(o),this.edgeLabelMap[i]||(this.edgeLabelMap[i]=[]),this.edgeLabelMap[i].push(o),!this.directed){var a=new n(t,r,e,i);this.nodeMap[r].addEdge(a),this.edgeLabelMap[i].push(a)}}},t}();e.Graph=i},51147:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(31635),i=u(n(91510)),o=u(n(69611)),a=u(n(7304)),s=n(34170);function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t,e,n,r){void 0===n&&(n="cluster"),void 0===r&&(r=2);var i=[],o=t.nodes;return e.forEach((function(t,e){i.push(c(o,t,e,n,r))})),i},c=function(t,e,n,r,i){var o=[n],a=[],s={};return e.forEach((function(e,u){if(e<=i&&n!==u){o.push(u),a.push(t[u]);var l=t[u][r];s[l]?(s[l].count++,s[l].dists.push(e)):s[l]={count:1,dists:[e]}}})),Object.keys(s).forEach((function(t){s[t].dists=s[t].dists.sort((function(t,e){return t-e}))})),{nodeIdx:n,nodeId:t[n].id,nodeIdxs:o,neighbors:a,neighborNum:o.length-1,nodeLabelCountMap:s}},h=function(t,e,n,r){var i=n.nodes;return r||(r={}),Object.keys(t).forEach((function(o){var a,s;if(!r||!r[o]){r[o]={nodes:[],edges:[]};var u=t[o],l=null===(a=e[u.start])||void 0===a?void 0:a.nodeIdxs,c=null===(s=e[u.end])||void 0===s?void 0:s.nodeIdxs;if(l&&c){var h=new Set(c),d=l.filter((function(t){return h.has(t)}));if(d&&d.length){for(var f={},p=d.length,m=0;m<p;m++){var g=i[d[m]];r[o].nodes.push(g),f[g.id]=!0}n.edges.forEach((function(t){f[t.source]&&f[t.target]&&r[o].edges.push(t)}))}}}})),r},d=function(t,e,n,r){var i,o,a={};t.nodes.forEach((function(t){a[t.id]=t}));var s=0;return!(null===(i=null==e?void 0:e.edges)||void 0===i?void 0:i.length)||(null===(o=null==e?void 0:e.nodes)||void 0===o?void 0:o.length)<2?0:(t.edges.forEach((function(t){var i=a[t.source][n],o=a[t.target][n],u=null==e?void 0:e.nodes[0][n],l=null==e?void 0:e.nodes[1][n],c=null==e?void 0:e.edges[0][r];t[r]===c&&(i===u&&o===l||i===l&&o===u)&&s++})),s)},f=function(t,e){var n={},r={};return t.forEach((function(t,i){n[t.id]={idx:i,node:t,degree:0,inDegree:0,outDegree:0};var o=t[e];r[o]||(r[o]=[]),r[o].push(t)})),{nodeMap:n,nodeLabelMap:r}},p=function(t,e,n){var r={},i={};return t.forEach((function(t,o){r["".concat(s.uniqueId)]={idx:o,edge:t};var a=t[e];i[a]||(i[a]=[]),i[a].push(t);var u=n[t.source];u&&(u.degree++,u.outDegree++);var l=n[t.target];l&&(l.degree++,l.inDegree++)})),{edgeMap:r,edgeLabelMap:i}},m=function(t,e,n){var r=e.length,i={};return e.forEach((function(e,o){for(var a=n?0:o+1,s=t[o].id,u=a;u<r;u++)if(o!==u){var l=t[u].id,c=e[u];i["".concat(s,"-").concat(l)]=c,n||(i["".concat(l,"-").concat(s)]=c)}})),i},g=function(t,e,n,r,i,o,a,s,u,l,c){var f,p="".concat(e.id,"-").concat(n.id);if(l&&l[p])return l[p];var m=c?c[p]:void 0;if(!m){var g=((f={})[p]={start:r[e.id].idx,end:r[n.id].idx,distance:i},f);m=(c=h(g,o,t,c))[p]}return d(m,a,s,u)},v=function(t,e,n,r){var i,o,a,s=null===(i=t[e])||void 0===i?void 0:i.degree,u=null===(o=t[e])||void 0===o?void 0:o.inDegree,l=null===(a=t[e])||void 0===a?void 0:a.outDegree;return void 0===t[e]&&(s=1/0,u=1/0,l=1/0,r[e].forEach((function(t){var e=n[t.id].degree;s>e&&(s=e);var r=n[t.id].inDegree;u>r&&(u=r);var i=n[t.id].outDegree;l>i&&(l=i)})),t[e]={degree:s,inDegree:u,outDegree:l}),{minPatternNodeLabelDegree:s,minPatternNodeLabelInDegree:u,minPatternNodeLabelOutDegree:l}},y=function(t,e,n,s,u,y,b){var x;if(void 0===n&&(n=!1),void 0===y&&(y="cluster"),void 0===b&&(b="cluster"),t&&t.nodes){var w=t.nodes.length;if(w){var _=(0,i.default)(t,n),S=(0,i.default)(e,n),E=m(t.nodes,_,n),A=m(e.nodes,S,n),M=f(t.nodes,y),C=M.nodeMap,T=M.nodeLabelMap,k=f(e.nodes,y),I=k.nodeMap,N=k.nodeLabelMap;p(t.edges,b,C);var P=p(e.edges,b,I).edgeLabelMap,O=[];null==S||S.forEach((function(t){O=O.concat(t)})),u||(u=Math.max.apply(Math,(0,r.__spreadArray)((0,r.__spreadArray)([],O,!1),[2],!1))),s||(s=u);var L=l(t,_,y,s),R=l(e,S,y,s),D=function(t,e,n,r,i){var o=Math.ceil(n/e),a={},s=0;return r.forEach((function(t,r){for(var u=0,l=0,c=t.nodeIdxs,h=t.neighborNum-1;u<o;){for(var d=c[1+Math.floor(Math.random()*h)],f=0;(a["".concat(r,"-").concat(d)]||a["".concat(d,"-").concat(r)])&&(d=Math.floor(Math.random()*e),!(++f>2*e)););if(f<2*e&&(a["".concat(r,"-").concat(d)]={start:r,end:d,distance:i[r][d]},u++,++s>=n))return a;if(++l>2*e)break}u<o&&(o=(o+(o-u))/(e-r-1))})),a}(0,w,Math.min(100,w*(w-1)/2),L,_),z=h(D,L,t),F={graphs:z,nodeLabelProp:y,edgeLabelProp:b,minSupport:1,minNodeNum:1,maxNodeNum:4,directed:n},B=(0,o.default)(F).slice(0,10),U=B.length,j=[];B.forEach((function(t,e){j[e]={},Object.keys(z).forEach((function(n){var r=z[n],i=d(r,t,y,b);j[e][n]=i}))}));var V=function(t,e,n){for(var r=1/0,i=0,o=function(e){var n=t[e],o=Object.keys(n).sort((function(t,e){return n[t]-n[e]})),a=[];o.forEach((function(t,e){a[e%10]||(a[e%10]={graphs:[],totalCount:0,aveCount:0}),a[e%10].graphs.push(t),a[e%10].totalCount+=n[t]}));var s=0,u=[];a.forEach((function(t){var e=t.totalCount/t.graphs.length;t.aveCount=e,u.push(e);var r=0,i=t.length;t.graphs.forEach((function(e,i){var o=n[e];t.graphs.forEach((function(t,e){i!==e&&(r+=Math.abs(o-n[t]))}))})),s+=r/=i*(i-1)/2})),s/=a.length;var l=0;u.forEach((function(t,e){u.forEach((function(n,r){e!==r&&(l+=Math.abs(t-n))})),l/=u.length*(u.length-1)/2}));var c=l-s;r<c&&(r=c,i=e)},a=0;a<e;a++)o(a);return{structure:n[i],structureCountMap:t[i]}}(j,U,B),H=V.structure,G=V.structureCountMap,W=e.nodes[0],X=[],Y=null===(x=e.nodes[0])||void 0===x?void 0:x[y],q=-1/0;e.nodes.forEach((function(t){var e=t[y],n=T[e];(null==n?void 0:n.length)>q&&(q=n.length,X=n,Y=e,W=t)}));var $={},K={},Z={},Q={},J={},tt={};Object.keys(N).forEach((function(r,i){J[r]=[],n&&(tt[r]=[]);var o=-1/0,a=N[r],s={};a.forEach((function(t){var e=A["".concat(W.id,"-").concat(t.id)];if(e&&J[r].push(e),o<e&&(o=e),s["".concat(W.id,"-").concat(t.id)]={start:0,end:I[t.id].idx,distance:e},n){var i=A["".concat(t.id,"-").concat(W.id)];i&&tt[r].push(i)}})),J[r]=J[r].sort((function(t,e){return t-e})),n&&(tt[r]=tt[r].sort((function(t,e){return t-e}))),K=h(s,R,e,K);var u=[];if(Object.keys(s).forEach((function(t){if(Z[t])u.push(Z[t]);else{var e=K[t];Z[t]=d(e,H,y,b),u.push(Z[t])}})),u=u.sort((function(t,e){return e-t})),Q["".concat(W.id,"-").concat(r)]=u,r!==Y)for(var l=function(e){var n=X[e],i=L[C[n.id].idx],o=i.nodeLabelCountMap[r],a=N[r].length;if(!o||o.count<a)return X.splice(e,1),"continue";for(var s=!1,l=0;l<a;l++)if(o.dists[l]>J[r][l]){s=!0;break}if(s)return X.splice(e,1),"continue";var c={};i.neighbors.forEach((function(t){var e=E["".concat(n.id,"-").concat(t.id)];c["".concat(n.id,"-").concat(t.id)]={start:C[n.id].idx,end:C[t.id].idx,distance:e}})),z=h(c,L,t,z);var f=[];Object.keys(c).forEach((function(t){if(G[t])f.push(G[t]);else{var e=z[t];G[t]=d(e,H,y,b),f.push(G[t])}})),f=f.sort((function(t,e){return e-t}));var p=!1;for(l=0;l<a;l++)if(f[l]<u[l]){p=!0;break}return p?(X.splice(e,1),"continue"):void 0},c=((null==X?void 0:X.length)||0)-1;c>=0;c--)l(c)}));var et=[];null==X||X.forEach((function(r){for(var i=C[r.id].idx,o=c(t.nodes,_[i],i,y,u).neighbors,a=!1,s=o.length-1;s>=0;s--){if(o.length+1<e.nodes.length)return void(a=!0);var l=o[s],h=l[y];if(N[h]&&N[h].length)if(J[h]&&J[h].length){var d="".concat(r.id,"-").concat(l.id),f=E[d],p=J[h].length-1;if(f>J[h][p])o.splice(s,1);else{if(n){var m="".concat(l.id,"-").concat(r.id),x=E[m];if(p=tt[h].length-1,x>tt[h][p]){o.splice(s,1);continue}}var w=G[d]?G[d]:g(t,r,l,C,f,L,H,y,b,G,z),S="".concat(W.id,"-").concat(h);if(w<Q[S][Q[S].length-1])o.splice(s,1);else{var A=v($,h,I,N),M=A.minPatternNodeLabelDegree;A.minPatternNodeLabelInDegree,A.minPatternNodeLabelOutDegree;C[l.id].degree<M&&o.splice(s,1)}}}else o.splice(s,1);else o.splice(s,1)}a||et.push({nodes:[r].concat(o)})}));var nt=(0,a.default)(e,W.id,!1).length,rt={};n?(Object.keys(nt).forEach((function(t){var e=I[t].node[y];rt[e]?rt[e].push(nt[t]):rt[e]=[nt[t]]})),Object.keys(rt).forEach((function(t){rt[t].sort((function(t,e){return t-e}))}))):rt=J;for(var it=function(r){var i=et[r],o=i.nodes[0],s={},u={};i.nodes.forEach((function(t,e){u[t.id]={idx:e,node:t,degree:0,inDegree:0,outDegree:0};var n=t[y];s[n]?s[n]++:s[n]=1}));var l=[],c={};t.edges.forEach((function(t){u[t.source]&&u[t.target]&&(l.push(t),c[t[b]]?c[t[b]]++:c[t[b]]=1,u[t.source].degree++,u[t.target].degree++,u[t.source].outDegree++,u[t.target].inDegree++)}));for(var h=Object.keys(P).length,d=!1,f=0;f<h;f++){var p=Object.keys(P)[f];if(!c[p]||c[p]<P[p].length){d=!0;break}}if(d)return et.splice(r,1),"continue";var m=l.length;if(m<e.edges.length)return et.splice(r,1),"break";var g=!1,x=function(t){var e=l[t],r=e[b],i=P[r];if(!i||!i.length)return c[r]--,i&&c[r]<i.length?(g=!0,"break"):(l.splice(t,1),u[e.source].degree--,u[e.target].degree--,u[e.source].outDegree--,u[e.target].inDegree--,"continue");var o=u[e.source].node[y],a=u[e.target].node[y],s=!1;return i.forEach((function(t){var e=I[t.source].node,r=I[t.target].node;e[y]===o&&r[y]===a&&(s=!0),n||e[y]!==a||r[y]!==o||(s=!0)})),s?void 0:(c[r]--,i&&c[r]<i.length?(g=!0,"break"):(l.splice(t,1),u[e.source].degree--,u[e.target].degree--,u[e.source].outDegree--,u[e.target].inDegree--,"continue"))};for(f=m-1;f>=0;f--){if("break"===x(f))break}if(g)return et.splice(r,1),"continue";i.edges=l;var w=(0,a.default)(i,i.nodes[0].id,!1).length;if(Object.keys(w).reverse().forEach((function(t){if(t!==i.nodes[0].id&&!g){if(w[t]===1/0){var e=u[t].node[y];if(s[e]--,s[e]<N[e].length)return void(g=!0);var n=i.nodes.indexOf(u[t].node);return i.nodes.splice(n,1),void(u[t]=void 0)}var r=C[t].node[y];if(!rt[r]||!rt[r].length||w[t]>rt[r][rt[r].length-1]){e=u[t].node[y];if(s[e]--,s[e]<N[e].length)return void(g=!0);n=i.nodes.indexOf(u[t].node);i.nodes.splice(n,1),u[t]=void 0}}})),g)return et.splice(r,1),"continue";for(var _=!0,S=0;_&&!g;){if(_=!1,n?u[o.id].degree<I[W.id].degree||u[o.id].inDegree<I[W.id].inDegree||u[o.id].outDegree<I[W.id].outDegree:u[o.id].degree<I[W.id].degree){g=!0;break}if(s[o[y]]<N[o[y]].length){g=!0;break}for(var E=i.nodes.length-1;E>=0;E--){var A=i.nodes[E],M=u[A.id].degree,T=u[A.id].inDegree,k=u[A.id].outDegree,O=A[y],L=v($,O,I,N),R=L.minPatternNodeLabelDegree,D=L.minPatternNodeLabelInDegree,z=L.minPatternNodeLabelOutDegree;if(n?M<R||T<D||k<z:M<R){if(s[A[y]]--,s[A[y]]<N[A[y]].length){g=!0;break}i.nodes.splice(E,1),u[A.id]=void 0,_=!0}}if(g||!_&&0!==S)break;for(var F=(m=l.length)-1;F>=0;F--){var B=l[F];if(!u[B.source]||!u[B.target]){l.splice(F,1);var U=B[b];if(c[U]--,u[B.source]&&(u[B.source].degree--,u[B.source].outDegree--),u[B.target]&&(u[B.target].degree--,u[B.target].inDegree--),P[U]&&c[U]<P[U].length){g=!0;break}_=!0}}S++}return g||g||i.nodes.length<e.nodes.length||l.length<e.edges.length?(et.splice(r,1),"continue"):void 0},ot=et.length-1;ot>=0;ot--){if("break"===it(ot))break}var at=et.length,st=function(t){var e=et[t],n={};e.edges.forEach((function(t){var e="".concat(t.source,"-").concat(t.target,"-").concat(t.label);n[e]?n[e]++:n[e]=1}));for(var r=function(t){var e=et[t],r={};e.edges.forEach((function(t){var e="".concat(t.source,"-").concat(t.target,"-").concat(t.label);r[e]?r[e]++:r[e]=1}));var i=!0;Object.keys(r).length!==Object.keys(n).length?i=!1:Object.keys(n).forEach((function(t){r[t]!==n[t]&&(i=!1)})),i&&et.splice(t,1)},i=at-1;i>t;i--)r(i);at=et.length};for(ot=0;ot<=at-1;ot++)st(ot);return et}}};e.default=y},5321:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n(10168))&&r.__esModule?r:{default:r},o=n(34170);var a=function(t,e,n,r){void 0===e&&(e=!1),void 0===n&&(n="weight"),void 0===r&&(r=1e3);var a=t.nodes,s=void 0===a?[]:a,u=t.edges,l=void 0===u?[]:u,c={},h={};s.forEach((function(t,e){var n=(0,o.uniqueId)();t.clusterId=n,c[n]={id:n,nodes:[t]},h[t.id]={node:t,idx:e}}));var d=(0,i.default)(t,e),f=[],p={};d.forEach((function(t,e){var n=0,r=s[e].id;p[r]={},t.forEach((function(t,e){if(t){n+=t;var i=s[e].id;p[r][i]=t}})),f.push(n)}));for(var m=0,g=function(){var t=!1;if(s.forEach((function(e){var n={};Object.keys(p[e.id]).forEach((function(t){var r=p[e.id][t],i=h[t].node.clusterId;n[i]||(n[i]=0),n[i]+=r}));var r=-1/0,i=[];if(Object.keys(n).forEach((function(t){r<n[t]?(r=n[t],i=[t]):r===n[t]&&i.push(t)})),1!==i.length||i[0]!==e.clusterId){var o=i.indexOf(e.clusterId);if(o>=0&&i.splice(o,1),i&&i.length){t=!0;var a=c[e.clusterId],s=a.nodes.indexOf(e);a.nodes.splice(s,1);var u=Math.floor(Math.random()*i.length),l=c[i[u]];l.nodes.push(e),e.clusterId=l.id}}})),!t)return"break";m++};m<r;){if("break"===g())break}Object.keys(c).forEach((function(t){var e=c[t];e.nodes&&e.nodes.length||delete c[t]}));var v=[],y={};l.forEach((function(t){var e=t.source,r=t.target,i=t[n]||1,o=h[e].node.clusterId,a=h[r].node.clusterId,s="".concat(o,"---").concat(a);if(y[s])y[s].weight+=i,y[s].count++;else{var u={source:o,target:a,weight:i,count:1};y[s]=u,v.push(u)}}));var b=[];return Object.keys(c).forEach((function(t){b.push(c[t])})),{clusters:b,clusterEdges:v}};e.default=a},71678:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(24425),i=u(n(10168)),o=u(n(16831)),a=n(7668),s=n(83767);function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t,e,n,r){for(var i=e.length,o=2*r,a=0,s=0;s<i;s++)for(var u=t[s].clusterId,l=0;l<i;l++){if(u===t[l].clusterId)a+=(e[s][l]||0)-(n[s]||0)*(n[l]||0)/o}return a*=1/o},c=function(t,e){void 0===t&&(t=[]);for(var n=t.length,r=new o.default([]),i=0;i<n;i++)r=r.add(new o.default(e[i]));var a=r.avg(n);a.normalize();var s=0;for(i=0;i<n;i++){s+=(l=new o.default(e[i])).squareEuclideanDistance(a)}var u=[];t.forEach((function(){u.push([])}));for(i=0;i<n;i++){var l=new o.default(e[i]);t[i].clusterInertial=0;for(var c=0;c<n;c++)if(i!==c){var h=new o.default(e[c]);u[i][c]=l.squareEuclideanDistance(h),t[i].clusterInertial+=u[i][c]}else u[i][c]=0}var d=0,f=2*n*s;for(i=0;i<n;i++){var p=t[i].clusterId;for(c=0;c<n;c++){var m=t[c].clusterId;if(i!==c&&p===m)d+=t[i].clusterInertial*t[c].clusterInertial/Math.pow(f,2)-u[i][c]/f}}return Number(d.toFixed(4))},h=function(t,e,n,o,u,h,d,f,p){void 0===e&&(e=!1),void 0===n&&(n="weight"),void 0===o&&(o=1e-4),void 0===u&&(u=!1),void 0===h&&(h=void 0),void 0===d&&(d=[]),void 0===f&&(f=["id"]),void 0===p&&(p=1);var m=t.nodes,g=void 0===m?[]:m,v=t.edges,y=void 0===v?[]:v,b=[];if(u){g.forEach((function(t,e){t.properties=t.properties||{},t.originIndex=e}));var x=[];g.every((function(t){return t.hasOwnProperty("nodeType")}))&&(x=Array.from(new Set(g.map((function(t){return t.nodeType})))),g.forEach((function(t){t.properties.nodeType=x.findIndex((function(e){return e===t.nodeType}))})));var w=(0,a.getAllProperties)(g,h);b=(0,s.oneHot)(w,d,f)}var _=1,S={},E={};g.forEach((function(t,e){var n=String(_++);t.clusterId=n,S[n]={id:n,nodes:[t]},E[t.id]={node:t,idx:e}}));var A=(0,i.default)(t,e),M=[],C={},T=0;A.forEach((function(t,e){var n=0,r=g[e].id;C[r]={},t.forEach((function(t,e){if(t){n+=t;var i=g[e].id;C[r][i]=t,T+=t}})),M.push(n)})),T/=2;for(var k=1/0,I=1/0,N=0,P=[],O={};;){k=u&&g.every((function(t){return t.hasOwnProperty("properties")}))?l(g,A,M,T)+c(g,b)*p:l(g,A,M,T),0===N&&(I=k,P=g,O=S);var L=k>0&&k>I&&k-I<o;if(k>I&&(P=g.map((function(t){return{node:t,clusterId:t.clusterId}})),O=(0,r.clone)(S),I=k),L||N>100)break;N++,Object.keys(S).forEach((function(t){var e=0;y.forEach((function(r){var i=r.source,o=r.target,a=E[i].node.clusterId,s=E[o].node.clusterId;(a===t&&s!==t||s===t&&a!==t)&&(e+=r[n]||1)})),S[t].sumTot=e})),g.forEach((function(t,e){var r,i=S[t.clusterId],o=0,a=M[e]/(2*T),s=0,l=i.nodes;l.forEach((function(t){var n=E[t.id].idx;s+=A[e][n]||0}));var h=s-i.sumTot*a,d=l.filter((function(e){return e.id!==t.id})),f=[];d.forEach((function(t,e){f[e]=b[t.originIndex]}));var m=c(d,b)*p,g=C[t.id];if(Object.keys(g).forEach((function(n){var i=E[n].node.clusterId;if(i!==t.clusterId){var s=S[i],l=s.nodes;if(l&&l.length){var d=0;l.forEach((function(t){var n=E[t.id].idx;d+=A[e][n]||0}));var f=d-s.sumTot*a,g=l.concat([t]),v=[];g.forEach((function(t,e){v[e]=b[t.originIndex]}));var y=c(g,b)*p,x=f-h;u&&(x=f+y-(h+m)),x>o&&(o=x,r=s)}}})),o>0){r.nodes.push(t);var v=t.clusterId;t.clusterId=r.id;var x=i.nodes.indexOf(t);i.nodes.splice(x,1);var w=0,_=0;y.forEach((function(t){var e=t.source,i=t.target,o=E[e].node.clusterId,a=E[i].node.clusterId;(o===r.id&&a!==r.id||a===r.id&&o!==r.id)&&(w+=t[n]||1),(o===v&&a!==v||a===v&&o!==v)&&(_+=t[n]||1)})),r.sumTot=w,i.sumTot=_}}))}var R={},D=0;Object.keys(O).forEach((function(t){var e=O[t];if(e.nodes&&e.nodes.length){var n=String(D+1);n!==t&&(e.id=n,e.nodes=e.nodes.map((function(t){return{id:t.id,clusterId:n}})),O[n]=e,R[t]=n,delete O[t],D++)}else delete O[t]})),P.forEach((function(t){var e=t.node,n=t.clusterId;e&&(e.clusterId=n,e.clusterId&&R[e.clusterId]&&(e.clusterId=R[e.clusterId]))}));var z=[],F={};y.forEach((function(t){var e=t.source,r=t.target,i=t[n]||1,o=E[e].node.clusterId,a=E[r].node.clusterId;if(o&&a){var s="".concat(o,"---").concat(a);if(F[s])F[s].weight+=i,F[s].count++;else{var u={source:o,target:a,weight:i,count:1};F[s]=u,z.push(u)}}}));var B=[];return Object.keys(O).forEach((function(t){B.push(O[t])})),{clusters:B,clusterEdges:z}};e.default=h},65518:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(n(46212)),i=a(n(42215)),o=n(34170);function a(t){return t&&t.__esModule?t:{default:t}}var s=function(t,e){var n=[],r=t.nodes,a=void 0===r?[]:r,s=t.edges,u=void 0===s?[]:s;if(0===a.length)return n;var l=a[0],c=new Set;c.add(l);var h=new i.default((function(t,n){return e?t.weight-n.weight:0}));for((0,o.getEdgesByNodeId)(l.id,u).forEach((function(t){h.insert(t)}));!h.isEmpty();){var d=h.delMin(),f=d.source,p=d.target;c.has(f)&&c.has(p)||(n.push(d),c.has(f)||(c.add(f),(0,o.getEdgesByNodeId)(f,u).forEach((function(t){h.insert(t)}))),c.has(p)||(c.add(p),(0,o.getEdgesByNodeId)(p,u).forEach((function(t){h.insert(t)}))))}return n},u=function(t,e){var n=[],i=t.nodes,o=void 0===i?[]:i,a=t.edges,s=void 0===a?[]:a;if(0===o.length)return n;var u=s.map((function(t){return t}));e&&u.sort((function(t,e){return t.weight-e.weight}));for(var l=new r.default(o.map((function(t){return t.id})));u.length>0;){var c=u.shift(),h=c.source,d=c.target;l.connected(h,d)||(n.push(c),l.union(h,d))}return n},l=function(t,e,n){return n?{prim:s,kruskal:u}[n](t,e):u(t,e)};e.default=l},20247:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n(42378))&&r.__esModule?r:{default:r},o=n(34170);var a=function(t,e,n){"number"!=typeof e&&(e=1e-6),"number"!=typeof n&&(n=.85);for(var r,a=1,s=0,u=1e3,l=t.nodes,c=void 0===l?[]:l,h=t.edges,d=void 0===h?[]:h,f=c.length,p={},m={},g=0;g<f;++g){p[y=(S=c[g]).id]=1/f,m[y]=1/f}for(var v=(0,i.default)(t);u>0&&a>e;){s=0;for(g=0;g<f;++g){var y=(S=c[g]).id;if(r=0,0===v[S.id].inDegree)p[y]=0;else{for(var b=(0,o.getNeighbors)(y,d,"source"),x=0;x<b.length;++x){var w=b[x],_=v[w].outDegree;_>0&&(r+=m[w]/_)}p[y]=n*r,s+=p[y]}}s=(1-s)/f,a=0;for(g=0;g<f;++g){var S;r=p[y=(S=c[g]).id]+s,a+=Math.abs(r-m[y]),m[y]=r}u-=1}return m};e.default=a},42215:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(t,e){return t-e},r=function(){function t(t){void 0===t&&(t=n),this.compareFn=t,this.list=[]}return t.prototype.getLeft=function(t){return 2*t+1},t.prototype.getRight=function(t){return 2*t+2},t.prototype.getParent=function(t){return 0===t?null:Math.floor((t-1)/2)},t.prototype.isEmpty=function(){return this.list.length<=0},t.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},t.prototype.delMin=function(){var t=this.top(),e=this.list.pop();return this.list.length>0&&(this.list[0]=e,this.moveDown(0)),t},t.prototype.insert=function(t){if(null!==t){this.list.push(t);var e=this.list.length-1;return this.moveUp(e),!0}return!1},t.prototype.moveUp=function(t){for(var e=this.getParent(t);t&&t>0&&this.compareFn(this.list[e],this.list[t])>0;){var n=this.list[e];this.list[e]=this.list[t],this.list[t]=n,t=e,e=this.getParent(t)}},t.prototype.moveDown=function(t){var e,n=t,r=this.getLeft(t),i=this.getRight(t),o=this.list.length;null!==r&&r<o&&this.compareFn(this.list[n],this.list[r])>0?n=r:null!==i&&i<o&&this.compareFn(this.list[n],this.list[i])>0&&(n=i),t!==n&&(e=[this.list[n],this.list[t]],this.list[t]=e[0],this.list[n]=e[1],this.moveDown(n))},t}();e.default=r},92041:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.LinkedListNode=void 0;var n=function(t,e){return t===e},r=function(){function t(t,e){void 0===e&&(e=null),this.value=t,this.next=e}return t.prototype.toString=function(t){return t?t(this.value):"".concat(this.value)},t}();e.LinkedListNode=r;var i=function(){function t(t){void 0===t&&(t=n),this.head=null,this.tail=null,this.compare=t}return t.prototype.prepend=function(t){var e=new r(t,this.head);return this.head=e,this.tail||(this.tail=e),this},t.prototype.append=function(t){var e=new r(t);return this.head?(this.tail.next=e,this.tail=e,this):(this.head=e,this.tail=e,this)},t.prototype.delete=function(t){if(!this.head)return null;for(var e=null;this.head&&this.compare(this.head.value,t);)e=this.head,this.head=this.head.next;var n=this.head;if(null!==n)for(;n.next;)this.compare(n.next.value,t)?(e=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,t)&&(this.tail=n),e},t.prototype.find=function(t){var e=t.value,n=void 0===e?void 0:e,r=t.callback,i=void 0===r?void 0:r;if(!this.head)return null;for(var o=this.head;o;){if(i&&i(o.value))return o;if(void 0!==n&&this.compare(o.value,n))return o;o=o.next}return null},t.prototype.deleteTail=function(){var t=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,t;for(var e=this.head;e.next;)e.next.next?e=e.next:e.next=null;return this.tail=e,t},t.prototype.deleteHead=function(){if(!this.head)return null;var t=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),t},t.prototype.fromArray=function(t){var e=this;return t.forEach((function(t){return e.append(t)})),this},t.prototype.toArray=function(){for(var t=[],e=this.head;e;)t.push(e),e=e.next;return t},t.prototype.reverse=function(){for(var t=this.head,e=null,n=null;t;)n=t.next,t.next=e,e=t,t=n;this.tail=this.head,this.head=e},t.prototype.toString=function(t){return void 0===t&&(t=void 0),this.toArray().map((function(e){return e.toString(t)})).toString()},t}();e.default=i},52014:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n(92041))&&r.__esModule?r:{default:r};var o=function(){function t(){this.linkedList=new i.default}return t.prototype.isEmpty=function(){return!this.linkedList.head},t.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},t.prototype.enqueue=function(t){this.linkedList.append(t)},t.prototype.dequeue=function(){var t=this.linkedList.deleteHead();return t?t.value:null},t.prototype.toString=function(t){return this.linkedList.toString(t)},t}();e.default=o},46212:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(){function t(t){this.count=t.length,this.parent={};for(var e=0,n=t;e<n.length;e++){var r=n[e];this.parent[r]=r}}return t.prototype.find=function(t){for(;this.parent[t]!==t;)t=this.parent[t];return t},t.prototype.union=function(t,e){var n=this.find(t),r=this.find(e);n!==r&&(n<r?(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]):(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]))},t.prototype.connected=function(t,e){return this.find(t)===this.find(e)},t}();e.default=n},6165:(t,e)=>{"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.DistanceType=void 0,e.DistanceType=n,function(t){t.EuclideanDistance="euclideanDistance"}(n||(e.DistanceType=n={}))},34170:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.uniqueId=e.getOutEdgesNodeId=e.getNeighbors=e.getEdgesByNodeId=void 0;e.getNeighbors=function(t,e,n){void 0===e&&(e=[]);var r=e.filter((function(e){return e.source===t||e.target===t}));if("target"===n){return r.filter((function(e){return e.source===t})).map((function(t){return t.target}))}if("source"===n){return r.filter((function(e){return e.target===t})).map((function(t){return t.source}))}return r.map((function(e){return e.source===t?e.target:e.source}))};e.getOutEdgesNodeId=function(t,e){return e.filter((function(e){return e.source===t}))};e.getEdgesByNodeId=function(t,e){return e.filter((function(e){return e.source===t||e.target===t}))};e.uniqueId=function(t){void 0===t&&(t=0);var e="".concat(Math.random()).split(".")[1].substr(0,5),n="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(t,"-").concat(e).concat(n)}},83767:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.oneHot=e.getDistance=e.getAllKeyValueMap=e.default=void 0;var r,i=n(24425),o=n(6165),a=(r=n(16831))&&r.__esModule?r:{default:r};var s=function(t,e,n){var r=[];(null==e?void 0:e.length)?r=e:(t.forEach((function(t){r=r.concat(Object.keys(t))})),r=(0,i.uniq)(r));var o={};return r.forEach((function(e){var r=[];t.forEach((function(t){void 0!==t[e]&&""!==t[e]&&r.push(t[e])})),r.length&&!(null==n?void 0:n.includes(e))&&(o[e]=(0,i.uniq)(r))})),o};e.getAllKeyValueMap=s;var u=function(t,e,n){var r=s(t,e,n),i=[];if(!Object.keys(r).length)return i;var o=Object.values(r).every((function(t){return t.every((function(t){return"number"==typeof t}))}));return t.forEach((function(t,e){var n=[];Object.keys(r).forEach((function(e){var i=t[e],a=r[e],s=a.findIndex((function(t){return i===t})),u=[];if(o)u.push(i);else for(var l=0;l<a.length;l++)l===s?u.push(1):u.push(0);n=n.concat(u)})),i[e]=n})),i};e.oneHot=u;var l=function(t,e,n,r){void 0===n&&(n=o.DistanceType.EuclideanDistance);var i=0;if(n===o.DistanceType.EuclideanDistance)i=new a.default(t).euclideanDistance(new a.default(e));return i};e.getDistance=l;var c={getAllKeyValueMap:s,oneHot:u,getDistance:l};e.default=c},7668:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getPropertyWeight=e.getAllSortProperties=e.getAllProperties=e.default=void 0;var r=n(97465),i=function(t,e){void 0===t&&(t=[]),void 0===e&&(e=100);var n={};t.forEach((function(t){t.properties&&Object.keys(t.properties).forEach((function(e){"id"===e||!"".concat(t.properties[e]).match(r.secondReg)&&!"".concat(t.properties[e]).match(r.dateReg)&&isNaN(Number(t.properties[e]))?n.hasOwnProperty(e)&&delete n[e]:n.hasOwnProperty(e)?n[e]+=1:n[e]=1}))}));var i=Object.keys(n).sort((function(t,e){return n[e]-n[t]}));return i.length<e?i:i.slice(0,e)};e.getAllSortProperties=i;var o=function(t,e){return e.map((function(e){return t.hasOwnProperty(e)?t[e]:0}))},a=function(t){for(var e=i(t),n=[],r=0;r<t.length;r++)n[r]=o(t[r].properties,e);return n};e.getPropertyWeight=a;var s=function(t,e){void 0===e&&(e=void 0);var n=[];return t.forEach((function(t){void 0===e&&n.push(t),void 0!==t[e]&&n.push(t[e])})),n};e.getAllProperties=s;var u={getAllSortProperties:i,getPropertyWeight:a,getAllProperties:s};e.default=u},16831:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(24425),i=function(){function t(t){this.arr=t}return t.prototype.getArr=function(){return this.arr||[]},t.prototype.add=function(e){var n,r=e.arr;if(!(null===(n=this.arr)||void 0===n?void 0:n.length))return new t(r);if(!(null==r?void 0:r.length))return new t(this.arr);if(this.arr.length===r.length){var i=[];for(var o in this.arr)i[o]=this.arr[o]+r[o];return new t(i)}},t.prototype.subtract=function(e){var n,r=e.arr;if(!(null===(n=this.arr)||void 0===n?void 0:n.length))return new t(r);if(!(null==r?void 0:r.length))return new t(this.arr);if(this.arr.length===r.length){var i=[];for(var o in this.arr)i[o]=this.arr[o]-r[o];return new t(i)}},t.prototype.avg=function(e){var n=[];if(0!==e)for(var r in this.arr)n[r]=this.arr[r]/e;return new t(n)},t.prototype.negate=function(){var e=[];for(var n in this.arr)e[n]=-this.arr[n];return new t(e)},t.prototype.squareEuclideanDistance=function(t){var e,n=t.arr;if(!(null===(e=this.arr)||void 0===e?void 0:e.length)||!(null==n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var i in this.arr)r+=Math.pow(this.arr[i]-t.arr[i],2);return r}},t.prototype.euclideanDistance=function(t){var e,n=t.arr;if(!(null===(e=this.arr)||void 0===e?void 0:e.length)||!(null==n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var i in this.arr)r+=Math.pow(this.arr[i]-t.arr[i],2);return Math.sqrt(r)}console.error("The two vectors are unequal in length.")},t.prototype.normalize=function(){var e=[],n=(0,r.clone)(this.arr);n.sort((function(t,e){return t-e}));var i=n[n.length-1],o=n[0];for(var a in this.arr)e[a]=(this.arr[a]-o)/(i-o);return new t(e)},t.prototype.norm2=function(){var t;if(!(null===(t=this.arr)||void 0===t?void 0:t.length))return 0;var e=0;for(var n in this.arr)e+=Math.pow(this.arr[n],2);return Math.sqrt(e)},t.prototype.dot=function(t){var e,n=t.arr;if(!(null===(e=this.arr)||void 0===e?void 0:e.length)||!(null==n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var i in this.arr)r+=this.arr[i]*t.arr[i];return r}console.error("The two vectors are unequal in length.")},t.prototype.equal=function(t){var e,n=t.arr;if((null===(e=this.arr)||void 0===e?void 0:e.length)!==(null==n?void 0:n.length))return!1;for(var r in this.arr)if(this.arr[r]!==n[r])return!1;return!0},t}();e.default=i},80873:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"GADDI",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(e,"breadthFirstSearch",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"connectedComponent",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"depthFirstSearch",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"detectCycle",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"dijkstra",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"findAllPath",{enumerable:!0,get:function(){return h.findAllPath}}),Object.defineProperty(e,"findShortestPath",{enumerable:!0,get:function(){return h.findShortestPath}}),Object.defineProperty(e,"floydWarshall",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"getAdjMatrix",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"getDegree",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"getInDegree",{enumerable:!0,get:function(){return s.getInDegree}}),Object.defineProperty(e,"getNeighbors",{enumerable:!0,get:function(){return y.getNeighbors}}),Object.defineProperty(e,"getOutDegree",{enumerable:!0,get:function(){return s.getOutDegree}}),Object.defineProperty(e,"labelPropagation",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"louvain",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(e,"minimumSpanningTree",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(e,"pageRank",{enumerable:!0,get:function(){return g.default}});var i=x(n(10168)),o=x(n(48441)),a=x(n(6277)),s=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var n=b(e);if(n&&n.has(t))return n.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=t[a]}i.default=t,n&&n.set(t,i);return i}(n(42378)),u=x(n(91042)),l=x(n(50115)),c=x(n(7304)),h=n(38785),d=x(n(91510)),f=x(n(5321)),p=x(n(71678)),m=x(n(65518)),g=x(n(20247)),v=x(n(51147)),y=n(34170);function b(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(b=function(t){return t?n:e})(t)}function x(t){return t&&t.__esModule?t:{default:t}}},22274:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MESSAGE=e.ALGORITHM=void 0;e.ALGORITHM={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"};e.MESSAGE={SUCCESS:"SUCCESS",FAILURE:"FAILURE"}},30248:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=n(22274),o=(r=n(88346))&&r.__esModule?r:{default:r};var a=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new Promise((function(n,r){var a=new o.default;a.postMessage({_algorithmType:t,data:e}),a.onmessage=function(t){var e=t.data,o=e.data,s=e._algorithmType;i.MESSAGE.SUCCESS===s?n(o):r(),a.terminate()}}))}};e.default=a},37436:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.pageRankAsync=e.minimumSpanningTreeAsync=e.louvainAsync=e.labelPropagationAsync=e.getOutDegreeAsync=e.getNeighborsAsync=e.getInDegreeAsync=e.getDegreeAsync=e.getAdjMatrixAsync=e.floydWarshallAsync=e.findShortestPathAsync=e.findAllPathAsync=e.dijkstraAsync=e.detectCycleAsync=e.detectAllUndirectedCycleAsync=e.detectAllDirectedCycleAsync=e.detectAllCyclesAsync=e.connectedComponentAsync=e.GADDIAsync=void 0;var r,i=(r=n(30248))&&r.__esModule?r:{default:r},o=n(22274);e.getAdjMatrixAsync=function(t,e){return(0,i.default)(o.ALGORITHM.getAdjMatrix).apply(void 0,[t,e])};e.connectedComponentAsync=function(t,e){return(0,i.default)(o.ALGORITHM.connectedComponent).apply(void 0,[t,e])};e.getDegreeAsync=function(t){return(0,i.default)(o.ALGORITHM.getDegree)(t)};e.getInDegreeAsync=function(t,e){return(0,i.default)(o.ALGORITHM.getInDegree)(t,e)};e.getOutDegreeAsync=function(t,e){return(0,i.default)(o.ALGORITHM.getOutDegree)(t,e)};e.detectCycleAsync=function(t){return(0,i.default)(o.ALGORITHM.detectCycle)(t)};e.detectAllCyclesAsync=function(t){return(0,i.default)(o.ALGORITHM.detectAllCycles)(t)};e.detectAllDirectedCycleAsync=function(t){return(0,i.default)(o.ALGORITHM.detectAllDirectedCycle)(t)};e.detectAllUndirectedCycleAsync=function(t){return(0,i.default)(o.ALGORITHM.detectAllUndirectedCycle)(t)};e.dijkstraAsync=function(t,e,n,r){return(0,i.default)(o.ALGORITHM.dijkstra).apply(void 0,[t,e,n,r])};e.findAllPathAsync=function(t,e,n,r){return(0,i.default)(o.ALGORITHM.findAllPath).apply(void 0,[t,e,n,r])};e.findShortestPathAsync=function(t,e,n,r,a){return(0,i.default)(o.ALGORITHM.findShortestPath).apply(void 0,[t,e,n,r,a])};e.floydWarshallAsync=function(t,e){return(0,i.default)(o.ALGORITHM.floydWarshall).apply(void 0,[t,e])};e.labelPropagationAsync=function(t,e,n,r){return void 0===r&&(r=1e3),(0,i.default)(o.ALGORITHM.labelPropagation)(t,e,n,r)};e.louvainAsync=function(t,e,n,r){return(0,i.default)(o.ALGORITHM.louvain)(t,e,n,r)};e.minimumSpanningTreeAsync=function(t,e,n){return(0,i.default)(o.ALGORITHM.minimumSpanningTree).apply(void 0,[t,e,n])};e.pageRankAsync=function(t,e,n){return(0,i.default)(o.ALGORITHM.pageRank).apply(void 0,[t,e,n])};e.getNeighborsAsync=function(t,e,n){return(0,i.default)(o.ALGORITHM.getNeighbors).apply(void 0,[t,e,n])};e.GADDIAsync=function(t,e,n,r,a,s,u){return void 0===n&&(n=!1),void 0===s&&(s="cluster"),void 0===u&&(u="cluster"),(0,i.default)(o.ALGORITHM.GADDI).apply(void 0,[t,e,n,r,a,s,u])}},88346:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var n=a(e);if(n&&n.has(t))return n.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if("default"!==s&&Object.prototype.hasOwnProperty.call(t,s)){var u=o?Object.getOwnPropertyDescriptor(t,s):null;u&&(u.get||u.set)?Object.defineProperty(i,s,u):i[s]=t[s]}i.default=t,n&&n.set(t,i);return i}(n(80873)),o=n(22274);function a(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(a=function(t){return t?n:e})(t)}var s="undefined"!=typeof self?self:{};s.onmessage=function(t){var e=t.data,n=e._algorithmType,r=e.data;if(n)if("function"!=typeof i[n])s.postMessage({_algorithmType:o.MESSAGE.FAILURE});else{var a=i[n].apply(i,r);s.postMessage({_algorithmType:o.MESSAGE.SUCCESS,data:a})}};e.default=null},4706:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Kernel:()=>U,World:()=>_t});var r=n(10467),i=n(64467),o=n(23029),a=n(92901),s=n(37167),u=n.n(s),l=n(98023),c=n.n(l),h=n(56449),d=n.n(h),f=n(54756),p=n.n(f),m=1;function g(){return m++}var v;!function(t){t[t.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",t[t.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",t[t.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE",t[t.SRC_COLOR=768]="SRC_COLOR",t[t.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.DST_COLOR=774]="DST_COLOR",t[t.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",t[t.FUNC_ADD=32774]="FUNC_ADD",t[t.BLEND_EQUATION=32777]="BLEND_EQUATION",t[t.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",t[t.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",t[t.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",t[t.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",t[t.MAX_EXT=32776]="MAX_EXT",t[t.MIN_EXT=32775]="MIN_EXT",t[t.BLEND_DST_RGB=32968]="BLEND_DST_RGB",t[t.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",t[t.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",t[t.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",t[t.CONSTANT_COLOR=32769]="CONSTANT_COLOR",t[t.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",t[t.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",t[t.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",t[t.BLEND_COLOR=32773]="BLEND_COLOR",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",t[t.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",t[t.STREAM_DRAW=35040]="STREAM_DRAW",t[t.STATIC_DRAW=35044]="STATIC_DRAW",t[t.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",t[t.BUFFER_SIZE=34660]="BUFFER_SIZE",t[t.BUFFER_USAGE=34661]="BUFFER_USAGE",t[t.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",t[t.FRONT=1028]="FRONT",t[t.BACK=1029]="BACK",t[t.FRONT_AND_BACK=1032]="FRONT_AND_BACK",t[t.CULL_FACE=2884]="CULL_FACE",t[t.BLEND=3042]="BLEND",t[t.DITHER=3024]="DITHER",t[t.STENCIL_TEST=2960]="STENCIL_TEST",t[t.DEPTH_TEST=2929]="DEPTH_TEST",t[t.SCISSOR_TEST=3089]="SCISSOR_TEST",t[t.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",t[t.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",t[t.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",t[t.NO_ERROR=0]="NO_ERROR",t[t.INVALID_ENUM=1280]="INVALID_ENUM",t[t.INVALID_VALUE=1281]="INVALID_VALUE",t[t.INVALID_OPERATION=1282]="INVALID_OPERATION",t[t.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",t[t.CW=2304]="CW",t[t.CCW=2305]="CCW",t[t.LINE_WIDTH=2849]="LINE_WIDTH",t[t.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",t[t.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",t[t.CULL_FACE_MODE=2885]="CULL_FACE_MODE",t[t.FRONT_FACE=2886]="FRONT_FACE",t[t.DEPTH_RANGE=2928]="DEPTH_RANGE",t[t.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",t[t.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",t[t.DEPTH_FUNC=2932]="DEPTH_FUNC",t[t.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",t[t.STENCIL_FUNC=2962]="STENCIL_FUNC",t[t.STENCIL_FAIL=2964]="STENCIL_FAIL",t[t.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",t[t.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",t[t.STENCIL_REF=2967]="STENCIL_REF",t[t.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",t[t.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",t[t.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",t[t.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",t[t.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",t[t.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",t[t.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",t[t.VIEWPORT=2978]="VIEWPORT",t[t.SCISSOR_BOX=3088]="SCISSOR_BOX",t[t.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",t[t.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",t[t.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",t[t.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",t[t.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",t[t.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",t[t.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",t[t.RED_BITS=3410]="RED_BITS",t[t.GREEN_BITS=3411]="GREEN_BITS",t[t.BLUE_BITS=3412]="BLUE_BITS",t[t.ALPHA_BITS=3413]="ALPHA_BITS",t[t.DEPTH_BITS=3414]="DEPTH_BITS",t[t.STENCIL_BITS=3415]="STENCIL_BITS",t[t.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",t[t.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",t[t.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",t[t.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",t[t.SAMPLES=32937]="SAMPLES",t[t.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",t[t.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",t[t.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",t[t.DONT_CARE=4352]="DONT_CARE",t[t.FASTEST=4353]="FASTEST",t[t.NICEST=4354]="NICEST",t[t.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.INT=5124]="INT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.FLOAT=5126]="FLOAT",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.ALPHA=6406]="ALPHA",t[t.RGB=6407]="RGB",t[t.RGBA=6408]="RGBA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",t[t.VERTEX_SHADER=35633]="VERTEX_SHADER",t[t.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",t[t.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",t[t.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",t[t.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",t[t.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",t[t.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",t[t.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",t[t.SHADER_TYPE=35663]="SHADER_TYPE",t[t.DELETE_STATUS=35712]="DELETE_STATUS",t[t.LINK_STATUS=35714]="LINK_STATUS",t[t.VALIDATE_STATUS=35715]="VALIDATE_STATUS",t[t.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",t[t.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",t[t.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",t[t.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",t[t.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",t[t.NEVER=512]="NEVER",t[t.LESS=513]="LESS",t[t.EQUAL=514]="EQUAL",t[t.LEQUAL=515]="LEQUAL",t[t.GREATER=516]="GREATER",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.GEQUAL=518]="GEQUAL",t[t.ALWAYS=519]="ALWAYS",t[t.KEEP=7680]="KEEP",t[t.REPLACE=7681]="REPLACE",t[t.INCR=7682]="INCR",t[t.DECR=7683]="DECR",t[t.INVERT=5386]="INVERT",t[t.INCR_WRAP=34055]="INCR_WRAP",t[t.DECR_WRAP=34056]="DECR_WRAP",t[t.VENDOR=7936]="VENDOR",t[t.RENDERER=7937]="RENDERER",t[t.VERSION=7938]="VERSION",t[t.NEAREST=9728]="NEAREST",t[t.LINEAR=9729]="LINEAR",t[t.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",t[t.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",t[t.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",t[t.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",t[t.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",t[t.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",t[t.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",t[t.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE=5890]="TEXTURE",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",t[t.TEXTURE0=33984]="TEXTURE0",t[t.TEXTURE1=33985]="TEXTURE1",t[t.TEXTURE2=33986]="TEXTURE2",t[t.TEXTURE3=33987]="TEXTURE3",t[t.TEXTURE4=33988]="TEXTURE4",t[t.TEXTURE5=33989]="TEXTURE5",t[t.TEXTURE6=33990]="TEXTURE6",t[t.TEXTURE7=33991]="TEXTURE7",t[t.TEXTURE8=33992]="TEXTURE8",t[t.TEXTURE9=33993]="TEXTURE9",t[t.TEXTURE10=33994]="TEXTURE10",t[t.TEXTURE11=33995]="TEXTURE11",t[t.TEXTURE12=33996]="TEXTURE12",t[t.TEXTURE13=33997]="TEXTURE13",t[t.TEXTURE14=33998]="TEXTURE14",t[t.TEXTURE15=33999]="TEXTURE15",t[t.TEXTURE16=34e3]="TEXTURE16",t[t.TEXTURE17=34001]="TEXTURE17",t[t.TEXTURE18=34002]="TEXTURE18",t[t.TEXTURE19=34003]="TEXTURE19",t[t.TEXTURE20=34004]="TEXTURE20",t[t.TEXTURE21=34005]="TEXTURE21",t[t.TEXTURE22=34006]="TEXTURE22",t[t.TEXTURE23=34007]="TEXTURE23",t[t.TEXTURE24=34008]="TEXTURE24",t[t.TEXTURE25=34009]="TEXTURE25",t[t.TEXTURE26=34010]="TEXTURE26",t[t.TEXTURE27=34011]="TEXTURE27",t[t.TEXTURE28=34012]="TEXTURE28",t[t.TEXTURE29=34013]="TEXTURE29",t[t.TEXTURE30=34014]="TEXTURE30",t[t.TEXTURE31=34015]="TEXTURE31",t[t.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",t[t.REPEAT=10497]="REPEAT",t[t.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t[t.FLOAT_VEC2=35664]="FLOAT_VEC2",t[t.FLOAT_VEC3=35665]="FLOAT_VEC3",t[t.FLOAT_VEC4=35666]="FLOAT_VEC4",t[t.INT_VEC2=35667]="INT_VEC2",t[t.INT_VEC3=35668]="INT_VEC3",t[t.INT_VEC4=35669]="INT_VEC4",t[t.BOOL=35670]="BOOL",t[t.BOOL_VEC2=35671]="BOOL_VEC2",t[t.BOOL_VEC3=35672]="BOOL_VEC3",t[t.BOOL_VEC4=35673]="BOOL_VEC4",t[t.FLOAT_MAT2=35674]="FLOAT_MAT2",t[t.FLOAT_MAT3=35675]="FLOAT_MAT3",t[t.FLOAT_MAT4=35676]="FLOAT_MAT4",t[t.SAMPLER_2D=35678]="SAMPLER_2D",t[t.SAMPLER_CUBE=35680]="SAMPLER_CUBE",t[t.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",t[t.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",t[t.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",t[t.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",t[t.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",t[t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",t[t.COMPILE_STATUS=35713]="COMPILE_STATUS",t[t.LOW_FLOAT=36336]="LOW_FLOAT",t[t.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",t[t.HIGH_FLOAT=36338]="HIGH_FLOAT",t[t.LOW_INT=36339]="LOW_INT",t[t.MEDIUM_INT=36340]="MEDIUM_INT",t[t.HIGH_INT=36341]="HIGH_INT",t[t.FRAMEBUFFER=36160]="FRAMEBUFFER",t[t.RENDERBUFFER=36161]="RENDERBUFFER",t[t.RGBA4=32854]="RGBA4",t[t.RGB5_A1=32855]="RGB5_A1",t[t.RGB565=36194]="RGB565",t[t.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",t[t.STENCIL_INDEX=6401]="STENCIL_INDEX",t[t.STENCIL_INDEX8=36168]="STENCIL_INDEX8",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t[t.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",t[t.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",t[t.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",t[t.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",t[t.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",t[t.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",t[t.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",t[t.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",t[t.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",t[t.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",t[t.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",t[t.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",t[t.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",t[t.NONE=0]="NONE",t[t.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",t[t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",t[t.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",t[t.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",t[t.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",t[t.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",t[t.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",t[t.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",t[t.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",t[t.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",t[t.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",t[t.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",t[t.COPY_SRC=1]="COPY_SRC",t[t.COPY_DST=2]="COPY_DST",t[t.SAMPLED=4]="SAMPLED",t[t.STORAGE=8]="STORAGE",t[t.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"}(v||(v={}));var y,b,x,w,_=function(){function t(){(0,o.A)(this,t),this.config=void 0}return(0,a.A)(t,[{key:"get",value:function(){return this.config}},{key:"set",value:function(t){this.config=t}}]),t}();"undefined"!=typeof navigator&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent);!function(t){t.Void="Void",t.Boolean="Boolean",t.Float="Float",t.Uint32="Uint32",t.Int32="Int32",t.Vector="Vector",t.Vector2Float="vec2<f32>",t.Vector3Float="vec3<f32>",t.Vector4Float="vec4<f32>",t.Vector2Boolean="vec2<bool>",t.Vector3Boolean="vec3<bool>",t.Vector4Boolean="vec4<bool>",t.Vector2Uint="vec2<u32>",t.Vector3Uint="vec3<u32>",t.Vector4Uint="vec4<u32>",t.Vector2Int="vec2<i32>",t.Vector3Int="vec3<i32>",t.Vector4Int="vec4<i32>",t.Matrix="Matrix",t.Matrix3x3Float="mat3x3<f32>",t.Matrix4x4Float="mat4x4<i32>",t.Struct="Struct",t.FloatArray="Float[]",t.Vector4FloatArray="vec4<f32>[]"}(y||(y={})),function(t){t.Program="Program",t.Identifier="Identifier",t.VariableDeclaration="VariableDeclaration",t.BlockStatement="BlockStatement",t.ReturnStatement="ReturnStatement",t.FunctionDeclaration="FunctionDeclaration",t.VariableDeclarator="VariableDeclarator",t.AssignmentExpression="AssignmentExpression",t.LogicalExpression="LogicalExpression",t.BinaryExpression="BinaryExpression",t.ArrayExpression="ArrayExpression",t.UnaryExpression="UnaryExpression",t.UpdateExpression="UpdateExpression",t.FunctionExpression="FunctionExpression",t.MemberExpression="MemberExpression",t.ConditionalExpression="ConditionalExpression",t.ExpressionStatement="ExpressionStatement",t.CallExpression="CallExpression",t.NumThreadStatement="NumThreadStatement",t.StorageStatement="StorageStatement",t.DoWhileStatement="DoWhileStatement",t.WhileStatement="WhileStatement",t.ForStatement="ForStatement",t.BreakStatement="BreakStatement",t.ContinueStatement="ContinueStatement",t.IfStatement="IfStatement",t.ImportedFunctionStatement="ImportedFunctionStatement"}(b||(b={})),function(t){t.Input="Input",t.Output="Output",t.Uniform="Uniform",t.Workgroup="Workgroup",t.UniformConstant="UniformConstant",t.Image="Image",t.StorageBuffer="StorageBuffer",t.Private="Private",t.Function="Function"}(x||(x={})),function(t){t.GLSL100="GLSL100",t.GLSL450="GLSL450",t.WGSL="WGSL"}(w||(w={}));function S(){if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function A(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach((function(e){(0,i.A)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var M,C,T,k,I,N,P,O,L,R,D,z,F,B,U=function(){function t(e,n){(0,o.A)(this,t),this.engine=e,this.configService=n,this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}var e,n,i;return(0,a.A)(t,[{key:"init",value:function(){var t=this.configService.get(),e=t.canvas,n=t.engineOptions;this.initPromise=this.engine.init(A({canvas:e||S(),antialiasing:!1},n))}},{key:"setBundle",value:function(t){this.compiledBundle=JSON.parse(JSON.stringify(t))}},{key:"setDispatch",value:function(t){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=t),this}},{key:"setMaxIteration",value:function(t){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=t),this}},{key:"setBinding",value:function(t,e){var n=this;if("string"==typeof t){var r=c()(e)||u()(e)||d()(e);if(this.compiledBundle&&this.compiledBundle.context){var i=this.compiledBundle.context.defines.find((function(e){return e.name===t}));if(i)return i.value=e,this;var o=this.compiledBundle.context.uniforms.find((function(e){return e.name===t}));o&&(r?(o.data=e,o.isReferer=!1,o.storageClass===x.Uniform?this.model&&this.model.updateUniform(t,e):this.model&&this.model.updateBuffer(t,e)):(o.isReferer=!0,o.data=e))}}else Object.keys(t).forEach((function(e){n.setBinding(e,t[e])}));return this}},{key:"execute",value:(i=(0,r.A)(p().mark((function t(){var e,n,r=this,i=arguments;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=i.length>0&&void 0!==i[0]?i[0]:1,!this.dirty){t.next=6;break}return this.compiledBundle.context&&(e>1?this.compiledBundle.context.maxIteration=e:this.compiledBundle.context.maxIteration++),t.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter((function(t){return t.isReferer})).forEach((function(t){var e=t.data,n=t.name;r.model.confirmInput(e.model,n)})),n=0;n<e;n++)this.model.run();return this.engine.endFrame(),t.abrupt("return",this);case 12:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"getOutput",value:(n=(0,r.A)(p().mark((function t(){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.model.readData());case 1:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"compile",value:(e=(0,r.A)(p().mark((function t(){var e,n,r;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initPromise;case 2:return e=A({},this.compiledBundle.context),n=this.engine.supportWebGPU?this.engine.useWGSL?w.WGSL:w.GLSL450:w.GLSL100,r=this.compiledBundle.shaders[n],e.defines.filter((function(t){return t.runtime})).forEach((function(t){var e="".concat("__DefineValuePlaceholder__").concat(t.name);r=r.replace(e,"".concat(t.value))})),e.shader=r,e.uniforms.forEach((function(t){if(!t.data&&t.storageClass===x.StorageBuffer){var n=1;t.type===y.FloatArray?n=1:t.type===y.Vector4FloatArray&&(n=4),t.data=new Float32Array(e.output.length*n).fill(0)}})),this.compiledBundle.context=e,t.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=t.sent;case 12:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),t}(),j=n(60364),V=n.n(j),H=function(){function t(e,n){(0,o.A)(this,t),this.attribute=void 0,this.buffer=void 0;var r=n.buffer,i=n.offset,a=n.stride,s=n.normalized,u=n.size,l=n.divisor;this.buffer=r,this.attribute={buffer:r.get(),offset:i||0,stride:a||0,normalized:s||!1,divisor:l||0},u&&(this.attribute.size=u)}return(0,a.A)(t,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),t}(),G=(M={},(0,i.A)(M,v.POINTS,"points"),(0,i.A)(M,v.LINES,"lines"),(0,i.A)(M,v.LINE_LOOP,"line loop"),(0,i.A)(M,v.LINE_STRIP,"line strip"),(0,i.A)(M,v.TRIANGLES,"triangles"),(0,i.A)(M,v.TRIANGLE_FAN,"triangle fan"),(0,i.A)(M,v.TRIANGLE_STRIP,"triangle strip"),M),W=(C={},(0,i.A)(C,v.STATIC_DRAW,"static"),(0,i.A)(C,v.DYNAMIC_DRAW,"dynamic"),(0,i.A)(C,v.STREAM_DRAW,"stream"),C),X=(T={},(0,i.A)(T,v.BYTE,"int8"),(0,i.A)(T,v.UNSIGNED_INT,"int16"),(0,i.A)(T,v.INT,"int32"),(0,i.A)(T,v.UNSIGNED_BYTE,"uint8"),(0,i.A)(T,v.UNSIGNED_SHORT,"uint16"),(0,i.A)(T,v.UNSIGNED_INT,"uint32"),(0,i.A)(T,v.FLOAT,"float"),T),Y=(k={},(0,i.A)(k,v.ALPHA,"alpha"),(0,i.A)(k,v.LUMINANCE,"luminance"),(0,i.A)(k,v.LUMINANCE_ALPHA,"luminance alpha"),(0,i.A)(k,v.RGB,"rgb"),(0,i.A)(k,v.RGBA,"rgba"),(0,i.A)(k,v.RGBA4,"rgba4"),(0,i.A)(k,v.RGB5_A1,"rgb5 a1"),(0,i.A)(k,v.RGB565,"rgb565"),(0,i.A)(k,v.DEPTH_COMPONENT,"depth"),(0,i.A)(k,v.DEPTH_STENCIL,"depth stencil"),k),q=(I={},(0,i.A)(I,v.DONT_CARE,"dont care"),(0,i.A)(I,v.NICEST,"nice"),(0,i.A)(I,v.FASTEST,"fast"),I),$=(N={},(0,i.A)(N,v.NEAREST,"nearest"),(0,i.A)(N,v.LINEAR,"linear"),(0,i.A)(N,v.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,i.A)(N,v.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,i.A)(N,v.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,i.A)(N,v.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),N),K=(P={},(0,i.A)(P,v.REPEAT,"repeat"),(0,i.A)(P,v.CLAMP_TO_EDGE,"clamp"),(0,i.A)(P,v.MIRRORED_REPEAT,"mirror"),P),Z=(O={},(0,i.A)(O,v.NONE,"none"),(0,i.A)(O,v.BROWSER_DEFAULT_WEBGL,"browser"),O),Q=(L={},(0,i.A)(L,v.NEVER,"never"),(0,i.A)(L,v.ALWAYS,"always"),(0,i.A)(L,v.LESS,"less"),(0,i.A)(L,v.LEQUAL,"lequal"),(0,i.A)(L,v.GREATER,"greater"),(0,i.A)(L,v.GEQUAL,"gequal"),(0,i.A)(L,v.EQUAL,"equal"),(0,i.A)(L,v.NOTEQUAL,"notequal"),L),J=(R={},(0,i.A)(R,v.FUNC_ADD,"add"),(0,i.A)(R,v.MIN_EXT,"min"),(0,i.A)(R,v.MAX_EXT,"max"),(0,i.A)(R,v.FUNC_SUBTRACT,"subtract"),(0,i.A)(R,v.FUNC_REVERSE_SUBTRACT,"reverse subtract"),R),tt=(D={},(0,i.A)(D,v.ZERO,"zero"),(0,i.A)(D,v.ONE,"one"),(0,i.A)(D,v.SRC_COLOR,"src color"),(0,i.A)(D,v.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,i.A)(D,v.SRC_ALPHA,"src alpha"),(0,i.A)(D,v.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,i.A)(D,v.DST_COLOR,"dst color"),(0,i.A)(D,v.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,i.A)(D,v.DST_ALPHA,"dst alpha"),(0,i.A)(D,v.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,i.A)(D,v.CONSTANT_COLOR,"constant color"),(0,i.A)(D,v.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,i.A)(D,v.CONSTANT_ALPHA,"constant alpha"),(0,i.A)(D,v.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,i.A)(D,v.SRC_ALPHA_SATURATE,"src alpha saturate"),D),et=(z={},(0,i.A)(z,v.NEVER,"never"),(0,i.A)(z,v.ALWAYS,"always"),(0,i.A)(z,v.LESS,"less"),(0,i.A)(z,v.LEQUAL,"lequal"),(0,i.A)(z,v.GREATER,"greater"),(0,i.A)(z,v.GEQUAL,"gequal"),(0,i.A)(z,v.EQUAL,"equal"),(0,i.A)(z,v.NOTEQUAL,"notequal"),z),nt=(F={},(0,i.A)(F,v.ZERO,"zero"),(0,i.A)(F,v.KEEP,"keep"),(0,i.A)(F,v.REPLACE,"replace"),(0,i.A)(F,v.INVERT,"invert"),(0,i.A)(F,v.INCR,"increment"),(0,i.A)(F,v.DECR,"decrement"),(0,i.A)(F,v.INCR_WRAP,"increment wrap"),(0,i.A)(F,v.DECR_WRAP,"decrement wrap"),F),rt=(B={},(0,i.A)(B,v.FRONT,"front"),(0,i.A)(B,v.BACK,"back"),B),it=function(){function t(e,n){(0,o.A)(this,t),this.buffer=void 0;var r=n.data,i=n.usage,a=n.type;this.buffer=e.buffer({data:r,usage:W[i||v.STATIC_DRAW],type:X[a||v.UNSIGNED_BYTE]})}return(0,a.A)(t,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(t){var e=t.data,n=t.offset;this.buffer.subdata(e,n)}}]),t}(),ot=n(60436);function at(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function st(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?at(Object(n),!0).forEach((function(e){(0,i.A)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ut=0,lt=function(){function t(e,n){var r=this;(0,o.A)(this,t),this.reGl=e,this.context=n,this.entity=g(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var i={};this.context.uniforms.forEach((function(t){var e=t.name,n=t.type,o=t.data,a=t.isReferer,s=t.storageClass;if(s===x.StorageBuffer){if(a)r.textureCache[e]={data:void 0},i["".concat(e,"Size")]=function(){return o.compiledBundle.context.output.textureSize};else{r.textureCache[e]=r.calcDataTexture(e,n,o);var l=r.textureCache[e],c=l.textureWidth,h=l.isOutput;i["".concat(e,"Size")]=[c,c],h&&(r.outputTextureName=e,r.context.needPingpong&&(r.outputTextureName="".concat(e,"Output"),r.textureCache[r.outputTextureName]=r.calcDataTexture(e,n,o)))}i[e]=function(){return r.textureCache[e].texture}}else if(s===x.Uniform){if(o&&(Array.isArray(o)||u()(o))&&o.length>16)throw new Error("invalid data type ".concat(n));i[e]=function(){return t.data}}}));var a=this.getOuputDataTexture(),s=a.textureWidth,l=a.texelCount;i.u_OutputTextureSize=[s,s],i.u_OutputTexelCount=l,this.context.output.textureSize=[s,s];var c={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n".concat(this.context.shader),uniforms:i,vert:"attribute vec3 a_Position;\nattribute vec2 a_TexCoord;\n\nvarying vec2 v_TexCoord;\n\nvoid main() {\n  gl_Position = vec4(a_Position, 1.0);\n  v_TexCoord = a_TexCoord;\n}",primitive:"triangle strip",count:4};this.computeCommand=this.reGl(c)}var e;return(0,a.A)(t,[{key:"run",value:function(){var t=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use((function(){t.computeCommand()}))}},{key:"readData",value:(e=(0,r.A)(p().mark((function t(){var e,n,r,i,o,a,s,u,l=this;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.reGl({framebuffer:this.texFBO})((function(){e=l.reGl.read()})),!e){t.next=6;break}if(n=this.getOuputDataTexture(),r=n.originalDataLength,i=n.elementsPerTexel,o=n.typedArrayConstructor,a=void 0===o?Float32Array:o,s=[],4!==i)for(u=0;u<e.length;u+=4)1===i?s.push(e[u]):2===i?s.push(e[u],e[u+1]):s.push(e[u],e[u+1],e[u+2]);else s=e;return t.abrupt("return",new a(s.slice(0,r)));case 6:return t.abrupt("return",new Float32Array);case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"confirmInput",value:function(t,e){var n;this.entity===t.entity?(this.dynamicPingpong=!0,n=this):n=t,this.textureCache[e].id=n.getOuputDataTexture().id,this.textureCache[e].texture=n.getOuputDataTexture().texture}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(t,e){var n=this.context.uniforms.find((function(e){return e.name===t}));if(n){var r=this.calcDataTexture(t,n.type,e),i=r.texture,o=r.data;this.textureCache[t].data=o,this.textureCache[t].texture=i}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var t=this.context.output.name;this.textureCache[t].id=this.getOuputDataTexture().id,this.textureCache[t].texture=this.getOuputDataTexture().texture}var e=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=e}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var t=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=t}},{key:"cloneDataTexture",value:function(t){var e=t.data,n=t.textureWidth;return st(st({},t),{},{id:ut++,texture:this.reGl.texture({width:n,height:n,data:e,type:"float"})})}},{key:"calcDataTexture",value:function(t,e,n){var r=1;e===y.Vector4FloatArray&&(r=4);for(var i=[],o=0;o<n.length;o+=r)1===r?i.push(n[o],0,0,0):2===r?i.push(n[o],n[o+1],0,0):3===r?i.push(n[o],n[o+1],n[o+2],0):4===r&&i.push(n[o],n[o+1],n[o+2],n[o+3]);var a=n.length,s=Math.ceil(a/r),l=Math.ceil(Math.sqrt(s)),c=l*l;s<c&&i.push.apply(i,(0,ot.A)(new Array(4*(c-s)).fill(0)));var h=this.reGl.texture({width:l,height:l,data:i,type:"float"});return{id:ut++,data:i,originalDataLength:a,typedArrayConstructor:u()(n)?n.constructor:void 0,textureWidth:l,texture:h,texelCount:s,elementsPerTexel:r,isOutput:t===this.context.output.name}}}]),t}(),ct=function(){function t(e,n){(0,o.A)(this,t),this.elements=void 0;var r=n.data,i=n.usage,a=n.type,s=n.count;this.elements=e.elements({data:r,usage:W[i||v.STATIC_DRAW],type:X[a||v.UNSIGNED_BYTE],count:s})}return(0,a.A)(t,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(t){var e=t.data;this.elements.subdata(e)}},{key:"destroy",value:function(){this.elements.destroy()}}]),t}(),ht=function(){function t(e,n){(0,o.A)(this,t),this.framebuffer=void 0;var r=n.width,i=n.height,a=n.color,s=n.colors,u=(n.depth,n.stencil,{width:r,height:i});Array.isArray(s)&&(u.colors=s.map((function(t){return t.get()}))),a&&"boolean"!=typeof a&&(u.color=a.get()),this.framebuffer=e.framebuffer(u)}return(0,a.A)(t,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(t){var e=t.width,n=t.height;this.framebuffer.resize(e,n)}}]),t}(),dt=n(82284),ft=n(11331),pt=n.n(ft);function mt(t){var e={};return Object.keys(t).forEach((function(n){gt(n,t[n],e,"")})),e}function gt(t,e,n,r){null===e||"number"==typeof e||"boolean"==typeof e||Array.isArray(e)&&"number"==typeof e[0]||u()(e)||""===e||void 0!==e.resize?n["".concat(r&&r+".").concat(t)]=e:(pt()(e)&&Object.keys(e).forEach((function(i){gt(i,e[i],n,"".concat(r&&r+".").concat(t))})),Array.isArray(e)&&e.forEach((function(e,i){Object.keys(e).forEach((function(o){gt(o,e[o],n,"".concat(r&&r+".").concat(t,"[").concat(i,"]"))}))})))}function vt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function yt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?vt(Object(n),!0).forEach((function(e){(0,i.A)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var bt=function(){function t(e,n){(0,o.A)(this,t),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=e;var r=n.vs,i=n.fs,a=n.defines,s=n.attributes,u=n.uniforms,l=n.primitive,c=n.count,h=n.elements,d=n.depth,f=n.blend,p=n.stencil,m=n.cull,g=n.instances,y=n.scissor,b=n.viewport,x={};u&&(this.uniforms=mt(u),Object.keys(u).forEach((function(t){x[t]=e.prop(t)})));var w={};Object.keys(s).forEach((function(t){w[t]=s[t].get()}));var _=a&&this.generateDefines(a)||"",S={attributes:w,frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n".concat(_,"\n").concat(i),uniforms:x,vert:"\n".concat(_,"\n").concat(r),primitive:G[void 0===l?v.TRIANGLES:l]};g&&(S.instances=g),c&&(S.count=c),h&&(S.elements=h.get()),y&&(S.scissor=y),b&&(S.viewport=b),this.initDepthDrawParams({depth:d},S),this.initBlendDrawParams({blend:f},S),this.initStencilDrawParams({stencil:p},S),this.initCullDrawParams({cull:m},S),this.drawCommand=e(S)}return(0,a.A)(t,[{key:"addUniforms",value:function(t){this.uniforms=yt(yt({},this.uniforms),mt(t))}},{key:"draw",value:function(t){var e=yt(yt({},this.uniforms),mt(t.uniforms||{})),n={};Object.keys(e).forEach((function(t){var r=(0,dt.A)(e[t]);"boolean"===r||"number"===r||Array.isArray(e[t])||e[t].BYTES_PER_ELEMENT?n[t]=e[t]:"string"===r||(n[t]=e[t].get())})),this.drawCommand(n)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(t,e){var n=t.depth;n&&(e.depth={enable:void 0===n.enable||!!n.enable,mask:void 0===n.mask||!!n.mask,func:Q[n.func||v.LESS],range:n.range||[0,1]})}},{key:"initBlendDrawParams",value:function(t,e){var n=t.blend;if(n){var r=n.enable,i=n.func,o=n.equation,a=n.color,s=void 0===a?[0,0,0,0]:a;e.blend={enable:!!r,func:{srcRGB:tt[i&&i.srcRGB||v.SRC_ALPHA],srcAlpha:tt[i&&i.srcAlpha||v.SRC_ALPHA],dstRGB:tt[i&&i.dstRGB||v.ONE_MINUS_SRC_ALPHA],dstAlpha:tt[i&&i.dstAlpha||v.ONE_MINUS_SRC_ALPHA]},equation:{rgb:J[o&&o.rgb||v.FUNC_ADD],alpha:J[o&&o.alpha||v.FUNC_ADD]},color:s}}}},{key:"initStencilDrawParams",value:function(t,e){var n=t.stencil;if(n){var r=n.enable,i=n.mask,o=void 0===i?-1:i,a=n.func,s=void 0===a?{cmp:v.ALWAYS,ref:0,mask:-1}:a,u=n.opFront,l=void 0===u?{fail:v.KEEP,zfail:v.KEEP,zpass:v.KEEP}:u,c=n.opBack,h=void 0===c?{fail:v.KEEP,zfail:v.KEEP,zpass:v.KEEP}:c;e.stencil={enable:!!r,mask:o,func:yt(yt({},s),{},{cmp:et[s.cmp]}),opFront:{fail:nt[l.fail],zfail:nt[l.zfail],zpass:nt[l.zpass]},opBack:{fail:nt[h.fail],zfail:nt[h.zfail],zpass:nt[h.zpass]}}}}},{key:"initCullDrawParams",value:function(t,e){var n=t.cull;if(n){var r=n.enable,i=n.face,o=void 0===i?v.BACK:i;e.cull={enable:!!r,face:rt[o]}}}},{key:"generateDefines",value:function(t){return Object.keys(t).map((function(e){return"#define ".concat(e," ").concat(Number(t[e]))})).join("\n")}}]),t}(),xt=function(){function t(e,n){(0,o.A)(this,t),this.texture=void 0,this.width=void 0,this.height=void 0;var r=n.data,i=n.type,a=void 0===i?v.UNSIGNED_BYTE:i,s=n.width,u=n.height,l=n.flipY,c=void 0!==l&&l,h=n.format,d=void 0===h?v.RGBA:h,f=n.mipmap,p=void 0!==f&&f,m=n.wrapS,g=void 0===m?v.CLAMP_TO_EDGE:m,y=n.wrapT,b=void 0===y?v.CLAMP_TO_EDGE:y,x=n.aniso,w=void 0===x?0:x,_=n.alignment,S=void 0===_?1:_,E=n.premultiplyAlpha,A=void 0!==E&&E,M=n.mag,C=void 0===M?v.NEAREST:M,T=n.min,k=void 0===T?v.NEAREST:T,I=n.colorSpace,N=void 0===I?v.BROWSER_DEFAULT_WEBGL:I;this.width=s,this.height=u;var P={width:s,height:u,type:X[a],format:Y[d],wrapS:K[g],wrapT:K[b],mag:$[C],min:$[k],alignment:S,flipY:c,colorSpace:Z[N],premultiplyAlpha:A,aniso:w};r&&(P.data=r),"number"==typeof p?P.mipmap=q[p]:"boolean"==typeof p&&(P.mipmap=p),this.texture=e.texture(P)}return(0,a.A)(t,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(t){var e=t.width,n=t.height;this.texture.resize(e,n),this.width=e,this.height=n}},{key:"destroy",value:function(){this.texture.destroy()}}]),t}(),wt=function(){function t(){var e=this;(0,o.A)(this,t),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var t=(0,r.A)(p().mark((function t(n){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.uniforms){t.next=3;break}return t.next=3,Promise.all(Object.keys(n.uniforms).map(function(){var t=(0,r.A)(p().mark((function t(e){var r;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.uniforms[e]||void 0===n.uniforms[e].load){t.next=5;break}return t.next=3,n.uniforms[e].load();case 3:r=t.sent,n.uniforms[e]=r;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 3:return t.abrupt("return",new bt(e.gl,n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.createAttribute=function(t){return new H(e.gl,t)},this.createBuffer=function(t){return new it(e.gl,t)},this.createElements=function(t){return new ct(e.gl,t)},this.createTexture2D=function(t){return new xt(e.gl,t)},this.createFramebuffer=function(t){return new ht(e.gl,t)},this.useFramebuffer=function(t,n){e.gl({framebuffer:t?t.get():null})(n)},this.createComputeModel=function(){var t=(0,r.A)(p().mark((function t(n){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new lt(e.gl,n));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.clear=function(t){var n=t.color,r=t.depth,i=t.stencil,o=t.framebuffer,a=void 0===o?null:o,s={color:n,depth:r,stencil:i};s.framebuffer=null===a?a:a.get(),e.gl.clear(s)},this.setScissor=function(t){e.gl&&e.gl._gl&&(t.enable&&t.box?(e.gl._gl.enable(v.SCISSOR_TEST),e.gl._gl.scissor(t.box.x,t.box.y,t.box.width,t.box.height)):e.gl._gl.disable(v.SCISSOR_TEST),e.gl._refresh())},this.viewport=function(t){var n=t.x,r=t.y,i=t.width,o=t.height;e.gl&&e.gl._gl&&(e.gl._gl.viewport(n,r,i,o),e.gl._refresh())},this.readPixels=function(t){var n=t.framebuffer,r={x:t.x,y:t.y,width:t.width,height:t.height};return n&&(r.framebuffer=n.get()),e.gl.read(r)},this.getCanvas=function(){return e.$canvas},this.getGLContext=function(){return e.gl._gl},this.destroy=function(){e.gl&&(e.gl.destroy(),e.inited=!1)}}var e;return(0,a.A)(t,[{key:"init",value:(e=(0,r.A)(p().mark((function t(e){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.inited){t.next=2;break}return t.abrupt("return");case 2:return this.$canvas=e.canvas,t.next=5,new Promise((function(t,n){V()({canvas:e.canvas,attributes:{alpha:!0,antialias:e.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(e,r){!e&&r||n(e),t(r)}})}));case 5:this.gl=t.sent,this.inited=!0;case 7:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),t}(),_t=function(){function t(){(0,o.A)(this,t),this.engine=void 0,this.configService=new _}return(0,a.A)(t,[{key:"setConfig",value:function(t){this.configService.set(t)}},{key:"setEngine",value:function(t){this.engine=t}},{key:"createEntity",value:function(){return g()}},{key:"createKernel",value:function(t){var e=new U(this.engine,this.configService);return"string"==typeof t?e.setBundle(JSON.parse(t)):e.setBundle(t),e.init(),e}},{key:"destroy",value:function(){this.engine.destroy()}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new t;return n.setConfig(e),n.setEngine(new wt),n}}]),t}()},55163:(t,e,n)=>{"use strict";n.d(e,{Ay:()=>Cb});var r={};n.r(r),n.d(r,{GADDI:()=>Qt,Stack:()=>te,breadthFirstSearch:()=>V,connectedComponent:()=>W,cosineSimilarity:()=>_t,default:()=>ne,depthFirstSearch:()=>Z,detectAllCycles:()=>tt,detectAllDirectedCycle:()=>J,detectAllUndirectedCycle:()=>Q,detectCycle:()=>et,detectDirectedCycle:()=>ee,dijkstra:()=>nt,findAllPath:()=>ot,findShortestPath:()=>it,floydWarshall:()=>at,getAdjMatrix:()=>P,getDegree:()=>Y,getInDegree:()=>q,getNeighbors:()=>B,getOutDegree:()=>$,iLouvain:()=>yt,kCore:()=>bt,kMeans:()=>wt,labelPropagation:()=>st,louvain:()=>vt,minimumSpanningTree:()=>Nt,nodesCosineSimilarity:()=>St,pageRank:()=>Pt});var i={};n.r(i),n.d(i,{Line:()=>Te,applyMatrix:()=>de,compare:()=>ae,distance:()=>me,floydWarshall:()=>ve,fractionToLine:()=>Pe,getAdjMatrix:()=>ye,getBBoxBoundLine:()=>ke,getCircleCenterByPoints:()=>pe,getCircleIntersectByPoint:()=>ce,getDegree:()=>Se,getEllipseIntersectByPoint:()=>he,getLineIntersect:()=>ue,getPointsCenter:()=>Oe,getRectIntersectByPoint:()=>le,intersectBBox:()=>Me,invertMatrix:()=>fe,isPointInPolygon:()=>Ae,isPointsOverlap:()=>De,isPolygonsIntersect:()=>Ce,itemIntersectByLine:()=>Ne,lerp:()=>Be,lerpArray:()=>Ue,move:()=>xe,pointLineDistance:()=>Fe,pointLineSquareDist:()=>Re,pointRectSquareDist:()=>ze,rotate:()=>_e,scale:()=>we,scaleMatrix:()=>ge,squareDist:()=>Le,translate:()=>be});var o={};n.r(o),n.d(o,{cloneBesidesImg:()=>yn,getAnimateCfgWithCallback:()=>bn,getBBox:()=>rn,getComboBBox:()=>gn,getLabelPosition:()=>an,getLetterWidth:()=>hn,getLoopCfgs:()=>on,getTextSize:()=>dn,plainCombosToTrees:()=>pn,reconstructTree:()=>mn,shouldRefreshEdge:()=>vn,traverseTree:()=>ln,traverseTreeUp:()=>cn,truncateLabelByLength:()=>fn});var a={};n.r(a),n.d(a,{catmullRomToBezier:()=>Cn,fillPath:()=>$n,fillPathByDiff:()=>Qn,formatPath:()=>er,intersection:()=>Xn,parsePathArray:()=>Rn,parsePathString:()=>Mn,pathToAbsolute:()=>kn,pathToCurve:()=>On,rectPath:()=>jn});var s={};n.r(s),n.d(s,{easeBack:()=>zo,easeBackIn:()=>Ro,easeBackInOut:()=>zo,easeBackOut:()=>Do,easeBounce:()=>Po,easeBounceIn:()=>No,easeBounceInOut:()=>Oo,easeBounceOut:()=>Po,easeCircle:()=>xo,easeCircleIn:()=>yo,easeCircleInOut:()=>xo,easeCircleOut:()=>bo,easeCubic:()=>io,easeCubicIn:()=>no,easeCubicInOut:()=>io,easeCubicOut:()=>ro,easeElastic:()=>Uo,easeElasticIn:()=>Bo,easeElasticInOut:()=>jo,easeElasticOut:()=>Uo,easeExp:()=>vo,easeExpIn:()=>mo,easeExpInOut:()=>vo,easeExpOut:()=>go,easeLinear:()=>Qi,easePoly:()=>so,easePolyIn:()=>oo,easePolyInOut:()=>so,easePolyOut:()=>ao,easeQuad:()=>eo,easeQuadIn:()=>Ji,easeQuadInOut:()=>eo,easeQuadOut:()=>to,easeSin:()=>fo,easeSinIn:()=>co,easeSinInOut:()=>fo,easeSinOut:()=>ho});var u={};n.r(u),n.d(u,{calculationItemsBBox:()=>ms,cloneEvent:()=>ds,formatPadding:()=>hs,isNaN:()=>ps,isViewportChanged:()=>fs,processParallelEdges:()=>gs,uniqueId:()=>cs});var l={};n.r(l),n.d(l,{getClosedSpline:()=>du,getControlPoint:()=>lu,getSpline:()=>uu,getStarPath:()=>yu,paddedHull:()=>vu,pathToPoints:()=>hu,pointsToPolygon:()=>cu,roundedHull:()=>gu});var c={};n.r(c),n.d(c,{defaultSubjectColors:()=>Qu});var h={};n.r(h),n.d(h,{isForce:()=>Ju});var d={};n.r(d),n.d(d,{Base:()=>$l,Circle:()=>Kl,Ellipse:()=>Ql,Image:()=>ec,Line:()=>ic,Marker:()=>sc,Path:()=>yc,Polygon:()=>xc,Polyline:()=>_c,Rect:()=>Sc,Text:()=>Ac});var f={};n.r(f),n.d(f,{Base:()=>Hc,Circle:()=>Wc,Dom:()=>Yc,Ellipse:()=>$c,Image:()=>Zc,Line:()=>Jc,Marker:()=>rh,Path:()=>oh,Polygon:()=>sh,Polyline:()=>lh,Rect:()=>hh,Text:()=>gh});var p={};n.r(p),n.d(p,{getColorSetsBySubjectColors:()=>jd,getColorsWithSubjectColor:()=>Ud,mixColor:()=>Bd});var m={};n.r(m),n.d(m,{arrayToTextureData:()=>sf,attributesToTextureData:()=>af,buildTextureData:()=>nf,buildTextureDataWithOneEdgeAttr:()=>rf,buildTextureDataWithTwoEdgeAttr:()=>of,proccessToFunc:()=>ef,radialLayout:()=>uf});var g={};n.r(g),n.d(g,{gpuDetector:()=>lf});var v={};n.r(v),n.d(v,{getBrowserName:()=>cf});var y={};n.r(y),n.d(y,{assign:()=>mm,default:()=>Rm,defaultI18n:()=>bm,format:()=>Om,parse:()=>Lm,setGlobalDateI18n:()=>wm,setGlobalDateMasks:()=>Pm});var b=n(31635),x=n(24425);const w={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(t){return Object.assign(this,t),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(t){var e=this,n=this.events;this.graph=t,"drag-canvas"!==this.type&&"brush-select"!==this.type&&"lasso-select"!==this.type||t.get("canvas").set("draggable",!0),(0,x.each)(n,(function(e,n){t.on(n,e)})),document.addEventListener("visibilitychange",(function(){e.keydown=!1}))},unbind:function(t){var e=this.events,n=t.get("canvas").get("draggable");"drag-canvas"!==this.type&&"brush-select"!==this.type&&"lasso-select"!==this.type||t.get("canvas").set("draggable",!1),(0,x.each)(e,(function(e,n){t.off(n,e)})),t.get("canvas").set("draggable",n)},get:function(t){return this[t]},set:function(t,e){return this[t]=e,this}};var _=function(){function t(){}return t.registerBehavior=function(e,n){if(!n)throw new Error("please specify handler for this behavior: ".concat(e));var r=(0,x.clone)(w);Object.assign(r,n);var i=function(t){var e=this;Object.assign(this,this.getDefaultCfg(),t);var n=this.getEvents();this.events=null;var r={};n&&((0,x.each)(n,(function(t,n){r[n]=(0,x.wrapBehavior)(e,t)})),this.events=r)};i.prototype=r,t.types[e]=i},t.hasBehavior=function(e){return!!t.types[e]},t.getBehavior=function(e){return t.types[e]},t.types={},t}();const S=_,E=S;var A=function(){function t(){this._events={}}return t.prototype.on=function(t,e,n){return this._events[t]||(this._events[t]=[]),this._events[t].push({callback:e,once:!!n}),this},t.prototype.once=function(t,e){return this.on(t,e,!0)},t.prototype.emit=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this._events[t]||[],o=this._events["*"]||[],a=function(r){for(var i=r.length,o=0;o<i;o++)if(r[o]){var a=r[o],s=a.callback;a.once&&(r.splice(o,1),0===r.length&&delete e._events[t],i--,o--),s.apply(e,n)}};a(i),a(o)},t.prototype.off=function(t,e){if(t)if(e){for(var n=this._events[t]||[],r=n.length,i=0;i<r;i++)n[i].callback===e&&(n.splice(i,1),r--,i--);0===n.length&&delete this._events[t]}else delete this._events[t];else this._events={};return this},t.prototype.getEvents=function(){return this._events},t}();const M=A;var C=n(91409);function T(t,e,n){var r=[0,0,0,0,0,0,0,0,0];return C.fromRotation(r,n),C.multiply(t,r,e)}function k(t,e,n){var r=[0,0,0,0,0,0,0,0,0];return C.fromScaling(r,n),C.multiply(t,r,e)}function I(t,e,n){return C.multiply(t,n,e)}function N(t,e){for(var n,r,i,o,a=t?[].concat(t):[1,0,0,0,1,0,0,0,1],s=0,u=e.length;s<u;s++){var l=e[s];switch(l[0]){case"t":n=a,r=a,i=[l[1],l[2]],o=void 0,o=[0,0,0,0,0,0,0,0,0],C.fromTranslation(o,i),C.multiply(n,o,r);break;case"s":k(a,a,[l[1],l[2]]);break;case"r":T(a,a,l[1]);break;case"m":I(a,a,l[1])}}return a}const P=function(t,e){var n=t.nodes,r=t.edges,i=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach((function(t,e){o[t.id]=e;i.push([])})),r&&r.forEach((function(t){var n=t.source,r=t.target,a=o[n],s=o[r];!a&&0!==a||!s&&0!==s||(i[a][s]=1,e||(i[s][a]=1))})),i};var O=function(t,e){return t===e},L=function(){function t(t,e){void 0===e&&(e=null),this.value=t,this.next=e}return t.prototype.toString=function(t){return t?t(this.value):"".concat(this.value)},t}(),R=function(){function t(t){void 0===t&&(t=O),this.head=null,this.tail=null,this.compare=t}return t.prototype.prepend=function(t){var e=new L(t,this.head);return this.head=e,this.tail||(this.tail=e),this},t.prototype.append=function(t){var e=new L(t);return this.head?(this.tail.next=e,this.tail=e,this):(this.head=e,this.tail=e,this)},t.prototype.delete=function(t){if(!this.head)return null;for(var e=null;this.head&&this.compare(this.head.value,t);)e=this.head,this.head=this.head.next;var n=this.head;if(null!==n)for(;n.next;)this.compare(n.next.value,t)?(e=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,t)&&(this.tail=n),e},t.prototype.find=function(t){var e=t.value,n=void 0===e?void 0:e,r=t.callback,i=void 0===r?void 0:r;if(!this.head)return null;for(var o=this.head;o;){if(i&&i(o.value))return o;if(void 0!==n&&this.compare(o.value,n))return o;o=o.next}return null},t.prototype.deleteTail=function(){var t=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,t;for(var e=this.head;e.next;)e.next.next?e=e.next:e.next=null;return this.tail=e,t},t.prototype.deleteHead=function(){if(!this.head)return null;var t=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),t},t.prototype.fromArray=function(t){var e=this;return t.forEach((function(t){return e.append(t)})),this},t.prototype.toArray=function(){for(var t=[],e=this.head;e;)t.push(e),e=e.next;return t},t.prototype.reverse=function(){for(var t=this.head,e=null,n=null;t;)n=t.next,t.next=e,e=t,t=n;this.tail=this.head,this.head=e},t.prototype.toString=function(t){return void 0===t&&(t=void 0),this.toArray().map((function(e){return e.toString(t)})).toString()},t}();const D=R;var z=function(){function t(){this.linkedList=new D}return t.prototype.isEmpty=function(){return!this.linkedList.head},t.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},t.prototype.enqueue=function(t){this.linkedList.append(t)},t.prototype.dequeue=function(){var t=this.linkedList.deleteHead();return t?t.value:null},t.prototype.toString=function(t){return this.linkedList.toString(t)},t}();const F=z;var B=function(t,e,n){void 0===e&&(e=[]);var r=e.filter((function(e){return e.source===t||e.target===t}));if("target"===n){return r.filter((function(e){return e.source===t})).map((function(t){return t.target}))}if("source"===n){return r.filter((function(e){return e.target===t})).map((function(t){return t.source}))}return r.map((function(e){return e.source===t?e.target:e.source}))},U=function(t,e){return e.filter((function(e){return e.source===t||e.target===t}))},j=function(t){void 0===t&&(t=0);var e="".concat(Math.random()).split(".")[1].substr(0,5),n="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(t,"-").concat(e).concat(n)};const V=function(t,e,n,r){void 0===r&&(r=!0);var i=function(t){void 0===t&&(t={});var e,n=t,r=function(){},i=(e={},function(t){var n=t.next;return!e[n]&&(e[n]=!0,!0)});return n.allowTraversal=t.allowTraversal||i,n.enter=t.enter||r,n.leave=t.leave||r,n}(n),o=new F,a=t.edges,s=void 0===a?[]:a;o.enqueue(e);for(var u="",l=function(){var t=o.dequeue();i.enter({current:t,previous:u}),B(t,s,r?"target":void 0).forEach((function(e){i.allowTraversal({previous:u,current:t,next:e})&&o.enqueue(e)})),i.leave({current:t,previous:u}),u=t};!o.isEmpty();)l()};var H=function(t){for(var e=t.nodes,n=void 0===e?[]:e,r=t.edges,i=void 0===r?[]:r,o=[],a={},s=[],u=function t(e){s.push(e),a[e.id]=!0;for(var r=B(e.id,i),o=function(e){var i=r[e];if(!a[i]){var o=n.filter((function(t){return t.id===i}));o.length>0&&t(o[0])}},u=0;u<r.length;++u)o(u)},l=0;l<n.length;l++){var c=n[l];if(!a[c.id]){u(c);for(var h=[];s.length>0;)h.push(s.pop());o.push(h)}}return o},G=function(t){for(var e=t.nodes,n=void 0===e?[]:e,r=t.edges,i=void 0===r?[]:r,o=[],a={},s={},u={},l=[],c=0,h=function t(e){s[e.id]=c,u[e.id]=c,c+=1,o.push(e),a[e.id]=!0;for(var r=B(e.id,i,"target").filter((function(t){return n.map((function(t){return t.id})).indexOf(t)>-1})),h=function(i){var o=r[i];if(s[o]||0===s[o])a[o]&&(u[e.id]=Math.min(u[e.id],s[o]));else{var l=n.filter((function(t){return t.id===o}));l.length>0&&t(l[0]),u[e.id]=Math.min(u[e.id],u[o])}},d=0;d<r.length;d++)h(d);if(u[e.id]===s[e.id]){for(var f=[];o.length>0;){var p=o.pop();if(a[p.id]=!1,f.push(p),p===e)break}f.length>0&&l.push(f)}},d=0,f=n;d<f.length;d++){var p=f[d];s[p.id]||0===s[p.id]||h(p)}return l};function W(t,e){return e?G(t):H(t)}var X=function(t){var e={},n=t.nodes,r=void 0===n?[]:n,i=t.edges,o=void 0===i?[]:i;return r.forEach((function(t){e[t.id]={degree:0,inDegree:0,outDegree:0}})),o.forEach((function(t){e[t.source].degree++,e[t.source].outDegree++,e[t.target].degree++,e[t.target].inDegree++})),e};const Y=X;var q=function(t,e){return X(t)[e]?X(t)[e].inDegree:0},$=function(t,e){return X(t)[e]?X(t)[e].outDegree:0};function K(t,e,n,r,i){void 0===i&&(i=!0),r.enter({current:e,previous:n});var o=t.edges;B(e,void 0===o?[]:o,i?"target":void 0).forEach((function(o){r.allowTraversal({previous:n,current:e,next:o})&&K(t,o,e,r,i)})),r.leave({current:e,previous:n})}function Z(t,e,n,r){void 0===r&&(r=!0),K(t,e,"",function(t){void 0===t&&(t={});var e,n=t,r=function(){},i=(e={},function(t){var n=t.next;return!e[n]&&(e[n]=!0,!0)});return n.allowTraversal=t.allowTraversal||i,n.enter=t.enter||r,n.leave=t.leave||r,n}(n),r)}var Q=function(t,e,n){var r,i;void 0===n&&(n=!0);for(var o=[],a=0,s=W(t,!1);a<s.length;a++){var u=s[a];if(u.length)for(var l=u[0],c=l.id,h=[l],d=((r={})[c]=l,r),f=((i={})[c]=new Set,i);h.length>0;)for(var p=h.pop(),m=p.id,g=B(m,t.edges),v=function(r){var i,a=g[r],s=t.nodes.find((function(t){return t.id===a}));if(a===m)o.push(((i={})[a]=p,i));else if(a in f){if(!f[m].has(s)){for(var u=!0,l=[s,p],c=d[m];f[a].size&&!f[a].has(c)&&(l.push(c),c!==d[c.id]);)c=d[c.id];if(l.push(c),e&&n?(u=!1,l.findIndex((function(t){return e.indexOf(t.id)>-1}))>-1&&(u=!0)):e&&!n&&l.findIndex((function(t){return e.indexOf(t.id)>-1}))>-1&&(u=!1),u){for(var v={},y=1;y<l.length;y+=1)v[l[y-1].id]=l[y];l.length&&(v[l[l.length-1].id]=l[0]),o.push(v)}f[a].add(p)}}else d[a]=p,h.push(s),f[a]=new Set([p])},y=0;y<g.length;y+=1)v(y)}return o},J=function(t,e,n){void 0===n&&(n=!0);for(var r=[],i=new Set,o=[],a=[],s={},u={},l=function t(u,l,c){var h=!1;if(e&&!1===n&&e.indexOf(u.id)>-1)return h;r.push(u),i.add(u);for(var d=c[u.id],f=0;f<d.length;f+=1){if((g=s[d[f]])===l){for(var p={},m=1;m<r.length;m+=1)p[r[m-1].id]=r[m];r.length&&(p[r[r.length-1].id]=r[0]),a.push(p),h=!0}else i.has(g)||t(g,l,c)&&(h=!0)}if(h)!function(t){for(var e=[t];e.length>0;){var n=e.pop();i.has(n)&&(i.delete(n),o[n.id].forEach((function(t){e.push(t)})),o[n.id].clear())}}(u);else for(f=0;f<d.length;f+=1){var g=s[d[f]];o[g.id].has(u)||o[g.id].add(u)}return r.pop(),h},c=t.nodes,h=void 0===c?[]:c,d=0;d<h.length;d+=1){var f=h[d],p=f.id;u[p]=d,s[d]=f}if(e&&n){var m=function(t){var n=e[t];u[h[t].id]=u[n],u[n]=0,s[0]=h.find((function(t){return t.id===n})),s[u[h[t].id]]=h[t]};for(d=0;d<e.length;d++)m(d)}for(var g=function(r){for(var i,o,s=1/0,l=0;l<r.length;l+=1)for(var c=r[l],h=0;h<c.length;h++){var d=u[c[h].id];d<s&&(s=d,o=l)}var f=r[o],p=[];for(l=0;l<f.length;l+=1){var m=f[l];p[m.id]=[];for(var g=0,v=B(m.id,t.edges,"target").filter((function(t){return f.map((function(t){return t.id})).indexOf(t)>-1}));g<v.length;g++){var y=v[g];y!==m.id||!1===n&&e.indexOf(m.id)>-1?p[m.id].push(u[y]):a.push(((i={})[m.id]=m,i))}}return{component:f,adjList:p,minIdx:s}},v=0;v<h.length;){var y=h.filter((function(t){return u[t.id]>=v})),b=G({nodes:y,edges:t.edges}).filter((function(t){return t.length>1}));if(0===b.length)break;var x=g(b),w=x.minIdx,_=x.adjList,S=x.component;if(!(S.length>1))break;S.forEach((function(t){o[t.id]=new Set}));var E=s[w];if(e&&n&&-1===e.indexOf(E.id))return a;l(E,E,_),v=w+1}return a},tt=function(t,e,n,r){return void 0===r&&(r=!0),e?J(t,n,r):Q(t,n,r)};const et=function(t){var e=null,n=t.nodes,r={},i={},o={},a={};(void 0===n?[]:n).forEach((function(t){i[t.id]=t}));for(var s={enter:function(t){var n=t.current,a=t.previous;if(o[n]){e={};for(var s=n,u=a;u!==n;)e[s]=u,s=u,u=r[u];e[s]=u}else o[n]=n,delete i[n],r[n]=a},leave:function(t){var e=t.current;a[e]=e,delete o[e]},allowTraversal:function(t){var n=t.next;return!e&&!a[n]}};Object.keys(i).length;){Z(t,Object.keys(i)[0],s)}return e};const nt=function(t,e,n,r){var i=t.nodes,o=void 0===i?[]:i,a=t.edges,s=void 0===a?[]:a,u=[],l={},c={},h={};o.forEach((function(t,n){var r=t.id;u.push(r),c[r]=1/0,r===e&&(c[r]=0)}));for(var d=o.length,f=function(t){var e=function(t,e,n){for(var r,i=1/0,o=0;o<e.length;o++){var a=e[o].id;!n[a]&&t[a]<=i&&(i=t[a],r=e[o])}return r}(c,o,l),i=e.id;if(l[i]=!0,c[i]===1/0)return"continue";var a=[];a=n?function(t,e){return e.filter((function(e){return e.source===t}))}(i,s):U(i,s),a.forEach((function(t){var n=t.target,o=t.source,a=n===i?o:n,s=r&&t[r]?t[r]:1;c[a]>c[e.id]+s?(c[a]=c[e.id]+s,h[a]=[e.id]):c[a]===c[e.id]+s&&h[a].push(e.id)}))},p=0;p<d;p++)f();h[e]=[e];var m={};for(var g in c)c[g]!==1/0&&rt(e,g,h,m);var v={};for(var g in m)v[g]=m[g][0];return{length:c,path:v,allPath:m}};function rt(t,e,n,r){if(t===e)return[t];if(r[e])return r[e];for(var i=[],o=0,a=n[e];o<a.length;o++){var s=rt(t,a[o],n,r);if(!s)return;for(var u=0,l=s;u<l.length;u++){var c=l[u];(0,x.isArray)(c)?i.push((0,b.__spreadArray)((0,b.__spreadArray)([],c,!0),[e],!1)):i.push([c,e])}}return r[e]=i,r[e]}var it=function(t,e,n,r,i){var o=nt(t,e,r,i),a=o.length,s=o.path,u=o.allPath;return{length:a[n],path:s[n],allPath:u[n]}},ot=function(t,e,n,r){var i;if(e===n)return[[e]];var o=t.edges,a=void 0===o?[]:o,s=[e],u=((i={})[e]=!0,i),l=[],c=[],h=r?B(e,a,"target"):B(e,a);for(l.push(h);s.length>0&&l.length>0;){var d=l[l.length-1];if(d.length){var f=d.shift();if(f&&(s.push(f),u[f]=!0,h=r?B(f,a,"target"):B(f,a),l.push(h.filter((function(t){return!u[t]})))),s[s.length-1]===n){var p=s.map((function(t){return t}));c.push(p);m=s.pop();u[m]=!1,l.pop()}}else{var m=s.pop();u[m]=!1,l.pop()}}return c};const at=function(t,e){for(var n=P(t,e),r=[],i=n.length,o=0;o<i;o+=1){r[o]=[];for(var a=0;a<i;a+=1)o===a?r[o][a]=0:0!==n[o][a]&&n[o][a]?r[o][a]=n[o][a]:r[o][a]=1/0}for(var s=0;s<i;s+=1)for(o=0;o<i;o+=1)for(a=0;a<i;a+=1)r[o][a]>r[o][s]+r[s][a]&&(r[o][a]=r[o][s]+r[s][a]);return r};const st=function(t,e,n,r){void 0===e&&(e=!1),void 0===n&&(n="weight"),void 0===r&&(r=1e3);var i=t.nodes,o=void 0===i?[]:i,a=t.edges,s=void 0===a?[]:a,u={},l={};o.forEach((function(t,e){var n=j();t.clusterId=n,u[n]={id:n,nodes:[t]},l[t.id]={node:t,idx:e}}));var c=P(t,e),h=[],d={};c.forEach((function(t,e){var n=0,r=o[e].id;d[r]={},t.forEach((function(t,e){if(t){n+=t;var i=o[e].id;d[r][i]=t}})),h.push(n)}));for(var f=0,p=function(){var t=!1;if(o.forEach((function(e){var n={};Object.keys(d[e.id]).forEach((function(t){var r=d[e.id][t],i=l[t].node.clusterId;n[i]||(n[i]=0),n[i]+=r}));var r=-1/0,i=[];if(Object.keys(n).forEach((function(t){r<n[t]?(r=n[t],i=[t]):r===n[t]&&i.push(t)})),1!==i.length||i[0]!==e.clusterId){var o=i.indexOf(e.clusterId);if(o>=0&&i.splice(o,1),i&&i.length){t=!0;var a=u[e.clusterId],s=a.nodes.indexOf(e);a.nodes.splice(s,1);var c=Math.floor(Math.random()*i.length),h=u[i[c]];h.nodes.push(e),e.clusterId=h.id}}})),!t)return"break";f++};f<r;){if("break"===p())break}Object.keys(u).forEach((function(t){var e=u[t];e.nodes&&e.nodes.length||delete u[t]}));var m=[],g={};s.forEach((function(t){var e=t.source,r=t.target,i=t[n]||1,o=l[e].node.clusterId,a=l[r].node.clusterId,s="".concat(o,"---").concat(a);if(g[s])g[s].weight+=i,g[s].count++;else{var u={source:o,target:a,weight:i,count:1};g[s]=u,m.push(u)}}));var v=[];return Object.keys(u).forEach((function(t){v.push(u[t])})),{clusters:v,clusterEdges:m}};var ut=function(){function t(t){this.arr=t}return t.prototype.getArr=function(){return this.arr||[]},t.prototype.add=function(e){var n,r=e.arr;if(!(null===(n=this.arr)||void 0===n?void 0:n.length))return new t(r);if(!(null==r?void 0:r.length))return new t(this.arr);if(this.arr.length===r.length){var i=[];for(var o in this.arr)i[o]=this.arr[o]+r[o];return new t(i)}},t.prototype.subtract=function(e){var n,r=e.arr;if(!(null===(n=this.arr)||void 0===n?void 0:n.length))return new t(r);if(!(null==r?void 0:r.length))return new t(this.arr);if(this.arr.length===r.length){var i=[];for(var o in this.arr)i[o]=this.arr[o]-r[o];return new t(i)}},t.prototype.avg=function(e){var n=[];if(0!==e)for(var r in this.arr)n[r]=this.arr[r]/e;return new t(n)},t.prototype.negate=function(){var e=[];for(var n in this.arr)e[n]=-this.arr[n];return new t(e)},t.prototype.squareEuclideanDistance=function(t){var e,n=t.arr;if(!(null===(e=this.arr)||void 0===e?void 0:e.length)||!(null==n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var i in this.arr)r+=Math.pow(this.arr[i]-t.arr[i],2);return r}},t.prototype.euclideanDistance=function(t){var e,n=t.arr;if(!(null===(e=this.arr)||void 0===e?void 0:e.length)||!(null==n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var i in this.arr)r+=Math.pow(this.arr[i]-t.arr[i],2);return Math.sqrt(r)}console.error("The two vectors are unequal in length.")},t.prototype.normalize=function(){var e=[],n=(0,x.clone)(this.arr);n.sort((function(t,e){return t-e}));var r=n[n.length-1],i=n[0];for(var o in this.arr)e[o]=(this.arr[o]-i)/(r-i);return new t(e)},t.prototype.norm2=function(){var t;if(!(null===(t=this.arr)||void 0===t?void 0:t.length))return 0;var e=0;for(var n in this.arr)e+=Math.pow(this.arr[n],2);return Math.sqrt(e)},t.prototype.dot=function(t){var e,n=t.arr;if(!(null===(e=this.arr)||void 0===e?void 0:e.length)||!(null==n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var i in this.arr)r+=this.arr[i]*t.arr[i];return r}console.error("The two vectors are unequal in length.")},t.prototype.equal=function(t){var e,n=t.arr;if((null===(e=this.arr)||void 0===e?void 0:e.length)!==(null==n?void 0:n.length))return!1;for(var r in this.arr)if(this.arr[r]!==n[r])return!1;return!0},t}();const lt=ut;var ct=function(t,e){void 0===e&&(e=void 0);var n=[];return t.forEach((function(t){void 0===e&&n.push(t),void 0!==t[e]&&n.push(t[e])})),n};var ht;!function(t){t.EuclideanDistance="euclideanDistance"}(ht||(ht={}));var dt=function(t,e,n){var r=[];(null==e?void 0:e.length)?r=e:(t.forEach((function(t){r=r.concat(Object.keys(t))})),r=(0,x.uniq)(r));var i={};return r.forEach((function(e){var r=[];t.forEach((function(t){void 0!==t[e]&&""!==t[e]&&r.push(t[e])})),r.length&&!(null==n?void 0:n.includes(e))&&(i[e]=(0,x.uniq)(r))})),i},ft=function(t,e,n){var r=dt(t,e,n),i=[];if(!Object.keys(r).length)return i;var o=Object.values(r).every((function(t){return t.every((function(t){return"number"==typeof t}))}));return t.forEach((function(t,e){var n=[];Object.keys(r).forEach((function(e){var i=t[e],a=r[e],s=a.findIndex((function(t){return i===t})),u=[];if(o)u.push(i);else for(var l=0;l<a.length;l++)l===s?u.push(1):u.push(0);n=n.concat(u)})),i[e]=n})),i},pt=function(t,e,n,r){void 0===n&&(n=ht.EuclideanDistance);var i=0;if(n===ht.EuclideanDistance)i=new lt(t).euclideanDistance(new lt(e));return i};var mt=function(t,e,n,r){for(var i=e.length,o=2*r,a=0,s=0;s<i;s++)for(var u=t[s].clusterId,l=0;l<i;l++){if(u===t[l].clusterId)a+=(e[s][l]||0)-(n[s]||0)*(n[l]||0)/o}return a*=1/o},gt=function(t,e){void 0===t&&(t=[]);for(var n=t.length,r=new lt([]),i=0;i<n;i++)r=r.add(new lt(e[i]));var o=r.avg(n);o.normalize();var a=0;for(i=0;i<n;i++){a+=(u=new lt(e[i])).squareEuclideanDistance(o)}var s=[];t.forEach((function(){s.push([])}));for(i=0;i<n;i++){var u=new lt(e[i]);t[i].clusterInertial=0;for(var l=0;l<n;l++)if(i!==l){var c=new lt(e[l]);s[i][l]=u.squareEuclideanDistance(c),t[i].clusterInertial+=s[i][l]}else s[i][l]=0}var h=0,d=2*n*a;for(i=0;i<n;i++){var f=t[i].clusterId;for(l=0;l<n;l++){var p=t[l].clusterId;if(i!==l&&f===p)h+=t[i].clusterInertial*t[l].clusterInertial/Math.pow(d,2)-s[i][l]/d}}return Number(h.toFixed(4))};const vt=function(t,e,n,r,i,o,a,s,u){void 0===e&&(e=!1),void 0===n&&(n="weight"),void 0===r&&(r=1e-4),void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===a&&(a=[]),void 0===s&&(s=["id"]),void 0===u&&(u=1);var l=t.nodes,c=void 0===l?[]:l,h=t.edges,d=void 0===h?[]:h,f=[];if(i){c.forEach((function(t,e){t.properties=t.properties||{},t.originIndex=e}));var p=[];c.every((function(t){return t.hasOwnProperty("nodeType")}))&&(p=Array.from(new Set(c.map((function(t){return t.nodeType})))),c.forEach((function(t){t.properties.nodeType=p.findIndex((function(e){return e===t.nodeType}))})));var m=ct(c,o);f=ft(m,a,s)}var g=1,v={},y={};c.forEach((function(t,e){var n=String(g++);t.clusterId=n,v[n]={id:n,nodes:[t]},y[t.id]={node:t,idx:e}}));var b=P(t,e),w=[],_={},S=0;b.forEach((function(t,e){var n=0,r=c[e].id;_[r]={},t.forEach((function(t,e){if(t){n+=t;var i=c[e].id;_[r][i]=t,S+=t}})),w.push(n)})),S/=2;for(var E=1/0,A=1/0,M=0,C=[],T={};;){E=i&&c.every((function(t){return t.hasOwnProperty("properties")}))?mt(c,b,w,S)+gt(c,f)*u:mt(c,b,w,S),0===M&&(A=E,C=c,T=v);var k=E>0&&E>A&&E-A<r;if(E>A&&(C=c.map((function(t){return{node:t,clusterId:t.clusterId}})),T=(0,x.clone)(v),A=E),k||M>100)break;M++,Object.keys(v).forEach((function(t){var e=0;d.forEach((function(r){var i=r.source,o=r.target,a=y[i].node.clusterId,s=y[o].node.clusterId;(a===t&&s!==t||s===t&&a!==t)&&(e+=r[n]||1)})),v[t].sumTot=e})),c.forEach((function(t,e){var r,o=v[t.clusterId],a=0,s=w[e]/(2*S),l=0,c=o.nodes;c.forEach((function(t){var n=y[t.id].idx;l+=b[e][n]||0}));var h=l-o.sumTot*s,p=c.filter((function(e){return e.id!==t.id})),m=[];p.forEach((function(t,e){m[e]=f[t.originIndex]}));var g=gt(p,f)*u,x=_[t.id];if(Object.keys(x).forEach((function(n){var o=y[n].node.clusterId;if(o!==t.clusterId){var l=v[o],c=l.nodes;if(c&&c.length){var d=0;c.forEach((function(t){var n=y[t.id].idx;d+=b[e][n]||0}));var p=d-l.sumTot*s,m=c.concat([t]),x=[];m.forEach((function(t,e){x[e]=f[t.originIndex]}));var w=gt(m,f)*u,_=p-h;i&&(_=p+w-(h+g)),_>a&&(a=_,r=l)}}})),a>0){r.nodes.push(t);var E=t.clusterId;t.clusterId=r.id;var A=o.nodes.indexOf(t);o.nodes.splice(A,1);var M=0,C=0;d.forEach((function(t){var e=t.source,i=t.target,o=y[e].node.clusterId,a=y[i].node.clusterId;(o===r.id&&a!==r.id||a===r.id&&o!==r.id)&&(M+=t[n]||1),(o===E&&a!==E||a===E&&o!==E)&&(C+=t[n]||1)})),r.sumTot=M,o.sumTot=C}}))}var I={},N=0;Object.keys(T).forEach((function(t){var e=T[t];if(e.nodes&&e.nodes.length){var n=String(N+1);n!==t&&(e.id=n,e.nodes=e.nodes.map((function(t){return{id:t.id,clusterId:n}})),T[n]=e,I[t]=n,delete T[t],N++)}else delete T[t]})),C.forEach((function(t){var e=t.node,n=t.clusterId;e&&(e.clusterId=n,e.clusterId&&I[e.clusterId]&&(e.clusterId=I[e.clusterId]))}));var O=[],L={};d.forEach((function(t){var e=t.source,r=t.target,i=t[n]||1,o=y[e].node.clusterId,a=y[r].node.clusterId;if(o&&a){var s="".concat(o,"---").concat(a);if(L[s])L[s].weight+=i,L[s].count++;else{var u={source:o,target:a,weight:i,count:1};L[s]=u,O.push(u)}}}));var R=[];return Object.keys(T).forEach((function(t){R.push(T[t])})),{clusters:R,clusterEdges:O}};const yt=function(t,e,n,r,i,o,a,s){return void 0===e&&(e=!1),void 0===n&&(n="weight"),void 0===r&&(r=1e-4),void 0===i&&(i=void 0),void 0===o&&(o=[]),void 0===a&&(a=["id"]),void 0===s&&(s=1),vt(t,e,n,r,!0,i,o,a,s)};const bt=function(t,e){var n;void 0===e&&(e=1);for(var r=(0,x.clone)(t),i=r.nodes,o=void 0===i?[]:i,a=r.edges,s=void 0===a?[]:a,u=function(){var t=Y({nodes:o,edges:s}),r=Object.keys(t);r.sort((function(e,n){var r,i;return(null===(r=t[e])||void 0===r?void 0:r.degree)-(null===(i=t[n])||void 0===i?void 0:i.degree)}));var i=r[0];if(!o.length||(null===(n=t[i])||void 0===n?void 0:n.degree)>=e)return"break";var a=o.findIndex((function(t){return t.id===i}));o.splice(a,1),s=s.filter((function(t){return!(t.source===i||t.target===i)}))};;){if("break"===u())break}return{nodes:o,edges:s}};var xt=function(t,e,n){var r=[];if(t===ht.EuclideanDistance)r=e[n];else r=[];return r};const wt=function(t,e,n,r,i,o){void 0===e&&(e=3),void 0===n&&(n=void 0),void 0===r&&(r=[]),void 0===i&&(i=["id"]),void 0===o&&(o=ht.EuclideanDistance);var a=t.nodes,s=void 0===a?[]:a,u=t.edges,l=void 0===u?[]:u,c={clusters:[{id:"0",nodes:s}],clusterEdges:[]};if(o===ht.EuclideanDistance&&!s.every((function(t){return t.hasOwnProperty(n)})))return c;var h=[],d=[];if(o===ht.EuclideanDistance&&(h=ct(s,n),d=ft(h,r,i)),!d.length)return c;for(var f=(0,x.uniq)(d.map((function(t){return t.join("")}))),p=Math.min(e,s.length,f.length),m=0;m<s.length;m++)s[m].originIndex=m;var g=[],v=[],y=[];for(m=0;m<p;m++)if(0===m){var b=Math.floor(Math.random()*s.length);if(o===ht.EuclideanDistance)g[m]=d[b];else g[m]=[];v.push(b),y[m]=[s[b]],s[b].clusterId=String(m)}else{for(var w=-1/0,_=0,S=function(t){if(!v.includes(t)){for(var e=0,n=0;n<g.length;n++){var r=0;if(o===ht.EuclideanDistance)r=pt(d[s[t].originIndex],g[n],o);e+=r}var i=e/g.length;i>w&&!g.find((function(e){return(0,x.isEqual)(e,xt(o,d,s[t].originIndex))}))&&(w=i,_=t)}},E=0;E<s.length;E++)S(E);g[m]=xt(o,d,_),v.push(_),y[m]=[s[_]],s[_].clusterId=String(m)}for(var A=0;;){for(m=0;m<s.length;m++){var M=0,C=1/0;if(0!==A||!v.includes(m)){for(var T=0;T<g.length;T++){var k=0;if(o===ht.EuclideanDistance)k=pt(d[m],g[T],o);k<C&&(C=k,M=T)}if(void 0!==s[m].clusterId)for(var I=y[Number(s[m].clusterId)].length-1;I>=0;I--)y[Number(s[m].clusterId)][I].id===s[m].id&&y[Number(s[m].clusterId)].splice(I,1);s[m].clusterId=String(M),y[M].push(s[m])}}var N=!1;for(m=0;m<y.length;m++){var P=y[m],O=new lt([]);for(T=0;T<P.length;T++)O=O.add(new lt(d[P[T].originIndex]));var L=O.avg(P.length);L.equal(new lt(g[m]))||(N=!0,g[m]=L.getArr())}if(A++,s.every((function(t){return void 0!==t.clusterId}))&&N||A>=1e3)break}var R=[],D={};return l.forEach((function(t){var e,n,r=t.source,i=t.target,o=null===(e=s.find((function(t){return t.id===r})))||void 0===e?void 0:e.clusterId,a=null===(n=s.find((function(t){return t.id===i})))||void 0===n?void 0:n.clusterId,u="".concat(o,"---").concat(a);if(D[u])D[u].count++;else{var l={source:o,target:a,count:1};D[u]=l,R.push(l)}})),{clusters:y,clusterEdges:R}};const _t=function(t,e){var n=new lt(e),r=n.norm2(),i=new lt(t),o=i.norm2(),a=n.dot(i),s=r*o,u=s?a/s:0;return u};const St=function(t,e,n,r,i){void 0===t&&(t=[]),void 0===n&&(n=void 0),void 0===r&&(r=[]),void 0===i&&(i=[]);var o=(0,x.clone)(t.filter((function(t){return t.id!==e.id}))),a=t.findIndex((function(t){return t.id===e.id})),s=ct(t,n),u=ft(s,r,i),l=u[a],c=[];return o.forEach((function(t,n){if(t.id!==e.id){var r=u[n],i=_t(r,l);c.push(i),t.cosineSimilarity=i}})),o.sort((function(t,e){return e.cosineSimilarity-t.cosineSimilarity})),{allCosineSimilarity:c,similarNodes:o}};var Et=function(){function t(t){this.count=t.length,this.parent={};for(var e=0,n=t;e<n.length;e++){var r=n[e];this.parent[r]=r}}return t.prototype.find=function(t){for(;this.parent[t]!==t;)t=this.parent[t];return t},t.prototype.union=function(t,e){var n=this.find(t),r=this.find(e);n!==r&&(n<r?(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]):(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]))},t.prototype.connected=function(t,e){return this.find(t)===this.find(e)},t}();const At=Et;var Mt=function(t,e){return t-e},Ct=function(){function t(t){void 0===t&&(t=Mt),this.compareFn=t,this.list=[]}return t.prototype.getLeft=function(t){return 2*t+1},t.prototype.getRight=function(t){return 2*t+2},t.prototype.getParent=function(t){return 0===t?null:Math.floor((t-1)/2)},t.prototype.isEmpty=function(){return this.list.length<=0},t.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},t.prototype.delMin=function(){var t=this.top(),e=this.list.pop();return this.list.length>0&&(this.list[0]=e,this.moveDown(0)),t},t.prototype.insert=function(t){if(null!==t){this.list.push(t);var e=this.list.length-1;return this.moveUp(e),!0}return!1},t.prototype.moveUp=function(t){for(var e=this.getParent(t);t&&t>0&&this.compareFn(this.list[e],this.list[t])>0;){var n=this.list[e];this.list[e]=this.list[t],this.list[t]=n,t=e,e=this.getParent(t)}},t.prototype.moveDown=function(t){var e,n=t,r=this.getLeft(t),i=this.getRight(t),o=this.list.length;null!==r&&r<o&&this.compareFn(this.list[n],this.list[r])>0?n=r:null!==i&&i<o&&this.compareFn(this.list[n],this.list[i])>0&&(n=i),t!==n&&(e=[this.list[n],this.list[t]],this.list[t]=e[0],this.list[n]=e[1],this.moveDown(n))},t}();const Tt=Ct;var kt=function(t,e){var n=[],r=t.nodes,i=void 0===r?[]:r,o=t.edges,a=void 0===o?[]:o;if(0===i.length)return n;var s=i[0],u=new Set;u.add(s);var l=new Tt((function(t,n){return e?t.weight-n.weight:0}));for(U(s.id,a).forEach((function(t){l.insert(t)}));!l.isEmpty();){var c=l.delMin(),h=c.source,d=c.target;u.has(h)&&u.has(d)||(n.push(c),u.has(h)||(u.add(h),U(h,a).forEach((function(t){l.insert(t)}))),u.has(d)||(u.add(d),U(d,a).forEach((function(t){l.insert(t)}))))}return n},It=function(t,e){var n=[],r=t.nodes,i=void 0===r?[]:r,o=t.edges,a=void 0===o?[]:o;if(0===i.length)return n;var s=a.map((function(t){return t}));e&&s.sort((function(t,e){return t.weight-e.weight}));for(var u=new At(i.map((function(t){return t.id})));s.length>0;){var l=s.shift(),c=l.source,h=l.target;u.connected(c,h)||(n.push(l),u.union(c,h))}return n};const Nt=function(t,e,n){return n?{prim:kt,kruskal:It}[n](t,e):It(t,e)};const Pt=function(t,e,n){"number"!=typeof e&&(e=1e-6),"number"!=typeof n&&(n=.85);for(var r,i=1,o=0,a=1e3,s=t.nodes,u=void 0===s?[]:s,l=t.edges,c=void 0===l?[]:l,h=u.length,d={},f={},p=0;p<h;++p){d[g=(w=u[p]).id]=1/h,f[g]=1/h}for(var m=Y(t);a>0&&i>e;){o=0;for(p=0;p<h;++p){var g=(w=u[p]).id;if(r=0,0===m[w.id].inDegree)d[g]=0;else{for(var v=B(g,c,"source"),y=0;y<v.length;++y){var b=v[y],x=m[b].outDegree;x>0&&(r+=f[b]/x)}d[g]=n*r,o+=d[g]}}o=(1-o)/h,i=0;for(p=0;p<h;++p){var w;r=d[g=(w=u[p]).id]+o,i+=Math.abs(r-f[g]),f[g]=r}a-=1}return f};var Ot="-1",Lt=function(t,e,n,r){void 0===t&&(t=-1),void 0===e&&(e=-1),void 0===n&&(n=-1),void 0===r&&(r="-1"),this.id=t,this.from=e,this.to=n,this.label=r},Rt=function(){function t(t,e){void 0===t&&(t=-1),void 0===e&&(e=Ot),this.id=t,this.label=e,this.edges=[],this.edgeMap={}}return t.prototype.addEdge=function(t){this.edges.push(t),this.edgeMap[t.id]=t},t}(),Dt=function(){function t(t,e,n){void 0===t&&(t=-1),void 0===e&&(e=!0),void 0===n&&(n=!1),this.id=t,this.edgeIdAutoIncrease=e,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}return t.prototype.getNodeNum=function(){return this.nodes.length},t.prototype.addNode=function(t,e){if(!this.nodeMap[t]){var n=new Rt(t,e);this.nodes.push(n),this.nodeMap[t]=n,this.nodeLabelMap[e]||(this.nodeLabelMap[e]=[]),this.nodeLabelMap[e].push(t)}},t.prototype.addEdge=function(t,e,n,r){if((this.edgeIdAutoIncrease||void 0===t)&&(t=this.counter++),!(this.nodeMap[e]&&this.nodeMap[n]&&this.nodeMap[n].edgeMap[t])){var i=new Lt(t,e,n,r);if(this.edges.push(i),this.edgeMap[t]=i,this.nodeMap[e].addEdge(i),this.edgeLabelMap[r]||(this.edgeLabelMap[r]=[]),this.edgeLabelMap[r].push(i),!this.directed){var o=new Lt(t,n,e,r);this.nodeMap[n].addEdge(o),this.edgeLabelMap[r].push(o)}}},t}(),zt=function(){function t(t,e,n,r,i){this.fromNode=t,this.toNode=e,this.nodeEdgeNodeLabel={nodeLabel1:n||Ot,edgeLabel:r||"-1",nodeLabel2:i||Ot}}return t.prototype.equalTo=function(t){return this.fromNode===t.formNode&&this.toNode===t.toNode&&this.nodeEdgeNodeLabel===t.nodeEdgeNodeLabel},t.prototype.notEqualTo=function(t){return!this.equalTo(t)},t}(),Ft=function(){function t(){this.rmpath=[],this.dfsEdgeList=[]}return t.prototype.equalTo=function(t){var e=this.dfsEdgeList.length;if(e!==t.length)return!1;for(var n=0;n<e;n++)if(this.dfsEdgeList[n]!==t[n])return!1;return!0},t.prototype.notEqualTo=function(t){return!this.equalTo(t)},t.prototype.pushBack=function(t,e,n,r,i){return this.dfsEdgeList.push(new zt(t,e,n,r,i)),this.dfsEdgeList},t.prototype.toGraph=function(t,e){void 0===t&&(t=-1),void 0===e&&(e=!1);var n=new Dt(t,!0,e);return this.dfsEdgeList.forEach((function(t){var e=t.fromNode,r=t.toNode,i=t.nodeEdgeNodeLabel,o=i.nodeLabel1,a=i.edgeLabel,s=i.nodeLabel2;o!==Ot&&n.addNode(e,o),s!==Ot&&n.addNode(r,s),o!==Ot&&s!==o&&n.addEdge(void 0,e,r,a)})),n},t.prototype.buildRmpath=function(){this.rmpath=[];for(var t=void 0,e=this.dfsEdgeList.length-1;e>=0;e--){var n=this.dfsEdgeList[e],r=n.fromNode,i=n.toNode;r<i&&(void 0===t||i===t)&&(this.rmpath.push(e),t=r)}return this.rmpath},t.prototype.getNodeNum=function(){var t={};return this.dfsEdgeList.forEach((function(e){t[e.fromNode]||(t[e.fromNode]=!0),t[e.toNode]||(t[e.toNode]=!0)})),Object.keys(t).length},t}(),Bt=function(){function t(t){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],t){for(;t;){var e=t.edge;this.edges.push(e),this.nodesUsed[e.from]=1,this.nodesUsed[e.to]=1,this.edgesUsed[e.id]=1,t=t.preNode}this.edges=this.edges.reverse()}}return t.prototype.hasNode=function(t){return 1===this.nodesUsed[t.id]},t.prototype.hasEdge=function(t){return 1===this.edgesUsed[t.id]},t}(),Ut=function(){function t(t){var e=t.graphs,n=t.minSupport,r=void 0===n?2:n,i=t.minNodeNum,o=void 0===i?1:i,a=t.maxNodeNum,s=void 0===a?4:a,u=t.top,l=void 0===u?10:u,c=t.directed,h=void 0!==c&&c,d=t.verbose,f=void 0!==d&&d;this.graphs=e,this.dfsCode=new Ft,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=r,this.top=l,this.directed=h,this.counter=0,this.maxNodeNum=s,this.minNodeNum=o,this.verbose=f,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return t.prototype.findForwardRootEdges=function(t,e){var n=this,r=[],i=t.nodeMap;return e.edges.forEach((function(t){(n.directed||e.label<=i[t.to].label)&&r.push(t)})),r},t.prototype.findBackwardEdge=function(t,e,n,r){if(!this.directed&&e===n)return null;for(var i=t.nodeMap,o=i[n.to].edges,a=o.length,s=0;s<a;s++){var u=o[s];if(!r.hasEdge(u)&&u.to===e.from)if(this.directed){if(i[e.from].label<i[n.to].label||i[e.from].label===i[n.to].label&&e.label<=u.label)return u}else if(e.label<u.label||e.label===u.label&&i[e.to].label<=i[n.to].label)return u}return null},t.prototype.findForwardPureEdges=function(t,e,n,r){for(var i=[],o=e.to,a=t.nodeMap[o].edges,s=a.length,u=0;u<s;u++){var l=a[u],c=t.nodeMap[l.to];n<=c.label&&!r.hasNode(c)&&i.push(l)}return i},t.prototype.findForwardRmpathEdges=function(t,e,n,r){for(var i=[],o=t.nodeMap,a=o[e.to].label,s=o[e.from].edges,u=s.length,l=0;l<u;l++){var c=s[l],h=o[c.to].label;e.to===c.to||n>h||r.hasNode(o[c.to])||(e.label<c.label||e.label===c.label&&a<=h)&&i.push(c)}return i},t.prototype.getSupport=function(t){var e={};return t.forEach((function(t){e[t.graphId]||(e[t.graphId]=!0)})),Object.keys(e).length},t.prototype.findMinLabel=function(t){var e=void 0;return Object.keys(t).forEach((function(n){var r=t[n],i=r.nodeLabel1,o=r.edgeLabel,a=r.nodeLabel2;e?(i<e.nodeLabel1||i===e.nodeLabel1&&o<e.edgeLabel||i===e.nodeLabel1&&o===e.edgeLabel&&a<e.nodeLabel2)&&(e={nodeLabel1:i,edgeLabel:o,nodeLabel2:a}):e={nodeLabel1:i,edgeLabel:o,nodeLabel2:a}})),e},t.prototype.isMin=function(){var t=this,e=this.dfsCode;if(this.verbose&&console.log("isMin checking",e),1===e.dfsEdgeList.length)return!0;var n=this.directed,r=e.toGraph(-1,n),i=r.nodeMap,o=new Ft,a={};r.nodes.forEach((function(e){t.findForwardRootEdges(r,e).forEach((function(t){var n=i[t.to],o="".concat(e.label,"-").concat(t.label,"-").concat(n.label);a[o]||(a[o]={projected:[],nodeLabel1:e.label,edgeLabel:t.label,nodeLabel2:n.label});var s={graphId:r.id,edge:t,preNode:null};a[o].projected.push(s)}))}));var s=this.findMinLabel(a);if(s){o.dfsEdgeList.push(new zt(0,1,s.nodeLabel1,s.edgeLabel,s.nodeLabel2));var u="".concat(s.nodeLabel1,"-").concat(s.edgeLabel,"-").concat(s.nodeLabel2);return function a(s){for(var u=o.buildRmpath(),l=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,c=o.dfsEdgeList[u[0]].toNode,h={},d=!1,f=0,p=n?-1:0,m=function(e){if(d)return"break";s.forEach((function(n){var i=new Bt(n),a=t.findBackwardEdge(r,i.edges[u[e]],i.edges[u[0]],i);a&&(h[a.label]||(h[a.label]={projected:[],edgeLabel:a.label}),h[a.label].projected.push({graphId:r.id,edge:h,preNode:n}),f=o.dfsEdgeList[u[e]].fromNode,d=!0)}))},g=u.length-1;g>p;g--){if("break"===m(g))break}if(d){var v=t.findMinLabel(h);o.dfsEdgeList.push(new zt(c,f,Ot,v.edgeLabel,Ot));var y=o.dfsEdgeList.length-1;return t.dfsCode.dfsEdgeList[y]===o.dfsEdgeList[y]&&a(h[v.edgeLabel].projected)}var b={};d=!1;var x=0;s.forEach((function(e){var n=new Bt(e),o=t.findForwardPureEdges(r,n.edges[u[0]],l,n);o.length>0&&(d=!0,x=c,o.forEach((function(t){var n="".concat(t.label,"-").concat(i[t.to].label);b[n]||(b[n]={projected:[],edgeLabel:t.label,nodeLabel2:i[t.to].label}),b[n].projected.push({graphId:r.id,edge:t,preNode:e})})))}));var w=u.length,_=function(e){if(d)return"break";var n=u[e];s.forEach((function(e){var a=new Bt(e),s=t.findForwardRmpathEdges(r,a.edges[n],l,a);s.length>0&&(d=!0,x=o.dfsEdgeList[n].fromNode,s.forEach((function(t){var n="".concat(t.label,"-").concat(i[t.to].label);b[n]||(b[n]={projected:[],edgeLabel:t.label,nodeLabel2:i[t.to].label}),b[n].projected.push({graphId:r.id,edge:t,preNode:e})})))}))};for(g=0;g<w;g++){if("break"===_(g))break}if(!d)return!0;var S=t.findMinLabel(b);o.dfsEdgeList.push(new zt(x,c+1,Ot,S.edgeLabel,S.nodeLabel2));var E=o.dfsEdgeList.length-1;return e.dfsEdgeList[E]===o.dfsEdgeList[E]&&a(b["".concat(S.edgeLabel,"-").concat(S.nodeLabel2)].projected)}(a[u].projected)}},t.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var t=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,x.clone)(t))}},t.prototype.subGraphMining=function(t){var e=this;if(!(this.getSupport(t)<this.minSupport)&&this.isMin()){this.report();var n=this.dfsCode.getNodeNum(),r=this.dfsCode.buildRmpath(),i=this.dfsCode.dfsEdgeList[r[0]].toNode,o=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,a={},s={};t.forEach((function(t){for(var u=e.graphs[t.graphId],l=u.nodeMap,c=new Bt(t),h=r.length-1;h>=0;h--){var d=e.findBackwardEdge(u,c.edges[r[h]],c.edges[r[0]],c);if(d){var f="".concat(e.dfsCode.dfsEdgeList[r[h]].fromNode,"-").concat(d.label);s[f]||(s[f]={projected:[],toNodeId:e.dfsCode.dfsEdgeList[r[h]].fromNode,edgeLabel:d.label}),s[f].projected.push({graphId:t.graphId,edge:d,preNode:t})}}if(!(n>=e.maxNodeNum)){e.findForwardPureEdges(u,c.edges[r[0]],o,c).forEach((function(e){var n="".concat(i,"-").concat(e.label,"-").concat(l[e.to].label);a[n]||(a[n]={projected:[],fromNodeId:i,edgeLabel:e.label,nodeLabel2:l[e.to].label}),a[n].projected.push({graphId:t.graphId,edge:e,preNode:t})}));var p=function(n){e.findForwardRmpathEdges(u,c.edges[r[n]],o,c).forEach((function(i){var o="".concat(e.dfsCode.dfsEdgeList[r[n]].fromNode,"-").concat(i.label,"-").concat(l[i.to].label);a[o]||(a[o]={projected:[],fromNodeId:e.dfsCode.dfsEdgeList[r[n]].fromNode,edgeLabel:i.label,nodeLabel2:l[i.to].label}),a[o].projected.push({graphId:t.graphId,edge:i,preNode:t})}))};for(h=0;h<r.length;h++)p(h)}})),Object.keys(s).forEach((function(t){var n=s[t],r=n.toNodeId,o=n.edgeLabel;e.dfsCode.dfsEdgeList.push(new zt(i,r,"-1",o,"-1")),e.subGraphMining(s[t].projected),e.dfsCode.dfsEdgeList.pop()})),Object.keys(a).forEach((function(t){var n=a[t],r=n.fromNodeId,o=n.edgeLabel,s=n.nodeLabel2;e.dfsCode.dfsEdgeList.push(new zt(r,i+1,Ot,o,s)),e.subGraphMining(a[t].projected),e.dfsCode.dfsEdgeList.pop()}))}},t.prototype.generate1EdgeFrequentSubGraphs=function(){var t=this.graphs,e=this.directed,n=this.minSupport,r=this.frequentSize1Subgraphs,i={},o={},a={},s={};return Object.keys(t).forEach((function(n){var r=t[n],u=r.nodeMap;r.nodes.forEach((function(t,r){var l=t.label,c="".concat(n,"-").concat(l);if(!a[c]){var h=i[l]||0;h++,i[l]=h}a[c]={graphKey:n,label:l},t.edges.forEach((function(t){var r=l,i=u[t.to].label;if(!e&&r>i){var a=i;i=r,r=a}var c=t.label,h="".concat(n,"-").concat(r,"-").concat(c,"-").concat(i),d="".concat(r,"-").concat(c,"-").concat(i);if(!o[d]){var f=o[d]||0;f++,o[d]=f}s[h]={graphId:n,nodeLabel1:r,edgeLabel:c,nodeLabel2:i}}))}))})),Object.keys(i).forEach((function(t){if(!(i[t]<n)){var e={nodes:[],edges:[]};e.nodes.push({id:"0",label:t}),r.push(e)}})),r},t.prototype.run=function(){var t=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var e=this.graphs,n=(this.directed,{});Object.keys(e).forEach((function(r){var i=e[r],o=i.nodeMap;i.nodes.forEach((function(e){t.findForwardRootEdges(i,e).forEach((function(t){var i=o[t.to],a="".concat(e.label,"-").concat(t.label,"-").concat(i.label);n[a]||(n[a]={projected:[],nodeLabel1:e.label,edgeLabel:t.label,nodeLabel2:i.label});var s={graphId:r,edge:t,preNode:null};n[a].projected.push(s)}))}))})),Object.keys(n).forEach((function(e){var r=n[e],i=r.projected,o=r.nodeLabel1,a=r.edgeLabel,s=r.nodeLabel2;t.dfsCode.dfsEdgeList.push(new zt(0,1,o,a,s)),t.subGraphMining(i),t.dfsCode.dfsEdgeList.pop()}))}},t}(),jt="cluster";const Vt=function(t){var e=t.graphs,n=t.directed,r=void 0!==n&&n,i=t.nodeLabelProp,o=void 0===i?jt:i,a=t.edgeLabelProp,s=void 0===a?jt:a,u=function(t,e,n,r){var i={};return Object.keys(t).forEach((function(o,a){var s=t[o],u=new Dt(a,!0,e),l={};s.nodes.forEach((function(t,e){u.addNode(e,t[n]),l[t.id]=e})),s.edges.forEach((function(t,e){var n=l[t.source],i=l[t.target];u.addEdge(-1,n,i,t[r])})),u&&u.getNodeNum()&&(i[u.id]=u)})),i}(e,r,o,s),l=t.minSupport,c=t.maxNodeNum,h=t.minNodeNum,d=t.verbose,f=t.top,p=new Ut({graphs:u,minSupport:l,maxNodeNum:c,minNodeNum:h,top:f,verbose:d,directed:r});p.run();var m=function(t,e,n){var r=[];return t.forEach((function(t){var i={nodes:[],edges:[]};t.nodes.forEach((function(t){var n;i.nodes.push(((n={id:"".concat(t.id)})[e]=t.label,n))})),t.edges.forEach((function(t){var e;i.edges.push(((e={source:"".concat(t.from),target:"".concat(t.to)})[n]=t.label,e))})),r.push(i)})),r}(p.frequentSubgraphs,o,s);return m};var Ht=function(t,e,n,r){void 0===n&&(n="cluster"),void 0===r&&(r=2);var i=[],o=t.nodes;return e.forEach((function(t,e){i.push(Gt(o,t,e,n,r))})),i},Gt=function(t,e,n,r,i){var o=[n],a=[],s={};return e.forEach((function(e,u){if(e<=i&&n!==u){o.push(u),a.push(t[u]);var l=t[u][r];s[l]?(s[l].count++,s[l].dists.push(e)):s[l]={count:1,dists:[e]}}})),Object.keys(s).forEach((function(t){s[t].dists=s[t].dists.sort((function(t,e){return t-e}))})),{nodeIdx:n,nodeId:t[n].id,nodeIdxs:o,neighbors:a,neighborNum:o.length-1,nodeLabelCountMap:s}},Wt=function(t,e,n,r){var i=n.nodes;return r||(r={}),Object.keys(t).forEach((function(o){var a,s;if(!r||!r[o]){r[o]={nodes:[],edges:[]};var u=t[o],l=null===(a=e[u.start])||void 0===a?void 0:a.nodeIdxs,c=null===(s=e[u.end])||void 0===s?void 0:s.nodeIdxs;if(l&&c){var h=new Set(c),d=l.filter((function(t){return h.has(t)}));if(d&&d.length){for(var f={},p=d.length,m=0;m<p;m++){var g=i[d[m]];r[o].nodes.push(g),f[g.id]=!0}n.edges.forEach((function(t){f[t.source]&&f[t.target]&&r[o].edges.push(t)}))}}}})),r},Xt=function(t,e,n,r){var i,o,a={};t.nodes.forEach((function(t){a[t.id]=t}));var s=0;return!(null===(i=null==e?void 0:e.edges)||void 0===i?void 0:i.length)||(null===(o=null==e?void 0:e.nodes)||void 0===o?void 0:o.length)<2?0:(t.edges.forEach((function(t){var i=a[t.source][n],o=a[t.target][n],u=null==e?void 0:e.nodes[0][n],l=null==e?void 0:e.nodes[1][n],c=null==e?void 0:e.edges[0][r];t[r]===c&&(i===u&&o===l||i===l&&o===u)&&s++})),s)},Yt=function(t,e){var n={},r={};return t.forEach((function(t,i){n[t.id]={idx:i,node:t,degree:0,inDegree:0,outDegree:0};var o=t[e];r[o]||(r[o]=[]),r[o].push(t)})),{nodeMap:n,nodeLabelMap:r}},qt=function(t,e,n){var r={},i={};return t.forEach((function(t,o){r["".concat(j)]={idx:o,edge:t};var a=t[e];i[a]||(i[a]=[]),i[a].push(t);var s=n[t.source];s&&(s.degree++,s.outDegree++);var u=n[t.target];u&&(u.degree++,u.inDegree++)})),{edgeMap:r,edgeLabelMap:i}},$t=function(t,e,n){var r=e.length,i={};return e.forEach((function(e,o){for(var a=n?0:o+1,s=t[o].id,u=a;u<r;u++)if(o!==u){var l=t[u].id,c=e[u];i["".concat(s,"-").concat(l)]=c,n||(i["".concat(l,"-").concat(s)]=c)}})),i},Kt=function(t,e,n,r,i,o,a,s,u,l,c){var h,d="".concat(e.id,"-").concat(n.id);if(l&&l[d])return l[d];var f=c?c[d]:void 0;if(!f){var p=((h={})[d]={start:r[e.id].idx,end:r[n.id].idx,distance:i},h);f=(c=Wt(p,o,t,c))[d]}return Xt(f,a,s,u)},Zt=function(t,e,n,r){var i,o,a,s=null===(i=t[e])||void 0===i?void 0:i.degree,u=null===(o=t[e])||void 0===o?void 0:o.inDegree,l=null===(a=t[e])||void 0===a?void 0:a.outDegree;return void 0===t[e]&&(s=1/0,u=1/0,l=1/0,r[e].forEach((function(t){var e=n[t.id].degree;s>e&&(s=e);var r=n[t.id].inDegree;u>r&&(u=r);var i=n[t.id].outDegree;l>i&&(l=i)})),t[e]={degree:s,inDegree:u,outDegree:l}),{minPatternNodeLabelDegree:s,minPatternNodeLabelInDegree:u,minPatternNodeLabelOutDegree:l}};const Qt=function(t,e,n,r,i,o,a){var s;if(void 0===n&&(n=!1),void 0===o&&(o="cluster"),void 0===a&&(a="cluster"),t&&t.nodes){var u=t.nodes.length;if(u){var l=at(t,n),c=at(e,n),h=$t(t.nodes,l,n),d=$t(e.nodes,c,n),f=Yt(t.nodes,o),p=f.nodeMap,m=f.nodeLabelMap,g=Yt(e.nodes,o),v=g.nodeMap,y=g.nodeLabelMap;qt(t.edges,a,p);var x=qt(e.edges,a,v).edgeLabelMap,w=[];null==c||c.forEach((function(t){w=w.concat(t)})),i||(i=Math.max.apply(Math,(0,b.__spreadArray)((0,b.__spreadArray)([],w,!1),[2],!1))),r||(r=i);var _=Ht(t,l,o,r),S=Ht(e,c,o,r),E=function(t,e,n,r,i){var o=Math.ceil(n/e),a={},s=0;return r.forEach((function(t,r){for(var u=0,l=0,c=t.nodeIdxs,h=t.neighborNum-1;u<o;){for(var d=c[1+Math.floor(Math.random()*h)],f=0;(a["".concat(r,"-").concat(d)]||a["".concat(d,"-").concat(r)])&&(d=Math.floor(Math.random()*e),!(++f>2*e)););if(f<2*e&&(a["".concat(r,"-").concat(d)]={start:r,end:d,distance:i[r][d]},u++,++s>=n))return a;if(++l>2*e)break}u<o&&(o=(o+(o-u))/(e-r-1))})),a}(0,u,Math.min(100,u*(u-1)/2),_,l),A=Wt(E,_,t),M=Vt({graphs:A,nodeLabelProp:o,edgeLabelProp:a,minSupport:1,minNodeNum:1,maxNodeNum:4,directed:n}).slice(0,10),C=M.length,T=[];M.forEach((function(t,e){T[e]={},Object.keys(A).forEach((function(n){var r=A[n],i=Xt(r,t,o,a);T[e][n]=i}))}));var k=function(t,e,n){for(var r=1/0,i=0,o=function(e){var n=t[e],o=Object.keys(n).sort((function(t,e){return n[t]-n[e]})),a=[];o.forEach((function(t,e){a[e%10]||(a[e%10]={graphs:[],totalCount:0,aveCount:0}),a[e%10].graphs.push(t),a[e%10].totalCount+=n[t]}));var s=0,u=[];a.forEach((function(t){var e=t.totalCount/t.graphs.length;t.aveCount=e,u.push(e);var r=0,i=t.length;t.graphs.forEach((function(e,i){var o=n[e];t.graphs.forEach((function(t,e){i!==e&&(r+=Math.abs(o-n[t]))}))})),s+=r/=i*(i-1)/2})),s/=a.length;var l=0;u.forEach((function(t,e){u.forEach((function(n,r){e!==r&&(l+=Math.abs(t-n))})),l/=u.length*(u.length-1)/2}));var c=l-s;r<c&&(r=c,i=e)},a=0;a<e;a++)o(a);return{structure:n[i],structureCountMap:t[i]}}(T,C,M),I=k.structure,N=k.structureCountMap,P=e.nodes[0],O=[],L=null===(s=e.nodes[0])||void 0===s?void 0:s[o],R=-1/0;e.nodes.forEach((function(t){var e=t[o],n=m[e];(null==n?void 0:n.length)>R&&(R=n.length,O=n,L=e,P=t)}));var D={},z={},F={},B={},U={},j={};Object.keys(y).forEach((function(r,i){U[r]=[],n&&(j[r]=[]);var s=-1/0,u=y[r],l={};u.forEach((function(t){var e=d["".concat(P.id,"-").concat(t.id)];if(e&&U[r].push(e),s<e&&(s=e),l["".concat(P.id,"-").concat(t.id)]={start:0,end:v[t.id].idx,distance:e},n){var i=d["".concat(t.id,"-").concat(P.id)];i&&j[r].push(i)}})),U[r]=U[r].sort((function(t,e){return t-e})),n&&(j[r]=j[r].sort((function(t,e){return t-e}))),z=Wt(l,S,e,z);var c=[];if(Object.keys(l).forEach((function(t){if(F[t])c.push(F[t]);else{var e=z[t];F[t]=Xt(e,I,o,a),c.push(F[t])}})),c=c.sort((function(t,e){return e-t})),B["".concat(P.id,"-").concat(r)]=c,r!==L)for(var f=function(e){var n=O[e],i=_[p[n.id].idx],s=i.nodeLabelCountMap[r],u=y[r].length;if(!s||s.count<u)return O.splice(e,1),"continue";for(var l=!1,d=0;d<u;d++)if(s.dists[d]>U[r][d]){l=!0;break}if(l)return O.splice(e,1),"continue";var f={};i.neighbors.forEach((function(t){var e=h["".concat(n.id,"-").concat(t.id)];f["".concat(n.id,"-").concat(t.id)]={start:p[n.id].idx,end:p[t.id].idx,distance:e}})),A=Wt(f,_,t,A);var m=[];Object.keys(f).forEach((function(t){if(N[t])m.push(N[t]);else{var e=A[t];N[t]=Xt(e,I,o,a),m.push(N[t])}})),m=m.sort((function(t,e){return e-t}));var g=!1;for(d=0;d<u;d++)if(m[d]<c[d]){g=!0;break}return g?(O.splice(e,1),"continue"):void 0},m=((null==O?void 0:O.length)||0)-1;m>=0;m--)f(m)}));var V=[];null==O||O.forEach((function(r){for(var s=p[r.id].idx,u=Gt(t.nodes,l[s],s,o,i).neighbors,c=!1,d=u.length-1;d>=0;d--){if(u.length+1<e.nodes.length)return void(c=!0);var f=u[d],m=f[o];if(y[m]&&y[m].length)if(U[m]&&U[m].length){var g="".concat(r.id,"-").concat(f.id),b=h[g],x=U[m].length-1;if(b>U[m][x])u.splice(d,1);else{if(n){var w="".concat(f.id,"-").concat(r.id),S=h[w];if(x=j[m].length-1,S>j[m][x]){u.splice(d,1);continue}}var E=N[g]?N[g]:Kt(t,r,f,p,b,_,I,o,a,N,A),M="".concat(P.id,"-").concat(m);if(E<B[M][B[M].length-1])u.splice(d,1);else{var C=Zt(D,m,v,y),T=C.minPatternNodeLabelDegree;C.minPatternNodeLabelInDegree,C.minPatternNodeLabelOutDegree;p[f.id].degree<T&&u.splice(d,1)}}}else u.splice(d,1);else u.splice(d,1)}c||V.push({nodes:[r].concat(u)})}));var H=nt(e,P.id,!1).length,G={};n?(Object.keys(H).forEach((function(t){var e=v[t].node[o];G[e]?G[e].push(H[t]):G[e]=[H[t]]})),Object.keys(G).forEach((function(t){G[t].sort((function(t,e){return t-e}))}))):G=U;for(var W=function(r){var i=V[r],s=i.nodes[0],u={},l={};i.nodes.forEach((function(t,e){l[t.id]={idx:e,node:t,degree:0,inDegree:0,outDegree:0};var n=t[o];u[n]?u[n]++:u[n]=1}));var c=[],h={};t.edges.forEach((function(t){l[t.source]&&l[t.target]&&(c.push(t),h[t[a]]?h[t[a]]++:h[t[a]]=1,l[t.source].degree++,l[t.target].degree++,l[t.source].outDegree++,l[t.target].inDegree++)}));for(var d=Object.keys(x).length,f=!1,m=0;m<d;m++){var g=Object.keys(x)[m];if(!h[g]||h[g]<x[g].length){f=!0;break}}if(f)return V.splice(r,1),"continue";var b=c.length;if(b<e.edges.length)return V.splice(r,1),"break";var w=!1,_=function(t){var e=c[t],r=e[a],i=x[r];if(!i||!i.length)return h[r]--,i&&h[r]<i.length?(w=!0,"break"):(c.splice(t,1),l[e.source].degree--,l[e.target].degree--,l[e.source].outDegree--,l[e.target].inDegree--,"continue");var s=l[e.source].node[o],u=l[e.target].node[o],d=!1;return i.forEach((function(t){var e=v[t.source].node,r=v[t.target].node;e[o]===s&&r[o]===u&&(d=!0),n||e[o]!==u||r[o]!==s||(d=!0)})),d?void 0:(h[r]--,i&&h[r]<i.length?(w=!0,"break"):(c.splice(t,1),l[e.source].degree--,l[e.target].degree--,l[e.source].outDegree--,l[e.target].inDegree--,"continue"))};for(m=b-1;m>=0;m--){if("break"===_(m))break}if(w)return V.splice(r,1),"continue";i.edges=c;var S=nt(i,i.nodes[0].id,!1).length;if(Object.keys(S).reverse().forEach((function(t){if(t!==i.nodes[0].id&&!w){if(S[t]===1/0){var e=l[t].node[o];if(u[e]--,u[e]<y[e].length)return void(w=!0);var n=i.nodes.indexOf(l[t].node);return i.nodes.splice(n,1),void(l[t]=void 0)}var r=p[t].node[o];if(!G[r]||!G[r].length||S[t]>G[r][G[r].length-1]){e=l[t].node[o];if(u[e]--,u[e]<y[e].length)return void(w=!0);n=i.nodes.indexOf(l[t].node);i.nodes.splice(n,1),l[t]=void 0}}})),w)return V.splice(r,1),"continue";for(var E=!0,A=0;E&&!w;){if(E=!1,n?l[s.id].degree<v[P.id].degree||l[s.id].inDegree<v[P.id].inDegree||l[s.id].outDegree<v[P.id].outDegree:l[s.id].degree<v[P.id].degree){w=!0;break}if(u[s[o]]<y[s[o]].length){w=!0;break}for(var M=i.nodes.length-1;M>=0;M--){var C=i.nodes[M],T=l[C.id].degree,k=l[C.id].inDegree,I=l[C.id].outDegree,N=C[o],O=Zt(D,N,v,y),L=O.minPatternNodeLabelDegree,R=O.minPatternNodeLabelInDegree,z=O.minPatternNodeLabelOutDegree;if(n?T<L||k<R||I<z:T<L){if(u[C[o]]--,u[C[o]]<y[C[o]].length){w=!0;break}i.nodes.splice(M,1),l[C.id]=void 0,E=!0}}if(w||!E&&0!==A)break;for(var F=(b=c.length)-1;F>=0;F--){var B=c[F];if(!l[B.source]||!l[B.target]){c.splice(F,1);var U=B[a];if(h[U]--,l[B.source]&&(l[B.source].degree--,l[B.source].outDegree--),l[B.target]&&(l[B.target].degree--,l[B.target].inDegree--),x[U]&&h[U]<x[U].length){w=!0;break}E=!0}}A++}return w||w||i.nodes.length<e.nodes.length||c.length<e.edges.length?(V.splice(r,1),"continue"):void 0},X=V.length-1;X>=0;X--){if("break"===W(X))break}var Y=V.length,q=function(t){var e=V[t],n={};e.edges.forEach((function(t){var e="".concat(t.source,"-").concat(t.target,"-").concat(t.label);n[e]?n[e]++:n[e]=1}));for(var r=function(t){var e=V[t],r={};e.edges.forEach((function(t){var e="".concat(t.source,"-").concat(t.target,"-").concat(t.label);r[e]?r[e]++:r[e]=1}));var i=!0;Object.keys(r).length!==Object.keys(n).length?i=!1:Object.keys(n).forEach((function(t){r[t]!==n[t]&&(i=!1)})),i&&V.splice(t,1)},i=Y-1;i>t;i--)r(i);Y=V.length};for(X=0;X<=Y-1;X++)q(X);return V}}};var Jt=function(){function t(t){void 0===t&&(t=10),this.linkedList=new D,this.maxStep=t}return Object.defineProperty(t.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return!this.linkedList.head},t.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},t.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},t.prototype.push=function(t){this.linkedList.prepend(t),this.length>this.maxStep&&this.linkedList.deleteTail()},t.prototype.pop=function(){var t=this.linkedList.deleteHead();return t?t.value:null},t.prototype.toArray=function(){return this.linkedList.toArray().map((function(t){return t.value}))},t.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},t}();const te=Jt;var ee=et;const ne={getAdjMatrix:P,breadthFirstSearch:V,connectedComponent:W,getDegree:Y,getInDegree:q,getOutDegree:$,detectCycle:et,detectDirectedCycle:ee,detectAllCycles:tt,detectAllDirectedCycle:J,detectAllUndirectedCycle:Q,depthFirstSearch:Z,dijkstra:nt,findAllPath:ot,findShortestPath:it,floydWarshall:at,labelPropagation:st,louvain:vt,iLouvain:yt,kCore:bt,kMeans:wt,cosineSimilarity:_t,nodesCosineSimilarity:St,minimumSpanningTree:Nt,pageRank:Pt,getNeighbors:B,Stack:te,GADDI:Qt};var re=n(30329),ie=n(40842),oe=N,ae=function(t){return function(e,n){return e[t]-n[t]}},se=function(t,e,n){return t>=e&&t<=n},ue=function(t,e,n,r){var i=n.x-t.x,o=n.y-t.y,a=e.x-t.x,s=e.y-t.y,u=r.x-n.x,l=r.y-n.y,c=a*l-s*u,h=1/c;if(c*c>1e-4*(a*a+s*s)*(u*u+l*l)){var d=(i*l-o*u)*h,f=(i*s-o*a)*h;return se(d,0,1)&&se(f,0,1)?{x:t.x+d*a,y:t.y+d*s}:null}return null},le=function(t,e){var n=t.x,r=t.y,i=t.width,o=t.height,a=[],s={x:n+i/2,y:r+o/2};a.push({x:n,y:r}),a.push({x:n+i,y:r}),a.push({x:n+i,y:r+o}),a.push({x:n,y:r+o}),a.push({x:n,y:r});for(var u=null,l=1;l<a.length&&!(u=ue(a[l-1],a[l],s,e));l++);return u},ce=function(t,e){var n=t.x,r=t.y,i=t.r,o=e.x-n,a=e.y-r;if(o*o+a*a<i*i)return null;var s=Math.atan(a/o);return{x:n+Math.abs(i*Math.cos(s))*Math.sign(o),y:r+Math.abs(i*Math.sin(s))*Math.sign(a)}},he=function(t,e){var n=t.rx,r=t.ry,i=t.x,o=t.y,a=e.x-i,s=e.y-o,u=Math.atan2(s/r,a/n);return u<0&&(u+=2*Math.PI),{x:i+n*Math.cos(u),y:o+r*Math.sin(u)}},de=function(t,e,n){void 0===n&&(n=1);var r=[t.x,t.y,n];return e&&!isNaN(e[0])||(e=[1,0,0,0,1,0,0,0,1]),re.transformMat3(r,r,e),{x:r[0],y:r[1]}},fe=function(t,e,n){void 0===n&&(n=1),e&&!isNaN(e[0])||(e=[1,0,0,0,1,0,0,0,1]);var r=C.invert([1,0,0,0,1,0,0,0,1],e);r||(r=[1,0,0,0,1,0,0,0,1]);var i=[t.x,t.y,n];return re.transformMat3(i,i,r),{x:i[0],y:i[1]}},pe=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=t.x-n.x,a=t.y-n.y,s=(t.x*t.x-e.x*e.x-e.y*e.y+t.y*t.y)/2,u=(t.x*t.x-n.x*n.x-n.y*n.y+t.y*t.y)/2,l=i*o-r*a;return{x:-(a*s-i*u)/l,y:-(r*u-o*s)/l}},me=function(t,e){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)},ge=function(t,e){var n=[];return t.forEach((function(t){var r=[];t.forEach((function(t){r.push(t*e)})),n.push(r)})),n},ve=function(t){for(var e=[],n=t.length,r=0;r<n;r+=1){e[r]=[];for(var i=0;i<n;i+=1)r===i?e[r][i]=0:0!==t[r][i]&&t[r][i]?e[r][i]=t[r][i]:e[r][i]=1/0}for(var o=0;o<n;o+=1)for(r=0;r<n;r+=1)for(i=0;i<n;i+=1)e[r][i]>e[r][o]+e[o][i]&&(e[r][i]=e[r][o]+e[o][i]);return e},ye=function(t,e){var n=t.nodes,r=t.edges,i=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach((function(t,e){o[t.id]=e;i.push([])})),r&&r.forEach((function(t){var n=t.source,r=t.target,a=o[n],s=o[r];i[a][s]=1,e||(i[s][a]=1)})),i},be=function(t,e){t.translate(e.x,e.y)},xe=function(t,e,n,r){void 0===r&&(r={duration:500});var i=t.getMatrix();i||(i=[1,0,0,0,1,0,0,0,1]);var o=t.getCanvasBBox(),a=e.x-o.minX,s=e.y-o.minY;if(n){var u=a*i[0],l=s*i[4],c=0,h=0,d=0,f=0;t.animate((function(t){return i=oe(i,[["t",(d=u*t)-c,(f=l*t)-h]]),c=d,h=f,{matrix:i}}),r)}else{var p=oe(i,[["t",a,s]]);t.setMatrix(p)}},we=function(t,e){var n=t.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var r=e;(0,x.isArray)(e)||(r=[e,e]),(0,x.isArray)(e)&&1===e.length&&(r=[e[0],e[0]]),n=oe(n,[["s",r[0],r[1]]]),t.setMatrix(n)},_e=function(t,e){var n=t.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]),n=oe(n,[["r",e]]),t.setMatrix(n)},Se=function(t,e,n){for(var r=[],i=0;i<t;i++)r[i]=0;return n.forEach((function(t){t.source&&(r[e[t.source]]+=1),t.target&&(r[e[t.target]]+=1)})),r};function Ee(t,e,n){return(n[0]-t[0])*(e[1]-t[1])==(e[0]-t[0])*(n[1]-t[1])&&Math.min(t[0],e[0])<=n[0]&&n[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=n[1]&&n[1]<=Math.max(t[1],e[1])}var Ae=function(t,e,n){var r=!1,i=t.length;function o(t){return Math.abs(t)<1e-6?0:t<0?-1:1}if(i<=2)return!1;for(var a=0;a<i;a++){var s=t[a],u=t[(a+1)%i];if(Ee(s,u,[e,n]))return!0;o(s[1]-n)>0!=o(u[1]-n)>0&&o(e-(n-s[1])*(s[0]-u[0])/(s[1]-u[1])-s[0])<0&&(r=!r)}return r},Me=function(t,e){return!(e.minX>t.maxX||e.maxX<t.minX||e.minY>t.maxY||e.maxY<t.minY)},Ce=function(t,e){var n=function(t){var e=t.map((function(t){return t[0]})),n=t.map((function(t){return t[1]}));return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,n),maxY:Math.max.apply(null,n)}},r=function(t){for(var e=[],n=t.length,r=0;r<n-1;r++){var i=t[r],o=t[r+1];e.push({from:{x:i[0],y:i[1]},to:{x:o[0],y:o[1]}})}if(e.length>1){var a=t[0],s=t[n-1];e.push({from:{x:s[0],y:s[1]},to:{x:a[0],y:a[1]}})}return e};if(t.length<2||e.length<2)return!1;var i=n(t),o=n(e);if(!Me(i,o))return!1;var a=!1;if((0,x.each)(e,(function(e){if(Ae(t,e[0],e[1]))return a=!0,!1})),a)return!0;if((0,x.each)(t,(function(t){if(Ae(e,t[0],t[1]))return a=!0,!1})),a)return!0;var s=r(t),u=r(e),l=!1;return(0,x.each)(u,(function(t){if(function(t,e){var n=!1;return(0,x.each)(t,(function(t){if(ue(t.from,t.to,e.from,e.to))return n=!0,!1})),n}(s,t))return l=!0,!1})),l},Te=function(){function t(t,e,n,r){this.x1=t,this.y1=e,this.x2=n,this.y2=r}return t.prototype.getBBox=function(){var t=Math.min(this.x1,this.x2),e=Math.min(this.y1,this.y2),n=Math.max(this.x1,this.x2),r=Math.max(this.y1,this.y2);return{x:t,y:e,minX:t,minY:e,maxX:n,maxY:r,width:n-t,height:r-e}},t}(),ke=function(t,e){return{top:[t.minX,t.minY,t.maxX,t.minY],left:[t.minX,t.minY,t.minX,t.maxY],bottom:[t.minX,t.maxY,t.maxX,t.maxY],right:[t.maxX,t.minY,t.maxX,t.maxY]}[e]},Ie=function(t,e){var n=(e.x2-e.x1)*(t.y1-e.y1)-(e.y2-e.y1)*(t.x1-e.x1),r=(t.x2-t.x1)*(t.y1-e.y1)-(t.y2-t.y1)*(t.x1-e.x1),i=(e.y2-e.y1)*(t.x2-t.x1)-(e.x2-e.x1)*(t.y2-t.y1);if(i){var o=n/i,a=r/i;if(o>=0&&o<=1&&a>=0&&a<=1)return o}return Number.POSITIVE_INFINITY},Ne=function(t,e){for(var n=["top","left","bottom","right"],r=t.getBBox(),i=0,o=[],a=0;a<4;a++){var s=ke(r,n[a]),u=s[0],l=s[1],c=s[2],h=s[3];o[a]=ue({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},{x:u,y:l},{x:c,y:h}),o[a]&&(i+=1)}return[o,i]},Pe=function(t,e){for(var n=["top","left","bottom","right"],r=t.getBBox(),i=Number.POSITIVE_INFINITY,o=0,a=0;a<4;a++){var s=ke(r,n[a]),u=s[0],l=s[1],c=s[2],h=s[3],d=Ie(e,new Te(u,l,c,h));(d=Math.abs(d-.5))>=0&&d<=1&&(o+=1,i=d<i?d:i)}return 0===o?-1:i},Oe=function(t){var e=0,n=0;if(t.length>0){for(var r=0,i=t;r<i.length;r++){var o=i[r];e+=o.x,n+=o.y}e/=t.length,n/=t.length}return{x:e,y:n}},Le=function(t,e){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)},Re=function(t,e){var n,r=e.x1,i=e.y1,o=e.x2-r,a=e.y2-i,s=t.x-r,u=t.y-i,l=s*o+u*a;n=l<=0||(l=(s=o-s)*o+(u=a-u)*a)<=0?0:l*l/(o*o+a*a);var c=s*s+u*u-n;return c<0&&(c=0),c},De=function(t,e,n){return void 0===n&&(n=.001),Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<Math.pow(n,2)},ze=function(t,e){var n=t.x<e.x,r=t.x>e.x+e.width,i=t.y>e.y+e.height,o=t.y<e.y;if(!(n||r||i||o))return 0;if(i&&!n&&!r)return Math.pow(e.y+e.height-t.y,2);if(o&&!n&&!r)return Math.pow(t.y-e.y,2);if(n&&!i&&!o)return Math.pow(e.x-t.x,2);if(r&&!i&&!o)return Math.pow(e.x+e.width-t.x,2);var a=Math.min(Math.abs(e.x-t.x),Math.abs(e.x+e.width-t.x)),s=Math.min(Math.abs(e.y-t.y),Math.abs(e.y+e.height-t.y));return a*a+s*s},Fe=function(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=e.x,s=e.y,u=[i-n,o-r];if(ie.exactEquals(u,[0,0]))return NaN;var l=[-u[1],u[0]];ie.normalize(l,l);var c=[a-n,s-r];return Math.abs(ie.dot(c,l))},Be=function(t,e,n){return t+(e-t)*n},Ue=function(t,e,n){for(var r=Math.min(t.length,e.length),i=new Array(r),o=0;o<r;o++)i[o]=Be(t[o],e[o],n);return i},je="rgb(95, 149, 255)",Ve="rgb(0, 0, 0)",He="rgb(247, 250, 255)",Ge="rgb(239, 244, 255)",We="rgb(253, 253, 253)",Xe="rgb(250, 250, 250)",Ye="rgb(224, 224, 224)",qe="rgb(234, 234, 234)",$e="#4572d9";const Ke={version:"0.8.23",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:je,fill:Ge},size:20,color:je,linkPoints:{size:8,lineWidth:1,fill:He,stroke:je}},nodeStateStyles:{active:{fill:He,stroke:je,lineWidth:2,shadowColor:je,shadowBlur:10},selected:{fill:"rgb(255, 255, 255)",stroke:je,lineWidth:4,shadowColor:je,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:"rgb(223, 234, 255)",stroke:$e,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:He,stroke:"rgb(191, 213, 255)",lineWidth:1},disable:{fill:Xe,stroke:Ye,lineWidth:1}},edgeLabel:{style:{fill:Ve,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:Ye,lineAppendWidth:2},color:Ye},edgeStateStyles:{active:{stroke:je,lineWidth:1},selected:{stroke:je,lineWidth:2,shadowColor:je,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:je,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:qe,lineWidth:1},disable:{stroke:"rgb(245, 245, 245)",lineWidth:1}},comboLabel:{style:{fill:Ve,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:We,lineWidth:1,stroke:Ye,r:5,width:20,height:10},size:[20,5],color:Ye,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:je,lineWidth:1,fill:He},selected:{stroke:je,lineWidth:2,fill:We,shadowColor:je,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:$e,lineWidth:2,fill:We,"text-shape":{fontWeight:500}},inactive:{stroke:Ye,fill:We,lineWidth:1},disable:{stroke:qe,fill:Xe,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},windowFontFamily:"undefined"!=typeof window&&window.getComputedStyle&&document.body&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},Ze={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875};var Qe=Math.PI,Je=Math.sin,tn=Math.cos,en=Je(Qe/8),nn=tn(Qe/8),rn=function(t,e){var n=t.getBBox(),r={x:n.minX,y:n.minY},i={x:n.maxX,y:n.maxY};if(e){var o=e.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]),r=de(r,o),i=de(i,o)}var a=r.x,s=r.y,u=i.x,l=i.y;return{x:a,y:s,minX:a,minY:s,maxX:u,maxY:l,width:u-a,height:l-s}},on=function(t){var e=t.sourceNode||t.targetNode,n=e.get("group").getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var r=e.getKeyShape(),i=r.getBBox(),o=t.loopCfg||{},a=o.dist||2*Math.max(i.width,i.height),s=o.position||Ke.defaultLoopPosition,u=[(i.minX+i.maxX)/2+n[6],(i.minY+i.maxY)/2+n[7]],l=[t.startPoint.x,t.startPoint.y],c=[t.endPoint.x,t.endPoint.y],h=i.height/2,d=i.width/2,f=h,p=h,m=f*en,g=f*nn,v=p*en,y=p*nn,b=r.get("type"),x=Math.min(h/2,d/2),w=Math.min(h,d),_=(null==o?void 0:o.pointPadding)?Math.min(w,null==o?void 0:o.pointPadding):x;if(l[0]===c[0]&&l[1]===c[1]){switch(s){case"top":"circle"===b?(l=[u[0]-m,u[1]-g],c=[u[0]+v,u[1]-y]):(l=[u[0]-_,u[1]-h],c=[u[0]+_,u[1]-h]);break;case"top-right":f=h,p=d,"circle"===b?(l=[u[0]+(m=f*en),u[1]-(g=f*nn)],c=[u[0]+(y=p*nn),u[1]-(v=p*en)]):(l=[u[0]+d-_,u[1]-h],c=[u[0]+d,u[1]-h+_]);break;case"right":f=d,p=d,"circle"===b?(l=[u[0]+(g=f*nn),u[1]-(m=f*en)],c=[u[0]+(y=p*nn),u[1]+(v=p*en)]):(l=[u[0]+d,u[1]-_],c=[u[0]+d,u[1]+_]);break;case"bottom-right":f=d,p=h,"circle"===b?(l=[u[0]+(g=f*nn),u[1]+(m=f*en)],c=[u[0]+(v=p*en),u[1]+(y=p*nn)]):(l=[u[0]+d,u[1]+h-_],c=[u[0]+d-_,u[1]+h]);break;case"bottom":f=h,p=h,"circle"===b?(l=[u[0]+(m=f*en),u[1]+(g=f*nn)],c=[u[0]-(v=p*en),u[1]+(y=p*nn)]):(l=[u[0]-_,u[1]+h],c=[u[0]+_,u[1]+h]);break;case"bottom-left":f=h,p=d,"circle"===b?(l=[u[0]-(m=f*en),u[1]+(g=f*nn)],c=[u[0]-(y=p*nn),u[1]+(v=p*en)]):(l=[u[0]-d,u[1]+h-_],c=[u[0]-d+_,u[1]+h]);break;case"left":f=d,p=d,"circle"===b?(l=[u[0]-(g=f*nn),u[1]+(m=f*en)],c=[u[0]-(y=p*nn),u[1]-(v=p*en)]):(l=[u[0]-d,u[1]-_],c=[u[0]-d,u[1]+_]);break;case"top-left":f=d,p=h,"circle"===b?(l=[u[0]-(g=f*nn),u[1]-(m=f*en)],c=[u[0]-(v=p*en),u[1]-(y=p*nn)]):(l=[u[0]-d+_,u[1]-h],c=[u[0]-d,u[1]-h+_]);break;default:l=[u[0]-(m=(f=d)*en),u[1]-(g=f*nn)],c=[u[0]+(v=(p=d)*en),u[1]-(y=p*nn)]}if(!1===o.clockwise){var S=[l[0],l[1]];l=[c[0],c[1]],c=[S[0],S[1]]}}var E=[l[0]-u[0],l[1]-u[1]],A=(f+a)/f,M=(p+a)/p;!1===o.clockwise&&(A=(p+a)/p,M=(f+a)/f);var C=ie.scale([0,0],E,A),T=[u[0]+C[0],u[1]+C[1]],k=[c[0]-u[0],c[1]-u[1]],I=ie.scale([0,0],k,M),N=[u[0]+I[0],u[1]+I[1]];return t.startPoint={x:l[0],y:l[1]},t.endPoint={x:c[0],y:c[1]},t.controlPoints=[{x:T[0],y:T[1]},{x:N[0],y:N[1]}],t},an=function(t,e,n,r,i){var o=1e-4,a=[],s=null==t?void 0:t.getPoint(e);if(!s)return{x:0,y:0,angle:0};if(e<o)a=t.getStartTangent().reverse();else if(e>.9999)a=t.getEndTangent();else{var u=null==t?void 0:t.getPoint(e+o);a.push([s.x,s.y]),a.push([u.x,u.y])}var l=Math.atan2(a[1][1]-a[0][1],a[1][0]-a[0][0]);if(l<0&&(l+=2*Qe),n&&(s.x+=tn(l)*n,s.y+=Je(l)*n),r){var c=l-Qe/2;l>.5*Qe&&l<1.5*Qe&&(c-=Qe),s.x+=tn(c)*r,s.y+=Je(c)*r}var h={x:s.x,y:s.y,angle:l};return i?(l>.5*Qe&&l<1.5*Qe&&(l-=Qe),(0,b.__assign)({rotate:l},h)):h},sn=function t(e,n,r,i){if(!1===i(e,n,r))return!1;if(e&&e.children)for(var o=e.children.length-1;o>=0;o--)if(!t(e.children[o],e,o,i))return!1;return!0},un=function t(e,n,r,i){if(e&&e.children)for(var o=e.children.length-1;o>=0;o--)if(!t(e.children[o],e,o,i))return;return!1!==i(e,n,r)},ln=function(t,e){"function"==typeof e&&sn(t,null,-1,e)},cn=function(t,e){"function"==typeof e&&un(t,null,-1,e)},hn=function(t,e){return e*(Ze[t]||1)},dn=function(t,e){var n=0,r=new RegExp("[-]+");return t.split("").forEach((function(t){r.test(t)?n+=e:n+=hn(t,e)})),[n,e]},fn=function(t,e){return"number"!=typeof e||e<=0||e>=t.length?t:t.substring(0,e)+"..."},pn=function(t,e){var n=[],r={},i={};t.forEach((function(t){i[t.id]=t})),t.forEach((function(t,e){var o=(0,x.clone)(t);o.itemType="combo",o.children=void 0,o.parentId===o.id?(console.warn("The parentId for combo ".concat(o.id," can not be the same as the combo's id")),delete o.parentId):o.parentId&&!i[o.parentId]&&(console.warn("The parent combo for combo ".concat(o.id," does not exist!")),delete o.parentId);var a=r[o.id];if(a){if(o.children=a.children,r[o.id]=o,!(a=o).parentId)return void n.push(a);var s=r[a.parentId];if(s)s.children?s.children.push(o):s.children=[o];else{var u={id:a.parentId,children:[a]};r[a.parentId]=u,r[o.id]=o}}else if((0,x.isString)(t.parentId)){var l=r[t.parentId];if(l)l.children?l.children.push(o):l.children=[o],r[o.id]=o;else{var c={id:t.parentId,children:[o]};r[c.id]=c,r[o.id]=o}}else n.push(o),r[o.id]=o}));var o={};(e||[]).forEach((function(t){o[t.id]=t;var e=r[t.comboId];if(e){var n={id:t.id,comboId:t.comboId};e.children?e.children.push(n):e.children=[n],n.itemType="node",r[t.id]=n}}));var a=0;return n.forEach((function(t){t.depth=a+10,ln(t,(function(t){var e,n=r[t.id].itemType;e="node"===n?r[t.comboId]:r[t.parentId],t.depth=e&&"node"===n?a+1:a+10,a<t.depth&&(a=t.depth);var i=o[t.id];return i&&(i.depth=t.depth),!0}))})),n},mn=function(t,e,n){var r,i,o=t,a={root:{children:t}},s=!1,u="root";(t||[]).forEach((function(t){if(!s)return t.id===e?(i=t,"combo"===t.itemType?i.parentId=n:i.comboId=n,void(s=!0)):void ln(t,(function(t){var r;return a[t.id]={children:(null==t?void 0:t.children)||[]},o=null===(r=a[t.parentId||t.comboId||"root"])||void 0===r?void 0:r.children,!t||!t.removed&&e!==t.id||!o||(u=t.parentId||t.comboId||"root",i=t,"combo"===t.itemType?i.parentId=n:i.comboId=n,s=!0,!1)}))}));var l=(o=null===(r=a[u])||void 0===r?void 0:r.children)?o.indexOf(i):-1;if(l>-1&&o.splice(l,1),s||(i={id:e,itemType:"node",comboId:n},a[e]={children:void 0}),e){var c=!1;if(n){var h=0;(t||[]).forEach((function(t){c||ln(t,(function(t){return n!==t.id||(c=!0,t.children?t.children.push(i):t.children=[i],h=t.depth,"node"===i.itemType?i.depth=h+2:i.depth=h+1,!1)}))}))}else n&&c||"node"===i.itemType||t.push(i);var d=i.depth;ln(i,(function(t){return"node"===t.itemType?d+=2:d+=1,t.depth=d,!0}))}return t},gn=function(t,e,n){var r={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};if(!t||0===t.length){var i=(null==n?void 0:n.getModel())||{},o=i.x,a=i.y,s=i.fixSize,u=i.collapsed,l=i.fixCollapseSize,c=u?l:s,h=(0,x.isArray)(c)?c:[c,c],d=h[0],f=h[1],p=[d/2,f/2];return{minX:o-p[0],minY:a-p[1],maxX:o+p[0],maxY:a+p[1],x:o,y:a,width:d,height:f}}return t.forEach((function(t){var n=e.findById(t.id);if(n&&n.isVisible()){n.set("bboxCanvasCache",void 0);var i=n.getCanvasBBox();i.x&&r.minX>i.minX&&(r.minX=i.minX),i.y&&r.minY>i.minY&&(r.minY=i.minY),i.x&&r.maxX<i.maxX&&(r.maxX=i.maxX),i.y&&r.maxY<i.maxY&&(r.maxY=i.maxY)}})),r.x=(r.minX+r.maxX)/2,r.y=(r.minY+r.maxY)/2,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,"circle"===(null==n?void 0:n.getKeyShape().get("type"))&&(r.width=Math.hypot(r.height,r.width),r.height=r.width),Object.keys(r).forEach((function(t){r[t]!==1/0&&r[t]!==-1/0||(r[t]=void 0)})),r},vn=function(t){var e=(0,x.isNumber)(t.x)||(0,x.isNumber)(t.y)||t.type||t.anchorPoints||t.size;return t.style&&(e=e||(0,x.isNumber)(t.style.r)||(0,x.isNumber)(t.style.width)||(0,x.isNumber)(t.style.height)||(0,x.isNumber)(t.style.rx)||(0,x.isNumber)(t.style.ry)),e},yn=function(t){var e={};return Object.keys(t).forEach((function(n){var r=t[n];if("img"!==n||(0,x.isString)(r))if((0,x.isObject)(r)&&!(0,x.isArray)(r)){var i={};Object.keys(r).forEach((function(t){var e=r[t];("img"!==t||(0,x.isString)(e))&&(i[t]=(0,x.clone)(e))})),e[n]=i}else e[n]=(0,x.clone)(r)})),e},bn=function(t){var e,n=t.animateCfg,r=t.callback;if(n)if(e=(0,x.clone)(n),n.callback){var i=n.callback;e.callback=function(){r(),i()}}else e.callback=r;else e={duration:500,callback:r};return e},xn=function(t){if(!t)return console.error("G6 Error Tips: the data must be defined"),!1;var e=t.nodes,n=t.edges,r=t.combos,i=void 0===r?[]:r;if(!e&&!n){var o=!0;return ln(t,(function(t){return!!(0,x.isString)(t.id)||(o=!1,!1)})),o}var a=(e||[]).find((function(t){return!(0,x.isString)(t.id)}));if(a)return console.warn("G6 Warning Tips: missing 'id' property, or %c".concat(a.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1;var s=(e||[]).map((function(t){return t.id})),u=null==i?void 0:i.map((function(t){return t.id})),l=(0,b.__spreadArray)((0,b.__spreadArray)([],s,!0),u,!0),c=(n||[]).find((function(t){return!l.includes(t.source)||!l.includes(t.target)}));return!c||(console.warn("G6 Warning Tips: The source %c".concat(c.source,"%c or the target %c").concat(c.target,"%c of the edge do not exist in the nodes or combos."),"font-size: 20px; color: red;","","font-size: 20px; color: red;",""),!1)},wn=function(){function t(t){this.graph=t,this.destroyed=!1,this.modes=t.get("modes")||{default:[]},this.formatModes(),this.mode=t.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return t.prototype.formatModes=function(){var t=this.modes;(0,x.each)(t,(function(t){(0,x.each)(t,(function(e,n){(0,x.isString)(e)&&(t[n]={type:e})}))}))},t.prototype.setBehaviors=function(t){var e,n=this.graph,r=this.modes[t],i=[];(0,x.each)(r||[],(function(t){var r=S.getBehavior(t.type||t);r&&(e=new r(t))&&(e.bind(n),i.push(e))})),this.currentBehaves=i},t.mergeBehaviors=function(t,e){return(0,x.each)(e,(function(e){t.indexOf(e)<0&&((0,x.isString)(e)&&(e={type:e}),t.push(e))})),t},t.filterBehaviors=function(t,e){var n=[];return t.forEach((function(t){var r="";r=(0,x.isString)(t)?t:t.type,e.indexOf(r)<0&&n.push(t)})),n},t.prototype.setMode=function(t){var e=this.modes,n=this.graph,r=t;e[r]&&(n.emit("beforemodechange",{mode:t}),(0,x.each)(this.currentBehaves,(function(t){t.delegate&&t.delegate.remove(),t.unbind(n)})),this.setBehaviors(r),n.emit("aftermodechange",{mode:t}),this.mode=t)},t.prototype.getMode=function(){return this.mode},t.prototype.manipulateBehaviors=function(e,n,r){var i,o=this;if(i=(0,x.isArray)(e)?e:[e],(0,x.isArray)(n))return(0,x.each)(n,(function(e){o.modes[e]?o.modes[e]=r?t.mergeBehaviors(o.modes[e]||[],i):t.filterBehaviors(o.modes[e]||[],i):r&&(o.modes[e]=i)})),this;var a=n;return n||(a=this.mode),this.modes[a]||r&&(this.modes[a]=i),this.modes[a]=r?t.mergeBehaviors(this.modes[a]||[],i):t.filterBehaviors(this.modes[a]||[],i),this.formatModes(),this.setMode(this.mode),this},t.prototype.updateBehavior=function(t,e,n){(0,x.isString)(t)&&(t={type:t});var r=[];if(n&&n!==this.mode&&"default"!==n){if(!(r=this.modes[n])||!r.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;var i=r.length;for(a=0;a<i;a++){if((s=r[a]).type===t.type||s===t.type)return s===t.type&&(s={type:s}),Object.assign(s,e),r[a]=s,this;a===i-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(!(r=this.currentBehaves)||!r.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var o=r.length,a=0;a<o;a++){var s;if((s=r[a]).type===t.type)return s.updateCfg(e),this;a===o-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},t.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},t}();const _n=wn;var Sn="\t\n\v\f\r \u2028\u2029",En=new RegExp("([a-z])["+Sn+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Sn+"]*,?["+Sn+"]*)+)","ig"),An=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Sn+"]*,?["+Sn+"]*","ig"),Mn=function(t){if(!t)return null;if((0,x.isArray)(t))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(t).replace(En,(function(r,i,o){var a=[],s=i.toLowerCase();if(o.replace(An,(function(t,e){e&&a.push(+e)})),"m"===s&&a.length>2&&(n.push([i].concat(a.splice(0,2))),s="l",i="m"===i?"l":"L"),"o"===s&&1===a.length&&n.push([i,a[0]]),"r"===s)n.push([i].concat(a));else for(;a.length>=e[s]&&(n.push([i].concat(a.splice(0,e[s]))),e[s]););return t})),n},Cn=function(t,e){for(var n=[],r=0,i=t.length;i-2*!e>r;r+=2){var o=[{x:+t[r-2],y:+t[r-1]},{x:+t[r],y:+t[r+1]},{x:+t[r+2],y:+t[r+3]},{x:+t[r+4],y:+t[r+5]}];e?r?i-4===r?o[3]={x:+t[0],y:+t[1]}:i-2===r&&(o[2]={x:+t[0],y:+t[1]},o[3]={x:+t[2],y:+t[3]}):o[0]={x:+t[i-2],y:+t[i-1]}:i-4===r?o[3]=o[2]:r||(o[0]={x:+t[r],y:+t[r+1]}),n.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return n},Tn=function(t,e,n,r,i){var o=[];if(null===i&&null===r&&(r=n),t=+t,e=+e,n=+n,r=+r,null!==i){var a=Math.PI/180,s=t+n*Math.cos(-r*a),u=t+n*Math.cos(-i*a);o=[["M",s,e+n*Math.sin(-r*a)],["A",n,n,0,+(i-r>180),0,u,e+n*Math.sin(-i*a)]]}else o=[["M",t,e],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]];return o},kn=function(t){if(!(t=Mn(t))||!t.length)return[["M",0,0]];var e,n,r=[],i=0,o=0,a=0,s=0,u=0;"M"===t[0][0]&&(a=i=+t[0][1],s=o=+t[0][2],u++,r[0]=["M",i,o]);for(var l=3===t.length&&"M"===t[0][0]&&"R"===t[1][0].toUpperCase()&&"Z"===t[2][0].toUpperCase(),c=void 0,h=void 0,d=u,f=t.length;d<f;d++){if(r.push(c=[]),(e=(h=t[d])[0])!==e.toUpperCase())switch(c[0]=e.toUpperCase(),c[0]){case"A":c[1]=h[1],c[2]=h[2],c[3]=h[3],c[4]=h[4],c[5]=h[5],c[6]=+h[6]+i,c[7]=+h[7]+o;break;case"V":c[1]=+h[1]+o;break;case"H":c[1]=+h[1]+i;break;case"R":for(var p=2,m=(n=[i,o].concat(h.slice(1))).length;p<m;p++)n[p]=+n[p]+i,n[++p]=+n[p]+o;r.pop(),r=r.concat(Cn(n,l));break;case"O":r.pop(),(n=Tn(i,o,h[1],h[2])).push(n[0]),r=r.concat(n);break;case"U":r.pop(),r=r.concat(Tn(i,o,h[1],h[2],h[3])),c=["U"].concat(r[r.length-1].slice(-2));break;case"M":a=+h[1]+i,s=+h[2]+o;break;default:for(p=1,m=h.length;p<m;p++)c[p]=+h[p]+(p%2?i:o)}else if("R"===e)n=[i,o].concat(h.slice(1)),r.pop(),r=r.concat(Cn(n,l)),c=["R"].concat(h.slice(-2));else if("O"===e)r.pop(),(n=Tn(i,o,h[1],h[2])).push(n[0]),r=r.concat(n);else if("U"===e)r.pop(),r=r.concat(Tn(i,o,h[1],h[2],h[3])),c=["U"].concat(r[r.length-1].slice(-2));else for(var g=0,v=h.length;g<v;g++)c[g]=h[g];if("O"!==(e=e.toUpperCase()))switch(c[0]){case"Z":i=+a,o=+s;break;case"H":i=c[1];break;case"V":o=c[1];break;case"M":a=c[c.length-2],s=c[c.length-1];break;default:i=c[c.length-2],o=c[c.length-1]}}return r},In=function(t,e,n,r){return[t,e,n,r,n,r]},Nn=function(t,e,n,r,i,o){var a=1/3,s=2/3;return[a*t+s*n,a*e+s*r,a*i+s*n,a*o+s*r,i,o]},Pn=function(t,e,n,r,i,o,a,s,u,l){n===r&&(n+=1);var c,h,d,f,p,m=120*Math.PI/180,g=Math.PI/180*(+i||0),v=[],y=function(t,e,n){return{x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}};if(l)h=l[0],d=l[1],f=l[2],p=l[3];else{t=(c=y(t,e,-g)).x,e=c.y,s=(c=y(s,u,-g)).x,u=c.y,t===s&&e===u&&(s+=1,u+=1);var b=(t-s)/2,x=(e-u)/2,w=b*b/(n*n)+x*x/(r*r);w>1&&(n*=w=Math.sqrt(w),r*=w);var _=n*n,S=r*r,E=(o===a?-1:1)*Math.sqrt(Math.abs((_*S-_*x*x-S*b*b)/(_*x*x+S*b*b)));f=E*n*x/r+(t+s)/2,p=E*-r*b/n+(e+u)/2,h=Math.asin(((e-p)/r).toFixed(9)),d=Math.asin(((u-p)/r).toFixed(9)),h=t<f?Math.PI-h:h,d=s<f?Math.PI-d:d,h<0&&(h=2*Math.PI+h),d<0&&(d=2*Math.PI+d),a&&h>d&&(h-=2*Math.PI),!a&&d>h&&(d-=2*Math.PI)}var A=d-h;if(Math.abs(A)>m){var M=d,C=s,T=u;d=h+m*(a&&d>h?1:-1),s=f+n*Math.cos(d),u=p+r*Math.sin(d),v=Pn(s,u,n,r,i,0,a,C,T,[d,M,f,p])}A=d-h;var k=Math.cos(h),I=Math.sin(h),N=Math.cos(d),P=Math.sin(d),O=Math.tan(A/4),L=4/3*n*O,R=4/3*r*O,D=[t,e],z=[t+L*I,e-R*k],F=[s+L*P,u-R*N],B=[s,u];if(z[0]=2*D[0]-z[0],z[1]=2*D[1]-z[1],l)return[z,F,B].concat(v);for(var U=[],j=0,V=(v=[z,F,B].concat(v).join().split(",")).length;j<V;j++)U[j]=j%2?y(v[j-1],v[j],g).y:y(v[j],v[j+1],g).x;return U},On=function(t,e){var n,r=kn(t),i=e&&kn(e),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=[],u=[],l="",c="",h=function(t,e,n){var r,i;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(Pn.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"===n||"S"===n?(r=2*e.x-e.bx,i=2*e.y-e.by):(r=e.x,i=e.y),t=["C",r,i].concat(t.slice(1));break;case"T":"Q"===n||"T"===n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(Nn(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(Nn(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(In(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(In(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(In(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(In(e.x,e.y,e.X,e.Y))}return t},d=function(t,e){if(t[e].length>7){t[e].shift();for(var o=t[e];o.length;)s[e]="A",i&&(u[e]="A"),t.splice(e++,0,["C"].concat(o.splice(0,6)));t.splice(e,1),n=Math.max(r.length,i&&i.length||0)}},f=function(t,e,o,a,s){t&&e&&"M"===t[s][0]&&"M"!==e[s][0]&&(e.splice(s,0,["M",a.x,a.y]),o.bx=0,o.by=0,o.x=t[s][1],o.y=t[s][2],n=Math.max(r.length,i&&i.length||0))};n=Math.max(r.length,i&&i.length||0);for(var p=0;p<n;p++){r[p]&&(l=r[p][0]),"C"!==l&&(s[p]=l,p&&(c=s[p-1])),r[p]=h(r[p],o,c),"A"!==s[p]&&"C"===l&&(s[p]="C"),d(r,p),i&&(i[p]&&(l=i[p][0]),"C"!==l&&(u[p]=l,p&&(c=u[p-1])),i[p]=h(i[p],a,c),"A"!==u[p]&&"C"===l&&(u[p]="C"),d(i,p)),f(r,i,o,a,p),f(i,r,a,o,p);var m=r[p],g=i&&i[p],v=m.length,y=i&&g.length;o.x=m[v-2],o.y=m[v-1],o.bx=parseFloat(m[v-4])||o.x,o.by=parseFloat(m[v-3])||o.y,a.bx=i&&(parseFloat(g[y-4])||a.x),a.by=i&&(parseFloat(g[y-3])||a.y),a.x=i&&g[y-2],a.y=i&&g[y-1]}return i?[r,i]:r},Ln=/,?([a-z]),?/gi,Rn=function(t){return t.join(",").replace(Ln,"$1")},Dn=function(t,e,n,r,i){return t*(t*(-3*e+9*n-9*r+3*i)+6*e-12*n+6*r)-3*e+3*n},zn=function(t,e,n,r,i,o,a,s,u){null===u&&(u=1);for(var l=(u=u>1?1:u<0?0:u)/2,c=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0,f=0;f<12;f++){var p=l*c[f]+l,m=Dn(p,t,n,i,a),g=Dn(p,e,r,o,s),v=m*m+g*g;d+=h[f]*Math.sqrt(v)}return l*d},Fn=function(t,e,n,r,i,o,a,s){for(var u,l,c,h,d=[],f=[[],[]],p=0;p<2;++p)if(0===p?(l=6*t-12*n+6*i,u=-3*t+9*n-9*i+3*a,c=3*n-3*t):(l=6*e-12*r+6*o,u=-3*e+9*r-9*o+3*s,c=3*r-3*e),Math.abs(u)<1e-12){if(Math.abs(l)<1e-12)continue;(h=-c/l)>0&&h<1&&d.push(h)}else{var m=l*l-4*c*u,g=Math.sqrt(m);if(!(m<0)){var v=(-l+g)/(2*u);v>0&&v<1&&d.push(v);var y=(-l-g)/(2*u);y>0&&y<1&&d.push(y)}}for(var b,x=d.length,w=x;x--;)b=1-(h=d[x]),f[0][x]=b*b*b*t+3*b*b*h*n+3*b*h*h*i+h*h*h*a,f[1][x]=b*b*b*e+3*b*b*h*r+3*b*h*h*o+h*h*h*s;return f[0][w]=t,f[1][w]=e,f[0][w+1]=a,f[1][w+1]=s,f[0].length=f[1].length=w+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}},Bn=function(t,e,n,r,i,o,a,s){if(!(Math.max(t,n)<Math.min(i,a)||Math.min(t,n)>Math.max(i,a)||Math.max(e,r)<Math.min(o,s)||Math.min(e,r)>Math.max(o,s))){var u=(t-n)*(o-s)-(e-r)*(i-a);if(u){var l=((t*r-e*n)*(i-a)-(t-n)*(i*s-o*a))/u,c=((t*r-e*n)*(o-s)-(e-r)*(i*s-o*a))/u,h=+l.toFixed(2),d=+c.toFixed(2);if(!(h<+Math.min(t,n).toFixed(2)||h>+Math.max(t,n).toFixed(2)||h<+Math.min(i,a).toFixed(2)||h>+Math.max(i,a).toFixed(2)||d<+Math.min(e,r).toFixed(2)||d>+Math.max(e,r).toFixed(2)||d<+Math.min(o,s).toFixed(2)||d>+Math.max(o,s).toFixed(2)))return{x:l,y:c}}}},Un=function(t,e,n){return e>=t.x&&e<=t.x+t.width&&n>=t.y&&n<=t.y+t.height},jn=function(t,e,n,r,i){if(i)return[["M",+t+ +i,e],["l",n-2*i,0],["a",i,i,0,0,1,i,i],["l",0,r-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-n,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-r],["a",i,i,0,0,1,i,-i],["z"]];var o=[["M",t,e],["l",n,0],["l",0,r],["l",-n,0],["z"]];return o.parsePathArray=Rn,o},Vn=function(t,e,n,r){return null===t&&(t=e=n=r=0),null===e&&(e=t.y,n=t.width,r=t.height,t=t.x),{x:t,y:e,width:n,w:n,height:r,h:r,x2:t+n,y2:e+r,cx:t+n/2,cy:e+r/2,r1:Math.min(n,r)/2,r2:Math.max(n,r)/2,r0:Math.sqrt(n*n+r*r)/2,path:jn(t,e,n,r),vb:[t,e,n,r].join(" ")}},Hn=function(t,e,n,r,i,o,a,s){(0,x.isArray)(t)||(t=[t,e,n,r,i,o,a,s]);var u=Fn.apply(null,t);return Vn(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},Gn=function(t,e,n,r,i,o,a,s,u){var l=1-u,c=Math.pow(l,3),h=Math.pow(l,2),d=u*u,f=d*u,p=t+2*u*(n-t)+d*(i-2*n+t),m=e+2*u*(r-e)+d*(o-2*r+e),g=n+2*u*(i-n)+d*(a-2*i+n),v=r+2*u*(o-r)+d*(s-2*o+r);return{x:c*t+3*h*u*n+3*l*u*u*i+f*a,y:c*e+3*h*u*r+3*l*u*u*o+f*s,m:{x:p,y:m},n:{x:g,y:v},start:{x:l*t+u*n,y:l*e+u*r},end:{x:l*i+u*a,y:l*o+u*s},alpha:90-180*Math.atan2(p-g,m-v)/Math.PI}},Wn=function(t,e,n){if(!function(t,e){return t=Vn(t),e=Vn(e),Un(e,t.x,t.y)||Un(e,t.x2,t.y)||Un(e,t.x,t.y2)||Un(e,t.x2,t.y2)||Un(t,e.x,e.y)||Un(t,e.x2,e.y)||Un(t,e.x,e.y2)||Un(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)}(Hn(t),Hn(e)))return n?0:[];for(var r=~~(zn.apply(0,t)/8),i=~~(zn.apply(0,e)/8),o=[],a=[],s={},u=n?0:[],l=0;l<r+1;l++){var c=Gn.apply(0,t.concat(l/r));o.push({x:c.x,y:c.y,t:l/r})}for(l=0;l<i+1;l++){c=Gn.apply(0,e.concat(l/i));a.push({x:c.x,y:c.y,t:l/i})}for(l=0;l<r;l++)for(var h=0;h<i;h++){var d=o[l],f=o[l+1],p=a[h],m=a[h+1],g=Math.abs(f.x-d.x)<.001?"y":"x",v=Math.abs(m.x-p.x)<.001?"y":"x",y=Bn(d.x,d.y,f.x,f.y,p.x,p.y,m.x,m.y);if(y){if(s[y.x.toFixed(4)]===y.y.toFixed(4))continue;s[y.x.toFixed(4)]=y.y.toFixed(4);var b=d.t+Math.abs((y[g]-d[g])/(f[g]-d[g]))*(f.t-d.t),x=p.t+Math.abs((y[v]-p[v])/(m[v]-p[v]))*(m.t-p.t);b>=0&&b<=1&&x>=0&&x<=1&&(n?u+=1:u.push({x:y.x,y:y.y,t1:b,t2:x}))}}return u},Xn=function(t,e){return function(t,e,n){var r,i,o,a,s,u,l,c,h,d;t=On(t),e=On(e);for(var f=n?0:[],p=0,m=t.length;p<m;p++){var g=t[p];if("M"===g[0])r=s=g[1],i=u=g[2];else{"C"===g[0]?(h=[r,i].concat(g.slice(1)),r=h[6],i=h[7]):(h=[r,i,r,i,s,u,s,u],r=s,i=u);for(var v=0,y=e.length;v<y;v++){var b=e[v];if("M"===b[0])o=l=b[1],a=c=b[2];else{"C"===b[0]?(d=[o,a].concat(b.slice(1)),o=d[6],a=d[7]):(d=[o,a,o,a,l,c,l,c],o=l,a=c);var x=Wn(h,d,n);if(n)f+=x;else{for(var w=0,_=x.length;w<_;w++)x[w].segment1=p,x[w].segment2=v,x[w].bez1=h,x[w].bez2=d;f=f.concat(x)}}}}}return f}(t,e)};function Yn(t,e){var n=[],r=[];return t.length&&function t(e,i){if(1===e.length)n.push(e[0]),r.push(e[0]);else{for(var o=[],a=0;a<e.length-1;a++)0===a&&n.push(e[0]),a===e.length-2&&r.push(e[a+1]),o[a]=[(1-i)*e[a][0]+i*e[a+1][0],(1-i)*e[a][1]+i*e[a+1][1]];t(o,i)}}(t,e),{left:n,right:r.reverse()}}var qn=function(t,e,n){if(1===n)return[[].concat(t)];var r=[];if("L"===e[0]||"C"===e[0]||"Q"===e[0])r=r.concat(function(t,e,n){var r=[[t[1],t[2]]];n=n||2;var i=[];"A"===e[0]?(r.push(e[6]),r.push(e[7])):"C"===e[0]?(r.push([e[1],e[2]]),r.push([e[3],e[4]]),r.push([e[5],e[6]])):"S"===e[0]||"Q"===e[0]?(r.push([e[1],e[2]]),r.push([e[3],e[4]])):r.push([e[1],e[2]]);for(var o=r,a=1/n,s=0;s<n-1;s++){var u=Yn(o,a/(1-a*s));i.push(u.left),o=u.right}return i.push(o),i.map((function(t){var e=[];return 4===t.length&&(e.push("C"),e=e.concat(t[2])),t.length>=3&&(3===t.length&&e.push("Q"),e=e.concat(t[1])),2===t.length&&e.push("L"),e.concat(t[t.length-1])}))}(t,e,n));else{var i=[].concat(t);"M"===i[0]&&(i[0]="L");for(var o=0;o<=n-1;o++)r.push(i)}return r},$n=function(t,e){if(1===t.length)return t;var n=t.length-1,r=e.length-1,i=n/r,o=[];if(1===t.length&&"M"===t[0][0]){for(var a=0;a<r-n;a++)t.push(t[0]);return t}for(a=0;a<r;a++){var s=Math.floor(i*a);o[s]=(o[s]||0)+1}var u=o.reduce((function(e,r,i){return i===n?e.concat(t[n]):e.concat(qn(t[i],t[i+1],r))}),[]);return u.unshift(t[0]),"Z"!==e[r]&&"z"!==e[r]||u.push("Z"),u},Kn=function(t,e){if(t.length!==e.length)return!1;var n=!0;return(0,x.each)(t,(function(t,r){if(t!==e[r])return n=!1,!1})),n};function Zn(t,e,n){var r=null,i=n;return e<i&&(i=e,r="add"),t<i&&(i=t,r="del"),{type:r,min:i}}var Qn=function(t,e){var n=function(t,e){var n,r,i=t.length,o=e.length,a=0;if(0===i||0===o)return null;for(var s=[],u=0;u<=i;u++)s[u]=[],s[u][0]={min:u};for(var l=0;l<=o;l++)s[0][l]={min:l};for(u=1;u<=i;u++)for(n=t[u-1],l=1;l<=o;l++){r=e[l-1],a=Kn(n,r)?0:1;var c=s[u-1][l].min+1,h=s[u][l-1].min+1,d=s[u-1][l-1].min+a;s[u][l]=Zn(c,h,d)}return s}(t,e),r=t.length,i=e.length,o=[],a=1,s=1;if(n[r][i].min!==r){for(var u=1;u<=r;u++){var l=n[u][u].min;s=u;for(var c=a;c<=i;c++)n[u][c].min<l&&(l=n[u][c].min,s=c);a=s,n[u][a].type&&o.push({index:u-1,type:n[u][a].type})}for(u=o.length-1;u>=0;u--)a=o[u].index,"add"===o[u].type?t.splice(a,0,[].concat(t[a])):t.splice(a,1)}var h=i-(r=t.length);if(r<i)for(u=0;u<h;u++)"z"===t[r-1][0]||"Z"===t[r-1][0]?t.splice(r-2,0,t[r-2]):t.push(t[r-1]),r+=1;return t};function Jn(t,e,n){for(var r,i=[].concat(t),o=1/(n+1),a=tr(e)[0],s=1;s<=n;s++)o*=s,0===(r=Math.floor(t.length*o))?i.unshift([a[0]*o+t[r][0]*(1-o),a[1]*o+t[r][1]*(1-o)]):i.splice(r,0,[a[0]*o+t[r][0]*(1-o),a[1]*o+t[r][1]*(1-o)]);return i}function tr(t){var e=[];switch(t[0]){case"M":case"L":case"T":e.push([t[1],t[2]]);break;case"A":e.push([t[6],t[7]]);break;case"Q":case"S":e.push([t[3],t[4]]),e.push([t[1],t[2]]);break;case"C":e.push([t[5],t[6]]),e.push([t[1],t[2]]),e.push([t[3],t[4]]);break;case"H":case"V":e.push([t[1],t[1]])}return e}var er=function(t,e){if(t.length<=1)return t;for(var n,r=0;r<e.length;r++)if(t[r][0]!==e[r][0])switch(n=tr(t[r]),e[r][0]){case"M":t[r]=["M"].concat(n[0]);break;case"L":t[r]=["L"].concat(n[0]);break;case"A":t[r]=[].concat(e[r]),t[r][6]=n[0][0],t[r][7]=n[0][1];break;case"Q":if(n.length<2){if(!(r>0)){t[r]=e[r];break}n=Jn(n,t[r-1],1)}t[r]=["Q"].concat(n.reduce((function(t,e){return t.concat(e)}),[]));break;case"T":t[r]=["T"].concat(n[0]);break;case"C":if(n.length<3){if(!(r>0)){t[r]=e[r];break}n=Jn(n,t[r-1],2)}t[r]=["C"].concat(n.reduce((function(t,e){return t.concat(e)}),[]));break;case"S":if(n.length<2){if(!(r>0)){t[r]=e[r];break}n=Jn(n,t[r-1],1)}t[r]=["S"].concat(n.reduce((function(t,e){return t.concat(e)}),[]));break;default:t[r]=e[r]}return t};const nr=function(){function t(t,e){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=t,this.name=t,this.originalEvent=e,this.timeStamp=e.timeStamp}return t.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t.prototype.toString=function(){return"[Event (type="+this.type+")]"},t.prototype.save=function(){},t.prototype.restore=function(){},t}();function rr(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}var ir="undefined"!=typeof window&&void 0!==window.document;function or(t,e){if(t.isCanvas())return!0;for(var n=e.getParent(),r=!1;n;){if(n===t){r=!0;break}n=n.getParent()}return r}function ar(t){return t.cfg.visible&&t.cfg.capture}var sr=function(t){function e(e){var n=t.call(this)||this;n.destroyed=!1;var r=n.getDefaultCfg();return n.cfg=(0,x.mix)(r,e),n}return(0,b.__extends)(e,t),e.prototype.getDefaultCfg=function(){return{}},e.prototype.get=function(t){return this.cfg[t]},e.prototype.set=function(t,e){this.cfg[t]=e},e.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},e}(M);var ur=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},lr=function(t,e,n){this.name=t,this.version=e,this.os=n,this.type="browser"},cr=function(t){this.version=t,this.type="node",this.name="node",this.os=process.platform},hr=function(t,e,n,r){this.name=t,this.version=e,this.os=n,this.bot=r,this.type="bot-device"},dr=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},fr=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},pr=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,mr=3,gr=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],vr=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function yr(t){return t?xr(t):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new fr:"undefined"!=typeof navigator?xr(navigator.userAgent):"undefined"!=typeof process&&process.version?new cr(process.version.slice(1)):null}function br(t){return""!==t&&gr.reduce((function(e,n){var r=n[0],i=n[1];if(e)return e;var o=i.exec(t);return!!o&&[r,o]}),!1)}function xr(t){var e=br(t);if(!e)return null;var n=e[0],r=e[1];if("searchbot"===n)return new dr;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<mr&&(i=ur(ur([],i,!0),function(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}(mr-i.length),!0)):i=[];var o=i.join("."),a=function(t){for(var e=0,n=vr.length;e<n;e++){var r=vr[e],i=r[0];if(r[1].exec(t))return i}return null}(t),s=pr.exec(t);return s&&s[1]?new hr(n,o,a,s[1]):new lr(n,o,a)}function wr(t,e){var n=[],r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],h=t[8],d=e[0],f=e[1],p=e[2],m=e[3],g=e[4],v=e[5],y=e[6],b=e[7],x=e[8];return n[0]=d*r+f*a+p*l,n[1]=d*i+f*s+p*c,n[2]=d*o+f*u+p*h,n[3]=m*r+g*a+v*l,n[4]=m*i+g*s+v*c,n[5]=m*o+g*u+v*h,n[6]=y*r+b*a+x*l,n[7]=y*i+b*s+x*c,n[8]=y*o+b*u+x*h,n}function _r(t,e){var n=[],r=e[0],i=e[1];return n[0]=t[0]*r+t[3]*i+t[6],n[1]=t[1]*r+t[4]*i+t[7],n}function Sr(t){var e=[],n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8],h=c*a-s*l,d=-c*o+s*u,f=l*o-a*u,p=n*h+r*d+i*f;return p?(p=1/p,e[0]=h*p,e[1]=(-c*r+i*l)*p,e[2]=(s*r-i*a)*p,e[3]=d*p,e[4]=(c*n-i*u)*p,e[5]=(-s*n+i*o)*p,e[6]=f*p,e[7]=(-l*n+r*u)*p,e[8]=(a*n-r*o)*p,e):null}var Er=N,Ar="matrix",Mr=["zIndex","capture","visible","type"],Cr=["repeat"];function Tr(t,e){var n={},r=e.attrs;for(var i in t)n[i]=r[i];return n}var kr=function(t){function e(e){var n=t.call(this,e)||this;n.attrs={};var r=n.getDefaultAttrs();return(0,x.mix)(r,e.attrs),n.attrs=r,n.initAttrs(r),n.initAnimate(),n}return(0,b.__extends)(e,t),e.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},e.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},e.prototype.onCanvasChange=function(t){},e.prototype.initAttrs=function(t){},e.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},e.prototype.isGroup=function(){return!1},e.prototype.getParent=function(){return this.get("parent")},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.attr=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],i=e[1];if(!r)return this.attrs;if((0,x.isObject)(r)){for(var o in r)this.setAttr(o,r[o]);return this.afterAttrsChange(r),this}return 2===e.length?(this.setAttr(r,i),this.afterAttrsChange(((t={})[r]=i,t)),this):this.attrs[r]},e.prototype.isClipped=function(t,e){var n=this.getClip();return n&&!n.isHit(t,e)},e.prototype.setAttr=function(t,e){var n=this.attrs[t];n!==e&&(this.attrs[t]=e,this.onAttrChange(t,e,n))},e.prototype.onAttrChange=function(t,e,n){"matrix"===t&&this.set("totalMatrix",null)},e.prototype.afterAttrsChange=function(t){if(this.cfg.isClipShape){var e=this.cfg.applyTo;e&&e.onCanvasChange("clip")}else this.onCanvasChange("attr")},e.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},e.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},e.prototype.setZIndex=function(t){this.set("zIndex",t);var e=this.getParent();return e&&e.sort(),this},e.prototype.toFront=function(){var t=this.getParent();if(t){var e=t.getChildren(),n=(this.get("el"),e.indexOf(this));e.splice(n,1),e.push(this),this.onCanvasChange("zIndex")}},e.prototype.toBack=function(){var t=this.getParent();if(t){var e=t.getChildren(),n=(this.get("el"),e.indexOf(this));e.splice(n,1),e.unshift(this),this.onCanvasChange("zIndex")}},e.prototype.remove=function(t){void 0===t&&(t=!0);var e=this.getParent();e?(rr(e.getChildren(),this),e.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),t&&this.destroy()},e.prototype.resetMatrix=function(){this.attr(Ar,this.getDefaultMatrix()),this.onCanvasChange("matrix")},e.prototype.getMatrix=function(){return this.attr(Ar)},e.prototype.setMatrix=function(t){this.attr(Ar,t),this.onCanvasChange("matrix")},e.prototype.getTotalMatrix=function(){var t=this.cfg.totalMatrix;if(!t){var e=this.attr("matrix"),n=this.cfg.parentMatrix;t=n&&e?wr(n,e):e||n,this.set("totalMatrix",t)}return t},e.prototype.applyMatrix=function(t){var e=this.attr("matrix"),n=null;n=t&&e?wr(t,e):e||t,this.set("totalMatrix",n),this.set("parentMatrix",t)},e.prototype.getDefaultMatrix=function(){return null},e.prototype.applyToMatrix=function(t){var e=this.attr("matrix");return e?_r(e,t):t},e.prototype.invertFromMatrix=function(t){var e=this.attr("matrix");if(e){var n=Sr(e);if(n)return _r(n,t)}return t},e.prototype.setClip=function(t){var e=this.getCanvas(),n=null;if(t){var r=this.getShapeBase()[(0,x.upperFirst)(t.type)];r&&(n=new r({type:t.type,isClipShape:!0,applyTo:this,attrs:t.attrs,canvas:e}))}return this.set("clipShape",n),this.onCanvasChange("clip"),n},e.prototype.getClip=function(){var t=this.cfg.clipShape;return t||null},e.prototype.clone=function(){var t=this,e=this.attrs,n={};(0,x.each)(e,(function(t,r){(0,x.isArray)(e[r])?n[r]=function(t){for(var e=[],n=0;n<t.length;n++)(0,x.isArray)(t[n])?e.push([].concat(t[n])):e.push(t[n]);return e}(e[r]):n[r]=e[r]}));var r=new(0,this.constructor)({attrs:n});return(0,x.each)(Mr,(function(e){r.set(e,t.get(e))})),r},e.prototype.destroy=function(){this.destroyed||(this.attrs={},t.prototype.destroy.call(this))},e.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},e.prototype.animate=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this.get("timeline")||this.get("canvas")){this.set("animating",!0);var n=this.get("timeline");n||(n=this.get("canvas").get("timeline"),this.set("timeline",n));var r=this.get("animations")||[];n.timer||n.initTimer();var i,o,a,s,u,l=t[0],c=t[1],h=t[2],d=void 0===h?"easeLinear":h,f=t[3],p=void 0===f?x.noop:f,m=t[4],g=void 0===m?0:m;(0,x.isFunction)(l)?(i=l,l={}):(0,x.isObject)(l)&&l.onFrame&&(i=l.onFrame,o=l.repeat),(0,x.isObject)(c)?(c=(u=c).duration,d=u.easing||"easeLinear",g=u.delay||0,o=u.repeat||o||!1,p=u.callback||x.noop,a=u.pauseCallback||x.noop,s=u.resumeCallback||x.noop):((0,x.isNumber)(p)&&(g=p,p=null),(0,x.isFunction)(d)?(p=d,d="easeLinear"):d=d||"easeLinear");var v=function(t,e){var n={},r=e.attr();return(0,x.each)(t,(function(t,e){-1!==Cr.indexOf(e)||(0,x.isEqual)(r[e],t)||(n[e]=t)})),n}(l,this),y={fromAttrs:Tr(v,this),toAttrs:v,duration:c,easing:d,repeat:o,callback:p,pauseCallback:a,resumeCallback:s,delay:g,startTime:n.getTime(),id:(0,x.uniqueId)(),onFrame:i,pathFormatted:!1};r.length>0?r=function(t,e){if(e.onFrame)return t;var n=e.startTime,r=e.delay,i=e.duration,o=Object.prototype.hasOwnProperty;return(0,x.each)(t,(function(t){n+r<t.startTime+t.delay+t.duration&&i>t.delay&&(0,x.each)(e.toAttrs,(function(e,n){o.call(t.toAttrs,n)&&(delete t.toAttrs[n],delete t.fromAttrs[n])}))})),t}(r,y):n.addAnimator(this),r.push(y),this.set("animations",r),this.set("_pause",{isPaused:!1})}},e.prototype.stopAnimate=function(t){var e=this;void 0===t&&(t=!0);var n=this.get("animations");(0,x.each)(n,(function(n){t&&(n.onFrame?e.attr(n.onFrame(1)):e.attr(n.toAttrs)),n.callback&&n.callback()})),this.set("animating",!1),this.set("animations",[])},e.prototype.pauseAnimate=function(){var t=this.get("timeline"),e=this.get("animations"),n=t.getTime();return(0,x.each)(e,(function(t){t._paused=!0,t._pauseTime=n,t.pauseCallback&&t.pauseCallback()})),this.set("_pause",{isPaused:!0,pauseTime:n}),this},e.prototype.resumeAnimate=function(){var t=this.get("timeline").getTime(),e=this.get("animations"),n=this.get("_pause").pauseTime;return(0,x.each)(e,(function(e){e.startTime=e.startTime+(t-n),e._paused=!1,e._pauseTime=null,e.resumeCallback&&e.resumeCallback()})),this.set("_pause",{isPaused:!1}),this.set("animations",e),this},e.prototype.emitDelegation=function(t,e){var n,r=this,i=e.propagationPath;this.getEvents();"mouseenter"===t?n=e.fromShape:"mouseleave"===t&&(n=e.toShape);for(var o=function(t){var o=i[t],s=o.get("name");if(s){if((o.isGroup()||o.isCanvas&&o.isCanvas())&&n&&or(o,n))return"break";(0,x.isArray)(s)?(0,x.each)(s,(function(t){r.emitDelegateEvent(o,t,e)})):a.emitDelegateEvent(o,s,e)}},a=this,s=0;s<i.length;s++){if("break"===o(s))break}},e.prototype.emitDelegateEvent=function(t,e,n){var r=this.getEvents(),i=e+":"+n.type;(r[i]||r["*"])&&(n.name=i,n.currentTarget=t,n.delegateTarget=this,n.delegateObject=t.get("delegateObject"),this.emit(i,n))},e.prototype.translate=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var n=this.getMatrix(),r=Er(n,[["t",t,e]]);return this.setMatrix(r),this},e.prototype.move=function(t,e){var n=this.attr("x")||0,r=this.attr("y")||0;return this.translate(t-n,e-r),this},e.prototype.moveTo=function(t,e){return this.move(t,e)},e.prototype.scale=function(t,e){var n=this.getMatrix(),r=Er(n,[["s",t,e||t]]);return this.setMatrix(r),this},e.prototype.rotate=function(t){var e=this.getMatrix(),n=Er(e,[["r",t]]);return this.setMatrix(n),this},e.prototype.rotateAtStart=function(t){var e=this.attr(),n=e.x,r=e.y,i=this.getMatrix(),o=Er(i,[["t",-n,-r],["r",t],["t",n,r]]);return this.setMatrix(o),this},e.prototype.rotateAtPoint=function(t,e,n){var r=this.getMatrix(),i=Er(r,[["t",-t,-e],["r",n],["t",t,e]]);return this.setMatrix(i),this},e}(sr);const Ir=kr;var Nr={},Pr="_INDEX";function Or(t,e){if(t.set("canvas",e),t.isGroup()){var n=t.get("children");n.length&&n.forEach((function(t){Or(t,e)}))}}function Lr(t,e){if(t.set("timeline",e),t.isGroup()){var n=t.get("children");n.length&&n.forEach((function(t){Lr(t,e)}))}}var Rr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,b.__extends)(e,t),e.prototype.isCanvas=function(){return!1},e.prototype.getBBox=function(){var t=1/0,e=-1/0,n=1/0,r=-1/0,i=this.getChildren().filter((function(t){return t.get("visible")&&(!t.isGroup()||t.isGroup()&&t.getChildren().length>0)}));return i.length>0?(0,x.each)(i,(function(i){var o=i.getBBox(),a=o.minX,s=o.maxX,u=o.minY,l=o.maxY;a<t&&(t=a),s>e&&(e=s),u<n&&(n=u),l>r&&(r=l)})):(t=0,e=0,n=0,r=0),{x:t,y:n,minX:t,minY:n,maxX:e,maxY:r,width:e-t,height:r-n}},e.prototype.getCanvasBBox=function(){var t=1/0,e=-1/0,n=1/0,r=-1/0,i=this.getChildren().filter((function(t){return t.get("visible")&&(!t.isGroup()||t.isGroup()&&t.getChildren().length>0)}));return i.length>0?(0,x.each)(i,(function(i){var o=i.getCanvasBBox(),a=o.minX,s=o.maxX,u=o.minY,l=o.maxY;a<t&&(t=a),s>e&&(e=s),u<n&&(n=u),l>r&&(r=l)})):(t=0,e=0,n=0,r=0),{x:t,y:n,minX:t,minY:n,maxX:e,maxY:r,width:e-t,height:r-n}},e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.children=[],e},e.prototype.onAttrChange=function(e,n,r){if(t.prototype.onAttrChange.call(this,e,n,r),"matrix"===e){var i=this.getTotalMatrix();this._applyChildrenMarix(i)}},e.prototype.applyMatrix=function(e){var n=this.getTotalMatrix();t.prototype.applyMatrix.call(this,e);var r=this.getTotalMatrix();r!==n&&this._applyChildrenMarix(r)},e.prototype._applyChildrenMarix=function(t){var e=this.getChildren();(0,x.each)(e,(function(e){e.applyMatrix(t)}))},e.prototype.addShape=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[0],r=t[1];(0,x.isObject)(n)?r=n:r.type=n;var i=Nr[r.type];i||(i=(0,x.upperFirst)(r.type),Nr[r.type]=i);var o=new(this.getShapeBase()[i])(r);return this.add(o),o},e.prototype.addGroup=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n,r=t[0],i=t[1];if((0,x.isFunction)(r))n=new r(i||{parent:this});else{var o=r||{};n=new(this.getGroupBase())(o)}return this.add(n),n},e.prototype.getCanvas=function(){return this.isCanvas()?this:this.get("canvas")},e.prototype.getShape=function(t,e,n){if(!ar(this))return null;var r,i=this.getChildren();if(this.isCanvas())r=this._findShape(i,t,e,n);else{var o=[t,e,1];o=this.invertFromMatrix(o),this.isClipped(o[0],o[1])||(r=this._findShape(i,o[0],o[1],n))}return r},e.prototype._findShape=function(t,e,n,r){for(var i=null,o=t.length-1;o>=0;o--){var a=t[o];if(ar(a)&&(a.isGroup()?i=a.getShape(e,n,r):a.isHit(e,n)&&(i=a)),i)break}return i},e.prototype.add=function(t){var e=this.getCanvas(),n=this.getChildren(),r=this.get("timeline"),i=t.getParent();i&&function(t,e,n){void 0===n&&(n=!0),n?e.destroy():(e.set("parent",null),e.set("canvas",null)),rr(t.getChildren(),e)}(i,t,!1),t.set("parent",this),e&&Or(t,e),r&&Lr(t,r),n.push(t),t.onCanvasChange("add"),this._applyElementMatrix(t)},e.prototype._applyElementMatrix=function(t){var e=this.getTotalMatrix();e&&t.applyMatrix(e)},e.prototype.getChildren=function(){return this.get("children")||[]},e.prototype.sort=function(){var t=this.getChildren();(0,x.each)(t,(function(t,e){return t[Pr]=e,t})),t.sort(function(t){return function(e,n){var r=t(e,n);return 0===r?e[Pr]-n[Pr]:r}}((function(t,e){return t.get("zIndex")-e.get("zIndex")}))),this.onCanvasChange("sort")},e.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),e=t.length-1;e>=0;e--)t[e].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},e.prototype.destroy=function(){this.get("destroyed")||(this.clear(),t.prototype.destroy.call(this))},e.prototype.getFirst=function(){return this.getChildByIndex(0)},e.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},e.prototype.getChildByIndex=function(t){return this.getChildren()[t]},e.prototype.getCount=function(){return this.getChildren().length},e.prototype.contain=function(t){return this.getChildren().indexOf(t)>-1},e.prototype.removeChild=function(t,e){void 0===e&&(e=!0),this.contain(t)&&t.remove(e)},e.prototype.findAll=function(t){var e=[],n=this.getChildren();return(0,x.each)(n,(function(n){t(n)&&e.push(n),n.isGroup()&&(e=e.concat(n.findAll(t)))})),e},e.prototype.find=function(t){var e=null,n=this.getChildren();return(0,x.each)(n,(function(n){if(t(n)?e=n:n.isGroup()&&(e=n.find(t)),e)return!1})),e},e.prototype.findById=function(t){return this.find((function(e){return e.get("id")===t}))},e.prototype.findByClassName=function(t){return this.find((function(e){return e.get("className")===t}))},e.prototype.findAllByName=function(t){return this.findAll((function(e){return e.get("name")===t}))},e}(Ir);const Dr=Rr;var zr,Fr,Br=0,Ur=0,jr=0,Vr=1e3,Hr=0,Gr=0,Wr=0,Xr="object"==typeof performance&&performance.now?performance:Date,Yr="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function qr(){return Gr||(Yr($r),Gr=Xr.now()+Wr)}function $r(){Gr=0}function Kr(){this._call=this._time=this._next=null}function Zr(t,e,n){var r=new Kr;return r.restart(t,e,n),r}function Qr(){Gr=(Hr=Xr.now())+Wr,Br=Ur=0;try{!function(){qr(),++Br;for(var t,e=zr;e;)(t=Gr-e._time)>=0&&e._call.call(null,t),e=e._next;--Br}()}finally{Br=0,function(){var t,e,n=zr,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:zr=e);Fr=t,ti(r)}(),Gr=0}}function Jr(){var t=Xr.now(),e=t-Hr;e>Vr&&(Wr-=e,Hr=t)}function ti(t){Br||(Ur&&(Ur=clearTimeout(Ur)),t-Gr>24?(t<1/0&&(Ur=setTimeout(Qr,t-Xr.now()-Wr)),jr&&(jr=clearInterval(jr))):(jr||(Hr=Xr.now(),jr=setInterval(Jr,Vr)),Br=1,Yr(Qr)))}function ei(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ni(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ri(){}Kr.prototype=Zr.prototype={constructor:Kr,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?qr():+n)+(null==e?0:+e),this._next||Fr===this||(Fr?Fr._next=this:zr=this,Fr=this),this._call=t,this._time=n,ti()},stop:function(){this._call&&(this._call=null,this._time=1/0,ti())}};var ii=.7,oi=1/ii,ai="\\s*([+-]?\\d+)\\s*",si="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ui="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",li=/^#([0-9a-f]{3,8})$/,ci=new RegExp(`^rgb\\(${ai},${ai},${ai}\\)$`),hi=new RegExp(`^rgb\\(${ui},${ui},${ui}\\)$`),di=new RegExp(`^rgba\\(${ai},${ai},${ai},${si}\\)$`),fi=new RegExp(`^rgba\\(${ui},${ui},${ui},${si}\\)$`),pi=new RegExp(`^hsl\\(${si},${ui},${ui}\\)$`),mi=new RegExp(`^hsla\\(${si},${ui},${ui},${si}\\)$`),gi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function vi(){return this.rgb().formatHex()}function yi(){return this.rgb().formatRgb()}function bi(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=li.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?xi(e):3===n?new Si(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?wi(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?wi(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=ci.exec(t))?new Si(e[1],e[2],e[3],1):(e=hi.exec(t))?new Si(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=di.exec(t))?wi(e[1],e[2],e[3],e[4]):(e=fi.exec(t))?wi(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=pi.exec(t))?ki(e[1],e[2]/100,e[3]/100,1):(e=mi.exec(t))?ki(e[1],e[2]/100,e[3]/100,e[4]):gi.hasOwnProperty(t)?xi(gi[t]):"transparent"===t?new Si(NaN,NaN,NaN,0):null}function xi(t){return new Si(t>>16&255,t>>8&255,255&t,1)}function wi(t,e,n,r){return r<=0&&(t=e=n=NaN),new Si(t,e,n,r)}function _i(t,e,n,r){return 1===arguments.length?((i=t)instanceof ri||(i=bi(i)),i?new Si((i=i.rgb()).r,i.g,i.b,i.opacity):new Si):new Si(t,e,n,null==r?1:r);var i}function Si(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Ei(){return`#${Ti(this.r)}${Ti(this.g)}${Ti(this.b)}`}function Ai(){const t=Mi(this.opacity);return`${1===t?"rgb(":"rgba("}${Ci(this.r)}, ${Ci(this.g)}, ${Ci(this.b)}${1===t?")":`, ${t})`}`}function Mi(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ci(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ti(t){return((t=Ci(t))<16?"0":"")+t.toString(16)}function ki(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ni(t,e,n,r)}function Ii(t){if(t instanceof Ni)return new Ni(t.h,t.s,t.l,t.opacity);if(t instanceof ri||(t=bi(t)),!t)return new Ni;if(t instanceof Ni)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new Ni(a,s,u,t.opacity)}function Ni(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Pi(t){return(t=(t||0)%360)<0?t+360:t}function Oi(t){return Math.max(0,Math.min(1,t||0))}function Li(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Ri(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}ei(ri,bi,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:vi,formatHex:vi,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Ii(this).formatHsl()},formatRgb:yi,toString:yi}),ei(Si,_i,ni(ri,{brighter(t){return t=null==t?oi:Math.pow(oi,t),new Si(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?ii:Math.pow(ii,t),new Si(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Si(Ci(this.r),Ci(this.g),Ci(this.b),Mi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ei,formatHex:Ei,formatHex8:function(){return`#${Ti(this.r)}${Ti(this.g)}${Ti(this.b)}${Ti(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Ai,toString:Ai})),ei(Ni,(function(t,e,n,r){return 1===arguments.length?Ii(t):new Ni(t,e,n,null==r?1:r)}),ni(ri,{brighter(t){return t=null==t?oi:Math.pow(oi,t),new Ni(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?ii:Math.pow(ii,t),new Ni(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Si(Li(t>=240?t-240:t+120,i,r),Li(t,i,r),Li(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Ni(Pi(this.h),Oi(this.s),Oi(this.l),Mi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Mi(this.opacity);return`${1===t?"hsl(":"hsla("}${Pi(this.h)}, ${100*Oi(this.s)}%, ${100*Oi(this.l)}%${1===t?")":`, ${t})`}`}}));const Di=t=>()=>t;function zi(t,e){return function(n){return t+n*e}}function Fi(t){return 1==(t=+t)?Bi:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):Di(isNaN(e)?n:e)}}function Bi(t,e){var n=e-t;return n?zi(t,n):Di(isNaN(t)?e:t)}const Ui=function t(e){var n=Fi(e);function r(t,e){var r=n((t=_i(t)).r,(e=_i(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=Bi(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function ji(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=_i(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}ji((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return Ri((n-r/e)*e,a,i,o,s)}})),ji((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return Ri((n-r/e)*e,i,o,a,s)}}));function Vi(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}}function Hi(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Gi(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=Zi(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}function Wi(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Xi(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Yi(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=Zi(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var qi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$i=new RegExp(qi.source,"g");function Ki(t,e){var n,r,i,o=qi.lastIndex=$i.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(n=qi.exec(t))&&(r=$i.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:Xi(n,r)})),o=$i.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})}function Zi(t,e){var n,r=typeof e;return null==e||"boolean"===r?Di(e):("number"===r?Xi:"string"===r?(n=bi(e))?(e=n,Ui):Ki:e instanceof bi?Ui:e instanceof Date?Wi:Hi(e)?Vi:Array.isArray(e)?Gi:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Yi:Xi)(t,e)}function Qi(t){return+t}function Ji(t){return t*t}function to(t){return t*(2-t)}function eo(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function no(t){return t*t*t}function ro(t){return--t*t*t+1}function io(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var oo=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),ao=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),so=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),uo=Math.PI,lo=uo/2;function co(t){return 1==+t?1:1-Math.cos(t*lo)}function ho(t){return Math.sin(t*lo)}function fo(t){return(1-Math.cos(uo*t))/2}function po(t){return 1.0009775171065494*(Math.pow(2,-10*t)-.0009765625)}function mo(t){return po(1-+t)}function go(t){return 1-po(t)}function vo(t){return((t*=2)<=1?po(1-t):2-po(t-1))/2}function yo(t){return 1-Math.sqrt(1-t*t)}function bo(t){return Math.sqrt(1- --t*t)}function xo(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var wo=4/11,_o=6/11,So=8/11,Eo=3/4,Ao=9/11,Mo=10/11,Co=15/16,To=21/22,ko=63/64,Io=1/wo/wo;function No(t){return 1-Po(1-t)}function Po(t){return(t=+t)<wo?Io*t*t:t<So?Io*(t-=_o)*t+Eo:t<Mo?Io*(t-=Ao)*t+Co:Io*(t-=To)*t+ko}function Oo(t){return((t*=2)<=1?1-Po(1-t):Po(t-1)+1)/2}var Lo=1.70158,Ro=function t(e){function n(t){return(t=+t)*t*(e*(t-1)+t)}return e=+e,n.overshoot=t,n}(Lo),Do=function t(e){function n(t){return--t*t*((t+1)*e+t)+1}return e=+e,n.overshoot=t,n}(Lo),zo=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(Lo),Fo=2*Math.PI,Bo=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Fo);function i(t){return e*po(- --t)*Math.sin((r-t)/n)}return i.amplitude=function(e){return t(e,n*Fo)},i.period=function(n){return t(e,n)},i}(1,.3),Uo=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Fo);function i(t){return 1-e*po(t=+t)*Math.sin((t+r)/n)}return i.amplitude=function(e){return t(e,n*Fo)},i.period=function(n){return t(e,n)},i}(1,.3),jo=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Fo);function i(t){return((t=2*t-1)<0?e*po(-t)*Math.sin((r-t)/n):2-e*po(t)*Math.sin((r+t)/n))/2}return i.amplitude=function(e){return t(e,n*Fo)},i.period=function(n){return t(e,n)},i}(1,.3),Vo={};var Ho=function(t){return["fill","stroke","fillStyle","strokeStyle"].includes(t)},Go=function(t){return/^[r,R,L,l]{1}[\s]*\(/.test(t)},Wo=[1,0,0,0,1,0,0,0,1];function Xo(t,e,n){var r,i=e.startTime;if(n<i+e.delay||e._paused)return!1;var o,a=e.duration,u=e.easing,l=Vo[(o=u).toLowerCase()]||s[o];if(n=n-i-e.delay,e.repeat)r=l(r=n%a/a);else{if(!((r=n/a)<1))return e.onFrame?t.attr(e.onFrame(1)):t.attr(e.toAttrs),!0;r=l(r)}if(e.onFrame){var c=e.onFrame(r);t.attr(c)}else!function(t,e,n){var r={},i=e.fromAttrs,o=e.toAttrs;if(!t.destroyed){var a,s,u;for(var l in o)if(!(0,x.isEqual)(i[l],o[l]))if("path"===l){var c=o[l],h=i[l];c.length>h.length?(c=Mn(o[l]),h=Mn(i[l]),h=Qn(h,c),h=er(h,c),e.fromAttrs.path=h,e.toAttrs.path=c):e.pathFormatted||(c=Mn(o[l]),h=Mn(i[l]),h=er(h,c),e.fromAttrs.path=h,e.toAttrs.path=c,e.pathFormatted=!0),r[l]=[];for(var d=0;d<c.length;d++){for(var f=c[d],p=h[d],m=[],g=0;g<f.length;g++)(0,x.isNumber)(f[g])&&p&&(0,x.isNumber)(p[g])?(a=Zi(p[g],f[g]),m.push(a(n))):m.push(f[g]);r[l].push(m)}}else if("matrix"===l){var v=(s=i[l]||Wo,(Hi(u=o[l]||Wo)?Vi:Gi)(s,u))(n);r[l]=v}else Ho(l)&&Go(o[l])?r[l]=o[l]:(0,x.isFunction)(o[l])||(a=Zi(i[l],o[l]),r[l]=a(n));t.attr(r)}}(t,e,r);return!1}var Yo=function(){function t(t){this.animators=[],this.current=0,this.timer=null,this.canvas=t}return t.prototype.initTimer=function(){var t,e,n,r=this;this.timer=Zr((function(i){if(r.current=i,r.animators.length>0){for(var o=r.animators.length-1;o>=0;o--)if((t=r.animators[o]).destroyed)r.removeAnimator(o);else{if(!t.isAnimatePaused())for(var a=(e=t.get("animations")).length-1;a>=0;a--)n=e[a],Xo(t,n,i)&&(e.splice(a,1),!1,n.callback&&n.callback());0===e.length&&r.removeAnimator(o)}r.canvas.get("autoDraw")||r.canvas.draw()}}))},t.prototype.addAnimator=function(t){this.animators.push(t)},t.prototype.removeAnimator=function(t){this.animators.splice(t,1)},t.prototype.isAnimating=function(){return!!this.animators.length},t.prototype.stop=function(){this.timer&&this.timer.stop()},t.prototype.stopAllAnimations=function(t){void 0===t&&(t=!0),this.animators.forEach((function(e){e.stopAnimate(t)})),this.animators=[],this.canvas.draw()},t.prototype.getTime=function(){return this.current},t}();const qo=Yo;var $o=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Ko(t,e,n){n.name=e,n.target=t,n.currentTarget=t,n.delegateTarget=t,t.emit(e,n)}function Zo(t,e,n){if(n.bubbles){var r=void 0,i=!1;if("mouseenter"===e?(r=n.fromShape,i=!0):"mouseleave"===e&&(i=!0,r=n.toShape),t.isCanvas()&&i)return;if(r&&or(t,r))return void(n.bubbles=!1);n.name=e,n.currentTarget=t,n.delegateTarget=t,t.emit(e,n)}}var Qo=function(){function t(t){var e=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(t){var n=t.type;e._triggerEvent(n,t)},this._onDocumentMove=function(t){if(e.canvas.get("el")!==t.target&&(e.dragging||e.currentShape)){var n=e._getPointInfo(t);e.dragging&&e._emitEvent("drag",t,n,e.draggingShape)}},this._onDocumentMouseUp=function(t){if(e.canvas.get("el")!==t.target&&e.dragging){var n=e._getPointInfo(t);e.draggingShape&&e._emitEvent("drop",t,n,null),e._emitEvent("dragend",t,n,e.draggingShape),e._afterDrag(e.draggingShape,n,t)}},this.canvas=t.canvas}return t.prototype.init=function(){this._bindEvents()},t.prototype._bindEvents=function(){var t=this,e=this.canvas.get("el");(0,x.each)($o,(function(n){e.addEventListener(n,t._eventCallback)})),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},t.prototype._clearEvents=function(){var t=this,e=this.canvas.get("el");(0,x.each)($o,(function(n){e.removeEventListener(n,t._eventCallback)})),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},t.prototype._getEventObj=function(t,e,n,r,i,o){var a=new nr(t,e);return a.fromShape=i,a.toShape=o,a.x=n.x,a.y=n.y,a.clientX=n.clientX,a.clientY=n.clientY,a.propagationPath.push(r),a},t.prototype._getShape=function(t,e){return this.canvas.getShape(t.x,t.y,e)},t.prototype._getPointInfo=function(t){var e=this.canvas,n=e.getClientByEvent(t),r=e.getPointByEvent(t);return{x:r.x,y:r.y,clientX:n.x,clientY:n.y}},t.prototype._triggerEvent=function(t,e){var n=this._getPointInfo(e),r=this._getShape(n,e),i=this["_on"+t],o=!1;if(i)i.call(this,n,r,e);else{var a=this.currentShape;"mouseenter"===t||"dragenter"===t||"mouseover"===t?(this._emitEvent(t,e,n,null,null,r),r&&this._emitEvent(t,e,n,r,null,r),"mouseenter"===t&&this.draggingShape&&this._emitEvent("dragenter",e,n,null)):"mouseleave"===t||"dragleave"===t||"mouseout"===t?(o=!0,a&&this._emitEvent(t,e,n,a,a,null),this._emitEvent(t,e,n,null,a,null),"mouseleave"===t&&this.draggingShape&&this._emitEvent("dragleave",e,n,null)):this._emitEvent(t,e,n,r,null,null)}if(o||(this.currentShape=r),r&&!r.get("destroyed")){var s=this.canvas;s.get("el").style.cursor=r.attr("cursor")||s.get("cursor")}},t.prototype._onmousedown=function(t,e,n){0===n.button&&(this.mousedownShape=e,this.mousedownPoint=t,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,t,e,null,null)},t.prototype._emitMouseoverEvents=function(t,e,n,r){var i=this.canvas.get("el");n!==r&&(n&&(this._emitEvent("mouseout",t,e,n,n,r),this._emitEvent("mouseleave",t,e,n,n,r),r&&!r.get("destroyed")||(i.style.cursor=this.canvas.get("cursor"))),r&&(this._emitEvent("mouseover",t,e,r,n,r),this._emitEvent("mouseenter",t,e,r,n,r)))},t.prototype._emitDragoverEvents=function(t,e,n,r,i){r?(r!==n&&(n&&this._emitEvent("dragleave",t,e,n,n,r),this._emitEvent("dragenter",t,e,r,n,r)),i||this._emitEvent("dragover",t,e,r)):n&&this._emitEvent("dragleave",t,e,n,n,r),i&&this._emitEvent("dragover",t,e,r)},t.prototype._afterDrag=function(t,e,n){t&&(t.set("capture",!0),this.draggingShape=null),this.dragging=!1;var r=this._getShape(e,n);r!==t&&this._emitMouseoverEvents(n,e,t,r),this.currentShape=r},t.prototype._onmouseup=function(t,e,n){if(0===n.button){var r=this.draggingShape;this.dragging?(r&&this._emitEvent("drop",n,t,e),this._emitEvent("dragend",n,t,r),this._afterDrag(r,t,n)):(this._emitEvent("mouseup",n,t,e),e===this.mousedownShape&&this._emitEvent("click",n,t,e),this.mousedownShape=null,this.mousedownPoint=null)}},t.prototype._ondragover=function(t,e,n){n.preventDefault();var r=this.currentShape;this._emitDragoverEvents(n,t,r,e,!0)},t.prototype._onmousemove=function(t,e,n){var r=this.canvas,i=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(n,t,i,e,!1),this._emitEvent("drag",n,t,o);else{var a=this.mousedownPoint;if(a){var s=this.mousedownShape,u=n.timeStamp-this.mousedownTimeStamp,l=a.clientX-t.clientX,c=a.clientY-t.clientY;u>120||l*l+c*c>40?s&&s.get("draggable")?((o=this.mousedownShape).set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",n,t,o),this.mousedownShape=null,this.mousedownPoint=null):!s&&r.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,t,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,t,i,e),this._emitEvent("mousemove",n,t,e)):(this._emitMouseoverEvents(n,t,i,e),this._emitEvent("mousemove",n,t,e))}else this._emitMouseoverEvents(n,t,i,e),this._emitEvent("mousemove",n,t,e)}},t.prototype._emitEvent=function(t,e,n,r,i,o){var a=this._getEventObj(t,e,n,r,i,o);if(r){a.shape=r,Ko(r,t,a);for(var s=r.getParent();s;)s.emitDelegation(t,a),a.propagationStopped||Zo(s,t,a),a.propagationPath.push(s),s=s.getParent()}else{Ko(this.canvas,t,a)}},t.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},t}();const Jo=Qo;var ta=yr(),ea=ta&&"firefox"===ta.name,na=function(t){function e(e){var n=t.call(this,e)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}return(0,b.__extends)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.cursor="default",e.supportCSSTransform=!1,e},e.prototype.initContainer=function(){var t=this.get("container");(0,x.isString)(t)&&(t=document.getElementById(t),this.set("container",t))},e.prototype.initDom=function(){var t=this.createDom();this.set("el",t),this.get("container").appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},e.prototype.initEvents=function(){var t=new Jo({canvas:this});t.init(),this.set("eventController",t)},e.prototype.initTimeline=function(){var t=new qo(this);this.set("timeline",t)},e.prototype.setDOMSize=function(t,e){var n=this.get("el");ir&&(n.style.width=t+"px",n.style.height=e+"px")},e.prototype.changeSize=function(t,e){this.setDOMSize(t,e),this.set("width",t),this.set("height",e),this.onCanvasChange("changeSize")},e.prototype.getRenderer=function(){return this.get("renderer")},e.prototype.getCursor=function(){return this.get("cursor")},e.prototype.setCursor=function(t){this.set("cursor",t);var e=this.get("el");ir&&e&&(e.style.cursor=t)},e.prototype.getPointByEvent=function(t){if(this.get("supportCSSTransform")){if(ea&&!(0,x.isNil)(t.layerX)&&t.layerX!==t.offsetX)return{x:t.layerX,y:t.layerY};if(!(0,x.isNil)(t.offsetX))return{x:t.offsetX,y:t.offsetY}}var e=this.getClientByEvent(t),n=e.x,r=e.y;return this.getPointByClient(n,r)},e.prototype.getClientByEvent=function(t){var e=t;return t.touches&&(e="touchend"===t.type?t.changedTouches[0]:t.touches[0]),{x:e.clientX,y:e.clientY}},e.prototype.getPointByClient=function(t,e){var n=this.get("el").getBoundingClientRect();return{x:t-n.left,y:e-n.top}},e.prototype.getClientByPoint=function(t,e){var n=this.get("el").getBoundingClientRect();return{x:t+n.left,y:e+n.top}},e.prototype.draw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},e.prototype.clearEvents=function(){this.get("eventController").destroy()},e.prototype.isCanvas=function(){return!0},e.prototype.getParent=function(){return null},e.prototype.destroy=function(){var e=this.get("timeline");this.get("destroyed")||(this.clear(),e&&e.stop(),this.clearEvents(),this.removeDom(),t.prototype.destroy.call(this))},e}(Dr);const ra=na;const ia=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,b.__extends)(e,t),e.prototype.isGroup=function(){return!0},e.prototype.isEntityGroup=function(){return!1},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=this.getChildren(),r=0;r<n.length;r++){var i=n[r];e.add(i.clone())}return e},e}(Dr);const oa=function(t){function e(e){return t.call(this,e)||this}return(0,b.__extends)(e,t),e.prototype._isInBBox=function(t,e){var n=this.getBBox();return n.minX<=t&&n.maxX>=t&&n.minY<=e&&n.maxY>=e},e.prototype.afterAttrsChange=function(e){t.prototype.afterAttrsChange.call(this,e),this.clearCacheBBox()},e.prototype.getBBox=function(){var t=this.cfg.bbox;return t||(t=this.calculateBBox(),this.set("bbox",t)),t},e.prototype.getCanvasBBox=function(){var t=this.cfg.canvasBBox;return t||(t=this.calculateCanvasBBox(),this.set("canvasBBox",t)),t},e.prototype.applyMatrix=function(e){t.prototype.applyMatrix.call(this,e),this.set("canvasBBox",null)},e.prototype.calculateCanvasBBox=function(){var t=this.getBBox(),e=this.getTotalMatrix(),n=t.minX,r=t.minY,i=t.maxX,o=t.maxY;if(e){var a=_r(e,[t.minX,t.minY]),s=_r(e,[t.maxX,t.minY]),u=_r(e,[t.minX,t.maxY]),l=_r(e,[t.maxX,t.maxY]);n=Math.min(a[0],s[0],u[0],l[0]),i=Math.max(a[0],s[0],u[0],l[0]),r=Math.min(a[1],s[1],u[1],l[1]),o=Math.max(a[1],s[1],u[1],l[1])}var c=this.attrs;if(c.shadowColor){var h=c.shadowBlur,d=void 0===h?0:h,f=c.shadowOffsetX,p=void 0===f?0:f,m=c.shadowOffsetY,g=void 0===m?0:m,v=n-d+p,y=i+d+p,b=r-d+g,x=o+d+g;n=Math.min(n,v),i=Math.max(i,y),r=Math.min(r,b),o=Math.max(o,x)}return{x:n,y:r,minX:n,minY:r,maxX:i,maxY:o,width:i-n,height:o-r}},e.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},e.prototype.isClipShape=function(){return this.get("isClipShape")},e.prototype.isInShape=function(t,e){return!1},e.prototype.isOnlyHitBox=function(){return!1},e.prototype.isHit=function(t,e){var n=this.get("startArrowShape"),r=this.get("endArrowShape"),i=[t,e,1],o=(i=this.invertFromMatrix(i))[0],a=i[1],s=this._isInBBox(o,a);if(this.isOnlyHitBox())return s;if(s&&!this.isClipped(o,a)){if(this.isInShape(o,a))return!0;if(n&&n.isHit(o,a))return!0;if(r&&r.isHit(o,a))return!0}return!1},e}(Ir);var aa=new Map;function sa(t,e){aa.set(t,e)}function ua(t){return aa.get(t)}function la(t){var e=t.attr();return{x:e.x,y:e.y,width:e.width,height:e.height}}function ca(t){var e=t.attr(),n=e.x,r=e.y,i=e.r;return{x:n-i,y:r-i,width:2*i,height:2*i}}function ha(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}function da(t,e){return Math.abs(t-e)<.001}function fa(t,e){var n=(0,x.min)(t),r=(0,x.min)(e);return{x:n,y:r,width:(0,x.max)(t)-n,height:(0,x.max)(e)-r}}function pa(t){return(t+2*Math.PI)%(2*Math.PI)}const ma={box:function(t,e,n,r){return fa([t,n],[e,r])},length:function(t,e,n,r){return ha(t,e,n,r)},pointAt:function(t,e,n,r,i){return{x:(1-i)*t+i*n,y:(1-i)*e+i*r}},pointDistance:function(t,e,n,r,i,o){var a=(n-t)*(i-t)+(r-e)*(o-e);return a<0?ha(t,e,i,o):a>(n-t)*(n-t)+(r-e)*(r-e)?ha(n,r,i,o):this.pointToLine(t,e,n,r,i,o)},pointToLine:function(t,e,n,r,i,o){var a=[n-t,r-e];if(ie.exactEquals(a,[0,0]))return Math.sqrt((i-t)*(i-t)+(o-e)*(o-e));var s=[-a[1],a[0]];ie.normalize(s,s);var u=[i-t,o-e];return Math.abs(ie.dot(u,s))},tangentAngle:function(t,e,n,r){return Math.atan2(r-e,n-t)}};function ga(t,e,n,r,i,o){var a,s=1/0,u=[n,r],l=20;o&&o>200&&(l=o/10);for(var c=1/l,h=c/10,d=0;d<=l;d++){var f=d*c,p=[i.apply(null,t.concat([f])),i.apply(null,e.concat([f]))];(y=ha(u[0],u[1],p[0],p[1]))<s&&(a=f,s=y)}if(0===a)return{x:t[0],y:e[0]};if(1===a){var m=t.length;return{x:t[m-1],y:e[m-1]}}s=1/0;for(d=0;d<32&&!(h<1e-4);d++){var g=a-h,v=a+h,y=(p=[i.apply(null,t.concat([g])),i.apply(null,e.concat([g]))],ha(u[0],u[1],p[0],p[1]));if(g>=0&&y<s)a=g,s=y;else{var b=[i.apply(null,t.concat([v])),i.apply(null,e.concat([v]))],x=ha(u[0],u[1],b[0],b[1]);v<=1&&x<s?(a=v,s=x):h*=.5}}return{x:i.apply(null,t.concat([a])),y:i.apply(null,e.concat([a]))}}function va(t,e,n,r){var i=1-r;return i*i*t+2*r*i*e+r*r*n}function ya(t,e,n){var r=t+n-2*e;if(da(r,0))return[.5];var i=(t-e)/r;return i<=1&&i>=0?[i]:[]}function ba(t,e,n,r){return 2*(1-r)*(e-t)+2*r*(n-e)}function xa(t,e,n,r,i,o,a){var s=va(t,n,i,a),u=va(e,r,o,a),l=ma.pointAt(t,e,n,r,a),c=ma.pointAt(n,r,i,o,a);return[[t,e,l.x,l.y,s,u],[s,u,c.x,c.y,i,o]]}function wa(t,e,n,r,i,o,a){if(0===a)return(ha(t,e,n,r)+ha(n,r,i,o)+ha(t,e,i,o))/2;var s=xa(t,e,n,r,i,o,.5),u=s[0],l=s[1];return u.push(a-1),l.push(a-1),wa.apply(null,u)+wa.apply(null,l)}const _a={box:function(t,e,n,r,i,o){var a=ya(t,n,i)[0],s=ya(e,r,o)[0],u=[t,i],l=[e,o];return void 0!==a&&u.push(va(t,n,i,a)),void 0!==s&&l.push(va(e,r,o,s)),fa(u,l)},length:function(t,e,n,r,i,o){return wa(t,e,n,r,i,o,3)},nearestPoint:function(t,e,n,r,i,o,a,s){return ga([t,n,i],[e,r,o],a,s,va)},pointDistance:function(t,e,n,r,i,o,a,s){var u=this.nearestPoint(t,e,n,r,i,o,a,s);return ha(u.x,u.y,a,s)},interpolationAt:va,pointAt:function(t,e,n,r,i,o,a){return{x:va(t,n,i,a),y:va(e,r,o,a)}},divide:function(t,e,n,r,i,o,a){return xa(t,e,n,r,i,o,a)},tangentAngle:function(t,e,n,r,i,o,a){var s=ba(t,n,i,a),u=ba(e,r,o,a);return pa(Math.atan2(u,s))}};function Sa(t,e,n,r,i){var o=1-i;return o*o*o*t+3*e*i*o*o+3*n*i*i*o+r*i*i*i}function Ea(t,e,n,r,i){var o=1-i;return 3*(o*o*(e-t)+2*o*i*(n-e)+i*i*(r-n))}function Aa(t,e,n,r){var i,o,a,s=-3*t+9*e-9*n+3*r,u=6*t-12*e+6*n,l=3*e-3*t,c=[];if(da(s,0))da(u,0)||(i=-l/u)>=0&&i<=1&&c.push(i);else{var h=u*u-4*s*l;da(h,0)?c.push(-u/(2*s)):h>0&&(o=(-u-(a=Math.sqrt(h)))/(2*s),(i=(-u+a)/(2*s))>=0&&i<=1&&c.push(i),o>=0&&o<=1&&c.push(o))}return c}function Ma(t,e,n,r,i,o,a,s,u){var l=Sa(t,n,i,a,u),c=Sa(e,r,o,s,u),h=ma.pointAt(t,e,n,r,u),d=ma.pointAt(n,r,i,o,u),f=ma.pointAt(i,o,a,s,u),p=ma.pointAt(h.x,h.y,d.x,d.y,u),m=ma.pointAt(d.x,d.y,f.x,f.y,u);return[[t,e,h.x,h.y,p.x,p.y,l,c],[l,c,m.x,m.y,f.x,f.y,a,s]]}function Ca(t,e,n,r,i,o,a,s,u){if(0===u)return function(t,e){for(var n=0,r=t.length,i=0;i<r;i++)n+=ha(t[i],e[i],t[(i+1)%r],e[(i+1)%r]);return n/2}([t,n,i,a],[e,r,o,s]);var l=Ma(t,e,n,r,i,o,a,s,.5),c=l[0],h=l[1];return c.push(u-1),h.push(u-1),Ca.apply(null,c)+Ca.apply(null,h)}const Ta={extrema:Aa,box:function(t,e,n,r,i,o,a,s){for(var u=[t,a],l=[e,s],c=Aa(t,n,i,a),h=Aa(e,r,o,s),d=0;d<c.length;d++)u.push(Sa(t,n,i,a,c[d]));for(d=0;d<h.length;d++)l.push(Sa(e,r,o,s,h[d]));return fa(u,l)},length:function(t,e,n,r,i,o,a,s){return Ca(t,e,n,r,i,o,a,s,3)},nearestPoint:function(t,e,n,r,i,o,a,s,u,l,c){return ga([t,n,i,a],[e,r,o,s],u,l,Sa,c)},pointDistance:function(t,e,n,r,i,o,a,s,u,l,c){var h=this.nearestPoint(t,e,n,r,i,o,a,s,u,l,c);return ha(h.x,h.y,u,l)},interpolationAt:Sa,pointAt:function(t,e,n,r,i,o,a,s,u){return{x:Sa(t,n,i,a,u),y:Sa(e,r,o,s,u)}},divide:function(t,e,n,r,i,o,a,s,u){return Ma(t,e,n,r,i,o,a,s,u)},tangentAngle:function(t,e,n,r,i,o,a,s,u){var l=Ea(t,n,i,a,u),c=Ea(e,r,o,s,u);return pa(Math.atan2(c,l))}};function ka(t,e){var n=Math.abs(t);return e>0?n:-1*n}const Ia=function(t,e,n,r,i,o){var a=n,s=r;if(0===a||0===s)return{x:t,y:e};for(var u,l,c=i-t,h=o-e,d=Math.abs(c),f=Math.abs(h),p=a*a,m=s*s,g=Math.PI/4,v=0;v<4;v++){u=a*Math.cos(g),l=s*Math.sin(g);var y=(p-m)*Math.pow(Math.cos(g),3)/a,b=(m-p)*Math.pow(Math.sin(g),3)/s,x=u-y,w=l-b,_=d-y,S=f-b,E=Math.hypot(w,x),A=Math.hypot(S,_);g+=E*Math.asin((x*S-w*_)/(E*A))/Math.sqrt(p+m-u*u-l*l),g=Math.min(Math.PI/2,Math.max(0,g))}return{x:t+ka(u,c),y:e+ka(l,h)}};function Na(t,e,n,r,i,o){return n*Math.cos(i)*Math.cos(o)-r*Math.sin(i)*Math.sin(o)+t}function Pa(t,e,n,r,i,o){return n*Math.sin(i)*Math.cos(o)+r*Math.cos(i)*Math.sin(o)+e}function Oa(t,e,n){return{x:t*Math.cos(n),y:e*Math.sin(n)}}function La(t,e,n){var r=Math.cos(n),i=Math.sin(n);return[t*r-e*i,t*i+e*r]}const Ra={box:function(t,e,n,r,i,o,a){for(var s=function(t,e,n){return Math.atan(-e/t*Math.tan(n))}(n,r,i),u=1/0,l=-1/0,c=[o,a],h=2*-Math.PI;h<=2*Math.PI;h+=Math.PI){var d=s+h;o<a?o<d&&d<a&&c.push(d):a<d&&d<o&&c.push(d)}for(h=0;h<c.length;h++){var f=Na(t,0,n,r,i,c[h]);f<u&&(u=f),f>l&&(l=f)}var p=function(t,e,n){return Math.atan(e/(t*Math.tan(n)))}(n,r,i),m=1/0,g=-1/0,v=[o,a];for(h=2*-Math.PI;h<=2*Math.PI;h+=Math.PI){var y=p+h;o<a?o<y&&y<a&&v.push(y):a<y&&y<o&&v.push(y)}for(h=0;h<v.length;h++){var b=Pa(0,e,n,r,i,v[h]);b<m&&(m=b),b>g&&(g=b)}return{x:u,y:m,width:l-u,height:g-m}},length:function(t,e,n,r,i,o,a){},nearestPoint:function(t,e,n,r,i,o,a,s,u){var l=La(s-t,u-e,-i),c=l[0],h=l[1],d=Ia(0,0,n,r,c,h),f=function(t,e,n,r){return(Math.atan2(r*t,n*e)+2*Math.PI)%(2*Math.PI)}(n,r,d.x,d.y);f<o?d=Oa(n,r,o):f>a&&(d=Oa(n,r,a));var p=La(d.x,d.y,i);return{x:p[0]+t,y:p[1]+e}},pointDistance:function(t,e,n,r,i,o,a,s,u){var l=this.nearestPoint(t,e,n,r,s,u);return ha(l.x,l.y,s,u)},pointAt:function(t,e,n,r,i,o,a,s){var u=(a-o)*s+o;return{x:Na(t,0,n,r,i,u),y:Pa(0,e,n,r,i,u)}},tangentAngle:function(t,e,n,r,i,o,a,s){var u=(a-o)*s+o,l=function(t,e,n,r,i,o,a,s){return-1*n*Math.cos(i)*Math.sin(s)-r*Math.sin(i)*Math.cos(s)}(0,0,n,r,i,0,0,u),c=function(t,e,n,r,i,o,a,s){return-1*n*Math.sin(i)*Math.sin(s)+r*Math.cos(i)*Math.cos(s)}(0,0,n,r,i,0,0,u);return pa(Math.atan2(c,l))}};function Da(t){if(t.length<2)return 0;for(var e=0,n=0;n<t.length-1;n++){var r=t[n],i=t[n+1];e+=ha(r[0],r[1],i[0],i[1])}return e}const za=function(t){return Da(t)};function Fa(t,e){return t&&e?{minX:Math.min(t.minX,e.minX),minY:Math.min(t.minY,e.minY),maxX:Math.max(t.maxX,e.maxX),maxY:Math.max(t.maxY,e.maxY)}:t||e}function Ba(t,e){var n=t.get("startArrowShape"),r=t.get("endArrowShape");return n&&(e=Fa(e,n.getCanvasBBox())),r&&(e=Fa(e,r.getCanvasBBox())),e}var Ua=null;function ja(){if(!Ua){var t=document.createElement("canvas");t.width=1,t.height=1,Ua=t.getContext("2d")}return Ua}function Va(t,e,n){var r=1;if((0,x.isString)(t)&&(r=t.split("\n").length),r>1){var i=function(t,e){return e?e-t:.14*t}(e,n);return e*r+i*(r-1)}return e}function Ha(t){var e=t.fontSize,n=t.fontFamily,r=t.fontWeight;return[t.fontStyle,t.fontVariant,r,e+"px",n].join(" ").trim()}var Ga=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,Wa=/[^\s\,]+/gi;const Xa=function(t){var e=t||[];return(0,x.isArray)(e)?e:(0,x.isString)(e)?(e=e.match(Ga),(0,x.each)(e,(function(t,n){if((t=t.match(Wa))[0].length>1){var r=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=r}(0,x.each)(t,(function(e,n){isNaN(e)||(t[n]=+e)})),e[n]=t})),e):void 0};const Ya=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=[[0,0],[1,1]]);for(var r=!!e,i=[],o=0,a=t.length;o<a;o+=2)i.push([t[o],t[o+1]]);var s,u,l,c=function(t,e,n,r){var i,o,a,s,u,l,c,h=[],d=!!r;if(d){a=r[0],s=r[1];for(var f=0,p=t.length;f<p;f+=1){var m=t[f];a=ie.min([0,0],a,m),s=ie.max([0,0],s,m)}}f=0;for(var g=t.length;f<g;f+=1)if(m=t[f],0!==f||n)if(f!==g-1||n){i=t[[f?f-1:g-1,f-1][n?0:1]],o=t[n?(f+1)%g:f+1];var v=[0,0];v=ie.sub(v,o,i),v=ie.scale(v,v,e);var y=ie.distance(m,i),b=ie.distance(m,o),x=y+b;0!==x&&(y/=x,b/=x);var w=ie.scale([0,0],v,-y),_=ie.scale([0,0],v,b);l=ie.add([0,0],m,w),u=ie.add([0,0],m,_),u=ie.min([0,0],u,ie.max([0,0],o,m)),u=ie.max([0,0],u,ie.min([0,0],o,m)),w=ie.sub([0,0],u,m),w=ie.scale([0,0],w,-y/b),l=ie.add([0,0],m,w),l=ie.min([0,0],l,ie.max([0,0],i,m)),l=ie.max([0,0],l,ie.min([0,0],i,m)),_=ie.sub([0,0],m,l),_=ie.scale([0,0],_,b/y),u=ie.add([0,0],m,_),d&&(l=ie.max([0,0],l,a),l=ie.min([0,0],l,s),u=ie.max([0,0],u,a),u=ie.min([0,0],u,s)),h.push(c),h.push(l),c=u}else l=m,h.push(c),h.push(l);else c=m;return n&&h.push(h.shift()),h}(i,.4,r,n),h=i.length,d=[];for(o=0;o<h-1;o+=1)s=c[2*o],u=c[2*o+1],l=i[o+1],d.push(["C",s[0],s[1],u[0],u[1],l[0],l[1]]);return r&&(s=c[h],u=c[h+1],l=i[0],d.push(["C",s[0],s[1],u[0],u[1],l[0],l[1]])),d};var qa="\t\n\v\f\r \u2028\u2029",$a=new RegExp("([a-z])["+qa+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+qa+"]*,?["+qa+"]*)+)","ig"),Ka=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+qa+"]*,?["+qa+"]*","ig");function Za(t){if(!t)return null;if((0,x.isArray)(t))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(t).replace($a,(function(t,r,i){var o=[],a=r.toLowerCase();if(i.replace(Ka,(function(t,e){e&&o.push(+e)})),"m"===a&&o.length>2&&(n.push([r].concat(o.splice(0,2))),a="l",r="m"===r?"l":"L"),"o"===a&&1===o.length&&n.push([r,o[0]]),"r"===a)n.push([r].concat(o));else for(;o.length>=e[a]&&(n.push([r].concat(o.splice(0,e[a]))),e[a]););return""})),n}var Qa=/[a-z]/;function Ja(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}function ts(t){var e=Za(t);if(!e||!e.length)return[["M",0,0]];for(var n=!1,r=0;r<e.length;r++){var i=e[r][0];if(Qa.test(i)||["V","H","T","S"].indexOf(i)>=0){n=!0;break}}if(!n)return e;var o=[],a=0,s=0,u=0,l=0,c=0,h=e[0];"M"!==h[0]&&"m"!==h[0]||(u=a=+h[1],l=s=+h[2],c++,o[0]=["M",a,s]);r=c;for(var d=e.length;r<d;r++){var f=e[r],p=o[r-1],m=[],g=(i=f[0]).toUpperCase();if(i!==g)switch(m[0]=g,g){case"A":m[1]=f[1],m[2]=f[2],m[3]=f[3],m[4]=f[4],m[5]=f[5],m[6]=+f[6]+a,m[7]=+f[7]+s;break;case"V":m[1]=+f[1]+s;break;case"H":m[1]=+f[1]+a;break;case"M":u=+f[1]+a,l=+f[2]+s,m[1]=u,m[2]=l;break;default:for(var v=1,y=f.length;v<y;v++)m[v]=+f[v]+(v%2?a:s)}else m=e[r];switch(g){case"Z":a=+u,s=+l;break;case"H":m=["L",a=m[1],s];break;case"V":m=["L",a,s=m[1]];break;case"T":a=m[1],s=m[2];var b=Ja([p[1],p[2]],[p[3],p[4]]);m=["Q",b[0],b[1],a,s];break;case"S":a=m[m.length-2],s=m[m.length-1];var x=p.length,w=Ja([p[x-4],p[x-3]],[p[x-2],p[x-1]]);m=["C",w[0],w[1],m[1],m[2],a,s];break;case"M":u=m[m.length-2],l=m[m.length-1];break;default:a=m[m.length-2],s=m[m.length-1]}o.push(m)}return o}Math.PI;function es(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function ns(t,e){return es(t)*es(e)?(t[0]*e[0]+t[1]*e[1])/(es(t)*es(e)):1}function rs(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(ns(t,e))}function is(t,e){return t[0]===e[0]&&t[1]===e[1]}function os(t,e){var n=e[1],r=e[2],i=(0,x.mod)((0,x.toRadian)(e[3]),2*Math.PI),o=e[4],a=e[5],s=t[0],u=t[1],l=e[6],c=e[7],h=Math.cos(i)*(s-l)/2+Math.sin(i)*(u-c)/2,d=-1*Math.sin(i)*(s-l)/2+Math.cos(i)*(u-c)/2,f=h*h/(n*n)+d*d/(r*r);f>1&&(n*=Math.sqrt(f),r*=Math.sqrt(f));var p=n*n*(d*d)+r*r*(h*h),m=p?Math.sqrt((n*n*(r*r)-p)/p):1;o===a&&(m*=-1),isNaN(m)&&(m=0);var g=r?m*n*d/r:0,v=n?m*-r*h/n:0,y=(s+l)/2+Math.cos(i)*g-Math.sin(i)*v,b=(u+c)/2+Math.sin(i)*g+Math.cos(i)*v,w=[(h-g)/n,(d-v)/r],_=[(-1*h-g)/n,(-1*d-v)/r],S=rs([1,0],w),E=rs(w,_);return ns(w,_)<=-1&&(E=Math.PI),ns(w,_)>=1&&(E=0),0===a&&E>0&&(E-=2*Math.PI),1===a&&E<0&&(E+=2*Math.PI),{cx:y,cy:b,rx:is(t,[l,c])?0:n,ry:is(t,[l,c])?0:r,startAngle:S,endAngle:S+E,xRotation:i,arcFlag:o,sweepFlag:a}}function as(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}function ss(t){for(var e=[],n=null,r=null,i=null,o=0,a=(t=Xa(t)).length,s=0;s<a;s++){var u=t[s];r=t[s+1];var l=u[0],c={command:l,prePoint:n,params:u,startTangent:null,endTangent:null};switch(l){case"M":i=[u[1],u[2]],o=s;break;case"A":var h=os(n,u);c.arcParams=h}if("Z"===l)n=i,r=t[o+1];else{var d=u.length;n=[u[d-2],u[d-1]]}r&&"Z"===r[0]&&(r=t[o],e[o]&&(e[o].prePoint=n)),c.currentPoint=n,e[o]&&is(n,e[o].currentPoint)&&(e[o].prePoint=c.prePoint);var f=r?[r[r.length-2],r[r.length-1]]:null;c.nextPoint=f;var p=c.prePoint;if(["L","H","V"].includes(l))c.startTangent=[p[0]-n[0],p[1]-n[1]],c.endTangent=[n[0]-p[0],n[1]-p[1]];else if("Q"===l){var m=[u[1],u[2]];c.startTangent=[p[0]-m[0],p[1]-m[1]],c.endTangent=[n[0]-m[0],n[1]-m[1]]}else if("T"===l){m=as((y=e[s-1]).currentPoint,p);"Q"===y.command?(c.command="Q",c.startTangent=[p[0]-m[0],p[1]-m[1]],c.endTangent=[n[0]-m[0],n[1]-m[1]]):(c.command="TL",c.startTangent=[p[0]-n[0],p[1]-n[1]],c.endTangent=[n[0]-p[0],n[1]-p[1]])}else if("C"===l){var g=[u[1],u[2]],v=[u[3],u[4]];c.startTangent=[p[0]-g[0],p[1]-g[1]],c.endTangent=[n[0]-v[0],n[1]-v[1]],0===c.startTangent[0]&&0===c.startTangent[1]&&(c.startTangent=[g[0]-v[0],g[1]-v[1]]),0===c.endTangent[0]&&0===c.endTangent[1]&&(c.endTangent=[v[0]-g[0],v[1]-g[1]])}else if("S"===l){var y;g=as((y=e[s-1]).currentPoint,p),v=[u[1],u[2]];"C"===y.command?(c.command="C",c.startTangent=[p[0]-g[0],p[1]-g[1]],c.endTangent=[n[0]-v[0],n[1]-v[1]]):(c.command="SQ",c.startTangent=[p[0]-v[0],p[1]-v[1]],c.endTangent=[n[0]-v[0],n[1]-v[1]])}else if("A"===l){var b=.001,x=c.arcParams||{},w=x.cx,_=void 0===w?0:w,S=x.cy,E=void 0===S?0:S,A=x.rx,M=void 0===A?0:A,C=x.ry,T=void 0===C?0:C,k=x.sweepFlag,I=void 0===k?0:k,N=x.startAngle,P=void 0===N?0:N,O=x.endAngle,L=void 0===O?0:O;0===I&&(b*=-1);var R=M*Math.cos(P-b)+_,D=T*Math.sin(P-b)+E;c.startTangent=[R-i[0],D-i[1]];var z=M*Math.cos(P+L+b)+_,F=T*Math.sin(P+L-b)+E;c.endTangent=[p[0]-z,p[1]-F]}e.push(c)}return e}function us(t,e){var n=t.prePoint,r=t.currentPoint,i=t.nextPoint,o=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),a=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),s=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),u=Math.acos((o+a-s)/(2*Math.sqrt(o)*Math.sqrt(a)));if(!u||0===Math.sin(u)||(0,x.isNumberEqual)(u,0))return{xExtra:0,yExtra:0};var l=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),c=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));return l=l>Math.PI/2?Math.PI-l:l,c=c>Math.PI/2?Math.PI-c:c,{xExtra:Math.cos(u/2-l)*(e/2*(1/Math.sin(u/2)))-e/2||0,yExtra:Math.cos(c-u/2)*(e/2*(1/Math.sin(u/2)))-e/2||0}}sa("rect",la),sa("image",la),sa("circle",ca),sa("marker",ca),sa("polyline",(function(t){for(var e=t.attr().points,n=[],r=[],i=0;i<e.length;i++){var o=e[i];n.push(o[0]),r.push(o[1])}var a=fa(n,r),s=a.x,u=a.y,l={minX:s,minY:u,maxX:s+a.width,maxY:u+a.height};return{x:(l=Ba(t,l)).minX,y:l.minY,width:l.maxX-l.minX,height:l.maxY-l.minY}})),sa("polygon",(function(t){for(var e=t.attr().points,n=[],r=[],i=0;i<e.length;i++){var o=e[i];n.push(o[0]),r.push(o[1])}return fa(n,r)})),sa("text",(function(t){var e=t.attr(),n=e.x,r=e.y,i=e.text,o=e.fontSize,a=e.lineHeight,s=e.font;s||(s=Ha(e));var u,l=function(t,e){var n=ja(),r=0;if((0,x.isNil)(t)||""===t)return r;if(n.save(),n.font=e,(0,x.isString)(t)&&t.includes("\n")){var i=t.split("\n");(0,x.each)(i,(function(t){var e=n.measureText(t).width;r<e&&(r=e)}))}else r=n.measureText(t).width;return n.restore(),r}(i,s);if(l){var c=e.textAlign,h=e.textBaseline,d=Va(i,o,a),f={x:n,y:r-d};c&&("end"===c||"right"===c?f.x-=l:"center"===c&&(f.x-=l/2)),h&&("top"===h?f.y+=d:"middle"===h&&(f.y+=d/2)),u={x:f.x,y:f.y,width:l,height:d}}else u={x:n,y:r,width:0,height:0};return u})),sa("path",(function(t){var e=t.attr(),n=e.path,r=e.stroke?e.lineWidth:0,i=function(t,e){for(var n=[],r=[],i=[],o=0;o<t.length;o++){var a=(m=t[o]).currentPoint,s=m.params,u=m.prePoint,l=void 0;switch(m.command){case"Q":l=_a.box(u[0],u[1],s[1],s[2],s[3],s[4]);break;case"C":l=Ta.box(u[0],u[1],s[1],s[2],s[3],s[4],s[5],s[6]);break;case"A":var c=m.arcParams;l=Ra.box(c.cx,c.cy,c.rx,c.ry,c.xRotation,c.startAngle,c.endAngle);break;default:n.push(a[0]),r.push(a[1])}l&&(m.box=l,n.push(l.x,l.x+l.width),r.push(l.y,l.y+l.height)),e&&("L"===m.command||"M"===m.command)&&m.prePoint&&m.nextPoint&&i.push(m)}n=n.filter((function(t){return!Number.isNaN(t)&&t!==1/0&&t!==-1/0})),r=r.filter((function(t){return!Number.isNaN(t)&&t!==1/0&&t!==-1/0}));var h=(0,x.min)(n),d=(0,x.min)(r),f=(0,x.max)(n),p=(0,x.max)(r);if(0===i.length)return{x:h,y:d,width:f-h,height:p-d};for(o=0;o<i.length;o++){var m;(a=(m=i[o]).currentPoint)[0]===h?h-=us(m,e).xExtra:a[0]===f&&(f+=us(m,e).xExtra),a[1]===d?d-=us(m,e).yExtra:a[1]===p&&(p+=us(m,e).yExtra)}return{x:h,y:d,width:f-h,height:p-d}}(t.get("segments")||ss(n),r),o=i.x,a=i.y,s={minX:o,minY:a,maxX:o+i.width,maxY:a+i.height};return{x:(s=Ba(t,s)).minX,y:s.minY,width:s.maxX-s.minX,height:s.maxY-s.minY}})),sa("line",(function(t){var e=t.attr(),n=e.x1,r=e.y1,i=e.x2,o=e.y2,a={minX:Math.min(n,i),maxX:Math.max(n,i),minY:Math.min(r,o),maxY:Math.max(r,o)};return{x:(a=Ba(t,a)).minX,y:a.minY,width:a.maxX-a.minX,height:a.maxY-a.minY}})),sa("ellipse",(function(t){var e=t.attr(),n=e.x,r=e.y,i=e.rx,o=e.ry;return{x:n-i,y:r-o,width:2*i,height:2*o}}));var ls=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.item=n.item,r.canvasX=n.canvasX,r.canvasY=n.canvasY,r.wheelDelta=n.wheelDelta,r.detail=n.detail,r}return(0,b.__extends)(e,t),e}(nr),cs=function(t){return"".concat(t,"-").concat(Math.random()).concat(Date.now())},hs=function(t){if((0,x.isArray)(t))switch(t.length){case 4:return t;case 3:return t.push(t[1]),t;case 2:return t.concat(t);case 1:return[t[0],t[0],t[0],t[0]];default:return[0,0,0,0]}if((0,x.isNumber)(t))return[t,t,t,t];if((0,x.isString)(t)){var e=parseInt(t,10);return[e,e,e,e]}return[0,0,0,0]},ds=function(t){var e=new ls(t.type,t);return e.clientX=t.clientX,e.clientY=t.clientY,e.x=t.x,e.y=t.y,e.target=t.target,e.currentTarget=t.currentTarget,e.bubbles=!0,e.item=t.item,e},fs=function(t){if(!t)return!1;for(var e=[1,0,0,0,1,0,0,0,1],n=0;n<9;n++)if(t[n]!==e[n])return!0;return!1},ps=function(t){return Number.isNaN(Number(t))},ms=function(t){for(var e=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<t.length;o++){var a=t[o].getBBox(),s=a.minX,u=a.minY,l=a.maxX,c=a.maxY;s<e&&(e=s),u<r&&(r=u),l>n&&(n=l),c>i&&(i=c)}return{x:Math.floor(e),y:Math.floor(r),width:Math.ceil(n)-Math.floor(e),height:Math.ceil(i)-Math.floor(r),minX:e,minY:r,maxX:n,maxY:i}},gs=function(t,e,n,r,i){void 0===e&&(e=15),void 0===n&&(n="quadratic"),void 0===r&&(r=void 0),void 0===i&&(i=void 0);for(var o=t.length,a=2*e,s=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],u={},l=[],c={},h=0;h<o;h++){var d=t[h],f=d.source,p=d.target,m="".concat(f,"-").concat(p);if(!l[h]){u[m]||(u[m]=[]),l[h]=!0,u[m].push(d);for(var g=0;g<o;g++)if(h!==g){var v=t[g],y=v.source,b=v.target;l[g]||(f===b&&p===y?(u[m].push(v),l[g]=!0,c["".concat(y,"|").concat(b,"|").concat(u[m].length-1)]=!0):f===y&&p===b&&(u[m].push(v),l[g]=!0))}}}for(var x in u)for(var w=u[x],_=w.length,S=0;S<_;S++){var E=w[S];if(E.source!==E.target)if(1===_&&r&&E.source!==E.target)E.type=r;else{E.type=n;var A=(S%2==0?1:-1)*(c["".concat(E.source,"|").concat(E.target,"|").concat(S)]?-1:1);E.curveOffset=_%2==1?A*Math.ceil(S/2)*a:A*(Math.floor(S/2)*a+e)}else i&&(E.type=i),E.loopCfg={position:s[S%8],dist:20*Math.floor(S/8)+50}}return t},vs=n(47114),ys=function(){function t(t){this.destroyed=!1,this.graph=t,this.destroyed=!1}return t.prototype.getViewCenter=function(){var t=this.getFormatPadding(),e=this.graph,n=this.graph.get("width"),r=e.get("height");return{x:(n-t[1]-t[3])/2+t[3],y:(r-t[0]-t[2])/2+t[0]}},t.prototype.fitCenter=function(t,e){var n,r=this.graph,i=r.get("group"),o=r.getNodes();if(o.length>r.get("optimizeThreshold")){var a=1/0,s=1/0,u=-1/0,l=-1/0;o.forEach((function(t){var e=t.getModel(),n=e.x,r=e.y;a>n&&(a=n),s>r&&(s=r),u<n&&(u=n),l<r&&(l=r)}));var c=i.getMatrix()||[1,0,0,0,1,0,0,0,1],h=de({x:a,y:s},c),d=h.x,f=h.y,p=de({x:u,y:l},c),m=p.x,g=p.y;n={minX:d,maxX:m,minY:f,maxY:g,width:m-d,height:g-f,x:d,y:f}}else n=i.getCanvasBBox();if(0!==n.width&&0!==n.height){var v=this.getViewCenter(),y=n.x+n.width/2,b=n.y+n.height/2;r.translate(v.x-y,v.y-b,t,e)}},t.prototype.animatedFitView=function(t,e,n,r,i,o,a,s){var u=this.graph;n=n||{duration:500,easing:"easeCubic"};var l=r.x+i.x-o.x-r.minX,c=r.y+i.y-o.y-r.minY;if(!ps(l)&&!ps(c)){var h=(0,vs.pd)([1,0,0,0,1,0,0,0,1],[["t",l,c]]);if(s){var d=u.get("minZoom"),f=u.get("maxZoom"),p=a;d&&a<d?(p=d,console.warn("fitview failed, ratio out of range, ratio: %f",a,"graph minzoom has been used instead")):f&&a>f&&(p=f,console.warn("fitview failed, ratio out of range, ratio: %f",a,"graph maxzoom has been used instead"));var m=(0,vs.pd)(h,[["t",-i.x,-i.y],["s",p,p],["t",i.x,i.y]]),g=bn({animateCfg:n,callback:function(){t.setMatrix(m),u.emit("viewportchange",{action:"translate",matrix:h}),u.emit("viewportchange",{action:"zoom",matrix:m})}});t.stopAnimate(),t.setMatrix(e),t.animate((function(t){return{matrix:Ue(e,m,t)}}),g)}else{var v=bn({animateCfg:n,callback:function(){u.emit("viewportchange",{action:"translate",matrix:h})}});t.animate((function(t){return{matrix:Ue(e,h,t)}}),v)}}},t.prototype.fitView=function(t,e){var n,r=this.graph,i=this.getFormatPadding(),o=r.get("width"),a=r.get("height"),s=r.get("group"),u=s.getMatrix()||[1,0,0,0,1,0,0,0,1];s.resetMatrix();var l=r.getNodes();if(l.length>r.get("optimizeThreshold")){var c=1/0,h=1/0,d=-1/0,f=-1/0;l.forEach((function(t){var e=t.getModel(),n=e.x,r=e.y;c>n&&(c=n),h>r&&(h=r),d<n&&(d=n),f<r&&(f=r)})),n={minX:c,maxX:d,minY:h,maxY:f,width:d-c,height:f-h,x:c,y:h}}else n=s.getCanvasBBox();if(0!==n.width&&0!==n.height){var p=this.getViewCenter(),m={x:n.x+n.width/2,y:n.y+n.height/2},g=(o-i[1]-i[3])/n.width,v=(a-i[0]-i[2])/n.height,y=g;if(g>v&&(y=v),t)this.animatedFitView(s,u,e,n,p,m,y,!0);else{var b=p.x-m.x,x=p.y-m.y;if(ps(b)||ps(x))return;r.translate(b,x),r.zoom(y,p)||console.warn("zoom failed, ratio out of range, ratio: %f",y)}}},t.prototype.fitViewByRules=function(t,e,n){var r,i=t.onlyOutOfViewPort,o=void 0!==i&&i,a=t.direction,s=void 0===a?"both":a,u=t.ratioRule,l=void 0===u?"min":u,c=this.graph,h=this.getFormatPadding(),d=c.get("width"),f=c.get("height"),p=c.get("group"),m=p.getMatrix()||[1,0,0,0,1,0,0,0,1];p.resetMatrix();var g=c.getNodes();if(g.length>c.get("optimizeThreshold")){var v=1/0,y=1/0,b=-1/0,x=-1/0;g.forEach((function(t){var e=t.getModel(),n=e.x,r=e.y;v>n&&(v=n),y>r&&(y=r),b<n&&(b=n),x<r&&(x=r)})),r={minX:v,maxX:b,minY:y,maxY:x,width:b-v,height:x-y,x:v,y}}else r=p.getCanvasBBox();if(0!==r.width&&0!==r.height){var w,_=this.getViewCenter(),S={x:r.x+r.width/2,y:r.y+r.height/2},E=(d-h[1]-h[3])/r.width,A=(f-h[0]-h[2])/r.height;if(w="x"===s?E:"y"===s?A:"max"===l?Math.max(E,A):Math.min(E,A),o&&(w=w<1?w:1),e)this.animatedFitView(p,m,n,r,_,S,w,!0);else{var M=c.getZoom()*w,C=c.get("minZoom");M<C&&(M=C,console.warn("fitview failed, ratio out of range, ratio: %f",w,"graph minzoom has been used instead")),c.translate(_.x-S.x,_.y-S.y),c.zoomTo(M,_)}}},t.prototype.getFormatPadding=function(){var t=this.graph.get("fitViewPadding");return hs(t)},t.prototype.focusPoint=function(t,e,n){var r=this,i=this.getViewCenter(),o=this.getPointByCanvas(i.x,i.y),a=this.graph.get("group").getMatrix();if(a||(a=[1,0,0,0,1,0,0,0,1]),e){var s=(o.x-t.x)*a[0],u=(o.y-t.y)*a[4],l=0,c=0,h=0,d=0;this.graph.get("canvas").animate((function(t){h=s*t,d=u*t,r.graph.translate(h-l,d-c),l=h,c=d}),(0,b.__assign)({},n))}else this.graph.translate((o.x-t.x)*a[0],(o.y-t.y)*a[4])},t.prototype.getPointByCanvas=function(t,e){var n=this.graph.get("group").getMatrix();return n||(n=[1,0,0,0,1,0,0,0,1]),fe({x:t,y:e},n)},t.prototype.getPointByClient=function(t,e){var n=this.graph.get("canvas").getPointByClient(t,e);return this.getPointByCanvas(n.x,n.y)},t.prototype.getClientByPoint=function(t,e){var n=this.graph.get("canvas"),r=this.getCanvasByPoint(t,e),i=n.getClientByPoint(r.x,r.y);return{x:i.x,y:i.y}},t.prototype.getCanvasByPoint=function(t,e){var n=this.graph.get("group").getMatrix();return n||(n=[1,0,0,0,1,0,0,0,1]),de({x:t,y:e},n)},t.prototype.focus=function(t,e,n){if((0,x.isString)(t)&&(t=this.graph.findById(t)),t){var r=0,i=0;if(t.getType&&"edge"===t.getType()){var o=t.getSource().get("group").getMatrix(),a=t.getTarget().get("group").getMatrix();o&&a?(r=(o[6]+a[6])/2,i=(o[7]+a[7])/2):(o||a)&&(r=o?o[6]:a[6],i=o?o[7]:a[7])}else{var s=t.get("group").getMatrix();s||(s=[1,0,0,0,1,0,0,0,1]),r=s[6],i=s[7]}this.focusPoint({x:r,y:i},e,n)}},t.prototype.focusItems=function(t,e,n,r){if(t.length){var i=this.graph,o=this.getFormatPadding(),a=i.get("width"),s=i.get("height"),u=i.get("group"),l=u.getMatrix()||[1,0,0,0,1,0,0,0,1];u.resetMatrix();for(var c={x:0,y:0,minX:Number.MAX_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER,width:0,height:0},h=0,d=t;h<d.length;h++){var f=d[h].getBBox();f.minX<c.minX&&(c.minX=f.minX),f.minY<c.minY&&(c.minY=f.minY),f.maxX>c.maxX&&(c.maxX=f.maxX),f.maxY>c.maxY&&(c.maxY=f.maxY)}if(c.x=c.minX,c.y=c.minY,c.width=c.maxX-c.minX,c.height=c.maxY-c.minY,0!==c.width&&0!==c.height){var p=this.getViewCenter(),m={x:c.x+c.width/2,y:c.y+c.height/2},g=(a-o[1]-o[3])/c.width,v=(s-o[0]-o[2])/c.height,y=g;g>v&&(y=v),n?this.animatedFitView(u,l,r,c,p,m,y,e):(i.translate(p.x-m.x,p.y-m.y),e&&!i.zoom(y,p)&&console.warn("zoom failed, ratio out of range, ratio: %f",y))}}},t.prototype.changeSize=function(t,e){var n=this.graph;if(!(0,x.isNumber)(t)||!(0,x.isNumber)(e))throw Error("invalid canvas width & height, please make sure width & height type is number");n.set({width:t,height:e}),n.get("canvas").changeSize(t,e),n.get("plugins").forEach((function(t){t.get("gridContainer")&&t.positionInit()}))},t.prototype.destroy=function(){this.graph=null,this.destroyed=!1},t}();const bs=ys;function xs(t){return xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xs(t)}function ws(t){if("string"!=typeof t)return t;var e=function(t){if("string"!=typeof t)return t;try{return JSON.parse(t.trim())}catch(e){return t.trim()}},n=e(t);if("string"!=typeof n)return n;for(var r=function(t){return t[t.length-1]},i=t.trim(),o=[],a=[],s=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.some((function(t){return r(a)===t}))},u=null,l=0,c="";l<i.length;){var h=i[l],d=s('"',"'");if(d||h.trim()){var f="\\"===i[l-1],p=s("}"),m=s("]"),g=s(","),v=r(o);if(d)if(r(a)!==h||f)c+=h;else{a.pop();var y=e(c);v.push(y),u=y,c=""}else if(m&&","===h)c&&(v.push(e(c)),c="");else if(p&&":"===h)a.push(","),c&&(v.push(c),c="");else if(g&&","===h)c&&(v.push(e(c)),c=""),a.pop();else if("}"===h&&(p||g)){c&&(v.push(e(c)),c=""),g&&a.pop();for(var b={},x=1;x<v.length;x+=2)b[v[x-1]]=v[x];o.pop(),o.length&&r(o).push(b),a.pop(),u=b}else"]"===h&&m?(c&&(v.push(e(c)),c=""),o.pop(),o.length&&r(o).push(v),a.pop(),u=v):"{"===h?(o.push([]),a.push("}")):"["===h?(o.push([]),a.push("]")):'"'===h?a.push('"'):"'"===h?a.push("'"):c+=h;l+=1}else l+=1}return u||c}var _s=function(t){return t.split("-").reduce((function(t,e){return t+e.charAt(0).toUpperCase()+e.slice(1)}))};function Ss(t,e){var n={},r=t.getAttributeNames&&t.getAttributeNames()||[],i=t.children&&Array.from(t.children).map((function(t){return Ss(t,e)})),o={},a=t.tagName?t.tagName.toLowerCase():"group";return"text"===a&&(n.text=t.innerText),o.type=a,"img"===a&&(o.type="image"),Array.from(r).forEach((function(e){var r=_s(e),i=t.getAttribute(e);try{if("style"===r||"attrs"===r){var a=ws(i);n=(0,b.__assign)((0,b.__assign)({},n),a)}else o[r]=ws(i)}catch(t){if("style"===r)throw t;o[r]=i}})),o.attrs=n,e&&e.style&&o.name&&"object"===xs(e.style[o.name])&&(o.attrs=(0,b.__assign)((0,b.__assign)({},o.attrs),e.style[o.name])),e&&e.style&&o.keyshape&&(o.attrs=(0,b.__assign)((0,b.__assign)({},o.attrs),e.style)),i.length&&(o.children=i),o}function Es(t,e){var n;void 0===e&&(e={x:0,y:0});var r=(0,b.__assign)({x:0,y:0,width:0,height:0},e);if(null===(n=t.children)||void 0===n?void 0:n.length){var i=t.attrs,o=void 0===i?{}:i,a=o.marginTop,s=(0,b.__assign)({},e);a&&(s.y+=a);for(var u=0;u<t.children.length;u++){t.children[u].attrs.key="".concat(o.key||"root"," -").concat(u," ");var l=Es(t.children[u],s);if(l.bbox){var c=l.bbox;"inline"===l.attrs.next?s.x+=l.bbox.width:s.y+=l.bbox.height,c.width+c.x>r.width&&(r.width=c.width+c.x),c.height+c.y>r.height&&(r.height=c.height+c.y)}}}return t.bbox=function(t,e,n){var r,i,o=t.attrs,a=void 0===o?{}:o,s={x:e.x||0,y:e.y||0,width:n.width||0,height:n.height||0};switch(t.type){case"maker":case"circle":a.r&&(i=2*a.r,r=2*a.r);break;case"text":a.text&&(i=dn(a.text,a.fontSize||12)[0],r=16,s.y+=r,s.height=r,s.width=i,t.attrs=(0,b.__assign)({fontSize:12,fill:"#000"},a));break;default:a.width&&(i=a.width),a.height&&(r=a.height)}return r>=0&&(s.height=r),i>=0&&(s.width=i),a.marginTop&&(s.y+=a.marginTop),a.marginLeft&&(s.x+=a.marginLeft),s}(t,e,r),t.attrs=(0,b.__assign)((0,b.__assign)({},t.attrs),t.bbox),t}function As(t,e){var n,r,i,o,a=(t||{}).type,s=((null==e?void 0:e.attrs)||{}).key;if(s&&t&&(t.attrs.key=s),!t&&e)return{action:"delete",val:e,type:a,key:s};if(t&&!e)return{action:"add",val:t,type:a};if(!t&&!e)return{action:"same",type:a};var u=[];if((null===(n=t.children)||void 0===n?void 0:n.length)>0||(null===(r=e.children)||void 0===r?void 0:r.length)>0)for(var l=Math.max(null===(i=t.children)||void 0===i?void 0:i.length,null===(o=e.children)||void 0===o?void 0:o.length),c=e.children||[],h=t.children||[],d=0;d<l;d+=1)u.push(As(h[d],c[d]));var f=Object.keys(e.attrs),p=Object.keys(t.attrs);return e.type!==t.type?{action:"restructure",nowTarget:t,formerTarget:e,key:s,children:u}:f.filter((function(t){return"children"!==t})).some((function(n){return t.attrs[n]!==e.attrs[n]||!p.includes(n)}))?{action:"change",val:t,children:u,type:a,key:s}:{action:"same",children:u,type:a,key:s}}function Ms(t){var e={},n=function(e){var n=function(t){return function(e){for(var n=t.length,r=[],i=0,o="";i<n;)if("{"===t[i]&&"{"===t[i+1])r.push(o),o="",i+=2;else if("}"===t[i]&&"}"===t[i+1]){if(r.length){var a=r.pop();o=(0,x.get)(e,o,a.endsWith("=")?'"{'.concat(o,'}"'):o),r.push(a+o)}i+=2,o=""}else o+=t[i],i+=1;return r.push(o),r.map((function(t,e){return r[e-1]&&r[e-1].endsWith("=")?'"{'.concat(t,'}"'):t})).join("")}}("function"==typeof t?t(e):t)(e),r=document.createElement("div");r.innerHTML=n;var i=Es(Ss(r.children[0],e));return r.remove(),i};return{draw:function(t,r){var i=n(t),o=r;return function t(e){var n=e.attrs,i=void 0===n?{}:n,a=e.bbox,s=e.type,u=e.children,l=(0,b.__rest)(e,["attrs","bbox","type","children"]);if("group"!==e.type){var c=r.addShape(e.type,(0,b.__assign)({attrs:i,origin:{bbox:a,type:s,children:u}},l));e.keyshape&&(o=c)}e.children&&e.children.forEach((function(e){return t(e)}))}(i),e[t.id]=[i],o},update:function(t,r){e[t.id]||(e[t.id]=[]);var i=r.getContainer(),o=i.get("children"),a=n(t),s=As(a,e[t.id].pop()),u=function t(e){var n;"group"!==e.type&&i.addShape(e.type,{attrs:e.attrs}),(null===(n=e.children)||void 0===n?void 0:n.length)&&e.children.map((function(e){return t(e)}))},l=function t(e){var n,r=o.find((function(t){return t.attrs.key===e.attrs.key}));r&&i.removeChild(r),(null===(n=e.children)||void 0===n?void 0:n.length)&&e.children.map((function(e){return t(e)}))};!function t(e){var n=e.key;if("group"!==e.type){var i=o.find((function(t){return t.attrs.key===n}));switch(e.action){case"change":if(i){var a=e.val.keyshape?r.getOriginStyle():{};i.attr((0,b.__assign)((0,b.__assign)({},a),e.val.attrs))}break;case"add":u(e.val);break;case"delete":l(e.val);break;case"restructure":l(e.formerTarget),u(e.nowTarget)}}e.children&&e.children.forEach((function(e){return t(e)}))}(s),e[t.id].push(a)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var Cs={};function Ts(t){return Cs[t]||(Cs[t]=(0,x.upperFirst)(t)),Cs[t]}var ks={defaultShapeType:"defaultType",className:null,getShape:function(t){var e=this;return e[t]||e[e.defaultShapeType]||e["simple-circle"]},draw:function(t,e,n){var r=this.getShape(t);n.shapeMap={};var i=r.draw(e,n);return r.afterDraw&&r.afterDraw(e,n,i),i},baseUpdate:function(t,e,n,r){var i,o,a=this.getShape(t);a.update&&(a.mergeStyle=null===(i=a.getOptions)||void 0===i?void 0:i.call(a,e,r),null===(o=a.update)||void 0===o||o.call(a,e,n,r)),a.afterUpdate&&a.afterUpdate(e,n)},setState:function(t,e,n,r){this.getShape(t).setState(e,n,r)},shouldUpdate:function(t){return!!this.getShape(t).update},getControlPoints:function(t,e){return this.getShape(t).getControlPoints(e)},getAnchorPoints:function(t,e){return this.getShape(t).getAnchorPoints(e)}},Is={options:{},draw:function(t,e){return this.drawShape(t,e)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(t){return t.controlPoints},getAnchorPoints:function(t){var e=this.options.anchorPoints;return t.anchorPoints||e}},Ns=function(){function t(){}return t.registerFactory=function(e,n){var r=Ts(e),i=ks,o=(0,b.__assign)((0,b.__assign)({},i),n);return t[r]=o,o.className=r,o},t.getFactory=function(e){return t[Ts(e)]},t.registerNode=function(e,n,r){var i,o=t.Node;if("string"==typeof n||"function"==typeof n){var a=Ms(n);i=(0,b.__assign)((0,b.__assign)({},o.getShape("single-node")),a)}else if(n.jsx){a=Ms(n.jsx);i=(0,b.__assign)((0,b.__assign)((0,b.__assign)({},o.getShape("single-node")),a),n)}else{o.getShape(r);var s=r?o.getShape(r):Is;i=(0,b.__assign)((0,b.__assign)({},s),n)}return i.type=e,i.itemType="node",o[e]=i,i},t.registerEdge=function(e,n,r){var i=t.Edge,o=r?i.getShape(r):Is,a=(0,b.__assign)((0,b.__assign)({},o),n);return a.type=e,a.itemType="edge",i[e]=a,a},t.registerCombo=function(e,n,r){var i=t.Combo,o=r?i.getShape(r):Is,a=(0,b.__assign)((0,b.__assign)({},o),n);return a.type=e,a.itemType="combo",i[e]=a,a},t}();const Ps=Ns;Ns.registerFactory("node",{defaultShapeType:"circle"}),Ns.registerFactory("edge",{defaultShapeType:"line"}),Ns.registerFactory("combo",{defaultShapeType:"circle"});var Os="bboxCache",Ls="bboxCanvasCache",Rs=function(){function t(t){this._cfg={},this.destroyed=!1,this.optimize=!1;var e={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(e,this.getDefaultCfg(),t);var n=this.get("model"),r=n.id,i=this.get("type");void 0===r?r=cs(i):"string"!=typeof r&&(r=String(r)),this.get("model").id=r,this.set("id",r);var o=t.group;o&&(o.set("item",this),o.set("id",r)),this.init(),this.draw();var a=n.shape||n.type||("edge"===i?"line":"circle"),s=this.get("shapeFactory");if(s&&s[a]){var u=s[a].options;if(u&&u.stateStyles){var l=this.get("styles")||n.stateStyles;l=(0,x.deepMix)({},u.stateStyles,l),this.set("styles",l)}}}return t.prototype.calculateBBox=function(){var t=this.get("keyShape"),e=this.get("group"),n=rn(t,e);return n.x=n.minX,n.y=n.minY,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n},t.prototype.calculateCanvasBBox=function(){var t=this.get("keyShape"),e=this.get("group"),n=rn(t,e);return n.x=n.minX,n.y=n.minY,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n},t.prototype.drawInner=function(){var t=this,e=t.get("shapeFactory"),n=t.get("group"),r=t.get("model");n.clear();var i=r.visible;if(void 0===i||i||t.changeVisibility(i),e){t.updatePosition(r);var o=t.getShapeCfg(r),a=o.type,s=e.draw(a,o,n);s&&(t.set("keyShape",s),s.set("isKeyShape",!0),s.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",a),this.restoreStates(e,a)}},t.prototype.setOriginStyle=function(){var t=this.get("group"),e=t.get("children"),n=this.getKeyShape(),r=this,i=n.get("name");if(this.get("originStyle")){var o=this.get("originStyle");i&&!o[i]&&(o[i]={});var a=this.getCurrentStatesStyle(),s=function(t){var n=e[t],s=n.get("name"),u=n.attr();if(s&&s!==i){var l=a[s];o[s]||(o[s]={}),l?Object.keys(u).forEach((function(t){var e=u[t];e!==l[t]&&(o[s][t]=e)})):o[s]="image"!==n.get("type")?(0,x.clone)(u):r.getShapeStyleByName(s)}else{var c=n.attr(),h={};Object.keys(a).forEach((function(t){var e=a[t];t!==i&&(0,x.isPlainObject)(e)||(h[t]=e)})),Object.keys(c).forEach((function(t){var e=c[t];h[t]!==e&&(i?o[i][t]=e:o[t]=e)}))}};for(l=0;l<e.length;l++)s(l);delete o.path,delete o.matrix,delete o.x,delete o.y,o[i]&&(delete o[i].x,delete o[i].y,delete o[i].matrix,delete o[i].path),r.set("originStyle",o)}else{for(var u={},l=0;l<e.length;l++){var c=e[l],h=c.get("type"),d=c.get("name");if(d&&d!==i)u[d]="image"!==h?(0,x.clone)(c.attr()):r.getShapeStyleByName(d),"text"===h&&u[d]&&(delete u[d].x,delete u[d].y,delete u[d].matrix);else{var f=r.getShapeStyleByName();if(delete f.path,delete f.matrix,i)if(d)u[i]=f;else{var p=cs("shape");c.set("name",p),t.shapeMap[p]=c,u[p]="image"!==h?(0,x.clone)(c.attr()):r.getShapeStyleByName(d)}else Object.assign(u,f)}}r.set("originStyle",u)}},t.prototype.restoreStates=function(t,e){var n=this,r=n.get("states");(0,x.each)(r,(function(r){t.setState(e,r,!0,n)}))},t.prototype.init=function(){var t=Ps.getFactory(this.get("type"));this.set("shapeFactory",t)},t.prototype.get=function(t){return this._cfg[t]},t.prototype.set=function(t,e){(0,x.isPlainObject)(t)?this._cfg=(0,b.__assign)((0,b.__assign)({},this._cfg),t):this._cfg[t]=e},t.prototype.getDefaultCfg=function(){return{}},t.prototype.clearCache=function(){this.set(Os,null),this.set(Ls,null)},t.prototype.beforeDraw=function(){},t.prototype.afterDraw=function(){},t.prototype.afterUpdate=function(){},t.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},t.prototype.getShapeStyleByName=function(t){var e,n=this.get("group");if(e=t?n.shapeMap[t]||n.find((function(e){return e.get("name")===t})):this.getKeyShape()){var r={};return(0,x.each)(e.attr(),(function(t,e){("img"!==e||(0,x.isString)(t))&&(r[e]=t)})),r}return{}},t.prototype.getShapeCfg=function(t,e){var n=this.get("styles");if(n){var r=t;return r.style=(0,b.__assign)((0,b.__assign)({},n),t.style),r}return t},t.prototype.getStateStyle=function(t){var e=this.get("styles");return e&&e[t]},t.prototype.getOriginStyle=function(){return this.get("originStyle")},t.prototype.getCurrentStatesStyle=function(){var t=this,e={},n=t.getStates();return n&&n.length?((0,x.each)(t.getStates(),(function(n){e=Object.assign(e,t.getStateStyle(n))})),e):this.get("originStyle")},t.prototype.setState=function(t,e){var n=this.get("states"),r=this.get("shapeFactory"),i=t,o=t;(0,x.isString)(e)&&(i="".concat(t,":").concat(e),o="".concat(t,":"));var a=n;if((0,x.isBoolean)(e)){var s=n.indexOf(o);if(e){if(s>-1)return;n.push(i)}else s>-1&&n.splice(s,1)}else if((0,x.isString)(e)){var u=n.filter((function(t){return t.includes(o)}));u.length>0&&this.clearStates(u),(a=a.filter((function(t){return!t.includes(o)}))).push(i),this.set("states",a)}if(r){var l=this.get("model").type;r.setState(l,t,e,this)}},t.prototype.clearStates=function(t){var e=this,n=e.getStates(),r=e.get("shapeFactory"),i=e.get("model").type;t||(t=n),(0,x.isString)(t)&&(t=[t]);var o=n.filter((function(e){return-1===t.indexOf(e)}));e.set("states",o),t.forEach((function(t){r.setState(i,t,!1,e)}))},t.prototype.setOptimize=function(t){this.optimize=t},t.prototype.getContainer=function(){return this.get("group")},t.prototype.getKeyShape=function(){return this.get("keyShape")},t.prototype.getModel=function(){return this.get("model")},t.prototype.getType=function(){return this.get("type")},t.prototype.getID=function(){return this.get("id")},t.prototype.isItem=function(){return!0},t.prototype.getStates=function(){return this.get("states")},t.prototype.hasState=function(t){return this.getStates().indexOf(t)>=0},t.prototype.refresh=function(t){var e=this.get("model");this.updatePosition(e),this.updateShape(t),this.afterUpdate(),this.clearCache()},t.prototype.getUpdateType=function(t){},t.prototype.update=function(t,e){void 0===e&&(e=void 0);var n=this.get("model");if("move"===e)this.updatePosition(t);else{var r=n.visible,i=t.visible;r!==i&&void 0!==i&&this.changeVisibility(i);var o={x:n.x,y:n.y};t.x=isNaN(+t.x)?n.x:+t.x,t.y=isNaN(+t.y)?n.y:+t.y;var a=this.get("styles");if(t.stateStyles){var s=t.stateStyles;(0,x.mix)(a,s),delete t.stateStyles}Object.assign(n,t),o.x===t.x&&o.y===t.y||this.updatePosition(t),this.updateShape(e)}this.afterUpdate(),this.clearCache()},t.prototype.updateShape=function(t){var e=this.get("shapeFactory"),n=this.get("model"),r=n.type;if(e.shouldUpdate(r)&&r===this.get("currentShape")){var i=this.getShapeCfg(n,t);e.baseUpdate(r,i,this,t),"move"!==t&&this.setOriginStyle()}else this.draw();this.restoreStates(e,r)},t.prototype.updatePosition=function(t){var e=this.get("model"),n=isNaN(+t.x)?+e.x:+t.x,r=isNaN(+t.y)?+e.y:+t.y,i=this.get("group");if(isNaN(n)||isNaN(r))return!1;e.x=n,e.y=r;var o=i.getMatrix();return(!o||o[6]!==n||o[7]!==r)&&(i.resetMatrix(),be(i,{x:n,y:r}),this.clearCache(),!0)},t.prototype.getBBox=function(){var t=this.get(Os);return t||(t=this.calculateBBox(),this.set(Os,t)),t},t.prototype.getCanvasBBox=function(){var t=this.get(Ls);return t||(t=this.calculateCanvasBBox(),this.set(Ls,t)),t},t.prototype.toFront=function(){this.get("group").toFront()},t.prototype.toBack=function(){this.get("group").toBack()},t.prototype.show=function(){this.changeVisibility(!0)},t.prototype.hide=function(){this.changeVisibility(!1)},t.prototype.changeVisibility=function(t){var e=this.get("group");t?e.show():e.hide(),this.set("visible",t)},t.prototype.isVisible=function(){return this.get("visible")},t.prototype.enableCapture=function(t){var e=this.get("group");e&&e.set("capture",t)},t.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),e=this.get("group");t&&e.stopAnimate(),e.shapeMap={},this.clearCache(),e.remove(),this._cfg=null,this.destroyed=!0}},t}();const Ds=Rs;var zs={source:"start",target:"end"},Fs="Node",Bs="Point",Us=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,b.__extends)(e,t),e.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},e.prototype.setEnd=function(t,e){var n=zs[t]+Bs,r=t+Fs,i=this.get(r);i&&!i.destroyed&&i.removeEdge(this),(0,x.isPlainObject)(e)?(this.set(n,e),this.set(r,null)):e&&(e.addEdge(this),this.set(r,e),this.set(n,null))},e.prototype.getLinkPoint=function(t,e,n){var r=zs[t]+Bs,i=t+Fs,o=this.get(r);if(!o){var a=this.get(i),s=t+"Anchor",u=this.getPrePoint(t,n),l=e[s];(0,x.isNil)(l)||(o=a.getLinkPointByAnchor(l)),o=o||a.getLinkPoint(u),(0,x.isNil)(o.index)||this.set("".concat(t,"AnchorIndex"),o.index)}return o},e.prototype.getPrePoint=function(t,e){if(e&&e.length)return e["source"===t?0:e.length-1];var n="source"===t?"target":"source";return this.getEndPoint(n)},e.prototype.getEndPoint=function(t){var e=t+Fs,n=zs[t]+Bs,r=this.get(e);return r&&!r.destroyed?r.get("model"):this.get(n)},e.prototype.getControlPointsByCenter=function(t){var e=this.getEndPoint("source"),n=this.getEndPoint("target"),r=this.get("shapeFactory"),i=t.type;return r.getControlPoints(i,{startPoint:e,endPoint:n})},e.prototype.getEndCenter=function(t){var e=t+Fs,n=zs[t]+Bs,r=this.get(e);if(r){var i=r.getBBox();return{x:i.centerX,y:i.centerY}}return this.get(n)},e.prototype.init=function(){t.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},e.prototype.getShapeCfg=function(e,n){var r=this,i=r.get("linkCenter"),o=(null==n?void 0:n.includes("move"))?e:t.prototype.getShapeCfg.call(this,e);if(i)o.startPoint=r.getEndCenter("source"),o.endPoint=r.getEndCenter("target");else{var a=o.controlPoints||r.getControlPointsByCenter(o);o.startPoint=r.getLinkPoint("source",e,a),o.endPoint=r.getLinkPoint("target",e,a)}return o.sourceNode=r.get("sourceNode"),o.targetNode=r.get("targetNode"),o},e.prototype.getModel=function(){var t=this.get("model"),e=this.get("source".concat(Fs)),n=this.get("target".concat(Fs));return e?delete t["source".concat(Fs)]:t.source=this.get("start".concat(Bs)),n?delete t["target".concat(Fs)]:t.target=this.get("end".concat(Bs)),(0,x.isString)(t.source)||(0,x.isPlainObject)(t.source)||(t.source=t.source.getID()),(0,x.isString)(t.target)||(0,x.isPlainObject)(t.target)||(t.target=t.target.getID()),t},e.prototype.setSource=function(t){this.setEnd("source",t),this.set("source",t)},e.prototype.setTarget=function(t){this.setEnd("target",t),this.set("target",t)},e.prototype.getSource=function(){return this.get("source")},e.prototype.getTarget=function(){return this.get("target")},e.prototype.updatePosition=function(){return!1},e.prototype.update=function(t,e){void 0===e&&(e=void 0);var n=this.get("model"),r=n.visible,i=t.visible;r!==i&&void 0!==i&&this.changeVisibility(i);var o=this.get("source"),a=this.get("target");if(o&&!o.destroyed&&a&&!a.destroyed){var s=this.get("styles");if(t.stateStyles){var u=t.stateStyles;(0,x.mix)(s,u),delete t.stateStyles}Object.assign(n,t),this.updateShape(e),this.afterUpdate(),this.clearCache()}},e.prototype.destroy=function(){var e=this.get("source".concat(Fs)),n=this.get("target".concat(Fs));e&&!e.destroyed&&e.removeEdge(this),n&&!n.destroyed&&n.removeEdge(this),t.prototype.destroy.call(this)},e}(Ds);const js=Us;var Vs="anchorPointsCache",Hs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,b.__extends)(e,t),e.prototype.getNearestPoint=function(t,e){for(var n=0,r=t[0],i=me(t[0],e),o=0;o<t.length;o++){var a=t[o],s=me(a,e);s<i&&(r=a,i=s,n=o)}return r.anchorIndex=n,r},e.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getInEdges=function(){var t=this;return this.get("edges").filter((function(e){return e.get("target")===t}))},e.prototype.getOutEdges=function(){var t=this;return this.get("edges").filter((function(e){return e.get("source")===t}))},e.prototype.getNeighbors=function(t){var e=this,n=this.get("edges");if("target"===t){return n.filter((function(t){return t.getSource()===e})).map((function(t){return t.getTarget()}))}if("source"===t){return n.filter((function(t){return t.getTarget()===e})).map((function(t){return t.getSource()}))}return n.map((function(t){return t.getSource()===e?t.getTarget():t.getSource()}))},e.prototype.getLinkPointByAnchor=function(t){return this.getAnchorPoints()[t]},e.prototype.getLinkPoint=function(t){var e,n,r=this.get("keyShape").get("type"),i=this.get("type"),o=this.getBBox();"combo"===i?(e=o.centerX||(o.maxX+o.minX)/2,n=o.centerY||(o.maxY+o.minY)/2):(e=o.centerX,n=o.centerY);var a,s=this.getAnchorPoints();switch(r){case"circle":a=ce({x:e,y:n,r:o.width/2},t);break;case"ellipse":a=he({x:e,y:n,rx:o.width/2,ry:o.height/2},t);break;default:a=le(o,t)}var u=a;return s.length&&(u||(u=t),u=this.getNearestPoint(s,u)),u||(u={x:e,y:n}),u},e.prototype.getAnchorPoints=function(){var t=this.get(Vs);if(!t){t=[];var e=this.get("shapeFactory"),n=this.getBBox(),r=this.get("model"),i=this.getShapeCfg(r),o=r.type,a=e.getAnchorPoints(o,i)||[];(0,x.each)(a,(function(e,r){var i={x:n.minX+e[0]*n.width,y:n.minY+e[1]*n.height,anchorIndex:r};t.push(i)})),this.set(Vs,t)}return t},e.prototype.addEdge=function(t){this.get("edges").push(t)},e.prototype.lock=function(){this.set("locked",!0)},e.prototype.unlock=function(){this.set("locked",!1)},e.prototype.hasLocked=function(){return this.get("locked")},e.prototype.removeEdge=function(t){var e=this.getEdges(),n=e.indexOf(t);n>-1&&e.splice(n,1)},e.prototype.clearCache=function(){this.set("bboxCache",null),this.set(Vs,null)},e.prototype.getUpdateType=function(t){var e,n,r,i,o;if(t){var a=!(0,x.isNil)(t.x),s=!(0,x.isNil)(t.y),u=Object.keys(t);return 1===u.length&&(a||s)||2===u.length&&a&&s?"move":(0,x.isNumber)(t.x)||(0,x.isNumber)(t.y)||t.type||t.anchorPoints||t.size||(null==t?void 0:t.style)&&((null===(e=null==t?void 0:t.style)||void 0===e?void 0:e.r)||(null===(n=null==t?void 0:t.style)||void 0===n?void 0:n.width)||(null===(r=null==t?void 0:t.style)||void 0===r?void 0:r.height)||(null===(i=null==t?void 0:t.style)||void 0===i?void 0:i.rx)||(null===(o=null==t?void 0:t.style)||void 0===o?void 0:o.ry))?"bbox|label":u.includes("label")||u.includes("labelCfg")?"style|label":"style"}},e.prototype.setState=function(e,n){var r=this;this.optimize?t.prototype.setState.call(this,e,n):this.runWithBBoxAffected((function(){return t.prototype.setState.call(r,e,n)}))},e.prototype.clearStates=function(e){var n=this;this.optimize?t.prototype.clearStates.call(this,e):this.runWithBBoxAffected((function(){return t.prototype.clearStates.call(n,e)}))},e.prototype.runWithBBoxAffected=function(t){var e=["r","width","height","rx","ry","lineWidth"],n=this.getKeyShape().attr(),r={};Object.keys(this.getKeyShape().attr()).forEach((function(t){e.includes(t)&&(r[t]=n[t])})),t();for(var i=this.getKeyShape().attr(),o=0;o<e.length;o++){var a=e[o];if(i[a]!==r[a]){this.clearCache(),this.getEdges().forEach((function(t){return t.refresh()}));break}}},e}(Ds);const Gs=Hs;var Ws="bboxCache",Xs="bboxCanvasCache",Ys="sizeCache",qs="anchorPointsCache",$s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,b.__extends)(e,t),e.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},e.prototype.getShapeCfg=function(t){var e=this.get("styles"),n=this.get("bbox");if(e&&n){var r=t,i=(0,x.isNumber)(t.size)?[t.size,t.size]:t.size,o=(0,x.isNumber)(t.fixSize)?[t.fixSize,t.fixSize]:t.fixSize,a=i||o||Ke.defaultCombo.size,s={r:(Math.max(n.width,n.height)||Math.max(a[0],a[1]))/2,width:n.width||a[0],height:n.height||a[1]};r.style=(0,b.__assign)((0,b.__assign)((0,b.__assign)({},e),t.style),s);var u=t.padding||Ke.defaultCombo.padding;return(0,x.isNumber)(u)?(s.r+=u,s.width+=2*u,s.height+=2*u):(s.r=s.r+Math.max.apply(Math,u),s.width+=u[1]+u[3]||2*u[1],s.height+=u[0]+u[2]||2*u[0]),this.set(Ys,s),r}return t},e.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var t=this.get("keyShape"),e=this.get("group"),n=this.get(Ws)||{},r=n.x,i=n.x,o=this.get(Ys),a=rn(t,e);if(a.centerX=(a.minX+a.maxX)/2,a.centerY=(a.minY+a.maxY)/2,o)o.width=Math.max(o.width,a.width),o.height=Math.max(o.height,a.height),this.set(Ys,o),"circle"===t.get("type")?(a.width=2*o.r,a.height=2*o.r):(a.width=o.width,a.height=o.height),a.minX=a.centerX-a.width/2,a.minY=a.centerY-a.height/2,a.maxX=a.centerX+a.width/2,a.maxY=a.centerY+a.height/2;else a.width=a.maxX-a.minX,a.height=a.maxY-a.minY,a.centerX=(a.minX+a.maxX)/2,a.centerY=(a.minY+a.maxY)/2;return a.x=a.minX,a.y=a.minY,a.x===r&&a.y===i||this.set(qs,null),a}},e.prototype.getChildren=function(){return{nodes:this.getNodes(),combos:this.getCombos()}},e.prototype.getNodes=function(){return this.get("nodes")},e.prototype.getCombos=function(){return this.get("combos")},e.prototype.addChild=function(t){switch(t.getType()){case"node":this.addNode(t);break;case"combo":this.addCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.addCombo=function(t){return this.get("combos").push(t),!0},e.prototype.addNode=function(t){return this.get("nodes").push(t),!0},e.prototype.removeChild=function(t){switch(t.getType()){case"node":this.removeNode(t);break;case"combo":this.removeCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.removeCombo=function(t){if(t){var e=this.getCombos(),n=e.indexOf(t);return n>-1&&(e.splice(n,1),!0)}},e.prototype.removeNode=function(t){if(t){var e=this.getNodes(),n=e.indexOf(t);return n>-1&&(e.splice(n,1),!0)}},e.prototype.getUpdateType=function(t){},e.prototype.getBBox=function(){return this.set(Xs,null),this.calculateCanvasBBox()},e.prototype.clearCache=function(){this.set(Ws,null),this.set(Xs,null),this.set(qs,null)},e.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),e=this.get("group");t&&e.stopAnimate(),e.shapeMap={},this.clearCache(),this.set(Ys,null),this.set("bbox",null),e.remove(),this._cfg=null,this.destroyed=!0}},e}(Gs);const Ks=$s;var Zs="node",Qs="edge",Js="vedge",tu="combo",eu="Mapper",nu="stateStyles",ru=function(){function t(t){var e=this;this.edgeToBeUpdateMap={},this.throttleRefresh=(0,x.throttle)((function(t){var n=e.graph;if(n&&!n.get("destroyed")){var r=e.edgeToBeUpdateMap;if(r){var i=Object.values(r);i.length&&(i.forEach((function(t){var e=t.edge;if(e&&!e.destroyed){var n=e.getSource(),r=e.getTarget();n&&!n.destroyed&&r&&!r.destroyed&&e.refresh(t.updateType)}})),e.edgeToBeUpdateMap={})}}}),16,{trailing:!0,leading:!0}),this.graph=t,this.destroyed=!1}return t.prototype.addItem=function(t,e){var n=this.graph,r=t===Js?Qs:t,i=n.get("".concat(r,"Group"))||n.get("group"),o=(0,x.upperFirst)(r),a=null,s=n.get(r+(0,x.upperFirst)(nu))||{},u=n.get("default"+o);e[nu]&&(s=e[nu]),u&&(0,x.each)(u,(function(t,n){(0,x.isObject)(t)&&!(0,x.isArray)(t)?e[n]=(0,x.deepMix)({},t,e[n]):(0,x.isArray)(t)?e[n]=e[n]||(0,x.clone)(u[n]):e[n]=e[n]||u[n]}));var l=n.get(r+eu);if(l){var c=l(e);c[nu]&&(s=c[nu],delete c[nu]),(0,x.each)(c,(function(t,n){(0,x.isObject)(t)&&!(0,x.isArray)(t)?e[n]=(0,x.deepMix)({},e[n],t):e[n]=c[n]||e[n]}))}if(n.emit("beforeadditem",{type:t,model:e}),t===Qs||t===Js){var h=void 0,d=void 0;if(h=e.source,d=e.target,h&&(0,x.isString)(h)&&(h=n.findById(h)),d&&(0,x.isString)(d)&&(d=n.findById(d)),!h||!d)return void console.warn("The source or target node of edge ".concat(e.id," does not exist!"));h.getType&&"combo"===h.getType()&&(e.isComboEdge=!0),d.getType&&"combo"===d.getType()&&(e.isComboEdge=!0),a=new js({model:e,source:h,target:d,styles:s,linkCenter:n.get("linkCenter"),group:i.addGroup()})}else if(t===Zs)a=new Gs({model:e,styles:s,group:i.addGroup()});else if(t===tu){var f=e.children,p=gn(f,n),m=void 0,g=void 0;if(isNaN(p.x)?isNaN(e.x)&&(m=100*Math.random()):m=p.x,isNaN(p.y)?isNaN(e.y)&&(g=100*Math.random()):g=p.y,isNaN(e.x)||isNaN(e.y))e.x=m,e.y=g;else{var v=e.x-m,y=e.y-g;this.updateComboSucceeds(e.id,v,y,f)}var b=i.addGroup();b.setZIndex(e.depth),a=new Ks({model:e,styles:s,animate:n.get("animate"),bbox:e.collapsed?gn([],n):p,group:b}),e.collapsed||"circle"!==a.getKeyShape().get("type")||(p.width=Math.hypot(p.height,p.width),p.height=p.width,a.set("bbox",p),a.refresh());var w=a.getModel();(f||[]).forEach((function(t){var e=n.findById(t.id);a.addChild(e),t.depth=w.depth+2}))}if(a)return a.setOptimize(n.getNodes().length>n.get("optimizeThreshold")),n.get("".concat(t,"s")).push(a),n.get("itemMap")[a.get("id")]=a,n.emit("afteradditem",{item:a,model:e}),a},t.prototype.updateItem=function(t,e){var n,r,i=this,o=this.graph;if((0,x.isString)(t)&&(t=o.findById(t)),t&&!t.destroyed){var a="";t.getType&&(a=t.getType());var s=o.get(a+eu),u=t.getModel(),l=u.x,c=u.y,h=t.getUpdateType(e);if(s){var d=s((0,x.deepMix)({},u,e)),f=(0,x.deepMix)({},u,d,e);d[nu]&&(t.set("styles",f[nu]),delete f[nu]),(0,x.each)(f,(function(t,n){e[n]=t}))}else(0,x.each)(e,(function(t,n){u[n]&&(0,x.isObject)(t)&&!(0,x.isArray)(t)&&(e[n]=(0,b.__assign)((0,b.__assign)({},u[n]),e[n]))}));if(o.emit("beforeupdateitem",{item:t,cfg:e}),a===Qs){if(e.source){var p=e.source;(0,x.isString)(p)&&(p=o.findById(p)),t.setSource(p)}if(e.target){var m=e.target;(0,x.isString)(m)&&(m=o.findById(m)),t.setTarget(m)}t.update(e)}else if(a===Zs){t.update(e,h);var g=t.getEdges();"move"===h?(0,x.each)(g,(function(t){i.edgeToBeUpdateMap[t.getID()]={edge:t,updateType:h},i.throttleRefresh()})):(null==h?void 0:h.includes("bbox"))&&(0,x.each)(g,(function(t){t.refresh(h)}))}else if(a===tu){if(t.update(e,h),!isNaN(e.x)||!isNaN(e.y)){var v=e.x-l||0,y=e.y-c||0;this.updateComboSucceeds(u.id,v,y)}var w=t.getEdges();if(((null==h?void 0:h.includes("bbox"))||"move"===h)&&a===tu){var _=t.get("shapeFactory"),S=u.type||"circle";(void 0===u.animate||void 0===e.animate?null===(r=null===(n=_[S])||void 0===n?void 0:n.options)||void 0===r?void 0:r.animate:u.animate||e.animate)?setTimeout((function(){if(t&&!t.destroyed){var e=t.getKeyShape();e&&!e.destroyed&&(0,x.each)(w,(function(t){t&&!t.destroyed&&t.refresh()}))}}),201):(0,x.each)(w,(function(t){t.refresh()}))}}t.setOptimize(o.getNodes().length>o.get("optimizeThreshold")),o.emit("afterupdateitem",{item:t,cfg:e})}},t.prototype.updateCombo=function(t,e,n){var r,i,o=this,a=this.graph;if((0,x.isString)(t)&&(t=a.findById(t)),t&&!t.destroyed){var s=t.getModel(),u=gn(e,a,t),l=u.x,c=u.y;t.set("bbox",u);var h=l,d=c;n?(h=isNaN(s.x)?l:s.x,d=isNaN(s.y)?c:s.y):(h=isNaN(l)?s.x:l,d=isNaN(c)?s.y:c),t.update({x:h,y:d});var f=t.get("shapeFactory"),p=s.type||"circle";(void 0===s.animate?null===(i=null===(r=f[p])||void 0===r?void 0:r.options)||void 0===i?void 0:i.animate:s.animate)?setTimeout((function(){if(t&&!t.destroyed){var e=t.getKeyShape();e&&!e.destroyed&&(t.getShapeCfg(s),o.updateComboEdges(t))}}),201):this.updateComboEdges(t)}},t.prototype.updateComboEdges=function(t){for(var e,n,r=t.getEdges()||[],i=0;i<r.length;i++){var o=r[i];(null==o?void 0:o.destroyed)||(null===(e=null==o?void 0:o.getSource())||void 0===e?void 0:e.destroyed)||(null===(n=null==o?void 0:o.getTarget())||void 0===n?void 0:n.destroyed)||o.refresh()}},t.prototype.collapseCombo=function(t,e){void 0===e&&(e=!0);var n=this.graph;(0,x.isString)(t)&&(t=n.findById(t));var r=t.getChildren();r.nodes.forEach((function(t){n.hideItem(t,e)})),r.combos.forEach((function(t){n.hideItem(t,e)}))},t.prototype.updateComboSucceeds=function(t,e,n,r){var i=this;void 0===r&&(r=[]);var o=this.graph;if(e||n){var a=r;if(!(null==a?void 0:a.length)){var s=o.get("comboTrees");null==s||s.forEach((function(e){ln(e,(function(e){return e.id!==t||(a=e.children,!1)}))}))}null==a||a.forEach((function(t){var r=o.findById(t.id);if(r){var a=r.getModel();i.updateItem(t.id,{x:(a.x||0)+e,y:(a.y||0)+n})}}))}},t.prototype.expandCombo=function(t,e){void 0===e&&(e=!0);var n=this.graph;(0,x.isString)(t)&&(t=n.findById(t));var r=t.getChildren(),i=new Set;r.nodes.forEach((function(t){n.showItem(t,e),t.getEdges().forEach((function(t){return i.add(t)}))})),r.combos.forEach((function(t){t.getModel().collapsed?t.show():n.showItem(t,e),t.getEdges().forEach((function(t){return i.add(t)}))})),i.forEach((function(t){return t.refresh()}))},t.prototype.removeItem=function(t){var e=this,n=this.graph;if((0,x.isString)(t)&&(t=n.findById(t)),t&&!t.destroyed){var r=(0,x.clone)(t.getModel()),i="";t.getType&&(i=t.getType()),n.emit("beforeremoveitem",{item:r,type:i});var o=n.get("".concat(i,"s")),a=o.indexOf(t);if(a>-1&&o.splice(a,1),i===Qs){var s=n.get("v".concat(i,"s")),u=s.indexOf(t);u>-1&&s.splice(u,1)}var l=t.get("id");delete n.get("itemMap")[l];var c=n.get("comboTrees"),h=t.get("id");if(i===Zs){var d=t.getModel().comboId;if(c&&d){var f=c,p=!1;c.forEach((function(t){p||ln(t,(function(t){if(t.id===h&&f){var e=f.indexOf(t);return f.splice(e,1),p=!0,!1}return f=t.children,!0}))}))}for(var m=(b=t.getEdges()).length-1;m>=0;m--)n.removeItem(b[m],!1);d&&n.updateCombo(d)}else if(i===tu){var g,v=t.getModel().parentId,y=!1;(c||[]).forEach((function(t){y||ln(t,(function(t){return t.id!==h||(g=t,y=!0,!1)}))})),g.removed=!0,g&&g.children&&g.children.forEach((function(t){e.removeItem(t.id)}));var b;for(m=(b=t.getEdges()).length;m>=0;m--)n.removeItem(b[m],!1);v&&n.updateCombo(v)}t.destroy(),n.emit("afterremoveitem",{item:r,type:i})}},t.prototype.setItemState=function(t,e,n){var r=this.graph,i=e;(0,x.isString)(n)&&(i="".concat(e,":").concat(n)),t.hasState(i)===n&&n||(0,x.isString)(n)&&t.hasState(i)||(r.emit("beforeitemstatechange",{item:t,state:i,enabled:n}),t.setState(e,n),r.autoPaint(),r.emit("afteritemstatechange",{item:t,state:i,enabled:n}))},t.prototype.priorityState=function(t,e){var n=this.graph,r=t;(0,x.isString)(t)&&(r=n.findById(t)),this.setItemState(r,e,!1),this.setItemState(r,e,!0)},t.prototype.clearItemStates=function(t,e){var n=this.graph;(0,x.isString)(t)&&(t=n.findById(t)),n.emit("beforeitemstatesclear",{item:t,states:e}),t.clearStates(e),n.emit("afteritemstatesclear",{item:t,states:e})},t.prototype.refreshItem=function(t){var e=this.graph;(0,x.isString)(t)&&(t=e.findById(t)),e.emit("beforeitemrefresh",{item:t}),t.refresh(),e.emit("afteritemrefresh",{item:t})},t.prototype.addCombos=function(t,e){var n=this,r=this.graph;(t||[]).forEach((function(t){cn(t,(function(t){var r;return e.forEach((function(e){e.id===t.id&&(e.children=t.children,e.depth=t.depth,r=e)})),r&&n.addItem("combo",r),!0}))}));var i=r.get("comboGroup");i&&i.sort()},t.prototype.changeItemVisibility=function(t,e){var n=this,r=this.graph;if((0,x.isString)(t)&&(t=r.findById(t)),t){if(r.emit("beforeitemvisibilitychange",{item:t,visible:e}),t.changeVisibility(e),t.getType&&t.getType()===Zs){var i=t.getEdges();(0,x.each)(i,(function(t){(!e||t.get("source").isVisible()&&t.get("target").isVisible())&&n.changeItemVisibility(t,e)}))}else if(t.getType&&t.getType()===tu){var o=r.get("comboTrees"),a=t.get("id"),s=[],u=!1;(o||[]).forEach((function(t){u||t.children&&0!==t.children.length&&ln(t,(function(t){return t.id!==a||(s=t.children,u=!0,!1)}))})),s&&(!e||e&&!t.getModel().collapsed)&&s.forEach((function(t){var i=r.findById(t.id);n.changeItemVisibility(i,e)}));i=t.getEdges();(0,x.each)(i,(function(t){(!e||t.get("source").isVisible()&&t.get("target").isVisible())&&n.changeItemVisibility(t,e)}))}return r.emit("afteritemvisibilitychange",{item:t,visible:e}),t}console.warn("The item to be shown or hidden does not exist!")},t.prototype.destroy=function(){this.graph=null,this.destroyed=!0},t}();const iu=ru;var ou=function(){function t(t){this.graph=t,this.destroyed=!1}return t.prototype.updateState=function(t,e,n){var r=this.graph.get("states"),i=e;(0,x.isString)(n)&&(i="".concat(e,":").concat(n)),r[i]||(r[i]=[]),n?r[i].push(t):r[i]=r[i].filter((function(e){return e!==t})),this.graph.set("states",r),this.graph.emit("graphstatechange",{states:r})},t.prototype.updateStates=function(t,e,n){var r=this.graph.get("states");((0,x.isString)(e)?[e]:e).forEach((function(e){var i=e;r[i]||(r[i]=[]),(0,x.isString)(n)&&(i="".concat(e,":").concat(n)),n?r[i].push(t):r[i]=r[i].filter((function(e){return e!==t}))})),this.graph.set("states",r),this.graph.emit("graphstatechange",{states:e})},t.prototype.destroy=function(){this.graph=null,this.destroyed=!0},t}();const au=ou;var su=function(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,(function(t,n){if("\\"===t.charAt(0))return t.slice(1);var r=e[n];return 0===r&&(r="0"),r||""})):t},uu=function(t){var e=[];if(t.length<2)throw new Error("point length must largn than 2, now it's ".concat(t.length));for(var n=0,r=t;n<r.length;n++){var i=r[n],o=i.x,a=i.y;e.push(o),e.push(a)}var s=Ya(e);return s.unshift(["M",t[0].x,t[0].y]),s},lu=function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i={x:(1-n)*t.x+n*e.x,y:(1-n)*t.y+n*e.y},o=[0,0];ie.normalize(o,[e.x-t.x,e.y-t.y]),o&&(o[0]||o[1])||(o=[0,0]);var a=[-o[1]*r,o[0]*r];return i.x+=a[0],i.y+=a[1],i},cu=function(t,e){var n=t.length;if(!n)return"";for(var r="",i=0;i<n;i++){var o=t[i];r+=su(0===i?"M{x} {y}":"L{x} {y}",o)}return e&&(r+="Z"),r},hu=function(t){var e=[];return t.forEach((function(t){if("A"!==t[0])for(var n=1;n<t.length;n+=2)e.push([t[n],t[n+1]]);else{var r=t.length;e.push([t[r-2],t[r-1]])}})),e},du=function(t){if(t.length<2)throw new Error("point length must larger than 2, now it's ".concat(t.length));var e=t[0],n=t[1],r=t[t.length-1],i=t[t.length-2];t.unshift(r),t.unshift(i),t.push(e),t.push(n);for(var o=[],a=1;a<t.length-2;a+=1){var s=t[a-1].x,u=t[a-1].y,l=t[a].x,c=t[a].y,h=t[a+1].x,d=t[a+1].y,f=l+(h-s)/6,p=c+(d-u)/6,m=h-((a!==t.length-2?t[a+2].x:h)-l)/6,g=d-((a!==t.length-2?t[a+2].y:d)-c)/6;o.push(["C",f,p,m,g,h,d])}return o.unshift(["M",r.x,r.y]),o},fu=function(t,e){return ie.scale([0,0],ie.normalize([0,0],t),e)},pu=function(t,e){var n=[t[1]-e[1],e[0]-t[0]],r=Math.sqrt(n[0]*n[0]+n[1]*n[1]);if(0===r)throw new Error("p0 should not be equal to p1");return[n[0]/r,n[1]/r]},mu=function(t,e){return[e[0]-t[0],e[1]-t[1]]};function gu(t,e){if(!t||t.length<1)return"";if(1===t.length)return function(t){var n=[t[0][0],t[0][1]-e],r=[t[0][0],t[0][1]+e];return"M ".concat(n," A ").concat(e,",").concat(e,",0,0,0,").concat(r," A ").concat(e,",").concat(e,",0,0,0,").concat(n)}(t);if(2===t.length)return function(t){var n=ie.scale([0,0],pu(t[0],t[1]),e),r=ie.scale([0,0],n,-1),i=ie.add([0,0],t[0],n),o=ie.add([0,0],t[1],n),a=ie.add([0,0],t[1],r),s=ie.add([0,0],t[0],r);return"M ".concat(i," L ").concat(o," A ").concat([e,e,"0,0,0",a].join(",")," L ").concat(s," A ").concat([e,e,"0,0,0",i].join(","))}(t);for(var n=new Array(t.length),r=0;r<n.length;++r){var i=0===r?t[t.length-1]:t[r-1],o=t[r],a=ie.scale([0,0],pu(i,o),e);n[r]=[ie.add([0,0],i,a),ie.add([0,0],o,a)]}var s="A ".concat([e,e,"0,0,0,"].join(","));return(n=n.map((function(t,e){var r="";return 0===e&&(r="M ".concat(n[n.length-1][1]," ")),r+="".concat(s+t[0]," L ").concat(t[1])}))).join(" ")}function vu(t,e){var n,r,i,o=t.length;if(!t||o<1)return"";if(1===o)return r=[(n=t)[0][0],n[0][1]-e],i=[n[0][0],n[0][1]+e],"M ".concat(r," A ").concat([e,e,"0,0,0",i].join(",")," A ").concat([e,e,"0,0,0",r].join(","));if(2===o)return function(t){var n=mu(t[0],t[1]),r=fu(n,e),i=ie.add([0,0],t[0],ie.scale([0,0],r,-1)),o=ie.add([0,0],t[1],r),a=1.2*e,s=fu(ie.normalize([0,0],n),a),u=ie.scale([0,0],s,-1),l=ie.add([0,0],i,u),c=ie.add([0,0],o,u),h=ie.add([0,0],i,s);return"M ".concat(i," C ").concat([l,c,o].join(",")," S ").concat([h,i].join(",")," Z")}(t);for(var a=t.map((function(e,n){var r=t[(n+1)%o];return{p:e,v:ie.normalize([0,0],mu(e,r))}})),s=0;s<a.length;++s){var u=s>0?s-1:o-1,l=ie.normalize([0,0],ie.add([0,0],a[u].v,ie.scale([0,0],a[s].v,-1)));a[s].p=ie.add([0,0],a[s].p,ie.scale([0,0],l,e))}return a.map((function(t){var e=t.p;return{x:e[0],y:e[1]}}))}var yu=function(t,e){for(var n=[],r=0;r<5;r++){var i=Math.cos((18+72*r)/180*Math.PI)*t,o=Math.sin((18+72*r)/180*Math.PI)*t,a=Math.cos((54+72*r)/180*Math.PI)*e,s=Math.sin((54+72*r)/180*Math.PI)*e;0===r?n.push(["M",i,-o]):n.push(["L",i,-o]),n.push(["L",a,-s])}return n.push(["Z"]),n},bu=function(t,e,n){return(t.y-n.y)*(e.x-n.x)-(t.x-n.x)*(e.y-n.y)},xu=function(t){var e=t.map((function(t){return{x:t.getModel().x,y:t.getModel().y}}));e.sort((function(t,e){return t.x===e.x?t.y-e.y:t.x-e.x}));for(var n={},r=e.length-1;r>=0;r--){var i=e[r],o=i.x,a=i.y;n["".concat(o,"-").concat(a)]&&e.splice(r,1),n["".concat(o,"-").concat(a)]=!0}if(1===e.length)return e;var s=[];for(r=0;r<e.length;r++){for(;s.length>=2&&bu(s[s.length-2],s[s.length-1],e[r])<=0;)s.pop();s.push(e[r])}var u=[];for(r=e.length-1;r>=0;r--){for(;u.length>=2&&bu(u[u.length-2],u[u.length-1],e[r])<=0;)u.pop();u.push(e[r])}return u.pop(),s.pop(),s.concat(u)},wu={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function _u(t,e,n){var r=!1,i=function(t,n){return e.cells[t+n*e.width]},o=function(t,e){var r=0;return i(t-1,e-1)>=n&&(r+=1),i(t,e-1)>n&&(r+=2),i(t-1,e)>n&&(r+=4),i(t,e)>n&&(r+=8),r},a=function(n,r){for(var i,a,s=n,u=r,l=0;l<e.width*e.height;l++){if(i=s,a=u,t.findIndex((function(t){return t.x===s&&t.y===u}))>-1){if(t[0].x===s&&t[0].y===u)return!0}else t.push({x:s,y:u});var c=o(s,u);switch(c){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:s++;break;case 12:case 14:case 4:s--;break;case 6:0===i&&(-1===a?s-=1:s+=1);break;case 1:case 13:case 5:u--;break;case 9:1===i&&(0===a?u-=1:u+=1);break;case 10:case 8:case 11:u++;break;default:return console.warn("Marching squares invalid state: ".concat(c)),!0}}};this.march=function(){for(var t=0;t<e.width&&!r;t+=1)for(var s=0;s<e.height&&!r;s+=1)i(t,s)>n&&15!==o(t,s)&&(r=a(t,s));return r}}var Su=function(t,e){var n=Number.POSITIVE_INFINITY,r=null;return t.forEach((function(t){var i=Pe(t,e);i>=0&&i<n&&(r=t,n=i)})),r};function Eu(t,e,n,r,i){var o=function(t,e,n){var r=null,i=Number.POSITIVE_INFINITY;return e.forEach((function(e){var o={x:t.getModel().x,y:t.getModel().y},a={x:e.getModel().x,y:e.getModel().y},s=Le(o,a),u=new Te(o.x,o.y,a.x,a.y),l=n.reduce((function(t,e){return Pe(e,u)>0?t+1:t}),0);s*Math.pow(l+1,2)<i&&(r=e,i=s*Math.pow(l+1,2))})),r}(t,n,e);if(null===o)return[];var a=function(t,e,n,r){var i=[],o=[];o.push(t);for(var a=!0,s=0,u=function(t,e){var n=!1;return e.forEach((function(e){n||(De(t,{x:e.x1,y:e.y1})||De(t,{x:e.x2,y:e.y2}))&&(n=!0)})),n},l=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n].getBBox(),o=[[i.x,i.y],[i.x+i.width,i.y],[i.x,i.y+i.height],[i.x+i.width,i.y+i.height]];if(Ae(o,t.x,t.y))return!0}return!1};a&&s<n;){a=!1;for(var c=function(){var t=o.pop(),n=Su(e,t);if(n){var c=Ne(n,t),h=c[0];if(2===c[1]){var d=function(s){for(var c=r,d=Cu(n,c,h,s),f=u(d,o)||u(d,i),p=l(d,e);!f&&p&&c>=1;)d=Cu(n,c/=1.5,h,s),f=u(d,o)||u(d,i),p=l(d,e);!d||f||s&&p||(o.push(new Te(t.x1,t.y1,d.x,d.y)),o.push(new Te(d.x,d.y,t.x2,t.y2)),a=!0)};d(!0),a||d(!1)}}a||i.push(t),s+=1};!a&&o.length;)c()}for(;o.length;)i.push(o.pop());return i}(new Te(t.getModel().x,t.getModel().y,o.getModel().x,o.getModel().y),e,r,i),s=function(t){for(var n=[];t.length>0;){var r=t.pop();if(0===t.length){n.push(r);break}var i=t.pop(),o=new Te(r.x1,r.y1,i.x2,i.y2);Su(e,o)?(n.push(r),t.push(i)):t.push(o)}return n}(a);return s}var Au=function(t,e,n){var r=Object.assign(wu,n),i=Oe(t.map((function(t){return{x:t.getModel().x,y:t.getModel().y}})));t=t.sort((function(t,e){return Le({x:t.getModel().x,y:t.getModel().y},i)-Le({x:e.getModel().x,y:e.getModel().y},i)}));var o=[],a=[];t.forEach((function(t){Eu(t,e,o,r.maxRoutingIterations,r.morphBuffer).forEach((function(t){a.push(t)})),o.push(t)}));for(var s,u,l,c,h,d=function(t,e,n){var r={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},i=[];t.forEach((function(t){i.push(t.getBBox())})),e.forEach((function(t){i.push(t.getBBox())}));for(var o=0,a=i;o<a.length;o++){var s=a[o];r.minX=(s.minX<r.minX?s.minX:r.minX)-n,r.minY=(s.minY<r.minY?s.minY:r.minY)-n,r.maxX=(s.maxX>r.maxX?s.maxX:r.maxX)+n,r.maxY=(s.maxY>r.maxY?s.maxY:r.maxY)+n}return r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.x=r.minX,r.y=r.minY,r}(t,a,r.nodeR0),f=(s=d.width,u=d.height,l=r.pixelGroupSize,c=Math.ceil(s/l),h=Math.ceil(u/l),{cells:new Float32Array(Math.max(0,c*h)).fill(0),width:c,height:h}),p=[],m=[],g=0;g<r.maxMarchingIterations;g++)if(Mu(t,e,a,d,f,r),m=[],new _u(p=[],f,r.threshold).march()){var v=p.map((function(t){return{x:Math.round(t.x*r.pixelGroupSize+d.minX),y:Math.round(t.y*r.pixelGroupSize+d.minY)}}));if(v){var y=v.length;if(r.skip>1)for(y=Math.floor(v.length/r.skip);y<3&&r.skip>1;)r.skip-=1,y=Math.floor(v.length/r.skip);for(var b=0,x=0;x<y;x+=1,b+=r.skip)m.push({x:v[b].x,y:v[b].y})}if(m&&function(){for(var e=0,n=t;e<n.length;e++){var r=n[e],i=m.map((function(t){return[t.x,t.y]}));if(!Ae(i,r.getBBox().centerX,r.getBBox().centerY))return!1}return!0}())return m;if(r.threshold*=.9,g<=.5*r.maxMarchingIterations)r.memberInfluenceFactor*=1.2,r.edgeInfluenceFactor*=1.2;else{if(!(0!==r.nonMemberInfluenceFactor&&e.length>0))break;r.nonMemberInfluenceFactor*=.8}}return m};function Mu(t,e,n,r,i,o){function a(t,e){var n=Math.floor((t-e)/o.pixelGroupSize);return n<0?0:n}function s(t,e){return t*o.pixelGroupSize+e}var u=(o.nodeR0-o.nodeR1)*(o.nodeR0-o.nodeR1),l=(o.edgeR0-o.edgeR1)*(o.edgeR0-o.edgeR1),c=function(t,e){return[Math.min(a(t.minX,e+r.minX),i.width),Math.min(a(t.minY,e+r.minY),i.height),Math.min(a(t.maxX,-e+r.minX),i.width),Math.min(a(t.maxY,-e+r.minY),i.height)]},h=function(t,e){for(var n=t.getBBox(),a=c(n,o.nodeR1),u=a[0],l=a[1],h=a[2],d=a[3],f=l;f<d;f+=1)for(var p=u;p<h;p+=1)if(!(e<0&&i[p+f*i.width]<=0)){var m=s(p,r.minX),g=s(f,r.minY),v=ze({x:m,y:g},{x:n.minX,y:n.minY,width:n.width,height:n.height});if(v<Math.pow(o.nodeR1,2)){var y=Math.sqrt(v)-o.nodeR1;i.cells[p+f*i.width]+=e*y*y}}};o.nodeInfluenceFactor&&t.forEach((function(t){h(t,o.nodeInfluenceFactor/u)})),o.edgeInfluenceFactor&&n.forEach((function(t){!function(t,e){for(var n=t.getBBox(),a=c(n,o.edgeR1),u=a[0],l=a[1],h=a[2],d=a[3],f=l;f<d;f+=1)for(var p=u;p<h;p+=1)if(!(e<0&&i.cells[p+f*i.width]<=0)){var m=s(p,r.minX),g=s(f,r.minY),v=Re({x:m,y:g},t);if(v<Math.pow(o.edgeR1,2)){var y=Math.sqrt(v)-o.edgeR1;i.cells[p+f*i.width]+=e*y*y}}}(t,o.edgeInfluenceFactor/l)})),o.negativeNodeInfluenceFactor&&e.forEach((function(t){h(t,o.negativeNodeInfluenceFactor/u)}))}function Cu(t,e,n,r){var i=t.getBBox(),o=n[0],a=n[1],s=n[2],u=n[3],l={topLeft:{x:i.minX-e,y:i.minY-e},topRight:{x:i.maxX+e,y:i.minY-e},bottomLeft:{x:i.minX-e,y:i.maxY+e},bottomRight:{x:i.maxX+e,y:i.maxY+e}},c=i.height*i.width;function h(t,e){return i.width*(.5*(t.y-i.minY+(e.y-i.minY)))}if(a)return o?r?l.topLeft:l.bottomRight:s?r?l.bottomLeft:l.topRight:h(a,u)<.5*c?a.y>u.y?r?l.topLeft:l.bottomRight:r?l.topRight:l.bottomLeft:a.y<u.y?r?l.bottomLeft:l.topRight:r?l.bottomRight:l.topLeft;if(u){if(o)return r?l.topRight:l.bottomLeft;if(s)return r?l.bottomRight:l.topLeft}return h(o,s)<.5*c?o.x>s.x?r?l.topLeft:l.bottomRight:r?l.bottomLeft:l.topRight:o.x<s.x?r?l.topRight:l.bottomLeft:r?l.bottomRight:l.topLeft}var Tu=function(){function t(t,e){this.cfg=(0,x.deepMix)(this.getDefaultCfg(),e),this.graph=t,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map((function(e){return(0,x.isString)(e)?t.findById(e):e})),this.nonMembers=this.cfg.nonMembers.map((function(e){return(0,x.isString)(e)?t.findById(e):e})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return t.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},t.prototype.setPadding=function(){var t=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+t:10+t,this.cfg.bubbleCfg={nodeR0:this.padding-t,nodeR1:this.padding-t,morphBuffer:this.padding-t}},t.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),"round-convex"!==this.type&&"smooth-convex"!==this.type&&"bubble"!==this.type&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},t.prototype.calcPath=function(t,e){var n,r,i;switch(this.type){case"round-convex":r=Za(i=gu((n=xu(t)).map((function(t){return[t.x,t.y]})),this.padding));break;case"smooth-convex":2===(n=xu(t)).length?r=Za(i=gu(n.map((function(t){return[t.x,t.y]})),this.padding)):n.length>2&&(i=vu(n.map((function(t){return[t.x,t.y]})),this.padding),r=du(i));break;case"bubble":r=(n=Au(t,e,this.cfg.bubbleCfg)).length>=2&&du(n)}return r},t.prototype.render=function(){this.group.addShape("path",{attrs:(0,b.__assign)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id,capture:!1}),this.group.toBack()},t.prototype.addMember=function(t){if(t){(0,x.isString)(t)&&(t=this.graph.findById(t)),this.members.push(t);var e=this.nonMembers.indexOf(t);return e>-1&&this.nonMembers.splice(e,1),this.updateData(this.members,this.nonMembers),!0}},t.prototype.addNonMember=function(t){if(t){(0,x.isString)(t)&&(t=this.graph.findById(t)),this.nonMembers.push(t);var e=this.members.indexOf(t);return e>-1&&this.members.splice(e,1),this.updateData(this.members,this.nonMembers),!0}},t.prototype.removeMember=function(t){if(t){(0,x.isString)(t)&&(t=this.graph.findById(t));var e=this.members.indexOf(t);return e>-1&&(this.members.splice(e,1),this.updateData(this.members,this.nonMembers),!0)}},t.prototype.removeNonMember=function(t){if(t){(0,x.isString)(t)&&(t=this.graph.findById(t));var e=this.nonMembers.indexOf(t);return e>-1&&(this.nonMembers.splice(e,1),this.updateData(this.members,this.nonMembers),!0)}},t.prototype.updateData=function(t,e){var n=this;this.group.findById(this.id).remove(),t&&(this.members=t.map((function(t){return(0,x.isString)(t)?n.graph.findById(t):t}))),e&&(this.nonMembers=e.map((function(t){return(0,x.isString)(t)?n.graph.findById(t):t}))),this.path=this.calcPath(this.members,this.nonMembers),this.render()},t.prototype.updateStyle=function(t){this.group.findById(this.id).attr((0,b.__assign)({},t))},t.prototype.updateCfg=function(t){var e=this;this.cfg=(0,x.deepMix)(this.cfg,t),this.id=this.cfg.id,this.group=this.cfg.group,t.members&&(this.members=this.cfg.members.map((function(t){return(0,x.isString)(t)?e.graph.findById(t):t}))),t.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map((function(t){return(0,x.isString)(t)?e.graph.findById(t):t}))),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},t.prototype.contain=function(t){var e,n,r=this,i=(e=(0,x.isString)(t)?this.graph.findById(t):t).getKeyShape();if("path"===e.get("type"))n=hu(i.attr("path"));else{var o=i.getCanvasBBox();n=[[o.minX,o.minY],[o.maxX,o.minY],[o.maxX,o.maxY],[o.minX,o.maxY]]}return n=n.map((function(t){var e=r.graph.getPointByCanvas(t[0],t[1]);return[e.x,e.y]})),Ce(n,hu(this.path))},t.prototype.destroy=function(){this.group.remove(),this.cfg=null},t}();const ku=Tu;var Iu=N,Nu=function(t){function e(e){var n=t.call(this)||this;return n.sortCombos=(0,x.debounce)((function(){var t=n.get("comboSorted");if(n&&!n.destroyed&&!t){n.set("comboSorted",!0);var e=[],r={};(n.get("comboTrees")||[]).forEach((function(t){ln(t,(function(t){return e[t.depth]?e[t.depth].push(t.id):e[t.depth]=[t.id],r[t.id]=t.depth,!0}))})),(n.getEdges().concat(n.get("vedges"))||[]).forEach((function(t){var n=t.getModel(),i=r[n.source]||0,o=r[n.target]||0,a=Math.max(i,o);e[a]?e[a].push(n.id):e[a]=[n.id]})),e.forEach((function(t){if(t&&t.length)for(var e=t.length-1;e>=0;e--){var r=n.findById(t[e]);r&&r.toFront()}}))}}),500,!1),n.cfg=(0,x.deepMix)(n.getDefaultCfg(),e),n.init(),n.animating=!1,n.destroyed=!1,n.cfg.enabledStack&&(n.undoStack=new te(n.cfg.maxStep),n.redoStack=new te(n.cfg.maxStep)),n}return(0,b.__extends)(e,t),e.prototype.init=function(){this.initCanvas();var t=new bs(this),e=new _n(this),n=new iu(this),r=new au(this);this.set({viewController:t,modeController:e,itemController:n,stateController:r}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},e.prototype.initGroups=function(){var t=this.get("canvas");if(t){var e=(t.get("el")||{}).id,n=void 0===e?"g6":e,r=t.addGroup({id:"".concat(n,"-root"),className:Ke.rootContainerClassName});if(this.get("groupByTypes")){var i=r.addGroup({id:"".concat(n,"-edge"),className:Ke.edgeContainerClassName}),o=r.addGroup({id:"".concat(n,"-node"),className:Ke.nodeContainerClassName}),a=r.addGroup({id:"".concat(n,"-combo"),className:Ke.comboContainerClassName});a.toBack(),this.set({nodeGroup:o,edgeGroup:i,comboGroup:a})}var s=r.addGroup({id:"".concat(n,"-delegate"),className:Ke.delegateContainerClassName});this.set({delegateGroup:s}),this.set("group",r)}},e.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.02,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[],optimizeThreshold:1e3}},e.prototype.set=function(t,e){return(0,x.isPlainObject)(t)?this.cfg=(0,b.__assign)((0,b.__assign)({},this.cfg),t):this.cfg[t]=e,"enabledStack"!==t||!e||this.undoStack||this.redoStack||(this.undoStack=new te(this.cfg.maxStep),this.redoStack=new te(this.cfg.maxStep)),this},e.prototype.get=function(t){var e;return null===(e=this.cfg)||void 0===e?void 0:e[t]},e.prototype.getGroup=function(){return this.get("group")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.getMinZoom=function(){return this.get("minZoom")},e.prototype.setMinZoom=function(t){return this.set("minZoom",t)},e.prototype.getMaxZoom=function(){return this.get("maxZoom")},e.prototype.setMaxZoom=function(t){return this.set("maxZoom",t)},e.prototype.getWidth=function(){return this.get("width")},e.prototype.getHeight=function(){return this.get("height")},e.prototype.clearItemStates=function(t,e){(0,x.isString)(t)&&(t=this.findById(t));var n=this.get("itemController");e||(e=t.get("states")),n.clearItemStates(t,e),this.get("stateController").updateStates(t,e,!1)},e.prototype.node=function(t){"function"==typeof t&&this.set("nodeMapper",t)},e.prototype.edge=function(t){"function"==typeof t&&this.set("edgeMapper",t)},e.prototype.combo=function(t){"function"==typeof t&&this.set("comboMapper",t)},e.prototype.findById=function(t){return this.get("itemMap")[t]},e.prototype.find=function(t,e){var n,r=this.get("".concat(t,"s"));return(0,x.each)(r,(function(t,r){if(e(t,r))return n=t})),n},e.prototype.findAll=function(t,e){var n=[];return(0,x.each)(this.get("".concat(t,"s")),(function(t,r){e(t,r)&&n.push(t)})),n},e.prototype.findAllByState=function(t,e,n){return n?this.findAll(t,(function(t){return t.hasState(e)&&n(t)})):this.findAll(t,(function(t){return t.hasState(e)}))},e.prototype.translate=function(t,e,n,r){var i=this,o=this.get("group"),a=(0,x.clone)(o.getMatrix());if(a||(a=[1,0,0,0,1,0,0,0,1]),n){var s=bn({animateCfg:r,callback:function(){return i.emit("viewportchange",{action:"translate",matrix:o.getMatrix()})}});xe(o,{x:o.getCanvasBBox().x+t,y:o.getCanvasBBox().y+e},n,s||{duration:500,easing:"easeCubic"})}else a=Iu(a,[["t",t,e]]),o.setMatrix(a),this.emit("viewportchange",{action:"translate",matrix:a}),this.autoPaint()},e.prototype.moveTo=function(t,e,n,r){var i=this.get("group");xe(i,{x:t,y:e},n,r||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:i.getMatrix()})},e.prototype.fitView=function(t,e,n,r){t&&this.set("fitViewPadding",t);var i=this.get("viewController");e?i.fitViewByRules(e,n,r):i.fitView(n,r),this.autoPaint()},e.prototype.fitCenter=function(t,e){this.get("viewController").fitCenter(t,e),this.autoPaint()},e.prototype.addBehaviors=function(t,e){return this.get("modeController").manipulateBehaviors(t,e,!0),this},e.prototype.removeBehaviors=function(t,e){return this.get("modeController").manipulateBehaviors(t,e,!1),this},e.prototype.updateBehavior=function(t,e,n){return this.get("modeController").updateBehavior(t,e,n),this},e.prototype.zoom=function(t,e,n,r){var i=this,o=this.get("group"),a=(0,x.clone)(o.getMatrix())||[1,0,0,0,1,0,0,0,1],s=this.get("minZoom"),u=this.get("maxZoom"),l=this.getZoom()||1,c=l*t,h=t,d=!1;if(s&&c<s?(h=s/l,d=!0):u&&c>u&&(h=u/l,d=!0),a=Iu(a,e?[["t",-e.x,-e.y],["s",h,h],["t",e.x,e.y]]:[["s",h,h]]),n){var f=(0,x.clone)(o.getMatrix());f||(f=[1,0,0,0,1,0,0,0,1]);var p=f[0],m=p*h,g=bn({animateCfg:r,callback:function(){return i.emit("viewportchange",{action:"zoom",matrix:o.getMatrix()})}});o.animate((function(t){if(1===t)f=a;else{var n=Be(p,m,t)/f[0];f=Iu(f,e?[["t",-e.x,-e.y],["s",n,n],["t",e.x,e.y]]:[["s",n,n]])}return{matrix:f}}),g)}else o.setMatrix(a),this.emit("viewportchange",{action:"zoom",matrix:a}),this.autoPaint();return!d},e.prototype.zoomTo=function(t,e,n,r){var i=t/this.getZoom();return this.zoom(i,e,n,r)},e.prototype.focusItem=function(t,e,n){var r=this.get("viewController"),i=!1;e?i=!0:void 0===e&&(i=this.get("animate"));var o={};n?o=n:void 0===n&&(o=this.get("animateCfg")),r.focus(t,i,o),this.autoPaint()},e.prototype.focusItems=function(t,e,n,r){this.get("viewController").focusItems(t,e,n,r)},e.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},e.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},e.prototype.getPointByClient=function(t,e){return this.get("viewController").getPointByClient(t,e)},e.prototype.getClientByPoint=function(t,e){return this.get("viewController").getClientByPoint(t,e)},e.prototype.getPointByCanvas=function(t,e){return this.get("viewController").getPointByCanvas(t,e)},e.prototype.getCanvasByPoint=function(t,e){return this.get("viewController").getCanvasByPoint(t,e)},e.prototype.getGraphCenterPoint=function(){var t=this.get("group").getCanvasBBox();return{x:(t.minX+t.maxX)/2,y:(t.minY+t.maxY)/2}},e.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},e.prototype.showItem=function(t,e){void 0===e&&(e=!0);var n=this.get("itemController").changeItemVisibility(t,!0);if(e&&this.get("enabledStack")){var r=n.getID(),i={},o={};switch(n.getType()){case"node":i.nodes=[{id:r,visible:!1}],o.nodes=[{id:r,visible:!0}];break;case"edge":i.nodes=[{id:r,visible:!1}],o.edges=[{id:r,visible:!0}];break;case"combo":i.nodes=[{id:r,visible:!1}],o.combos=[{id:r,visible:!0}]}this.pushStack("visible",{before:i,after:o})}},e.prototype.hideItem=function(t,e){void 0===e&&(e=!0);var n=this.get("itemController").changeItemVisibility(t,!1);if(e&&this.get("enabledStack")){var r=n.getID(),i={},o={};switch(n.getType()){case"node":i.nodes=[{id:r,visible:!0}],o.nodes=[{id:r,visible:!1}];break;case"edge":i.nodes=[{id:r,visible:!0}],o.edges=[{id:r,visible:!1}];break;case"combo":i.nodes=[{id:r,visible:!0}],o.combos=[{id:r,visible:!1}]}this.pushStack("visible",{before:i,after:o})}},e.prototype.refreshItem=function(t){this.get("itemController").refreshItem(t)},e.prototype.setAutoPaint=function(t){this.set("autoPaint",t),this.get("canvas").set("autoDraw",t)},e.prototype.remove=function(t,e){void 0===e&&(e=!0),this.removeItem(t,e)},e.prototype.removeItem=function(t,e){void 0===e&&(e=!0);var n=t;if((0,x.isString)(t)&&(n=this.findById(t)),!n&&(0,x.isString)(t))console.warn("The item ".concat(t," to be removed does not exist!"));else if(n){var r="";if(n.getType&&(r=n.getType()),e&&this.get("enabledStack")){var i=(0,b.__assign)((0,b.__assign)({},n.getModel()),{itemType:r}),o={};switch(r){case"node":o.nodes=[i],o.edges=[];for(var a=n.getEdges(),s=a.length-1;s>=0;s--)o.edges.push((0,b.__assign)((0,b.__assign)({},a[s].getModel()),{itemType:"edge"}));break;case"edge":o.edges=[i];break;case"combo":o.combos=[i]}this.pushStack("delete",{before:o,after:{}})}if("node"===r)n.getModel().comboId&&this.updateComboTree(n,void 0,!1);if(this.get("itemController").removeItem(n),"combo"===r){var u=mn(this.get("comboTrees"));this.set("comboTrees",u)}}},e.prototype.innerAddItem=function(t,e,n){if(!function(t,e){if("node"===t||"combo"===t){if(e.id&&!(0,x.isString)(e.id))return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c".concat(e.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1}else if(!("edge"!==t||e.source&&e.target))return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."),!1;return!0}(t,e))return!1;if(!e.id||!this.findById(e.id)){var r,i=this.get("comboTrees")||[];if("combo"===t){var o=this.get("itemMap"),a=!1;if(i.forEach((function(i){a||cn(i,(function(i){if(e.parentId===i.id){a=!0;var s=(0,b.__assign)({id:e.id,depth:i.depth+2},e);i.children?i.children.push(s):i.children=[s],e.depth=s.depth,r=n.addItem(t,e)}var u=o[i.id];return a&&u&&u.getType&&"combo"===u.getType()&&n.updateCombo(u,i.children),!0}))})),!a){var s=(0,b.__assign)({id:e.id,depth:0},e);e.depth=s.depth,i.push(s),r=n.addItem(t,e)}this.set("comboTrees",i),e.collapsed&&(this.collapseCombo(r,!1),this.updateCombo(r))}else if("node"===t&&(0,x.isString)(e.comboId)&&i){var u;(u=this.findById(e.comboId))&&u.getType&&"combo"!==u.getType()&&console.warn("'".concat(e.comboId,"' is not a id of a combo in the graph, the node will be added without combo.")),r=n.addItem(t,e);var l=this.get("itemMap"),c=!1,h=!1;i.forEach((function(t){h||c||cn(t,(function(t){if(t.id===e.id)return h=!0,!1;if(e.comboId===t.id&&!h){c=!0;var r=(0,x.clone)(e);r.itemType="node",t.children?t.children.push(r):t.children=[r],r.depth=t.depth+1}return c&&l[t.id].getType&&"combo"===l[t.id].getType()&&n.updateCombo(l[t.id],t.children),!0}))}))}else r=n.addItem(t,e);if("node"===t&&e.comboId||"combo"===t&&e.parentId)(u=this.findById(e.comboId||e.parentId))&&u.getType&&"combo"===u.getType()&&u.addChild(r);return r}console.warn("This item exists already. Be sure the id %c".concat(e.id,"%c is unique."),"font-size: 20px; color: red;","")},e.prototype.addItem=function(t,e,n,r){void 0===n&&(n=!0),void 0===r&&(r=!0);var i=this.get("comboSorted");this.set("comboSorted",i&&!r);var o=this.get("itemController"),a=this.innerAddItem(t,e,o);if(!1===a||!0===a)return a;var s=this.get("combos");if(s&&s.length>0&&this.sortCombos(),this.autoPaint(),n&&this.get("enabledStack")){var u=(0,b.__assign)((0,b.__assign)({},a.getModel()),{itemType:t}),l={};switch(t){case"node":l.nodes=[u];break;case"edge":l.edges=[u];break;case"combo":l.combos=[u]}this.pushStack("add",{before:{},after:l})}return a},e.prototype.addItems=function(t,e,n){void 0===t&&(t=[]),void 0===e&&(e=!0),void 0===n&&(n=!0);var r=this.get("comboSorted");this.set("comboSorted",r&&!n);for(var i=this.get("itemController"),o=[],a=0;a<t.length;a++){"edge"!==(s=t[a]).type&&"vedge"!==s.type?o.push(this.innerAddItem(s.type,s.model,i)):o.push(void 0)}for(a=0;a<t.length;a++){var s;"edge"!==(s=t[a]).type&&"vedge"!==s.type||(o[a]=this.innerAddItem(s.type,s.model,i))}if(n){var u=this.get("combos");u&&u.length>0&&this.sortCombos()}if(this.autoPaint(),e&&this.get("enabledStack")){var l={nodes:[],edges:[],combos:[]};for(a=0;a<t.length;a++){var c=t[a].type,h=o[a];if(h&&!0!==h){var d=(0,b.__assign)((0,b.__assign)({},h.getModel()),{itemType:c});switch(c){case"node":l.nodes.push(d);break;case"edge":l.edges.push(d);break;case"combo":l.combos.push(d)}}}this.pushStack("addItems",{before:{},after:l})}return o},e.prototype.add=function(t,e,n,r){return void 0===n&&(n=!0),void 0===r&&(r=!0),this.addItem(t,e,n,r)},e.prototype.updateItem=function(t,e,n){var r=this;void 0===n&&(n=!0);var i,o=this.get("itemController");i=(0,x.isString)(t)?this.findById(t):t;var a,s=n&&this.get("enabledStack");s&&(a=(0,x.clone)(i.getModel()));var u="";i.getType&&(u=i.getType());var l=(0,b.__spreadArray)([],i.getStates(),!0);if("combo"===u&&(0,x.each)(l,(function(t){return r.setItemState(i,t,!1)})),o.updateItem(i,e),"combo"===u&&(0,x.each)(l,(function(t){return r.setItemState(i,t,!0)})),s){var c={nodes:[],edges:[],combos:[]},h={nodes:[],edges:[],combos:[]},d=(0,b.__assign)({id:a.id},e);switch(u){case"node":c.nodes.push(a),h.nodes.push(d);break;case"edge":c.edges.push(a),h.edges.push(d);break;case"combo":c.combos.push(a),h.combos.push(d)}this.pushStack("update",{before:c,after:h})}},e.prototype.update=function(t,e,n){void 0===n&&(n=!0),this.updateItem(t,e,n)},e.prototype.setItemState=function(t,e,n){(0,x.isString)(t)&&(t=this.findById(t)),this.get("itemController").setItemState(t,e,n),this.get("stateController").updateState(t,e,n)},e.prototype.priorityState=function(t,e){this.get("itemController").priorityState(t,e)},e.prototype.data=function(t){xn(t),this.set("data",t)},e.prototype.render=function(){var t=this;this.set("comboSorted",!1);var e=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!e)throw new Error("data must be defined first");var n=e.nodes,r=void 0===n?[]:n,i=e.edges,o=void 0===i?[]:i,a=e.combos,s=void 0===a?[]:a;if(this.clear(!0),this.emit("beforerender"),t.addItems(r.map((function(t){return{type:"node",model:t}})),!1,!1),0!==(null==s?void 0:s.length)){var u=pn(s,r);this.set("comboTrees",u),t.addCombos(s)}t.addItems(o.map((function(t){return{type:"edge",model:t}})),!1,!1);var l=t.get("animate");(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",!1);var c=t.get("layoutController");if(c){if(c.layout(h),this.destroyed)return}else h();function h(){(t.get("comboTrees")||[]).forEach((function(e){cn(e,(function(e){var n=t.findById(e.id);return"combo"===n.getType()&&e.collapsed&&(t.collapseCombo(e.id,!1),t.updateCombo(n)),!0}))})),t.get("fitView")?t.fitView():t.get("fitCenter")&&t.fitCenter(),t.autoPaint(),t.emit("afterrender"),(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",l),setTimeout((function(){var e;null===(e=t.getCombos())||void 0===e||e.forEach((function(t){t.set("animate",!0)}))}),0)}this.get("groupByTypes")||(s&&0!==s.length?this.sortCombos():e.nodes&&e.edges&&e.nodes.length<e.edges.length?this.getNodes().forEach((function(t){t.toFront()})):this.getEdges().forEach((function(t){t.toBack()})))},e.prototype.read=function(t){this.data(t),this.render()},e.prototype.diffItems=function(t,e,n){var r,i=this,o=this.get("itemMap");(0,x.each)(n,(function(n){if(r=o[n.id]){if(i.get("animate")&&"node"===t){var a=r.getContainer().getMatrix();a||(a=[1,0,0,0,1,0,0,0,1]),r.set("originAttrs",{x:a[6],y:a[7]})}i.updateItem(r,n,!1)}else r=i.addItem(t,n,!1);r&&e["".concat(t,"s")].push(r)}))},e.prototype.changeData=function(t,e){var n,r=this;void 0===e&&(e=!0);var i=this,o=t||i.get("data");if(!xn(o))return this;this.emit("beforechangedata"),e&&this.get("enabledStack")&&this.pushStack("changedata",{before:i.save(),after:o}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map((function(t){return i.clearItemStates(t)})),this.getEdges().map((function(t){return i.clearItemStates(t)}));var a=this.get("canvas"),s=a.get("localRefresh");a.set("localRefresh",!1),i.get("data")||(i.data(o),i.render());var u=this.get("itemMap"),l={nodes:[],edges:[]},c=o.combos;if(c){var h=pn(c,o.nodes);this.set("comboTrees",h)}else this.set("comboTrees",[]);this.diffItems("node",l,o.nodes),(0,x.each)(u,(function(t,e){u[e].getModel().depth=0,t.getType&&"edge"===t.getType()||(t.getType&&"combo"===t.getType()?(delete u[e],t.destroy()):l.nodes.indexOf(t)<0&&(delete u[e],i.remove(t,!1)))}));for(var d=this.getCombos(),f=d.length-1;f>=0;f--)d[f].destroyed&&d.splice(f,1);c&&(i.addCombos(c),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",l,o.edges),(0,x.each)(u,(function(t,e){(!t.getType||"node"!==t.getType()&&"combo"!==t.getType())&&l.edges.indexOf(t)<0&&(delete u[e],i.remove(t,!1))})),(this.get("comboTrees")||[]).forEach((function(t){cn(t,(function(t){return"combo"===r.findById(t.id).getType()&&t.collapsed&&r.collapseCombo(t.id,!1),!0}))})),this.set({nodes:l.nodes,edges:l.edges});var p=(this.get("layout")||{}).relayoutAtChangeData,m=void 0===p||p,g=this.get("layoutController");return m&&g&&(g.changeData((function(){setTimeout((function(){var t;null===(t=i.getCombos())||void 0===t||t.forEach((function(t){t.set("animate",!0)}))}),0)})),i.get("animate")&&!g.getLayoutType()?(i.positionsAnimate(),null===(n=i.getCombos())||void 0===n||n.forEach((function(t){return t.set("animate",!0)}))):i.autoPaint()),setTimeout((function(){a.set("localRefresh",s)}),16),this.set("data",o),this.emit("afterchangedata"),this},e.prototype.addCombos=function(t){var e=this.get("comboTrees");this.get("itemController").addCombos(e,t)},e.prototype.createCombo=function(t,e,n){var r=this;void 0===n&&(n=!0);var i=this.get("itemController");this.set("comboSorted",!1);var o,a="";if(t){if((0,x.isString)(t))a=t,o={id:t};else{if(!(a=t.id))return void console.warn("Create combo failed. Please assign a unique string id for the adding combo.");o=t}var s=n&&this.get("enabledStack"),u={nodes:[],combos:[]};s&&e.forEach((function(t){var e=r.findById(t),n=e.getType();if("node"===n||"combo"===n){var i=e.getModel();u["".concat(n,"s")].push({id:t,parentId:"node"===n?i.comboId:i.parentId})}}));var l=this.get("comboTrees"),c=new Set(e),h=new Map;l&&(l.forEach((function(t){cn(t,(function(t,e,n){if(c.has(t.id)){if(e){var o=r.findById(e.id),a=r.findById(t.id);e.children.splice(n,1),o.removeChild(a),i.updateCombo(o,e.children)}"combo"===t.itemType&&h.set(t.id,t)}return!0}))})),l=l.filter((function(t){return!c.has(t.id)})),this.set("comboTrees",l));var d={nodes:[],combos:[]},f=e.map((function(t){var e=r.findById(t),n=e.getModel(),i="";e.getType&&(i=e.getType());var o=h.get(t)||{id:e.getID(),itemType:i};return"combo"===i?(o.parentId=a,n.parentId=a):"node"===i&&(o.comboId=a,n.comboId=a),s&&d["".concat(i,"s")].push({id:n.id,parentId:a}),o}));o.children=f,this.addItem("combo",o,!1),this.set("comboSorted",!1),l&&(l.forEach((function(t){ln(t,(function(t){return t.id!==a||(t.itemType="combo",t.children=f,!1)}))})),this.sortCombos()),s&&(d.combos.push(o),this.pushStack("createCombo",{before:u,after:d}));var p=this.findById(a);!p.getModel().parentId&&p.getChildren().combos.length&&this.updateComboTree(p,void 0,!1),setTimeout((function(){p.set("animate",!0)}),0)}},e.prototype.uncombo=function(t,e){var n,r,i=this;void 0===e&&(e=!0);var o=t;if((0,x.isString)(t)&&(o=this.findById(t)),!o||o.getType&&"combo"!==o.getType())console.warn("The item is not a combo!");else{var a=o.getModel(),s=o.getModel().parentId,u=this.get("comboTrees");u||(u=[]);var l,c=this.get("itemMap"),h=o.get("id"),d=[],f=this.get("combos"),p=this.findById(s),m=e&&this.get("enabledStack"),g={};if(m&&((g=(0,x.clone)(a)).children=[]),u.forEach((function(t){l||cn(t,(function(t){var e;if(t.id===h){l=t;var n=o.getEdges().map((function(t){return t.getID()}));n.forEach((function(t){i.removeItem(t,!1)}));var r=f.indexOf(o);f.splice(r,1),delete c[h];var a=(0,x.clone)(o.getModel());o.destroy(),i.emit("afterremoveitem",{item:a,type:"combo"})}return!s||!l||t.id!==s||(p.removeCombo(o),-1!==(r=(d=t.children).indexOf(l))&&d.splice(r,1),null===(e=l.children)||void 0===e||e.forEach((function(t){var e=i.findById(t.id),n=e.getModel();e.getType&&"combo"===e.getType()?(t.parentId=s,delete t.comboId,n.parentId=s,delete n.comboId):e.getType&&"node"===e.getType()&&(t.comboId=s,n.comboId=s),p.addChild(e),d.push(t)})),i.updateCombo(p),!1)}))})),!s&&l){var v=u.indexOf(l);u.splice(v,1),null===(n=l.children)||void 0===n||n.forEach((function(t){t.parentId=void 0;var e=i.findById(t.id).getModel();delete e.parentId,delete e.comboId,"node"!==t.itemType&&u.push(t)}))}if(m){var y={nodes:[],combos:[]},b={nodes:[],combos:[]};null===(r=l.children)||void 0===r||r.forEach((function(t){var e=i.findById(t.id).getType();"node"!==e&&"combo"!==e||(y["".concat(e,"s")].push({id:t.id,parentId:h}),b["".concat(e,"s")].push({id:t.id,parentId:s}))})),y.combos.push(g),this.pushStack("uncombo",{before:y,after:b})}}},e.prototype.updateCombos=function(t){var e=this;void 0===t&&(t=!1);var n=this,r=this.get("comboTrees"),i=n.get("itemController"),o=n.get("itemMap");(r||[]).forEach((function(n){cn(n,(function(n){var r;if(!n)return!0;var a=o[n.id];if("combo"===(null===(r=null==a?void 0:a.getType)||void 0===r?void 0:r.call(a))){var s=(0,b.__spreadArray)([],a.getStates(),!0);(0,x.each)(s,(function(t){return e.setItemState(a,t,!1)})),i.updateCombo(a,n.children,t),(0,x.each)(s,(function(t){return e.setItemState(a,t,!0)}))}return!0}))})),n.sortCombos()},e.prototype.updateCombo=function(t){var e,n=this,r=t;if((0,x.isString)(t)&&(r=this.findById(t)),!r||r.getType&&"combo"!==r.getType())console.warn("The item to be updated is not a combo!");else{e=r.get("id");var i=this.get("comboTrees"),o=this.get("itemController"),a=this.get("itemMap");(i||[]).forEach((function(t){cn(t,(function(t){if(!t)return!0;var r=a[t.id];if(e===t.id&&r&&r.getType&&"combo"===r.getType()){var i=(0,b.__spreadArray)([],r.getStates(),!0);(0,x.each)(i,(function(t){r.getStateStyle(t)&&n.setItemState(r,t,!1)})),o.updateCombo(r,t.children),(0,x.each)(i,(function(t){r.getStateStyle(t)&&n.setItemState(r,t,!0)})),e&&(e=t.parentId)}return!0}))}))}},e.prototype.updateComboTree=function(t,e,n){void 0===n&&(n=!0);var r;this.set("comboSorted",!1);var i,o=(r=(0,x.isString)(t)?this.findById(t):t).getModel(),a=o.comboId||o.parentId,s="";if(r.getType&&(s=r.getType()),e&&"combo"===s){var u,l=this.get("comboTrees"),c=!0;if((l||[]).forEach((function(t){u||ln(t,(function(t){if(!u)return t.id===r.getID()&&(u=t),!0}))})),ln(u,(function(t){return t.id!==e||(c=!1,!1)})),!c)return void console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!")}if(n&&this.get("enabledStack")){var h={},d={};"combo"===s?(h.combos=[{id:o.id,parentId:o.parentId}],d.combos=[{id:o.id,parentId:e}]):"node"===s&&(h.nodes=[{id:o.id,parentId:o.comboId}],d.nodes=[{id:o.id,parentId:e}]),this.pushStack("updateComboTree",{before:h,after:d})}if(o.parentId||o.comboId){var f=this.findById(o.parentId||o.comboId);f&&f.removeChild(r)}("combo"===s?o.parentId=e:"node"===s&&(o.comboId=e),e)&&((i=this.findById(e))&&i.addChild(r));a&&((i=this.findById(a))&&i.removeChild(r));var p=mn(this.get("comboTrees"),o.id,e);this.set("comboTrees",p),this.updateCombos()},e.prototype.save=function(){var t=[],e=[],n=[];return(0,x.each)(this.get("nodes"),(function(e){t.push(e.getModel())})),(0,x.each)(this.get("edges"),(function(t){e.push(t.getModel())})),(0,x.each)(this.get("combos"),(function(t){n.push(t.getModel())})),{nodes:t,edges:e,combos:n}},e.prototype.changeSize=function(t,e){return this.get("viewController").changeSize(t,e),this},e.prototype.refresh=function(){var t=this;if(t.emit("beforegraphrefresh"),t.get("animate"))t.positionsAnimate();else{var e=t.get("nodes"),n=t.get("edges"),r=t.get("edges");(0,x.each)(e,(function(t){t.refresh()})),(0,x.each)(n,(function(t){t.refresh()})),(0,x.each)(r,(function(t){t.refresh()}))}t.emit("aftergraphrefresh"),t.autoPaint()},e.prototype.getNodes=function(){return this.get("nodes")},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getCombos=function(){return this.get("combos")},e.prototype.getComboChildren=function(t){if((0,x.isString)(t)&&(t=this.findById(t)),t&&(!t.getType||"combo"===t.getType()))return t.getChildren();console.warn("The combo does not exist!")},e.prototype.positionsAnimate=function(t){var e=this;e.emit("beforeanimate");var n=e.get("animateCfg"),r=n.onFrame,i=t?e.getNodes().concat(e.getCombos()):e.getNodes(),o=i.map((function(t){var e=t.getModel();return{id:e.id,x:e.x,y:e.y}}));e.stopAnimate();var a=e.get("canvas");e.animating=!0,setTimeout((function(){a.animate((function(n){(0,x.each)(o,(function(t){var i=e.findById(t.id);if(i&&!i.destroyed){var o=i.get("originAttrs"),a=i.get("model"),s=i.getContainer().getMatrix();if(null==o&&(s&&(o={x:s[6],y:s[7]}),i.set("originAttrs",o||0)),r){var u=r(i,n,t,o||{x:0,y:0});i.set("model",Object.assign(a,u))}else o?(a.x=o.x+(t.x-o.x)*n,a.y=o.y+(t.y-o.y)*n):(a.x=t.x,a.y=t.y)}})),e.refreshPositions(t)}),{duration:n.duration,easing:n.easing,callback:function(){(0,x.each)(i,(function(t){t.set("originAttrs",null)})),n.callback&&n.callback(),e.emit("afteranimate"),e.animating=!1}})}),0)},e.prototype.refreshPositions=function(t){var e=this;e.emit("beforegraphrefreshposition");var n,r=e.get("nodes"),i=e.get("edges"),o=e.get("vedges"),a=e.get("combos"),s={},u=function(t){(0,x.each)(t,(function(t){n=t.getModel();var e=t.get("originAttrs");if(!e||n.x!==e.x||n.y!==e.y){var r=t.updatePosition({x:n.x,y:n.y});s[n.id]=r,n.comboId&&(s[n.comboId]=s[n.comboId]||r),n.parentId&&(s[n.parentId]=s[n.parentId]||r)}}))};u(a),u(r),a&&0!==a.length&&(t?(u(a),e.updateCombos()):e.updateCombos()),(0,x.each)(i,(function(t){var e=t.getSource().getModel(),n=t.getTarget();if(!(0,x.isPlainObject)(n)){var r=n.getModel();(s[e.id]||s[r.id]||t.getModel().isComboEdge)&&t.refresh()}})),(0,x.each)(o,(function(t){t.refresh()})),e.emit("aftergraphrefreshposition"),e.autoPaint()},e.prototype.stopAnimate=function(){var t=this.get("canvas").cfg.timeline;t&&t.stopAllAnimations()},e.prototype.isAnimating=function(){return this.animating},e.prototype.getZoom=function(){var t=this.get("group").getMatrix();return t?t[0]:1},e.prototype.getCurrentMode=function(){return this.get("modeController").getMode()},e.prototype.setMode=function(t){return this.get("modeController").setMode(t),this},e.prototype.clear=function(t){var e;return void 0===t&&(t=!1),null===(e=this.get("canvas"))||void 0===e||e.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],vedges:[],groups:[],combos:[],comboTrees:[]}),t||this.emit("afterrender"),this},e.prototype.updateLayout=function(t,e,n,r){var i=this;void 0===t&&(t={}),void 0===r&&(r=!0);var o=this.get("layoutController");if((0,x.isString)(t)&&(t={type:t}),e){var a=n;a||(a="begin"===e?{x:0,y:0}:{x:this.getWidth()/2,y:this.getHeight()/2}),a=this.getPointByCanvas(a.x,a.y);var s=["force","gForce","fruchterman","force2"];s.includes(t.type)||!t.type&&s.includes(null==o?void 0:o.layoutType)?t.center=[a.x,a.y]:this.once("afterlayout",(function(t){var n=i.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];a.x=a.x*n[0]+n[6],a.y=a.y*n[0]+n[7];var r=i.getGroup().getCanvasBBox(),o=r.minX,s=r.maxX,u=r.minY,l={x:(o+s)/2,y:(u+r.maxY)/2};"begin"===e&&(l.x=o,l.y=u),i.translate(a.x-l.x,a.y-l.y)}))}var u=(0,b.__assign)({},this.get("layout")),l={};Object.assign(l,u,t),t.pipes&&!t.type?delete l.type:!t.pipes&&l.type&&delete l.pipes,this.set("layout",l),o&&(o.isLayoutTypeSame(l)&&l.gpuEnabled===u.gpuEnabled?o.updateLayoutCfg(l):o.changeLayout(l),r&&this.get("enabledStack")&&this.pushStack("layout",{before:u,after:l}))},e.prototype.destroyLayout=function(){var t=this.get("layoutController");null==t||t.destroyLayout()},e.prototype.layout=function(){var t,e=this.get("layoutController"),n=this.get("layout");n&&e&&(n.workerEnabled?e.layout():(null===(t=e.layoutMethods)||void 0===t?void 0:t.length)?e.relayout(!0):e.layout())},e.prototype.collapseCombo=function(t,e){var n=this;if(void 0===e&&(e=!0),!this.destroyed)if((0,x.isString)(t)&&(t=this.findById(t)),t){this.emit("beforecollapseexpandcombo",{action:"collapse",item:t});var r=t.getModel();this.get("itemController").collapseCombo(t,e),r.collapsed=!0;var i=this.getEdges().concat(this.get("vedges")),o=[],a=this.get("comboTrees"),s=!1;(a||[]).forEach((function(t){s||ln(t,(function(t){if(s&&t.depth<=r.depth)return!1;if(r.id===t.id&&(s=!0),s){var e=n.findById(t.id);e&&e.getType&&"combo"===e.getType()&&(o=(o=o.concat(e.getNodes())).concat(e.getCombos()))}return!0}))}));var u={};i.forEach((function(t){var e=t.getModel(),i=e.isVEdge,a=e.size,s=void 0===a?1:a;if(!t.isVisible()||i){var l,c=t.getSource(),h=t.getTarget(),d=null;if(c.getModel().id===r.id||o.includes(c)&&!o.includes(h)?(d=h,l=!1):(h.getModel().id===r.id||!o.includes(c)&&o.includes(h))&&(d=c,l=!0),d){if(i)return void n.removeItem(t,!1);for(var f=d.getModel();!d.isVisible();){var p=f.parentId,m=f.comboId,g=p||m;if(!(d=n.findById(g))||!g)return;f=d.getModel()}var v=f.id,y=l?{source:v,target:r.id,size:s,isVEdge:!0}:{source:r.id,target:v,size:s,isVEdge:!0},b="".concat(y.source,"-").concat(y.target);if(u[b])return void(u[b].size+=s);u[b]=y}}})),this.addItems(Object.values(u).map((function(t){return{type:"vedge",model:t}})),!1),this.emit("aftercollapseexpandcombo",{action:"collapse",item:t})}else console.warn("The combo to be collapsed does not exist!")},e.prototype.expandCombo=function(t,e){var n=this;if(void 0===e&&(e=!0),(0,x.isString)(t)&&(t=this.findById(t)),!t||t.getType&&"combo"!==t.getType())console.warn("The combo to be collapsed does not exist!");else{this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var r=t.getModel();this.get("itemController").expandCombo(t,e),r.collapsed=!1;var i=this.getEdges().concat(this.get("vedges")),o=[],a=this.get("comboTrees"),s=!1;(a||[]).forEach((function(t){s||ln(t,(function(t){if(s&&t.depth<=r.depth)return!1;if(r.id===t.id&&(s=!0),s){var e=n.findById(t.id);e&&e.getType&&"combo"===e.getType()&&(o=(o=o.concat(e.getNodes())).concat(e.getCombos()))}return!0}))}));var u={};i.forEach((function(t){if(!t.isVisible()||t.getModel().isVEdge){var e,i=t.getSource(),a=t.getTarget(),s=i.get("id"),l=a.get("id"),c=null;if(s===r.id||o.includes(i)&&!o.includes(a)?(c=a,e=!1):l===r.id||!o.includes(i)&&o.includes(a)?(c=i,e=!0):o.includes(i)&&o.includes(a)&&i.isVisible()&&a.isVisible()&&t.show(),c){var h=t.getModel(),d=h.isVEdge,f=h.size,p=void 0===f?1:f;if(d)return void n.removeItem(t,!1);for(var m=c.getModel();!c.isVisible();){var g=m.parentId,v=m.comboId,y=g||v;if(!(c=n.findById(y))||!y)return;m=c.getModel()}for(var b=m.id,x=e?a:i,w=x.getModel();!x.isVisible();){var _=w.parentId,S=w.comboId,E=_||S;if(!(x=n.findById(E))||!E)return;if(w.comboId===r.id||w.parentId===r.id)break;w=x.getModel()}var A=w.id;if(b){var M=e?{source:b,target:A,isVEdge:!0,size:p}:{source:A,target:b,isVEdge:!0,size:p},C="".concat(M.source,"-").concat(M.target);if(u[C])return void(u[C].size+=p);u[C]=M}}}})),this.addItems(Object.values(u).map((function(t){return{type:"vedge",model:t}})),!1),this.emit("aftercollapseexpandcombo",{action:"expand",item:t})}},e.prototype.collapseExpandCombo=function(t,e){if(void 0===e&&(e=!0),(0,x.isString)(t)&&(t=this.findById(t)),t&&(!t.getType||"combo"===t.getType())){for(var n=t.getModel(),r=this.findById(n.parentId);r;){var i=r.getModel();if(i.collapsed)return console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),void(r=void 0);r=this.findById(i.parentId)}n.collapsed?this.expandCombo(t,e):this.collapseCombo(t,e),this.updateCombo(t)}},e.prototype.getNeighbors=function(t,e){var n=t;return(0,x.isString)(t)&&(n=this.findById(t)),n.getNeighbors(e)},e.prototype.getNodeDegree=function(t,e,n){void 0===e&&(e=void 0),void 0===n&&(n=!1);var r=t;(0,x.isString)(t)&&(r=this.findById(t));var i=this.get("degrees");i&&!n||(i=Y(this.save()),this.set("degrees",i));var o=i[r.getID()],a=0;if(!o)return 0;switch(e){case"in":a=o.inDegree;break;case"out":a=o.outDegree;break;case"all":a=o;break;default:a=o.degree}return a},e.prototype.getUndoStack=function(){return this.undoStack},e.prototype.getRedoStack=function(){return this.redoStack},e.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},e.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear(),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack}))},e.prototype.pushStack=function(t,e,n){if(void 0===t&&(t="update"),void 0===n&&(n="undo"),this.get("enabledStack")){var r=e?(0,x.clone)(e):{before:{},after:(0,x.clone)(this.save())};"redo"===n?this.redoStack.push({action:t,data:r}):this.undoStack.push({action:t,data:r}),this.emit("stackchange",{action:t,stackType:n,undoStack:this.undoStack,redoStack:this.redoStack})}else console.warn(" undo & redo  Graph  enabledStack: true !")},e.prototype.getAdjMatrix=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=this.get("directed"));var n=this.get("adjMatrix");return n&&t||(n=P(this.save(),e),this.set("adjMatrix",n)),n},e.prototype.getShortestPathMatrix=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=this.get("directed"));var n=this.get("adjMatrix"),r=this.get("shortestPathMatrix");return n&&t||(n=P(this.save(),e),this.set("adjMatrix",n)),r&&t||(r=at(this.save(),e),this.set("shortestPathMatrix",r)),r},e.prototype.on=function(e,n,r){return t.prototype.on.call(this,e,n,r)},e.prototype.destroy=function(){var t,e,n,r,i;this.emit("beforedestroy"),this.clear(),this.clearStack(),null===(t=this.get("itemController"))||void 0===t||t.destroy(),null===(e=this.get("modeController"))||void 0===e||e.destroy(),null===(n=this.get("viewController"))||void 0===n||n.destroy(),null===(r=this.get("stateController"))||void 0===r||r.destroy(),null===(i=this.get("canvas"))||void 0===i||i.destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null,this.emit("afterdestroy")},e.prototype.createHull=function(t){if(t.members&&!(t.members.length<1)){var e=this.get("hullGroup"),n=this.get("hullMap");if(n||(n={},this.set("hullMap",n)),e&&!e.get("destroyed")||((e=this.get("group").addGroup({id:"hullGroup"})).toBack(),this.set("hullGroup",e)),n[t.id])return console.warn("Existed hull id."),n[t.id];var r=e.addGroup({id:"".concat(t.id,"-container")}),i=new ku(this,(0,b.__assign)((0,b.__assign)({},t),{group:r}));return n[i.id]=i,i}console.warn("Create hull failed! The members is empty.")},e.prototype.getHulls=function(){return this.get("hullMap")},e.prototype.getHullById=function(t){return this.get("hullMap")[t]},e.prototype.removeHull=function(t){var e,n;n=(0,x.isString)(t)?this.getHullById(t):t,null===(e=this.get("hullMap"))||void 0===e||delete e[n.id],n.destroy()},e.prototype.removeHulls=function(){var t=this.getHulls();t&&Object.keys(t).length&&(Object.keys(t).forEach((function(e){t[e].destroy()})),this.set("hullMap",{}))},e}(M);const Pu=Nu;function Ou(t){return Ou="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ou(t)}var Lu=N,Ru="-shape",Du="-label",zu=["startArrow","endArrow"],Fu={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},Bu={edge:{lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},node:Fu,combo:Fu},Uu="-label-bg",ju={options:{labelCfg:{style:{fontFamily:Ke.windowFontFamily}},descriptionCfg:{style:{fontFamily:Ke.windowFontFamily}}},itemType:"",type:"",getCustomConfig:function(t){return{}},getOptions:function(t,e){return"move"===e||(null==e?void 0:e.includes("bbox"))?t:(0,x.deepMix)({},this.options,this.getCustomConfig(t)||{},t)},draw:function(t,e){e.shapeMap={},this.mergeStyle=this.getOptions(t);var n=this.drawShape(t,e);if(n.set("className",this.itemType+Ru),e.shapeMap[this.itemType+Ru]=n,t.label){var r=this.drawLabel(t,e);r.set("className",this.itemType+Du),e.shapeMap[this.itemType+Du]=r}return n},afterDraw:function(t,e,n){},drawShape:function(t,e){return null},drawLabel:function(t,e){var n=(this.mergeStyle||this.getOptions(t)||{}).labelCfg||{},r=this.getLabelStyle(t,n,e),i=r.rotate;delete r.rotate;var o=e.addShape("text",{attrs:r,draggable:!0,className:"text-shape",name:"text-shape",labelRelated:!0});if(e.shapeMap["text-shape"]=o,!isNaN(i)&&""!==i){var a=o.getBBox(),s=[1,0,0,0,1,0,0,0,1];if(r.rotateCenter)switch(r.rotateCenter){case"center":default:s=Lu(s,[["t",-a.width/2,-a.height/2],["r",i],["t",a.width/2,a.height/2]]);break;case"lefttop":s=Lu(s,[["t",-r.x,-r.y],["r",i],["t",r.x,r.y]]);break;case"leftcenter":s=Lu(s,[["t",-r.x,-r.y-a.height/2],["r",i],["t",r.x,r.y+a.height/2]])}else s=Lu(s,[["t",-r.x,-r.y-a.height/2],["r",i],["t",r.x,r.y+a.height/2]]);o.setMatrix(s)}if(r.background){var u=this.drawLabelBg(t,e,o),l=this.itemType+Uu;u.set("classname",l),e.shapeMap[l]=u,o.toFront()}return o},drawLabelBg:function(t,e,n){var r=this.options.labelCfg,i=(0,x.mix)({},r,t.labelCfg),o=this.getLabelBgStyleByPosition(n,i),a=e.addShape("rect",{name:"text-bg-shape",attrs:o,labelRelated:!0});return e.shapeMap["text-bg-shape"]=a,a},getLabelStyleByPosition:function(t,e,n){return{text:t.label}},getLabelBgStyleByPosition:function(t,e){return{}},getLabelStyle:function(t,e,n){var r=this.getLabelStyleByPosition(t,e,n),i="".concat(this.itemType,"Label"),o=Ke[i]?Ke[i].style:null;return(0,b.__assign)((0,b.__assign)((0,b.__assign)({},o),r),e.style)},getShapeStyle:function(t){return t.style},update:function(t,e,n){this.updateShapeStyle(t,e,n),this.updateLabel(t,e,n)},updateShapeStyle:function(t,e,n){var r,i=e.getContainer(),o=e.getKeyShape(),a=(0,x.mix)({},o.attr(),t.style),s=function(t){var e,n=a[t];if((0,x.isPlainObject)(n)){var s=(null===(r=i.shapeMap)||void 0===r?void 0:r[t])||i.find((function(e){return e.get("name")===t}));null==s||s.attr(n)}else o.attr(((e={})[t]=n,e))};for(var u in a)s(u)},updateLabel:function(t,e,n){var r,i,o=e.getContainer(),a=(this.mergeStyle||this.getOptions({},n)||{}).labelCfg,s=void 0===a?{}:a,u=this.itemType+Du,l=o.shapeMap[u]||o.find((function(t){return t.get("className")===u})),c=this.itemType+Uu,h=o.shapeMap[c]||o.find((function(t){return t.get("className")===c}));if(l&&void 0===t.label&&(o.removeChild(l),delete o.shapeMap[u],h&&(o.removeChild(h),delete o.shapeMap[c])),t.label||""===t.label)if(l){(!n||"bbox|label"===n||"edge"===this.itemType&&"style"!==n)&&(s=(0,x.deepMix)(s,t.labelCfg));var d=this.getLabelStyleByPosition(t,s,o),f=null===(r=t.labelCfg)||void 0===r?void 0:r.style,p=(0,b.__assign)((0,b.__assign)({},d),f),m=p.rotate;if(delete p.rotate,isNaN(m)||""===m)1!==(null===(i=l.getMatrix())||void 0===i?void 0:i[4])&&l.resetMatrix(),l.attr(p);else{var g=[1,0,0,0,1,0,0,0,1];g=Lu(g,[["t",-p.x,-p.y],["r",m],["t",p.x,p.y]]),p.matrix=g,l.attr(p)}if(h)if(p.background){var v=this.getLabelBgStyleByPosition(l,s);h.attr(v)}else o.removeChild(h);else p.background&&((h=this.drawLabelBg(t,o,l)).set("classname",c),o.shapeMap[c]=h,l.toFront())}else{var y=this.drawLabel(t,o);y.set("className",u),o.shapeMap[u]=y}},afterUpdate:function(t,e){},setState:function(t,e,n){var r,i,o,a=n.get("keyShape");if(a&&!a.destroyed){var s=n.getType(),u=(0,x.isBoolean)(e)?t:"".concat(t,":").concat(e),l=this.getStateStyle(u,n),c=n.getStateStyle(u);if(c||l){var h=(0,x.mix)({},c||l),d=n.getContainer(),f={x:1,y:1,cx:1,cy:1,matrix:1};if("combo"===s&&(f.r=1,f.width=1,f.height=1),e){var p=function(t){var e,n=h[t];if((0,x.isPlainObject)(n)&&!zu.includes(t)){var r=(null===(o=d.shapeMap)||void 0===o?void 0:o[t])||d.find((function(e){return e.get("name")===t}));null==r||r.attr(n)}else a.attr(((e={})[t]=n,e))};for(var m in h)p(m)}else{var g=yn(n.getCurrentStatesStyle()),v=n.getModel(),y=(0,x.mix)({},v.style,yn(n.getOriginStyle())),b=a.get("name"),w=a.attr(),_={};Object.keys(w).forEach((function(t){if("img"!==t){var e=w[t];e&&"object"===Ou(e)?_[t]=(0,x.clone)(e):_[t]=e}}));var S={},E=function(t){var e=h[t];if((0,x.isPlainObject)(e)&&!zu.includes(t)){var n=d.shapeMap[t]||d.find((function(e){return e.get("name")===t}));if(n){var r=yn(n.attr());(0,x.each)(e,(function(e,i){if(t===b&&_[i]&&!f[i]){delete _[i];var o=y[t][i]||Bu[s][i];a.attr(i,o)}else if(r[i]||0===r[i]){delete r[i];var u=y[t][i]||Bu[s][i];n.attr(i,u)}})),S[t]=r}}else if(_[t]&&!f[t]){delete _[t];var i=y[t]||(y[b]?y[b][t]:void 0)||Bu[s][t];a.attr(t,i)}};for(var A in h)E(A);for(var m in b?S[b]=_:(0,x.mix)(S,_),g)if(!f[m]){var M=g[m];(0,x.isPlainObject)(M)&&!zu.includes(m)||(b?((0,x.mix)(y[b],((i={})[m]=M,i)),delete y[m]):(0,x.mix)(y,((r={})[m]=M,r)),delete g[m])}var C={};(0,x.deepMix)(C,y,S,g);var T=!1,k=function(t){var e,n,r=C[t];if((0,x.isPlainObject)(r)&&!zu.includes(t)){var i=d.shapeMap[t]||d.find((function(e){return e.get("name")===t}));i&&(("text"===i.get("type")||i.get("labelRelated"))&&(delete r.x,delete r.y,delete r.matrix),t===b&&("combo"===s&&(delete r.r,delete r.width,delete r.height),T=!0),i.attr(r))}else if(!T){var o=r||Bu[s][t];"combo"===s?b||a.attr(((e={})[t]=o,e)):a.attr(((n={})[t]=o,n))}};for(var I in C)k(I)}}}},getStateStyle:function(t,e){var n=e.getModel(),r=e.getType(),i=this.getOptions(n),o=i.stateStyles,a=i.style,s=void 0===a?{}:a,u=n.stateStyles?n.stateStyles[t]:o&&o[t];return"combo"===r?(0,x.clone)(u):(0,x.mix)({},s,u)},getControlPoints:function(t){return t.controlPoints},getAnchorPoints:function(t){var e,n;return(null==t?void 0:t.anchorPoints)||(null===(e=this.getCustomConfig(t))||void 0===e?void 0:e.anchorPoints)||(null===(n=this.options)||void 0===n?void 0:n.anchorPoints)}},Vu={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:Ke.nodeLabel.offset,getSize:function(t){var e,n=(null===(e=this.mergeStyle)||void 0===e?void 0:e.size)||t.size||this.getOptions({}).size||Ke.defaultNode.size;return(0,x.isArray)(n)&&1===n.length&&(n=[n[0],n[0]]),(0,x.isArray)(n)||(n=[n,n]),n},getLabelStyleByPosition:function(t,e){var n=e.maxLength,r=t.label;n&&(r=fn(r,n));var i=e.position||this.labelPosition;if("center"===i)return{x:0,y:0,text:r,textBaseline:"middle",textAlign:"center"};var o=e.offset;(0,x.isNil)(o)&&(o=this.offset);var a,s=this.getSize(t);switch(i){case"top":a={x:0,y:-s[1]/2-o,textBaseline:"bottom",textAlign:"center"};break;case"bottom":a={x:0,y:s[1]/2+o,textBaseline:"top",textAlign:"center"};break;case"left":a={x:-s[0]/2-o,y:0,textBaseline:"middle",textAlign:"right"};break;default:a={x:s[0]/2+o,y:0,textBaseline:"middle",textAlign:"left"}}return a.text=r,a},getLabelBgStyleByPosition:function(t,e){var n;if(!t)return{};var r=null===(n=e.style)||void 0===n?void 0:n.background;if(!r)return{};var i=t.getBBox(),o=hs(r.padding),a=i.width+o[1]+o[3],s=i.height+o[0]+o[2];return(0,b.__assign)((0,b.__assign)({x:i.minX-o[3],y:i.minY-o[0]},r),{width:a,height:s})},drawShape:function(t,e){var n=this.shapeType,r=this.getShapeStyle(t),i=e.addShape(n,{attrs:r,draggable:!0,name:"node-shape"});return e.shapeMap["node-shape"]=i,i},updateLinkPoints:function(t,e){var n,r=(this.mergeStyle||this.getOptions(t)).linkPoints,i=e.shapeMap["link-point-left"]||e.find((function(t){return"link-point-left"===t.get("className")})),o=e.shapeMap["link-point-right"]||e.find((function(t){return"link-point-right"===t.get("className")})),a=e.shapeMap["link-point-top"]||e.find((function(t){return"link-point-top"===t.get("className")})),s=e.shapeMap["link-point-bottom"]||e.find((function(t){return"link-point-bottom"===t.get("className")}));i&&(n=i.attr()),o&&!n&&(n=o.attr()),a&&!n&&(n=a.attr()),s&&!n&&(n=s.attr()),n||(n=r);var u=(0,x.mix)({},n,t.linkPoints),l=u.fill,c=u.stroke,h=u.lineWidth,d=u.size/2;d||(d=u.r);var f=t.linkPoints?t.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},p=f.left,m=f.right,g=f.top,v=f.bottom,y=this.getSize(t),w=y[0],_=y[1],S={r:d,fill:l,stroke:c,lineWidth:h};if(i)p||void 0===p?i.attr((0,b.__assign)((0,b.__assign)({},S),{x:-w/2,y:0})):(i.remove(),delete e.shapeMap["link-point-left"]);else if(p){var E="link-point-left";e.shapeMap[E]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},S),{x:-w/2,y:0}),className:E,name:E,isAnchorPoint:!0})}if(o)m||void 0===m||(o.remove(),delete e.shapeMap["link-point-right"]),o.attr((0,b.__assign)((0,b.__assign)({},S),{x:w/2,y:0}));else if(m){var A="link-point-right";e.shapeMap[A]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},S),{x:w/2,y:0}),className:A,name:A,isAnchorPoint:!0})}if(a)g||void 0===g||(a.remove(),delete e.shapeMap["link-point-top"]),a.attr((0,b.__assign)((0,b.__assign)({},S),{x:0,y:-_/2}));else if(g){var M="link-point-top";e.shapeMap[M]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},S),{x:0,y:-_/2}),className:M,name:M,isAnchorPoint:!0})}if(s)v||void 0===v?s.attr((0,b.__assign)((0,b.__assign)({},S),{x:0,y:_/2})):(s.remove(),delete e.shapeMap["link-point-bottom"]);else if(v){var C="link-point-bottom";e.shapeMap[C]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},S),{x:0,y:_/2}),className:C,name:C,isAnchorPoint:!0})}},updateShape:function(t,e,n,r,i){e.get("keyShape").attr((0,b.__assign)({},n)),this.updateLabel(t,e,i),r&&this.updateIcon(t,e)},updateIcon:function(t,e){var n=this,r=e.getContainer(),i=(this.mergeStyle||this.getOptions(t)).icon,o=t.icon?t.icon:{show:void 0,text:void 0},a=o.show,s=o.text,u=r.shapeMap["".concat(this.type,"-icon")]||r.find((function(t){return t.get("name")==="".concat(n.type,"-icon")}));if(u)if(a||void 0===a){var l=(0,x.mix)({},u.attr(),i),c=l.width,h=void 0===c?20:c,d=l.height,f=void 0===d?20:d;("iconfont"===l.fontFamily||l.hasOwnProperty("text"))&&(h=0,f=0),u.attr((0,b.__assign)((0,b.__assign)({},l),{x:-h/2,y:-f/2}))}else u.remove(),delete r.shapeMap["".concat(this.type,"-icon")];else if(a){var p="".concat(this.type,"-icon");if(s)r.shapeMap[p]=r.addShape("text",{attrs:(0,b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:p,name:p});else{h=i.width,f=i.height;r.shapeMap[p]=r.addShape("image",{attrs:(0,b.__assign)((0,b.__assign)({},i),{x:-h/2,y:-f/2}),className:p,name:p})}var m=r.shapeMap["node-label"]||r.find((function(t){return"node-label"===t.get("name")}));m&&m.toFront()}}},Hu=(0,b.__assign)((0,b.__assign)({},ju),Vu);Ps.registerNode("single-node",Hu);var Gu="edge-shape";var Wu={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:Ke.defaultEdge.size,style:{x:0,y:0,stroke:Ke.defaultEdge.style.stroke,lineAppendWidth:Ke.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:Ke.edgeLabel.style.fill,fontSize:Ke.edgeLabel.style.fontSize,fontFamily:Ke.windowFontFamily}},stateStyles:(0,b.__assign)({},Ke.edgeStateStyles)},getPath:function(t){var e=[];return(0,x.each)(t,(function(t,n){0===n?e.push(["M",t.x,t.y]):e.push(["L",t.x,t.y])})),e},getShapeStyle:function(t){var e=this.options.style,n={stroke:t.color},r=(0,x.mix)({},e,n,t.style),i=t.size||Ke.defaultEdge.size,o=(t=this.getPathPoints(t)).startPoint,a=t.endPoint,s=this.getControlPoints(t),u=[o];s&&(u=u.concat(s)),u.push(a);var l=this.getPath(u);return(0,x.mix)({},Ke.defaultEdge.style,{stroke:Ke.defaultEdge.color,lineWidth:i,path:l},r)},updateShapeStyle:function(t,e,n){var r,i=e.getContainer(),o=(null===(r=e.getKeyShape)||void 0===r?void 0:r.call(e))||i.shapeMap["edge-shape"],a=t.size,s=(t=this.getPathPoints(t)).startPoint,u=t.endPoint,l=this.getControlPoints(t),c=[s];l&&(c=c.concat(l)),c.push(u);var h=o.attr(),d=t.style||{};void 0===d.stroke&&(d.stroke=t.color);var f=t.sourceNode,p=t.targetNode,m={radius:d.radius};l||(m={source:f,target:p,offset:d.offset,radius:d.radius});var g=this.getPath(c,m),v={};"move"===n?v={path:g}:(h.endArrow&&!1===d.endArrow&&(t.style.endArrow={path:""}),h.startArrow&&!1===d.startArrow&&(t.style.startArrow={path:""}),void 0===(v=(0,b.__assign)({},t.style)).lineWidth&&(v.lineWidth=((0,x.isNumber)(a)?a:null==a?void 0:a[0])||h.lineWidth),void 0===v.path&&(v.path=g),void 0===v.stroke&&(v.stroke=h.stroke||t.color)),o&&o.attr(v)},getLabelStyleByPosition:function(t,e,n){var r,i=e.position||this.labelPosition,o={},a=null==n?void 0:n.shapeMap[Gu];r="start"===i?0:"end"===i?1:.5;var s,u=e.refX||this.refX,l=e.refY||this.refY;if(t.startPoint.x===t.endPoint.x&&t.startPoint.y===t.endPoint.y)return o.x=t.startPoint.x+u,o.y=t.startPoint.y+l,o.text=t.label,o;s=(0,x.isNil)(e.autoRotate)?this.labelAutoRotate:e.autoRotate;var c=an(a,r,u,l,s);return o.x=c.x,o.y=c.y,o.rotate=c.rotate,o.textAlign=this._getTextAlign(i,c.angle),o.text=t.label,o},getLabelBgStyleByPosition:function(t,e){if(!t)return{};var n=t.getBBox(),r=e.style&&e.style.background;if(!r)return{};var i=r.padding,o=n.width+i[1]+i[3],a=n.height+i[0]+i[2],s=(0,b.__assign)((0,b.__assign)({},r),{width:o,height:a,x:n.minX-i[3],y:n.minY-i[0],matrix:[1,0,0,0,1,0,0,0,1]});return((0,x.isNil)(e.autoRotate)?this.labelAutoRotate:e.autoRotate)&&(s.matrix=t.attr("matrix")||[1,0,0,0,1,0,0,0,1]),s},_getTextAlign:function(t,e){var n="center";return e?(e%=2*Math.PI,"center"!==t&&(n=e>=0&&e<=Math.PI/2||e>=1.5*Math.PI&&e<2*Math.PI?t:function(t){var e=t;return"start"===t?e="end":"end"===t&&(e="start"),e}(t)),n):t},getControlPoints:function(t){return t.controlPoints},getPathPoints:function(t){return t},drawShape:function(t,e){var n=this.getShapeStyle(t),r=e.addShape("path",{className:Gu,name:Gu,attrs:n});return e.shapeMap[Gu]=r,r},drawLabel:function(t,e){var n=this.options.labelCfg,r=(0,x.deepMix)({},n,t.labelCfg),i=this.getLabelStyle(t,r,e),o=i.rotate;delete i.rotate;var a=e.addShape("text",{attrs:i,name:"text-shape",labelRelated:!0,draggable:!0});if(e.shapeMap["text-shape"]=a,isNaN(o)||""===o||a.rotateAtStart(o),i.background){var s=this.drawLabelBg(t,e,a,i,o),u=this.itemType+Uu;s.set("classname",u),e.shapeMap[u]=s,a.toFront()}return a},drawLabelBg:function(t,e,n,r,i){var o=this.options.labelCfg,a=(0,x.deepMix)({},o,t.labelCfg),s=this.getLabelBgStyleByPosition(n,a),u=e.addShape("rect",{name:"text-bg-shape",attrs:s,labelRelated:!0});return e.shapeMap["text-bg-shape"]=u,u}},Xu=(0,b.__assign)((0,b.__assign)({},ju),Wu);Ps.registerEdge("single-edge",Xu),Ps.registerEdge("line",{getControlPoints:function(){}},"single-edge"),Ps.registerEdge("spline",{getPath:function(t){return uu(t)}},"single-edge"),Ps.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(t){var e,n,r=t.startPoint,i=t.endPoint,o=(r.x+i.x)/2,a=(r.y+i.y)/2;if(void 0!==t.controlPoints){if(n=t.controlPoints[0],e=pe(r,n,i),r.x<=i.x&&r.y>i.y?this.clockwise=e.x>n.x?0:1:r.x<=i.x&&r.y<i.y?this.clockwise=e.x>n.x?1:0:r.x>i.x&&r.y<=i.y?this.clockwise=e.y<n.y?0:1:this.clockwise=e.y<n.y?1:0,(n.x-r.x)/(n.y-r.y)==(i.x-r.x)/(i.y-r.y))return[]}else{void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),(0,x.isArray)(t.curveOffset)&&(t.curveOffset=t.curveOffset[0]),t.curveOffset<0?this.clockwise=0:this.clockwise=1;var s={x:i.x-r.x,y:i.y-r.y},u=Math.atan2(s.y,s.x);n={x:t.curveOffset*Math.cos(-Math.PI/2+u)+o,y:t.curveOffset*Math.sin(-Math.PI/2+u)+a},e=pe(r,n,i)}var l=me(r,e);return[{x:l,y:l}]},getPath:function(t){var e=[];return e.push(["M",t[0].x,t[0].y]),2===t.length?e.push(["L",t[1].x,t[1].y]):e.push(["A",t[1].x,t[1].y,0,0,this.clockwise,t[2].x,t[2].y]),e}},"single-edge"),Ps.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(t){var e=t.controlPoints;if(!e||!e.length){var n=t.startPoint,r=t.endPoint;void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),void 0===t.curvePosition&&(t.curvePosition=this.curvePosition),(0,x.isArray)(t.curveOffset)&&(t.curveOffset=t.curveOffset[0]),(0,x.isArray)(t.curvePosition)&&(t.curvePosition=t.curveOffset[0]),e=[lu(n,r,t.curvePosition,t.curveOffset)]}return e},getPath:function(t){var e=[];return e.push(["M",t[0].x,t[0].y]),e.push(["Q",t[1].x,t[1].y,t[2].x,t[2].y]),e}},"single-edge"),Ps.registerEdge("cubic",{curvePosition:[.5,.5],curveOffset:[-20,20],getControlPoints:function(t){var e=t.controlPoints;if(void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),void 0===t.curvePosition&&(t.curvePosition=this.curvePosition),(0,x.isNumber)(t.curveOffset)&&(t.curveOffset=[t.curveOffset,-t.curveOffset]),(0,x.isNumber)(t.curvePosition)&&(t.curvePosition=[t.curvePosition,1-t.curvePosition]),!e||!e.length||e.length<2){var n=t.startPoint,r=t.endPoint;e=[lu(n,r,t.curvePosition[0],t.curveOffset[0]),lu(n,r,t.curvePosition[1],t.curveOffset[1])]}return e},getPath:function(t){var e=[];return e.push(["M",t[0].x,t[0].y]),e.push(["C",t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y]),e}},"single-edge"),Ps.registerEdge("cubic-vertical",{curvePosition:[.5,.5],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(t){var e=t.startPoint,n=t.endPoint;void 0===t.curvePosition&&(t.curvePosition=this.curvePosition),void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),void 0===t.minCurveOffset&&(t.minCurveOffset=this.minCurveOffset),(0,x.isNumber)(t.curveOffset)&&(t.curveOffset=[t.curveOffset,-t.curveOffset]),(0,x.isNumber)(t.minCurveOffset)&&(t.minCurveOffset=[t.minCurveOffset,-t.minCurveOffset]),(0,x.isNumber)(t.curvePosition)&&(t.curvePosition=[t.curvePosition,1-t.curvePosition]);var r=n.y-e.y,i=[0,0];return t.curveOffset?i=t.curveOffset:Math.abs(r)<Math.abs(t.minCurveOffset[0])&&(i=t.minCurveOffset),[{x:e.x,y:e.y+r*this.curvePosition[0]+i[0]},{x:n.x,y:n.y-r*this.curvePosition[1]+i[1]}]}},"cubic"),Ps.registerEdge("cubic-horizontal",{curvePosition:[.5,.5],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(t){var e=t.startPoint,n=t.endPoint;void 0===t.curvePosition&&(t.curvePosition=this.curvePosition),void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),void 0===t.minCurveOffset&&(t.minCurveOffset=this.minCurveOffset),(0,x.isNumber)(t.curveOffset)&&(t.curveOffset=[t.curveOffset,-t.curveOffset]),(0,x.isNumber)(t.minCurveOffset)&&(t.minCurveOffset=[t.minCurveOffset,-t.minCurveOffset]),(0,x.isNumber)(t.curvePosition)&&(t.curvePosition=[t.curvePosition,1-t.curvePosition]);var r=n.x-e.x,i=[0,0];return t.curveOffset?i=t.curveOffset:Math.abs(r)<Math.abs(t.minCurveOffset[0])&&(i=t.minCurveOffset),[{x:e.x+r*this.curvePosition[0]+i[0],y:e.y},{x:n.x-r*this.curvePosition[1]+i[1],y:n.y}]}},"cubic"),Ps.registerEdge("loop",{getPathPoints:function(t){return on(t)},getControlPoints:function(t){return t.controlPoints},afterDraw:function(t){t.controlPoints=void 0},afterUpdate:function(t){t.controlPoints=void 0}},"cubic");var Yu={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:Ke.comboLabel.refX,refY:Ke.comboLabel.refY,options:{style:{stroke:Ke.defaultCombo.style.stroke,fill:Ke.defaultCombo.style.fill,lineWidth:Ke.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Ke.comboLabel.style.fill,fontSize:Ke.comboLabel.style.fontSize,fontFamily:Ke.windowFontFamily}},stateStyles:(0,b.__assign)({},Ke.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},getSize:function(t){var e=(0,x.clone)(t.size||this.options.size||Ke.defaultCombo.size);return(0,x.isArray)(e)&&1===e.length&&(e=[e[0],e[0]]),(0,x.isArray)(e)||(e=[e,e]),e},getLabelStyleByPosition:function(t,e){var n=e.position||this.labelPosition,r=t.style,i=t.padding||this.options.padding;(0,x.isArray)(i)&&(i=Math.max.apply(Math,i));var o=e.refX,a=e.refY;(0,x.isNil)(o)&&(o=this.refX),(0,x.isNil)(a)&&(a=this.refY);var s,u=this.getSize(t),l=(Math.max(r.r,u[0]/2)||u[0]/2)+i;switch(n){case"top":s={x:0,y:-l-a,textBaseline:"bottom",textAlign:"center"};break;case"bottom":s={x:0,y:l+a,textBaseline:"bottom",textAlign:"center"};break;case"left":s={x:-l+o,y:0,textAlign:"left"};break;case"center":s={x:0,y:0,text:t.label,textAlign:"center"};break;default:s={x:l+o,y:0,textAlign:"right"}}return s.text=t.label,s},drawShape:function(t,e){var n=this.shapeType,r=this.getShapeStyle(t);return e.addShape(n,{attrs:r,draggable:!0,name:"combo-shape"})},updateCollapsedIcon:function(t,e,n){var r=t.collapsed,i=t.collapsedSubstituteIcon,o=void 0===i?{}:i,a=Object.assign({},this.options.collapsedSubstituteIcon,o),s=a.show,u=a.img,l=a.width,c=a.height,h=e.getContainer(),d=h.find((function(t){return"combo-collapsed-substitute-icon"===t.get("name")})),f=d&&!d.destroyed,p=e.get("keyShape");if(r&&s){if(f)d.show();else{var m={width:l||2*n.r||n.width,height:c||2*n.r||n.height};d=h.addShape("image",{attrs:(0,b.__assign)({img:u,x:-m.width/2,y:-m.height/2},m),name:"combo-collapsed-substitute-icon",draggable:!0})}p.hide()}else f&&(d.hide(),p.show())},updateShape:function(t,e,n){var r=this,i=e.get("keyShape");e.get("animate")&&(void 0===t.animate?this.options.animate:t.animate)&&i.animate?(t.collapsed||this.updateCollapsedIcon(t,e,n),i.animate(n,{duration:200,easing:"easeLinear",callback:function(){t.collapsed&&r.updateCollapsedIcon(t,e,n)}})):(i.attr((0,b.__assign)({},n)),this.updateCollapsedIcon(t,e,n)),this.updateLabel(t,e)}},qu=(0,b.__assign)((0,b.__assign)({},ju),Yu);Ps.registerCombo("single-combo",qu),Ps.registerCombo("circle",{options:{size:[Ke.defaultCombo.size[0],Ke.defaultCombo.size[0]],padding:Math.max.apply(Math,Ke.defaultCombo.padding),animate:!0,style:{stroke:Ke.defaultCombo.style.stroke,fill:Ke.defaultCombo.style.fill,lineWidth:Ke.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Ke.comboLabel.style.fill,fontSize:Ke.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:(0,b.__assign)({},Ke.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"circle",labelPosition:"top",drawShape:function(t,e){var n=this.getShapeStyle(t);return delete n.height,delete n.width,e.addShape("circle",{attrs:n,className:"circle-combo",name:"circle-combo",draggable:!0})},getShapeStyle:function(t){var e=this.options.style,n=t.padding||this.options.padding;(0,x.isArray)(n)&&(n=Math.max.apply(Math,n));var r,i={stroke:t.color},o=(0,x.mix)({},e,i,t.style),a=t.collapsed&&t.fixCollapseSize?t.fixCollapseSize:t.fixSize;if(a)r=(0,x.isNumber)(a)?a/2:a[0]/2;else{var s=this.getSize(t);r=!(0,x.isNumber)(o.r)||isNaN(o.r)?s[0]/2||Ke.defaultCombo.style.r:Math.max(o.r,s[0]/2)||s[0]/2}o.r=r+n;var u=(0,b.__assign)({x:0,y:0},o);return t.style?t.style.r=r:t.style={r},u},update:function(t,e){var n=this.getSize(t),r=t.padding||this.options.padding;(0,x.isArray)(r)&&(r=Math.max.apply(Math,r));var i,o=(0,x.clone)(t.style),a=t.collapsed&&t.fixCollapseSize?t.fixCollapseSize:t.fixSize;i=a?(0,x.isNumber)(a)?a/2:a[0]/2:Math.max(o.r,n[0]/2)||n[0]/2,o.r=i+r;var s=e.get("sizeCache");s&&(s.r=o.r);var u={stroke:t.color},l=e.get("keyShape"),c=(0,x.mix)({},l.attr(),u,o);t.style?t.style.r=i:t.style={r:i},this.updateShape(t,e,c,!0)}},"single-combo"),Ps.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:Ke.defaultCombo.style.stroke,fill:Ke.defaultCombo.style.fill,lineWidth:Ke.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Ke.comboLabel.style.fill,fontSize:Ke.comboLabel.style.fontSize,fontFamily:Ke.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,b.__assign)({},Ke.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"rect",labelPosition:"top",drawShape:function(t,e){var n=this.getShapeStyle(t);return e.addShape("rect",{attrs:n,className:"rect-combo",name:"rect-combo",draggable:!0})},getLabelStyleByPosition:function(t,e){var n=e.position||this.labelPosition,r=t.style,i=t.padding||this.options.padding;(0,x.isNumber)(i)&&(i=[i,i,i,i]);var o=e.refX,a=e.refY;(0,x.isNil)(o)&&(o=this.refX),(0,x.isNil)(a)&&(a=this.refY);var s,u=-r.width/2-i[3],l=r.width/2+i[1],c=-r.height/2-i[0],h=r.height/2+i[2];switch(n){case"top":s={x:u+o,y:c+a,textBaseline:"top",textAlign:"left"};break;case"bottom":s={x:0,y:h+a,textBaseline:"top",textAlign:"center"};break;case"left":s={x:u+a,y:0,textAlign:"left"};break;case"center":s={x:0,y:0,text:t.label,textAlign:"center"};break;case"top-center":s={x:0,y:c+a,textBaseline:"top",textAlign:"center"};break;default:s={x:l+o,y:0,textAlign:"right"}}return s.text=t.label,s},getShapeStyle:function(t){var e=this.options.style,n=t.padding||this.options.padding;(0,x.isNumber)(n)&&(n=[n,n,n,n]);var r,i,o={stroke:t.color},a=(0,x.mix)({},e,o,t.style),s=this.getSize(t),u=t.collapsed&&t.fixCollapseSize?t.fixCollapseSize:t.fixSize;u?(0,x.isNumber)(u)?(r=u,i=u):(r=u[0],i=u[1]):(r=!(0,x.isNumber)(a.width)||isNaN(a.width)?s[0]||Ke.defaultCombo.style.width:Math.max(a.width,s[0])||s[0],i=!(0,x.isNumber)(a.height)||isNaN(a.height)?s[1]||Ke.defaultCombo.style.height:Math.max(a.height,s[1])||s[1]);var l=-r/2-n[3],c=-i/2-n[0];a.width=r+n[1]+n[3],a.height=i+n[0]+n[2];var h=(0,b.__assign)({x:l,y:c},a);return t.style?(t.style.width=r,t.style.height=i):t.style={width:r,height:i},h},update:function(t,e){var n=this.getSize(t),r=t.padding||this.options.padding;(0,x.isNumber)(r)&&(r=[r,r,r,r]);var i,o,a=(0,x.clone)(t.style),s=t.collapsed&&t.fixCollapseSize?t.fixCollapseSize:t.fixSize;s?(0,x.isNumber)(s)?(i=s,o=s):(i=s[0],o=s[1]):(i=Math.max(a.width,n[0])||n[0],o=Math.max(a.height,n[1])||n[1]),a.width=i+r[1]+r[3],a.height=o+r[0]+r[2];var u=e.get("sizeCache");u&&(u.width=a.width,u.height=a.height),a.x=-i/2-r[3],a.y=-o/2-r[0];var l={stroke:t.color},c=e.get("keyShape"),h=(0,x.mix)({},c.attr(),l,a);t.style?(t.style.width=i,t.style.height=o):t.style={width:i,height:o},this.updateShape(t,e,h,!1)}},"single-combo"),Ps.registerNode("simple-circle",{options:{size:Ke.defaultNode.size,style:{x:0,y:0,stroke:Ke.defaultNode.style.stroke,fill:Ke.defaultNode.style.fill,lineWidth:Ke.defaultNode.style.lineWidth},labelCfg:{style:{fill:Ke.nodeLabel.style.fill,fontSize:Ke.nodeLabel.style.fontSize,fontFamily:Ke.windowFontFamily}},stateStyles:(0,b.__assign)({},Ke.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",shapeMap:{},drawShape:function(t,e){var n=this.getShapeStyle(t),r="".concat(this.type,"-keyShape"),i=e.addShape("circle",{attrs:n,className:"".concat(this.type,"-keyShape"),name:r,draggable:!0});return e.shapeMap[r]=i,i},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},r=(0,x.deepMix)({},e,n),i=this.getSize(t)[0]/2;return(0,b.__assign)({x:0,y:0,r:i},r)},update:function(t,e,n){var r=this.getSize(t),i={stroke:t.color,r:r[0]/2},o=e.get("keyShape"),a=(0,x.deepMix)({},o.attr(),i,t.style);this.updateShape(t,e,a,!0,n)}},"single-node"),Ps.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:Ke.defaultNode.style.stroke,fill:Ke.defaultNode.style.fill,lineWidth:Ke.defaultNode.style.lineWidth},labelCfg:{style:{fill:Ke.nodeLabel.style.fill,fontSize:Ke.nodeLabel.style.fontSize,fontFamily:Ke.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,b.__assign)({},Ke.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(t,e){var n=this.getShapeStyle(t);return e.addShape("rect",{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0})},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},r=(0,x.mix)({},e,n),i=this.getSize(t),o=r.width||i[0],a=r.height||i[1];return(0,b.__assign)({x:-o/2,y:-a/2,width:o,height:a},r)},update:function(t,e,n){e.getContainer();var r=(this.mergeStyle||this.getOptions(t)).style,i=this.getSize(t),o=e.get("keyShape");t.size||(i[0]=o.attr("width")||r.width,i[1]=o.attr("height")||r.height);var a={stroke:t.color,x:-i[0]/2,y:-i[1]/2,width:i[0],height:i[1]},s=(0,x.mix)({},r,o.attr(),a);s=(0,x.mix)(s,t.style),this.updateShape(t,e,s,!1,n)}},"single-node"),Ps.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,labelCfg:{style:{fontFamily:Ke.windowFontFamily}},clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(t,e){var n=this.shapeType,r=this.getShapeStyle(t);delete r.fill;var i=e.addShape(n,{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return this.drawClip(t,i),i},drawClip:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).clipCfg;if(n.show){var r=n.type,i=n.x,o=n.y,a=n.style;if("circle"===r){var s=n.r;e.setClip({type:"circle",attrs:(0,b.__assign)({r:s,x:i,y:o},a)})}else if("rect"===r){var u=n.width,l=n.height,c=i-u/2,h=o-l/2;e.setClip({type:"rect",attrs:(0,b.__assign)({x:c,y:h,width:u,height:l},a)})}else if("ellipse"===r){var d=n.rx,f=n.ry;e.setClip({type:"ellipse",attrs:(0,b.__assign)({x:i,y:o,rx:d,ry:f},a)})}else if("polygon"===r){var p=n.points;e.setClip({type:"polygon",attrs:(0,b.__assign)({points:p},a)})}else if("path"===r){var m=n.path;e.setClip({type:"path",attrs:(0,b.__assign)({path:m},a)})}}},getShapeStyle:function(t){var e=this.mergeStyle||this.getOptions(t),n=e.style,r=e.img,i=this.getSize(t),o=i[0],a=i[1];return n&&(o=n.width||i[0],a=n.height||i[1]),(0,b.__assign)({x:-o/2,y:-a/2,width:o,height:a,img:r},n)},updateShapeStyle:function(t,e){var n=e.getContainer(),r="".concat(this.itemType,"-shape"),i=n.shapeMap[r]||n.find((function(t){return t.get("className")===r}))||e.getKeyShape(),o=this.getShapeStyle(t);i&&!i.destroyed&&i.attr(o)}},"single-node");const $u={triangle:function(t,e,n){void 0===t&&(t=10),void 0===e&&(e=15),void 0===n&&(n=0);var r=2*n;return"M ".concat(r,",0 L ").concat(r+e,",-").concat(t/2," L ").concat(r+e,",").concat(t/2," Z")},vee:function(t,e,n){void 0===t&&(t=15),void 0===e&&(e=20),void 0===n&&(n=0);var r=2*n;return"M ".concat(r,",0 L ").concat(r+e,",-").concat(t/2,"\n        L ").concat(r+2*e/3,",0 L ").concat(r+e,",").concat(t/2," Z")},circle:function(t,e){return void 0===t&&(t=5),void 0===e&&(e=0),"M ".concat(2*e,", 0\n            a ").concat(t,",").concat(t," 0 1,0 ").concat(2*t,",0\n            a ").concat(t,",").concat(t," 0 1,0 ").concat(2*-t,",0")},rect:function(t,e,n){void 0===t&&(t=10),void 0===e&&(e=10),void 0===n&&(n=0);var r=2*n;return"M ".concat(r,",").concat(-t/2," \n        L ").concat(r+e,",").concat(-t/2," \n        L ").concat(r+e,",").concat(t/2," \n        L ").concat(r,",").concat(t/2," Z")},diamond:function(t,e,n){void 0===t&&(t=15),void 0===e&&(e=15),void 0===n&&(n=0);var r=2*n;return"M ".concat(r,",0 \n        L ").concat(r+e/2,",").concat(-t/2," \n        L ").concat(r+e,",0 \n        L ").concat(r+e/2,",").concat(t/2," Z")},triangleRect:function(t,e,n,r,i,o){void 0===t&&(t=15),void 0===e&&(e=15),void 0===n&&(n=15),void 0===r&&(r=3),void 0===i&&(i=5),void 0===o&&(o=0);var a=2*o,s=a+e+i;return"M ".concat(a,",0 L ").concat(a+e,",-").concat(t/2," L ").concat(a+e,",").concat(t/2," Z\n            M ").concat(s,", -").concat(n/2,"\n            L ").concat(s+r," -").concat(n/2,"\n            L ").concat(s+r," ").concat(n/2,"\n            L ").concat(s," ").concat(n/2,"\n            Z")}},Ku={collapse:function(t,e,n){return[["M",t-n,e],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0],["M",t-n+4,e],["L",t+n-4,e]]},expand:function(t,e,n){return[["M",t-n,e],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0],["M",t-n+4,e],["L",t-n+2*n-4,e],["M",t-n+n,e-n+4],["L",t,e+n-4]]},upTriangle:function(t,e,n){var r=n*Math.cos(Math.PI/6),i=n*Math.sin(Math.PI/6);return[["M",t-r,e+i],["L",t+r,e+i],["L",t,e-n],["Z"]]},downTriangle:function(t,e,n){var r=n*Math.cos(Math.PI/6),i=n*Math.sin(Math.PI/6);return[["M",t-r,e-i],["L",t+r,e-i],["L",t,e+n],["Z"]]}},Zu=Ps;var Qu=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"],Ju=function(t){return"force"===t||"g6force"===t||"gForce"===t||"force2"===t},tl=N;const el=(0,b.__assign)((0,b.__assign)((0,b.__assign)((0,b.__assign)((0,b.__assign)((0,b.__assign)((0,b.__assign)({},u),o),l),i),c),h),{transform:tl,mat3:C});var nl=function(){function t(t){this.graph=t,this.layoutCfg=t.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}return t.prototype.initLayout=function(){},t.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},t.prototype.getLayoutCfgType=function(t){var e=t.type;if(e)return e;var n=t.pipes;return Array.isArray(n)?n.map((function(t){return(null==t?void 0:t.type)||""})):null},t.prototype.isLayoutTypeSame=function(t){var e=this.getLayoutCfgType(t),n=Array.isArray(this.layoutType),r=Array.isArray(e);return n&&r?this.layoutType.every((function(t,n){return t===e[n]})):!Array.isArray(e)&&!Array.isArray(this.layoutType)&&(null==t?void 0:t.type)===this.layoutType},t.prototype.refreshLayout=function(){var t=this,e=t.graph,n=t.layoutType,r=t.layoutCfg;if(e){var i=(void 0===r?{}:r).animate,o=void 0===i&&("force"===n||"force2"===n),a=Ju(n)&&(i||o);e.get("animate")&&!a?e.positionsAnimate("comboCombined"===n):e.refreshPositions("comboCombined"===n)}},t.prototype.changeLayout=function(t){var e=t.disableTriggerLayout,n=(0,b.__rest)(t,["disableTriggerLayout"]);this.layoutCfg=n,this.layoutType=n.type||this.layoutType,e||this.layout()},t.prototype.changeData=function(t){this.layout(t)},t.prototype.destoryLayoutMethods=function(){var t=this.layoutMethods,e=[];return null==t||t.forEach((function(t){var n,r=null===(n=t.getType)||void 0===n?void 0:n.call(t);r&&e.push(r),t.destroy()})),this.layoutMethods=[],e},t.prototype.destroyLayout=function(){this.destoryLayoutMethods();var t=this.graph;t&&!t.get("destroyed")&&t.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},t.prototype.setDataFromGraph=function(){for(var t,e=[],n=[],r=[],i=[],o=[],a=[],s=[],u=this.graph.getNodes(),l=this.graph.getEdges(),c=this.graph.getCombos(),h=u.length,d=0;d<h;d++){var f=u[d];if(f&&!f.destroyed){var p=f.getModel();f.isVisible()?e.push(p):n.push(p)}}var m=l.length;for(d=0;d<m;d++){var g=l[d];if(g&&!g.destroyed){p=g.getModel();g.isVisible()?p.isComboEdge?o.push(p):r.push(p):i.push(p)}}var v=c.length;for(d=0;d<v;d++){var y=c[d];if(!y.destroyed){p=y.getModel();y.isVisible()?a.push(p):s.push(p)}}return{nodes:e,hiddenNodes:n,edges:r,hiddenEdges:i,combos:a,hiddenCombos:s,comboEdges:o,vedges:null===(t=this.graph.get("vedges"))||void 0===t?void 0:t.map((function(t){return t.getModel()}))}},t.prototype.relayout=function(t){var e=this,n=this,r=n.graph,i=n.layoutMethods,o=n.layoutCfg;if(r&&!r.get("destroyed")){var a=Promise.resolve();if(t){this.data=this.setDataFromGraph();var s=this.data.nodes;if(!s)return!1;a=this.initPositions(o.center,s)}r.emit("beforelayout"),null==i||i.forEach((function(t,n){var r=o[n]||o;a=a.then((function(){var t,a=e.execLayoutMethod(r,n);return n===i.length-1&&(null===(t=o.onAllLayoutEnd)||void 0===t||t.call(o)),a}))}))}},t.prototype.filterLayoutData=function(t,e){var n,r,i=t.nodes,o=t.edges,a=(0,b.__rest)(t,["nodes","edges"]);if(!i)return t;n=(0,x.isFunction)(null==e?void 0:e.nodesFilter)?e.nodesFilter:function(){return!0};var s=i.filter(n);if((0,x.isFunction)(null==e?void 0:e.edgesFilter))r=e.edgesFilter;else{var u=s.reduce((function(t,e){return t[e.id]=!0,t}),{});r=function(t){return u[t.source]&&u[t.target]}}return(0,b.__assign)({nodes:s,edges:o.filter(r)},a)},t.prototype.getLayoutBBox=function(t){var e=this.graph,n=(0,x.groupBy)(e.getNodes(),(function(t){return t.getModel().layoutOrder})),r=Object.values(n).map((function(t){var e=ms(t);return e.size=[e.width,e.height],e}));return{groupNodes:Object.values((0,x.groupBy)(t,"layoutOrder")),layoutNodes:r}},t.prototype.layoutAnimate=function(){},t.prototype.moveToZero=function(){var t=this.graph.get("data").nodes;if(void 0!==t[0].x&&null!==t[0].x&&!ps(t[0].x)){for(var e=[0,0],n=t.length,r=0;r<n;r++){var i=t[r];e[0]+=i.x,e[1]+=i.y}e[0]/=t.length,e[1]/=t.length;for(r=0;r<n;r++){(i=t[r]).x-=e[0],i.y-=e[1]}}},t.prototype.initPositions=function(t,e){var n;return(0,b.__awaiter)(this,void 0,void 0,(function(){var r,i,o;return(0,b.__generator)(this,(function(a){return r=this.graph,(null==e?void 0:e.length)?(i=e.filter((function(t){return ps(t.x)||ps(t.y)})),(o=i?i.length:0)?[2,null===(n=this.initWithPreset)||void 0===n?void 0:n.call(this,(function(){}),(function(){var e=.85*r.get("width"),n=.85*r.get("height"),a=Math.ceil(Math.sqrt(o)*(e/n)),s=e/(a-1),u=n/(Math.ceil(o/a)-1);isFinite(s)&&s||(s=0),isFinite(u)&&s||(u=0);for(var l=t[0]-e/2,c=t[1]-n/2,h=0;h<o;h++){var d=i[h];ps(+d.x)&&(!1,d.x=h%a*s+l),ps(+d.y)&&(!1,d.y=Math.floor(h/a)*u+c)}}))]:[2]):[2,Promise.resolve()]}))}))},t.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},t}();const rl=nl;var il=function(t){this.graph=t,this.destroyed=!1,this.initEvents()};const ol=il;var al=Zu.registerNode,sl=Zu.registerEdge,ul=Zu.registerCombo,ll=E.registerBehavior,cl=Ke;Zu.registerNode,Zu.registerEdge,Zu.registerCombo,E.registerBehavior;var hl=n(87302);function dl(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}function fl(t,e,n,r,i,o){return i>=t&&i<=t+n&&o>=e&&o<=e+r}function pl(t,e){return!(e.minX>t.maxX||e.maxX<t.minX||e.minY>t.maxY||e.maxY<t.minY)}function ml(t,e){return t[0]===e[0]&&t[1]===e[1]}var gl=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,vl=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,yl=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,bl=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function xl(t,e){var n=t.match(bl);(0,x.each)(n,(function(t){var n=t.split(":");e.addColorStop(n[0],n[1])}))}function wl(t,e,n){var r=e.getBBox();if(isNaN(r.x)||isNaN(r.y)||isNaN(r.width)||isNaN(r.height))return n;if((0,x.isString)(n)){if("("===n[1]||"("===n[2]){if("l"===n[0])return function(t,e,n){var r,i,o=gl.exec(n),a=parseFloat(o[1])%360*(Math.PI/180),s=o[2],u=e.getBBox();a>=0&&a<.5*Math.PI?(r={x:u.minX,y:u.minY},i={x:u.maxX,y:u.maxY}):.5*Math.PI<=a&&a<Math.PI?(r={x:u.maxX,y:u.minY},i={x:u.minX,y:u.maxY}):Math.PI<=a&&a<1.5*Math.PI?(r={x:u.maxX,y:u.maxY},i={x:u.minX,y:u.minY}):(r={x:u.minX,y:u.maxY},i={x:u.maxX,y:u.minY});var l=Math.tan(a),c=l*l,h=(i.x-r.x+l*(i.y-r.y))/(c+1)+r.x,d=l*(i.x-r.x+l*(i.y-r.y))/(c+1)+r.y,f=t.createLinearGradient(r.x,r.y,h,d);return xl(s,f),f}(t,e,n);if("r"===n[0])return function(t,e,n){var r=vl.exec(n),i=parseFloat(r[1]),o=parseFloat(r[2]),a=parseFloat(r[3]),s=r[4];if(0===a){var u=s.match(bl);return u[u.length-1].split(":")[1]}var l=e.getBBox(),c=l.maxX-l.minX,h=l.maxY-l.minY,d=Math.sqrt(c*c+h*h)/2,f=t.createRadialGradient(l.minX+c*i,l.minY+h*o,0,l.minX+c/2,l.minY+h/2,a*d);return xl(s,f),f}(t,e,n);if("p"===n[0])return function(t,e,n){if(e.get("patternSource")&&e.get("patternSource")===n)return e.get("pattern");var r,i,o=yl.exec(n),a=o[1],s=o[2];function u(){r=t.createPattern(i,a),e.set("pattern",r),e.set("patternSource",n)}switch(a){case"a":a="repeat";break;case"x":a="repeat-x";break;case"y":a="repeat-y";break;default:a="no-repeat"}return i=new Image,s.match(/^data:/i)||(i.crossOrigin="Anonymous"),i.src=s,i.complete?u():(i.onload=u,i.src=i.src),r}(t,e,n)}return n}return n instanceof CanvasPattern?n:void 0}function _l(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Sl(t,e){return _l(t)*_l(e)?(t[0]*e[0]+t[1]*e[1])/(_l(t)*_l(e)):1}function El(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(Sl(t,e))}function Al(t,e){var n=e[1],r=e[2],i=(0,x.mod)((0,x.toRadian)(e[3]),2*Math.PI),o=e[4],a=e[5],s=t[0],u=t[1],l=e[6],c=e[7],h=Math.cos(i)*(s-l)/2+Math.sin(i)*(u-c)/2,d=-1*Math.sin(i)*(s-l)/2+Math.cos(i)*(u-c)/2,f=h*h/(n*n)+d*d/(r*r);f>1&&(n*=Math.sqrt(f),r*=Math.sqrt(f));var p=n*n*(d*d)+r*r*(h*h),m=p?Math.sqrt((n*n*(r*r)-p)/p):1;o===a&&(m*=-1),isNaN(m)&&(m=0);var g=r?m*n*d/r:0,v=n?m*-r*h/n:0,y=(s+l)/2+Math.cos(i)*g-Math.sin(i)*v,b=(u+c)/2+Math.sin(i)*g+Math.cos(i)*v,w=[(h-g)/n,(d-v)/r],_=[(-1*h-g)/n,(-1*d-v)/r],S=El([1,0],w),E=El(w,_);return Sl(w,_)<=-1&&(E=Math.PI),Sl(w,_)>=1&&(E=0),0===a&&E>0&&(E-=2*Math.PI),1===a&&E<0&&(E+=2*Math.PI),{cx:y,cy:b,rx:ml(t,[l,c])?0:n,ry:ml(t,[l,c])?0:r,startAngle:S,endAngle:S+E,xRotation:i,arcFlag:o,sweepFlag:a}}var Ml=Math.sin,Cl=Math.cos,Tl=Math.atan2,kl=Math.PI;function Il(t,e,n,r,i,o,a){var s=e.stroke,u=e.lineWidth,l=Tl(r-o,n-i),c=new yc({type:"path",canvas:t.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*Cl(kl/6)+","+10*Ml(kl/6)+" L0,0 L"+10*Cl(kl/6)+",-"+10*Ml(kl/6),stroke:s,lineWidth:u}});c.translate(i,o),c.rotateAtPoint(i,o,l),t.set(a?"startArrowShape":"endArrowShape",c)}function Nl(t,e,n,r,i,o,a){var s=e.startArrow,u=e.endArrow,l=e.stroke,c=e.lineWidth,h=a?s:u,d=h.d,f=h.fill,p=h.stroke,m=h.lineWidth,g=(0,b.__rest)(h,["d","fill","stroke","lineWidth"]),v=Tl(r-o,n-i);d&&(i-=Cl(v)*d,o-=Ml(v)*d);var y=new yc({type:"path",canvas:t.get("canvas"),isArrowShape:!0,attrs:(0,b.__assign)((0,b.__assign)({},g),{stroke:p||l,lineWidth:m||c,fill:f})});y.translate(i,o),y.rotateAtPoint(i,o,v),t.set(a?"startArrowShape":"endArrowShape",y)}function Pl(t,e,n,r,i){var o=Tl(r-e,n-t);return{dx:Cl(o)*i,dy:Ml(o)*i}}function Ol(t,e,n,r,i,o){"object"==typeof e.startArrow?Nl(t,e,n,r,i,o,!0):e.startArrow?Il(t,e,n,r,i,o,!0):t.set("startArrowShape",null)}function Ll(t,e,n,r,i,o){"object"==typeof e.endArrow?Nl(t,e,n,r,i,o,!1):e.endArrow?Il(t,e,n,r,i,o,!1):t.set("startArrowShape",null)}var Rl={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function Dl(t,e){var n=e.attr();for(var r in n){var i=n[r],o=Rl[r]?Rl[r]:r;"matrix"===o&&i?t.transform(i[0],i[1],i[3],i[4],i[6],i[7]):"lineDash"===o&&t.setLineDash?(0,x.isArray)(i)&&t.setLineDash(i):("strokeStyle"===o||"fillStyle"===o?i=wl(t,e,i):"globalAlpha"===o&&(i*=t.globalAlpha),t[o]=i)}}function zl(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];i.cfg.visible?i.draw(t,n):i.skipDraw()}}function Fl(t,e,n){var r=t.get("refreshElements");(0,x.each)(r,(function(e){if(e!==t)for(var n=e.cfg.parent;n&&n!==t&&!n.cfg.refresh;)n.cfg.refresh=!0,n=n.cfg.parent})),r[0]===t?jl(e,n):Bl(e,n)}function Bl(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.cfg.visible)if(r.cfg.hasChanged)r.cfg.refresh=!0,r.isGroup()&&jl(r.cfg.children,e);else if(r.cfg.refresh)r.isGroup()&&Bl(r.cfg.children,e);else{var i=Vl(r,e);r.cfg.refresh=i,i&&r.isGroup()&&Bl(r.cfg.children,e)}}}function Ul(t){for(var e=0;e<t.length;e++){var n=t[e];n.cfg.hasChanged=!1,n.isGroup()&&!n.destroyed&&Ul(n.cfg.children)}}function jl(t,e){for(var n=0;n<t.length;n++){var r=t[n];r.cfg.visible&&(r.cfg.refresh=!0,r.isGroup()&&jl(r.get("children"),e))}}function Vl(t,e){var n=t.cfg.cacheCanvasBBox;return t.cfg.isInView&&n&&pl(n,e)}function Hl(t,e,n,r){var i=n.path,o=n.startArrow,a=n.endArrow;if(i){var s=[0,0],u=[0,0],l={dx:0,dy:0};e.beginPath();for(var c=0;c<i.length;c++){var h=i[c],d=h[0];if(0===c&&o&&o.d)l=Pl((f=t.getStartTangent())[0][0],f[0][1],f[1][0],f[1][1],o.d);else if(c===i.length-2&&"Z"===i[c+1][0]&&a&&a.d){if("Z"===i[c+1][0])l=Pl((f=t.getEndTangent())[0][0],f[0][1],f[1][0],f[1][1],a.d)}else if(c===i.length-1&&a&&a.d){var f;if("Z"!==i[0])l=Pl((f=t.getEndTangent())[0][0],f[0][1],f[1][0],f[1][1],a.d)}var p=l.dx,m=l.dy;switch(d){case"M":e.moveTo(h[1]-p,h[2]-m),u=[h[1],h[2]];break;case"L":e.lineTo(h[1]-p,h[2]-m);break;case"Q":e.quadraticCurveTo(h[1],h[2],h[3]-p,h[4]-m);break;case"C":e.bezierCurveTo(h[1],h[2],h[3],h[4],h[5]-p,h[6]-m);break;case"A":var g=void 0;r?(g=r[c])||(g=Al(s,h),r[c]=g):g=Al(s,h);var v=g.cx,y=g.cy,b=g.rx,x=g.ry,w=g.startAngle,_=g.endAngle,S=g.xRotation,E=g.sweepFlag;if(e.ellipse)e.ellipse(v,y,b,x,S,w,_,1-E);else{var A=b>x?b:x,M=b>x?1:b/x,C=b>x?x/b:1;e.translate(v,y),e.rotate(S),e.scale(M,C),e.arc(0,0,A,w,_,1-E),e.scale(1/M,1/C),e.rotate(-S),e.translate(-v,-y)}break;case"Z":e.closePath()}if("Z"===d)s=u;else{var T=h.length;s=[h[T-2],h[T-1]]}}}}function Gl(t,e){var n=t.get("canvas");n&&("remove"===e&&(t._cacheCanvasBBox=t.get("cacheCanvasBBox")),t.get("hasChanged")||(t.set("hasChanged",!0),t.cfg.parent&&t.cfg.parent.get("hasChanged")||(n.refreshElement(t,e,n),n.get("autoDraw")&&n.draw())))}function Wl(t){var e,n,r;if(t.destroyed)e=t._cacheCanvasBBox;else{var i=t.get("cacheCanvasBBox"),o=i&&!(!i.width||!i.height),a=t.getCanvasBBox(),s=a&&!(!a.width||!a.height);o&&s?(r=a,e=(n=i)&&r?{minX:Math.min(n.minX,r.minX),minY:Math.min(n.minY,r.minY),maxX:Math.max(n.maxX,r.maxX),maxY:Math.max(n.maxY,r.maxY)}:n||r):o?e=i:s&&(e=a)}return e}var Xl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,b.__extends)(e,t),e.prototype.onCanvasChange=function(t){Gl(this,t)},e.prototype.getShapeBase=function(){return d},e.prototype.getGroupBase=function(){return e},e.prototype._applyClip=function(t,e){e&&(t.save(),Dl(t,e),e.createPath(t),t.restore(),t.clip(),e._afterDraw())},e.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,e=[],n=[];(0,x.each)(t,(function(t){var r=t.cfg.cacheCanvasBBox;r&&t.cfg.isInView&&(e.push(r.minX,r.maxX),n.push(r.minY,r.maxY))}));var r=null;if(e.length){var i=(0,x.min)(e),o=(0,x.max)(e),a=(0,x.min)(n),s=(0,x.max)(n);r={minX:i,minY:a,x:i,y:a,maxX:o,maxY:s,width:o-i,height:s-a};var u=this.cfg.canvas;if(u){var l=u.getViewRange();this.set("isInView",pl(r,l))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",r)},e.prototype.draw=function(t,e){var n=this.cfg.children,r=!e||this.cfg.refresh;n.length&&r&&(t.save(),Dl(t,this),this._applyClip(t,this.getClip()),zl(t,n,e),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},e}(ia);const Yl=Xl;var ql=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,b.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},e),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.getShapeBase=function(){return d},e.prototype.getGroupBase=function(){return Yl},e.prototype.onCanvasChange=function(t){Gl(this,t)},e.prototype.calculateBBox=function(){var t=this.get("type"),e=this.getHitLineWidth(),n=ua(t)(this),r=e/2,i=n.x-r,o=n.y-r,a=n.x+n.width+r,s=n.y+n.height+r;return{x:i,minX:i,y:o,minY:o,width:n.width+e,height:n.height+e,maxX:a,maxY:s}},e.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},e.prototype.isStroke=function(){return!!this.attrs.stroke},e.prototype._applyClip=function(t,e){e&&(t.save(),Dl(t,e),e.createPath(t),t.restore(),t.clip(),e._afterDraw())},e.prototype.draw=function(t,e){var n=this.cfg.clipShape;if(e){if(!1===this.cfg.refresh)return void this.set("hasChanged",!1);if(!pl(e,this.getCanvasBBox()))return this.set("hasChanged",!1),void(this.cfg.isInView&&this._afterDraw())}t.save(),Dl(t,this),this._applyClip(t,n),this.drawPath(t),t.restore(),this._afterDraw()},e.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},e.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var e=this.getCanvasBBox(),n=pl(e,t);this.set("isInView",n),n?this.set("cacheCanvasBBox",e):this.set("cacheCanvasBBox",null)}},e.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},e.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},e.prototype.fill=function(t){t.fill()},e.prototype.stroke=function(t){t.stroke()},e.prototype.strokeAndFill=function(t){var e=this.attrs,n=e.lineWidth,r=e.opacity,i=e.strokeOpacity,o=e.fillOpacity;this.isFill()&&((0,x.isNil)(o)||1===o?this.fill(t):(t.globalAlpha=o,this.fill(t),t.globalAlpha=r)),this.isStroke()&&n>0&&((0,x.isNil)(i)||1===i||(t.globalAlpha=i),this.stroke(t)),this.afterDrawPath(t)},e.prototype.createPath=function(t){},e.prototype.afterDrawPath=function(t){},e.prototype.isInShape=function(t,e){var n=this.isStroke(),r=this.isFill(),i=this.getHitLineWidth();return this.isInStrokeOrPath(t,e,n,r,i)},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){return!1},e.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},e}(oa);const $l=ql;const Kl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,b.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},e),{x:0,y:0,r:0})},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.attr(),a=o.x,s=o.y,u=o.r,l=i/2,c=dl(a,s,t,e);return r&&n?c<=u+l:r?c<=u:!!n&&(c>=u-l&&c<=u+l)},e.prototype.createPath=function(t){var e=this.attr(),n=e.x,r=e.y,i=e.r;t.beginPath(),t.arc(n,r,i,0,2*Math.PI,!1),t.closePath()},e}($l);function Zl(t,e,n,r){return t/(n*n)+e/(r*r)}const Ql=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,b.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},e),{x:0,y:0,rx:0,ry:0})},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.attr(),a=i/2,s=o.x,u=o.y,l=o.rx,c=o.ry,h=(t-s)*(t-s),d=(e-u)*(e-u);return r&&n?Zl(h,d,l+a,c+a)<=1:r?Zl(h,d,l,c)<=1:!!n&&(Zl(h,d,l-a,c-a)>=1&&Zl(h,d,l+a,c+a)<=1)},e.prototype.createPath=function(t){var e=this.attr(),n=e.x,r=e.y,i=e.rx,o=e.ry;if(t.beginPath(),t.ellipse)t.ellipse(n,r,i,o,0,0,2*Math.PI,!1);else{var a=i>o?i:o,s=i>o?1:i/o,u=i>o?o/i:1;t.save(),t.translate(n,r),t.scale(s,u),t.arc(0,0,a,0,2*Math.PI),t.restore(),t.closePath()}},e}($l);function Jl(t){return t instanceof HTMLElement&&(0,x.isString)(t.nodeName)&&"CANVAS"===t.nodeName.toUpperCase()}var tc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,b.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},e),{x:0,y:0,width:0,height:0})},e.prototype.initAttrs=function(t){this._setImage(t.img)},e.prototype.isStroke=function(){return!1},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._afterLoading=function(){if(!0===this.get("toDraw")){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},e.prototype._setImage=function(t){var e=this,n=this.attrs;if((0,x.isString)(t)){var r=new Image;r.onload=function(){if(e.destroyed)return!1;e.attr("img",r),e.set("loading",!1),e._afterLoading();var t=e.get("callback");t&&t.call(e)},r.crossOrigin="Anonymous",r.src=t,this.set("loading",!0)}else t instanceof Image?(n.width||(n.width=t.width),n.height||(n.height=t.height)):Jl(t)&&(n.width||(n.width=Number(t.getAttribute("width"))),n.height||(n.height,Number(t.getAttribute("height"))))},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),"img"===e&&this._setImage(n)},e.prototype.createPath=function(t){if(this.get("loading"))return this.set("toDraw",!0),void this.set("context",t);var e=this.attr(),n=e.x,r=e.y,i=e.width,o=e.height,a=e.sx,s=e.sy,u=e.swidth,l=e.sheight,c=e.img;(c instanceof Image||Jl(c))&&((0,x.isNil)(a)||(0,x.isNil)(s)||(0,x.isNil)(u)||(0,x.isNil)(l)?t.drawImage(c,n,r,i,o):t.drawImage(c,a,s,u,l,n,r,i,o))},e}($l);const ec=tc;function nc(t,e,n,r,i,o,a){var s=Math.min(t,n),u=Math.max(t,n),l=Math.min(e,r),c=Math.max(e,r),h=i/2;return o>=s-h&&o<=u+h&&a>=l-h&&a<=c+h&&ma.pointToLine(t,e,n,r,o,a)<=i/2}var rc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,b.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},e),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),this.setArrow()},e.prototype.setArrow=function(){var t=this.attr(),e=t.x1,n=t.y1,r=t.x2,i=t.y2,o=t.startArrow,a=t.endArrow;o&&Ol(this,t,r,i,e,n),a&&Ll(this,t,e,n,r,i)},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){if(!n||!i)return!1;var o=this.attr();return nc(o.x1,o.y1,o.x2,o.y2,i,t,e)},e.prototype.createPath=function(t){var e=this.attr(),n=e.x1,r=e.y1,i=e.x2,o=e.y2,a=e.startArrow,s=e.endArrow,u={dx:0,dy:0},l={dx:0,dy:0};a&&a.d&&(u=Pl(n,r,i,o,e.startArrow.d)),s&&s.d&&(l=Pl(n,r,i,o,e.endArrow.d)),t.beginPath(),t.moveTo(n+u.dx,r+u.dy),t.lineTo(i-l.dx,o-l.dy)},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr(),e=t.x1,n=t.y1,r=t.x2,i=t.y2;return ma.length(e,n,r,i)},e.prototype.getPoint=function(t){var e=this.attr(),n=e.x1,r=e.y1,i=e.x2,o=e.y2;return ma.pointAt(n,r,i,o,t)},e}($l);const ic=rc;var oc={circle:function(t,e,n){return[["M",t-n,e],["A",n,n,0,1,0,t+n,e],["A",n,n,0,1,0,t-n,e]]},square:function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]},diamond:function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]},triangle:function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["Z"]]},"triangle-down":function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]}},ac=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,b.__extends)(e,t),e.prototype.initAttrs=function(t){this._resetParamsCache()},e.prototype._resetParamsCache=function(){this.set("paramsCache",{})},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),-1!==["symbol","x","y","r","radius"].indexOf(e)&&this._resetParamsCache()},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._getR=function(t){return(0,x.isNil)(t.r)?t.radius:t.r},e.prototype._getPath=function(){var t,n,r=this.attr(),i=r.x,o=r.y,a=r.symbol||"circle",s=this._getR(r);if((0,x.isFunction)(a))n=ts(n=(t=a)(i,o,s));else{if(!(t=e.Symbols[a]))return console.warn(a+" marker is not supported."),null;n=t(i,o,s)}return n},e.prototype.createPath=function(t){Hl(this,t,{path:this._getPath()},this.get("paramsCache"))},e.Symbols=oc,e}($l);const sc=ac;function uc(t,e,n){var r=ja();return t.createPath(r),r.isPointInPath(e,n)}var lc=1e-6;function cc(t){return Math.abs(t)<lc?0:t<0?-1:1}function hc(t,e,n){return(n[0]-t[0])*(e[1]-t[1])==(e[0]-t[0])*(n[1]-t[1])&&Math.min(t[0],e[0])<=n[0]&&n[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=n[1]&&n[1]<=Math.max(t[1],e[1])}function dc(t,e,n){var r=!1,i=t.length;if(i<=2)return!1;for(var o=0;o<i;o++){var a=t[o],s=t[(o+1)%i];if(hc(a,s,[e,n]))return!0;cc(a[1]-n)>0!=cc(s[1]-n)>0&&cc(e-(n-a[1])*(a[0]-s[0])/(a[1]-s[1])-a[0])<0&&(r=!r)}return r}function fc(t,e,n,r,i,o,a,s){var u=(Math.atan2(s-e,a-t)+2*Math.PI)%(2*Math.PI);if(u<r||u>i)return!1;var l={x:t+n*Math.cos(u),y:e+n*Math.sin(u)};return dl(l.x,l.y,a,s)<=o/2}var pc=N;const mc=(0,b.__assign)({hasArc:function(t){for(var e=!1,n=t.length,r=0;r<n;r++){var i=t[r][0];if("C"===i||"A"===i||"Q"===i){e=!0;break}}return e},extractPolygons:function(t){for(var e=t.length,n=[],r=[],i=[],o=0;o<e;o++){var a=t[o],s=a[0];"M"===s?(i.length&&(r.push(i),i=[]),i.push([a[1],a[2]])):"Z"===s?i.length&&(n.push(i),i=[]):i.push([a[1],a[2]])}return i.length>0&&r.push(i),{polygons:n,polylines:r}},isPointInStroke:function(t,e,n,r,i){for(var o=!1,a=e/2,s=0;s<t.length;s++){var u=t[s],l=u.currentPoint,c=u.params,h=u.prePoint,d=u.box;if(!d||fl(d.x-a,d.y-a,d.width+e,d.height+e,n,r)){switch(u.command){case"L":case"Z":o=nc(h[0],h[1],l[0],l[1],e,n,r);break;case"Q":o=_a.pointDistance(h[0],h[1],c[1],c[2],c[3],c[4],n,r)<=e/2;break;case"C":o=Ta.pointDistance(h[0],h[1],c[1],c[2],c[3],c[4],c[5],c[6],n,r,i)<=e/2;break;case"A":var f=u.arcParams,p=f.cx,m=f.cy,g=f.rx,v=f.ry,y=f.startAngle,b=f.endAngle,x=f.xRotation,w=[n,r,1],_=g>v?g:v,S=pc(null,[["t",-p,-m],["r",-x],["s",1/(g>v?1:g/v),1/(g>v?v/g:1)]]);re.transformMat3(w,w,S),o=fc(0,0,_,y,b,e,w[0],w[1])}if(o)break}}return o}},a);function gc(t,e,n){for(var r=!1,i=0;i<t.length;i++){if(r=dc(t[i],e,n))break}return r}var vc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,b.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},e),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),"path"===e&&this._setPathArr(n),this.setArrow()},e.prototype._setPathArr=function(t){this.attrs.path=ts(t);var e=mc.hasArc(t);this.set("hasArc",e),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},e.prototype.getSegments=function(){var t=this.get("segements");return t||(t=ss(this.attr("path")),this.set("segments",t)),t},e.prototype.setArrow=function(){var t,e=this.attr(),n=e.startArrow,r=e.endArrow;n&&Ol(this,e,(t=this.getStartTangent())[0][0],t[0][1],t[1][0],t[1][1]);r&&Ll(this,e,(t=this.getEndTangent())[0][0],t[0][1],t[1][0],t[1][1])},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.getSegments(),a=this.get("hasArc"),s=!1;if(n){var u=this.getTotalLength();s=mc.isPointInStroke(o,i,t,e,u)}if(!s&&r)if(a)s=uc(this,t,e);else{var l=this.attr("path"),c=mc.extractPolygons(l);s=gc(c.polygons,t,e)||gc(c.polylines,t,e)}return s},e.prototype.createPath=function(t){Hl(this,t,this.attr(),this.get("paramsCache"))},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.get("totalLength");return(0,x.isNil)(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},e.prototype.getPoint=function(t){var e,n,r=this.get("tCache");r||(this._calculateCurve(),this._setTcache(),r=this.get("tCache"));var i=this.get("curve");if(!r||0===r.length)return i?{x:i[0][1],y:i[0][2]}:null;(0,x.each)(r,(function(r,i){t>=r[0]&&t<=r[1]&&(e=(t-r[0])/(r[1]-r[0]),n=i)}));var o=i[n];if((0,x.isNil)(o)||(0,x.isNil)(n))return null;var a=o.length,s=i[n+1];return Ta.pointAt(o[a-2],o[a-1],s[1],s[2],s[3],s[4],s[5],s[6],e)},e.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",mc.pathToCurve(t))},e.prototype._setTcache=function(){var t,e,n,r,i=0,o=0,a=[],s=this.get("curve");s&&((0,x.each)(s,(function(t,e){n=s[e+1],r=t.length,n&&(i+=Ta.length(t[r-2],t[r-1],n[1],n[2],n[3],n[4],n[5],n[6])||0)})),this.set("totalLength",i),0!==i?((0,x.each)(s,(function(u,l){n=s[l+1],r=u.length,n&&((t=[])[0]=o/i,e=Ta.length(u[r-2],u[r-1],n[1],n[2],n[3],n[4],n[5],n[6]),o+=e||0,t[1]=o/i,a.push(t))})),this.set("tCache",a)):this.set("tCache",[]))},e.prototype.getStartTangent=function(){var t,e=this.getSegments();if(e.length>1){var n=e[0].currentPoint,r=e[1].currentPoint,i=e[1].startTangent;t=[],i?(t.push([n[0]-i[0],n[1]-i[1]]),t.push([n[0],n[1]])):(t.push([r[0],r[1]]),t.push([n[0],n[1]]))}return t},e.prototype.getEndTangent=function(){var t,e=this.getSegments(),n=e.length;if(n>1){var r=e[n-2].currentPoint,i=e[n-1].currentPoint,o=e[n-1].endTangent;t=[],o?(t.push([i[0]-o[0],i[1]-o[1]]),t.push([i[0],i[1]])):(t.push([r[0],r[1]]),t.push([i[0],i[1]]))}return t},e}($l);const yc=vc;function bc(t,e,n,r,i){var o=t.length;if(o<2)return!1;for(var a=0;a<o-1;a++){if(nc(t[a][0],t[a][1],t[a+1][0],t[a+1][1],e,n,r))return!0}if(i){var s=t[0],u=t[o-1];if(nc(s[0],s[1],u[0],u[1],e,n,r))return!0}return!1}const xc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,b.__extends)(e,t),e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.attr().points,a=!1;return n&&(a=bc(o,i,t,e,!0)),!a&&r&&(a=dc(o,t,e)),a},e.prototype.createPath=function(t){var e=this.attr().points;if(!(e.length<2)){t.beginPath();for(var n=0;n<e.length;n++){var r=e[n];0===n?t.moveTo(r[0],r[1]):t.lineTo(r[0],r[1])}t.closePath()}},e}($l);var wc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,b.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},e),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),this.setArrow(),-1!==["points"].indexOf(e)&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.setArrow=function(){var t=this.attr(),e=this.attrs,n=e.points,r=e.startArrow,i=e.endArrow,o=n.length,a=n[0][0],s=n[0][1],u=n[o-1][0],l=n[o-1][1];r&&Ol(this,t,n[1][0],n[1][1],a,s),i&&Ll(this,t,n[o-2][0],n[o-2][1],u,l)},e.prototype.isFill=function(){return!1},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){return!(!n||!i)&&bc(this.attr().points,i,t,e,!1)},e.prototype.isStroke=function(){return!0},e.prototype.createPath=function(t){var e=this.attr(),n=e.points,r=e.startArrow,i=e.endArrow,o=n.length;if(!(n.length<2)){var a,s=n[0][0],u=n[0][1],l=n[o-1][0],c=n[o-1][1];if(r&&r.d)s+=(a=Pl(s,u,n[1][0],n[1][1],r.d)).dx,u+=a.dy;if(i&&i.d)l-=(a=Pl(n[o-2][0],n[o-2][1],l,c,i.d)).dx,c-=a.dy;t.beginPath(),t.moveTo(s,u);for(var h=0;h<o-1;h++){var d=n[h];t.lineTo(d[0],d[1])}t.lineTo(l,c)}},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr().points,e=this.get("totalLength");return(0,x.isNil)(e)?(this.set("totalLength",za(t)),this.get("totalLength")):e},e.prototype.getPoint=function(t){var e,n,r=this.attr().points,i=this.get("tCache");return i||(this._setTcache(),i=this.get("tCache")),(0,x.each)(i,(function(r,i){t>=r[0]&&t<=r[1]&&(e=(t-r[0])/(r[1]-r[0]),n=i)})),ma.pointAt(r[n][0],r[n][1],r[n+1][0],r[n+1][1],e)},e.prototype._setTcache=function(){var t=this.attr().points;if(t&&0!==t.length){var e=this.getTotalLength();if(!(e<=0)){var n,r,i=0,o=[];(0,x.each)(t,(function(a,s){t[s+1]&&((n=[])[0]=i/e,r=ma.length(a[0],a[1],t[s+1][0],t[s+1][1]),i+=r,n[1]=i/e,o.push(n))})),this.set("tCache",o)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},e.prototype.getEndTangent=function(){var t=this.attr().points,e=t.length-1,n=[];return n.push([t[e-1][0],t[e-1][1]]),n.push([t[e][0],t[e][1]]),n},e}($l);const _c=wc;const Sc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,b.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},e),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.attr(),a=o.x,s=o.y,u=o.width,l=o.height,c=o.radius;if(c){var h=!1;return n&&(h=function(t,e,n,r,i,o,a,s){return nc(t+i,e,t+n-i,e,o,a,s)||nc(t+n,e+i,t+n,e+r-i,o,a,s)||nc(t+n-i,e+r,t+i,e+r,o,a,s)||nc(t,e+r-i,t,e+i,o,a,s)||fc(t+n-i,e+i,i,1.5*Math.PI,2*Math.PI,o,a,s)||fc(t+n-i,e+r-i,i,0,.5*Math.PI,o,a,s)||fc(t+i,e+r-i,i,.5*Math.PI,Math.PI,o,a,s)||fc(t+i,e+i,i,Math.PI,1.5*Math.PI,o,a,s)}(a,s,u,l,c,i,t,e)),!h&&r&&(h=uc(this,t,e)),h}var d=i/2;return r&&n?fl(a-d,s-d,u+d,l+d,t,e):r?fl(a,s,u,l,t,e):n?function(t,e,n,r,i,o,a){var s=i/2;return fl(t-s,e-s,n,i,o,a)||fl(t+n-s,e-s,i,r,o,a)||fl(t+s,e+r-s,n,i,o,a)||fl(t-s,e+s,i,r,o,a)}(a,s,u,l,i,t,e):void 0},e.prototype.createPath=function(t){var e=this.attr(),n=e.x,r=e.y,i=e.width,o=e.height,a=e.radius;if(t.beginPath(),0===a)t.rect(n,r,i,o);else{var s=function(t){var e=0,n=0,r=0,i=0;return(0,x.isArray)(t)?1===t.length?e=n=r=i=t[0]:2===t.length?(e=r=t[0],n=i=t[1]):3===t.length?(e=t[0],n=i=t[1],r=t[2]):(e=t[0],n=t[1],r=t[2],i=t[3]):e=n=r=i=t,[e,n,r,i]}(a),u=s[0],l=s[1],c=s[2],h=s[3];t.moveTo(n+u,r),t.lineTo(n+i-l,r),0!==l&&t.arc(n+i-l,r+l,l,-Math.PI/2,0),t.lineTo(n+i,r+o-c),0!==c&&t.arc(n+i-c,r+o-c,c,0,Math.PI/2),t.lineTo(n+h,r+o),0!==h&&t.arc(n+h,r+o-h,h,Math.PI/2,Math.PI),t.lineTo(n,r+u),0!==u&&t.arc(n+u,r+u,u,Math.PI,1.5*Math.PI),t.closePath()}},e}($l);var Ec=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,b.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},e),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.isOnlyHitBox=function(){return!0},e.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},e.prototype._assembleFont=function(){var t=this.attrs;t.font=Ha(t)},e.prototype._setText=function(t){var e=null;(0,x.isString)(t)&&-1!==t.indexOf("\n")&&(e=t.split("\n")),this.set("textArr",e)},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),e.startsWith("font")&&this._assembleFont(),"text"===e&&this._setText(n)},e.prototype._getSpaceingY=function(){var t=this.attrs,e=t.lineHeight,n=1*t.fontSize;return e?e-n:.14*n},e.prototype._drawTextArr=function(t,e,n){var r,i=this.attrs,o=i.textBaseline,a=i.x,s=i.y,u=1*i.fontSize,l=this._getSpaceingY(),c=Va(i.text,i.fontSize,i.lineHeight);(0,x.each)(e,(function(e,i){r=s+i*(l+u)-c+u,"middle"===o&&(r+=c-u-(c-u)/2),"top"===o&&(r+=c-u),(0,x.isNil)(e)||(n?t.fillText(e,a,r):t.strokeText(e,a,r))}))},e.prototype._drawText=function(t,e){var n=this.attr(),r=n.x,i=n.y,o=this.get("textArr");if(o)this._drawTextArr(t,o,e);else{var a=n.text;(0,x.isNil)(a)||(e?t.fillText(a,r,i):t.strokeText(a,r,i))}},e.prototype.strokeAndFill=function(t){var e=this.attrs,n=e.lineWidth,r=e.opacity,i=e.strokeOpacity,o=e.fillOpacity;this.isStroke()&&n>0&&((0,x.isNil)(i)||1===i||(t.globalAlpha=r),this.stroke(t)),this.isFill()&&((0,x.isNil)(o)||1===o?this.fill(t):(t.globalAlpha=o,this.fill(t),t.globalAlpha=r)),this.afterDrawPath(t)},e.prototype.fill=function(t){this._drawText(t,!0)},e.prototype.stroke=function(t){this._drawText(t,!1)},e}($l);const Ac=Ec;function Mc(t,e,n){var r,i,o=t.getTotalMatrix();if(o){var a=(r=[e,n,1],(i=o)?_r(Sr(i),r):r);return[a[0],a[1]]}return[e,n]}function Cc(t,e,n){if(t.isCanvas&&t.isCanvas())return!0;if(!ar(t)||!1===t.cfg.isInView)return!1;if(t.cfg.clipShape){var r=Mc(t,e,n),i=r[0],o=r[1];if(t.isClipped(i,o))return!1}var a=t.cfg.cacheCanvasBBox||t.getCanvasBBox();return e>=a.minX&&e<=a.maxX&&n>=a.minY&&n<=a.maxY}function Tc(t,e,n){if(!Cc(t,e,n))return null;for(var r=null,i=t.getChildren(),o=i.length-1;o>=0;o--){var a=i[o];if(a.isGroup())r=Tc(a,e,n);else if(Cc(a,e,n)){var s=a,u=Mc(a,e,n),l=u[0],c=u[1];s.isInShape(l,c)&&(r=a)}if(r)break}return r}var kc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,b.__extends)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.renderer="canvas",e.autoDraw=!0,e.localRefresh=!0,e.refreshElements=[],e.clipView=!0,e.quickHit=!1,e},e.prototype.onCanvasChange=function(t){"attr"!==t&&"sort"!==t&&"changeSize"!==t||(this.set("refreshElements",[this]),this.draw())},e.prototype.getShapeBase=function(){return d},e.prototype.getGroupBase=function(){return Yl},e.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||(window?window.devicePixelRatio:1);return t>=1?Math.ceil(t):1},e.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},e.prototype.createDom=function(){var t=document.createElement("canvas"),e=t.getContext("2d");return this.set("context",e),t},e.prototype.setDOMSize=function(e,n){t.prototype.setDOMSize.call(this,e,n);var r=this.get("context"),i=this.get("el"),o=this.getPixelRatio();i.width=o*e,i.height=o*n,o>1&&r.scale(o,o)},e.prototype.clear=function(){t.prototype.clear.call(this),this._clearFrame();var e=this.get("context"),n=this.get("el");e.clearRect(0,0,n.width,n.height)},e.prototype.getShape=function(e,n){return this.get("quickHit")?Tc(this,e,n):t.prototype.getShape.call(this,e,n,null)},e.prototype._getRefreshRegion=function(){var t,e=this.get("refreshElements"),n=this.getViewRange();e.length&&e[0]===this?t=n:(t=function(t){if(!t.length)return null;var e=[],n=[],r=[],i=[];return(0,x.each)(t,(function(t){var o=Wl(t);o&&(e.push(o.minX),n.push(o.minY),r.push(o.maxX),i.push(o.maxY))})),{minX:(0,x.min)(e),minY:(0,x.min)(n),maxX:(0,x.max)(r),maxY:(0,x.max)(i)}}(e),t&&(t.minX=Math.floor(t.minX),t.minY=Math.floor(t.minY),t.maxX=Math.ceil(t.maxX),t.maxY=Math.ceil(t.maxY),t.maxY+=1,this.get("clipView")&&(t=function(t,e){return t&&e&&pl(t,e)?{minX:Math.max(t.minX,e.minX),minY:Math.max(t.minY,e.minY),maxX:Math.min(t.maxX,e.maxX),maxY:Math.min(t.maxY,e.maxY)}:null}(t,n))));return t},e.prototype.refreshElement=function(t){this.get("refreshElements").push(t)},e.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&((0,x.clearAnimationFrame)(t),this.set("drawFrame",null),this.set("refreshElements",[]))},e.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},e.prototype._drawAll=function(){var t=this.get("context"),e=this.get("el"),n=this.getChildren();t.clearRect(0,0,e.width,e.height),Dl(t,this),zl(t,n),this.set("refreshElements",[])},e.prototype._drawRegion=function(){var t=this.get("context"),e=this.get("refreshElements"),n=this.getChildren(),r=this._getRefreshRegion();r?(t.clearRect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),t.save(),t.beginPath(),t.rect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),t.clip(),Dl(t,this),Fl(this,n,r),zl(t,n,r),t.restore()):e.length&&Ul(e),(0,x.each)(e,(function(t){t.get("hasChanged")&&t.set("hasChanged",!1)})),this.set("refreshElements",[])},e.prototype._startDraw=function(){var t=this,e=this.get("drawFrame"),n=this.get("drawFrameCallback");e||(e=(0,x.requestAnimationFrame)((function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null),n&&n()})),this.set("drawFrame",e))},e.prototype.skipDraw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},e}(ra);const Ic=kc;var Nc={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},Pc={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"};function Oc(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Lc(t){var e=Nc[t.type],n=t.getParent();if(!e)throw new Error("the type "+t.type+" is not supported by svg");var r=Oc(e);if(t.get("id")&&(r.id=t.get("id")),t.set("el",r),t.set("attrs",{}),n){var i=n.get("el");i||(i=n.createDom(),n.set("el",i)),i.appendChild(r)}return r}function Rc(t,e){var n=t.get("el"),r=(0,x.toArray)(n.children).sort(e),i=document.createDocumentFragment();r.forEach((function(t){i.appendChild(t)})),n.appendChild(i)}function Dc(t){var e=t.attr().matrix;if(e){for(var n=t.cfg.el,r=[],i=0;i<9;i+=3)r.push(e[i]+","+e[i+1]);-1===(r=r.join(",")).indexOf("NaN")?n.setAttribute("transform","matrix("+r+")"):console.warn("invalid matrix:",e)}}function zc(t,e){var n=t.getClip(),r=t.get("el");if(n){if(n&&!r.hasAttribute("clip-path")){Lc(n),n.createPath(e);var i=e.addClip(n);r.setAttribute("clip-path","url(#"+i+")")}}else r.removeAttribute("clip-path")}function Fc(t,e){e.forEach((function(e){e.draw(t)}))}function Bc(t,e){var n=t.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context"),i=t.getParent(),o=i?i.getChildren():[n],a=t.get("el");if("remove"===e)if(t.get("isClipShape")){var s=a&&a.parentNode,u=s&&s.parentNode;s&&u&&u.removeChild(s)}else a&&a.parentNode&&a.parentNode.removeChild(a);else if("show"===e)a.setAttribute("visibility","visible");else if("hide"===e)a.setAttribute("visibility","hidden");else if("zIndex"===e)!function(t,e){var n=t.parentNode,r=Array.from(n.childNodes).filter((function(t){return 1===t.nodeType&&"defs"!==t.nodeName.toLowerCase()})),i=r[e],o=r.indexOf(t);if(i){if(o>e)n.insertBefore(t,i);else if(o<e){var a=r[e+1];a?n.insertBefore(t,a):n.appendChild(t)}}else n.appendChild(t)}(a,o.indexOf(t));else if("sort"===e){var l=t.get("children");l&&l.length&&Rc(t,(function(t,e){return l.indexOf(t)-l.indexOf(e)?1:0}))}else"clear"===e?a&&(a.innerHTML=""):"matrix"===e?Dc(t):"clip"===e?zc(t,r):"attr"===e||"add"===e&&t.draw(r)}}var Uc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,b.__extends)(e,t),e.prototype.isEntityGroup=function(){return!0},e.prototype.createDom=function(){var t=Oc("g");this.set("el",t);var e=this.getParent();if(e){var n=e.get("el");n||(n=e.createDom(),e.set("el",n)),n.appendChild(t)}return t},e.prototype.afterAttrsChange=function(e){t.prototype.afterAttrsChange.call(this,e);var n=this.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context");this.createPath(r,e)}},e.prototype.onCanvasChange=function(t){Bc(this,t)},e.prototype.getShapeBase=function(){return f},e.prototype.getGroupBase=function(){return e},e.prototype.draw=function(t){var e=this.getChildren(),n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||this.createDom(),zc(this,t),this.createPath(t),e.length&&Fc(t,e))},e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");(0,x.each)(e||n,(function(t,e){Pc[e]&&r.setAttribute(Pc[e],t)})),Dc(this)},e}(ia);const jc=Uc;var Vc=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="svg",e.canFill=!1,e.canStroke=!1,e}return(0,b.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},e),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.afterAttrsChange=function(e){t.prototype.afterAttrsChange.call(this,e);var n=this.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context");this.draw(r,e)}},e.prototype.getShapeBase=function(){return f},e.prototype.getGroupBase=function(){return jc},e.prototype.onCanvasChange=function(t){Bc(this,t)},e.prototype.calculateBBox=function(){var t=this.get("el"),e=null;if(t)e=t.getBBox();else{var n=ua(this.get("type"));n&&(e=n(this))}if(e){var r=e.x,i=e.y,o=e.width,a=e.height,s=this.getHitLineWidth(),u=s/2,l=r-u,c=i-u;return{x:l,y:c,minX:l,minY:c,maxX:r+o+u,maxY:i+a+u,width:o+s,height:a+s}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},e.prototype.isFill=function(){var t=this.attr(),e=t.fill,n=t.fillStyle;return(e||n||this.isClipShape())&&this.canFill},e.prototype.isStroke=function(){var t=this.attr(),e=t.stroke,n=t.strokeStyle;return(e||n)&&this.canStroke},e.prototype.draw=function(t,e){var n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||Lc(this),zc(this,t),this.createPath(t,e),this.shadow(t,e),this.strokeAndFill(t,e),this.transform(e))},e.prototype.createPath=function(t,e){},e.prototype.strokeAndFill=function(t,e){var n=e||this.attr(),r=n.fill,i=n.fillStyle,o=n.stroke,a=n.strokeStyle,s=n.fillOpacity,u=n.strokeOpacity,l=n.lineWidth,c=this.get("el");this.canFill&&(e?"fill"in n?this._setColor(t,"fill",r):"fillStyle"in n&&this._setColor(t,"fill",i):this._setColor(t,"fill",r||i),s&&c.setAttribute(Pc.fillOpacity,s)),this.canStroke&&l>0&&(e?"stroke"in n?this._setColor(t,"stroke",o):"strokeStyle"in n&&this._setColor(t,"stroke",a):this._setColor(t,"stroke",o||a),u&&c.setAttribute(Pc.strokeOpacity,u),l&&c.setAttribute(Pc.lineWidth,l))},e.prototype._setColor=function(t,e,n){var r=this.get("el");if(n)if(n=n.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(n))(i=t.find("gradient",n))||(i=t.addGradient(n)),r.setAttribute(Pc[e],"url(#"+i+")");else if(/^[p,P]{1}[\s]*\(/.test(n)){var i;(i=t.find("pattern",n))||(i=t.addPattern(n)),r.setAttribute(Pc[e],"url(#"+i+")")}else r.setAttribute(Pc[e],n);else r.setAttribute(Pc[e],"none")},e.prototype.shadow=function(t,e){var n=this.attr(),r=e||n,i=r.shadowOffsetX,o=r.shadowOffsetY,a=r.shadowBlur,s=r.shadowColor;(i||o||a||s)&&function(t,e){var n=t.cfg.el,r=t.attr(),i={dx:r.shadowOffsetX,dy:r.shadowOffsetY,blur:r.shadowBlur,color:r.shadowColor};if(i.dx||i.dy||i.blur||i.color){var o=e.find("filter",i);o||(o=e.addShadow(i)),n.setAttribute("filter","url(#"+o+")")}else n.removeAttribute("filter")}(this,t)},e.prototype.transform=function(t){var e=this.attr();(t||e).matrix&&Dc(this)},e.prototype.isInShape=function(t,e){return this.isPointInPath(t,e)},e.prototype.isPointInPath=function(t,e){var n=this.get("el"),r=this.get("canvas").get("el").getBoundingClientRect(),i=t+r.left,o=e+r.top,a=document.elementFromPoint(i,o);return!(!a||!a.isEqualNode(n))},e.prototype.getHitLineWidth=function(){var t=this.attrs,e=t.lineWidth,n=t.lineAppendWidth;return this.isStroke()?e+n:0},e}(oa);const Hc=Vc;var Gc=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="circle",e.canFill=!0,e.canStroke=!0,e}return(0,b.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},e),{x:0,y:0,r:0})},e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");(0,x.each)(e||n,(function(t,e){"x"===e||"y"===e?r.setAttribute("c"+e,t):Pc[e]&&r.setAttribute(Pc[e],t)}))},e}(Hc);const Wc=Gc;var Xc=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dom",e.canFill=!1,e.canStroke=!1,e}return(0,b.__extends)(e,t),e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");if((0,x.each)(e||n,(function(t,e){Pc[e]&&r.setAttribute(Pc[e],t)})),"function"==typeof n.html){var i=n.html.call(this,n);if(i instanceof Element||i instanceof HTMLDocument){for(var o=r.childNodes,a=o.length-1;a>=0;a--)r.removeChild(o[a]);r.appendChild(i)}else r.innerHTML=i}else r.innerHTML=n.html},e}(Hc);const Yc=Xc;var qc=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="ellipse",e.canFill=!0,e.canStroke=!0,e}return(0,b.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},e),{x:0,y:0,rx:0,ry:0})},e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");(0,x.each)(e||n,(function(t,e){"x"===e||"y"===e?r.setAttribute("c"+e,t):Pc[e]&&r.setAttribute(Pc[e],t)}))},e}(Hc);const $c=qc;var Kc=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="image",e.canFill=!1,e.canStroke=!1,e}return(0,b.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},e),{x:0,y:0,width:0,height:0})},e.prototype.createPath=function(t,e){var n=this,r=this.attr(),i=this.get("el");(0,x.each)(e||r,(function(t,e){"img"===e?n._setImage(r.img):Pc[e]&&i.setAttribute(Pc[e],t)}))},e.prototype.setAttr=function(t,e){this.attrs[t]=e,"img"===t&&this._setImage(e)},e.prototype._setImage=function(t){var e=this.attr(),n=this.get("el");if((0,x.isString)(t))n.setAttribute("href",t);else if(t instanceof window.Image)e.width||(n.setAttribute("width",t.width),this.attr("width",t.width)),e.height||(n.setAttribute("height",t.height),this.attr("height",t.height)),n.setAttribute("href",t.src);else if(t instanceof HTMLElement&&(0,x.isString)(t.nodeName)&&"CANVAS"===t.nodeName.toUpperCase())n.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var r=document.createElement("canvas");r.setAttribute("width",""+t.width),r.setAttribute("height",""+t.height),r.getContext("2d").putImageData(t,0,0),e.width||(n.setAttribute("width",""+t.width),this.attr("width",t.width)),e.height||(n.setAttribute("height",""+t.height),this.attr("height",t.height)),n.setAttribute("href",r.toDataURL())}},e}(Hc);const Zc=Kc;var Qc=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="line",e.canFill=!1,e.canStroke=!0,e}return(0,b.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},e),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");(0,x.each)(e||n,(function(e,i){if("startArrow"===i||"endArrow"===i)if(e){var o=(0,x.isObject)(e)?t.addArrow(n,Pc[i]):t.getDefaultArrow(n,Pc[i]);r.setAttribute(Pc[i],"url(#"+o+")")}else r.removeAttribute(Pc[i]);else Pc[i]&&r.setAttribute(Pc[i],e)}))},e.prototype.getTotalLength=function(){var t=this.attr(),e=t.x1,n=t.y1,r=t.x2,i=t.y2;return ma.length(e,n,r,i)},e.prototype.getPoint=function(t){var e=this.attr(),n=e.x1,r=e.y1,i=e.x2,o=e.y2;return ma.pointAt(n,r,i,o,t)},e}(Hc);const Jc=Qc;var th={circle:function(t,e,n){return[["M",t,e],["m",-n,0],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0]]},square:function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]},diamond:function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]},triangle:function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["z"]]},triangleDown:function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]}};const eh={get:function(t){return th[t]},register:function(t,e){th[t]=e},remove:function(t){delete th[t]},getAll:function(){return th}};var nh=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="marker",e.canFill=!0,e.canStroke=!0,e}return(0,b.__extends)(e,t),e.prototype.createPath=function(t){this.get("el").setAttribute("d",this._assembleMarker())},e.prototype._assembleMarker=function(){var t=this._getPath();return(0,x.isArray)(t)?t.map((function(t){return t.join(" ")})).join(""):t},e.prototype._getPath=function(){var t,e=this.attr(),n=e.x,r=e.y,i=e.r||e.radius,o=e.symbol||"circle";return(t=(0,x.isFunction)(o)?o:eh.get(o))?t(n,r,i):(console.warn(t+" symbol is not exist."),null)},e.symbolsFactory=eh,e}(Hc);const rh=nh;var ih=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="path",e.canFill=!0,e.canStroke=!0,e}return(0,b.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},e),{startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,e){var n=this,r=this.attr(),i=this.get("el");(0,x.each)(e||r,(function(e,o){if("path"===o&&(0,x.isArray)(e))i.setAttribute("d",n._formatPath(e));else if("startArrow"===o||"endArrow"===o)if(e){var a=(0,x.isObject)(e)?t.addArrow(r,Pc[o]):t.getDefaultArrow(r,Pc[o]);i.setAttribute(Pc[o],"url(#"+a+")")}else i.removeAttribute(Pc[o]);else Pc[o]&&i.setAttribute(Pc[o],e)}))},e.prototype._formatPath=function(t){var e=t.map((function(t){return t.join(" ")})).join("");return~e.indexOf("NaN")?"":e},e.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},e.prototype.getPoint=function(t){var e=this.get("el"),n=this.getTotalLength();if(0===n)return null;var r=e?e.getPointAtLength(t*n):null;return r?{x:r.x,y:r.y}:null},e}(Hc);const oh=ih;var ah=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="polygon",e.canFill=!0,e.canStroke=!0,e}return(0,b.__extends)(e,t),e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");(0,x.each)(e||n,(function(t,e){"points"===e&&(0,x.isArray)(t)&&t.length>=2?r.setAttribute("points",t.map((function(t){return t[0]+","+t[1]})).join(" ")):Pc[e]&&r.setAttribute(Pc[e],t)}))},e}(Hc);const sh=ah;var uh=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="polyline",e.canFill=!0,e.canStroke=!0,e}return(0,b.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},e),{startArrow:!1,endArrow:!1})},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),-1!==["points"].indexOf(e)&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");(0,x.each)(e||n,(function(t,e){"points"===e&&(0,x.isArray)(t)&&t.length>=2?r.setAttribute("points",t.map((function(t){return t[0]+","+t[1]})).join(" ")):Pc[e]&&r.setAttribute(Pc[e],t)}))},e.prototype.getTotalLength=function(){var t=this.attr().points,e=this.get("totalLength");return(0,x.isNil)(e)?(this.set("totalLength",za(t)),this.get("totalLength")):e},e.prototype.getPoint=function(t){var e,n,r=this.attr().points,i=this.get("tCache");return i||(this._setTcache(),i=this.get("tCache")),(0,x.each)(i,(function(r,i){t>=r[0]&&t<=r[1]&&(e=(t-r[0])/(r[1]-r[0]),n=i)})),ma.pointAt(r[n][0],r[n][1],r[n+1][0],r[n+1][1],e)},e.prototype._setTcache=function(){var t=this.attr().points;if(t&&0!==t.length){var e=this.getTotalLength();if(!(e<=0)){var n,r,i=0,o=[];(0,x.each)(t,(function(a,s){t[s+1]&&((n=[])[0]=i/e,r=ma.length(a[0],a[1],t[s+1][0],t[s+1][1]),i+=r,n[1]=i/e,o.push(n))})),this.set("tCache",o)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},e.prototype.getEndTangent=function(){var t=this.attr().points,e=t.length-1,n=[];return n.push([t[e-1][0],t[e-1][1]]),n.push([t[e][0],t[e][1]]),n},e}(Hc);const lh=uh;var ch=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="rect",e.canFill=!0,e.canStroke=!0,e}return(0,b.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},e),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.createPath=function(t,e){var n=this,r=this.attr(),i=this.get("el"),o=!1,a=["x","y","width","height","radius"];(0,x.each)(e||r,(function(t,e){-1===a.indexOf(e)||o?-1===a.indexOf(e)&&Pc[e]&&i.setAttribute(Pc[e],t):(i.setAttribute("d",n._assembleRect(r)),o=!0)}))},e.prototype._assembleRect=function(t){var e=t.x,n=t.y,r=t.width,i=t.height,o=t.radius;if(!o)return"M "+e+","+n+" l "+r+",0 l 0,"+i+" l"+-r+" 0 z";var a=function(t){var e=0,n=0,r=0,i=0;return(0,x.isArray)(t)?1===t.length?e=n=r=i=t[0]:2===t.length?(e=r=t[0],n=i=t[1]):3===t.length?(e=t[0],n=i=t[1],r=t[2]):(e=t[0],n=t[1],r=t[2],i=t[3]):e=n=r=i=t,{r1:e,r2:n,r3:r,r4:i}}(o);return(0,x.isArray)(o)?1===o.length?a.r1=a.r2=a.r3=a.r4=o[0]:2===o.length?(a.r1=a.r3=o[0],a.r2=a.r4=o[1]):3===o.length?(a.r1=o[0],a.r2=a.r4=o[1],a.r3=o[2]):(a.r1=o[0],a.r2=o[1],a.r3=o[2],a.r4=o[3]):a.r1=a.r2=a.r3=a.r4=o,[["M "+(e+a.r1)+","+n],["l "+(r-a.r1-a.r2)+",0"],["a "+a.r2+","+a.r2+",0,0,1,"+a.r2+","+a.r2],["l 0,"+(i-a.r2-a.r3)],["a "+a.r3+","+a.r3+",0,0,1,"+-a.r3+","+a.r3],["l "+(a.r3+a.r4-r)+",0"],["a "+a.r4+","+a.r4+",0,0,1,"+-a.r4+","+-a.r4],["l 0,"+(a.r4+a.r1-i)],["a "+a.r1+","+a.r1+",0,0,1,"+a.r1+","+-a.r1],["z"]].join(" ")},e}(Hc);const hh=ch;var dh={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},fh={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},ph={left:"left",start:"left",center:"middle",right:"end",end:"end"},mh=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="text",e.canFill=!0,e.canStroke=!0,e}return(0,b.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},e),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.createPath=function(t,e){var n=this,r=this.attr(),i=this.get("el");this._setFont(),(0,x.each)(e||r,(function(t,e){"text"===e?n._setText(""+t):"matrix"===e&&t?Dc(n):Pc[e]&&i.setAttribute(Pc[e],t)})),i.setAttribute("paint-order","stroke"),i.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},e.prototype._setFont=function(){var t=this.get("el"),e=this.attr(),n=e.textBaseline,r=e.textAlign,i=yr();i&&"firefox"===i.name?t.setAttribute("dominant-baseline",fh[n]||"alphabetic"):t.setAttribute("alignment-baseline",dh[n]||"baseline"),t.setAttribute("text-anchor",ph[r]||"left")},e.prototype._setText=function(t){var e=this.get("el"),n=this.attr(),r=n.x,i=n.textBaseline,o=void 0===i?"bottom":i;if(t)if(~t.indexOf("\n")){var a=t.split("\n"),s=a.length-1,u="";(0,x.each)(a,(function(t,e){0===e?"alphabetic"===o?u+='<tspan x="'+r+'" dy="'+-s+'em">'+t+"</tspan>":"top"===o?u+='<tspan x="'+r+'" dy="0.9em">'+t+"</tspan>":"middle"===o?u+='<tspan x="'+r+'" dy="'+-(s-1)/2+'em">'+t+"</tspan>":"bottom"===o?u+='<tspan x="'+r+'" dy="-'+(s+.3)+'em">'+t+"</tspan>":"hanging"===o&&(u+='<tspan x="'+r+'" dy="'+(-(s-1)-.3)+'em">'+t+"</tspan>"):u+='<tspan x="'+r+'" dy="1em">'+t+"</tspan>"})),e.innerHTML=u}else e.innerHTML=t;else e.innerHTML=""},e}(Hc);const gh=mh;var vh=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,yh=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,bh=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function xh(t){var e=t.match(bh);if(!e)return"";var n="";return e.sort((function(t,e){return t=t.split(":"),e=e.split(":"),Number(t[0])-Number(e[0])})),(0,x.each)(e,(function(t){t=t.split(":"),n+='<stop offset="'+t[0]+'" stop-color="'+t[1]+'"></stop>'})),n}var wh=function(){function t(t){this.cfg={};var e=null,n=(0,x.uniqueId)("gradient_");return"l"===t.toLowerCase()[0]?function(t,e){var n,r,i=vh.exec(t),o=(0,x.mod)((0,x.toRadian)(parseFloat(i[1])),2*Math.PI),a=i[2];o>=0&&o<.5*Math.PI?(n={x:0,y:0},r={x:1,y:1}):.5*Math.PI<=o&&o<Math.PI?(n={x:1,y:0},r={x:0,y:1}):Math.PI<=o&&o<1.5*Math.PI?(n={x:1,y:1},r={x:0,y:0}):(n={x:0,y:1},r={x:1,y:0});var s=Math.tan(o),u=s*s,l=(r.x-n.x+s*(r.y-n.y))/(u+1)+n.x,c=s*(r.x-n.x+s*(r.y-n.y))/(u+1)+n.y;e.setAttribute("x1",n.x),e.setAttribute("y1",n.y),e.setAttribute("x2",l),e.setAttribute("y2",c),e.innerHTML=xh(a)}(t,e=Oc("linearGradient")):function(t,e){var n=yh.exec(t),r=parseFloat(n[1]),i=parseFloat(n[2]),o=parseFloat(n[3]),a=n[4];e.setAttribute("cx",r),e.setAttribute("cy",i),e.setAttribute("r",o),e.innerHTML=xh(a)}(t,e=Oc("radialGradient")),e.setAttribute("id",n),this.el=e,this.id=n,this.cfg=t,this}return t.prototype.match=function(t,e){return this.cfg===e},t}();const _h=wh;var Sh={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},Eh={x:"-40%",y:"-40%",width:"200%",height:"200%"},Ah=function(){function t(t){this.type="filter",this.cfg={},this.type="filter";var e=Oc("filter");return(0,x.each)(Eh,(function(t,n){e.setAttribute(n,t)})),this.el=e,this.id=(0,x.uniqueId)("filter_"),this.el.id=this.id,this.cfg=t,this._parseShadow(t,e),this}return t.prototype.match=function(t,e){if(this.type!==t)return!1;var n=!0,r=this.cfg;return(0,x.each)(Object.keys(r),(function(t){if(r[t]!==e[t])return n=!1,!1})),n},t.prototype.update=function(t,e){var n=this.cfg;return n[Sh[t]]=e,this._parseShadow(n,this.el),this},t.prototype._parseShadow=function(t,e){var n='<feDropShadow\n      dx="'+(t.dx||0)+'"\n      dy="'+(t.dy||0)+'"\n      stdDeviation="'+(t.blur?t.blur/10:0)+'"\n      flood-color="'+(t.color?t.color:"#000")+'"\n      flood-opacity="'+(t.opacity?t.opacity:1)+'"\n      />';e.innerHTML=n},t}();const Mh=Ah;var Ch=function(){function t(t,e){this.cfg={};var n=Oc("marker"),r=(0,x.uniqueId)("marker_");n.setAttribute("id",r);var i=Oc("path");i.setAttribute("stroke",t.stroke||"none"),i.setAttribute("fill",t.fill||"none"),n.appendChild(i),n.setAttribute("overflow","visible"),n.setAttribute("orient","auto-start-reverse"),this.el=n,this.child=i,this.id=r;var o=t["marker-start"===e?"startArrow":"endArrow"];return this.stroke=t.stroke||"#000",!0===o?this._setDefaultPath(e,i):(this.cfg=o,this._setMarker(t.lineWidth,i)),this}return t.prototype.match=function(){return!1},t.prototype._setDefaultPath=function(t,e){var n=this.el;e.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),n.setAttribute("refX",""+10*Math.cos(Math.PI/6)),n.setAttribute("refY","5")},t.prototype._setMarker=function(t,e){var n=this.el,r=this.cfg.path,i=this.cfg.d;(0,x.isArray)(r)&&(r=r.map((function(t){return t.join(" ")})).join("")),e.setAttribute("d",r),n.appendChild(e),i&&n.setAttribute("refX",""+i/t)},t.prototype.update=function(t){var e=this.child;e.attr?e.attr("fill",t):e.setAttribute("fill",t)},t}();const Th=Ch;const kh=function(){function t(t){this.type="clip",this.cfg={};var e=Oc("clipPath");this.el=e,this.id=(0,x.uniqueId)("clip_"),e.id=this.id;var n=t.cfg.el;return e.appendChild(n),this.cfg=t,this}return t.prototype.match=function(){return!1},t.prototype.remove=function(){var t=this.el;t.parentNode.removeChild(t)},t}();var Ih=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i;const Nh=function(){function t(t){this.cfg={};var e=Oc("pattern");e.setAttribute("patternUnits","userSpaceOnUse");var n=Oc("image");e.appendChild(n);var r=(0,x.uniqueId)("pattern_");e.id=r,this.el=e,this.id=r,this.cfg=t;var i=Ih.exec(t)[2];n.setAttribute("href",i);var o=new Image;function a(){e.setAttribute("width",""+o.width),e.setAttribute("height",""+o.height)}return i.match(/^data:/i)||(o.crossOrigin="Anonymous"),o.src=i,o.complete?a():(o.onload=a,o.src=o.src),this}return t.prototype.match=function(t,e){return this.cfg===e},t}();var Ph=function(){function t(t){var e=Oc("defs"),n=(0,x.uniqueId)("defs_");e.id=n,t.appendChild(e),this.children=[],this.defaultArrow={},this.el=e,this.canvas=t}return t.prototype.find=function(t,e){for(var n=this.children,r=null,i=0;i<n.length;i++)if(n[i].match(t,e)){r=n[i].id;break}return r},t.prototype.findById=function(t){for(var e=this.children,n=null,r=0;r<e.length;r++)if(e[r].id===t){n=e[r];break}return n},t.prototype.add=function(t){this.children.push(t),t.canvas=this.canvas,t.parent=this},t.prototype.getDefaultArrow=function(t,e){var n=t.stroke||t.strokeStyle;if(this.defaultArrow[n])return this.defaultArrow[n].id;var r=new Th(t,e);return this.defaultArrow[n]=r,this.el.appendChild(r.el),this.add(r),r.id},t.prototype.addGradient=function(t){var e=new _h(t);return this.el.appendChild(e.el),this.add(e),e.id},t.prototype.addArrow=function(t,e){var n=new Th(t,e);return this.el.appendChild(n.el),this.add(n),n.id},t.prototype.addShadow=function(t){var e=new Mh(t);return this.el.appendChild(e.el),this.add(e),e.id},t.prototype.addPattern=function(t){var e=new Nh(t);return this.el.appendChild(e.el),this.add(e),e.id},t.prototype.addClip=function(t){var e=new kh(t);return this.el.appendChild(e.el),this.add(e),e.id},t}();const Oh=Ph;var Lh=function(t){function e(e){return t.call(this,(0,b.__assign)((0,b.__assign)({},e),{autoDraw:!0,renderer:"svg"}))||this}return(0,b.__extends)(e,t),e.prototype.getShapeBase=function(){return f},e.prototype.getGroupBase=function(){return jc},e.prototype.getShape=function(t,e,n){var r=n.target||n.srcElement;if(!Nc[r.tagName]){for(var i=r.parentNode;i&&!Nc[i.tagName];)i=i.parentNode;r=i}return this.find((function(t){return t.get("el")===r}))},e.prototype.createDom=function(){var t=Oc("svg"),e=new Oh(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",e),t},e.prototype.onCanvasChange=function(t){var e=this.get("context"),n=this.get("el");if("sort"===t){var r=this.get("children");r&&r.length&&Rc(this,(function(t,e){return r.indexOf(t)-r.indexOf(e)?1:0}))}else if("clear"===t){if(n){n.innerHTML="";var i=e.el;i.innerHTML="",n.appendChild(i)}}else"matrix"===t?Dc(this):"clip"===t?zc(this,e):"changeSize"===t&&(n.setAttribute("width",""+this.get("width")),n.setAttribute("height",""+this.get("height")))},e.prototype.draw=function(){var t=this.get("context"),e=this.getChildren();zc(this,t),e.length&&Fc(t,e)},e}(ra);const Rh=Lh;var Dh,zh,Fh,Bh;function Uh(t){Dh||(Dh=document.createElement("table"),zh=document.createElement("tr"),Fh=/^\s*<(\w+|!)[^>]*>/,Bh={tr:document.createElement("tbody"),tbody:Dh,thead:Dh,tfoot:Dh,td:zh,th:zh,"*":document.createElement("div")});var e=Fh.test(t)&&RegExp.$1;e&&e in Bh||(e="*");var n=Bh[e];t="string"==typeof t?t.replace(/(^\s*)|(\s*$)/g,""):t,n.innerHTML=""+t;var r=n.childNodes[0];return r&&n.contains(r)&&n.removeChild(r),r}var jh=n(2520),Vh=n.n(jh);function Hh(t){return Hh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hh(t)}var Gh=/^\s+/,Wh=/\s+$/;function Xh(t,e){if(e=e||{},(t=t||"")instanceof Xh)return t;if(!(this instanceof Xh))return new Xh(t,e);var n=function(t){var e={r:0,g:0,b:0},n=1,r=null,i=null,o=null,a=!1,s=!1;"string"==typeof t&&(t=function(t){t=t.replace(Gh,"").replace(Wh,"").toLowerCase();var e,n=!1;if(ld[t])t=ld[t],n=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};if(e=_d.rgb.exec(t))return{r:e[1],g:e[2],b:e[3]};if(e=_d.rgba.exec(t))return{r:e[1],g:e[2],b:e[3],a:e[4]};if(e=_d.hsl.exec(t))return{h:e[1],s:e[2],l:e[3]};if(e=_d.hsla.exec(t))return{h:e[1],s:e[2],l:e[3],a:e[4]};if(e=_d.hsv.exec(t))return{h:e[1],s:e[2],v:e[3]};if(e=_d.hsva.exec(t))return{h:e[1],s:e[2],v:e[3],a:e[4]};if(e=_d.hex8.exec(t))return{r:pd(e[1]),g:pd(e[2]),b:pd(e[3]),a:yd(e[4]),format:n?"name":"hex8"};if(e=_d.hex6.exec(t))return{r:pd(e[1]),g:pd(e[2]),b:pd(e[3]),format:n?"name":"hex"};if(e=_d.hex4.exec(t))return{r:pd(e[1]+""+e[1]),g:pd(e[2]+""+e[2]),b:pd(e[3]+""+e[3]),a:yd(e[4]+""+e[4]),format:n?"name":"hex8"};if(e=_d.hex3.exec(t))return{r:pd(e[1]+""+e[1]),g:pd(e[2]+""+e[2]),b:pd(e[3]+""+e[3]),format:n?"name":"hex"};return!1}(t));"object"==Hh(t)&&(Sd(t.r)&&Sd(t.g)&&Sd(t.b)?(u=t.r,l=t.g,c=t.b,e={r:255*dd(u,255),g:255*dd(l,255),b:255*dd(c,255)},a=!0,s="%"===String(t.r).substr(-1)?"prgb":"rgb"):Sd(t.h)&&Sd(t.s)&&Sd(t.v)?(r=gd(t.s),i=gd(t.v),e=function(t,e,n){t=6*dd(t,360),e=dd(e,100),n=dd(n,100);var r=Math.floor(t),i=t-r,o=n*(1-e),a=n*(1-i*e),s=n*(1-(1-i)*e),u=r%6,l=[n,a,o,o,s,n][u],c=[s,n,n,a,o,o][u],h=[o,o,s,n,n,a][u];return{r:255*l,g:255*c,b:255*h}}(t.h,r,i),a=!0,s="hsv"):Sd(t.h)&&Sd(t.s)&&Sd(t.l)&&(r=gd(t.s),o=gd(t.l),e=function(t,e,n){var r,i,o;function a(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=dd(t,360),e=dd(e,100),n=dd(n,100),0===e)r=i=o=n;else{var s=n<.5?n*(1+e):n+e-n*e,u=2*n-s;r=a(u,s,t+1/3),i=a(u,s,t),o=a(u,s,t-1/3)}return{r:255*r,g:255*i,b:255*o}}(t.h,r,o),a=!0,s="hsl"),t.hasOwnProperty("a")&&(n=t.a));var u,l,c;return n=hd(n),{ok:a,format:t.format||s,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n}}(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}function Yh(t,e,n){t=dd(t,255),e=dd(e,255),n=dd(n,255);var r,i,o=Math.max(t,e,n),a=Math.min(t,e,n),s=(o+a)/2;if(o==a)r=i=0;else{var u=o-a;switch(i=s>.5?u/(2-o-a):u/(o+a),o){case t:r=(e-n)/u+(e<n?6:0);break;case e:r=(n-t)/u+2;break;case n:r=(t-e)/u+4}r/=6}return{h:r,s:i,l:s}}function qh(t,e,n){t=dd(t,255),e=dd(e,255),n=dd(n,255);var r,i,o=Math.max(t,e,n),a=Math.min(t,e,n),s=o,u=o-a;if(i=0===o?0:u/o,o==a)r=0;else{switch(o){case t:r=(e-n)/u+(e<n?6:0);break;case e:r=(n-t)/u+2;break;case n:r=(t-e)/u+4}r/=6}return{h:r,s:i,v:s}}function $h(t,e,n,r){var i=[md(Math.round(t).toString(16)),md(Math.round(e).toString(16)),md(Math.round(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function Kh(t,e,n,r){return[md(vd(r)),md(Math.round(t).toString(16)),md(Math.round(e).toString(16)),md(Math.round(n).toString(16))].join("")}function Zh(t,e){e=0===e?0:e||10;var n=Xh(t).toHsl();return n.s-=e/100,n.s=fd(n.s),Xh(n)}function Qh(t,e){e=0===e?0:e||10;var n=Xh(t).toHsl();return n.s+=e/100,n.s=fd(n.s),Xh(n)}function Jh(t){return Xh(t).desaturate(100)}function td(t,e){e=0===e?0:e||10;var n=Xh(t).toHsl();return n.l+=e/100,n.l=fd(n.l),Xh(n)}function ed(t,e){e=0===e?0:e||10;var n=Xh(t).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-e/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-e/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-e/100*255))),Xh(n)}function nd(t,e){e=0===e?0:e||10;var n=Xh(t).toHsl();return n.l-=e/100,n.l=fd(n.l),Xh(n)}function rd(t,e){var n=Xh(t).toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,Xh(n)}function id(t){var e=Xh(t).toHsl();return e.h=(e.h+180)%360,Xh(e)}function od(t,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var n=Xh(t).toHsl(),r=[Xh(t)],i=360/e,o=1;o<e;o++)r.push(Xh({h:(n.h+o*i)%360,s:n.s,l:n.l}));return r}function ad(t){var e=Xh(t).toHsl(),n=e.h;return[Xh(t),Xh({h:(n+72)%360,s:e.s,l:e.l}),Xh({h:(n+216)%360,s:e.s,l:e.l})]}function sd(t,e,n){e=e||6,n=n||30;var r=Xh(t).toHsl(),i=360/n,o=[Xh(t)];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,o.push(Xh(r));return o}function ud(t,e){e=e||6;for(var n=Xh(t).toHsv(),r=n.h,i=n.s,o=n.v,a=[],s=1/e;e--;)a.push(Xh({h:r,s:i,v:o})),o=(o+s)%1;return a}Xh.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,n,r=this.toRgb();return t=r.r/255,e=r.g/255,n=r.b/255,.2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(t){return this._a=hd(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=qh(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=qh(this._r,this._g,this._b),e=Math.round(360*t.h),n=Math.round(100*t.s),r=Math.round(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+r+"%)":"hsva("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var t=Yh(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=Yh(this._r,this._g,this._b),e=Math.round(360*t.h),n=Math.round(100*t.s),r=Math.round(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+r+"%)":"hsla("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(t){return $h(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,n,r,i){var o=[md(Math.round(t).toString(16)),md(Math.round(e).toString(16)),md(Math.round(n).toString(16)),md(vd(r))];if(i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1))return o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0);return o.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*dd(this._r,255))+"%",g:Math.round(100*dd(this._g,255))+"%",b:Math.round(100*dd(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*dd(this._r,255))+"%, "+Math.round(100*dd(this._g,255))+"%, "+Math.round(100*dd(this._b,255))+"%)":"rgba("+Math.round(100*dd(this._r,255))+"%, "+Math.round(100*dd(this._g,255))+"%, "+Math.round(100*dd(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(cd[$h(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+Kh(this._r,this._g,this._b,this._a),n=e,r=this._gradientType?"GradientType = 1, ":"";if(t){var i=Xh(t);n="#"+Kh(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,r=this._a<1&&this._a>=0;return e||!r||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return Xh(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(td,arguments)},brighten:function(){return this._applyModification(ed,arguments)},darken:function(){return this._applyModification(nd,arguments)},desaturate:function(){return this._applyModification(Zh,arguments)},saturate:function(){return this._applyModification(Qh,arguments)},greyscale:function(){return this._applyModification(Jh,arguments)},spin:function(){return this._applyModification(rd,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(sd,arguments)},complement:function(){return this._applyCombination(id,arguments)},monochromatic:function(){return this._applyCombination(ud,arguments)},splitcomplement:function(){return this._applyCombination(ad,arguments)},triad:function(){return this._applyCombination(od,[3])},tetrad:function(){return this._applyCombination(od,[4])}},Xh.fromRatio=function(t,e){if("object"==Hh(t)){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]="a"===r?t[r]:gd(t[r]));t=n}return Xh(t,e)},Xh.equals=function(t,e){return!(!t||!e)&&Xh(t).toRgbString()==Xh(e).toRgbString()},Xh.random=function(){return Xh.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},Xh.mix=function(t,e,n){n=0===n?0:n||50;var r=Xh(t).toRgb(),i=Xh(e).toRgb(),o=n/100;return Xh({r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a})},Xh.readability=function(t,e){var n=Xh(t),r=Xh(e);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)},Xh.isReadable=function(t,e,n){var r,i,o=Xh.readability(t,e);switch(i=!1,(r=function(t){var e,n;e=((t=t||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA");"small"!==n&&"large"!==n&&(n="small");return{level:e,size:n}}(n)).level+r.size){case"AAsmall":case"AAAlarge":i=o>=4.5;break;case"AAlarge":i=o>=3;break;case"AAAsmall":i=o>=7}return i},Xh.mostReadable=function(t,e,n){var r,i,o,a,s=null,u=0;i=(n=n||{}).includeFallbackColors,o=n.level,a=n.size;for(var l=0;l<e.length;l++)(r=Xh.readability(t,e[l]))>u&&(u=r,s=Xh(e[l]));return Xh.isReadable(t,s,{level:o,size:a})||!i?s:(n.includeFallbackColors=!1,Xh.mostReadable(t,["#fff","#000"],n))};var ld=Xh.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},cd=Xh.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(ld);function hd(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function dd(t,e){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var n=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function fd(t){return Math.min(1,Math.max(0,t))}function pd(t){return parseInt(t,16)}function md(t){return 1==t.length?"0"+t:""+t}function gd(t){return t<=1&&(t=100*t+"%"),t}function vd(t){return Math.round(255*parseFloat(t)).toString(16)}function yd(t){return pd(t)/255}var bd,xd,wd,_d=(xd="[\\s|\\(]+("+(bd="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+bd+")[,|\\s]+("+bd+")\\s*\\)?",wd="[\\s|\\(]+("+bd+")[,|\\s]+("+bd+")[,|\\s]+("+bd+")[,|\\s]+("+bd+")\\s*\\)?",{CSS_UNIT:new RegExp(bd),rgb:new RegExp("rgb"+xd),rgba:new RegExp("rgba"+wd),hsl:new RegExp("hsl"+xd),hsla:new RegExp("hsla"+wd),hsv:new RegExp("hsv"+xd),hsva:new RegExp("hsva"+wd),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function Sd(t){return!!_d.CSS_UNIT.exec(t)}var Ed=2,Ad=.16,Md=.05,Cd=.05,Td=.15,kd=5,Id=4,Nd=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function Pd(t,e,n){var r;return(r=Math.round(t.h)>=60&&Math.round(t.h)<=240?n?Math.round(t.h)-Ed*e:Math.round(t.h)+Ed*e:n?Math.round(t.h)+Ed*e:Math.round(t.h)-Ed*e)<0?r+=360:r>=360&&(r-=360),r}function Od(t,e,n){return 0===t.h&&0===t.s?t.s:((r=n?t.s-Ad*e:e===Id?t.s+Ad:t.s+Md*e)>1&&(r=1),n&&e===kd&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2)));var r}function Ld(t,e,n){var r;return(r=n?t.v+Cd*e:t.v-Td*e)>1&&(r=1),Number(r.toFixed(2))}function Rd(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=Xh(t),i=kd;i>0;i-=1){var o=r.toHsv(),a=Xh({h:Pd(o,i,!0),s:Od(o,i,!0),v:Ld(o,i,!0)}).toHexString();n.push(a)}n.push(r.toHexString());for(var s=1;s<=Id;s+=1){var u=r.toHsv(),l=Xh({h:Pd(u,s),s:Od(u,s),v:Ld(u,s)}).toHexString();n.push(l)}return"dark"===e.theme?Nd.map((function(t){var r=t.index,i=t.opacity;return Xh.mix(e.backgroundColor||"#141414",n[r],100*i).toHexString()})):n}var Dd={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},zd={},Fd={};Object.keys(Dd).forEach((function(t){zd[t]=Rd(Dd[t]),zd[t].primary=zd[t][5],Fd[t]=Rd(Dd[t],{theme:"dark",backgroundColor:"#141414"}),Fd[t].primary=Fd[t][5]}));zd.red,zd.volcano,zd.gold,zd.orange,zd.yellow,zd.lime,zd.green,zd.cyan,zd.blue,zd.geekblue,zd.purple,zd.magenta,zd.grey;var Bd=function(t,e,n){var r=Vh()(t),i=Vh()(e);return Vh()([(1-n)*r.red()+n*i.red(),(1-n)*r.green()+n*i.green(),(1-n)*r.blue()+n*i.blue()]).rgb()},Ud=function(t,e,n,r){return void 0===e&&(e="#fff"),void 0===n&&(n="default"),void 0===r&&(r="rgb(150, 150, 150)"),"default"===n?function(t,e,n){void 0===e&&(e="#fff"),void 0===n&&(n="rgb(150, 150, 150)");var r=Bd(e,t,.05).rgb().toString(),i=Bd(e,t,.1).rgb().toString(),o=Bd(e,t,.2).rgb().toString(),a=Bd(e,t,.4).rgb().toString(),s=Bd(e,n,.02).rgb().toString(),u=Bd(e,n,.05).rgb().toString(),l=Bd(e,n,.1).rgb().toString(),c=Bd(e,n,.2).rgb().toString(),h=Bd(e,n,.3).rgb().toString(),d=Rd(t,{theme:"default",backgroundColor:e}),f=Vh()(t).hex().toLowerCase(),p=d.indexOf(f),m=t;return-1!==p&&(m=d[p+1]),{mainStroke:t,mainFill:i,activeStroke:t,activeFill:r,inactiveStroke:a,inactiveFill:r,selectedStroke:t,selectedFill:e,highlightStroke:m,highlightFill:o,disableStroke:h,disableFill:u,edgeMainStroke:h,edgeActiveStroke:t,edgeInactiveStroke:c,edgeSelectedStroke:t,edgeHighlightStroke:t,edgeDisableStroke:l,comboMainStroke:h,comboMainFill:s,comboActiveStroke:t,comboActiveFill:r,comboInactiveStroke:h,comboInactiveFill:s,comboSelectedStroke:t,comboSelectedFill:s,comboHighlightStroke:m,comboHighlightFill:s,comboDisableStroke:c,comboDisableFill:u}}(t,e,"rgb(150, 150, 150)"):function(t,e,n){void 0===e&&(e="#fff"),void 0===n&&(n="#777");var r=Bd(e,t,.2).rgb().toString(),i=Bd(e,t,.3).rgb().toString(),o=Bd(e,t,.6).rgb().toString(),a=Bd(e,t,.8).rgb().toString(),s=Bd(e,n,.2).rgb().toString(),u=Bd(e,n,.25).rgb().toString(),l=Bd(e,n,.3).rgb().toString(),c=Bd(e,n,.4).rgb().toString(),h=Bd(e,n,.5).rgb().toString(),d=Rd(t,{theme:"dark",backgroundColor:e}),f=Vh()(t).hex().toLowerCase(),p=d.indexOf(f),m=t;return-1!==p&&(m=d[p+1]),{mainStroke:a,mainFill:r,activeStroke:t,activeFill:i,inactiveStroke:a,inactiveFill:r,selectedStroke:t,selectedFill:r,highlightStroke:t,highlightFill:o,disableStroke:h,disableFill:u,edgeMainStroke:n,edgeActiveStroke:t,edgeInactiveStroke:n,edgeSelectedStroke:t,edgeHighlightStroke:t,edgeDisableStroke:l,comboMainStroke:c,comboMainFill:u,comboActiveStroke:t,comboActiveFill:s,comboInactiveStroke:c,comboInactiveFill:u,comboSelectedStroke:t,comboSelectedFill:s,comboHighlightStroke:m,comboHighlightFill:u,comboDisableStroke:c,comboDisableFill:s}}(t,e,"#777")},jd=function(t,e,n,r){void 0===e&&(e="#fff"),void 0===n&&(n="default"),void 0===r&&(r="rgb(150, 150, 150)");var i=[];return t.forEach((function(t){i.push(Ud(t,e,n,r))})),i},Vd="rgb(0, 0, 0)",Hd=Ud("rgb(95, 149, 255)","rgb(255, 255, 255)");const Gd={version:"0.8.23",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:Hd.mainStroke,fill:Hd.mainFill},size:20,color:Hd.mainStroke,linkPoints:{size:8,lineWidth:1,fill:Hd.activeFill,stroke:Hd.activeStroke}},nodeStateStyles:{active:{fill:Hd.activeFill,stroke:Hd.activeStroke,lineWidth:2,shadowColor:Hd.mainStroke,shadowBlur:10},selected:{fill:Hd.selectedFill,stroke:Hd.selectedStroke,lineWidth:4,shadowColor:Hd.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:Hd.highlightFill,stroke:Hd.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:Hd.inactiveFill,stroke:Hd.inactiveStroke,lineWidth:1},disable:{fill:Hd.disableFill,stroke:Hd.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:Vd,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:Hd.edgeMainStroke,lineAppendWidth:2},color:Hd.edgeMainStroke},edgeStateStyles:{active:{stroke:Hd.edgeActiveStroke,lineWidth:1},selected:{stroke:Hd.edgeSelectedStroke,lineWidth:2,shadowColor:Hd.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Hd.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:Hd.edgeInactiveStroke,lineWidth:1},disable:{stroke:Hd.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:Vd,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:Hd.comboMainFill,lineWidth:1,stroke:Hd.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:Hd.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:Hd.comboActiveStroke,lineWidth:1,fill:Hd.comboActiveFill},selected:{stroke:Hd.comboSelectedStroke,lineWidth:2,fill:Hd.comboSelectedFill,shadowColor:Hd.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Hd.comboHighlightStroke,lineWidth:2,fill:Hd.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:Hd.comboInactiveStroke,fill:Hd.comboInactiveFill,lineWidth:1},disable:{stroke:Hd.comboDisableStroke,fill:Hd.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"};var Wd=function t(e,n){var r;e.isGroup()&&n.isGroup()&&(null===(r=e.get("children"))||void 0===r||r.forEach((function(e,r){var i=n.get("children")[r];t(e,i)})));var i=e.get("type"),o=n.get("type");if("image"===i&&"image"===o){var a=e.get("clipShape");a&&n.setClip({type:a.get("type"),attrs:a.attr()})}};function Xd(t,e,n){if(t){if("function"==typeof t.addEventListener)return t.addEventListener(e,n,!1),{remove:function(){t.removeEventListener(e,n,!1)}};if("function"==typeof t.attachEvent)return t.attachEvent("on"+e,n),{remove:function(){t.detachEvent("on"+e,n)}}}}var Yd=el.cloneEvent,qd=el.isViewportChanged,$d=function(t){function e(e){var n=t.call(this,e)||this;return n.extendEvents=[],n.dragging=!1,n.mousedown=!1,n.preItem=null,n.destroy(),n.graph=e,n.destroyed=!1,n.initEvents(),n}return(0,b.__extends)(e,t),e.prototype.initEvents=function(){var t=this.graph,e=this.extendEvents,n=void 0===e?[]:e,r=t.get("canvas"),i=r.get("el"),o=(0,x.wrapBehavior)(this,"onCanvasEvents"),a=(0,x.wrapBehavior)(this,"onExtendEvents"),s=(0,x.wrapBehavior)(this,"onWheelEvent");r.off("*").on("*",o),this.canvasHandler=o,n.push(Xd(i,"wheel",s)),"undefined"!=typeof window&&(n.push(Xd(window,"keydown",a)),n.push(Xd(window,"keyup",a)),n.push(Xd(window,"focus",a))),this.resetHandler&&t.off("afterchangedata",this.resetHandler),this.resetHandler=(0,x.wrapBehavior)(this,"resetStatus"),t.on("afterchangedata",this.resetHandler)},e.getItemRoot=function(t){for(;t&&!t.get("item");)t=t.get("parent");return t},e.prototype.onCanvasEvents=function(t){var n=this,r=this.graph,i=r.get("canvas"),o=t.target,a=t.type;switch(a){case"drag":this.onCanvasEvents(Object.assign({},t,{type:"mousemove"}));break;case"dragend":this.onCanvasEvents(Object.assign({},t,{type:"mouseup"}));break;case"mousedown":this.mousedown=!0;break;case"mouseup":setTimeout((function(){return n.mousedown=!1}));break;case"click":if(!this.mousedown)return}t.canvasX=t.x,t.canvasY=t.y;var s={x:t.canvasX,y:t.canvasY},u=r.get("group").getMatrix();if(u||(u=[1,0,0,0,1,0,0,0,1]),qd(u)&&(s=r.getPointByClient(t.clientX,t.clientY)),t.x=s.x,t.y=s.y,t.currentTarget=r,o===i)return"mousemove"!==a&&"mouseleave"!==a||this.handleMouseMove(t,"canvas"),t.target=i,t.item=null,r.emit(a,t),void r.emit("canvas:".concat(a),t);var l=e.getItemRoot(o);if(l){var c=l.get("item");if(!c.destroyed){var h=c.getType();if(t.target=o,t.item=c,t.canvasX===t.x&&t.canvasY===t.y){var d=r.getCanvasByPoint(t.x,t.y);t.canvasX=d.x,t.canvasY=d.y}t.name&&!t.name.includes(":")?(r.emit("".concat(h,":").concat(a),t),r.emit(a,t)):t.name&&r.emit(t.name,t),"dragstart"===a&&(this.dragging=!0),"dragend"===a&&(this.dragging=!1),"mousemove"===a&&this.handleMouseMove(t,h)}}else r.emit(a,t)},e.prototype.onExtendEvents=function(t){this.graph.emit(t.type,t)},e.prototype.onWheelEvent=function(t){(0,x.isNil)(t.wheelDelta)&&(t.wheelDelta=-t.detail),this.graph.emit("wheel",t)},e.prototype.handleMouseMove=function(t,e){var n=this.graph,r=this.preItem,i=n.get("canvas"),o=t.target===i?null:t.item;t=Yd(t),r&&r!==o&&!r.destroyed&&(t.item=r,this.emitCustomEvent(r.getType(),"mouseleave",t),this.dragging&&this.emitCustomEvent(r.getType(),"dragleave",t)),o&&r!==o&&(t.item=o,this.emitCustomEvent(e,"mouseenter",t),this.dragging&&this.emitCustomEvent(e,"dragenter",t)),this.preItem=o},e.prototype.emitCustomEvent=function(t,e,n){n.type=e,this.graph.emit("".concat(t,":").concat(e),n)},e.prototype.resetStatus=function(){this.mousedown=!1,this.dragging=!1,this.preItem=null},e.prototype.destroy=function(){var t=this,e=t.graph,n=t.canvasHandler,r=t.extendEvents;e.get("canvas").off("*",n),(0,x.each)(r,(function(t){t.remove()})),this.resetStatus(),this.extendEvents.length=0,this.canvasHandler=null,this.resetHandler=null,this.destroyed=!0},e}(ol);const Kd=$d;var Zd=n(84821),Qd=n(5802),Jd=n.n(Qd),tf=el.traverseTree,ef=function(t,e){return t?(0,x.isNumber)(t)?function(e){return t}:t:function(t){return e||1}},nf=function(t,e){var n=[],r=[],i={},o=0;for(o=0;o<t.length;o++){var a=t[o];i[a.id]=o,n.push(a.x),n.push(a.y),n.push(0),n.push(0),r.push([])}for(o=0;o<e.length;o++){var s=e[o];r[i[s.source]].push(i[s.target]),r[i[s.target]].push(i[s.source])}var u=0;for(o=0;o<t.length;o++){var l=n.length,c=r[o],h=c.length;n[4*o+2]=l,n[4*o+3]=c.length,u=Math.max(u,c.length);for(var d=0;d<h;++d){var f=c[d];n.push(+f)}}for(;n.length%4!=0;)n.push(0);return{array:new Float32Array(n),maxEdgePerVetex:u}},rf=function(t,e,n){var r=[],i=[],o={},a=0;for(a=0;a<t.length;a++){var s=t[a];o[s.id]=a,r.push(s.x),r.push(s.y),r.push(0),r.push(0),i.push([])}for(a=0;a<e.length;a++){var u=e[a];i[o[u.source]].push(o[u.target]),i[o[u.source]].push(n(u)),i[o[u.target]].push(o[u.source]),i[o[u.target]].push(n(u))}var l=0;for(a=0;a<t.length;a++){var c=r.length,h=i[a],d=h.length;r[4*a+2]=c,r[4*a+3]=d/2,l=Math.max(l,d/2);for(var f=0;f<d;++f){var p=h[f];r.push(+p)}}for(;r.length%4!=0;)r.push(0);return{array:new Float32Array(r),maxEdgePerVetex:l}},of=function(t,e,n,r){var i=[],o=[],a={},s=0;for(s=0;s<t.length;s++){var u=t[s];a[u.id]=s,i.push(u.x),i.push(u.y),i.push(0),i.push(0),o.push([])}for(s=0;s<e.length;s++){var l=e[s];o[a[l.source]].push(a[l.target]),o[a[l.source]].push(n(l)),o[a[l.source]].push(r(l)),o[a[l.source]].push(0),o[a[l.target]].push(a[l.source]),o[a[l.target]].push(n(l)),o[a[l.target]].push(r(l)),o[a[l.target]].push(0)}var c=0;for(s=0;s<t.length;s++){var h=i.length,d=o[s],f=d.length;i[4*s+2]=h+1048576*f/4,i[4*s+3]=0,c=Math.max(c,f/4);for(var p=0;p<f;++p){var m=d[p];i.push(+m)}}for(;i.length%4!=0;)i.push(0);return{array:new Float32Array(i),maxEdgePerVetex:c}},af=function(t,e){var n=[],r=t.length,i={};return e.forEach((function(e){t.forEach((function(t,o){if(void 0===i[e[t]]&&(i[e[t]]=Object.keys(i).length),n.push(i[e[t]]),o===r-1)for(;n.length%4!=0;)n.push(0)}))})),{array:new Float32Array(n),count:Object.keys(i).length}},sf=function(t){for(var e=[],n=t.length,r=t[0].length,i=function(r){t.forEach((function(t,i){if(e.push(t[r]),i===n-1)for(;e.length%4!=0;)e.push(0)}))},o=0;o<r;o++)i(o);return new Float32Array(e)},uf=function(t,e){var n={x:1/0,y:1/0},r={x:-1/0,y:-1/0},i="x",o="y";e&&["V","TB","BT"].indexOf(e)>=0&&(o="x",i="y");var a=0;tf(t,(function(t){return a++,t.x>r.x&&(r.x=t.x),t.x<n.x&&(n.x=t.x),t.y>r.y&&(r.y=t.y),t.y<n.y&&(n.y=t.y),!0}));var s=2*Math.PI/a,u=r[o]-n[o];return 0===u||tf(t,(function(e){var r=(e[o]-n[o])/u*(2*Math.PI-s)+s,a=Math.abs("x"===i?e.x-t.x:e.y-t.y);return e.x=a*Math.cos(r),e.y=a*Math.sin(r),!0})),t},lf=function t(){return"undefined"==typeof window||"undefined"==typeof document?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var t=document.createElement("canvas");return!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(t){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var t=document.createElement("div");return t.id="webgl-error-message",t.style.fontFamily="monospace",t.style.fontSize="13px",t.style.fontWeight="normal",t.style.textAlign="center",t.style.background="#fff",t.style.color="#000",t.style.padding="1.5em",t.style.width="400px",t.style.margin="5em auto 0",this.webgl||(t.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join("\n")),t},addGetWebGLMessage:function(e){var n=void 0!==(e=e||{}).parent?e.parent:document.body,r=void 0!==e.id?e.id:"oldie",i=t().getWebGLErrorMessage();i.id=r,n.appendChild(i)}}},cf=function(){var t=navigator.userAgent.toLowerCase();return t.indexOf("firefox")>-1?"firefox":t.indexOf("safari")>-1?"safari":t.indexOf("opr")>-1?"opera":t.indexOf("chrome")>-1?"chrome":t.indexOf("trident")>-1?"ie 11":t.indexOf("ie")>-1?"ie":"unknown"};const hf=(0,b.__assign)((0,b.__assign)((0,b.__assign)((0,b.__assign)((0,b.__assign)({},el),p),m),g),v);var df=hf.radialLayout;const ff=function(){function t(t){this.type=t.type,this.radial=t.radial,this.config=t}return t.prototype.init=function(t){var e=this;this.data=t,this.radial?this.layoutMethod=function(t){var n=Jd()[e.type](t,e.config);return df(n),n}:this.layoutMethod=function(t){return Jd()[e.type](t,e.config)}},t.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},t.prototype.layout=function(t){return this.init(t),this.execute()},t}();(0,Zd.registerLayout)("grid",Zd.GridLayout),(0,Zd.registerLayout)("random",Zd.RandomLayout),(0,Zd.registerLayout)("force",Zd.ForceLayout),(0,Zd.registerLayout)("circular",Zd.CircularLayout),(0,Zd.registerLayout)("dagre",Zd.DagreLayout),(0,Zd.registerLayout)("dagreCompound",Zd.DagreCompoundLayout),(0,Zd.registerLayout)("radial",Zd.RadialLayout),(0,Zd.registerLayout)("concentric",Zd.ConcentricLayout),(0,Zd.registerLayout)("mds",Zd.MDSLayout),(0,Zd.registerLayout)("fruchterman",Zd.FruchtermanLayout),(0,Zd.registerLayout)("fruchterman-gpu",Zd.FruchtermanGPULayout),(0,Zd.registerLayout)("gForce",Zd.GForceLayout),(0,Zd.registerLayout)("force2",Zd.Force2Layout),(0,Zd.registerLayout)("gForce-gpu",Zd.GForceGPULayout),(0,Zd.registerLayout)("comboForce",Zd.ComboForceLayout),(0,Zd.registerLayout)("comboCombined",Zd.ComboCombinedLayout),(0,Zd.registerLayout)("forceAtlas2",Zd.ForceAtlas2Layout);const pf=function(t,e){var n=t.toString(),r=new Blob(["importScripts('".concat(e,"');(").concat(n,")()")],{type:"text/javascript"});return new Worker(URL.createObjectURL(r))};var mf=function(t){void 0===t&&(t="https://unpkg.com/@antv/layout@0.3.23/dist/layout.min.js");var e=new pf((function(){var t="LAYOUT_RUN",e="LAYOUT_END",n="LAYOUT_ERROR",r="GPU_LAYOUT_RUN";layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("force2",layout.Force2Layout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("dagreCompound",layout.DagreCompoundLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("comboCombined",layout.ComboCombinedLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout),onmessage=function(i){(function(e){var n=e.data.type;return n===t||n===r})(i)&&function(i){var o=this;switch(i.data.type){case t:var a,s=i.data,u=s.nodes,l=s.edges,c=s.layoutCfg,h=(g=void 0===c?{}:c).type;if(!(d=layout.getLayoutByName(h))){this.postMessage({type:n,message:"layout ".concat(h," not found")});break}g.onLayoutEnd=function(){o.postMessage({type:e,nodes:u}),null==a||a.destroy()},(a=new d(g)).init({nodes:u,edges:l}),a.execute();break;case r:var d,f=i.data,p=f.nodes,m=(l=f.edges,f.layoutCfg),g=void 0===m?{}:m,v=f.canvas;if(h=g.type,!(d=layout.getLayoutByName(h))){this.postMessage({type:n,message:"layout ".concat(h," not found")});break}if("gpu"!==h.split("-")[1]){this.postMessage({type:n,message:"layout ".concat(h," does not support GPU")});break}var y=new d(g);y.init({nodes:p,edges:l}),y.executeWithWorker(v,this)}}(i)}}),t);return e},gf="LAYOUT_RUN",vf="LAYOUT_END",yf="LAYOUT_ERROR",bf="LAYOUT_TICK",xf="GPU_LAYOUT_RUN",wf="GPU_LAYOUT_END";function _f(t){return _f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_f(t)}var Sf=function(t){return setTimeout(t,16)},Ef=function(t){return clearTimeout(t)},Af=function(t){return("undefined"!=typeof window&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||Sf)(t)},Mf=function(t){return("undefined"!=typeof window&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||Ef)(t)},Cf=["fruchterman","gForce"],Tf=["force","grid","circular"],kf=function(t){function e(e){var n=t.call(this,e)||this;return n.graph=e,n.layoutCfg=e.get("layout")||{},n.layoutType=n.getLayoutType(),n.worker=null,n.workerData={},n.initLayout(),n}return(0,b.__extends)(e,t),e.prototype.initLayout=function(){},e.prototype.getWorker=function(){return this.worker||("undefined"==typeof Worker?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=mf(this.layoutCfg.workerScriptURL)),this.worker},e.prototype.stopWorker=function(){var t=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,t.requestId&&(Mf(t.requestId),t.requestId=null),t.requestId2&&(Mf(t.requestId2),t.requestId2=null))},e.prototype.execLayoutMethod=function(t,e){var n=this;return new Promise((function(r,i){return(0,b.__awaiter)(n,void 0,void 0,(function(){var n,o,a,s,u,l,c,h,d;return(0,b.__generator)(this,(function(f){switch(f.label){case 0:if(!(n=this.graph)||n.get("destroyed"))return[2];o=t.type,t.onLayoutEnd=function(){n.emit("aftersublayout",{type:o}),r()},o&&this.isGPU&&(Pf(o)?o="".concat(o,"-gpu"):console.warn("The '".concat(o,"' layout does not support GPU calculation for now, it will run in CPU."))),el.isForce(o)?(a=t.onTick,s=t.animate,u=void 0===s&&("force"===o||"force2"===o),h=function(){a&&a(),(s||u)&&n.refreshPositions()},t.tick=h):"comboForce"!==o&&"comboCombined"!==o||(t.comboTrees=n.get("comboTrees")),!1;try{l=new Zd.Layouts[o](t),this.layoutMethods[e]&&this.layoutMethods[e].destroy(),this.layoutMethods[e]=l}catch(t){console.warn("The layout method: '".concat(o,"' does not exist! Please specify it first.")),i()}return l.enableTick&&(c=t.onTick,h=function(){c&&c(),n.refreshPositions()},l.tick=h),function(t,e){var n;if(!(null===(n=null==t?void 0:t.nodes)||void 0===n?void 0:n.length))return;t.nodes.forEach((function(t){t.layoutOrder=e}))}(d=this.filterLayoutData(this.data,t),e),l.init(d),n.emit("beforesublayout",{type:o}),[4,l.execute()];case 1:return f.sent(),l.isCustomLayout&&t.onLayoutEnd&&t.onLayoutEnd(),[2]}}))}))}))},e.prototype.updateLayoutMethod=function(t,e){var n=this;return new Promise((function(r,i){return(0,b.__awaiter)(n,void 0,void 0,(function(){var n,i,o,a,s,u,l;return(0,b.__generator)(this,(function(c){switch(c.label){case 0:return n=this.graph,i=null==e?void 0:e.type,e.onLayoutEnd=function(){n.emit("aftersublayout",{type:i}),r()},el.isForce(i)&&(o=e.onTick,a=e.animate,s=void 0===a&&("force"===i||"force2"===i),u=function(){null==o||o(),(a||s)&&n.refreshPositions()},e.tick=u),l=this.filterLayoutData(this.data,e),t.init(l),t.updateCfg(e),n.emit("beforesublayout",{type:i}),[4,t.execute()];case 1:return c.sent(),t.isCustomLayout&&e.onLayoutEnd&&e.onLayoutEnd(),[2]}}))}))}))},e.prototype.layout=function(t){var e,n=this,r=this.graph;if(r&&!r.get("destroyed")){this.data=this.setDataFromGraph();var i=this.data,o=i.nodes,a=i.hiddenNodes;if(!o)return!1;var s=r.get("width"),u=r.get("height"),l={};Object.assign(l,{width:s,height:u,center:[s/2,u/2]},this.layoutCfg),this.layoutCfg=l;var c=l.type,h=!1;null===(e=this.layoutMethods)||void 0===e||e.forEach((function(t){var e;return h=!!(null===(e=t.nodes)||void 0===e?void 0:e.length)||h}));var d=this.destoryLayoutMethods();r.emit("beforelayout");var f=Promise.resolve();h&&c&&1===(null==d?void 0:d.length)&&d[0]===c?this.tweakInit():f=this.initPositions(l.center,o),this.initPositions(l.center,a).then(),this.isGPU=Of(l,c);var p=l.onLayoutEnd,m=l.layoutEndFormatted,g=l.adjust;if(m||(l.layoutEndFormatted=!0,l.onAllLayoutEnd=function(){return(0,b.__awaiter)(n,void 0,void 0,(function(){return(0,b.__generator)(this,(function(t){switch(t.label){case 0:return p&&p(o),this.refreshLayout(),g&&l.pipes?[4,this.adjustPipesBox(this.data,g)]:[3,2];case 1:t.sent(),this.refreshLayout(),t.label=2;case 2:return r.emit("afterlayout"),[2]}}))}))}),this.stopWorker(),l.workerEnabled&&this.layoutWithWorker(this.data,t))return!0;var v=!1;return l.type?(v=!0,f=f.then((function(){return(0,b.__awaiter)(n,void 0,void 0,(function(){return(0,b.__generator)(this,(function(t){switch(t.label){case 0:return[4,this.execLayoutMethod(l,0)];case 1:return[2,t.sent()]}}))}))}))):l.pipes&&(v=!0,l.pipes.forEach((function(t,e){f=f.then((function(){return(0,b.__awaiter)(n,void 0,void 0,(function(){return(0,b.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.execLayoutMethod(t,e)];case 1:return[2,n.sent()]}}))}))}))}))),v?f.then((function(){l.onAllLayoutEnd&&l.onAllLayoutEnd(),t&&t()})).catch((function(t){console.warn("graph layout failed,",t)})):(r.refreshPositions(),null==t||t()),!1}},e.prototype.tweakInit=function(){var t=this.data,e=this.graph,n=t.nodes,r=t.edges;if(null==n?void 0:n.length){var i={};n.forEach((function(t){var e=t.x,n=t.y;isNaN(e)||isNaN(n)||(i[t.id]={x:e,y:n},t.mass=t.mass||2)})),r.forEach((function(t){var e=t.source,n=t.target,r=i[e],o=i[n];!r&&o?i[e]={x:o.x+80*(Math.random()-.5),y:o.y+80*(Math.random()-.5)}:!o&&r&&(i[n]={x:r.x+80*(Math.random()-.5),y:r.y+80*(Math.random()-.5)})}));var o=e.get("width"),a=e.get("height");n.forEach((function(t){var e=i[t.id]||{x:o/2+20*(Math.random()-.5),y:a/2+20*(Math.random()-.5)};t.x=e.x,t.y=e.y}))}},e.prototype.initWithPreset=function(t,e){var n=this;return new Promise((function(r,i){return(0,b.__awaiter)(n,void 0,void 0,(function(){var n,i,o,a,s,u,l;return(0,b.__generator)(this,(function(c){switch(c.label){case 0:return i=(n=this).layoutCfg,o=n.data,(null==(a=i.preset)?void 0:a.type)&&Zd.Layouts[null==a?void 0:a.type]?(s=Of(a,a.type),u=s?"".concat(a.type,"-gpu"):a.type,l=new Zd.Layouts[u](a),delete i.preset,l.init(o),[4,l.execute()]):(null==e||e(),r(),[2,!1]);case 1:return c.sent(),null==t||t(),r(),[2,!0]}}))}))}))},e.prototype.layoutWithWorker=function(t,e){var n=this,r=this.layoutCfg,i=this.graph,o=this.getWorker(),a=this.workerData;if(!o)return!1;a.requestId=null,a.requestId2=null,a.currentTick=null,a.currentTickData=null,i.emit("beforelayout");var s=Promise.resolve(),u=!1;if(r.type)u=!0,s=s.then((function(){return n.runWebworker(o,t,r)}));else if(r.pipes){u=!0;for(var l=function(e){s=s.then((function(){return n.runWebworker(o,t,e)}))},c=0,h=r.pipes;c<h.length;c++){l(h[c])}}return u&&s.then((function(){r.onAllLayoutEnd&&r.onAllLayoutEnd(),null==e||e()})).catch((function(t){console.error("layout failed",t)})),!0},e.prototype.runWebworker=function(t,e,n){var r=this,i=this.isGPU,o=this.filterLayoutData(e,n),a=o.nodes,s=o.edges,u=document.createElement("canvas"),l=i&&"undefined"!=typeof window&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in u,c=function(t,e){var n={};if(t&&"object"===_f(t))return Object.keys(t).forEach((function(r){t.hasOwnProperty(r)&&e(t[r])&&(n[r]=t[r])})),n;return t}(n,(function(t){return"function"!=typeof t}));if(l){var h=u.transferControlToOffscreen();c.type="".concat(c.type,"-gpu"),t.postMessage({type:xf,nodes:a,edges:s,layoutCfg:c,canvas:h},[h])}else t.postMessage({type:gf,nodes:a,edges:s,layoutCfg:c});return new Promise((function(e,i){t.onmessage=function(t){r.handleWorkerMessage(e,i,t,o,n)}}))},e.prototype.handleWorkerMessage=function(t,e,n,r,i){var o=this.graph,a=this.workerData,s=n.data,u=s.type,l=function(){i.onTick&&i.onTick()};switch(u){case bf:a.currentTick=s.currentTick,a.currentTickData=s,a.requestId||(a.requestId=Af((function(){Nf(r,s),o.refreshPositions(),l(),s.currentTick===s.totalTicks?t():a.currentTick===s.totalTicks&&(a.requestId2=Af((function(){Nf(r,a.currentTickData),o.refreshPositions(),a.requestId2=null,l(),t()}))),a.requestId=null})));break;case vf:null==a.currentTick&&(Nf(r,s),t());break;case wf:null==a.currentTick&&(!function(t,e){for(var n=t.nodes,r=e.vertexEdgeData,i=n.length,o=0;o<i;o++){var a=n[o],s=r[4*o],u=r[4*o+1];a.x=s,a.y=u}}(r,s),t());break;case yf:console.warn("Web-Worker layout error!",s.message),e();break;default:e()}},e.prototype.updateLayoutCfg=function(t){var e=this,n=this.graph,r=this.layoutMethods;if(n&&!n.get("destroyed")){var i=t.disableTriggerLayout,o=(0,b.__rest)(t,["disableTriggerLayout"]),a=(0,x.mix)({},this.layoutCfg,o);if(this.layoutCfg=a,!i)if(null==r?void 0:r.length){if(this.data=this.setDataFromGraph(),this.stopWorker(),!o.workerEnabled||!this.layoutWithWorker(this.data,null)){n.emit("beforelayout");var s=Promise.resolve(),u=!1;1===(null==r?void 0:r.length)?(u=!0,s=s.then((function(){return(0,b.__awaiter)(e,void 0,void 0,(function(){return(0,b.__generator)(this,(function(t){switch(t.label){case 0:return[4,this.updateLayoutMethod(r[0],a)];case 1:return[2,t.sent()]}}))}))}))):(null==r?void 0:r.length)&&(u=!0,r.forEach((function(t,n){var r=a.pipes[n];s=s.then((function(){return(0,b.__awaiter)(e,void 0,void 0,(function(){return(0,b.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.updateLayoutMethod(t,r)];case 1:return[2,e.sent()]}}))}))}))}))),u&&s.then((function(){a.onAllLayoutEnd&&a.onAllLayoutEnd()})).catch((function(t){console.warn("layout failed",t)}))}}else this.layout()}},e.prototype.adjustPipesBox=function(t,e){var n=this;return new Promise((function(r){var i=t.nodes;(null==i?void 0:i.length)||r(),Tf.includes(e)||(console.warn("The adjust type ".concat(e," is not supported yet, please assign it with 'force', 'grid', or 'circular'.")),r());var o={center:n.layoutCfg.center,nodeSize:function(t){return Math.max(t.height,t.width)},preventOverlap:!0,onLayoutEnd:function(){}},a=n.getLayoutBBox(i),s=a.groupNodes,u=a.layoutNodes,l=(0,x.clone)(u);o.onLayoutEnd=function(){null==u||u.forEach((function(t,e){var n,r,i,o=t.x-(null===(n=l[e])||void 0===n?void 0:n.x),a=t.y-(null===(r=l[e])||void 0===r?void 0:r.y);null===(i=s[e])||void 0===i||i.forEach((function(t){t.x+=o,t.y+=a}))})),r()},new Zd.Layouts[e](o).layout({nodes:u})}))},e.prototype.destroy=function(){this.destoryLayoutMethods();var t=this.worker;t&&(t.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},e}(rl);const If=kf;function Nf(t,e){for(var n=t.nodes,r=e.nodes,i=n.length,o=0;o<i;o++){var a=n[o];a.x=r[o].x,a.y=r[o].y}}function Pf(t){return Cf.includes(t)}function Of(t,e){var n=e;e&&"gpu"===e.split("-")[1]&&(n=e.split("-")[0],t.gpuEnabled=!0);var r=!1;return t.gpuEnabled&&(r=!0,lf().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),r=!1)),r&&!Pf(n)&&(console.warn("The '".concat(n,"' layout does not support GPU calculation for now, it will run in CPU.")),r=!1),r}var Lf=N,Rf=function(t){function e(e){var n=t.call(this,e)||this,r=n.get("defaultNode");return r||n.set("defaultNode",{type:"circle"}),r.type||(r.type="circle",n.set("defaultNode",r)),n.destroyed=!1,n}return(0,b.__extends)(e,t),e.prototype.initLayoutController=function(){var t=new If(this);this.set({layoutController:t})},e.prototype.initEventController=function(){var t=new Kd(this);this.set({eventController:t})},e.prototype.initCanvas=function(){var t=this.get("container");if("string"==typeof t&&(t=document.getElementById(t),this.set("container",t)),!t)throw new Error("invalid container");var e,n=t.clientWidth,r=t.clientHeight,i=this.get("width")||n,o=this.get("height")||r;if(this.get("width")||this.get("height")||(this.set("width",n),this.set("height",r)),"svg"===this.get("renderer"))e=new Rh({container:t,width:i,height:o});else{var a={container:t,width:i,height:o},s=this.get("pixelRatio");s&&(a.pixelRatio=s,window.devicePixelRatio=s),e=new Ic(a)}this.set("canvas",e)},e.prototype.initPlugins=function(){var t=this;(0,x.each)(t.get("plugins"),(function(e){!e.destroyed&&e.initPlugin&&e.initPlugin(t)}))},e.prototype.downloadImageWatermark=function(t,e,n,r){return(0,b.__awaiter)(this,void 0,void 0,(function(){var i,o,a;return(0,b.__generator)(this,(function(s){switch(s.label){case 0:return i=t.style.backgroundImage,o=i.slice(5,i.length-2),(a=new Image).src=o,[4,new Promise((function(t){a.onload=function(){var i=e.createPattern(a,"repeat");e.rect(0,0,n,r),e.fillStyle=i,e.fill(),t("")}}))];case 1:return s.sent(),[2]}}))}))},e.prototype.asyncToDataUrl=function(t,e,n,r,i,o){var a=this,s=document.querySelector(".g6-graph-watermarker"),u=this.get("canvas"),l=u.getRenderer(),c=o||u.get("el"),h="";t||(t="image/png"),setTimeout((function(){return(0,b.__awaiter)(a,void 0,void 0,(function(){var o,a,u,d,f,p,m,g,v,y;return(0,b.__generator)(this,(function(b){switch(b.label){case 0:return"svg"!==l?[3,1]:(o=c.cloneNode(!0),a=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),(u=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",a)).replaceChild(o,u.documentElement),d=(new XMLSerializer).serializeToString(u),h="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(d)),[3,4]);case 1:return f=void 0,p=c.getContext("2d"),m=r||this.get("width"),g=i||this.get("height"),v=void 0,s?[4,this.downloadImageWatermark(s,p,m,g)]:[3,3];case 2:b.sent(),b.label=3;case 3:if(e){y="undefined"!=typeof window?window.devicePixelRatio:1;try{f=p.getImageData(0,0,m*y,g*y),v=p.globalCompositeOperation,p.globalCompositeOperation="destination-over",p.fillStyle=e,p.fillRect(0,0,m,g)}catch(t){console.error("Download image failed. Out of memory at ImageData creation")}}h=c.toDataURL(t),e&&(p.clearRect(0,0,m,g),p.putImageData(f,0,0),p.globalCompositeOperation=v),b.label=4;case 4:return n&&n(h),[2]}}))}))}),16)},e.prototype.toDataURL=function(t,e){var n=this.get("canvas"),r=n.getRenderer(),i=n.get("el");t||(t="image/png");var o="";if("svg"===r){var a=i.cloneNode(!0),s=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),u=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",s);u.replaceChild(a,u.documentElement);var l=(new XMLSerializer).serializeToString(u);o="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(l))}else{var c=void 0,h=i.getContext("2d"),d=Math.max(this.get("width"),500),f=Math.max(this.get("height"),500),p=void 0;if(e){var m="undefined"!=typeof window&&window.devicePixelRatio||1;try{c=h.getImageData(0,0,d*m,f*m),p=h.globalCompositeOperation,h.globalCompositeOperation="destination-over",h.fillStyle=e,h.fillRect(0,0,d,f)}catch(t){console.error("Download image failed. Out of memory at ImageData creation")}}o=i.toDataURL(t),e&&(h.clearRect(0,0,d,f),h.putImageData(c,0,0),h.globalCompositeOperation=p)}return o},e.prototype.toFullDataURL=function(t,e,n){var r=this.get("group").getCanvasBBox(),i=r.height,o=r.width,a=this.get("renderer"),s=Uh('<div id="virtual-image"></div>'),u=n?n.backgroundColor:void 0,l=n?n.padding:void 0;l?(0,x.isNumber)(l)&&(l=[l,l,l,l]):l=[0,0,0,0];var c=i+l[0]+l[2],h=o+l[1]+l[3],d={container:s,height:c,width:h,quickHit:!0},f="svg"===a?new Rh(d):new Ic(d),p=this.get("group").clone(),m=(0,x.clone)(p.getMatrix());m||(m=[1,0,0,0,1,0,0,0,1]);var g=(r.maxX+r.minX)/2,v=(r.maxY+r.minY)/2;m=Lf(m,[["t",-g,-v],["t",o/2+l[3],i/2+l[0]]]),p.resetMatrix(),p.setMatrix(m),f.add(p);var y=f.get("el"),b="";e||(e="image/png"),setTimeout((function(){if("svg"===a){var n=y.cloneNode(!0),r=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),i=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",r);i.replaceChild(n,i.documentElement);var o=(new XMLSerializer).serializeToString(i);b="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(o))}else{var s=void 0,l=y.getContext("2d"),d=void 0;if(u){var f="undefined"!=typeof window?window.devicePixelRatio:1;try{s=l.getImageData(0,0,h*f,c*f),d=l.globalCompositeOperation,l.globalCompositeOperation="destination-over",l.fillStyle=u,l.fillRect(0,0,h,c)}catch(t){console.error("Download image failed. Out of memory at ImageData creation")}}b=y.toDataURL(e),u&&(l.clearRect(0,0,h,c),l.putImageData(s,0,0),l.globalCompositeOperation=d)}t&&t(b)}),16)},e.prototype.downloadFullImage=function(t,e,n){var r=this,i=this.get("group").getCanvasBBox(),o=i.height,a=i.width,s=this.get("renderer"),u=Uh('<div id="virtual-image"></div>'),l=document.querySelector(".g6-graph-watermarker"),c=n?n.backgroundColor:void 0,h=n?n.padding:void 0;h?(0,x.isNumber)(h)&&(h=[h,h,h,h]):h=[0,0,0,0];var d=o+h[0]+h[2],f=a+h[1]+h[3];if(l){var p=this.get("graphWaterMarker").cfg||{},m=p.width,g=p.height;d=Math.ceil(d/g)*g,f=Math.ceil(f/m)*m}var v,y,b={container:u,height:d,width:f},w="svg"===s?new Rh(b):new Ic(b),_=this.get("group"),S=(y=(v=_).clone(),Wd(v,y),y),E=(0,x.clone)(S.getMatrix());E||(E=[1,0,0,0,1,0,0,0,1]);var A=(i.maxX+i.minX)/2,M=(i.maxY+i.minY)/2;E=Lf(E,[["t",-A,-M],["t",a/2+h[3],o/2+h[0]]]),S.resetMatrix(),S.setMatrix(E),w.add(S);var C=w.get("el");e||(e="image/png"),this.asyncToDataUrl(e,c,(function(n){var i=document.createElement("a"),o=(t||"graph")+("svg"===s?".svg":".".concat(e.split("/")[1]));r.dataURLToImage(n,s,i,o);var a=document.createEvent("MouseEvents");a.initEvent("click",!1,!1),i.dispatchEvent(a)}),f,d,C)},e.prototype.downloadImage=function(t,e,n){var r=this,i=this;i.stopAnimate();var o=i.get("canvas").getRenderer();e||(e="image/png");var a=(t||"graph")+("svg"===o?".svg":".".concat(e.split("/")[1])),s=document.createElement("a");i.asyncToDataUrl(e,n,(function(t){r.dataURLToImage(t,o,s,a);var e=document.createEvent("MouseEvents");e.initEvent("click",!1,!1),s.dispatchEvent(e)}))},e.prototype.dataURLToImage=function(t,e,n,r){if(t&&"data:"!==t){if("undefined"!=typeof window)if(window.Blob&&window.URL&&"svg"!==e){var i=t.split(","),o="";if(i&&i.length>0){var a=i[0].match(/:(.*?);/);a&&a.length>=2&&(o=a[1])}for(var s=atob(i[1]),u=s.length,l=new Uint8Array(u);u--;)l[u]=s.charCodeAt(u);var c=new Blob([l],{type:o});window.navigator.msSaveBlob?window.navigator.msSaveBlob(c,r):n.addEventListener("click",(function(){n.download=r,n.href=window.URL.createObjectURL(c)}))}else n.addEventListener("click",(function(){n.download=r,n.href=t}))}else console.error("Download image failed. The graph is too large or there is invalid attribute values in graph items")},e.prototype.addPlugin=function(t){t.destroyed||(this.get("plugins").push(t),t.initPlugin(this))},e.prototype.removePlugin=function(t){var e=this.get("plugins"),n=e.indexOf(t);n>=0&&(t.destroyPlugin(),e.splice(n,1))},e.prototype.setImageWaterMarker=function(t,e){void 0===t&&(t=Gd.waterMarkerImage);var n=this.get("container");(0,x.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var r=this.get("graphWaterMarker"),i=(0,x.deepMix)({},Gd.imageWaterMarkerConfig,e),o=i.width,a=i.height,s=i.compatible,u=i.image;if(!t){var l=s?n:document.querySelector(".g6-graph-watermarker");return l&&(l.style.cssText=void 0),void(r&&r.clear())}if(r)r.clear();else{var c={container:n,width:o,height:a,capture:!1},h=this.get("pixelRatio");h&&(c.pixelRatio=h,window.devicePixelRatio=h),r=new Ic(c),this.set("graphWaterMarker",r)}r.get("el").style.display="none";var d=r.get("context"),f=u.rotate,p=u.x,m=u.y;d.rotate(-f*Math.PI/180);var g=new Image;g.crossOrigin="anonymous",g.src=t,g.onload=function(){if(d.drawImage(g,p,m,u.width,u.height),d.rotate(f*Math.PI/180),s)n.style.cssText="background-image: url(".concat(r.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var t=document.querySelector(".g6-graph-watermarker");t||((t=document.createElement("div")).className="g6-graph-watermarker"),t.className="g6-graph-watermarker",r.destroyed||(t.style.cssText="background-image: url(".concat(r.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;"),n.appendChild(t))}}},e.prototype.setTextWaterMarker=function(t,e){var n=this.get("container");(0,x.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var r=this.get("graphWaterMarker"),i=(0,x.deepMix)({},Gd.textWaterMarkerConfig,e),o=i.width,a=i.height,s=i.compatible,u=i.text;if(!(null==t?void 0:t.length)){var l=s?n:document.querySelector(".g6-graph-watermarker");return l&&(l.style.cssText=void 0),void(r&&r.clear())}if(r)r.clear();else{var c={container:n,width:o,height:a,capture:!1},h=this.get("pixelRatio");h&&(c.pixelRatio=h,window.devicePixelRatio=h),r=new Ic(c),this.set("graphWaterMarker",r)}r.get("el").style.display="none";var d=r.get("context"),f=u.rotate,p=u.fill,m=u.fontFamily,g=u.fontSize,v=u.baseline,y=u.x,b=u.y,w=u.lineHeight;d.rotate(-f*Math.PI/180),d.font="".concat(g,"px ").concat(m),d.fillStyle=p,d.textBaseline=v;for(var _=(0,x.isString)(t)?[t]:t,S=_.length-1;S>=0;S--)d.fillText(_[S],y,b+S*w);if(d.rotate(f*Math.PI/180),s)n.style.cssText="background-image: url(".concat(r.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var E=document.querySelector(".g6-graph-watermarker");E||((E=document.createElement("div")).className="g6-graph-watermarker"),E.style.cssText="background-image: url(".concat(r.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;"),n.appendChild(E)}},e.prototype.destroy=function(){var e,n,r,i;(0,x.each)(this.get("plugins"),(function(t){t.destroyPlugin()}));var o=this.get("tooltips");if(o)for(var a=0;a<o.length;a++){var s=o[a];if(s){var u=s.parentElement;u&&u.removeChild(s)}}null===(e=this.get("eventController"))||void 0===e||e.destroy(),null===(n=this.get("layoutController"))||void 0===n||n.destroy(),null===(r=this.get("graphWaterMarker"))||void 0===r||r.destroy(),null===(i=document.querySelector(".g6-graph-watermarker"))||void 0===i||i.remove(),t.prototype.destroy.call(this)},e}(Pu);const Df=Rf;function zf(t){return zf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zf(t)}function Ff(t,e){if(void 0===e&&(e=new WeakMap),null===t)return t;if(t instanceof Date)return new Date(t);if(t instanceof RegExp)return new RegExp(t);if("object"!==zf(t))return t;if(e.get(t))return e.get(t);var n=Array.isArray(t)?[]:{};for(var r in e.set(t,n),t)t.hasOwnProperty(r)&&void 0!==t[r]&&(n[r]=Ff(t[r],e));return n}function Bf(t){try{return structuredClone(t)}catch(e){return Ff(t)}}var Uf=hf.radialLayout,jf=hf.traverseTree,Vf=function(t){function e(e){var n=t.call(this,e)||this;return n.layoutAnimating=!1,n.set("removeList",[]),n.set("layoutMethod",n.getLayout()),n}return(0,b.__extends)(e,t),e.prototype.getLayout=function(){var t=this.get("layout");return t?"function"==typeof t?t:(t.type||(t.type="dendrogram"),t.direction||(t.direction="indented"===t.type?"LR":"TB"),t.radial?function(e){var n=Jd()[t.type](e,t);return Uf(n),n}:function(e){return Jd()[t.type](e,t)}):null},e.indexOfChild=function(t,e){var n=-1;return(0,x.each)(t,(function(t,r){if(e===t.id)return n=r,!1})),n},e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.animate=!0,e},e.prototype.innerAddChild=function(t,e,n){var r=this,i=t.data;i&&(i.x=t.x,i.y=t.y,i.depth=t.depth);var o=r.addItem("node",i,!1);if(e){if(o.set("parent",e),n){var a=e.get("originAttrs");if(a)o.set("originAttrs",a);else{var s=e.getModel();o.set("originAttrs",{x:s.x,y:s.y})}}var u=e.get("children");u?u.push(o):e.set("children",[o]),r.addItem("edge",{source:e.get("id"),target:o.get("id"),id:"".concat(e.get("id"),":").concat(o.get("id"))},!1)}return(0,x.each)(t.children||[],(function(t){r.innerAddChild(t,o,n)})),r.emit("afteraddchild",{item:o,parent:e}),o},e.prototype.innerUpdateChild=function(t,n,r){var i=this,o=i.findById(t.id);if(o){(0,x.each)(t.children||[],(function(t){i.innerUpdateChild(t,o,r)}));var a,s,u=o.get("children");if(u)if(u.length>0)for(var l=u.length-1;l>=0;l--){var c=u[l].getModel();-1===e.indexOfChild(t.children||[],c.id)&&(i.innerRemoveChild(c.id,{x:t.x,y:t.y},r),u.splice(l,1))}o.get("originAttrs")&&(a=o.get("originAttrs").x,s=o.get("originAttrs").y);var h=o.getModel();r&&o.set("originAttrs",{x:h.x,y:h.y}),o.set("model",Object.assign(h,t.data)),a===t.x&&s===t.y||o.updatePosition({x:t.x,y:t.y})}else i.innerAddChild(t,n,r)},e.prototype.innerRemoveChild=function(t,e,n){var r=this,i=r.findById(t);if(i)if((0,x.each)(i.get("children"),(function(t){r.innerRemoveChild(t.getModel().id,e,n)})),n){var o=i.getModel();i.set("to",e),i.set("originAttrs",{x:o.x,y:o.y}),r.get("removeList").push(i)}else r.removeItem(i,!1)},e.prototype.changeData=function(t,e){void 0===e&&(e=!0);var n=this;this.getNodes().map((function(t){return n.clearItemStates(t)})),this.getEdges().map((function(t){return n.clearItemStates(t)})),e&&this.get("enabledStack")&&this.pushStack("changedata",{before:n.get("originData"),after:t||n.get("data")}),t?(n.data(t),n.render(!1)):n.layout(this.get("fitView"))},e.prototype.changeLayout=function(t){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon");this.updateLayout(t)},e.prototype.updateLayout=function(t,e,n,r){void 0===r&&(r=!0);var i=this;if(t){if(r&&this.get("enabledStack")&&this.pushStack("layout",{before:i.get("layout"),after:t}),i.set("layout",t),i.set("layoutMethod",i.getLayout()),i.layout(),e){var o=n;o||(o="begin"===e?{x:0,y:0}:{x:this.getWidth()/2,y:this.getHeight()/2}),o=this.getPointByCanvas(o.x,o.y);var a=this.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];o.x=o.x*a[0]+a[6],o.y=o.y*a[0]+a[7];var s=this.getGroup().getCanvasBBox(),u=s.minX,l=s.maxX,c=s.minY,h={x:(u+l)/2,y:(c+s.maxY)/2};"begin"===e&&(h.x=u,h.y=c),this.translate(o.x-h.x,o.y-h.y)}}else console.warn("layout cannot be null")},e.prototype.refreshLayout=function(t){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon");this.layout(t)},e.prototype.layout=function(t){var e=this,n=this,r=n.get("data"),i=n.get("layoutMethod"),o=n.get("layout"),a=r;if(null==o?void 0:o.excludeInvisibles){r=(0,x.clone)(n.get("data"));var s={};jf(r,(function(t){var n=t.children;if(!(null==n?void 0:n.length))return!0;for(var r=n.length-1;r>=0;r--){var i=e.findById(n[r].id);(i?!i.isVisible():!1===n[r].visible)&&(s[t.id]=s[t.id]||[],s[t.id].push({idx:r,child:n.splice(r,1)[0]}))}})),a=i?i(r,n.get("layout")):r,jf(a,(function(t){var e=s[t.id];if(null==e?void 0:e.length)for(var n=e.length-1;n>=0;n--){var r=e[n],i=r.idx,o=r.child;t.children.splice(i,0,o)}}))}else a=i?i(r,n.get("layout")):r;var u=n.get("animate");(n.emit("beforerefreshlayout",{data:r,layoutData:a}),n.emit("beforelayout"),n.innerUpdateChild(a,void 0,u),t)&&n.get("viewController").fitView();u?n.layoutAnimate(a):(n.refresh(),n.paint()),n.emit("afterrefreshlayout",{data:r,layoutData:a}),n.emit("afterlayout")},e.prototype.addChild=function(t,e,n){void 0===n&&(n=!0);var r=this;r.emit("beforeaddchild",{model:t,parent:e}),(0,x.isString)(e)||(e=e.get("id"));var i=r.findDataById(e);i&&(i.children||(i.children=[]),i.children.push(t),r.findById(e).refresh(),r.changeData(void 0,n))},e.prototype.updateChildren=function(t,e,n){void 0===n&&(n=!0);var r=this,i=r.findById(e);e&&i?(r.findDataById(e).children=t,i.refresh(),r.changeData(void 0,n)):console.warn("Update children failed! There is no node with id '".concat(e,"'"))},e.prototype.updateChild=function(t,n,r){void 0===r&&(r=!0);var i=this;if(n&&i.findById(n)){var o=i.findDataById(n),a=i.findById(t.id);if(o.children||(o.children=[]),a){var s=e.indexOfChild(o.children,t.id);s>-1&&(o.children[s]=t)}else o.children.push(t);var u=i.findById(n);null==u||u.refresh(),i.changeData(void 0,r)}else i.changeData(t,r)},e.prototype.removeChild=function(t,n){void 0===n&&(n=!0);var r,i=this,o=i.findById(t);if((r=o?null==o?void 0:o.get("parent"):i.getNodes().find((function(e){return!!(e.getModel().children||[]).find((function(e){return e.id===t}))})))&&!r.destroyed){var a=r.get("id"),s=i.findDataById(a),u=s&&s.children||[],l=e.indexOfChild(u,t);u.splice(l,1),r.refresh()}i.changeData(void 0,n)},e.prototype.findDataById=function(t,e){var n=this;if(e||(e=n.get("data")),t===e.id)return e;var r=null;return(0,x.each)(e.children||[],(function(e){return e.id===t?(r=e,!1):!(r=n.findDataById(t,e))&&void 0})),r},e.prototype.layoutAnimate=function(t,e){var n=this,r=this.get("animateCfg");n.emit("beforeanimate",{data:t}),n.getEdges().forEach((function(t){var e=t.get("model");e.sourceAnchor||(e.sourceAnchor=t.get("sourceAnchorIndex"))})),this.get("canvas").animate((function(r){jf(t,(function(i){var o=n.findById(i.id);if(o){var a=o.get("originAttrs"),s=o.get("model");if(a||(a={x:s.x,y:s.y},o.set("originAttrs",a)),e){var u=e(o,r,a,t);o.set("model",Object.assign(s,u))}else s.x=a.x+(i.x-a.x)*r,s.y=a.y+(i.y-a.y)*r}return!0})),(0,x.each)(n.get("removeList"),(function(t){var e=t.getModel(),n=t.get("originAttrs"),i=t.get("to");e.x=n.x+(i.x-n.x)*r,e.y=n.y+(i.y-n.y)*r})),n.refreshPositions()}),{duration:r.duration,easing:r.ease,callback:function(){(0,x.each)(n.getNodes(),(function(t){t.set("originAttrs",null)})),(0,x.each)(n.get("removeList"),(function(t){n.removeItem(t,!1)})),n.set("removeList",[]),r.callback&&r.callback(),n.emit("afteranimate",{data:t})},delay:r.delay})},e.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},e.prototype.isLayoutAnimating=function(){return this.layoutAnimating},e.prototype.render=function(t){void 0===t&&(t=!0);var e=this,n=e.get("data");if(!n||!(0,x.isObject)(n)||!Object.keys(n).length)throw new Error("data must be defined first");e.clear(),t&&this.get("enabledStack")&&this.clearStack(),e.emit("beforerender"),e.layout(this.get("fitView")),e.emit("afterrender")},e.prototype.save=function(){return this.get("data")},e.prototype.data=function(e){t.prototype.data.call(this,e),this.set("originData",Bf(e))},e}(Df);const Hf=Vf;function Gf(t,e){if(t)for(var n in e)e.hasOwnProperty(n)&&(t.style[n]=e[n]);return t}var Wf=function(){function t(t){this._cfgs=(0,x.deepMix)(this.getDefaultCfgs(),t),this._events={},this.destroyed=!1}return t.prototype.getDefaultCfgs=function(){return{}},t.prototype.initPlugin=function(t){var e=this;e.set("graph",t);var n=e.getEvents(),r={};(0,x.each)(n,(function(n,i){var o=(0,x.wrapBehavior)(e,n);r[i]=o,t.on(i,o)})),this._events=r,this.init()},t.prototype.getEvents=function(){return{}},t.prototype.get=function(t){var e;return null===(e=this._cfgs)||void 0===e?void 0:e[t]},t.prototype.set=function(t,e){this._cfgs[t]=e},t.prototype.destroy=function(){},t.prototype.destroyPlugin=function(){this.destroy();var t=this.get("graph"),e=this._events;(0,x.each)(e,(function(e,n){t.off(n,e)})),this._events=null,this._cfgs=null,this.destroyed=!0},t}();const Xf=Wf;var Yf,qf=(Yf=function(t,e){return Yf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},Yf(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Yf(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),$f="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",Kf=function(t){function e(e){return t.call(this,e)||this}return qf(e,t),e.prototype.getDefaultCfgs=function(){return{img:$f,follow:!0}},e.prototype.init=function(){var t=this.get("graph"),e=t.get("container"),n=t.get("canvas").get("el"),r=this.get("img")||$f;r.includes("url(")||(r='url("'.concat(r,'")'));var i=Uh("<div class='g6-grid-container' style=\"position:absolute;overflow:hidden;z-index: -1;\"></div>"),o=Uh("<div\n        class='g6-grid'\n        style='position:absolute;\n        background-image: ".concat(r,";\n        user-select: none\n        '></div>"));this.set("container",i),this.set("gridContainer",o),this.positionInit(),i.appendChild(o),e.insertBefore(i,n)},e.prototype.positionInit=function(){var t=this.get("graph"),e=t.get("minZoom"),n=t.get("width"),r=t.get("height");Gf(this.get("container"),{width:"".concat(n,"px"),height:"".concat(r,"px")});var i=80*n/e,o=80*r/e;Gf(this.get("gridContainer"),{width:"".concat(i,"px"),height:"".concat(o,"px"),left:"-".concat(i/2,"px"),top:"-".concat(o/2,"px")})},e.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},e.prototype.updateGrid=function(t){var e=this.get("gridContainer"),n=t.matrix;n||(n=[1,0,0,0,1,0,0,0,1]);var r=this.get("follow");Gf(e,{transform:"matrix(".concat(n[0],", ").concat(n[1],", ").concat(n[3],", ").concat(n[4],", ").concat(r?n[6]:"0",", ").concat(r?n[7]:"0",")")})},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t=this.get("graph").get("container"),e=this.get("container");t.removeChild(e)},e}(Xf);const Zf=Kf;var Qf=n(79238),Jf=n.n(Qf),tp=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();"undefined"!=typeof document&&Jf()("\n  .g6-component-contextmenu {\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    background-color: rgba(255, 255, 255, 0.9);\n    padding: 10px 8px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n  .g6-contextmenu-ul {\n    padding: 0;\n    margin: 0;\n    list-style: none;\n  }\n\n");var ep=function(t){function e(e){return t.call(this,e)||this}return tp(e,t),e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(t){return"\n          <ul class='g6-contextmenu-ul'>\n            <li>1</li>\n            <li>2</li>\n          </ul>\n        "},shouldBegin:function(t){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},e.prototype.getEvents=function(){return"click"===this.get("trigger")?{click:"onMenuShow",touchend:"onMenuShow"}:{contextmenu:"onMenuShow"}},e.prototype.init=function(){var t=this.get("className"),e=Uh("<div class=".concat(t||"g6-component-contextmenu","></div>"));Gf(e,{top:"0px",position:"absolute",visibility:"hidden"});var n=this.get("container");n||(n=this.get("graph").get("container")),(0,x.isString)(n)&&(n=document.getElementById(n)),n.appendChild(e),this.set("menu",e)},e.prototype.onMenuShow=function(t){var e=this;t.preventDefault();var n=this.get("itemTypes");if(t.item){if(t.item&&t.item.getType&&-1===n.indexOf(t.item.getType()))return void e.onMenuHide()}else if(-1===n.indexOf("canvas"))return void e.onMenuHide();if(this.get("shouldBegin")(t)){var r=this.get("menu"),i=this.get("getContent"),o=this.get("graph"),a=i(t,o);(0,x.isString)(a)?r.innerHTML=a:r.innerHTML=a.outerHTML,this.removeMenuEventListener();var s=this.get("handleMenuClick");if(s){var u=function(e){s(e.target,t.item,o)};this.set("handleMenuClickWrapper",u),r.addEventListener("click",u)}var l=o.get("width"),c=o.get("height"),h=r.getBoundingClientRect(),d=this.get("offsetX")||0,f=this.get("offsetY")||0,p=o.getContainer().offsetTop,m=o.getContainer().offsetLeft,g=t.canvasX+m+d,v=t.canvasY+p+f;g+h.width>l&&(g=t.canvasX-h.width-d+m),v+h.height>c&&(v=t.canvasY-h.height-f+p),v<0&&(v=0),Gf(r,{top:"".concat(v,"px"),left:"".concat(g,"px"),visibility:"visible"});var y="click"===this.get("trigger"),b=function(t){y?y=!1:e.onMenuHide()};document.body.addEventListener("click",b),this.set("handler",b)}},e.prototype.removeMenuEventListener=function(){var t=this.get("handleMenuClickWrapper"),e=this.get("handler");t&&(this.get("menu").removeEventListener("click",t),this.set("handleMenuClickWrapper",null));e&&document.body.removeEventListener("click",e)},e.prototype.onMenuHide=function(){var t=this.get("menu");t&&Gf(t,{visibility:"hidden"}),this.removeMenuEventListener()},e.prototype.destroy=function(){var t=this.get("menu");if(this.removeMenuEventListener(),t){var e=this.get("container");e||(e=this.get("graph").get("container")),(0,x.isString)(e)&&(e=document.getElementById(e)),e.removeChild(t)}},e}(Xf);const np=ep;var rp=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ip=function(){return ip=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ip.apply(this,arguments)},op=Math.max,ap=N,sp=function(t){function e(e){var n=t.call(this,e)||this;return n.handleUpdateCanvas=(0,x.debounce)((function(t){var e=n;e.destroyed||e.updateCanvas()}),100,!1),n}return rp(e,t),e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0,hideEdge:!1}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,e=this._cfgs,n=e.size,r=e.graph;if(!this.destroyed){var i=this.get("canvas").get("container"),o=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,a=navigator.userAgent.toLowerCase().indexOf("safari")>-1,s=Uh("\n      <div\n        class=".concat(e.viewportClassName,"\n        style='position:absolute;\n          left:0;\n          top:0;\n          box-sizing:border-box;\n          outline: 2px solid #1980ff;\n          cursor:move'\n        draggable=").concat(!a&&!o,"\n      </div>")),u=0,l=0,c=!1,h=0,d=0,f=0,p=0,m=0,g=0,v=a||o?"mousedown":"dragstart";s.addEventListener(v,(function(i){var o,a;if(i.dataTransfer){var v=new Image;v.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",null===(a=(o=i.dataTransfer).setDragImage)||void 0===a||a.call(o,v,0,0);try{i.dataTransfer.setData("text/html","view-port-minimap")}catch(t){i.dataTransfer.setData("text","view-port-minimap")}}if(e.refresh=!1,i.target===s){var y=s.style;h=parseInt(y.left,10),d=parseInt(y.top,10),f=parseInt(y.width,10),p=parseInt(y.height,10),f>n[0]||p>n[1]||(g=r.getZoom(),m=t.get("ratio"),c=!0,u=i.clientX,l=i.clientY)}}),!1);var y=function(t){if(c&&!(0,x.isNil)(t.clientX)&&!(0,x.isNil)(t.clientY)){var e=u-t.clientX,i=l-t.clientY;(h-e<0||h-e+f>=n[0])&&(e=0),(d-i<0||d-i+p>=n[1])&&(i=0),d-=i,Gf(s,{left:"".concat(h-=e,"px"),top:"".concat(d,"px")}),r.translate(e*g/m,i*g/m),u=t.clientX,l=t.clientY}};a||o||s.addEventListener("drag",y,!1);var b=function(){c=!1,e.refresh=!0},w=a||o?"mouseup":"dragend";s.addEventListener(w,b,!1),i.addEventListener("mouseleave",b),i.addEventListener("mouseup",b),(a||o)&&i.addEventListener("mousemove",y,!1),this.set("viewport",s),i.appendChild(s)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),e=this.get("totaldx"),n=this.get("totaldy"),r=this.get("graph"),i=this.get("size"),o=r.get("canvas").get("el"),a=r.get("width")||o.scrollWidth||500,s=r.get("height")||o.scrollHeight||500,u=r.getPointByCanvas(0,0),l=r.getPointByCanvas(a,s),c=this.get("viewport");c||this.initViewport();var h=(l.x-u.x)*t,d=(l.y-u.y)*t,f=u.x*t+e,p=u.y*t+n,m=f+h,g=p+d;f<0&&(h+=f,f=0),m>i[0]&&(h-=m-i[0]),p<0&&(d+=p,p=0),g>i[1]&&(d-=g-i[1]),this.set("ratio",t),Gf(c,{left:"".concat(f,"px"),top:"".concat(p,"px"),width:"".concat(h,"px"),height:"".concat(d,"px")})}},e.prototype.updateGraphShapes=function(){var t,e=this._cfgs.graph,n=this.get("canvas"),r=e.get("group");r.destroyed||(n.clear(),this.get("hideEdge")?(t=n.addGroup(),r.get("children").forEach((function(e){e.get("id").includes("-edge")||t.add(e.clone())}))):((t=r.clone()).resetMatrix(),n.add(t)),"svg"===e.get("renderer")&&this.updateVisible(t))},e.prototype.updateVisible=function(t){var e=this;if(t.isGroup()||t.get("visible")){var n=t.get("children");if(!n||!n.length)return;n.forEach((function(t){t.get("visible")||t.hide(),e.updateVisible(t)}))}else t.hide()},e.prototype.updateKeyShapes=function(){var t=this,e=this._cfgs.graph,n=this.get("canvas"),r=n.get("children")[0]||n.addGroup();this.get("hideEdge")||(0,x.each)(e.getEdges(),(function(e){t.updateOneEdgeKeyShape(e,r)})),(0,x.each)(e.getNodes(),(function(e){t.updateOneNodeKeyShape(e,r)}));var i=e.getCombos();if(i&&i.length){var o=r.find((function(t){return"comboGroup"===t.get("name")}))||r.addGroup({name:"comboGroup"});setTimeout((function(){t.destroyed||((0,x.each)(i,(function(e){t.updateOneComboKeyShape(e,o)})),null==o||o.sort(),null==o||o.toBack(),t.updateCanvas())}),250)}this.clearDestroyedShapes()},e.prototype.updateOneComboKeyShape=function(t,e){if(!this.destroyed){var n=this.get("itemMap")||{},r=n[t.get("id")],i=t.getBBox(),o=t.get("keyShape").clone(),a=o.attr(),s={x:i.centerX,y:i.centerY};r?s=Object.assign(a,s):(r=o,e.add(r));var u=r.get("type");"rect"!==u&&"image"!==u||(s.x=i.minX,s.y=i.minY),r.attr(s),t.isVisible()?r.show():r.hide(),r.exist=!0;var l=t.getModel().depth;isNaN(l)||r.set("zIndex",l),n[t.get("id")]=r,this.set("itemMap",n)}},e.prototype.updateOneNodeKeyShape=function(t,e){var n=this.get("itemMap")||{},r=n[t.get("id")],i=t.getBBox(),o=t.get("keyShape").clone(),a=o.attr(),s={x:i.centerX,y:i.centerY};r?(s=Object.assign(a,s),r.toFront()):(r=o,e.add(r));var u=r.get("type");"rect"!==u&&"image"!==u||(s.x=i.minX,s.y=i.minY),r.attr(s),t.isVisible()?r.show():r.hide(),r.exist=!0;var l=t.getModel().depth;isNaN(l)||r.set("zIndex",l),n[t.get("id")]=r,this.set("itemMap",n)},e.prototype.updateDelegateShapes=function(){var t=this,e=this._cfgs.graph,n=this.get("canvas"),r=n.get("children")[0]||n.addGroup();this.get("hideEdge")||(0,x.each)(e.getEdges(),(function(e){t.updateOneEdgeKeyShape(e,r)})),(0,x.each)(e.getNodes(),(function(e){t.updateOneNodeDelegateShape(e,r)}));var i=e.getCombos();if(i&&i.length){var o=r.find((function(t){return"comboGroup"===t.get("name")}))||r.addGroup({name:"comboGroup"});setTimeout((function(){t.destroyed||((0,x.each)(i,(function(e){t.updateOneComboKeyShape(e,o)})),null==o||o.sort(),null==o||o.toBack(),t.updateCanvas())}),250)}this.clearDestroyedShapes()},e.prototype.clearDestroyedShapes=function(){var t=this.get("itemMap")||{},e=Object.keys(t);if(e&&0!==e.length)for(var n=e.length-1;n>=0;n--){var r=t[e[n]],i=r.exist;r.exist=!1,i||(r.remove(),delete t[e[n]])}},e.prototype.updateOneEdgeKeyShape=function(t,e){var n=this.get("itemMap")||{},r=n[t.get("id")];if(r){var i=t.get("keyShape").attr("path");r.attr("path",i)}else r=t.get("keyShape").clone(),e.add(r);t.isVisible()?r.show():r.hide(),r.exist=!0,n[t.get("id")]=r,this.set("itemMap",n)},e.prototype.updateOneNodeDelegateShape=function(t,e){var n=this.get("delegateStyle"),r=this.get("itemMap")||{},i=r[t.get("id")],o=t.getBBox();if(i){var a={x:o.minX,y:o.minY,width:o.width,height:o.height};i.attr(a),i.toFront()}else i=e.addShape("rect",{attrs:ip({x:o.minX,y:o.minY,width:o.width,height:o.height},n),name:"minimap-node-shape"});t.isVisible()?i.show():i.hide(),i.exist=!0,r[t.get("id")]=i,this.set("itemMap",r)},e.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},e.prototype.initContainer=function(){var t=this,e=t.get("graph"),n=t.get("size"),r=t.get("className"),i=t.get("container"),o=Uh("<div class='".concat(r,"' style='width: ").concat(n[0],"px; height: ").concat(n[1],"px; overflow: hidden'></div>"));(0,x.isString)(i)&&(i=document.getElementById(i)),i?i.appendChild(o):e.get("container").appendChild(o),t.set("container",o);var a,s=Uh('<div class="g6-minimap-container" style="position: relative;"></div>');o.appendChild(s),s.addEventListener("dragenter",(function(t){t.preventDefault()})),s.addEventListener("dragover",(function(t){t.preventDefault()})),a="svg"===e.get("renderer")?new Rh({container:s,width:n[0],height:n[1]}):new Ic({container:s,width:n[0],height:n[1]}),t.set("canvas",a),t.updateCanvas()},e.prototype.updateCanvas=function(){if(!this.destroyed&&this.get("refresh")){var t=this.get("graph");if(!t.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var e=this.get("size"),n=this.get("canvas"),r=this.get("type"),i=this.get("padding");if(!n.destroyed){switch(r){case"default":this.updateGraphShapes();break;case"keyShape":this.updateKeyShapes();break;case"delegate":this.updateDelegateShapes()}var o=n.get("children")[0];if(o){o.resetMatrix();var a=o.getCanvasBBox(),s=t.get("canvas").getCanvasBBox(),u=t.getZoom()||1,l=s.width/u,c=s.height/u;Number.isFinite(a.width)&&(l=op(a.width,l),c=op(a.height,c)),l+=2*i,c+=2*i;var h=Math.min(e[0]/l,e[1]/c),d=[1,0,0,0,1,0,0,0,1],f=0,p=0;Number.isFinite(a.minX)&&(f=-a.minX),Number.isFinite(a.minY)&&(p=-a.minY);var m=(e[0]-(l-2*i)*h)/2,g=(e[1]-(c-2*i)*h)/2;d=ap(d,[["t",f,p],["s",h,h],["t",m,g]]),o.setMatrix(d),this.set("ratio",h),this.set("totaldx",m+f*h),this.set("totaldy",g+p*h),this.set("dx",m),this.set("dy",g),this.updateViewport()}}}}},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t;null===(t=this.get("canvas"))||void 0===t||t.destroy();var e=this.get("container");(null==e?void 0:e.parentNode)&&e.parentNode.removeChild(e)},e}(Xf);const up=sp;var lp=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function cp(t,e,n){var r=t.x-e.x,i=t.y-e.y;return!n||Math.abs(r)>n||Math.abs(i)>n?Math.sqrt(r*r+i*i):n}function hp(t,e){var n=(e.source.y-e.target.y)/(e.source.x-e.target.x),r=(n*n*e.source.x+n*(t.y-e.source.y)+t.x)/(n*n+1);return{x:r,y:n*(r-e.source.x)+e.source.y}}var dp=function(t){function e(e){return t.call(this,e)||this}return lp(e,t),e.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},e.prototype.init=function(){var t=this.get("graph"),e=this.get("onTick");this.set("tick",(function(){e&&e(),t.refreshPositions()}))},e.prototype.bundling=function(t){var e=this;if(e.set("data",t),!e.isTicking()){var n=t.edges||[],r=t.nodes||[],i={},o=!1;if(r.forEach((function(t){null!==t.x&&null!==!t.y&&void 0!==t.x&&void 0!==!t.y||(o=!0),i[t.id]=t})),o)throw new Error("please layout the graph or assign x and y for nodes first");e.set("nodeIdMap",i);var a=e.get("divisions"),s=e.get("divRate"),u=e.divideEdges(a);e.set("edgePoints",u);var l=e.getEdgeBundles();e.set("edgeBundles",l);for(var c=e.get("cycles"),h=e.get("iterations"),d=e.get("iterRate"),f=e.get("lambda"),p=0;p<c;p++){for(var m=function(t){var r=[];n.forEach((function(t,n){if(t.source!==t.target){var o=i[t.source],s=i[t.target];r[n]=e.getEdgeForces({source:o,target:s},n,a,f);for(var l=0;l<a+1;l++)u[n][l].x+=r[n][l].x,u[n][l].y+=r[n][l].y}}))},g=0;g<h;g++)m();f/=2,a*=s,h*=d,u=e.divideEdges(a),e.set("edgePoints",u)}n.forEach((function(t,e){t.source!==t.target&&(t.type="polyline",t.controlPoints=u[e].slice(1,u[e].length-1))})),e.get("graph").refresh()}},e.prototype.updateBundling=function(t){var e=this,n=t.data;if(n&&e.set("data",n),e.get("ticking")&&e.set("ticking",!1),Object.keys(t).forEach((function(n){e.set(n,t[n])})),t.onTick){var r=this.get("graph");e.set("tick",(function(){t.onTick(),r.refresh()}))}e.bundling(n)},e.prototype.divideEdges=function(t){var e=this,n=e.get("data").edges,r=e.get("nodeIdMap"),i=e.get("edgePoints");return i&&void 0!==i||(i=[]),n.forEach((function(n,o){var a;i[o]&&void 0!==i[o]||(i[o]=[]);var s=r[n.source],u=r[n.target];if(1===t)i[o].push({x:s.x,y:s.y}),i[o].push({x:.5*(s.x+u.x),y:.5*(s.y+u.y)}),i[o].push({x:u.x,y:u.y});else{var l=((null===(a=i[o])||void 0===a?void 0:a.length)?e.getEdgeLength(i[o]):cp({x:s.x,y:s.y},{x:u.x,y:u.y}))/(t+1),c=l,h=[{x:s.x,y:s.y}];i[o].forEach((function(t,e){if(0!==e){for(var n=cp(t,i[o][e-1]);n>c;){var r=c/n,a={x:i[o][e-1].x,y:i[o][e-1].y};a.x+=r*(t.x-i[o][e-1].x),a.y+=r*(t.y-i[o][e-1].y),h.push(a),n-=c,c=l}c-=n}})),h.push({x:u.x,y:u.y}),i[o]=h}})),i},e.prototype.getEdgeLength=function(t){var e=0;return t.forEach((function(n,r){0!==r&&(e+=cp(n,t[r-1]))})),e},e.prototype.getEdgeBundles=function(){var t=this,e=t.get("data").edges||[],n=t.get("bundleThreshold"),r=t.get("nodeIdMap"),i=t.get("edgeBundles");return i||(i=[]),e.forEach((function(t,e){i[e]&&void 0!==i[e]||(i[e]=[])})),e.forEach((function(o,a){var s=r[o.source],u=r[o.target];e.forEach((function(e,o){if(!(o<=a)){var l=r[e.source],c=r[e.target];t.getBundleScore({source:s,target:u},{source:l,target:c})>=n&&(i[a].push(o),i[o].push(a))}}))})),i},e.prototype.getBundleScore=function(t,e){var n=this;return t.vx=t.target.x-t.source.x,t.vy=t.target.y-t.source.y,e.vx=e.target.x-e.source.x,e.vy=e.target.y-e.source.y,t.length=cp({x:t.source.x,y:t.source.y},{x:t.target.x,y:t.target.y}),e.length=cp({x:e.source.x,y:e.source.y},{x:e.target.x,y:e.target.y}),n.getAngleScore(t,e)*n.getScaleScore(t,e)*n.getPositionScore(t,e)*n.getVisibilityScore(t,e)},e.prototype.getAngleScore=function(t,e){var n=function(t,e){return t.x*e.x+t.y*e.y}({x:t.vx,y:t.vy},{x:e.vx,y:e.vy});return n/(t.length*e.length)},e.prototype.getScaleScore=function(t,e){var n=(t.length+e.length)/2;return 2/(n/Math.min(t.length,e.length)+Math.max(t.length,e.length)/n)},e.prototype.getPositionScore=function(t,e){var n=(t.length+e.length)/2;return n/(n+cp({x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2},{x:(e.source.x+e.target.x)/2,y:(e.source.y+e.target.y)/2}))},e.prototype.getVisibilityScore=function(t,e){var n=this.getEdgeVisibility(t,e),r=this.getEdgeVisibility(e,t);return n<r?n:r},e.prototype.getEdgeVisibility=function(t,e){var n=hp(e.source,t),r=hp(e.target,t),i={x:(n.x+r.x)/2,y:(n.y+r.y)/2},o={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2};return Math.max(0,1-2*cp(i,o)/cp(n,r))},e.prototype.getEdgeForces=function(t,e,n,r){for(var i=this,o=i.get("edgePoints"),a=i.get("K")/(cp(t.source,t.target)*(n+1)),s=[{x:0,y:0}],u=1;u<n;u++){var l={x:0,y:0},c=i.getSpringForce({pre:o[e][u-1],cur:o[e][u],next:o[e][u+1]},a),h=i.getElectrostaticForce(u,e);l.x=r*(c.x+h.x),l.y=r*(c.y+h.y),s.push(l)}return s.push({x:0,y:0}),s},e.prototype.getSpringForce=function(t,e){var n=t.pre.x+t.next.x-2*t.cur.x,r=t.pre.y+t.next.y-2*t.cur.y;return{x:n*=e,y:r*=e}},e.prototype.getElectrostaticForce=function(t,e){var n=this,r=n.get("eps"),i=n.get("edgeBundles"),o=n.get("edgePoints"),a=i[e],s={x:0,y:0};return a.forEach((function(n){var i={x:o[n][t].x-o[e][t].x,y:o[n][t].y-o[e][t].y};if(Math.abs(i.x)>r||Math.abs(i.y)>r){var a=1/cp(o[n][t],o[e][t]);s.x+=i.x*a,s.y+=i.y*a}})),s},e.prototype.isTicking=function(){return this.get("ticking")},e.prototype.getSimulation=function(){return this.get("forceSimulation")},e.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),t.prototype.destroy.call(this)},e}(Xf);const fp=dp;var pp=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),mp=function(){return mp=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},mp.apply(this,arguments)},gp={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},vp=function(t){function e(e){return t.call(this,e)||this}return pp(e,t),e.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:(0,x.clone)(gp),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"magnify"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"magnify"}}return t},e.prototype.init=function(){var t=this,e=t.get("r");t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{}),t.set("r2",e*e);var n=t.get("d");t.set("molecularParam",(n+1)*e)},e.prototype.createDelegate=function(t){var e=this,n=this,r=n.get("delegate");r&&!r.destroyed||(n.magnify(t),(r=n.get("delegate")).on("dragstart",(function(t){n.set("delegateCenterDiff",{x:r.attr("x")-t.x,y:r.attr("y")-t.y})})),r.on("drag",(function(t){n.magnify(t)})),"wheel"===this.get("scaleDBy")&&r.on("mousewheel",(function(t){e.scaleDByWheel(t)})),"wheel"===this.get("scaleRBy")&&r.on("mousewheel",(function(t){n.scaleRByWheel(t)})))},e.prototype.scaleRByWheel=function(t){var e=this;if(t&&t.originalEvent){t.preventDefault&&t.preventDefault();var n,r=e.get("graph"),i=e.get("delegate"),o=(i?{x:i.attr("x"),y:i.attr("y")}:void 0)||r.getPointByClient(t.clientX,t.clientY);n=t.originalEvent.wheelDelta<0?.95:1/.95;var a=e.get("maxR"),s=e.get("minR"),u=e.get("r");(u>(a||r.get("height"))&&n>1||u<(s||.05*r.get("height"))&&n<1)&&(n=1),u*=n,e.set("r",u),e.set("r2",u*u);var l=e.get("d");e.set("molecularParam",(l+1)*u),e.set("delegateCenterDiff",void 0),e.magnify(t,o)}},e.prototype.scaleRByDrag=function(t){var e=this;if(t){var n,r=e.get("dragPrePos"),i=e.get("graph"),o=i.getPointByClient(t.clientX,t.clientY);n=t.x-r.x<0?.95:1/.95;var a=e.get("maxR"),s=e.get("minR"),u=e.get("r");(u>(a||i.get("height"))&&n>1||u<(s||.05*i.get("height"))&&n<1)&&(n=1),u*=n,e.set("r",u),e.set("r2",u*u);var l=e.get("d");e.set("molecularParam",(l+1)*u),e.magnify(t,o),e.set("dragPrePos",{x:t.x,y:t.y})}},e.prototype.scaleDByWheel=function(t){var e=this;if(t||t.originalEvent){t.preventDefault&&t.preventDefault();var n=0;n=t.originalEvent.wheelDelta<0?-.1:.1;var r=e.get("d")+n,i=e.get("maxD"),o=e.get("minD");if(r<i&&r>o){e.set("d",r);var a=e.get("r");e.set("molecularParam",(r+1)*a);var s=e.get("delegate"),u=s?{x:s.attr("x"),y:s.attr("y")}:void 0;e.set("delegateCenterDiff",void 0),e.magnify(t,u)}}},e.prototype.scaleDByDrag=function(t){var e=this,n=e.get("dragPrePos"),r=t.x-n.x>0?.1:-.1,i=e.get("d")+r,o=e.get("maxD"),a=e.get("minD");if(i<o&&i>a){e.set("d",i);var s=e.get("r");e.set("molecularParam",(i+1)*s),e.magnify(t)}e.set("dragPrePos",{x:t.x,y:t.y})},e.prototype.magnify=function(t,e){var n=this;n.restoreCache();var r=n.get("graph"),i=n.get("cachedMagnifiedModels"),o=n.get("cachedOriginPositions"),a=n.get("showLabel"),s=n.get("r"),u=n.get("r2"),l=n.get("d"),c=n.get("molecularParam"),h=r.getNodes(),d=h.length,f=e?{x:e.x,y:e.y}:{x:t.x,y:t.y};!n.get("dragging")||"mousemove"!==n.get("trigger")&&"click"!==n.get("trigger")||(f=n.get("cacheCenter"));var p=n.get("delegateCenterDiff");p&&(f.x+=p.x,f.y+=p.y),n.updateDelegate(f,s);for(var m=0;m<d;m++){var g=h[m].getModel(),v=g.x,y=g.y;if(!isNaN(v)&&!isNaN(y)){var b=(v-f.x)*(v-f.x)+(y-f.y)*(y-f.y);if(!isNaN(b)&&b<u&&0!==b){var x=Math.sqrt(b),w=c*x/(l*x+s),_=(v-f.x)/x,S=(y-f.y)/x;if(g.x=_*w+f.x,g.y=S*w+f.y,o[g.id]||(o[g.id]={x:v,y,texts:[]}),i.push(g),a&&2*x<s)for(var E=h[m].getContainer().getChildren(),A=E.length,M=0;M<A;M++){var C=E[M];"text"===C.get("type")&&(o[g.id].texts.push({visible:C.get("visible"),shape:C}),C.set("visible",!0))}}}}r.refreshPositions()},e.prototype.restoreCache=function(){for(var t=this,e=t.get("cachedMagnifiedModels"),n=t.get("cachedOriginPositions"),r=e.length,i=0;i<r;i++){var o=e[i],a=n[o.id];o.x=a.x,o.y=a.y;for(var s=a.texts.length,u=0;u<s;u++){var l=a.texts[u];l.shape.set("visible",l.visible)}}t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{})},e.prototype.updateParams=function(t){var e=this,n=t.r,r=t.d,i=t.trigger,o=t.minD,a=t.maxD,s=t.minR,u=t.maxR,l=t.scaleDBy,c=t.scaleRBy;isNaN(t.r)||(e.set("r",n),e.set("r2",n*n)),isNaN(r)||e.set("d",r),isNaN(a)||e.set("maxD",a),isNaN(o)||e.set("minD",o),isNaN(u)||e.set("maxR",u),isNaN(s)||e.set("minR",s);var h,d=e.get("d"),f=e.get("r");(e.set("molecularParam",(d+1)*f),"mousemove"!==i&&"click"!==i&&"drag"!==i||e.set("trigger",i),"drag"===l||"wheel"===l||"unset"===l)&&(e.set("scaleDBy",l),e.get("delegate").remove(),e.get("delegate").destroy(),(h=e.get("dPercentText"))&&(h.remove(),h.destroy()));"drag"!==c&&"wheel"!==c&&"unset"!==c||(e.set("scaleRBy",c),e.get("delegate").remove(),e.get("delegate").destroy(),(h=e.get("dPercentText"))&&(h.remove(),h.destroy()))},e.prototype.updateDelegate=function(t,e){var n=this,r=this,i=r.get("graph"),o=r.get("delegate");if(!o||o.destroyed){var a=i.get("group"),s=r.get("delegateStyle")||gp;o=a.addShape("circle",{attrs:mp({r:e/1.5,x:t.x,y:t.y},s),name:"lens-shape",draggable:!0}),"drag"!==this.get("trigger")&&("wheel"===this.get("scaleRBy")?o.on("mousewheel",(function(t){r.scaleRByWheel(t)})):"drag"===this.get("scaleRBy")&&(o.on("dragstart",(function(t){r.set("dragging",!0),r.set("cacheCenter",{x:t.x,y:t.y}),r.set("dragPrePos",{x:t.x,y:t.y})})),o.on("drag",(function(t){r.scaleRByDrag(t)})),o.on("dragend",(function(t){r.set("dragging",!1)}))),"wheel"===this.get("scaleDBy")?o.on("mousewheel",(function(t){n.scaleDByWheel(t)})):"drag"===this.get("scaleDBy")&&(o.on("dragstart",(function(t){r.set("dragging",!0),r.set("cacheCenter",{x:t.x,y:t.y}),r.set("dragPrePos",{x:t.x,y:t.y})})),o.on("drag",(function(t){n.scaleDByDrag(t)})),o.on("dragend",(function(t){r.set("dragging",!1)}))))}else o.attr({x:t.x,y:t.y,r:e/1.5});if(r.get("showDPercent")){var u=Math.round((r.get("d")-r.get("minD"))/(r.get("maxD")-r.get("minD"))*100),l=r.get("dPercentText"),c=t.y+e/1.5+16;if(!l||l.destroyed)l=i.get("group").addShape("text",{attrs:{text:"".concat(u,"%"),x:t.x,y:c,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),r.set("dPercentText",l);else l.attr({text:"".concat(u,"%"),x:t.x,y:c})}r.set("delegate",o)},e.prototype.clear=function(){var t=this.get("graph");this.restoreCache(),t.refreshPositions();var e=this.get("delegate");e&&!e.destroyed&&(e.remove(),e.destroy());var n=this.get("dPercentText");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(Xf);const yp=vp;var bp=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();"undefined"!=typeof document&&Jf()("\n  .g6-component-toolbar {\n    position: absolute;\n    list-style-type: none;\n    padding: 6px;\n    left: 0px;\n    top: 0px;\n    background-color: rgba(255, 255, 255, 0.9);\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    margin: 0;\n  }\n  .g6-component-toolbar li {\n    float: left;\n    text-align: center;\n    width: 35px;\n    height: 24px;\n    cursor: pointer;\n\t\tlist-style-type:none;\n    list-style: none;\n    margin-left: 0px;\n  }\n  .g6-component-toolbar li .icon {\n    opacity: 0.7;\n  }\n  .g6-component-toolbar li .icon:hover {\n    opacity: 1;\n  }\n");var xp=function(t){function e(e){return t.call(this,e)||this}return bp(e,t),e.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(t){return'\n          <ul class=\'g6-component-toolbar\'>\n            <li code=\'redo\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>\n              </svg>\n            </li>\n            <li code=\'undo\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>\n              </svg>\n            </li>\n            <li  code=\'zoomOut\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>\n              </svg>\n            </li>\n            <li code=\'zoomIn\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>\n              </svg>\n            </li>\n            <li code=\'realZoom\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">\n                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>\n              </svg>\n            </li>\n            <li code=\'autoZoom\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">\n                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>\n              </svg>\n            </li>\n          </ul>\n        '},zoomSensitivity:2}},e.prototype.init=function(){var t=this,e=this.get("graph"),n=this.get("getContent")(e),r=n;(0,x.isString)(n)&&(r=Uh(n));var i=this.get("className");r.setAttribute("class",i||"g6-component-toolbar");var o=this.get("container");o||(o=this.get("graph").get("container")),(0,x.isString)(o)&&(o=document.getElementById(o)),o.appendChild(r),this.set("toolBar",r);var a=this.get("handleClick");r.addEventListener("click",(function(n){var r=function(t){if(!t)return[];if(t.composedPath)return t.composedPath();for(var e=[],n=t.target;n;){if(e.push(n),"HTML"===n.tagName)return e.push(document,window),e;n=n.parentElement}return e}(n).filter((function(t){return"LI"===t.nodeName}));if(0!==r.length){var i=r[0].getAttribute("code");i&&(a?a(i,e):t.handleDefaultOperator(i))}}));var s=this.get("position");s&&Gf(r,{top:"".concat(s.y,"px"),left:"".concat(s.x,"px")}),this.bindUndoRedo()},e.prototype.bindUndoRedo=function(){var t=this.get("graph"),e=document.querySelector('.g6-component-toolbar li[code="undo"]'),n=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),r=document.querySelector('.g6-component-toolbar li[code="redo"]'),i=document.querySelector('.g6-component-toolbar li[code="redo"] svg');e&&n&&r&&i&&(e.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4"),r.setAttribute("style","cursor: not-allowed"),i.setAttribute("style","opacity: 0.4"),t.on("stackchange",(function(t){var o=t.undoStack,a=t.redoStack,s=o.length,u=a.length;0===s?(e.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4")):(e.removeAttribute("style"),n.removeAttribute("style")),0===u?(r.setAttribute("style","cursor: not-allowed"),i.setAttribute("style","opacity: 0.4")):(r.removeAttribute("style"),i.removeAttribute("style"))})))},e.prototype.undo=function(){var t=this.get("graph"),e=t.getUndoStack();if(e&&0!==e.length){var n=e.pop();if(n){var r=n.action;t.pushStack(r,(0,x.clone)(n.data),"redo");var i=n.data.before;if("add"===r&&(i=n.data.after),!i)return;switch(r){case"visible":Object.keys(i).forEach((function(e){var n=i[e];n&&n.forEach((function(e){var n=t.findById(e.id);e.visible?t.showItem(n,!1):t.hideItem(n,!1)}))}));break;case"render":case"update":Object.keys(i).forEach((function(e){var n=i[e];n&&n.forEach((function(e){var n=t.findById(e.id);delete e.id,t.updateItem(n,e,!1),"combo"===n.getType()&&t.updateCombo(n)}))}));break;case"changedata":t.changeData(i,!1);break;case"delete":Object.keys(i).forEach((function(e){var n=i[e];n&&n.forEach((function(e){var n=e.itemType;delete e.itemType,t.addItem(n,e,!1)}))}));break;case"add":Object.keys(i).forEach((function(e){var n=i[e];n&&n.forEach((function(e){t.removeItem(e.id,!1)}))}));break;case"updateComboTree":Object.keys(i).forEach((function(e){var n=i[e];n&&n.forEach((function(e){t.updateComboTree(e.id,e.parentId,!1)}))}));break;case"createCombo":var o=n.data.after.combos,a=o[o.length-1];Object.keys(i).forEach((function(e){var n=i[e];n&&n.forEach((function(e){t.updateComboTree(e.id,e.parentId,!1)}))})),t.removeItem(a.id,!1);break;case"uncombo":var s=i.combos[i.combos.length-1],u=i.nodes.concat(i.combos).map((function(t){return t.id})).filter((function(t){return t!==s.id}));t.createCombo(s,u,!1);break;case"layout":t.updateLayout(i,void 0,void 0,!1)}}}},e.prototype.redo=function(){var t=this.get("graph"),e=t.getRedoStack();if(e&&0!==e.length){var n=e.pop();if(n){var r=n.action,i=n.data.after;if(t.pushStack(r,(0,x.clone)(n.data)),"delete"===r&&(i=n.data.before),!i)return;switch(r){case"visible":Object.keys(i).forEach((function(e){var n=i[e];n&&n.forEach((function(e){var n=t.findById(e.id);e.visible?t.showItem(n,!1):t.hideItem(n,!1)}))}));break;case"render":case"update":Object.keys(i).forEach((function(e){var n=i[e];n&&n.forEach((function(e){var n=t.findById(e.id);delete e.id,t.updateItem(n,e,!1),"combo"===n.getType()&&t.updateCombo(n)}))}));break;case"changedata":t.changeData(i,!1);break;case"delete":i.edges&&i.edges.forEach((function(e){t.removeItem(e.id,!1)})),i.nodes&&i.nodes.forEach((function(e){t.removeItem(e.id,!1)})),i.combos&&i.combos.forEach((function(e){t.removeItem(e.id,!1)}));break;case"add":Object.keys(i).forEach((function(e){var n=i[e];n&&n.forEach((function(e){var n=e.itemType;delete e.itemType,t.addItem(n,e,!1)}))}));break;case"updateComboTree":Object.keys(i).forEach((function(e){var n=i[e];n&&n.forEach((function(e){t.updateComboTree(e.id,e.parentId,!1)}))}));break;case"createCombo":var o=i.combos[i.combos.length-1];t.createCombo(o,o.children.map((function(t){return t.id})),!1);break;case"uncombo":var a=n.data.before.combos,s=a[a.length-1];t.uncombo(s.id,!1);break;case"layout":t.updateLayout(i,void 0,void 0,!1)}}}},e.prototype.zoomOut=function(){var t=this.get("graph"),e=t.getZoom(),n=1/(1-.05*this.get("zoomSensitivity"));n*e>(this.get("maxZoom")||t.get("maxZoom"))||t.zoomTo(e*n)},e.prototype.zoomIn=function(){var t=this.get("graph"),e=t.getZoom(),n=1-.05*this.get("zoomSensitivity");n*e<(this.get("minZoom")||t.get("minZoom"))||t.zoomTo(e*n)},e.prototype.realZoom=function(){this.get("graph").zoomTo(1)},e.prototype.autoZoom=function(){this.get("graph").fitView([20,20])},e.prototype.handleDefaultOperator=function(t){switch(t){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":this.zoomOut();break;case"zoomIn":this.zoomIn();break;case"realZoom":this.realZoom();break;case"autoZoom":this.autoZoom()}},e.prototype.destroy=function(){var t=this.get("toolBar");if(t){var e=this.get("container");e||(e=this.get("graph").get("container")),(0,x.isString)(e)&&(e=document.getElementById(e)),e.removeChild(t)}var n=this.get("handleClick");n&&t.removeEventListener("click",n)},e}(Xf);const wp=xp;var _p=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();"undefined"!=typeof document&&Jf()("\n  .g6-component-tooltip {\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    background-color: rgba(255, 255, 255, 0.9);\n    padding: 10px 8px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n  .tooltip-type {\n    padding: 0;\n    margin: 0;\n  }\n  .tooltip-id {\n    color: #531dab;\n  }\n");var Sp=function(t){function e(e){return t.call(this,e)||this}return _p(e,t),e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(t){return"\n          <h4 class='tooltip-type'>".concat(t.item.getType(),"</h4>\n          <span class='tooltip-id'>ID").concat(t.item.getID(),"</span>\n        ")},shouldBegin:function(t){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},e.prototype.getEvents=function(){return"click"===this.get("trigger")?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},e.prototype.init=function(){var t=this,e=t.get("className")||"g6-component-tooltip",n=Uh("<div class='".concat(e,"'></div>")),r=t.get("container");r||(r=t.get("graph").get("container")),(0,x.isString)(r)&&(r=document.getElementById(r)),Gf(n,{position:"absolute",visibility:"hidden",display:"none"}),r.appendChild(n),"click"!==t.get("trigger")&&(n.addEventListener("mouseenter",(function(t){Gf(n,{visibility:"visible",display:"unset"})})),n.addEventListener("mouseleave",(function(e){t.hideTooltip()}))),t.set("tooltip",n)},e.prototype.onClick=function(t){var e=this.get("itemTypes");if(!t.item||!t.item.getType||-1!==e.indexOf(t.item.getType())){var n=t.item,r=this.get("graph");this.currentTarget===n?(this.currentTarget=null,this.hideTooltip(),r.emit("tooltipchange",{item:t.item,action:"hide"})):(this.currentTarget=n,this.showTooltip(t),r.emit("tooltipchange",{item:t.item,action:"show"}))}},e.prototype.onMouseEnter=function(t){var e=this.get("itemTypes");if(!t.item||!t.item.getType||-1!==e.indexOf(t.item.getType())){var n=t.item,r=this.get("graph");this.currentTarget=n,this.showTooltip(t),r.emit("tooltipchange",{item:t.item,action:"show"})}},e.prototype.onMouseMove=function(t){var e=this.get("itemTypes");t.item&&t.item.getType&&-1===e.indexOf(t.item.getType())||this.currentTarget&&t.item===this.currentTarget&&this.showTooltip(t)},e.prototype.onMouseLeave=function(){this.hideTooltip(),this.get("graph").emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},e.prototype.clearContainer=function(){var t=this.get("tooltip");t&&(t.innerHTML="")},e.prototype.showTooltip=function(t){if(t.item){var e=this.get("itemTypes");if(!t.item.getType||-1!==e.indexOf(t.item.getType())){var n=this.get("tooltip"),r=this.get("getContent")(t);(0,x.isString)(r)?n.innerHTML=r:(this.clearContainer(),n.appendChild(r)),this.updatePosition(t)}}},e.prototype.hideTooltip=function(){var t=this.get("tooltip");t&&Gf(t,{visibility:"hidden",display:"none"})},e.prototype.updatePosition=function(t){var e=this.get("shouldBegin"),n=this.get("tooltip");if(e(t)){var r=this.get("graph"),i=r.get("width"),o=r.get("height"),a=this.get("offsetX")||0,s=this.get("offsetY")||0,u=r.getPointByClient(t.clientX,t.clientY),l=this.get("fixToNode"),c=t.item;if(c.getType&&"node"===c.getType()&&l&&(0,x.isArray)(l)&&l.length>=2){var h=c.getBBox();u={x:h.minX+h.width*l[0],y:h.minY+h.height*l[1]}}var d=r.getCanvasByPoint(u.x,u.y),f=d.x,p=d.y,m=r.getContainer(),g={x:f+m.offsetLeft+a,y:p+m.offsetTop+s};Gf(n,{visibility:"visible",display:"unset"});var v=n.getBoundingClientRect();f+v.width+a>i&&(g.x-=v.width+a),p+v.height+s>o&&(g.y-=v.height+s,g.y<0&&(g.y=0)),Gf(n,{left:"".concat(g.x,"px"),top:"".concat(g.y,"px")})}else Gf(n,{visibility:"hidden",display:"none"})},e.prototype.hide=function(){this.onMouseLeave()},e.prototype.destroy=function(){var t=this.get("tooltip");if(t){var e=this.get("container");e||(e=this.get("graph").get("container")),(0,x.isString)(e)&&(e=document.getElementById(e)),e.removeChild(t)}},e}(Xf);const Ep=Sp;var Ap="timebarstartplay",Mp="timebarendplay",Cp="valuechange",Tp="timebarConfigChanged",kp="playPauseBtn",Ip="nextStepBtn",Np="preStepBtn",Pp=function(){function t(t){var e=t.x,n=void 0===e?0:e,r=t.y,i=void 0===r?0:r,o=t.container,a=t.text,s=t.padding,u=void 0===s?[4,4,4,4]:s,l=t.className,c=void 0===l?"g6-component-timebar-tooltip":l,h=t.backgroundColor,d=void 0===h?"#000":h,f=t.textColor,p=void 0===f?"#fff":f,m=t.opacity,g=void 0===m?.8:m,v=t.fontSize,y=void 0===v?12:v;this.container=o,this.className=c,this.backgroundColor=d,this.textColor=p,this.x=n,this.y=i,this.text=a,this.padding=u,this.opacity=g,this.fontSize=y,this.render()}return t.prototype.render=function(){var t=this,e=t.className,n=(t.x,t.y,t.backgroundColor),r=t.textColor,i=t.text,o=t.padding,a=t.opacity,s=t.fontSize,u=t.container,l=Uh("<div class='".concat(e,"' style=\"position: absolute; width: fit-content; height: fit-content; opacity: ").concat(a,'"></div>'));(0,x.isString)(u)&&(u=document.getElementById(u)),u.appendChild(l),t.parentHeight=u.offsetHeight,t.parentWidth=u.offsetWidth,Gf(l,{visibility:"hidden",top:0,left:0});var c=Uh("\n      <div style='position: absolute; white-space:nowrap; background-color: ".concat(n,"; font-size: ").concat(s,"px; border-radius: 4px; width: fit-content; height: fit-content; color: ").concat(r,"; padding: ").concat(o[0],"px ").concat(o[1],"px ").concat(o[2],"px ").concat(o[3],"px'></div>"));c.innerHTML=i,l.appendChild(c),t.backgroundDOM=c;var h=Uh("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid ".concat(n,"'></div>"));l.appendChild(h),t.arrowDOM=h,t.container=l},t.prototype.show=function(t){var e=this,n=t.text,r=t.x;t.y,t.clientX,t.clientY;e.backgroundDOM.innerHTML=n;var i=e.backgroundDOM.offsetWidth,o=e.backgroundDOM.offsetHeight,a=e.arrowDOM.offsetWidth,s=e.arrowDOM.offsetHeight;Gf(e.container,{top:"".concat(-o-s,"px"),left:"".concat(r,"px"),visibility:"visible"}),Gf(e.backgroundDOM,{marginLeft:"".concat(-i/2,"px")}),Gf(e.arrowDOM,{marginLeft:"".concat(-a/2,"px"),top:"".concat(o,"px")});var u=r-i/2,l=r+i/2;u<0?Gf(e.backgroundDOM,{marginLeft:"".concat(-i/2-u,"px")}):l>e.parentWidth&&Gf(e.backgroundDOM,{marginLeft:"".concat(-i/2-l+e.parentWidth+12,"px")})},t.prototype.hide=function(){Gf(this.container,{top:0,left:0,visibility:"hidden"})},t}();const Op=Pp;var Lp=function(){return Lp=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Lp.apply(this,arguments)},Rp=function(){function t(t){this.config=(0,x.deepMix)({},t),this.init()}return t.prototype.update=function(t){this.config=(0,x.deepMix)({},this.config,t),this.updateElement(),this.renderMarker()},t.prototype.init=function(){this.initElement(),this.renderMarker()},t.prototype.initElement=function(){var t=this.config,e=t.group,n=t.style,r=n.scale,i=void 0===r?1:r,o=n.offsetX,a=void 0===o?0:o,s=n.offsetY,u=void 0===s?0:s,l=this.config.x+a,c=this.config.y+u,h=e.addGroup({name:kp});this.startMarkerGroup=h.addGroup({name:kp}),this.circle=e.addShape("circle",{attrs:Lp({x:l,y:c,r:this.config.r*i},n),name:kp}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(l,c,i),fill:n.stroke||"#aaa"},name:"start-marker"}),this.pauseMarkerGroup=h.addGroup({name:kp});var d=.25*this.config.r*i,f=.5*this.config.r*Math.sqrt(3)*i;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:l-.375*this.config.r*i,y:c-f/2,width:d,height:f,fill:n.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:l+1/8*this.config.r*i,y:c-f/2,width:d,height:f,fill:n.stroke||"#aaa",lineWidth:0}})},t.prototype.updateElement=function(){var t=this.config.style,e=t.scale,n=void 0===e?1:e,r=t.offsetX,i=void 0===r?0:r,o=t.offsetY,a=void 0===o?0:o,s=this.config.x+i,u=this.config.y+a;this.circle.attr("x",s),this.circle.attr("y",u),this.circle.attr("r",this.config.r*n),this.startMarker.attr("path",this.getStartMarkerPath(s,u,n));var l=.25*this.config.r*n,c=.5*this.config.r*Math.sqrt(3)*n;this.pauseLeftMarker.attr("x",s-.375*this.config.r*n),this.pauseLeftMarker.attr("y",u-c/2),this.pauseLeftMarker.attr("width",l),this.pauseLeftMarker.attr("height",c),this.pauseRightMarker.attr("x",s+1/8*this.config.r*n),this.pauseRightMarker.attr("y",u-c/2),this.pauseRightMarker.attr("width",l),this.pauseRightMarker.attr("height",c)},t.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},t.prototype.getStartMarkerPath=function(t,e,n){var r=.5*this.config.r*Math.sqrt(3)*n;return[["M",t-r/Math.sqrt(3)/2,e-r/2],["L",t+r/Math.sqrt(3),e],["L",t-r/Math.sqrt(3)/2,e+r/2]]},t}();const Dp=Rp;var zp=function(){return zp=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},zp.apply(this,arguments)},Fp=N,Bp={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},Up={fill:"#fff"},jp={fill:"green"},Vp={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},Hp={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},Gp={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:Vp,timeTypeControllerStyle:Hp},Wp=50,Xp="single",Yp="range",qp=function(){function t(t){this.controllerCfg=(0,x.deepMix)({},Gp,t),this.group=t.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType=this.controllerCfg.defaultTimeType||Yp,this.fontFamily=t.fontFamily||"Arial, sans-serif",this.init()}return t.prototype.init=function(){this.renderPlayButton()},t.prototype.getNextMarkerPath=function(t,e,n){return[["M",t,e-n],["L",t+n,e],["L",t,e+n],["Z",t,e-n],["M",t,e],["L",t-n,e-n],["L",t-n,e+n],["Z"]]},t.prototype.getPreMarkerPath=function(t,e,n){return[["M",t,e-n],["L",t-n,e],["L",t,e+n],["L",t,e-n],["M",t,e],["L",t+n,e-n],["L",t+n,e+n],["Z"]]},t.prototype.renderPlayButton=function(){var t=this.controllerCfg,e=t.width,n=t.height,r=t.x,i=t.y,o=t.hideTimeTypeController,a=t.fill,s=void 0===a?"#aaa":a,u=t.stroke,l=void 0===u?"green":u,c=t.containerStyle,h=void 0===c?{}:c,d=zp(zp({},Bp),t.playBtnStyle||{}),f=zp(zp({},Up),t.preBtnStyle||{}),p=zp(zp({},jp),t.nextBtnStyle||{}),m=n/2-5,g=i+10,v=this.controllerGroup.addShape("rect",{attrs:zp({x:r,y:g,width:e,height:n,stroke:l,fill:s},h),name:"container-rect"});this.playButton?this.playButton.update({x:e/2,y:g,r:m}):this.playButton=new Dp({group:this.controllerGroup,x:e/2,y:g+m+5,r:m,isPlay:this.isPlay,style:d});var y=f.offsetX||0,b=f.offsetY||0,x=(f.scale||1)*m;this.controllerGroup.addShape("path",{attrs:zp({path:this.getPreMarkerPath(e/2-5*m+y,g+m+5+b,.5*x)},f),name:Np});var w=p.offsetX||0,_=p.offsetY||0,S=(p.scale||1)*m;this.controllerGroup.addShape("path",{attrs:zp({path:this.getNextMarkerPath(e/2+5*m+w,g+m+5+_,.5*S)},p),name:Ip}),v.toBack(),this.renderSpeedBtn(),o||this.renderToggleTime(),this.bindEvent();var E=this.controllerCfg.scale,A=void 0===E?1:E,M=this.controllerGroup.getCanvasBBox(),C=(M.maxX+M.minX)/2,T=(M.maxY+M.minY)/2,k=Fp([1,0,0,0,1,0,0,0,1],[["t",-C,-T],["s",A,A],["t",C,T]]);this.controllerGroup.setMatrix(k)},t.prototype.renderSpeedBtn=function(){var t=this.controllerCfg,e=t.y,n=t.width,r=t.hideTimeTypeController,i=zp(zp({},Vp),this.controllerCfg.speedControllerStyle||{}),o=i.scroller,a=void 0===o?{}:o,s=i.text,u=void 0===s?{}:s,l=i.pointer,c=void 0===l?{}:l,h=i.scale,d=void 0===h?1:h,f=i.offsetX,p=void 0===f?0:f,m=i.offsetY,g=void 0===m?0:m,v=this.controllerGroup.addGroup({name:"speed-group"});this.speedGroup=v;var y=[],b=5;this.speedAxisY=[19,22,26,32,39];for(var x=0;x<5;x++){var w=e+this.speedAxisY[x],_=n-(r?Wp:110);v.addShape("line",{attrs:zp({x1:_,x2:_+15,y1:w,y2:w},a),speed:b,name:"speed-rect"}),this.speedAxisY[x]=w,y.push(b),b-=1}this.speedText=v.addShape("text",{attrs:zp({x:n-(r?Wp:110)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},u),name:"speed-text"}),this.speedPoint=v.addShape("path",{attrs:zp({path:this.getPointerPath(n-(r?Wp:110),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},c),name:"speed-pointer"});var S=this.speedGroup.getCanvasBBox(),E=(S.maxX+S.minX)/2,A=(S.maxY+S.minY)/2,M=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];M=Fp(M,[["t",-E,-A],["s",d,d],["t",E+p*d,A+g*d]]),this.speedGroup.setMatrix(M)},t.prototype.getPointerPath=function(t,e){return[["M",t,e],["L",t-10,e-4],["L",t-10,e+4],["Z"]]},t.prototype.renderToggleTime=function(){var t,e,n=this.controllerCfg,r=n.width,i=n.defaultTimeType,o=zp(zp({},Hp),this.controllerCfg.timeTypeControllerStyle||{}),a=o.scale,s=void 0===a?1:a,u=o.offsetX,l=void 0===u?0:u,c=o.offsetY,h=void 0===c?0:c,d=o.box,f=void 0===d?{}:d,p=o.check,m=void 0===p?{}:p,g=o.text,v=void 0===g?{}:g;this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"});var y=i===Xp;this.toggleGroup.addShape("rect",{attrs:zp({x:r-Wp,y:this.speedAxisY[0]+3.5},f),isChecked:y,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:zp({path:[["M",r-Wp+3,this.speedAxisY[1]+6],["L",r-Wp+7,this.speedAxisY[1]+10],["L",r-Wp+12,this.speedAxisY[1]+4]]},m),capture:!1,name:"check-icon"}),y||this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:zp({text:y?(null===(t=this.controllerCfg)||void 0===t?void 0:t.timeRangeControllerText)||"":(null===(e=this.controllerCfg)||void 0===e?void 0:e.timePointControllerText)||"",x:r-Wp+15,y:this.speedAxisY[0]+4,fontFamily:"undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},v),name:"checked-text"});var b=this.toggleGroup.getCanvasBBox(),x=(b.maxX+b.minX)/2,w=(b.maxY+b.minY)/2,_=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];_=Fp(_,[["t",-x,-w],["s",s,s],["t",x+l*s,w+h*s]]),this.toggleGroup.setMatrix(_)},t.prototype.bindEvent=function(){var t=this;this.speedGroup.on("speed-rect:click",(function(e){var n=e.target.attr("y1"),r=t.speedPoint.attr("matrix"),i=t.speedAxisY.indexOf(r[7]||0),o=t.speedAxisY.indexOf(n),a=t.speedAxisY[o]-t.speedAxisY[i];r=Fp(r,[["t",0,a]]),t.speedPoint.setMatrix(r),t.currentSpeed=t.speedAxisY.length-o,t.speedText.attr("text","".concat(t.currentSpeed,".0X")),t.group.emit(Tp,{speed:t.currentSpeed,type:t.currentType})})),this.speedGroup.on("mousewheel",(function(e){e.preventDefault();var n=t.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1],r=n[7],i=t.speedAxisY.indexOf(r);if(-1===i){var o=1/0;t.speedAxisY.forEach((function(t,e){var n=Math.abs(t-r);o>n&&(o=n,i=e)}))}i=e.originalEvent.deltaY>0?Math.max(0,i-1):Math.min(t.speedAxisY.length-1,i+1);var a=t.speedAxisY[i]-r;n=Fp(n,[["t",0,a]]),t.speedPoint.setMatrix(n),t.currentSpeed=t.speedAxisY.length-i,t.speedText.attr("text","".concat(t.currentSpeed,".0X")),t.group.emit(Tp,{speed:t.currentSpeed,type:t.currentType})})),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",(function(e){var n,r,i=e.target.get("isChecked");i?(t.checkedIcon.hide(),t.checkedText.attr("text",(null===(r=t.controllerCfg)||void 0===r?void 0:r.timePointControllerText)||""),t.currentType=Yp):(t.checkedIcon.show(),t.checkedText.attr("text",(null===(n=t.controllerCfg)||void 0===n?void 0:n.timeRangeControllerText)||""),t.currentType=Xp),e.target.set("isChecked",!i),t.group.emit(Tp,{type:t.currentType,speed:t.currentSpeed})}))},t.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},t}();const $p=qp;var Kp=function(){return Kp=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Kp.apply(this,arguments)},Zp=N,Qp={fill:"#5B8FF9"},Jp={fill:"#e6e8e9"},tm=function(){function t(t){this.frameCount=0,this.fontFamily="Arial, sans-serif";var e=t.graph,n=t.canvas,r=t.group,i=t.width,o=t.height,a=t.padding,s=t.data,u=t.start,l=t.end,c=t.x,h=void 0===c?0:c,d=t.y,f=void 0===d?0:d,p=t.tickLabelFormatter,m=t.selectedTickStyle,g=void 0===m?Qp:m,v=t.unselectedTickStyle,y=void 0===v?Jp:v,b=t.tooltipBackgroundColor,x=t.tooltipFomatter,w=t.tickLabelStyle,_=t.controllerCfg,S=void 0===_?{speed:1}:_;this.graph=e,this.group=r,this.sliceGroup=r.addGroup({name:"slice-group"}),this.canvas=n,this.width=i,this.height=o,this.padding=a,this.data=s,this.start=u,this.end=l,this.tickLabelFormatter=p,this.tickLabelStyle=w||{},this.selectedTickStyle=g,this.unselectedTickStyle=y,this.controllerCfg=S,this.currentSpeed=S.speed||1,this.x=h,this.y=f,this.tooltipBackgroundColor=b,this.tooltipFomatter=x,this.fontFamily="undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return t.prototype.renderSlices=function(){var t=this,e=this,n=e.width,r=e.height,i=e.padding,o=e.data,a=e.start,s=e.end,u=e.tickLabelFormatter,l=e.selectedTickStyle,c=e.unselectedTickStyle,h=e.tickLabelStyle,d=n-2*i,f=r-(3*i+4+10)-2*i,p=o.length,m=(d-2*(p-1))/p;this.tickWidth=m;var g=this.sliceGroup,v=[],y=[],b=Math.round(p*a),w=Math.round(p*s);this.startTickRectId=b,this.endTickRectId=w;var _=h.rotate;delete h.rotate,o.forEach((function(e,r){var o=r>=b&&r<=w?l:c,a=g.addShape("rect",{attrs:Kp({x:i+r*(m+2),y:i,width:m,height:f},o),draggable:!0,name:"tick-rect-".concat(r)}),s=g.addShape("rect",{attrs:{x:i+r*m+2*(2*r-1)/2,y:i,width:0===r||r===p-1?m+1:m+2,height:f,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-".concat(r)});s.toFront();var d,S=a.getBBox(),E=(S.minX+S.maxX)/2;if(v.push({rect:a,pickRect:s,value:e.date,x:E,y:S.minY}),u?(d=u(e),!(0,x.isString)(d)&&d&&(d=e.date)):r%Math.round(p/10)==0&&(d=e.date),d){y.push(d);var A=S.maxY+2*i;g.addShape("line",{attrs:{stroke:"#BFBFBF",x1:E,y1:A,x2:E,y2:A+4},name:"tick-line"});var M=A+4+i,C=g.addShape("text",{attrs:Kp({fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:E,y:M,textAlign:"center",text:d,textBaseline:"top",fontSize:10,fontFamily:t.fontFamily||"Arial, sans-serif"},h),capture:!1,name:"tick-label"}),T=C.getBBox();if(T.maxX>n?C.attr("textAlign","right"):T.minX<0&&C.attr("textAlign","left"),(0,x.isNumber)(_)&&10!==y.length){var k=Zp([1,0,0,0,1,0,0,0,1],[["t",-E,-M],["r",_],["t",E-5,M+2]]);C.attr({textAlign:"left",matrix:k})}1===y.length?C.attr({textAlign:"left"}):10===y.length&&C.attr({textAlign:"right"})}})),this.tickRects=v;var S=this.group;this.currentSpeed=1,this.controllerBtnGroup=new $p(Kp({group:S,x:this.x,y:this.y+r+5,width:n,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"},this.controllerCfg))},t.prototype.initEvent=function(){var t=this,e=this.sliceGroup;e.on("click",(function(e){var n=e.target;if("rect"===n.get("type")&&n.get("name")){var r=parseInt(n.get("name").split("-")[2],10);if(!isNaN(r)){var i=t.tickRects,o=t.unselectedTickStyle;i.forEach((function(t){t.rect.attr(o)}));var a=t.selectedTickStyle;i[r].rect.attr(a),t.startTickRectId=r,t.endTickRectId=r;var s=r/i.length;t.graph.emit(Cp,{value:[s,s]})}}})),e.on("dragstart",(function(e){var n=t.tickRects,r=t.unselectedTickStyle;n.forEach((function(t){t.rect.attr(r)}));var i=e.target,o=parseInt(i.get("name").split("-")[2],10),a=t.selectedTickStyle;n[o].rect.attr(a),t.startTickRectId=o;var s=o/n.length;t.graph.emit(Cp,{value:[s,s]}),t.dragging=!0})),e.on("dragover",(function(e){if(t.dragging&&"rect"===e.target.get("type")){for(var n=parseInt(e.target.get("name").split("-")[2],10),r=t.startTickRectId,i=t.tickRects,o=t.selectedTickStyle,a=t.unselectedTickStyle,s=0;s<i.length;s++){var u=s>=r&&s<=n?o:a;i[s].rect.attr(u)}var l=i.length;t.endTickRectId=n;var c=r/l,h=n/l;t.graph.emit(Cp,{value:[c,h]})}})),e.on("drop",(function(e){if(t.dragging&&(t.dragging=!1,"rect"===e.target.get("type"))){var n=t.startTickRectId,r=parseInt(e.target.get("name").split("-")[2],10);if(!(r<n)){var i=t.selectedTickStyle,o=t.tickRects;o[r].rect.attr(i),t.endTickRectId=r;var a=o.length,s=n/a,u=r/a;t.graph.emit(Cp,{value:[s,u]})}}}));var n=this,r=n.tooltipBackgroundColor,i=n.tooltipFomatter,o=n.canvas,a=new Op({container:o.get("container"),backgroundColor:r}),s=this.tickRects;s.forEach((function(t){var e=t.pickRect;e.on("mouseenter",(function(t){var e=t.target;if("rect"===e.get("type")){var n=parseInt(e.get("name").split("-")[2],10),r=o.getClientByPoint(s[n].x,s[n].y);a.show({x:s[n].x,y:s[n].y,clientX:r.x,clientY:r.y,text:i?i(s[n].value):s[n].value})}})),e.on("mouseleave",(function(t){a.hide()}))}));var u=this.group;u.on("".concat(kp,":click"),(function(){t.isPlay=!t.isPlay,t.changePlayStatus()})),u.on("".concat(Ip,":click"),(function(){t.updateStartEnd(1)})),u.on("".concat(Np,":click"),(function(){t.updateStartEnd(-1)})),u.on(Tp,(function(e){e.type;var n=e.speed;t.currentSpeed=n}))},t.prototype.changePlayStatus=function(t){void 0===t&&(t=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(Ap,null)):this.playHandler&&("undefined"!=typeof window&&window.cancelAnimationFrame(this.playHandler),t&&this.graph.emit(Mp,null))},t.prototype.startPlay=function(){var t=this;return"undefined"!=typeof window?window.requestAnimationFrame((function(){var e=t.currentSpeed;t.frameCount%(60/e)==0&&(t.frameCount=0,t.updateStartEnd(1)),t.frameCount++,t.isPlay&&(t.playHandler=t.startPlay())})):void 0},t.prototype.updateStartEnd=function(t){var e=this,n=this.tickRects,r=n.length,i=this.unselectedTickStyle,o=this.selectedTickStyle,a=e.endTickRectId;if(t>0?e.endTickRectId++:(n[e.endTickRectId].rect.attr(i),e.endTickRectId--),a!==e.startTickRectId)e.endTickRectId<e.startTickRectId&&(e.startTickRectId=e.endTickRectId);else{for(var s=e.startTickRectId;s<=e.endTickRectId-1;s++)n[s].rect.attr(i);e.startTickRectId=e.endTickRectId}if(n[e.endTickRectId]){n[e.endTickRectId].rect.attr(o);var u=e.startTickRectId/r,l=e.endTickRectId/r;this.graph.emit(Cp,{value:[u,l]})}},t.prototype.destory=function(){var t=this.sliceGroup;t.off("click"),t.off("dragstart"),t.off("dragover"),t.off("drop"),this.tickRects.forEach((function(t){var e=t.pickRect;e.off("mouseenter"),e.off("mouseleave")})),this.tickRects.length=0,t.off("".concat(kp,":click")),t.off("".concat(Ip,":click")),t.off("".concat(Np,":click")),t.off(Tp),this.sliceGroup.destroy()},t}();const em=tm;var nm={};function rm(t,e){nm[t]=e}var im=function(){function t(t){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=t,this.initCfg(),this.init()}return t.prototype.translate=function(t){return t},t.prototype.change=function(t){(0,x.assign)(this.__cfg__,t),this.init()},t.prototype.clone=function(){return this.constructor(this.__cfg__)},t.prototype.getTicks=function(){var t=this;return(0,x.map)(this.ticks,(function(e,n){return(0,x.isObject)(e)?e:{text:t.getText(e,n),tickValue:e,value:t.scale(e)}}))},t.prototype.getText=function(t,e){var n=this.formatter,r=n?n(t,e):t;return(0,x.isNil)(r)||!(0,x.isFunction)(r.toString)?"":r.toString()},t.prototype.getConfig=function(t){return this.__cfg__[t]},t.prototype.init=function(){(0,x.assign)(this,this.__cfg__),this.setDomain(),(0,x.isEmpty)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},t.prototype.initCfg=function(){},t.prototype.setDomain=function(){},t.prototype.calculateTicks=function(){var t=this.tickMethod,e=[];if((0,x.isString)(t)){var n=nm[t];if(!n)throw new Error("There is no method to to calculate ticks!");e=n(this)}else(0,x.isFunction)(t)&&(e=t(this));return e},t.prototype.rangeMin=function(){return this.range[0]},t.prototype.rangeMax=function(){return this.range[1]},t.prototype.calcPercent=function(t,e,n){return(0,x.isNumber)(t)?(t-e)/(n-e):NaN},t.prototype.calcValue=function(t,e,n){return e+t*(n-e)},t}();const om=im;var am=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="cat",e.isCategory=!0,e}return(0,b.__extends)(e,t),e.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var t=0;t<this.values.length;t++)this.translateIndexMap.set(this.values[t],t)}},e.prototype.translate=function(t){this.buildIndexMap();var e=this.translateIndexMap.get(t);return void 0===e&&(e=(0,x.isNumber)(t)?t:NaN),e},e.prototype.scale=function(t){var e=this.translate(t),n=this.calcPercent(e,this.min,this.max);return this.calcValue(n,this.rangeMin(),this.rangeMax())},e.prototype.invert=function(t){var e=this.max-this.min,n=this.calcPercent(t,this.rangeMin(),this.rangeMax()),r=Math.round(e*n)+this.min;return r<this.min||r>this.max?NaN:this.values[r]},e.prototype.getText=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=e;return(0,x.isNumber)(e)&&!this.values.includes(e)&&(i=this.values[i]),t.prototype.getText.apply(this,(0,b.__spreadArrays)([i],n))},e.prototype.initCfg=function(){this.tickMethod="cat"},e.prototype.setDomain=function(){if((0,x.isNil)(this.getConfig("min"))&&(this.min=0),(0,x.isNil)(this.getConfig("max"))){var t=this.values.length;this.max=t>1?t-1:t}this.translateIndexMap&&(this.translateIndexMap=void 0)},e}(om);const sm=am;var um=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,lm="\\d\\d?",cm="\\d\\d",hm="[^\\s]+",dm=/\[([^]*?)\]/gm;function fm(t,e){for(var n=[],r=0,i=t.length;r<i;r++)n.push(t[r].substr(0,e));return n}var pm=function(t){return function(e,n){var r=n[t].map((function(t){return t.toLowerCase()})),i=r.indexOf(e.toLowerCase());return i>-1?i:null}};function mm(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];for(var a in o)t[a]=o[a]}return t}var gm=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],vm=["January","February","March","April","May","June","July","August","September","October","November","December"],ym=fm(vm,3),bm={dayNamesShort:fm(gm,3),dayNames:gm,monthNamesShort:ym,monthNames:vm,amPm:["am","pm"],DoFn:function(t){return t+["th","st","nd","rd"][t%10>3?0:(t-t%10!=10?1:0)*t%10]}},xm=mm({},bm),wm=function(t){return xm=mm(xm,t)},_m=function(t){return t.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},Sm=function(t,e){for(void 0===e&&(e=2),t=String(t);t.length<e;)t="0"+t;return t},Em={D:function(t){return String(t.getDate())},DD:function(t){return Sm(t.getDate())},Do:function(t,e){return e.DoFn(t.getDate())},d:function(t){return String(t.getDay())},dd:function(t){return Sm(t.getDay())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return String(t.getMonth()+1)},MM:function(t){return Sm(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},YY:function(t){return Sm(String(t.getFullYear()),4).substr(2)},YYYY:function(t){return Sm(t.getFullYear(),4)},h:function(t){return String(t.getHours()%12||12)},hh:function(t){return Sm(t.getHours()%12||12)},H:function(t){return String(t.getHours())},HH:function(t){return Sm(t.getHours())},m:function(t){return String(t.getMinutes())},mm:function(t){return Sm(t.getMinutes())},s:function(t){return String(t.getSeconds())},ss:function(t){return Sm(t.getSeconds())},S:function(t){return String(Math.round(t.getMilliseconds()/100))},SS:function(t){return Sm(Math.round(t.getMilliseconds()/10),2)},SSS:function(t){return Sm(t.getMilliseconds(),3)},a:function(t,e){return t.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(t,e){return t.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+Sm(100*Math.floor(Math.abs(e)/60)+Math.abs(e)%60,4)},Z:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+Sm(Math.floor(Math.abs(e)/60),2)+":"+Sm(Math.abs(e)%60,2)}},Am=function(t){return+t-1},Mm=[null,lm],Cm=[null,hm],Tm=["isPm",hm,function(t,e){var n=t.toLowerCase();return n===e.amPm[0]?0:n===e.amPm[1]?1:null}],km=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(t){var e=(t+"").match(/([+-]|\d\d)/gi);if(e){var n=60*+e[1]+parseInt(e[2],10);return"+"===e[0]?n:-n}return 0}],Im={D:["day",lm],DD:["day",cm],Do:["day",lm+hm,function(t){return parseInt(t,10)}],M:["month",lm,Am],MM:["month",cm,Am],YY:["year",cm,function(t){var e=+(""+(new Date).getFullYear()).substr(0,2);return+(""+(+t>68?e-1:e)+t)}],h:["hour",lm,void 0,"isPm"],hh:["hour",cm,void 0,"isPm"],H:["hour",lm],HH:["hour",cm],m:["minute",lm],mm:["minute",cm],s:["second",lm],ss:["second",cm],YYYY:["year","\\d{4}"],S:["millisecond","\\d",function(t){return 100*+t}],SS:["millisecond",cm,function(t){return 10*+t}],SSS:["millisecond","\\d{3}"],d:Mm,dd:Mm,ddd:Cm,dddd:Cm,MMM:["month",hm,pm("monthNamesShort")],MMMM:["month",hm,pm("monthNames")],a:Tm,A:Tm,ZZ:km,Z:km},Nm={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},Pm=function(t){return mm(Nm,t)},Om=function(t,e,n){if(void 0===e&&(e=Nm.default),void 0===n&&(n={}),"number"==typeof t&&(t=new Date(t)),"[object Date]"!==Object.prototype.toString.call(t)||isNaN(t.getTime()))throw new Error("Invalid Date pass to format");e=Nm[e]||e;var r=[];e=e.replace(dm,(function(t,e){return r.push(e),"@@@"}));var i=mm(mm({},xm),n);return(e=e.replace(um,(function(e){return Em[e](t,i)}))).replace(/@@@/g,(function(){return r.shift()}))};function Lm(t,e,n){if(void 0===n&&(n={}),"string"!=typeof e)throw new Error("Invalid format in fecha parse");if(e=Nm[e]||e,t.length>1e3)return null;var r={year:(new Date).getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},i=[],o=[],a=e.replace(dm,(function(t,e){return o.push(_m(e)),"@@@"})),s={},u={};a=_m(a).replace(um,(function(t){var e=Im[t],n=e[0],r=e[1],o=e[3];if(s[n])throw new Error("Invalid format. "+n+" specified twice in format");return s[n]=!0,o&&(u[o]=!0),i.push(e),"("+r+")"})),Object.keys(u).forEach((function(t){if(!s[t])throw new Error("Invalid format. "+t+" is required in specified format")})),a=a.replace(/@@@/g,(function(){return o.shift()}));var l=t.match(new RegExp(a,"i"));if(!l)return null;for(var c,h=mm(mm({},xm),n),d=1;d<l.length;d++){var f=i[d-1],p=f[0],m=f[2],g=m?m(l[d],h):+l[d];if(null==g)return null;r[p]=g}if(1===r.isPm&&null!=r.hour&&12!=+r.hour?r.hour=+r.hour+12:0===r.isPm&&12==+r.hour&&(r.hour=0),null==r.timezoneOffset){c=new Date(r.year,r.month,r.day,r.hour,r.minute,r.second,r.millisecond);for(var v=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],y=(d=0,v.length);d<y;d++)if(s[v[d][0]]&&r[v[d][0]]!==c[v[d][1]]())return null}else if(c=new Date(Date.UTC(r.year,r.month,r.day,r.hour,r.minute-r.timezoneOffset,r.second,r.millisecond)),r.month>11||r.month<0||r.day>31||r.day<1||r.hour>23||r.hour<0||r.minute>59||r.minute<0||r.second>59||r.second<0)return null;return c}const Rm={format:Om,parse:Lm,defaultI18n:bm,setGlobalDateI18n:wm,setGlobalDateMasks:Pm};var Dm="format";function zm(t,e){return(y[Dm]||Rm[Dm])(t,e)}function Fm(t){return(0,x.isString)(t)&&(t=t.indexOf("T")>0?new Date(t).getTime():new Date(t.replace(/-/gi,"/")).getTime()),(0,x.isDate)(t)&&(t=t.getTime()),t}var Bm=1e3,Um=6e4,jm=36e5,Vm=24*jm,Hm=31*Vm,Gm=365*Vm,Wm=[["HH:mm:ss",Bm],["HH:mm:ss",1e4],["HH:mm:ss",3e4],["HH:mm",Um],["HH:mm",6e5],["HH:mm",18e5],["HH",jm],["HH",6*jm],["HH",12*jm],["YYYY-MM-DD",Vm],["YYYY-MM-DD",4*Vm],["YYYY-WW",7*Vm],["YYYY-MM",Hm],["YYYY-MM",4*Hm],["YYYY-MM",6*Hm],["YYYY",380*Vm]];function Xm(t,e,n){var r,i=(r=function(t){return t[1]},function(t,e,n,i){for(var o=(0,x.isNil)(n)?0:n,a=(0,x.isNil)(i)?t.length:i;o<a;){var s=o+a>>>1;r(t[s])>e?a=s:o=s+1}return o})(Wm,(e-t)/n)-1,o=Wm[i];return i<0?o=Wm[0]:i>=Wm.length&&(o=(0,x.last)(Wm)),o}var Ym=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="timeCat",e}return(0,b.__extends)(e,t),e.prototype.translate=function(t){t=Fm(t);var e=this.values.indexOf(t);return-1===e&&(e=(0,x.isNumber)(t)&&t<this.values.length?t:NaN),e},e.prototype.getText=function(t,e){var n=this.translate(t);if(n>-1){var r=this.values[n],i=this.formatter;return r=i?i(r,e):zm(r,this.mask)}return t},e.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},e.prototype.setDomain=function(){var e=this.values;(0,x.each)(e,(function(t,n){e[n]=Fm(t)})),e.sort((function(t,e){return t-e})),t.prototype.setDomain.call(this)},e}(sm);const qm=Ym;var $m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isContinuous=!0,e}return(0,b.__extends)(e,t),e.prototype.scale=function(t){if((0,x.isNil)(t))return NaN;var e=this.rangeMin(),n=this.rangeMax();return this.max===this.min?e:e+this.getScalePercent(t)*(n-e)},e.prototype.init=function(){t.prototype.init.call(this);var e=this.ticks,n=(0,x.head)(e),r=(0,x.last)(e);n<this.min&&(this.min=n),r>this.max&&(this.max=r),(0,x.isNil)(this.minLimit)||(this.min=n),(0,x.isNil)(this.maxLimit)||(this.max=r)},e.prototype.setDomain=function(){var t=(0,x.getRange)(this.values),e=t.min,n=t.max;(0,x.isNil)(this.min)&&(this.min=e),(0,x.isNil)(this.max)&&(this.max=n),this.min>this.max&&(this.min=e,this.max=n)},e.prototype.calculateTicks=function(){var e=this,n=t.prototype.calculateTicks.call(this);return this.nice||(n=(0,x.filter)(n,(function(t){return t>=e.min&&t<=e.max}))),n},e.prototype.getScalePercent=function(t){var e=this.max,n=this.min;return(t-n)/(e-n)},e.prototype.getInvertPercent=function(t){return(t-this.rangeMin())/(this.rangeMax()-this.rangeMin())},e}(om);const Km=$m;var Zm=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="linear",e.isLinear=!0,e}return(0,b.__extends)(e,t),e.prototype.invert=function(t){var e=this.getInvertPercent(t);return this.min+e*(this.max-this.min)},e.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},e}(Km);const Qm=Zm;function Jm(t,e){var n=Math.E;return e>=0?Math.pow(n,Math.log(e)/t):-1*Math.pow(n,Math.log(-e)/t)}function tg(t,e){return 1===t?1:Math.log(e)/Math.log(t)}function eg(t,e,n){(0,x.isNil)(n)&&(n=Math.max.apply(null,t));var r=n;return(0,x.each)(t,(function(t){t>0&&t<r&&(r=t)})),r===n&&(r=n/e),r>1&&(r=1),r}var ng=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="log",e}return(0,b.__extends)(e,t),e.prototype.invert=function(t){var e,n=this.base,r=tg(n,this.max),i=this.rangeMin(),o=this.rangeMax()-i,a=this.positiveMin;if(a){if(0===t)return 0;var s=1/(r-(e=tg(n,a/n)))*o;if(t<s)return t/s*a}else e=tg(n,this.min);var u=(t-i)/o*(r-e)+e;return Math.pow(n,u)},e.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},e.prototype.setDomain=function(){t.prototype.setDomain.call(this);var e=this.min;if(e<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");0===e&&(this.positiveMin=eg(this.values,this.base,this.max))},e.prototype.getScalePercent=function(t){var e=this.max,n=this.min;if(e===n)return 0;if(t<=0)return 0;var r=this.base,i=this.positiveMin;return i&&(n=1*i/r),t<i?t/i/(tg(r,e)-tg(r,n)):(tg(r,t)-tg(r,n))/(tg(r,e)-tg(r,n))},e}(Km);const rg=ng;var ig=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="pow",e}return(0,b.__extends)(e,t),e.prototype.invert=function(t){var e=this.getInvertPercent(t),n=this.exponent,r=Jm(n,this.max),i=Jm(n,this.min),o=e*(r-i)+i,a=o>=0?1:-1;return Math.pow(o,n)*a},e.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},e.prototype.getScalePercent=function(t){var e=this.max,n=this.min;if(e===n)return 0;var r=this.exponent;return(Jm(r,t)-Jm(r,n))/(Jm(r,e)-Jm(r,n))},e}(Km);const og=ig;var ag=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="time",e}return(0,b.__extends)(e,t),e.prototype.getText=function(t,e){var n=this.translate(t),r=this.formatter;return r?r(n,e):zm(n,this.mask)},e.prototype.scale=function(e){var n=e;return((0,x.isString)(n)||(0,x.isDate)(n))&&(n=this.translate(n)),t.prototype.scale.call(this,n)},e.prototype.translate=function(t){return Fm(t)},e.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},e.prototype.setDomain=function(){var t=this.values,e=this.getConfig("min"),n=this.getConfig("max");if((0,x.isNil)(e)&&(0,x.isNumber)(e)||(this.min=this.translate(this.min)),(0,x.isNil)(n)&&(0,x.isNumber)(n)||(this.max=this.translate(this.max)),t&&t.length){var r=[],i=1/0,o=i,a=0;(0,x.each)(t,(function(t){var e=Fm(t);if(isNaN(e))throw new TypeError("Invalid Time: "+t+" in time scale!");i>e?(o=i,i=e):o>e&&(o=e),a<e&&(a=e),r.push(e)})),t.length>1&&(this.minTickInterval=o-i),(0,x.isNil)(e)&&(this.min=i),(0,x.isNil)(n)&&(this.max=a)}},e}(Qm);const sg=ag;var ug=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="quantize",e}return(0,b.__extends)(e,t),e.prototype.invert=function(t){var e=this.ticks,n=e.length,r=this.getInvertPercent(t),i=Math.floor(r*(n-1));if(i>=n-1)return(0,x.last)(e);if(i<0)return(0,x.head)(e);var o=e[i],a=i/(n-1);return o+(r-a)/((i+1)/(n-1)-a)*(e[i+1]-o)},e.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},e.prototype.calculateTicks=function(){var e=t.prototype.calculateTicks.call(this);return this.nice||((0,x.last)(e)!==this.max&&e.push(this.max),(0,x.head)(e)!==this.min&&e.unshift(this.min)),e},e.prototype.getScalePercent=function(t){var e=this.ticks;if(t<(0,x.head)(e))return 0;if(t>(0,x.last)(e))return 1;var n=0;return(0,x.each)(e,(function(e,r){if(!(t>=e))return!1;n=r})),n/(e.length-1)},e}(Km);const lg=ug;const cg=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="quantile",e}return(0,b.__extends)(e,t),e.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},e}(lg);var hg={};function dg(t,e){if(function(t){return hg[t]}(t))throw new Error("type '"+t+"' existed.");hg[t]=e}var fg=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="identity",e.isIdentity=!0,e}return(0,b.__extends)(e,t),e.prototype.calculateTicks=function(){return this.values},e.prototype.scale=function(t){return this.values[0]!==t&&(0,x.isNumber)(t)?t:this.range[0]},e.prototype.invert=function(t){var e=this.range;return t<e[0]||t>e[1]?NaN:this.values[0]},e}(om);const pg=fg;function mg(t){var e=t.values,n=t.tickInterval,r=t.tickCount,i=t.showLast;if((0,x.isNumber)(n)){var o=(0,x.filter)(e,(function(t,e){return e%n==0})),a=(0,x.last)(e);return i&&(0,x.last)(o)!==a&&o.push(a),o}var s=e.length,u=t.min,l=t.max;if((0,x.isNil)(u)&&(u=0),(0,x.isNil)(l)&&(l=e.length-1),!(0,x.isNumber)(r)||r>=s)return e.slice(u,l+1);if(r<=0||l<=0)return[];for(var c=1===r?s:Math.floor(s/(r-1)),h=[],d=u,f=0;f<r&&!(d>=l);f++)d=Math.min(u+f*c,l),f===r-1&&i?h.push(e[l]):h.push(e[d]);return h}var gg=Math.sqrt(50),vg=Math.sqrt(10),yg=Math.sqrt(2),bg=function(){function t(){this._domain=[0,1]}return t.prototype.domain=function(t){return t?(this._domain=Array.from(t,Number),this):this._domain.slice()},t.prototype.nice=function(t){var e,n;void 0===t&&(t=5);var r,i=this._domain.slice(),o=0,a=this._domain.length-1,s=this._domain[o],u=this._domain[a];return u<s&&(s=(e=[u,s])[0],u=e[1],o=(n=[a,o])[0],a=n[1]),(r=xg(s,u,t))>0?r=xg(s=Math.floor(s/r)*r,u=Math.ceil(u/r)*r,t):r<0&&(r=xg(s=Math.ceil(s*r)/r,u=Math.floor(u*r)/r,t)),r>0?(i[o]=Math.floor(s/r)*r,i[a]=Math.ceil(u/r)*r,this.domain(i)):r<0&&(i[o]=Math.ceil(s*r)/r,i[a]=Math.floor(u*r)/r,this.domain(i)),this},t.prototype.ticks=function(t){return void 0===t&&(t=5),function(t,e,n){var r,i,o,a,s=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];(r=e<t)&&(i=t,t=e,e=i);if(0===(a=xg(t,e,n))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(i=Math.ceil(e-t+1));++s<i;)o[s]=(t+s)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(i=Math.ceil(t-e+1));++s<i;)o[s]=(t-s)/a;r&&o.reverse();return o}(this._domain[0],this._domain[this._domain.length-1],t||5)},t}();function xg(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=gg?10:o>=vg?5:o>=yg?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=gg?10:o>=vg?5:o>=yg?2:1)}function wg(t,e,n){return("ceil"===n?Math.ceil(t/e):"floor"===n?Math.floor(t/e):Math.round(t/e))*e}function _g(t,e,n){var r=wg(t,n,"floor"),i=wg(e,n,"ceil");r=(0,x.fixedBase)(r,n),i=(0,x.fixedBase)(i,n);for(var o=[],a=Math.max((i-r)/(Math.pow(2,12)-1),n),s=r;s<=i;s+=a){var u=(0,x.fixedBase)(s,a);o.push(u)}return{min:r,max:i,ticks:o}}function Sg(t,e,n){var r,i=t.minLimit,o=t.maxLimit,a=t.min,s=t.max,u=t.tickCount,l=void 0===u?5:u,c=(0,x.isNil)(i)?(0,x.isNil)(e)?a:e:i,h=(0,x.isNil)(o)?(0,x.isNil)(n)?s:n:o;if(c>h&&(h=(r=[c,h])[0],c=r[1]),l<=2)return[c,h];for(var d=(h-c)/(l-1),f=[],p=0;p<l;p++)f.push(c+d*p);return f}function Eg(t){return Math.abs(t)<1e-15?t:parseFloat(t.toFixed(15))}var Ag=[1,5,2,2.5,4,3],Mg=100*Number.EPSILON;function Cg(t,e,n,r,i,o){var a=(0,x.size)(e),s=(0,x.indexOf)(e,t),u=0,l=function(t,e){return(t%e+e)%e}(r,o);return(l<Mg||o-l<Mg)&&r<=0&&i>=0&&(u=1),1-s/(a-1)-n+u}function Tg(t,e,n){var r=(0,x.size)(e);return 1-(0,x.indexOf)(e,t)/(r-1)-n+1}function kg(t,e,n,r,i,o){var a=(t-1)/(o-i),s=(e-1)/(Math.max(o,r)-Math.min(n,i));return 2-Math.max(a/s,s/a)}function Ig(t,e){return t>=e?2-(t-1)/(e-1):1}function Ng(t,e,n,r){var i=e-t;return 1-.5*(Math.pow(e-r,2)+Math.pow(t-n,2))/Math.pow(.1*i,2)}function Pg(t,e,n){var r=e-t;if(n>r){var i=(n-r)/2;return 1-Math.pow(i,2)/Math.pow(.1*r,2)}return 1}function Og(t,e,n,r,i,o){void 0===n&&(n=5),void 0===r&&(r=!0),void 0===i&&(i=Ag),void 0===o&&(o=[.25,.2,.5,.05]);var a=n<0?0:Math.round(n);if(Number.isNaN(t)||Number.isNaN(e)||"number"!=typeof t||"number"!=typeof e||!a)return{min:0,max:0,ticks:[]};if(e-t<1e-15||1===a)return{min:t,max:e,ticks:[t]};if(e-t>1e148){var s=(e-t)/(_=n||5);return{min:t,max:e,ticks:Array(_).fill(null).map((function(e,n){return Eg(t+s*n)}))}}for(var u={score:-2,lmin:0,lmax:0,lstep:0},l=1;l<1/0;){for(var c=0;c<i.length;c+=1){var h=i[c],d=Tg(h,i,l);if(o[0]*d+o[1]+o[2]+o[3]<u.score){l=1/0;break}for(var f=2;f<1/0;){var p=Ig(f,a);if(o[0]*d+o[1]+o[2]*p+o[3]<u.score)break;for(var m=(e-t)/(f+1)/l/h,g=Math.ceil(Math.log10(m));g<1/0;){var v=l*h*Math.pow(10,g),y=Pg(t,e,v*(f-1));if(o[0]*d+o[1]*y+o[2]*p+o[3]<u.score)break;var b=Math.floor(e/v)*l-(f-1)*l,w=Math.ceil(t/v)*l;if(b<=w)for(var _=w-b,S=0;S<=_;S+=1){var E=(b+S)*(v/l),A=E+v*(f-1),M=v,C=Cg(h,i,l,E,A,M),T=Ng(t,e,E,A),k=kg(f,a,t,e,E,A),I=o[0]*C+o[1]*T+o[2]*k+1*o[3];I>u.score&&(!r||E<=t&&A>=e)&&(u.lmin=E,u.lmax=A,u.lstep=M,u.score=I)}g+=1}f+=1}}l+=1}var N=Eg(u.lmax),P=Eg(u.lmin),O=Eg(u.lstep),L=Math.floor(function(t){return Math.round(1e12*t)/1e12}((N-P)/O))+1,R=new Array(L);R[0]=Eg(P);for(c=1;c<L;c++)R[c]=Eg(R[c-1]+O);return{min:Math.min(t,(0,x.head)(R)),max:Math.max(e,(0,x.last)(R)),ticks:R}}function Lg(t,e,n){if(void 0===n&&(n=5),t===e)return{max:e,min:t,ticks:[t]};var r=n<0?0:Math.round(n);if(0===r)return{max:e,min:t,ticks:[]};var i=(e-t)/r,o=Math.pow(10,Math.floor(Math.log10(i))),a=o;2*o-i<1.5*(i-a)&&5*o-i<2.75*(i-(a=2*o))&&10*o-i<1.5*(i-(a=5*o))&&(a=10*o);for(var s=Math.ceil(e/a),u=Math.floor(t/a),l=Math.max(s*a,e),c=Math.min(u*a,t),h=Math.floor((l-c)/a)+1,d=new Array(h),f=0;f<h;f++)d[f]=Eg(c+f*a);return{min:c,max:l,ticks:d}}function Rg(t,e){var n=t.length*e;return 1===e?t[t.length-1]:0===e?t[0]:n%1!=0?t[Math.ceil(n)-1]:t.length%2==0?(t[n-1]+t[n])/2:t[n]}function Dg(t){return new Date(t).getFullYear()}function zg(t){return new Date(t,0,1).getTime()}function Fg(t){return new Date(t).getMonth()}function Bg(t,e){return new Date(t,e,1).getTime()}rm("cat",mg),rm("time-cat",(function(t){return mg((0,b.__assign)({showLast:!0},t))})),rm("wilkinson-extended",(function(t){var e=t.min,n=t.max,r=t.tickCount,i=t.nice,o=t.tickInterval,a=t.minLimit,s=t.maxLimit,u=Og(e,n,r,i).ticks;return(0,x.isNil)(a)&&(0,x.isNil)(s)?o?_g(e,n,o).ticks:u:Sg(t,(0,x.head)(u),(0,x.last)(u))})),rm("r-pretty",(function(t){var e=t.min,n=t.max,r=t.tickCount,i=t.tickInterval,o=t.minLimit,a=t.maxLimit,s=Lg(e,n,r).ticks;return(0,x.isNil)(o)&&(0,x.isNil)(a)?i?_g(e,n,i).ticks:s:Sg(t,(0,x.head)(s),(0,x.last)(s))})),rm("time",(function(t){var e=t.min,n=t.max,r=t.minTickInterval,i=t.tickInterval,o=t.tickCount;if(i)o=Math.ceil((n-e)/i);else{var a=(n-e)/(i=Xm(e,n,o)[1])/o;a>1&&(i*=Math.ceil(a)),r&&i<r&&(i=r)}i=Math.max(Math.floor((n-e)/(Math.pow(2,12)-1)),i);for(var s=[],u=e;u<n+i;u+=i)s.push(u);return s})),rm("time-pretty",(function(t){var e=t.min,n=t.max,r=t.minTickInterval,i=t.tickCount,o=t.tickInterval,a=[];o||(o=(n-e)/i,r&&o<r&&(o=r)),o=Math.max(Math.floor((n-e)/(Math.pow(2,12)-1)),o);var s=Dg(e);if(o>Gm)for(var u=Dg(n),l=Math.ceil(o/Gm),c=s;c<=u+l;c+=l)a.push(zg(c));else if(o>Hm){var h=Math.ceil(o/Hm),d=Fg(e),f=function(t,e){var n=Dg(t),r=Dg(e),i=Fg(t);return 12*(r-n)+(Fg(e)-i)%12}(e,n);for(c=0;c<=f+h;c+=h)a.push(Bg(s,c+d))}else if(o>Vm){var p=(b=new Date(e)).getFullYear(),m=b.getMonth(),g=b.getDate(),v=Math.ceil(o/Vm),y=function(t,e){return Math.ceil((e-t)/Vm)}(e,n);for(c=0;c<y+v;c+=v)a.push(new Date(p,m,g+c).getTime())}else if(o>jm){p=(b=new Date(e)).getFullYear(),m=b.getMonth(),v=b.getDate();var b,x=b.getHours(),w=Math.ceil(o/jm),_=function(t,e){return Math.ceil((e-t)/jm)}(e,n);for(c=0;c<=_+w;c+=w)a.push(new Date(p,m,v,x+c).getTime())}else if(o>Um){var S=function(t,e){return Math.ceil((e-t)/6e4)}(e,n),E=Math.ceil(o/Um);for(c=0;c<=S+E;c+=E)a.push(e+c*Um)}else{var A=o;A<Bm&&(A=Bm);var M=Math.floor(e/Bm)*Bm,C=Math.ceil((n-e)/Bm),T=Math.ceil(A/Bm);for(c=0;c<C+T;c+=T)a.push(M+c*Bm)}return a.length>=512&&console.warn("Notice: current ticks length("+a.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+o+") is too small, increase the value to solve the problem!"),a})),rm("log",(function(t){var e,n=t.base,r=t.tickCount,i=t.min,o=t.max,a=t.values,s=tg(n,o);if(i>0)e=Math.floor(tg(n,i));else{var u=eg(a,n,o);e=Math.floor(tg(n,u))}for(var l=s-e,c=Math.ceil(l/r),h=[],d=e;d<s+c;d+=c)h.push(Math.pow(n,d));return i<=0&&h.unshift(0),h})),rm("pow",(function(t){var e=t.exponent,n=t.tickCount,r=Math.ceil(Jm(e,t.max));return Lg(Math.floor(Jm(e,t.min)),r,n).ticks.map((function(t){var n=t>=0?1:-1;return Math.pow(t,e)*n}))})),rm("quantile",(function(t){var e=t.tickCount,n=t.values;if(!n||!n.length)return[];for(var r=n.slice().sort((function(t,e){return t-e})),i=[],o=0;o<e;o++){var a=o/(e-1);i.push(Rg(r,a))}return i})),rm("d3-linear",(function(t){var e=t.min,n=t.max,r=t.tickInterval,i=t.minLimit,o=t.maxLimit,a=function(t){var e=t.min,n=t.max,r=t.nice,i=t.tickCount,o=new bg;return o.domain([e,n]),r&&o.nice(i),o.ticks(i)}(t);return(0,x.isNil)(i)&&(0,x.isNil)(o)?r?_g(e,n,r).ticks:a:Sg(t,(0,x.head)(a),(0,x.last)(a))})),dg("cat",sm),dg("category",sm),dg("identity",pg),dg("linear",Qm),dg("log",rg),dg("pow",og),dg("time",sg),dg("timeCat",qm),dg("quantize",lg),dg("quantile",cg);var Ug=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};function jg(t){return function(t){return(0,x.map)(t,(function(t,e){return[0===e?"M":"L",t[0],t[1]]}))}(t)}function Vg(t,e,n,r){void 0===r&&(r=!0);var i=new Qm({values:t}),o=new sm({values:(0,x.map)(t,(function(t,e){return e}))}),a=(0,x.map)(t,(function(t,r){return[o.scale(r)*e,n-i.scale(t)*n]}));return r?function(t){if(t.length<=2)return jg(t);var e=[];(0,x.each)(t,(function(t){(0,x.isEqual)(t,e.slice(e.length-2))||e.push(t[0],t[1])}));var n=Ya(e,!1),r=(0,x.head)(t),i=r[0],o=r[1];return n.unshift(["M",i,o]),n}(a):jg(a)}function Hg(t,e,n,r){void 0===r&&(r=5);for(var i=new Qm({values:t}),o=new sm({values:(0,x.map)(t,(function(t,e){return e}))}),a=(0,x.map)(t,(function(t,r){return[o.scale(r)*e,n-i.scale(t)*n]})),s=[],u=0;u<a.length;u++){var l=a[u],c=Wg({x:l[0],y:l[1],y0:n,size:r});s.push.apply(s,c)}return function(t,e){void 0===e&&(e=!0);var n=[],r=t[0];n.push(["M",r.x,r.y]);for(var i=1,o=t.length;i<o;i++)n.push(["L",t[i].x,t[i].y]);e&&(n.push(["L",r.x,r.y]),n.push(["z"]));return n}(s)}function Gg(t,e,n,r){var i=Ug([],t,!0),o=function(t,e){var n=new Qm({values:t}),r=Math.max(0,n.min);return e-n.scale(r)*e}(r,n);return i.push(["L",e,o]),i.push(["L",0,o]),i.push(["Z"]),i}function Wg(t){var e,n,r,i,o=t.x,a=t.y,s=t.y0,u=t.size;(0,x.isArray)(a)?(e=a[0],n=a[1]):(e=s,n=a),(0,x.isArray)(o)?(r=o[0],i=o[1]):(r=o-u/2,i=o+u/2);var l=[{x:r,y:e},{x:r,y:n}];return l.push({x:i,y:n},{x:i,y:e}),l}var Xg=function(){return Xg=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Xg.apply(this,arguments)},Yg={stroke:"#C5C5C5",strokeOpacity:.85},qg={fill:"#CACED4",opacity:.85},$g=function(){function t(t){var e=t.x,n=void 0===e?0:e,r=t.y,i=void 0===r?0:r,o=t.width,a=void 0===o?200:o,s=t.height,u=void 0===s?26:s,l=t.smooth,c=void 0===l||l,h=t.isArea,d=void 0!==h&&h,f=t.data,p=void 0===f?[]:f,m=t.lineStyle,g=t.areaStyle,v=t.group,y=t.interval,b=void 0===y?null:y;this.group=v,this.x=n,this.y=i,this.width=a,this.height=u,this.data=p,this.smooth=c,this.isArea=d,this.lineStyle=Object.assign({},Yg,m),this.areaStyle=Object.assign({},qg,g),this.intervalConfig=b,this.renderLine()}return t.prototype.renderLine=function(){var t=this,e=t.x,n=t.y,r=t.width,i=t.height,o=(t.barWidth,t.data),a=t.smooth,s=t.isArea,u=t.lineStyle,l=t.areaStyle,c=this.group.addGroup({name:"trend-group"});if(o){var h=Vg(o,r,i,a);if(c.addShape("path",{attrs:Xg({path:h},u),name:"trend-line"}),s){var d=Gg(h,r,i,o);c.addShape("path",{attrs:Xg({path:d},l),name:"trend-area"})}}this.intervalConfig&&c.addShape("path",{attrs:Xg({path:Hg(this.intervalConfig.data,r,i,this.intervalConfig.style.barWidth)},this.intervalConfig.style),name:"trend-interval"}),c.move(e,n)},t.prototype.destory=function(){this.group.destroy()},t}();const Kg=$g;var Zg=function(){return Zg=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Zg.apply(this,arguments)},Qg={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},Jg={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},tv=function(){function t(t){var e=t.group,n=t.name,r=t.type,i=t.x,o=void 0===i?0:i,a=t.y,s=void 0===a?0:a,u=t.width,l=void 0===u?2:u,c=t.height,h=void 0===c?24:c,d=t.style,f=void 0===d?{}:d;this.group=e,this.name=n,this.handleType=r,this.x=o,this.y=s,this.width=l,this.height=h,"trend"===r?this.style=Zg(Zg({},Qg),f):"simple"===r&&(this.style=Zg(Zg({},Jg),f)),this.renderHandle()}return t.prototype.setX=function(t){this.setXY(t,void 0)},t.prototype.setY=function(t){this.setXY(void 0,t)},t.prototype.setXY=function(t,e){(0,x.isNumber)(t)&&(this.x=t),(0,x.isNumber)(e)&&(this.y=e),this.updateXY()},t.prototype.renderHandle=function(){var t=this,e=t.width,n=t.height,r=t.style,i=t.name,o=r.fill,a=r.stroke,s=r.radius,u=r.opacity,l=r.cursor;this.handleGroup=this.group.addGroup(),"trend"===this.handleType?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:e,height:n,fill:o,stroke:a,radius:s,opacity:u,cursor:l},name:"".concat(i,"-handler")}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:e/2,y:0,r:2*e,fill:o,stroke:a,radius:s,opacity:u,cursor:l,lineAppendWidth:12},name:"".concat(i,"-handler")}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:e/2,y:n,r:2*e,fill:o,stroke:a,radius:s,opacity:u,cursor:l},name:"".concat(i,"-handler")})):"simple"===this.handleType&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:e/2,y:n/2,r:2*e,fill:o,stroke:a,radius:s,opacity:u,cursor:l,lineWidth:2},name:"".concat(i,"-handler")})),this.updateXY(),"trend"===this.handleType?this.bindTrendEvents():"simple"===this.handleType&&this.bindSimpleEvents()},t.prototype.bindSimpleEvents=function(){var t=this,e=this.name;this.handleGroup.on("".concat(e,"-handler:mouseenter"),(function(){var e=t.style.highLightFill;t.topCircle.attr("fill",e)})),this.handleGroup.on("".concat(e,"-handler:mouseleave"),(function(){var e=t.style.fill;t.topCircle.attr("fill",e)}))},t.prototype.bindTrendEvents=function(){var t=this,e=this.name;this.handleGroup.on("".concat(e,"-handler:mouseenter"),(function(){var e=t.style.highLightFill;t.verticalLine.attr("fill",e),t.topCircle.attr("fill",e),t.bottomCircle.attr("fill",e)})),this.handleGroup.on("".concat(e,"-handler:mouseleave"),(function(){var e=t.style.fill;t.verticalLine.attr("fill",e),t.topCircle.attr("fill",e),t.bottomCircle.attr("fill",e)}))},t.prototype.show=function(){this.handleGroup.show()},t.prototype.hide=function(){this.handleGroup.hide()},t.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},t}();const ev=tv;var nv=function(){return nv=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},nv.apply(this,arguments)},rv=N,iv={fill:"#416180",opacity:.05},ov={fill:"#416180",opacity:.15,radius:5},av={fill:"#5B8FF9",opacity:.3,cursor:"grab"},sv={width:2,height:24},uv={textBaseline:"middle",fill:"#000",opacity:.45},lv={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},cv={lineWidth:1,stroke:"#ccc"},hv=function(){function t(t){var e=this;this.prevX=0,this.onMouseDown=function(t){return function(n){e.currentHandler=t;var r=n.originalEvent;r.stopPropagation(),r.preventDefault(),e.prevX=(0,x.get)(r,"touches.0.pageX",r.pageX);var i=e.canvas.get("container");i.addEventListener("mousemove",e.onMouseMove),i.addEventListener("mouseup",e.onMouseUp),i.addEventListener("mouseleave",e.onMouseUp),i.addEventListener("touchmove",e.onMouseMove),i.addEventListener("touchend",e.onMouseUp),i.addEventListener("touchcancel",e.onMouseUp)}},this.onMouseMove=function(t){t.stopPropagation(),t.preventDefault();var n=(0,x.get)(t,"touches.0.pageX",t.pageX),r=n-e.prevX,i=e.adjustOffsetRange(r/e.width);e.updateStartEnd(i),e.updateUI(),e.prevX=n},this.onMouseUp=function(){e.currentHandler&&(e.currentHandler=void 0);var t=e.canvas.get("container");t&&(t.removeEventListener("mousemove",e.onMouseMove),t.removeEventListener("mouseup",e.onMouseUp),t.removeEventListener("mouseleave",e.onMouseUp),t.removeEventListener("touchmove",e.onMouseMove),t.removeEventListener("touchend",e.onMouseUp),t.removeEventListener("touchcancel",e.onMouseUp))};var n=t.x,r=void 0===n?0:n,i=t.y,o=void 0===i?0:i,a=t.width,s=void 0===a?100:a,u=t.height,l=t.padding,c=void 0===l?10:l,h=t.trendCfg,d=t.controllerCfg,f=void 0===d?{speed:1}:d,p=t.backgroundStyle,m=void 0===p?{}:p,g=t.foregroundStyle,v=void 0===g?{}:g,y=t.handlerStyle,b=void 0===y?{}:y,w=t.textStyle,_=void 0===w?{}:w,S=t.start,E=void 0===S?0:S,A=t.end,M=void 0===A?1:A,C=t.minText,T=void 0===C?"":C,k=t.maxText,I=void 0===k?"":k,N=t.group,P=t.graph,O=t.canvas,L=t.tick,R=void 0===L?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(t){return t},ticks:[]}:L,D=t.type;this.graph=P,this.canvas=O,this.group=N,this.timeBarType=D,this.x=r,this.y=o,this.width=s,this.height=u,this.padding=c,this.ticks=R.ticks,this.trendCfg=h,this.controllerCfg=f,this.currentSpeed=f.speed||1,this.tickLabelFormatter=R.tickLabelFormatter,"trend"===D?this.backgroundStyle=nv(nv({},iv),m):"simple"===D&&(this.backgroundStyle=nv(nv({},ov),m)),this.foregroundStyle=nv(nv({},av),v),this.handlerStyle=nv(nv({},sv),b),this.textStyle=nv(nv({},uv),_),this.tickLabelStyle=nv(nv({},lv),R.tickLabelStyle),this.tickLineStyle=nv(nv({},cv),R.tickLineStyle),this.currentMode=f.defaultTimeType||Yp,this.start=E,this.end=M,this.minText=T,this.maxText=I,this.fontFamily="undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return t.prototype.update=function(t){var e=t.x,n=t.y,r=t.width,i=t.height,o=t.minText,a=t.maxText,s=t.start,u=t.end;this.start=Math.min(1,Math.max(s,0)),this.end=Math.min(1,Math.max(u,0)),(0,x.assign)(this,{x:e,y:n,width:r,height:i,minText:o,maxText:a}),this.updateUI()},t.prototype.setText=function(t,e){this.minTextShape.attr("text",t),this.maxTextShape.attr("text",e)},t.prototype.renderSlider=function(){var t=this,e=this,n=e.width,r=e.height,i=e.timeBarType;if("trend"===i&&(0,x.size)((0,x.get)(this.trendCfg,"data"))){var o=new Kg(nv(nv({x:this.x,y:this.y,width:n,height:r},this.trendCfg),{group:this.group}));this.trendComponent=o}var a=this.group.addGroup({name:"slider-group"});a.addShape("rect",{attrs:nv({x:0,y:0,width:n,height:r},this.backgroundStyle),name:"background"});var s=this.group.addGroup();"trend"===i?(this.minTextShape=s.addShape("text",{attrs:nv({x:0,y:r/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=s.addShape("text",{attrs:nv({y:r/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})):(this.minTextShape=s.addShape("text",{attrs:nv({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=s.addShape("text",{attrs:nv({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:nv({x:0,y:this.y,height:r},this.foregroundStyle),name:"foreground-shape"}),this.foregroundShape.on("mousedown",(function(t){t.target.attr("cursor","grabbing")})),this.foregroundShape.on("mouseup",(function(e){e.target.attr("cursor",t.foregroundStyle.cursor||"grab")}));var u=(0,x.get)(this.handlerStyle,"width",2),l=(0,x.get)(this.handlerStyle,"height",24),c=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new ev({name:"minHandlerShape",group:c,type:i,x:this.x,y:this.y,width:u,height:l,style:this.handlerStyle});var h=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new ev({name:"maxHandlerShape",group:h,type:i,x:this.x,y:this.y,width:u,height:l,style:this.handlerStyle});var d=this.ticks,f=n/(d.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach((function(t){t.destroy()}));var p=-1/0,m=this.tickLabelStyle.rotate;delete this.tickLabelStyle.rotate,this.textList=d.map((function(e,n){var i;t.tickPosList.push(t.x+n*f),t.tickLabelFormatter?(i=t.tickLabelFormatter(e),!(0,x.isString)(i)&&i&&(i=e.date)):i=e.date;var o=t.x+n*f,a=t.y+r+5,s=t.group.addShape("text",{attrs:nv({x:o,y:a,text:i,fontFamily:t.fontFamily||"Arial, sans-serif"},t.tickLabelStyle),name:"tick-label"});if((0,x.isNumber)(m)&&n!==d.length-1){var u=rv([1,0,0,0,1,0,0,0,1],[["t",-o,-a],["r",m],["t",o-5,a+2]]);s.attr({textAlign:"left",matrix:u})}0===n?s.attr({textAlign:"left"}):n!==d.length-1&&s.attr({textAlign:"right"});var l=t.group.addShape("line",{attrs:nv({x1:t.x+n*f,y1:t.y+r+2,x2:t.x+n*f,y2:t.y+r+6},t.tickLineStyle),name:"tick-line"});l.toBack();var c=s.getBBox();return c.minX>p?(s.show(),l.show(),p=c.minX+c.width+10):(s.hide(),l.hide()),s})),this.controllerBtnGroup=new $p(nv({group:this.group,x:this.x,y:this.y+r+25,width:n,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),a.move(this.x,this.y),this.bindEvents(),this.currentMode===Xp&&(this.minHandlerShape.hide(),this.foregroundShape.hide(),this.minTextShape.hide())},t.prototype.bindEvents=function(){var t=this,e=this.group.find((function(t){return"minHandlerShape"===t.get("name")}));e&&(e.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),e.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var n=this.group.find((function(t){return"maxHandlerShape"===t.get("name")}));n&&(n.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),n.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("".concat(kp,":click"),(function(){t.isPlay=!t.isPlay,t.currentHandler=t.maxHandlerShape,t.changePlayStatus()})),this.group.on("".concat(Ip,":click"),(function(){t.currentHandler=t.maxHandlerShape,t.updateStartEnd(.01),t.updateUI()})),this.group.on("".concat(Np,":click"),(function(){t.currentHandler=t.maxHandlerShape,t.updateStartEnd(-.01),t.updateUI()})),this.group.on(Tp,(function(e){var n=e.type,r=e.speed;t.currentSpeed=r,t.currentMode=n,n===Xp?(t.minHandlerShape.hide(),t.foregroundShape.hide(),t.minTextShape.hide()):n===Yp&&(t.minHandlerShape.show(),t.foregroundShape.show(),t.minTextShape.show())}))},t.prototype.adjustTickIndex=function(t){for(var e=0;e<this.tickPosList.length-1;e++)if(this.tickPosList[e]<=t&&t<=this.tickPosList[e+1])return Math.abs(this.tickPosList[e]-t)<Math.abs(t-this.tickPosList[e+1])?e:e+1;return 0},t.prototype.adjustOffsetRange=function(t){switch(this.currentHandler){case this.minHandlerShape:var e=0-this.start,n=1-this.start;return Math.min(n,Math.max(e,t));case this.maxHandlerShape:e=0-this.end,n=1-this.end;return Math.min(n,Math.max(e,t));case this.foregroundShape:e=0-this.start,n=1-this.end;return Math.min(n,Math.max(e,t));default:return 0}},t.prototype.updateStartEnd=function(t){var e=this.ticks[this.adjustTickIndex(this.start*this.width)],n=this.ticks[this.adjustTickIndex(this.end*this.width)];if(!this.currentHandler)return this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):null==e?void 0:e.date,void(this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):null==n?void 0:n.date);switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=t,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):e.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=t,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date;break;case this.foregroundShape:this.start+=t,this.end+=t,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):e.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date}},t.prototype.updateUI=function(){var t=this;this.start<0&&(this.start=0),this.start>1&&(this.start=1),this.end>1&&(this.end=1),this.end<0&&(this.end=0);var e=this.x+this.start*this.width,n=this.x+this.end*this.width;this.foregroundShape.attr("x",e),this.foregroundShape.attr("width",n-e);var r=(0,x.get)(this.handlerStyle,"width",2);this.setText(this.minText,this.maxText);var i=this.dodgeText([e,n]),o=i[0],a=i[1];this.minHandlerShape.setX(e-r/2),(0,x.each)(o,(function(e,n){return t.minTextShape.attr(n,e)})),this.maxHandlerShape.setX(n-r/2),(0,x.each)(a,(function(e,n){return t.maxTextShape.attr(n,e)})),this.currentMode===Yp?this.graph.emit(Cp,{value:[this.start,this.end].sort()}):this.currentMode===Xp&&this.graph.emit(Cp,{value:[this.end,this.end]})},t.prototype.dodgeText=function(t){var e,n,r=(0,x.get)(this.handlerStyle,"width",2),i=this.minTextShape,o=this.maxTextShape,a=t[0],s=t[1],u=!1;a>s&&(a=(e=[s,a])[0],s=e[1],i=(n=[o,i])[0],o=n[1],u=!0);var l=i.getBBox(),c=o.getBBox(),h=null,d=null;return"trend"===this.timeBarType?(h=a-l.width<this.x+2?{x:a+r/2+2,textAlign:"left"}:{x:a-r/2-2,textAlign:"right"},d=s+c.width>this.x+this.width?{x:s-r/2-2,textAlign:"right"}:{x:s+r/2+2,textAlign:"left"}):"simple"===this.timeBarType&&(h=i.attr("x")>l.width?{x:a,textAlign:"center"}:{x:a,textAlign:"left"},d=o.attr("x")>this.width-c.width?{x:s,textAlign:"right"}:{x:s,textAlign:"center"}),u?[d,h]:[h,d]},t.prototype.startPlay=function(){var t=this;return"undefined"!=typeof window?window.requestAnimationFrame((function(){var e=t,n=e.ticks,r=e.width,i=t.currentSpeed,o=r/n.length/(1e3*(10-i)/60),a=t.adjustOffsetRange(o/t.width);t.updateStartEnd(a),t.updateUI(),t.isPlay&&(t.playHandler=t.startPlay())})):void 0},t.prototype.changePlayStatus=function(t){void 0===t&&(t=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(Ap,null)):this.playHandler&&("undefined"!=typeof window&&window.cancelAnimationFrame(this.playHandler),t&&this.graph.emit(Mp,null))},t.prototype.destory=function(){this.graph.off(Cp,(function(){}));var t=this.group,e=t.find((function(t){return"minHandlerShape"===t.get("name")}));e&&(e.off("minHandlerShape-handler:mousedown"),e.off("minHandlerShape-handler:touchstart"),e.destroy());var n=t.find((function(t){return"maxHandlerShape"===t.get("name")}));n&&(n.off("maxHandlerShape-handler:mousedown"),n.off("maxHandlerShape-handler:touchstart"),n.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),t.off("".concat(kp,":click")),t.off("".concat(Ip,":click")),t.off("".concat(Np,":click")),t.off(Tp),t.destroy(),this.trendComponent&&this.trendComponent.destory()},t}();const dv=hv;var fv=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pv=function(){return pv=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},pv.apply(this,arguments)},mv=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},gv=function(t){function e(e){var n=t.call(this,e)||this;return n.afterrenderListener=function(t){return n.filterData({})},n.valueChangeListener=(0,x.throttle)((function(t){return n.filterData(t)}),200,{trailing:!0,leading:!0}),n.changeData=function(t){var e=n.get("graph");n.cacheGraphData=e.get("data"),n.filterData({})},n}return fv(e,t),e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1,filterItemTypes:["node"],containerCSS:{},putInGraphContainer:!0}},e.prototype.initContainer=function(){var t,e,n=this.get("graph"),r=this._cfgs,i=r.width,o=r.height,a=r.putInGraphContainer,s=this.get("className")||"g6-component-timebar",u=this.get("container");(u?((0,x.isString)(u)&&(u=document.getElementById(u)),t=u):Gf(t=Uh("<div class='".concat(s,"'></div>")),{position:"relative"}),a)&&this.get("graph").get("container").appendChild(t);this.set("timeBarContainer",t),e="SVG"===n.get("renderer")?new Rh({container:t,width:i,height:o}):new Ic({container:t,width:i,height:o}),this.get("containerCSS")&&Gf(t,this.get("containerCSS")),this.set("canvas",e)},e.prototype.init=function(){this.initContainer();var t=this.get("canvas").addGroup({name:"timebar-group"});this.set("timeBarGroup",t),this.renderTrend(),this.initEvent();var e="undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",e)},e.prototype.play=function(){this.togglePlay(!0)},e.prototype.pause=function(){this.togglePlay(!1)},e.prototype.togglePlay=function(t){var e=this.get("timebar");e&&(e.isPlay=!!t,e.changePlayStatus())},e.prototype.renderTrend=function(){var t=this,e=this._cfgs,n=e.width,r=e.x,i=e.y,o=e.padding,a=e.type,s=e.trend,u=e.slider,l=e.controllerCfg,c=e.textStyle,h=e.tick,d=e.backgroundStyle,f=e.foregroundStyle,p=s.data,m=mv(s,["data"]),g=n-2*o,v="trend"===a?26:4,y=this.get("graph"),b=this.get("timeBarGroup"),x=this.get("canvas"),w=null;if("trend"===a||"simple"===a){var _=this.get("getValue");w=new dv(pv(pv({graph:y,canvas:x,group:b,type:a,x:r+o,y:"trend"===a?i+o:i+o+15,width:g,height:v,padding:o,backgroundStyle:d,foregroundStyle:f,trendCfg:pv(pv({},m),{data:p.map((function(t){return(null==_?void 0:_(t))||t.value}))})},u),{tick:{ticks:p,tickLabelFormatter:h.tickLabelFormatter,tickLabelStyle:h.tickLabelStyle,tickLineStyle:h.tickLineStyle},handlerStyle:pv(pv({},u.handlerStyle),{height:u.height||v}),controllerCfg:l,textStyle:c}))}else"tick"===a&&(w=new em(pv({graph:y,canvas:x,group:b,x:r+o,y:i+o,width:n,height:42,padding:2,controllerCfg:l},h)));var S=function e(){var n=t.get("timebar");n.draggingHandler=!1,n.isPlay&&(n.isPlay=!1,n.currentHandler=n.maxHandlerShape,n.changePlayStatus()),document.removeEventListener("mouseup",e)};x.on("mousedown",(function(t){"maxHandlerShape-handler"!==t.target.get("name")&&"minHandlerShape-handler"!==t.target.get("name")&&t.target!==w.foregroundShape||document.addEventListener("mouseup",S)})),this.set("timebar",w)},e.prototype.filterData=function(t){var e,n=t.value;if(!n){n=[];var r=this._cfgs.type;r&&"trend"!==r&&"simple"!==r?"tick"===r&&(n[0]=this._cfgs.tick.start,n[1]=this._cfgs.tick.end):(n[0]=this._cfgs.slider.start,n[1]=this._cfgs.slider.end)}var i=null,o=this._cfgs.type;if("trend"===o||"simple"===o?i=this._cfgs.trend.data:"tick"===o&&(i=this._cfgs.tick.data),i&&0!==i.length){var a=this.get("rangeChange"),s=this.get("graph"),u=Math.round(i.length*n[0]),l=Math.round(i.length*n[1]);l=l>=i.length?i.length-1:l,u=u>=i.length?i.length-1:u;var c=null===(e=this._cfgs.tick)||void 0===e?void 0:e.tickLabelFormatter,h=c?c(i[u]):i[u].date,d=c?c(i[l]):i[l].date;if("tick"!==o)this.get("timebar").setText(h,d);if(a)a(s,h,d);else{(!this.cacheGraphData||this.cacheGraphData.nodes&&0===this.cacheGraphData.nodes.length)&&(this.cacheGraphData=s.get("data"));var f=this.get("filterItemTypes"),p=this.get("changeData"),m=this.get("getDate"),g=this.get("shouldIgnore"),v=i[u].date,y=i[l].date;if(p||void 0===p){var b=this.cacheGraphData.nodes,x=this.cacheGraphData.edges,w={},_={};s.getNodes().forEach((function(t){return w[t.getID()]=!0})),s.getEdges().forEach((function(t){return _[t.getID()]=!0})),f.includes("node")&&(null==b||b.forEach((function(t){var e=+((null==m?void 0:m(t))||t.date),n=e>=v&&e<=y||(null==g?void 0:g("node",t,{min:v,max:y})),r=w[t.id];r&&!n?(s.removeItem(t.id),w[t.id]=!1):!r&&n&&(s.addItem("node",t),w[t.id]=!0)})),null==x||x.forEach((function(t){var e=w[t.source]&&w[t.target]||(null==g?void 0:g("edge",t,{min:v,max:y})),n=!!s.findById(t.id);n&&!e?(s.removeItem(t.id),_[t.id]=!1):!n&&e?(s.addItem("edge",t),_[t.id]=!0):n||(_[t.id]=!1)}))),(this.get("filterEdge")||f.includes("edge"))&&(null==x||x.filter((function(t){var e=+((null==m?void 0:m(t))||t.date),n=e>=v&&e<=y||(null==g?void 0:g("edge",t,{min:v,max:y})),r=w[t.source]&&w[t.target],i=n&&r,o=_[t.id];o&&!i?(_[t.id]=!1,s.removeItem(t.id)):!o&&i&&(_[t.id]=!0,s.addItem("edge",t))})))}else f.includes("node")&&s.getNodes().forEach((function(t){var e=t.getModel();if(!(null==g?void 0:g("node",e,{min:v,max:y}))){var n=+((null==m?void 0:m(e))||e.date);n<v||n>y?s.hideItem(t):s.showItem(t)}})),(this.get("filterEdge")||f.includes("edge"))&&s.getEdges().forEach((function(t){var e=t.getModel();if(!(null==g?void 0:g("edge",e,{min:i[u].date,max:i[l].date}))){var n=+((null==m?void 0:m(e))||e.date);if(n<i[u].date||n>i[l].date)s.hideItem(t);else{var r=t.getSource().isVisible(),o=t.getTarget().isVisible();r&&o&&s.showItem(t)}}}))}}else console.warn(" TimeBar ")},e.prototype.initEvent=function(){var t=this.get("graph");t.on("afterchangedata",this.changeData),t.on("afterrender",this.afterrenderListener),t.on(Cp,this.valueChangeListener)},e.prototype.destroy=function(){var e=this.get("graph");e.off("afterchangedata",this.changeData),e.off("afterrender",this.afterrenderListener),e.off(Cp,this.valueChangeListener);var n=this.get("timebar");n&&n.destory&&n.destory(),t.prototype.destroy.call(this);var r=this.get("timeBarContainer");if(r){var i=this.get("container");i||(i=this.get("graph").get("container")),(0,x.isString)(i)&&(i=document.getElementById(i)),i===r&&(i=i.parentElement),i.removeChild(r)}},e}(Xf);const vv=gv;var yv=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),bv=el.applyMatrix;var xv=function(t){function e(e){return t.call(this,e)||this}return yv(e,t),e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,e=this._cfgs,n=e.graph;if(!this.destroyed){var r=this.get("container");(0,x.isString)(r)&&(r=document.getElementById(r));var i=Uh("<div class=".concat(e.viewportClassName,"\n      style='position:absolute;\n        left:0;\n        top:0;\n        box-sizing:border-box;\n        border: 2px solid #1980ff;\n        cursor:move'\n      </div>")),o=0,a=0,s=!1,u=0,l=0,c=0,h=0,d=0,f=0;r.addEventListener("mousedown",(function(r){if(e.refresh=!1,r.target===i){var u=i.style;c=parseInt(u.width,10),h=parseInt(u.height,10);var l=t.get("width"),p=t.get("height");c>l||h>p||(f=n.getZoom(),d=t.get("ratio"),s=!0,o=r.clientX,a=r.clientY)}}),!1),r.addEventListener("mousemove",(function(e){if(s&&!(0,x.isNil)(e.clientX)&&!(0,x.isNil)(e.clientY)){var r=t.get("width"),p=t.get("height"),m=i.style;u=parseInt(m.left,10),l=parseInt(m.top,10),c=parseInt(m.width,10),h=parseInt(m.height,10);var g=o-e.clientX,v=a-e.clientY;u-g<0?g=u:u-g+c>=r&&(g=0),l-v<0?v=l:l-v+h>=p&&(v=0),l-=v,Gf(i,{left:"".concat(u-=g,"px"),top:"".concat(l,"px")}),n.translate(g*f/d,v*f/d),o=e.clientX,a=e.clientY}}),!1),r.addEventListener("mouseleave",(function(){s=!1,e.refresh=!0}),!1),r.addEventListener("mouseup",(function(){s=!1,e.refresh=!0}),!1),this.set("viewport",i),r.appendChild(i)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),e=this.get("width"),n=this.get("height"),r=this.get("graph"),i=r.get("width"),o=i/r.get("height"),a=r.getGroup(),s=a.getCanvasBBox(),u=[(s.minX+s.maxX)/2,(s.minY+s.maxY)/2],l=[s.maxX-s.minX,s.maxY-s.minY],c={centerX:u[0],centerY:u[1],width:0,height:0,minX:0,minY:0};s[0]/s[1]>o?(c.width=l[0],c.height=c.width/o):(c.height=l[1],c.width=c.height*o),c.minX=u[0]-c.width/2,c.minY=u[1]-c.height/2;var h=a.getMatrix();h||(h=[1,0,0,0,1,0,0,0,1]);var d=C.invert([1,0,0,0,1,0,0,0,1],h),f=bv({x:c.minX,y:c.minY},d),p=r.getCanvasByPoint(f.x,f.y),m=this.get("viewport");m||this.initViewport();var g=i/c.width,v=g*e,y=g*n,b=e*-p.x/c.width,x=n*-p.y/c.height,w=b+v,_=x+y;b<0&&(v+=b,b=0),w>e&&(v-=w-e),x<0&&(y+=x,x=0),_>n&&(y-=_-n),this.set("ratio",t),Gf(m,{left:"".concat(b,"px"),top:"".concat(x,"px"),width:"".concat(v,"px"),height:"".concat(y,"px")})}},e.prototype.init=function(){this.initContainer()},e.prototype.initContainer=function(){var t=this,e=t.get("graph"),n=e.get("width"),r=e.get("height")/n,i=t.get("className"),o=t.get("container"),a=t.get("width"),s=t.get("height");a||s||(a=200),a?(s=r*a,t.set("height",s)):(a=1/r*s,t.set("width",a));var u=Uh("<div class='".concat(i,"' style='width: ").concat(a,"px; height: ").concat(s,"px; overflow: hidden; position: relative;'></div>"));(0,x.isString)(o)&&(o=document.getElementById(o)),o?o.appendChild(u):e.get("container").appendChild(u),t.set("container",u);var l=Uh('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');u.appendChild(l);var c=Uh('<span style="display: table-cell; vertical-align: middle; "></span>');l.appendChild(c),t.set("containerDOM",l),t.set("containerSpan",c);var h=Uh('<img alt="" src="'.concat(this.get("graphImg"),'" style="display: inline-block; user-select: none;" draggable="false" />'));t.set("imgDOM",h),t.updateImgSize(),c.appendChild(h),t.updateCanvas()},e.prototype.updateImgSize=function(){var t=this,e=t.get("imgDOM"),n=t.get("width"),r=t.get("height");e.onload=function(){var t=function(t,e){var n,r;if(t.naturalWidth)n=t.naturalWidth,r=t.naturalHeight;else{var i=new Image;i.src=t.src,i.onload=function(){e&&e(i.width,i.height)}}return[n,r]}(e);t[0]>t[1]?e.width=n:e.height=r}},e.prototype.updateCanvas=function(){if(this.get("refresh")){var t=this.get("graph");if(!t.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var e=this.get("width")/t.get("canvas").getCanvasBBox().width;this.set("ratio",e),this.updateViewport()}}},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.updateGraphImg=function(t){var e=this;e.get("imgDOM").remove(),e.set("graphImg",t);var n=Uh('<img alt="" src="'.concat(t,'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>'));e.set("imgDOM",n),n.src=t,e.updateImgSize(),e.get("containerSpan").appendChild(n),e.updateCanvas()},e.prototype.destroy=function(){var t=this.get("container");t.parentNode.removeChild(t)},e}(Xf);const wv=xv;var _v=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Sv=function(){return Sv=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Sv.apply(this,arguments)},Ev=el.distance,Av={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},Mv=function(t){function e(e){return t.call(this,e)||this}return _v(e,t),e.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:(0,x.clone)(Av),showLabel:"edge",scaleRBy:"wheel"}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"filter"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"filter"}}return t},e.prototype.init=function(){var t=this,e=t.get("showLabel"),n="node"===e||"both"===e,r="edge"===e||"both"===e;t.set("showNodeLabel",n),t.set("showEdgeLabel",r),t.get("shouldShow")||t.set("shouldShow",(function(){return!0}))},e.prototype.createDelegate=function(t){var e=this,n=e.get("delegate");n&&!n.destroyed||(e.filter(t),(n=e.get("delegate")).on("dragstart",(function(t){})),n.on("drag",(function(t){e.filter(t)})),"wheel"===this.get("scaleRBy")&&n.on("mousewheel",(function(t){e.scaleRByWheel(t)})))},e.prototype.scaleRByWheel=function(t){var e=this;if(t&&t.originalEvent){t.preventDefault&&t.preventDefault();var n,r=e.get("graph"),i=e.get("delegate");(i?{x:i.attr("x"),y:i.attr("y")}:void 0)||r.getPointByClient(t.clientX,t.clientY);n=t.originalEvent.wheelDelta<0?.95:1/.95;var o=e.get("maxR"),a=e.get("minR"),s=e.get("r");(s>(o||r.get("height"))&&n>1||s<(a||.05*r.get("height"))&&n<1)&&(n=1),s*=n,e.set("r",s),e.filter(t)}},e.prototype.filter=function(t){var e=this,n=e.get("graph"),r=n.getNodes(),i={},o=e.get("r"),a=e.get("type"),s={x:t.x,y:t.y};e.updateDelegate(s,o);var u=e.get("shouldShow"),l=e.get("vShapes");l&&l.forEach((function(t){t.remove(),t.destroy()})),l=[],r.forEach((function(t){var e=t.getModel(),n=e.x,r=e.y;Ev({x:n,y:r},s)<o&&(i[e.id]=t)}));var c=n.getEdges(),h=[];c.forEach((function(t){var e=t.getModel(),n=e.source,r=e.target;u(e)&&("only-source"===a||"one"===a?i[n]&&!i[r]&&h.push(t):"only-target"===a||"one"===a?i[r]&&!i[n]&&h.push(t):"both"===a&&i[n]&&i[r]&&h.push(t))}));var d=e.get("showNodeLabel"),f=e.get("showEdgelabel"),p=n.get("group");h.forEach((function(t){t.get("group").get("children").forEach((function(t){var e=t.get("type"),n=p.addShape(e,{attrs:t.attr()});l.push(n),d&&"text"===e&&n.set("visible",!0)}))})),Object.keys(i).forEach((function(t){var e=i[t].get("group").clone();if(p.add(e),l.push(e),f)for(var n=e.get("children"),r=0;r<n.length;r++){var o=n[r];"text"===o.get("type")&&o.set("visible",!0)}})),e.set("vShapes",l)},e.prototype.updateParams=function(t){var e=this,n=t.r,r=t.trigger,i=t.minR,o=t.maxR,a=t.scaleRBy,s=t.showLabel,u=t.shouldShow;if(isNaN(t.r)||e.set("r",n),isNaN(o)||e.set("maxR",o),isNaN(i)||e.set("minR",i),"mousemove"!==r&&"click"!==r||e.set("trigger",r),"wheel"===a||"unset"===a){e.set("scaleRBy",a),e.get("delegate").remove(),e.get("delegate").destroy();var l=e.get("dPercentText");l&&(l.remove(),l.destroy())}"node"!==s&&"both"!==s||e.set("showNodeLabel",!0),"edge"!==s&&"both"!==s||e.set("showEdgeLabel",!0),u&&e.set("shouldShow",u)},e.prototype.updateDelegate=function(t,e){var n=this,r=n.get("graph"),i=n.get("delegate");if(!i||i.destroyed){var o=r.get("group"),a=n.get("delegateStyle")||Av;i=o.addShape("circle",{attrs:Sv({r:e,x:t.x,y:t.y},a),name:"lens-shape",draggable:!0}),"drag"!==this.get("trigger")&&"wheel"===this.get("scaleRBy")&&i.on("mousewheel",(function(t){n.scaleRByWheel(t)}))}else i.attr({x:t.x,y:t.y,r:e});n.set("delegate",i)},e.prototype.clear=function(){var t=this,e=t.get("vShapes");e&&e.forEach((function(t){t.remove(),t.destroy()})),e=[],t.set("vShapes",e);var n=t.get("delegate");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(Xf);const Cv=Mv;var Tv=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kv=el.pointLineDistance,Iv={stroke:"#FA8C16",lineWidth:1},Nv=function(t){function e(e){return t.call(this,e)||this}return Tv(e,t),e.prototype.getDefaultCfgs=function(){return{line:Iv,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},e.prototype.init=function(){},e.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},e.prototype.onDragStart=function(){this.initBoxLine()},e.prototype.onDrag=function(t){var e=t.item,n=(e.get("delegateShape")||e).getBBox(),r=e.getModel(),i=r.x-n.x,o=r.y-n.y;this.show({x:n.minX+i,y:n.minY+o},{width:n.width,height:n.height})},e.prototype.onDragEnd=function(){this.destory()},e.prototype.initBoxLine=function(){var t=this._cfgs,e=t.horizontalLines,n=t.verticalLines,r=t.itemAlignType;this.get("graph").getNodes().forEach((function(t){var i=t.getBBox(),o=t.get("id");!0===r||"horizontal"===r?(e["".concat(o,"tltr")]=[i.minX,i.minY,i.maxX,i.minY,t],e["".concat(o,"lcrc")]=[i.minX,i.centerY,i.maxX,i.centerY,t],e["".concat(o,"blbr")]=[i.minX,i.maxY,i.maxX,i.maxY,t]):"center"===r&&(e["".concat(o,"lcrc")]=[i.minX,i.centerY,i.maxX,i.centerY,t]),!0===r||"vertical"===r?(n["".concat(o,"tlbl")]=[i.minX,i.minY,i.minX,i.maxY,t],n["".concat(o,"tcbc")]=[i.centerX,i.minY,i.centerX,i.maxY,t],n["".concat(o,"trbr")]=[i.maxX,i.minY,i.maxX,i.maxY,t]):"center"===r&&(n["".concat(o,"tcbc")]=[i.centerX,i.minY,i.centerX,i.maxY,t])}))},e.prototype.show=function(t,e){var n=(0,x.mix)({},t);return this.itemAlign(t,e,n),t},e.prototype.itemAlign=function(t,e,n){var r=this,i=this._cfgs,o=i.horizontalLines,a=i.verticalLines,s=i.tolerance,u={x:n.x+e.width/2,y:n.y},l={x:n.x+e.width/2,y:n.y+e.height/2},c={x:n.x+e.width/2,y:n.y+e.height},h={x:n.x,y:n.y+e.height/2},d={x:n.x+e.width,y:n.y+e.height/2},f=[],p=[],m=null;if(this.clearAlignLine(),(0,x.each)(o,(function(t){t[4].isVisible&&(f.push(r.getLineDisObject(t,u)),f.push(r.getLineDisObject(t,l)),f.push(r.getLineDisObject(t,c)))})),(0,x.each)(a,(function(t){t[4].isVisible&&(p.push(r.getLineDisObject(t,h)),p.push(r.getLineDisObject(t,l)),p.push(r.getLineDisObject(t,d)))})),f.sort((function(t,e){return t.dis-e.dis})),p.sort((function(t,e){return t.dis-e.dis})),0!==f.length&&f[0].dis<s){t.y=f[0].line[1]-f[0].point.y+n.y,m={type:"item",horizontals:[f[0]]};for(var g=1;g<3;g++)f[0].dis===f[g].dis&&m.horizontals.push(f[g])}if(0!==p.length&&p[0].dis<s){t.x=p[0].line[0]-p[0].point.x+n.x,m?m.verticals=[p[0]]:m={type:"item",verticals:[p[0]]};for(g=1;g<3;g++)p[0].dis===p[g].dis&&m.verticals.push(p[g])}m&&(m.bbox=e,this.addAlignLine(m))},e.prototype.addAlignLine=function(t){var e=t.bbox,n=t.type,r=t.horizontals,i=t.verticals,o=this._cfgs,a=o.line,s=o.alignLines,u=this.get("graph").get("group");"item"===n&&(r&&(0,x.each)(r,(function(t){var n,r,i=t.line,o=t.point,l=(i[0]+i[2])/2;o.x<l?(n=o.x-e.width/2,r=Math.max(i[0],i[2])):(n=o.x+e.width/2,r=Math.min(i[0],i[2]));var c=(0,x.mix)({x1:n,y1:i[1],x2:r,y2:i[1]},a),h=u.addShape("line",{attrs:c,capture:!1});s.push(h)})),i&&(0,x.each)(i,(function(t){var n,r,i=t.line,o=t.point,l=(i[1]+i[3])/2;o.y<l?(n=o.y-e.height/2,r=Math.max(i[1],i[3])):(n=o.y+e.height/2,r=Math.min(i[1],i[3]));var c=(0,x.mix)({x1:i[0],y1:n,x2:i[0],y2:r},a),h=u.addShape("line",{attrs:c,capture:!1});s.push(h)})))},e.prototype.getLineDisObject=function(t,e){return{line:t,point:e,dis:kv(t,e)}},e.prototype.getContainer=function(){return this.get("container")},e.prototype.clearAlignLine=function(){var t=this._cfgs.alignLines;(0,x.each)(t,(function(t){t.remove()})),t.length=0},e.prototype.destory=function(){var t=this._cfgs,e=t.horizontalLines,n=t.verticalLines;this.get("graph").getNodes().forEach((function(t){var r=t.get("id");delete e["".concat(r,"tltr")],delete e["".concat(r,"lcrc")],delete e["".concat(r,"blbr")],delete n["".concat(r,"tlbl")],delete n["".concat(r,"tcbc")],delete n["".concat(r,"trbr")]})),this.clearAlignLine()},e}(Xf);const Pv=Nv;var Ov=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Lv=function(){return Lv=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Lv.apply(this,arguments)},Rv=["click","mouseenter"],Dv=function(t){function e(e){return t.call(this,e)||this}return Ov(e,t),e.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},e.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var t=this.get("filter")||{};t.multiple&&"mouseenter"===t.trigger&&this.set("multiple",!1);var e=this.get("align");if(!e){var n=this.get("position").split("-");n.includes("left")&&(e="left"),e=n.includes("right")?"right":"center",this.set("align",e)}var r=this.get("graph").get("container"),i=Uh("<div class='g6-legend-container' style=\"position: absolute;\"></div>");r.appendChild(i),this.set("container",i);var o=this.render();Gf(i,this.getContainerPos(o)),this.bindEvents()},e.prototype.getContainerPos=function(t){void 0===t&&(t=[0,0]);var e=this.get("graph"),n=this.get("offsetX"),r=this.get("offsetY"),i=this.get("margin"),o=this.get("position").split("-"),a={top:0,right:1,bottom:2,left:3},s={left:(e.getWidth()-t[0])/2+0,top:(e.getHeight()-t[1])/2+0};return o.forEach((function(n){var r=i[a[n]],o=n;switch(n){case"top":case"left":r+=0;break;case"bottom":r=e.getHeight()-t[1]-r+0,o="top";break;default:r=e.getWidth()-t[0]-r+0,o="left"}s[o]=r})),s.top+=r+e.getContainer().offsetTop,s.left+=n+e.getContainer().offsetLeft,Object.keys(s).forEach((function(t){s[t]="".concat(s[t],"px")})),s},e.prototype.bindEvents=function(){var t=this,e=t.get("filter");if(e&&e.enable){var n=e.trigger||"click";Rv.includes(n)||(console.warn("Trigger for legend filterling must be 'click' or 'mouseenter', 'click' will take effect by default."),n="click");var r=t.get("legendCanvas");"mouseenter"===n?(r.on("node-container:mouseenter",(function(e){return t.filterData(e)})),r.on("node-container:mouseleave",(function(e){t.clearFilter(),t.clearActiveLegend()}))):(r.on("node-container:click",(function(e){return t.filterData(e)})),r.on("click",(function(e){e.target&&e.target.isCanvas&&e.target.isCanvas()&&(t.clearFilter(),t.clearActiveLegend())})))}},e.prototype.changeData=function(t){this.set("data",t);var e=this.render();Gf(this.get("container"),this.getContainerPos(e))},e.prototype.activateLegend=function(t){var e=this.get("filter");(null==e?void 0:e.multiple)||this.clearActiveLegend();var n=t.get("parent");n.get("active")?(n.set("active",!1),this.findLegendItemsByState("active").length&&n.set("inactive",!0)):(n.set("inactive",!1),n.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach((function(t){t.set("inactive",!0)})):this.clearActiveLegend();var r=(null==e?void 0:e.legendStateStyles)||{},i=(null==r?void 0:r.inactive)||{opacity:.5,"text-shape":{opacity:.5}},o=i["text-shape"]||{};this.findLegendItemsByState("inactive").forEach((function(t){var e=t.get("children"),n=e[0],r=e[1];n.attr(Lv(Lv({},n.get("oriAttrs")),i)),r.attr(Lv(Lv({},r.get("oriAttrs")),o))}));var a=(null==r?void 0:r.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}},s=a["text-shape"]||{};this.findLegendItemsByState("active").forEach((function(t){var e=t.get("children"),n=e[0],r=e[1];n.attr(Lv(Lv({},n.get("oriAttrs")),a)),r.attr(Lv(Lv({},r.get("oriAttrs")),s))}))},e.prototype.findLegendItemsByState=function(t,e,n){void 0===e&&(e="all"),void 0===n&&(n=!0);var r=this.get("legendCanvas").find((function(t){return"root"===t.get("name")})),i=r.find((function(t){return"node-group"===t.get("name")})),o=r.find((function(t){return"edge-group"===t.get("name")}));return"node"===e?i.get("children").filter((function(e){return!!e.get(t)===n})):"edge"===e?o.get("children").filter((function(e){return!!e.get(t)===n})):i.get("children").filter((function(e){return!!e.get(t)===n})).concat(o.get("children").filter((function(e){return!!e.get(t)===n})))},e.prototype.clearActiveLegend=function(){var t=this.get("legendCanvas").find((function(t){return"root"===t.get("name")}));[t.find((function(t){return"node-group"===t.get("name")})),t.find((function(t){return"edge-group"===t.get("name")}))].forEach((function(t){t.get("children").forEach((function(t){t.set("active",!1),t.set("inactive",!1);var e=t.get("children"),n=e[0],r=e[1];n.attr(n.get("oriAttrs")),r.attr(r.get("oriAttrs"))}))}))},e.prototype.filterData=function(t){var e=this.get("filter"),n=null==e?void 0:e.filterFunctions;if(e&&n){var r=this.get("legendCanvas"),i=this.get("graph"),o=e.graphActiveState||"active",a=e.graphInactiveState||"inactive",s=e.multiple;this.clearFilter(),s||this.clearActiveLegend(),this.activateLegend(t.target);var u=r.find((function(t){return"root"===t.get("name")})),l=u.find((function(t){return"node-group"===t.get("name")})),c=u.find((function(t){return"edge-group"===t.get("name")})),h=l.get("children").filter((function(t){return t.get("active")})),d=c.get("children").filter((function(t){return t.get("active")})),f=0,p=["getNodes","getEdges"];p.forEach((function(t){i[t]().forEach((function(e){var r=!1;("getNodes"===t?h:d).forEach((function(t){var i=n[t.get("id")];r=r||i(e.getModel())})),r?(i.setItemState(e,a,!1),i.setItemState(e,o,!0),f++):(i.setItemState(e,o,!1),i.setItemState(e,a,!0))}))})),f||p.forEach((function(t){i[t]().forEach((function(t){i.clearItemStates(t,[a])}))}))}},e.prototype.clearFilter=function(){var t=this.get("graph"),e=this.get("filter");if(e){var n=e.graphActiveState||"active",r=e.graphInactiveState||"inactive";t.getNodes().forEach((function(e){t.clearItemStates(e,[n,r])})),t.getEdges().forEach((function(e){t.clearItemStates(e,[n,r])}))}},e.prototype.render=function(){var t=this;this.processData();var e=this.get("legendCanvas");e?e.clear():e=new Ic({container:this.get("container"),width:200,height:200});var n=e.addGroup({name:"root"}),r=n.addGroup({name:"node-group"}),i=n.addGroup({name:"edge-group"});this.set("legendCanvas",e);var o=this.get("itemsData"),a=[r,i];["nodes","edges"].forEach((function(e,n){o[e].forEach((function(r){var i,o,s=a[n].addGroup({id:r.id,name:"node-container"}),u=r.type,l=t.getShapeSize(r),c=l.width,h=l.height,d=l.r,f=t.getStyle(e.substr(0,4),r);switch(r.type){case"circle":default:o={r:d,x:0,y:0};break;case"rect":o={width:c,height:h,x:-c/2,y:-h/2};break;case"ellipse":o={rx:c,ry:h,x:0,y:0},u="ellipse";break;case"line":o={x1:-c/2,y1:0,x2:c/2,y2:0},u="line";break;case"quadratic":o={path:[["M",-c/2,0],["Q",0,c/2,c/2,0]]},u="path";break;case"cubic":o={path:[["M",-c/2,0],["C",-c/6,c/2,c/6,-c/2,c/2,0]]},u="path";break;case"diamond":o={path:[["M",0,-h],["L",c,0],["L",0,h],["L",-c,0],["Z"]]},u="path";break;case"triangle":o={path:[["M",-c,h],["L",0,-h],["L",c,h],["Z"]]},u="path";break;case"star":o={path:el.getStarPath(3*d,1.2*d)},u="path"}var p=s.addShape(u,{attrs:Lv(Lv({},o),f),name:"".concat(r.type,"-node-keyShape"),oriAttrs:Lv({opacity:1},f)});if(r.label){var m=p.getBBox(),g=(null===(i=r.labelCfg)||void 0===i?void 0:i.style)||{},v=Lv({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},g);s.addShape("text",{attrs:Lv({x:m.maxX+4,y:0,text:r.label},v),className:"legend-label",name:"".concat(r.type,"-node-text"),oriAttrs:v})}}))}));var s,u=this.get("padding"),l=n.find((function(t){return"title-container"===t.get("name")})),c={height:0,maxY:0,width:0};if(this.get("title")){l||(l=n.addGroup({name:"title-container"}));var h={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:u[0]},d=this.get("titleConfig")||{},f=Object.assign(h,d.style||{});s=l.addShape("text",{attrs:Lv({text:this.get("title")},f)}),c=l.getCanvasBBox(),l.setMatrix([1,0,0,0,1,0,d.offsetX,d.offsetY,1])}this.layoutItems();var p=n.getCanvasBBox(),m=r.getCanvasBBox(),g=m.minX<0?Math.abs(m.minX)+u[3]:u[3],v=c.maxY<m.minY?Math.abs(c.maxY-m.minY)+u[0]:c.maxY+u[0],y=[1,0,0,0,1,0,g,v,1];r.setMatrix(y);var b=[(p=n.getCanvasBBox()).minX+p.width+u[1],p.minY+p.height+u[2]];if(s){d=Lv({position:"center",offsetX:0,offsetY:0},this.get("titleConfig"));c=l.getCanvasBBox();var x=l.getMatrix()||[1,0,0,0,1,0,0,0,1];"center"===d.position?x[6]=b[0]/2+d.offsetX:"right"===d.position?(x[6]=b[0]-u[3]+d.offsetX,s.attr({textAlign:"right"})):(x[6]=u[3]+d.offsetX,s.attr({textAlign:"left"})),l.setMatrix(x),c=l.getCanvasBBox(),y=[1,0,0,0,1,0,g=m.minX<0?Math.abs(m.minX)+u[3]:u[3],v=m.minY<c.maxY?Math.abs(c.maxY-m.minY)+u[0]:c.maxY+u[0],1],r.setMatrix(y);var w=[1,0,0,0,1,0,g,v,1];"vertical"===this.get("layout")?w[6]+=m.maxX+this.get("horiSep"):w[7]+=m.maxY+this.get("vertiSep"),i.setMatrix(w)}else{m=r.getCanvasBBox();var _=[1,0,0,0,1,0,0,0,1];"vertical"===this.get("layout")?_[6]+=y[6]+m.maxX+this.get("horiSep"):_[7]+=y[7]+m.maxY+this.get("vertiSep"),i.setMatrix(_)}p=n.getCanvasBBox(),m=r.getCanvasBBox(),y=r.getMatrix()||[1,0,0,0,1,0,0,0,1];var S=i.getMatrix()||[1,0,0,0,1,0,0,0,1],E=i.getCanvasBBox();b=[Math.max(m.width+y[6],E.width+S[6])+u[1],Math.max(m.height+y[7],E.height+S[7])+u[2]],e.changeSize(b[0],b[1]);var A=this.get("containerStyle"),M=n.getMatrix()||[1,0,0,0,1,0,0,0,1],C=el.invertMatrix({x:0,y:0},M);return n.addShape("rect",{attrs:Lv({x:C.x+(A.lineWidth||1),y:C.y+(A.lineWidth||1),width:b[0]-2*(A.lineWidth||1),height:b[1]-2*(A.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},A),name:"legend-back-rect",capture:!1}).toBack(),b},e.prototype.layoutItems=function(){var t=this.get("legendCanvas"),e=this.get("horiSep"),n=this.get("vertiSep"),r=this.get("layout"),i=this.get("align"),o=[0,0],a=t.find((function(t){return"root"===t.get("name")})),s=a.find((function(t){return"node-group"===t.get("name")})),u=a.find((function(t){return"edge-group"===t.get("name")})),l={min:0,max:-1/0},c=-1/0;s.get("children").forEach((function(t,i){0===i&&(l.min=o[0]);var a=t.get("children")[0],s=t.getCanvasBBox(),u=a.getBBox(),h=u.width,d=u.height,f=0,p=0,m=0;"vertical"===r?(p=o[1],m=o[0]+h/2,o[0]=m+s.height+n,f=s.maxX+p+h/2):(p=o[0]+h/2,m=o[1],o[0]=p+s.width+e,f=s.maxY+m+d/2),o[0]>l.max&&(l.max=o[0]),f>c&&(c=f),t.setMatrix([1,0,0,0,1,0,p,m,1])}));var h=l.max-l.min,d={min:0,max:-1/0},f=s.getCanvasBBox();o[0]=0,o[1]="vertical"===r?f.maxX+e:f.maxY+n,u.get("children").forEach((function(t,i){0===i&&(d.min=o[0]);var a=t.get("children")[0],s=t.getCanvasBBox(),u=a.getBBox(),l=u.width,c=u.height,h=0,f=0;"vertical"===r?(h=o[1],f=o[0],o[0]=f+s.height+n,t.setMatrix([1,0,0,0,1,0,0,f+c/2,1])):(h=o[0],f=o[1],o[0]=h+s.width+e,t.setMatrix([1,0,0,0,1,0,h+l/2,0,1])),o[0]>d.max&&(d.max=o[0])}));var p=d.max-d.min;if(i&&""!==i&&"left"!==i){var m=h-p,g="center"===i?Math.abs(m)/2:Math.abs(m);(m<0?s:u).get("children").forEach((function(t){var e=t.getMatrix()||[1,0,0,0,1,0,0,0,1];"vertical"===r?e[7]+=g:e[6]+=g,t.setMatrix(e)}))}},e.prototype.processData=function(){var t=this.get("data"),e={nodes:[],edges:[]};t.nodes&&(t.nodes.sort((function(t,e){return t.order-e.order})),t.nodes.forEach((function(t){var n,r,i,o,a,s=t.size||[(null===(n=t.style)||void 0===n?void 0:n.width)||(null===(r=t.style)||void 0===r?void 0:r.r)||8,(null===(i=t.style)||void 0===i?void 0:i.height)||(null===(o=t.style)||void 0===o?void 0:o.r)||8],u=(null===(a=t.labelCfg)||void 0===a?void 0:a.style)||{};e.nodes.push({id:t.id||(0,x.uniqueId)(),type:t.type||"circle",style:Lv({},t.style),order:t.order,label:t.label,itemType:"node",size:s,labelCfg:{position:"right",style:Lv({fontFamily:"Arial"},u)}})}))),t.edges&&(t.edges.sort((function(t,e){return t.order-e.order})),t.edges.forEach((function(t){var n,r,i=t.type||"line";"cubic-horizontal"===t.type&&(i="cubic");var o=(null===(n=t.labelCfg)||void 0===n?void 0:n.style)||{},a=t.size||[(null===(r=t.style)||void 0===r?void 0:r.width)||8,1];e.edges.push({id:t.id||(0,x.uniqueId)(),type:i,size:a,style:Lv({lineWidth:(0,x.isArray)(a)?a[1]:1},t.style),order:t.order,label:t.label,itemType:"edge",labelCfg:{position:"right",style:Lv({fontFamily:"Arial"},o)}})}))),this.set("itemsData",e)},e.prototype.getContainer=function(){return this.get("container")},e.prototype.formatArray=function(t){var e=this.get(t);if((0,x.isNumber)(e))this.set(t,[e,e,e,e]);else if((0,x.isArray)(e))switch(e.length){case 0:this.set(t,[0,0,0,0]);break;case 1:this.set(t,[e[0],e[0],e[0],e[0]]);break;case 2:this.set(t,[e[0],e[1],e[0],e[1]]);break;case 3:this.set(t,[e[0],e[1],e[2],e[1]])}return this.get(t)},e.prototype.getShapeSize=function(t){var e,n,r;return t.size&&((0,x.isArray)(t.size)?(e=t.size[0],n=t.size[1]||t.size[0],r=t.size[0]/2):(0,x.isNumber)(t.size)&&(e=t.size,n=t.size,r=t.size/2)),t.style&&(t.style.width&&(e=t.style.width),t.style.height&&(n=t.style.height),t.style.r&&(r=t.style.r)),r||(r=5),e||(e=r),n||(n=r),{width:e,height:n,r}},e.prototype.getStyle=function(t,e){return Lv(Lv({},"node"===t?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1}),e.style||{})},e.prototype.destroy=function(){var t=this.get("legendCanvas");null==t||t.destroy();var e=this.get("graph").get("container"),n=this.get("container");e.removeChild(n)},e}(Xf);const zv=Dv;var Fv=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bv=function(){return Bv=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Bv.apply(this,arguments)},Uv=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};"undefined"!=typeof document&&Jf()("\n  .g6-annotation-container {\n    background-color: rgba(255, 255, 255, 0.3);\n    padding: 8px;\n  }\n  .g6-annotation-wrapper {\n    background-color: #fff;\n    box-shadow: 0 0 8px rgba(0, 0, 0, 0.85);\n  }\n  .g6-annotation-header-wapper {\n    height: fit-content;\n    width: 100%;\n    background-color: #5B8FF9;\n    display: inline-flex;\n    cursor: move;\n  }\n  .g6-annotation-title {\n    margin: 4px 40px 4px 8px;\n    cursor: text;\n    min-width: 32px;\n  }\n  .g6-annotation-collapse {\n    margin: 4px;\n    cursor: pointer;\n  }\n  .g6-annotation-expand {\n    margin: 4px;\n    cursor: pointer;\n  }\n  .g6-annotation-close {\n    margin: 4px 8px 4px 0;\n    cursor: pointer;\n  }\n  .g6-annotation-content {\n    padding: 8px;\n    width: fit-content;\n    cursor: text;\n    word-break: break-all;\n    min-width: 32px;\n  }\n  .g6-annotation-title-input-wrapper {\n    margin: 4px 40px 4px 8px;\n  }\n  .g6-annotation-content-input {\n    height: 100%;\n    word-break: break-all;\n  }\n  .g6-annotation-content-input-wrapper {\n    margin: 8px;\n    height: 100%;\n  }\n");var jv="canvas-annotation",Vv=function(t){function e(e){return t.call(this,e)||this}return Fv(e,t),e.prototype.getDefaultCfgs=function(){return{trigger:"click",editable:!0,itemHighlightState:"highlight",linkHighlightStyle:{shadowColor:"#5B8FF9",shadowBlur:10},cardCfg:{minHeight:60,width:"fit-content",height:"fit-content",collapseType:"minimize",closeType:"hide",borderRadius:5,maxTitleLength:20}}},e.prototype.getEvents=function(){var t={viewportchange:"updateLinks",afterlayout:"updateLinks",aftergraphrefreshposition:"updateLinks",afterupdateitem:"updateLink",afterchangedata:"onGraphDataChange",afteritemvisibilitychange:"onGraphItemVisibilityChange"};if("click"===this.get("trigger"))t=Bv(Bv({},t),{"node:click":"showAnnotation","edge:click":"showAnnotation"});return t},e.prototype.getDOMContent=function(t){if(!this.destroyed){var e=t.collapsed,n=t.maxWidth,r=t.title,i=void 0===r?"":r,o=t.content,a=void 0===o?"":o,s=t.borderRadius,u=void 0===s?5:s,l=e?"<p class='g6-annotation-expand'>+</p>":"<p class='g6-annotation-collapse'>-</p>",c=e?"":" <p class='g6-annotation-content'>".concat(a,"</p>"),h=e?"".concat(u,"px"):"".concat(u,"px ").concat(u,"px 0 0");return'<div class="g6-annotation-wrapper" style="border-radius: '.concat(u,"px; max-width: ").concat(n,'px">\n        <div\n          class="g6-annotation-header-wapper"\n          style="border-radius: ').concat(h,";\"\n        >\n          <h4 class='g6-annotation-title'>").concat(i,"</h4>\n          ").concat(l,"\n          ").concat("<p class='g6-annotation-close'>x</p>","\n        </div>\n        ").concat(c,"\n      </div>")}},e.prototype.init=function(){var t=this;if(!t.destroyed){var e=t.get("graph").getContainer(),n=t.get("container");this.get("containerCfg")?(n=this.createContainer(),e.appendChild(n)):n=e,this.set("container",n);var r=e.getBoundingClientRect(),i=new Ic({container:e,width:r.right-r.left,height:r.bottom-r.top});Gf(i.get("el"),{position:"absolute",top:0,left:0,pointerEvents:"none"}),window.addEventListener("resize",(0,x.debounce)((function(){return t.resizeCanvas(t)}),100));var o=i.addGroup({id:"annotation-link-group"});t.set("linkGroup",o),t.set("canvas",i),t.get("getTitle")||t.set("getTitle",(function(t){var e,n=(null===(e=null==t?void 0:t.getModel)||void 0===e?void 0:e.call(t))||{},r=n.label,i=n.id;return r||i||"-"})),t.get("getContent")||t.set("getContent",(function(t){var e,n;if(!t)return"-";var r=(null===(e=t.getModel)||void 0===e?void 0:e.call(t))||{},i=r.label,o=r.id,a=null===(n=t.getType)||void 0===n?void 0:n.call(t),s=a?"".concat(a,": "):"";return"".concat(s).concat(i||o||"")}));var a=t.get("defaultData");a&&this.readData(a)}},e.prototype.createContainer=function(){var t=this;if(!this.destroyed){var e=this.get("containerCfg"),n=this.get("graph"),r=n.getContainer(),i=r.getBoundingClientRect(),o=i.left,a=i.right,s=i.top,u=i.bottom-s,l=a-o,c=e.position,h=void 0===c?"top":c,d=e.offsetX,f=void 0===d?0:d,p=e.offsetY,m=void 0===p?0:p,g=Uv(e,["position","offsetX","offsetY"]),v=e.height,y=void 0===v?"fit-content":v,b=e.width,w=void 0===b?n.getWidth():b;"100%"===y&&(y=u),"100%"===w&&(w=l);var _="unset",S="unset",E={};switch(h){case"right":_="".concat(u,"px"),(E={top:0,right:0}).right+=o+f,E.top+=s+m;break;case"bottom":S="".concat(l,"px"),(E={bottom:0,left:0}).left+=o+f,E.bottom+=s+m;break;case"top":S="".concat(l,"px");case"left":_="".concat(u,"px");default:(E={top:0,left:0}).left+=o+f,E.top+=s+m}Object.keys(E).forEach((function(t){E[t]="".concat(E[t],"px")}));var A=Uh("<div class='".concat(e.className," g6-annotation-container'></div>"));return Gf(A,Bv(Bv({position:"absolute",display:"top"===h||"bottom"===h?"inline-flex":"unset",width:(0,x.isNumber)(w)?"".concat(w,"px"):w,height:(0,x.isNumber)(y)?"".concat(y,"px"):y,maxHeight:_,maxWidth:S,overflow:"scroll"},E),g)),r.appendChild(A),A.addEventListener("scroll",(function(e){t.updateLinks()})),A}},e.prototype.resizeCanvas=function(t){clearTimeout(t.resizeTimer),t.resizeTimer=setTimeout((function(){if(t&&!t.destroyed){var e=t.get("container").getBoundingClientRect(),n=e.right-e.left,r=e.bottom-e.top;t.get("canvas").changeSize(n,r),t.updateOutsideCards(t)}}),250)},e.prototype.updateOutsideCards=function(t){var e=t||this,n=e.get("cardInfoMap")||{},r=e.get("graph"),i=r.getPointByCanvas(0,0),o=r.getPointByCanvas(r.getWidth(),r.getHeight()),a=r.getClientByPoint(i.x,i.y),s=a.x,u=a.y,l=r.getClientByPoint(o.x,o.y),c=l.x,h=l.y;Object.values(n).forEach((function(t){var e=t.card;if(e){var n=e.style,r=Gv(n.left),i=Gv(n.top),o=e.getBoundingClientRect(),a=o.width,l=o.height,d=r,f=i;r+a>c-s&&(d=c-s-a),r<0&&(d=0),i+l>h-u&&(f=h-u-l),i<0&&(f=0),Gf(e,{left:"".concat(d,"px"),top:"".concat(f,"px")})}})),e.updateLinks()},e.prototype.showAnnotation=function(t){if(!this.destroyed){var e=t.item;this.toggleAnnotation(e)}},e.prototype.hideCards=function(){var t=this;if(!t.destroyed){var e=t.get("cardInfoMap")||{};Object.keys(e).forEach((function(e){t.hideCard(e)}))}},e.prototype.toggleAnnotation=function(t,e){var n,r;void 0===e&&(e={});var i=this;if(!i.destroyed){var o=i.get("cardInfoMap")||{},a=i.get("graph"),s=i.get("container"),u=i.get("containerCfg"),l=Object.assign({},i.get("cardCfg")||{},e),c=l.minHeight,h=l.minWidth,d=l.width,f=l.height,p=l.collapsed,m=void 0!==p&&p,g=l.x,v=l.y,y=l.title,b=l.content,w=l.maxTitleLength,_=l.defaultBegin,S=Uv(l,["minHeight","minWidth","width","height","collapsed","x","y","title","content","maxTitleLength","defaultBegin"]),E=i.get("linkGroup"),A=this.get("rows")||[[]],M=null===(n=t.isCanvas)||void 0===n?void 0:n.call(t),C=M?jv:t.getID(),T=o[C]||{},k=T.card,I=T.link,N=T.x,P=T.y,O=T.title,L=T.content,R=this.get("getTitle"),D=this.get("getContent"),z=this.get("getContentPlaceholder")||function(){return""},F=this.get("getTitlePlaceHolder")||function(){return""},B=z(t),U=F(t),j=Uh(this.getDOMContent(Bv({itemId:C,collapsed:m,title:(null===(r=O||y||(null==R?void 0:R(t)))||void 0===r?void 0:r.substr(0,w))||U,content:L||b||(null==D?void 0:D(t))||B},S))),V=(0,x.isNumber)(c)?"".concat(c,"px"):c;Gf(j,{minHeight:m?"unset":V,minWidth:(0,x.isNumber)(h)?"".concat(h,"px"):h,height:f,width:d});var H,G=!!k;if(G?(null==I||I.remove(!0),s.replaceChild(j,k)):s.appendChild(j),!u){if(H=s.getBoundingClientRect()||{},void 0!==g&&void 0!==v)N=g,P=v;else if(!G&&!M){var W=H.top,X=_||{},Y=X.left,q=X.right,$=void 0===q?16:q,K=X.top,Z=void 0===K?8:K,Q=X.bottom,J=$,tt=Z;isNaN(Y)||(J=s.scrollWidth-Y),isNaN(Q)||(tt=s.scrollHeight-Q);var et=(0,x.isNumber)(h)?h:100;N=s.scrollWidth-j.scrollWidth-(A.length-1)*et-J;var nt=A[A.length-1],rt=(nt[nt.length-1]||{}).bbox;P=(null==rt?void 0:rt.bottom)-W||tt}Gf(j,{position:"absolute",left:"".concat(N,"px"),top:"".concat(P,"px"),cusor:u?"unset":"move"})}this.bindListener(j,C);var it=j.getBoundingClientRect();if(!M){var ot=Hv(t,it,a,this.get("canvas")),at=this.get("linkStyle");I=E.addShape("path",{attrs:Bv({lineWidth:1,lineDash:[5,5],stroke:"#ccc",path:ot},at)})}if(o[C]=Bv(Bv({},o[C]||{}),{id:C,collapsed:m,card:j,link:I,x:N,y:P,cardBBox:it,content:L||b,title:O||y,contentPlaceholder:B,titlePlaceholder:U,isCanvas:M}),i.set("cardInfoMap",o),u)this.updateCardPositionsInConatainer(),this.updateLinks();else{var st=!isNaN(g)&&!isNaN(v);if(!G&&!M&&!st){var ut=H.bottom,lt=void 0===ut?0:ut;W=H.top;A[A.length-1].push({id:C,bbox:it}),it.top>lt-W-it.height-16&&A.push([]),this.set("rows",A)}}this.updateCardSize(C);var ct=this.get("onAnnotationChange");null==ct||ct(o[C],G?"update":"create")}},e.prototype.updateCardPositionsInConatainer=function(){if(!this.destroyed){var t=this.get("cardInfoMap");if(t){var e=this.get("container"),n=this.get("containerCfg").position,r=e.getBoundingClientRect().width,i=getComputedStyle(e),o=Gv(i.paddingLeft)+Gv(i.paddingRight);r-=o,Object.values(t).forEach((function(t){var e=t.card,i=e.getBoundingClientRect().width;switch(n){case"right":Gf(e,{marginLeft:r?"".concat(r-i,"px"):"0px"});break;case"top":case"bottom":Gf(e,{marginLeft:"8px"})}}))}}},e.prototype.handleExpandCollapseCard=function(t){if(!this.destroyed){var e=this.get("graph"),n=this.get("cardInfoMap");if(n){var r=n[t].collapsed,i=e.findById(t);if(i)"hide"!==this.get("cardCfg").collapseType||r?this.toggleAnnotation(i,{collapsed:!r}):this.hideCard(t),n[t]=Bv(Bv({},n[t]),{collapsed:!r})}}},e.prototype.hideCard=function(t){if(!this.destroyed){var e=this.get("cardInfoMap");if(e&&e[t]){var n=e[t],r=n.card,i=n.link;Gf(r,{display:"none"}),null==i||i.hide(),this.get("onAnnotationChange")(e[t],"hide")}}},e.prototype.removeCard=function(t){if(!this.destroyed){var e=this.get("cardInfoMap");if(e){var n=e[t],r=n.card,i=n.link;this.get("container").removeChild(r),null==i||i.remove(!0),delete e[t],this.get("onAnnotationChange")(n,"remove")}}},e.prototype.bindListener=function(t,e){var n=this;if(!this.destroyed){t.addEventListener("mousemove",(function(t){var r;if("g6-annotation-collapse"===t.target.className?r="collapse":"g6-annotation-expand"===t.target.className?r="expand":"g6-annotation-close"===t.target.className&&(r="close"),r){var i=n.get("cardCfg").onMouseEnterIcon;(void 0===i?function(){}:i)(t,e,r)}})),t.addEventListener("mouseout",(function(t){var r;if("g6-annotation-collapse"===t.target.className?r="collapse":"g6-annotation-expand"===t.target.className?r="expand":"g6-annotation-close"===t.target.className&&(r="close"),r){var i=n.get("cardCfg").onMouseLeaveIcon;(void 0===i?function(){}:i)(t,e,r)}})),t.addEventListener("mouseenter",(function(t){var r=n.get("cardInfoMap");if(r){var i=n.get("graph"),o=i.findById(e);if(o){var a=n.get("itemHighlightState");i.setItemState(o,a,!0)}var s=r[e].link;if(s){var u=n.get("linkHighlightStyle")||{};s.attr(u)}}})),t.addEventListener("mouseleave",(function(t){var r=n.get("cardInfoMap");if(r){var i=n.get("graph"),o=i.findById(e);if(o){var a=n.get("itemHighlightState");i.setItemState(o,a,!1)}var s=r[e].link;if(s){var u=n.get("linkHighlightStyle")||{};Object.keys(u).forEach((function(t){s.attr(t,void 0),s.attr(t,void 0)}));var l=n.get("linkStyle");s.attr(l)}}})),t.addEventListener("click",(function(t){var r=(n.get("cardCfg")||{}).onClickIcon;if("g6-annotation-collapse"===t.target.className||"g6-annotation-expand"===t.target.className)"hide"===n.get("cardCfg").collapseType?n.hideCard(e):n.handleExpandCollapseCard(e),null==r||r(t,e,"g6-annotation-collapse"===t.target.className?"collapse":"expand");else if("g6-annotation-close"===t.target.className){"remove"===n.get("cardCfg").closeType?n.removeCard(e):n.hideCard(e),null==r||r(t,e,"close")}})),this.get("editable")&&t.addEventListener("dblclick",(function(t){var r=n.get("cardInfoMap"),i=(n.get("cardCfg")||{}).maxTitleLength,o=void 0===i?20:i;if(r){var a=t.target,s=a.className;if("g6-annotation-title"===s||"g6-annotation-content"===s){var u="g6-annotation-title"===s?a.getBoundingClientRect():a.parentNode.getBoundingClientRect(),l=u.width,c=u.height,h=getComputedStyle(a),d=Uh("<".concat("g6-annotation-title"===s?"input":"textarea",' class="').concat(s,'-input" type="textarea" style="width:').concat(l,"px; height: ").concat(c,'px; min-width: 16px;"/>')),f=Uh('<div class="'.concat(s,'-input-wrapper" style="width: ').concat(l,"px; height: ").concat(c,"px; min-width: 16px; margin-right: ").concat(h.marginRight,'" />'));f.appendChild(d),a.parentNode.replaceChild(f,a);var p=r[e],m=p.contentPlaceholder,g=p.titlePlaceholder,v=p.content,y=p.title,b=v;"g6-annotation-title"===s?(d.name="title",d.maxLength=o,b=y):d.name="content",b?(d.innerHTML=a.innerHTML,d.value=a.innerHTML):d.placeholder="g6-annotation-title"===s?g:m,d.focus(),d.addEventListener("blur",(function(t){d.value&&(a.innerHTML=d.value,p[d.name||"title"]=d.value),f.parentNode.replaceChild(a,f),n.updateCardSize(e);var r=n.get("onAnnotationChange");null==r||r(p,"update")}))}}}));var r=["g6-annotation-title","g6-annotation-content","g6-annotation-title-input","g6-annotation-content-input"];t.draggable=!0,t.addEventListener("dragstart",(function(e){var i=e.target.className;if(!r.includes(i)){var o=t.style;n.set("dragging",{card:t,x:e.clientX,y:e.clientY,left:Gv(o.left),top:Gv(o.top)})}})),t.addEventListener("drag",(function(t){t.preventDefault();var r=n.get("cardInfoMap");if(r){var i=t.clientX,o=t.clientY,a=n.get("dragging");if(!isNaN(i)&&!isNaN(o)&&a){var s=a.x,u=a.y,l=a.left,c=a.top,h=a.card,d=i-s,f=o-u;l+=d,c+=f;var p=n.get("graph"),m=p.getPointByCanvas(0,0),g=p.getPointByCanvas(p.getWidth(),p.getHeight()),v=p.getClientByPoint(m.x,m.y),y=v.x,b=v.y,x=p.getClientByPoint(g.x,g.y),w=x.x,_=x.y,S=h.getBoundingClientRect();(l>w-y-(S.right-S.left)&&d>0||l<0&&d<0)&&(l-=d),(c>_-b-(S.bottom-S.top)&&f>0||c<0&&f<0)&&(c-=f),Gf(h,{left:"".concat(l,"px"),top:"".concat(c,"px"),visibility:"hidden"}),s=i,u=o;var E=(r[e]||{}).link;if(E){var A=p.findById(e);E.attr("path",Hv(A,S,p,n.get("canvas")))}n.set("dragging",{x:s,y:u,left:l,top:c,card:h})}}}));t.addEventListener("dragend",(function(t){var r=n.get("cardInfoMap");if(r){var i=n.get("dragging");if(i){var o=i.left,a=i.top,s=i.card;r[e].x=o,r[e].y=a,Gf(s,{visibility:"visible"}),n.set("dragging",!1);var u=n.get("rows");null==u||u.forEach((function(t){for(var n=t.length-1;n>=0;n--)t[n].id===e&&t.splice(n,1)}));var l=n.get("onAnnotationChange");null==l||l(r[e],"update")}}}))}},e.prototype.updateCardSize=function(t){var e=this.get("cardInfoMap");if(e){var n=e[t].card,r=n.getBoundingClientRect().width,i=n.getElementsByClassName("g6-annotation-title")[0];if(i){var o=getComputedStyle(i),a=Gv(o.marginLeft),s=i.getBoundingClientRect().width;Gf(i,{marginRight:"".concat(r-a-24-16-s,"px")})}}},e.prototype.updateLink=function(t){var e=t.item;if(e){var n=this.get("cardInfoMap");if(n){var r=this.get("canvas"),i=this.get("graph"),o=n[e.getID()]||{},a=o.link,s=o.card;if(a){var u=Hv(e,s.getBoundingClientRect(),i,r);a.attr("path",u)}}}},e.prototype.updateLinks=function(){var t=this;if(!this.destroyed){var e=this.get("cardInfoMap");if(e){var n=this.get("graph");Object.values(e).forEach((function(e){var r=e.id,i=n.findById(r);t.updateLink({item:i})}))}}},e.prototype.onGraphDataChange=function(){var t=this,e=this.get("cardInfoMap");if(e){var n=this.get("graph");Object.values(e).forEach((function(e){var r=e.id,i=e.card,o=e.isCanvas;if(i&&!o&&"none"!==i.style.display){var a=n.findById(r);a&&a.isVisible()?t.toggleAnnotation(a):t.hideCard(r)}}))}},e.prototype.onGraphItemVisibilityChange=function(t){var e=t.item,n=t.visible;if(e&&!e.destroyed){var r=this.get("cardInfoMap");if(r){var i=e.getID();r[i]&&(n||this.hideCard(i))}}},e.prototype.saveData=function(t){void 0===t&&(t=!1);var e=this.get("cardInfoMap");if(e){var n=this.get("graph"),r=this.get("getTitle"),i=this.get("getContent"),o=[];return Object.values(e).forEach((function(e){var a=e.title,s=e.content,u=e.x,l=e.y,c=e.id,h=e.collapsed,d=e.card;if(!d||"none"!==d.style.display||t){var f=n.findById(c)||n.get("canvas");o.push({id:c,x:u,y:l,collapsed:h,title:a||(null==r?void 0:r(f)),content:s||(null==i?void 0:i(f)),visible:d&&"none"!==d.style.display})}})),o}},e.prototype.readData=function(t){var e=this,n=this.get("graph");t.forEach((function(t){var r=t.id,i=t.x,o=t.y,a=t.title,s=t.content,u=t.collapsed,l=t.visible,c=n.findById(r);if(c||r!==jv||(c=n.get("canvas")),!c){var h=e.get("cardInfoMap")||{};return h[r]=t,void e.set("cardInfoMap",h)}e.toggleAnnotation(c,{x:i,y:o,title:a,content:s,collapsed:u}),l||e.hideCard(r)}))},e.prototype.clear=function(){var t=this.get("cardInfoMap");if(t){var e=this.get("container");Object.values(t).forEach((function(t){var n=t.card,r=t.link;e.removeChild(n),null==r||r.remove(!0)})),this.set("cardInfoMap",{})}},e.prototype.destroy=function(){var t;this.clear(),null===(t=this.get("canvas"))||void 0===t||t.destroy();var e=this.get("graph");e&&!e.destroyed&&(this.get("containerCfg")&&e.getContainer().removeChild(this.get("container")),this.destroyed=!0)},e}(Xf);var Hv=function(t,e,n,r){var i,o;if("edge"===t.getType())o=[t.getKeyShape().getPoint(.5)];else{var a=null===(i=t.getKeyShape)||void 0===i?void 0:i.call(t).getBBox(),s=a.minX,u=a.minY,l=a.maxX,c=a.maxY,h=t.getModel(),d=h.x,f=h.y;o={left:{x:s+=d,y:((u+=f)+(c+=f))/2},right:{x:l+=d,y:(u+c)/2},top:{x:(s+l)/2,y:u},bottom:{x:(s+l)/2,y:c}}}Object.keys(o).forEach((function(t){var e=o[t],i=e.x,a=e.y,s=n.getClientByPoint(i,a);o[t]=r.getPointByClient(s.x,s.y)}));var p=e.top,m=void 0===p?0:p,g=e.left,v=void 0===g?0:g,y=e.right,b=void 0===y?0:y,x=e.bottom,w=void 0===x?0:x,_={left:r.getPointByClient(v,(m+w)/2),right:r.getPointByClient(b,(m+w)/2),top:r.getPointByClient((v+b)/2,m),bottom:r.getPointByClient((v+b)/2,w)};return function(t,e){var n,r,i=1/0;Object.keys(t).forEach((function(o){var a=t[o];Object.keys(e).forEach((function(t){var o=e[t],s=a.x-o.x,u=a.y-o.y,l=s*s+u*u;i>l&&(i=l,n=a,r=o)}))}));var o=el.getControlPoint(n,r,.5,20);return[["M",n.x,n.y],["Q",o.x,o.y,r.x,r.y]]}(o,_)},Gv=function(t){return Number(t.replace(/\s+|px/gi,""))||0};const Wv={PluginBase:Xf,Menu:np,Grid:Zf,Minimap:up,Bundling:fp,ToolBar:wp,Tooltip:Ep,Fisheye:yp,TimeBar:vv,ImageMinimap:wv,EdgeFilterLens:Cv,SnapLine:Pv,Legend:zv,Annotation:Vv};al("circle",{options:{size:cl.defaultNode.size,style:{x:0,y:0,stroke:cl.defaultNode.style.stroke,fill:cl.defaultNode.style.fill,lineWidth:cl.defaultNode.style.lineWidth},labelCfg:{style:{fill:cl.nodeLabel.style.fill,fontSize:cl.nodeLabel.style.fontSize,fontFamily:cl.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:cl.defaultNode.linkPoints.size,lineWidth:cl.defaultNode.linkPoints.lineWidth,fill:cl.defaultNode.linkPoints.fill,stroke:cl.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,b.__assign)({},cl.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).icon,r=void 0===n?{}:n,i=this.getShapeStyle(t),o=(0,x.deepMix)({},r,t.icon),a="".concat(this.type,"-keyShape"),s=e.addShape("circle",{attrs:i,className:a,name:a,draggable:!0});e.shapeMap[a]=s;var u=o.width,l=o.height,c=o.show,h=o.text;if(c){var d="".concat(this.type,"-icon");e.shapeMap[d]=h?e.addShape("text",{attrs:(0,b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:d,name:d,draggable:!0}):e.addShape("image",{attrs:(0,b.__assign)({x:-u/2,y:-l/2},o),className:d,name:d,draggable:!0})}return this.drawLinkPoints(t,e),s},drawLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints;if(n){var r=n||{},i=r.top,o=r.left,a=r.right,s=r.bottom,u=r.size,l=r.r,c=(0,b.__rest)(r,["top","left","right","bottom","size","r"]),h=this.getSize(t)[0]/2;if(o){var d="link-point-left";e.shapeMap[d]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},c),{x:-h,y:0,r:u/2||l||5}),className:d,name:d,isAnchorPoint:!0})}if(a){var f="link-point-right";e.shapeMap[f]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},c),{x:h,y:0,r:u/2||l||5}),className:f,name:f,isAnchorPoint:!0})}if(i){var p="link-point-top";e.shapeMap[p]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},c),{x:0,y:-h,r:u/2||l||5}),className:p,name:p,isAnchorPoint:!0})}if(s){var m="link-point-bottom";e.shapeMap[m]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},c),{x:0,y:h,r:u/2||l||5}),className:m,name:m,isAnchorPoint:!0})}}},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},r=(0,x.deepMix)({},e,n),i=this.getSize(t)[0]/2;return(0,b.__assign)({x:0,y:0,r:i},r)},update:function(t,e,n){var r=e.getContainer(),i=this.getSize(t),o=(0,b.__assign)({},t.style);void 0===t.style.stroke&&t.color&&(o.stroke=t.color),void 0!==t.style.r||isNaN(i[0])||(o.r=i[0]/2),this.updateShape(t,e,o,!0,n),this.updateLinkPoints(t,r)}},"single-node"),al("rect",{options:{size:[100,30],style:{radius:0,stroke:cl.defaultNode.style.stroke,fill:cl.defaultNode.style.fill,lineWidth:cl.defaultNode.style.lineWidth},labelCfg:{style:{fill:cl.nodeLabel.style.fill,fontSize:cl.nodeLabel.style.fontSize,fontFamily:cl.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:cl.defaultNode.linkPoints.size,lineWidth:cl.defaultNode.linkPoints.lineWidth,fill:cl.defaultNode.linkPoints.fill,stroke:cl.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,b.__assign)({},cl.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(t,e){var n=this.getShapeStyle(t),r=e.addShape("rect",{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return e.shapeMap["".concat(this.type,"-keyShape")]=r,this.drawLinkPoints(t,e),r},drawLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints,r=void 0===n?{}:n,i=r.top,o=r.left,a=r.right,s=r.bottom,u=r.size,l=r.r,c=(0,b.__rest)(r,["top","left","right","bottom","size","r"]),h=this.getSize(t),d=h[0],f=h[1];o&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},c),{x:-d/2,y:0,r:u/2||l||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),a&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},c),{x:d/2,y:0,r:u/2||l||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),i&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},c),{x:0,y:-f/2,r:u/2||l||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),s&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},c),{x:0,y:f/2,r:u/2||l||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},r=(0,x.mix)({},e,n),i=this.getSize(t),o=r.width||i[0],a=r.height||i[1];return(0,b.__assign)({x:-o/2,y:-a/2,width:o,height:a},r)},update:function(t,e,n){var r=e.getContainer(),i=this.getOptions({}).style,o=this.getSize(t),a=e.get("keyShape");t.size||(o[0]=a.attr("width")||i.width,o[1]=a.attr("height")||i.height);var s={stroke:t.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},u=(0,x.mix)({},i,a.attr(),s);u=(0,x.mix)(u,t.style),this.updateShape(t,e,u,!1,n),this.updateLinkPoints(t,r)}},"single-node"),al("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:cl.defaultNode.style.stroke,fill:cl.defaultNode.style.fill,lineWidth:cl.defaultNode.style.lineWidth},labelCfg:{style:{fill:cl.nodeLabel.style.fill,fontSize:cl.nodeLabel.style.fontSize,fontFamily:cl.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:cl.defaultNode.linkPoints.size,lineWidth:cl.defaultNode.linkPoints.lineWidth,fill:cl.defaultNode.linkPoints.fill,stroke:cl.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,b.__assign)({},cl.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).icon,r=void 0===n?{}:n,i=this.getShapeStyle(t),o=e.addShape("ellipse",{attrs:i,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0});e.shapeMap["ellipse-keyShape"]=o;var a=r.width,s=r.height,u=r.show,l=r.text;return u&&(e.shapeMap["".concat(this.type,"-icon")]=l?e.addShape("text",{attrs:(0,b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},r),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):e.addShape("image",{attrs:(0,b.__assign)({x:-a/2,y:-s/2},r),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(t,e),o},drawLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints,r=void 0===n?{}:n,i=r.top,o=r.left,a=r.right,s=r.bottom,u=r.size,l=r.r,c=(0,b.__rest)(r,["top","left","right","bottom","size","r"]),h=this.getSize(t),d=h[0]/2,f=h[1]/2;o&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},c),{x:-d,y:0,r:u/2||l||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),a&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},c),{x:d,y:0,r:u/2||l||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),i&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},c),{x:0,y:-f,r:u/2||l||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),s&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},c),{x:0,y:f,r:u/2||l||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},r=(0,x.mix)({},e,n),i=this.getSize(t),o=i[0]/2,a=i[1]/2;return(0,b.__assign)({x:0,y:0,rx:o,ry:a},r)},update:function(t,e,n){var r=e.getContainer(),i=this.getOptions({}).style,o=this.getSize(t),a={stroke:t.color,rx:o[0]/2,ry:o[1]/2},s=e.get("keyShape"),u=(0,x.mix)({},i,s.attr(),a);u=(0,x.mix)(u,t.style),this.updateShape(t,e,u,!0,n),this.updateLinkPoints(t,r)}},"single-node"),al("diamond",{options:{size:[80,80],style:{stroke:cl.defaultNode.style.stroke,fill:cl.defaultNode.style.fill,lineWidth:cl.defaultNode.style.lineWidth},labelCfg:{style:{fill:cl.nodeLabel.style.fill,fontSize:cl.nodeLabel.style.fontSize,fontFamily:cl.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:cl.defaultNode.linkPoints.size,lineWidth:cl.defaultNode.linkPoints.lineWidth,fill:cl.defaultNode.linkPoints.fill,stroke:cl.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,b.__assign)({},cl.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).icon,r=void 0===n?{}:n,i=this.getShapeStyle(t),o=e.addShape("path",{attrs:i,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});e.shapeMap["".concat(this.type,"-keyShape")]=o;var a=r.width,s=r.height,u=r.show,l=r.text;return u&&(e.shapeMap["".concat(this.type,"-icon")]=l?e.addShape("text",{attrs:(0,b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},r),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):e.addShape("image",{attrs:(0,b.__assign)({x:-a/2,y:-s/2},r),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(t,e),o},drawLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints,r=void 0===n?{}:n,i=r.top,o=r.left,a=r.right,s=r.bottom,u=r.size,l=r.r,c=(0,b.__rest)(r,["top","left","right","bottom","size","r"]),h=this.getSize(t),d=h[0],f=h[1];o&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},c),{x:-d/2,y:0,r:u/2||l||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),a&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},c),{x:d/2,y:0,r:u/2||l||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),i&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},c),{x:0,y:-f/2,r:u/2||l||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),s&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},c),{x:0,y:f/2,r:u/2||l||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getPath:function(t){var e=this.getSize(t),n=e[0],r=e[1];return[["M",0,-r/2],["L",n/2,0],["L",0,r/2],["L",-n/2,0],["Z"]]},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},r=(0,x.mix)({},e,n),i=this.getPath(t);return(0,b.__assign)({path:i},r)},update:function(t,e,n){var r=e.getContainer(),i=this.getOptions({}).style,o=this.getPath(t),a={stroke:t.color,path:o},s=e.get("keyShape"),u=(0,x.mix)({},i,s.attr(),a);u=(0,x.mix)(u,t.style),this.updateShape(t,e,u,!0,n),this.updateLinkPoints(t,r)}},"single-node"),al("triangle",{options:{size:40,direction:"up",style:{stroke:cl.defaultNode.style.stroke,fill:cl.defaultNode.style.fill,lineWidth:cl.defaultNode.style.lineWidth},labelCfg:{style:{fill:cl.nodeLabel.style.fill,fontSize:cl.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:cl.defaultNode.linkPoints.size,lineWidth:cl.defaultNode.linkPoints.lineWidth,fill:cl.defaultNode.linkPoints.fill,stroke:cl.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:(0,b.__assign)({},cl.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(t,e){var n=this.mergeStyle||this.getOptions(t),r=n.icon,i=void 0===r?{}:r,o=n.direction,a=this.getShapeStyle(t),s=t.direction||o,u=e.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});e.shapeMap["".concat(this.type,"-keyShape")]=u;var l=i.width,c=i.height,h=i.show,d=i.offset,f=i.text;if(h)if(f)e.shapeMap["".concat(this.type,"-icon")]=e.addShape("text",{attrs:(0,b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0});else{var p=-l/2,m=-c/2;"up"!==s&&"down"!==s||(m+=d),"left"!==s&&"right"!==s||(p+=d),e.shapeMap["".concat(this.type,"-icon")]=e.addShape("image",{attrs:(0,b.__assign)({x:p,y:m},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})}return this.drawLinkPoints(t,e),u},drawLinkPoints:function(t,e){var n=this.mergeStyle||this.getOptions(t),r=n.linkPoints,i=void 0===r?{}:r,o=n.direction,a=t.direction||o,s=i.top,u=i.left,l=i.right,c=i.bottom,h=i.size,d=i.r,f=(0,b.__rest)(i,["top","left","right","bottom","size","r"]),p=this.getSize(t)[0];if(u){var m=null,g=p*Math.sin(1/3*Math.PI),v=p*Math.sin(1/3*Math.PI);"up"===a?m=[-v,g]:"down"===a?m=[-v,-g]:"left"===a&&(m=[-v,v-g]),m&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},f),{x:m[0],y:m[1],r:h/2||d||5}),className:"link-point-left",name:"link-point-left"}))}if(l){var y=null;g=p*Math.sin(1/3*Math.PI),v=p*Math.sin(1/3*Math.PI);"up"===a?y=[v,g]:"down"===a?y=[v,-g]:"right"===a&&(y=[v,v-g]),y&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},f),{x:y[0],y:y[1],r:h/2||d||5}),className:"link-point-right",name:"link-point-right"}))}if(s){var x=null;g=p*Math.sin(1/3*Math.PI),v=p*Math.sin(1/3*Math.PI);"up"===a?x=[v-g,-g]:"left"===a?x=[v,-g]:"right"===a&&(x=[-v,-g]),x&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},f),{x:x[0],y:x[1],r:h/2||d||5}),className:"link-point-top",name:"link-point-top"}))}if(c){var w=null;g=p*Math.sin(1/3*Math.PI),v=p*Math.sin(1/3*Math.PI);"down"===a?w=[-v+g,g]:"left"===a?w=[v,g]:"right"===a&&(w=[-v,g]),w&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},f),{x:w[0],y:w[1],r:h/2||d||5}),className:"link-point-bottom",name:"link-point-bottom"}))}},getPath:function(t){var e=(this.mergeStyle||this.getOptions(t)).direction,n=t.direction||e,r=this.getSize(t)[0],i=r*Math.sin(1/3*Math.PI),o=r*Math.sin(1/3*Math.PI),a=[["M",-o,i],["L",0,-i],["L",o,i],["Z"]];return"down"===n?a=[["M",-o,-i],["L",o,-i],["L",0,i],["Z"]]:"left"===n?a=[["M",-o,o-i],["L",o,-o],["L",o,o],["Z"]]:"right"===n&&(a=[["M",o,o-i],["L",-o,o],["L",-o,-o],["Z"]]),a},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},r=(0,x.mix)({},e,n),i=this.getPath(t);return(0,b.__assign)({path:i},r)},update:function(t,e,n){var r=e.getContainer(),i=this.getOptions({}).style,o=this.getPath(t),a={stroke:t.color,path:o},s=e.get("keyShape"),u=(0,x.mix)({},i,s.attr(),a);u=(0,x.mix)(u,t.style),this.updateShape(t,e,u,!0,n),this.updateLinkPoints(t,r)},updateLinkPoints:function(t,e){var n=this.getOptions({}),r=n.linkPoints,i=n.direction,o=t.direction||i,a=e.shapeMap["link-point-left"]||e.find((function(t){return"link-point-left"===t.get("className")})),s=e.shapeMap["link-point-right"]||e.find((function(t){return"link-point-right"===t.get("className")})),u=e.shapeMap["link-point-top"]||e.find((function(t){return"link-point-top"===t.get("className")})),l=e.shapeMap["link-point-bottom"]||e.find((function(t){return"link-point-bottom"===t.get("className")})),c=r,h=a||s||u||l;h&&(c=h.attr());var d=(0,x.mix)({},c,t.linkPoints),f=d.fill,p=d.stroke,m=d.lineWidth,g=d.size/2;g||(g=d.r);var v=t.linkPoints?t.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},y=v.left,w=v.right,_=v.top,S=v.bottom,E=this.getSize(t)[0],A={r:g,fill:f,stroke:p,lineWidth:m},M=null,C=E*Math.sin(1/3*Math.PI),T=E*Math.sin(1/3*Math.PI);"up"===o?M=[-T,C]:"down"===o?M=[-T,-C]:"left"===o&&(M=[-T,T-C]),M&&(a?y||void 0===y?a.attr((0,b.__assign)((0,b.__assign)({},A),{x:M[0],y:M[1]})):(a.remove(),delete e.shapeMap["link-point-left"]):y&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},A),{x:M[0],y:M[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})));var k=null;"up"===o?k=[T,C]:"down"===o?k=[T,-C]:"right"===o&&(k=[T,T-C]),k&&(s?w||void 0===w?s.attr((0,b.__assign)((0,b.__assign)({},A),{x:k[0],y:k[1]})):(s.remove(),delete e.shapeMap["link-point-right"]):w&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},A),{x:k[0],y:k[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})));var I=null;"up"===o?I=[T-C,-C]:"left"===o?I=[T,-C]:"right"===o&&(I=[-T,-C]),I&&(u?_||void 0===_?u.attr((0,b.__assign)((0,b.__assign)({},A),{x:I[0],y:I[1]})):(u.remove(),delete e.shapeMap["link-point-top"]):_&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},A),{x:I[0],y:I[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})));var N=null;"down"===o?N=[-T+C,C]:"left"===o?N=[T,C]:"right"===o&&(N=[-T,C]),N&&(l?S||void 0===S?l.attr((0,b.__assign)((0,b.__assign)({},A),{x:N[0],y:N[1]})):(l.remove(),delete e.shapeMap["link-point-bottom"]):S&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},A),{x:N[0],y:N[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})))}},"single-node"),al("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:cl.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14,fontFamily:cl.windowFontFamily},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf",fontFamily:cl.windowFontFamily},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).preRect,r=void 0===n?{}:n,i=this.getShapeStyle(t),o=this.getSize(t),a=o[0],s=o[1],u=e.addShape("rect",{attrs:i,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});e.shapeMap["".concat(this.type,"-keyShape")]=u;var l=r.show,c=(0,b.__rest)(r,["show"]);return l&&(e.shapeMap["pre-rect"]=e.addShape("rect",{attrs:(0,b.__assign)({x:-a/2,y:-s/2,height:s},c),className:"pre-rect",name:"pre-rect",draggable:!0})),this.drawLogoIcon(t,e),this.drawStateIcon(t,e),this.drawLinkPoints(t,e),u},drawLogoIcon:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).logoIcon,r=void 0===n?{}:n,i=this.getSize(t)[0];if(r.show){var o=r.width,a=r.height,s=r.x,u=r.y,l=r.offset,c=r.text,h=(0,b.__rest)(r,["width","height","x","y","offset","text"]);e.shapeMap["rect-logo-icon"]=c?e.addShape("text",{attrs:(0,b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},h),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):e.addShape("image",{attrs:(0,b.__assign)((0,b.__assign)({},h),{x:s||-i/2+o+l,y:u||-a/2,width:o,height:a}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).stateIcon,r=void 0===n?{}:n,i=this.getSize(t)[0];if(r.show){var o=r.width,a=r.height,s=r.x,u=r.y,l=r.offset,c=r.text,h=(0,b.__rest)(r,["width","height","x","y","offset","text"]);e.shapeMap["rect-state-icon"]=c?e.addShape("text",{attrs:(0,b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},h),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):e.addShape("image",{attrs:(0,b.__assign)((0,b.__assign)({},h),{x:s||i/2-o+l,y:u||-a/2,width:o,height:a}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints,r=void 0===n?{}:n,i=r.top,o=r.left,a=r.right,s=r.bottom,u=r.size,l=r.r,c=(0,b.__rest)(r,["top","left","right","bottom","size","r"]),h=this.getSize(t),d=h[0],f=h[1];o&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},c),{x:-d/2,y:0,r:u/2||l||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),a&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},c),{x:d/2,y:0,r:u/2||l||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),i&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},c),{x:0,y:-f/2,r:u/2||l||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),s&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},c),{x:0,y:f/2,r:u/2||l||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},drawLabel:function(t,e){var n=this.getOptions(t),r=n.labelCfg,i=void 0===r?{}:r,o=n.logoIcon,a=void 0===o?{}:o,s=n.descriptionCfg,u=void 0===s?{}:s,l=this.getSize(t)[0],c=null,h=a.show,d=a.width,f=-l/2+i.offset;h&&(f=-l/2+d+i.offset);var p=i.style,m=u.style,g=u.paddingTop;return(0,x.isString)(t.description)?(c=e.addShape("text",{attrs:(0,b.__assign)((0,b.__assign)({},p),{x:f,y:-5,text:t.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),e.shapeMap["text-shape"]=c,e.shapeMap["rect-description"]=e.addShape("text",{attrs:(0,b.__assign)((0,b.__assign)({},m),{x:f,y:17+(g||0),text:t.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})):(c=e.addShape("text",{attrs:(0,b.__assign)((0,b.__assign)({},p),{x:f,y:7,text:t.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),e.shapeMap["text-shape"]=c),c},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},r=(0,x.mix)({},e,n),i=this.getSize(t),o=r.width||i[0],a=r.height||i[1];return(0,b.__assign)({x:-o/2,y:-a/2,width:o,height:a},r)},update:function(t,e){var n=this.mergeStyle||this.getOptions(t),r=n.style,i=void 0===r?{}:r,o=n.labelCfg,a=void 0===o?{}:o,s=n.descriptionCfg,u=void 0===s?{}:s,l=this.getSize(t),c=l[0],h=l[1];e.get("keyShape").attr((0,b.__assign)((0,b.__assign)({},i),{x:-c/2,y:-h/2,width:c,height:h}));var d=e.getContainer(),f=d.shapeMap["rect-logo-icon"]||d.find((function(t){return"rect-logo-icon"===t.get("className")})),p=f?f.attr():{},m=(0,x.mix)({},p,t.logoIcon),g=m.width;void 0===g&&(g=this.options.logoIcon.width);var v=t.logoIcon?t.logoIcon.show:void 0,y=a.offset,w=-c/2+g+y;v||void 0===v||(w=-c/2+y);var _=d.shapeMap["node-label"]||d.find((function(t){return"node-label"===t.get("className")})),S=d.shapeMap["rect-description"]||d.find((function(t){return"rect-description"===t.get("className")}));if(t.label)if(_){var E=t.labelCfg?t.labelCfg.style:{},A=(0,x.mix)({},_.attr(),E);t.label&&(A.text=t.label),A.x=w,(0,x.isString)(t.description)&&(A.y=-5),S&&(S.resetMatrix(),S.attr({x:w})),_.resetMatrix(),_.attr(A)}else d.shapeMap["node-label"]=d.addShape("text",{attrs:(0,b.__assign)((0,b.__assign)({},a.style),{x:w,y:t.description?-5:7,text:t.label}),className:"node-label",name:"node-label",draggable:!0,labelRelated:!0});if((0,x.isString)(t.description)){var M=u.paddingTop;if(S){E=t.descriptionCfg?t.descriptionCfg.style:{};var C=(0,x.mix)({},S.attr(),E);(0,x.isString)(t.description)&&(C.text=t.description),C.x=w,S.resetMatrix(),S.attr((0,b.__assign)((0,b.__assign)({},C),{y:17+(M||0)}))}else d.shapeMap["rect-description"]=d.addShape("text",{attrs:(0,b.__assign)((0,b.__assign)({},u.style),{x:w,y:17+(M||0),text:t.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})}var T=d.shapeMap["pre-rect"]||d.find((function(t){return"pre-rect"===t.get("className")}));if(T&&!T.destroyed){var k=(0,x.mix)({},T.attr(),t.preRect);T.attr((0,b.__assign)((0,b.__assign)({},k),{x:-c/2,y:-h/2,height:h}))}if(f&&!f.destroyed)if(v||void 0===v){var I=m.width,N=m.height,P=m.x,O=m.y,L=m.offset,R=(0,b.__rest)(m,["width","height","x","y","offset"]);f.attr((0,b.__assign)((0,b.__assign)({},R),{x:P||-c/2+I+L,y:O||-N/2,width:I,height:N}))}else f.remove(),delete d.shapeMap["pre-rect"];else v&&this.drawLogoIcon(t,d);var D=d.shapeMap["rect-state-icon"]||d.find((function(t){return"rect-state-icon"===t.get("className")})),z=D?D.attr():{},F=(0,x.mix)({},z,t.stateIcon);if(D){F.show||void 0===F.show||(D.remove(),delete d.shapeMap["rect-state-icon"]);var B=F.width,U=(N=F.height,P=F.x,O=F.y,F.offset),j=(0,b.__rest)(F,["width","height","x","y","offset"]);D.attr((0,b.__assign)((0,b.__assign)({},j),{x:P||c/2-B+U,y:O||-N/2,width:B,height:N}))}else F.show&&this.drawStateIcon(t,d);this.updateLinkPoints(t,d)},getOptions:function(t,e){return"move"===e?t:(0,x.deepMix)({},this.options,this.getCustomConfig(t)||{},t)}},"single-node"),al("star",{options:{size:60,style:{stroke:cl.defaultNode.style.stroke,fill:cl.defaultNode.style.fill,lineWidth:cl.defaultNode.style.lineWidth},labelCfg:{style:{fill:cl.nodeLabel.style.fill,fontSize:cl.nodeLabel.style.fontSize,fontFamily:cl.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:cl.defaultNode.linkPoints.size,lineWidth:cl.defaultNode.linkPoints.lineWidth,fill:cl.defaultNode.linkPoints.fill,stroke:cl.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,b.__assign)({},cl.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).icon,r=void 0===n?{}:n,i=this.getShapeStyle(t),o=e.addShape("path",{attrs:i,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});e.shapeMap["".concat(this.type,"-keyShape")]=o;var a=r.width,s=r.height,u=r.show,l=r.text;return u&&(e.shapeMap["".concat(this.type,"-icon")]=l?e.addShape("text",{attrs:(0,b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},r),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):e.addShape("image",{attrs:(0,b.__assign)({x:-a/2,y:-s/2},r),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(t,e),o},drawLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints,r=void 0===n?{}:n,i=r.top,o=r.left,a=r.right,s=r.leftBottom,u=r.rightBottom,l=r.size,c=r.r,h=(0,b.__rest)(r,["top","left","right","leftBottom","rightBottom","size","r"]),d=this.getSize(t)[0];if(a){var f=Math.cos(.1*Math.PI)*d,p=Math.sin(.1*Math.PI)*d;e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},h),{x:f,y:-p,r:l/2||c||5}),className:"link-point-right",name:"link-point-right"})}if(i){f=Math.cos(.5*Math.PI)*d,p=Math.sin(.5*Math.PI)*d;e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},h),{x:f,y:-p,r:l/2||c||5}),className:"link-point-top",name:"link-point-top"})}if(o){f=Math.cos(.9*Math.PI)*d,p=Math.sin(.9*Math.PI)*d;e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},h),{x:f,y:-p,r:l/2||c||5}),className:"link-point-left",name:"link-point-left"})}if(s){f=Math.cos(1.3*Math.PI)*d,p=Math.sin(1.3*Math.PI)*d;e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},h),{x:f,y:-p,r:l/2||c||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})}if(u){f=Math.cos(1.7*Math.PI)*d,p=Math.sin(1.7*Math.PI)*d;e.shapeMap["link-point-right-bottom"]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},h),{x:f,y:-p,r:l/2||c||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"})}},getPath:function(t){var e=this.getSize(t)[0],n=3*e/8,r=t.innerR||n;return el.getStarPath(e,r)},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},r=(0,x.mix)({},e,n),i=this.getPath(t);return(0,b.__assign)({path:i},r)},update:function(t,e,n){var r=e.getContainer(),i=this.getOptions({}).style,o=this.getPath(t),a={stroke:t.color,path:o},s=e.get("keyShape"),u=(0,x.mix)({},i,s.attr(),a);u=(0,x.mix)(u,t.style),this.updateShape(t,e,u,!0,n),this.updateLinkPoints(t,r)},updateLinkPoints:function(t,e){var n=this.getOptions({}).linkPoints,r=e.shapeMap["link-point-left"]||e.find((function(t){return"link-point-left"===t.get("className")})),i=e.shapeMap["link-point-right"]||e.find((function(t){return"link-point-right"===t.get("className")})),o=e.shapeMap["link-point-top"]||e.find((function(t){return"link-point-top"===t.get("className")})),a=e.shapeMap["link-point-left-bottom"]||e.find((function(t){return"link-point-left-bottom"===t.get("className")})),s=e.shapeMap["link-point-left-bottom"]||e.find((function(t){return"link-point-right-bottom"===t.get("className")})),u=n,l=r||i||o||a||s;l&&(u=l.attr());var c=(0,x.mix)({},u,t.linkPoints),h=c.fill,d=c.stroke,f=c.lineWidth,p=c.size/2;p||(p=c.r);var m=t.linkPoints?t.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},g=m.left,v=m.right,y=m.top,w=m.leftBottom,_=m.rightBottom,S=this.getSize(t)[0],E={r:p,fill:h,stroke:d,lineWidth:f},A=Math.cos(.1*Math.PI)*S,M=Math.sin(.1*Math.PI)*S;i?v||void 0===v?i.attr((0,b.__assign)((0,b.__assign)({},E),{x:A,y:-M})):(i.remove(),delete e.shapeMap["link-point-right"]):v&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},E),{x:A,y:-M}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),A=Math.cos(.5*Math.PI)*S,M=Math.sin(.5*Math.PI)*S,o?y||void 0===y?o.attr((0,b.__assign)((0,b.__assign)({},E),{x:A,y:-M})):(o.remove(),delete e.shapeMap["link-point-top"]):y&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},E),{x:A,y:-M}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),A=Math.cos(.9*Math.PI)*S,M=Math.sin(.9*Math.PI)*S,r?g||void 0===g?r.attr((0,b.__assign)((0,b.__assign)({},E),{x:A,y:-M})):(r.remove(),delete e.shapeMap["link-point-left"]):g&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},E),{x:A,y:-M}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),A=Math.cos(1.3*Math.PI)*S,M=Math.sin(1.3*Math.PI)*S,a?w||void 0===w?a.attr((0,b.__assign)((0,b.__assign)({},E),{x:A,y:-M})):(a.remove(),delete e.shapeMap["link-point-left-bottom"]):w&&(e.shapeMap["link-point-left-bottom"]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},E),{x:A,y:-M}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0})),A=Math.cos(1.7*Math.PI)*S,M=Math.sin(1.7*Math.PI)*S,s?_||void 0===_?s.attr((0,b.__assign)((0,b.__assign)({},E),{x:A,y:-M})):(s.remove(),delete e.shapeMap["link-point-right-bottom"]):_&&(e.shapeMap["link-point-right-bottom"]=e.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},E),{x:A,y:-M}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0}))}},"single-node");var Xv=el.defaultSubjectColors,Yv="fan-shape-";al("donut",{options:{size:cl.defaultNode.size,style:{x:0,y:0,stroke:cl.defaultNode.style.stroke,fill:cl.defaultNode.style.fill,lineWidth:cl.defaultNode.style.lineWidth},labelCfg:{style:{fill:cl.nodeLabel.style.fill,fontSize:cl.nodeLabel.style.fontSize,fontFamily:cl.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:cl.defaultNode.linkPoints.size,lineWidth:cl.defaultNode.linkPoints.lineWidth,fill:cl.defaultNode.linkPoints.fill,stroke:cl.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,b.__assign)({},cl.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).icon,r=void 0===n?{}:n,i=this.getShapeStyle(t),o=(0,x.deepMix)({},r,t.icon),a=e.addShape("circle",{attrs:i,className:"".concat(this.type,"-keyShape"),draggable:!0,name:"".concat(this.type,"-keyShape")});e.shapeMap["".concat(this.type,"-keyShape")]=a;var s=o.width,u=o.height,l=o.show,c=o.text;return l&&(e.shapeMap["".concat(this.type,"-icon")]=c?e.addShape("text",{attrs:(0,b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):e.addShape("image",{attrs:(0,b.__assign)({x:-s/2,y:-u/2},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),qv(t,e,a),this.drawLinkPoints(t,e),a},updateShape:function(t,e,n,r,i){var o=e.get("keyShape");o.attr((0,b.__assign)({},n)),Kv(t,e,o),this.updateLabel(t,e,i),r&&this.updateIcon(t,e)}},"circle");var qv=function(t,e,n){var r=t.donutAttrs,i=void 0===r?{}:r,o=t.donutColorMap,a=void 0===o?{}:o,s=Object.keys(i).length;if(i&&s>1){var u=Zv(i,a),l=u.configs,c=u.totalValue;if(c){var h=Qv(n),d=h.lineWidth,f=h.arcR,p=[f,0],m=0;if(1===s)return void $v(e,{arcR:f,arcBegin:p,beginAngle:m,config:l[0],fanIndex:0,lineWidth:d,totalValue:c,drawWhole:!0});for(var g=0;g<l.length;g++){var v=$v(e,{arcR:f,arcBegin:p,beginAngle:m,config:l[g],fanIndex:g,lineWidth:d,totalValue:c});if(v.shouldEnd)return;p=v.arcBegin,m=v.beginAngle}}}},$v=function(t,e){var n,r,i,o=e.arcR,a=e.arcBegin,s=e.beginAngle,u=e.config,l=e.fanIndex,c=e.lineWidth,h=e.totalValue,d=e.drawWhole,f=void 0!==d&&d,p=e.updateShape,m=void 0===p?void 0:p,g=u.value/h;if(g<.001)return{beginAngle:s,arcBegin:a,shape:void 0,shouldEnd:!1};if(f||g>.999)n=[o,1e-4],i=1;else{var v=g*Math.PI*2;r=s+v,n=[o*Math.cos(r),-o*Math.sin(r)],i=v>Math.PI?1:0}var y={path:[["M",a[0],a[1]],["A",o,o,0,i,0,n[0],n[1]]],stroke:u.color||(null==m?void 0:m.attr("stroke"))||Xv[l%Xv.length],lineWidth:c};return m?m.attr(y):t.shapeMap["".concat(Yv).concat(l)]=t.addShape("path",{attrs:y,name:"".concat(Yv).concat(l),draggable:!0}),{beginAngle:r,arcBegin:n,shape:t.shapeMap["".concat(Yv).concat(l)],shouldEnd:f||g>.999}},Kv=function(t,e,n){var r=t.donutAttrs,i=t.donutColorMap,o=void 0===i?{}:i,a={},s=e.getContainer();if(r){var u=Zv(r,o),l=u.configs,c=u.totalValue;if(c)for(var h=Qv(n),d=h.lineWidth,f=h.arcR,p=[f,0],m=0,g=0;g<l.length;g++){var v="".concat(Yv).concat(g),y=$v(s,{arcR:f,arcBegin:p,beginAngle:m,config:l[g],fanIndex:g,lineWidth:d,totalValue:c,drawWhole:1===l.length,updateShape:s.shapeMap[v]});if(y.shape&&(a[v]=!0),y.shouldEnd)break;p=y.arcBegin,m=y.beginAngle}}Object.keys(s.shapeMap).filter((function(t){return t.includes(Yv)})).forEach((function(t){a[t]||(s.shapeMap[t].remove(!0),delete s.shapeMap[t])}))},Zv=function(t,e){var n=0,r=[];return Object.keys(t).forEach((function(i){var o=+t[i];isNaN(o)||(r.push({key:i,value:o,color:e[i]}),n+=o)})),{totalValue:n,configs:r}},Qv=function(t){var e=t.attr("r"),n=.6*e;return{lineWidth:e-n,arcR:(e+n)/2}},Jv=function(t){var e=t.x,n=t.y;return{x:e,y:n,centerX:e,centerY:n,minX:e,minY:n,maxX:e,maxY:n,height:0,width:0}},ty=function(t){for(var e=[],n={},r=t.length-1;r>=0;r--){var i=t[r];i.id="".concat(i.x,"|||").concat(i.y),n[i.id]||(n[i.id]=i,e.push(i))}return e},ey=function(t){return ty(t)},ny=function(t,e){return t.width||t.height?{centerX:t.centerX,centerY:t.centerY,minX:t.minX-e,minY:t.minY-e,maxX:t.maxX+e,maxY:t.maxY+e,height:t.height+2*e,width:t.width+2*e}:t},ry=function(t,e,n){var r=function(t,e){var n=Math.abs(t.x-e.centerX),r=Math.abs(t.y-e.centerY);return 0===n&&0===r?0:n/e.width>r/e.height}(e,t);if(0===r){var i=t.centerX,o=t.centerY;return n.y<e.y?o=t.minY:n.x>e.x?i=t.maxX:n.x<e.x?i=t.minX:n.x===e.x&&(o=t.maxY),{x:i,y:o}}return r?{x:e.x>t.centerX?t.maxX:t.minX,y:e.y}:{x:e.x,y:e.y>t.centerY?t.maxY:t.minY}},iy=function(t,e){var n=Math.min(t.minX,e.minX),r=Math.min(t.minY,e.minY),i=Math.max(t.maxX,e.maxX),o=Math.max(t.maxY,e.maxY);return{centerX:(n+i)/2,centerY:(r+o)/2,minX:n,minY:r,maxX:i,maxY:o,height:o-r,width:i-n}},oy=function(t){return[{x:t.minX,y:t.minY},{x:t.maxX,y:t.minY},{x:t.maxX,y:t.maxY},{x:t.minX,y:t.maxY}]},ay=function(t,e){var n=t.x,r=t.y;return n<e.minX||n>e.maxX||r<e.minY||r>e.maxY},sy=function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},uy=function(t,e,n,r,i){return sy(t,e)+sy(t,n)+function(t,e){var n=0;return e.forEach((function(e){e&&(t.x===e.x&&(n+=-2),t.y===e.y&&(n+=-2))})),n}(t,[e,n,r,i])},ly=function t(e,n,r,i,o){void 0===o&&(o=0),e.unshift(n[i]),r[i]&&r[i]!==i&&o<=100&&t(e,n,r,r[i],o+1)},cy=function(t,e,n,r){var i=n.x-t.x,o=n.y-t.y,a=r.x-t.x,s=r.y-t.y,u=n.x-e.x,l=n.y-e.y,c=r.x-e.x,h=r.y-e.y;return(i*s-o*a)*(u*h-l*c)<=0&&(i*l-o*u)*(a*h-s*c)<=0},hy=function(t,e,n){if(n.width||n.height){var r=oy(n),i=r[0],o=r[1],a=r[2],s=r[3];return cy(t,e,i,o)||cy(t,e,i,s)||cy(t,e,o,a)||cy(t,e,a,s)}return!1},dy=function(t,e,n,r){var i=[];return t.forEach((function(t){if(t!==e&&(t.x===e.x||t.y===e.y)){if(hy(t,e,n)||hy(t,e,r))return;i.push(t)}})),ty(i)},fy=function(t,e){var n=[],r=t[0];return n.push("M".concat(r.x," ").concat(r.y)),t.forEach((function(r,i){var o=t[i+1],a=t[i+2];if(o&&a)if(function(t,e,n){return!(t.x===e.x&&e.x===n.x||t.y===e.y&&e.y===n.y)}(r,o,a)){var s=function(t,e,n,r){var i=sy(t,e),o=sy(n,e);return i<r&&(r=i),o<r&&(r=o),[{x:e.x-r/i*(e.x-t.x),y:e.y-r/i*(e.y-t.y)},{x:e.x-r/o*(e.x-n.x),y:e.y-r/o*(e.y-n.y)}]}(r,o,a,e),u=s[0],l=s[1];n.push("L".concat(u.x," ").concat(u.y)),n.push("Q".concat(o.x," ").concat(o.y," ").concat(l.x," ").concat(l.y)),n.push("L".concat(l.x," ").concat(l.y))}else n.push("L".concat(o.x," ").concat(o.y));else o&&n.push("L".concat(o.x," ").concat(o.y))})),n.join("")},py=function(t,e,n,r,i){var o,a;if(n&&n.getType())if("combo"===n.getType()){var s=n.getKeyShape().getBBox();if(s){var u=n.getModel(),l=u.x,c=u.y;(o={x:l,y:c,width:s.width,height:s.height,minX:s.minX+l,maxX:s.maxX+l,minY:s.minY+c,maxY:s.maxY+c}).centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2}else o=Jv(t)}else o=n&&n.getBBox();else o=Jv(t);if(r&&r.getType())if("combo"===r.getType()){var h=r.getKeyShape().getBBox();if(h){var d=r.getModel(),f=d.x,p=d.y;(a={x:f,y:p,width:h.width,height:h.height,minX:h.minX+f,maxX:h.maxX+f,minY:h.minY+p,maxY:h.maxY+p}).centerX=(a.minX+a.maxX)/2,a.centerY=(a.minY+a.maxY)/2}else a=Jv(e)}else a=r&&r.getBBox();else a=Jv(e);var m=ny(o,i),g=ny(a,i),v=ry(m,t,e),y=ry(g,e,t),b=function(t){void 0===t&&(t=[]);var e=[],n=[];t.forEach((function(t){e.push(t.x),n.push(t.y)}));var r=Math.min.apply(Math,e),i=Math.max.apply(Math,e),o=Math.min.apply(Math,n),a=Math.max.apply(Math,n);return{centerX:(r+i)/2,centerY:(o+a)/2,maxX:i,maxY:a,minX:r,minY:o,height:a-o,width:i-r}}([v,y]),x=iy(m,b),w=iy(g,b),_=[];_=_.concat(oy(x)).concat(oy(w));var S={x:(t.x+e.x)/2,y:(t.y+e.y)/2};[b,x,w].forEach((function(t){_=_.concat(function(t,e){return function(t,e){return e<t.minX||e>t.maxX?[]:[{x:e,y:t.minY},{x:e,y:t.maxY}]}(t,e.x).concat(function(t,e){return e<t.minY||e>t.maxY?[]:[{x:t.minX,y:e},{x:t.maxX,y:e}]}(t,e.y))}(t,S).filter((function(t){return ay(t,m)&&ay(t,g)})))})),[{x:v.x,y:y.y},{x:y.x,y:v.y}].forEach((function(t){ay(t,m)&&ay(t,g)&&_.push(t)})),_.unshift(v),_.push(y);var E=function(t,e,n,r,i,o,a){var s,u=[],l=((s={})[e.id]=e,s),c={},h={},d={};h[e.id]=0,d[e.id]=uy(e,n,e);var f=new my;f.add({id:e.id,value:d[e.id]});var p,m={};for(t.forEach((function(t){m[t.id]=t}));Object.keys(l).length;){var g=f.minId(!1);if(!g)break;if((p=l[g])===n){var v=[];return ly(v,m,c,n.id),v}delete l[p.id],f.remove(p.id),u.push(p),dy(t,p,r,i).forEach((function(t){if(-1===u.indexOf(t)){var r=t.id;l[r]||(l[r]=t);var i=d[p.id]+sy(p,t);h[r]&&i>=h[r]||(c[r]=p.id,h[r]=i,d[r]=h[r]+uy(t,n,e,o,a)),f.add({id:r,value:d[r]})}}))}return[e,n]}(_=ty(_),v,y,o,a,t,e);return E.unshift(t),E.push(e),ey(E)},my=function(){function t(){this.arr=[],this.map={},this.arr=[],this.map={}}return t.prototype._innerAdd=function(t,e){for(var n=[0,e-1];n[1]-n[0]>1;){var r=Math.floor((n[0]+n[1])/2);if(this.arr[r].value>t.value)n[1]=r;else{if(!(this.arr[r].value<t.value))return this.arr.splice(r,0,t),void(this.map[t.id]=!0);n[0]=r}}this.arr.splice(n[1],0,t),this.map[t.id]=!0},t.prototype.add=function(t){delete this.map[t.id];var e=this.arr.length;return e?this.arr[e-1].value<t.value?(this.arr.push(t),void(this.map[t.id]=!0)):void this._innerAdd(t,e):(this.arr.push(t),void(this.map[t.id]=!0))},t.prototype.remove=function(t){this.map[t]&&delete this.map[t]},t.prototype._clearAndGetMinId=function(){for(var t,e=this.arr.length-1;e>=0;e--)this.map[this.arr[e].id]?t=this.arr[e].id:this.arr.splice(e,1);return t},t.prototype._findFirstId=function(){for(;this.arr.length;){var t=this.arr.shift();if(this.map[t.id])return t.id}},t.prototype.minId=function(t){return t?this._clearAndGetMinId():this._findFirstId()},t}(),gy={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},fallbackRoute:function(t,e,n,r,i){return ey(py(t,e,n,r,i.offset))}},vy=(Math.PI,function(t,e){var n=Math.round(Math.abs(t/e));return n<0?0:(t<0?-1:1)*n}),yy=function(t,e){var n=e.x-t.x,r=e.y-t.y;return n||r?Math.atan2(r,n):0},by=function(t,e){var n=Math.abs(t-e);return n>Math.PI?2*Math.PI-n:n},xy=function(t,e,n){for(var r=1/0,i=0,o=e.length;i<o;i++){var a=n(t,e[i]);a<r&&(r=a)}return r},wy=function(t,e,n,r,i){var o=[];if(!n)return[t];var a=i.directions,s=i.offset,u=n.getBBox(),l=e.x>u.minX&&e.x<u.maxX&&e.y>u.minY&&e.y<u.maxY,c=ny(u,s);for(var h in c)c[h]=vy(c[h],i.gridSize);if(l){for(var d=0,f=a;d<f.length;d++){var p=f[d],m=[[{x:c.minX,y:c.minY},{x:c.maxX,y:c.minY}],[{x:c.minX,y:c.minY},{x:c.minX,y:c.maxY}],[{x:c.maxX,y:c.minY},{x:c.maxX,y:c.maxY}],[{x:c.minX,y:c.maxY},{x:c.maxX,y:c.maxY}]];for(h=0;h<4;h++){var g=m[h],v=el.getLineIntersect(t,{x:t.x+p.stepX*c.width,y:t.y+p.stepY*c.height},g[0],g[1]);v&&!hy(t,v,u)&&(v.id="".concat(v.x,"|||").concat(v.y),o.push(v))}}return o}var y=ry(c,t,r);return y.id="".concat(y.x,"|||").concat(y.y),[y]},_y=function(t,e,n,r){var i=yy(t,e),o=n[t.id];if(!o){var a=yy(r,t);return by(a,i)}var s=yy({x:o.x,y:o.y},t);return by(s,i)},Sy=function(t,e,n,r,i,o,a){var s=[r],u=r,l=t.id,c=t.x,h=t.y,d={x:c,y:h,id:l};_y(d,o,e,n)&&(u={x:o.x===r.x?r.x:d.x*a,y:o.y===r.y?r.y:d.y*a},s.unshift(u));for(var f=e[l];f&&f.id!==l;){var p={x:c,y:h,id:l},m={x:f.x,y:f.y,id:f.id};_y(m,p,e,n)&&(u={x:m.x===p.x?u.x:m.x*a,y:m.y===p.y?u.y:m.y*a},s.unshift(u)),c=m.x,h=m.y,f=e[l=m.id]}return s[0].x=c===n.x?i.x:u.x,s[0].y=h===n.y?i.y:u.y,s.unshift(i),s},Ey=function(t,e,n,r,i){if(isNaN(t.x)||isNaN(e.x))return[];var o=(0,x.deepMix)(gy,i);o.obstacles=o.obstacles||[];var a=o.penalties,s=o.gridSize,u=function(t,e,n){var r={};return t.forEach((function(t){if(t)for(var i=ny(t.getBBox(),n),o=vy(i.minX,e);o<=vy(i.maxX,e);o+=1)for(var a=vy(i.minY,e);a<=vy(i.maxY,e);a+=1)r["".concat(o,"|||").concat(a)]=!0})),r}(o.obstacles.concat([n,r]),s,o.offset),l={x:vy(t.x,s),y:vy(t.y,s)},c={x:vy(e.x,s),y:vy(e.y,s)};t.id="".concat(l.x,"|||").concat(l.y),e.id="".concat(c.x,"|||").concat(c.y);var h=wy(l,t,n,c,o),d=wy(c,e,r,l,o);h.forEach((function(t){delete u[t.id]})),d.forEach((function(t){delete u[t.id]}));for(var f={},p={},m={},g={},v={},y=new my,b=0;b<h.length;b++){var w=h[b];f[w.id]=w,g[w.id]=0,v[w.id]=xy(w,d,o.distFunc),y.add({id:w.id,value:v[w.id]})}var _,S,E,A,M,C,T=o.maximumLoops,k=1/0,I={};for(d.forEach((function(t){I["".concat(t.x,"|||").concat(t.y)]=!0})),Object.keys(f).forEach((function(t){var e=f[t].id;v[e]<=k&&(k=v[e],_=f[e])}));Object.keys(f).length>0&&T>0;){var N=y.minId((T+1)%30==0);if(!N)break;if(_=f[N],I["".concat(_.x,"|||").concat(_.y)])return Sy(_,m,l,e,t,c,s);delete f[_.id],y.remove(_.id),p[_.id]=!0;for(b=0;b<o.directions.length;b++){S=o.directions[b];var P="".concat(Math.round(_.x)+S.stepX,"|||").concat(Math.round(_.y)+S.stepY);if(E={x:_.x+S.stepX,y:_.y+S.stepY,id:P},!p[P]&&!((C=_y(_,E,m,l))>o.maxAllowedDirectionChange||u[P])){f[P]||(f[P]=E);var O=a[C];A=o.distFunc(_,E)+(isNaN(O)?s:O),M=g[_.id]+A;var L=g[P];L&&M>=L||(m[P]=_,g[P]=M,v[P]=M+xy(E,d,o.distFunc),y.add({id:P,value:v[P]}))}}T-=1}return o.fallbackRoute(t,e,n,r,o)};sl("polyline",{options:{color:cl.defaultEdge.color,size:cl.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:cl.defaultEdge.style.stroke,lineAppendWidth:cl.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:cl.edgeLabel.style.fill,fontSize:cl.edgeLabel.style.fontSize,fontFamily:cl.windowFontFamily}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:(0,b.__assign)({},cl.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(t,e){var n=this.getShapeStyle(t);0===n.radius&&delete n.radius;var r=e.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:n});return e.shapeMap["edge-shape"]=r,r},getShapeStyle:function(t){var e=this.options.style,n={stroke:t.color},r=(0,x.mix)({},e,n,t.style);t=this.getPathPoints(t),this.radius=r.radius,this.offset=r.offset;var i=t.startPoint,o=t.endPoint,a=this.getControlPoints(t),s=[i];a&&(s=s.concat(a)),s.push(o);var u=t.sourceNode,l=t.targetNode,c=r.radius,h=this.options.routeCfg,d=(0,x.mix)({},h,t.routeCfg);d.offset=r.offset;var f=this.getPath(s,u,l,c,d,!Boolean(a));return((0,x.isArray)(f)&&f.length<=1||(0,x.isString)(f)&&-1===f.indexOf("L"))&&(f="M0 0, L0 0"),(isNaN(i.x)||isNaN(i.y)||isNaN(o.x)||isNaN(o.y))&&(f="M0 0, L0 0"),(0,x.mix)({},cl.defaultEdge.style,r,{lineWidth:t.size,path:f})},updateShapeStyle:function(t,e){var n=e.getContainer();if(e.isVisible()){var r={stroke:t.color},i=n.shapeMap["edge-shape"]||n.find((function(t){return"edge-shape"===t.get("className")}))||e.getKeyShape(),o=t.size,a=(t=this.getPathPoints(t)).startPoint,s=t.endPoint,u=this.getControlPoints(t),l=[a];u&&(l=l.concat(u)),l.push(s);var c=i.attr(),h=(0,x.mix)({},r,c,t.style),d=t.sourceNode,f=t.targetNode,p=h.radius,m=this.options.routeCfg,g=(0,x.mix)({},m,t.routeCfg);g.offset=h.offset;var v=this.getPath(l,d,f,p,g,!Boolean(u));((0,x.isArray)(v)&&v.length<=1||(0,x.isString)(v)&&-1===v.indexOf("L"))&&(v="M0 0, L0 0"),(isNaN(a.x)||isNaN(a.y)||isNaN(s.x)||isNaN(s.y))&&(v="M0 0, L0 0"),c.endArrow&&!1===h.endArrow&&(t.style.endArrow={path:""}),c.startArrow&&!1===h.startArrow&&(t.style.startArrow={path:""});var y=(0,x.mix)(r,i.attr(),{lineWidth:o,path:v},t.style);i&&i.attr(y)}},getPath:function(t,e,n,r,i,o){var a=i.offset,s=i.obstacles,u=i.simple;if(!a||t.length>2||!1===o){if(r)return fy(t,r);var l=[];return(0,x.each)(t,(function(t,e){0===e?l.push(["M",t.x,t.y]):l.push(["L",t.x,t.y])})),l}!1===u||(null==s?void 0:s.length)||(u=!0);var c=u?py(t[t.length-1],t[0],n,e,a):Ey(t[0],t[t.length-1],e,n,i);return c&&c.length?r?fy(c,r):(c=function(t){if(!(null==t?void 0:t.length))return t;for(var e=t[t.length-1],n={x:e.x,y:e.y},r=[e],i=[e],o=t.length-2;o>=0;o--){var a,s=t[o];s.x===n.x?r.push(s):(r=[s],n.x=s.x),s.y===n.y?i.push(s):(i=[s],n.y=s.y),r.length>2?(a=t.indexOf(r[1]))>-1&&t.splice(a,1):i.length>2&&(a=t.indexOf(i[1]))>-1&&t.splice(a,1)}return t}(c),el.pointsToPolygon(c)):"M0 0, L0 0"}},"single-edge");var Ay=hf.cloneEvent,My=hf.isNaN,Cy=Math.abs,Ty=["shift","ctrl","alt","control"];const ky={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{mousedown:"onMouseDown",drag:"onDragMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(t){var e=this.origin,n=+t.clientX,r=+t.clientY;if(!My(n)&&!My(r)){var i=n-e.x,o=r-e.y;"x"===this.get("direction")?o=0:"y"===this.get("direction")&&(i=0),this.origin={x:n,y:r};var a=this.graph.get("width"),s=this.graph.get("height"),u=this.graph.get("canvas").getCanvasBBox(),l=this.scalableRange,c=this.scalableRange;l<1&&l>-1&&(l*=a,c*=s),(u.minX<=a+l&&u.minX+i>a+l||u.maxX+l>=0&&u.maxX+l+i<0)&&(i=0),(u.minY<=s+c&&u.minY+o>s+c||u.maxY+c>=0&&u.maxY+c+o<0)&&(o=0),this.graph.translate(i,o)}},onTouchStart:function(t){var e=t.originalEvent.touches,n=e[0],r=e[1];n&&r||(t.preventDefault(),this.mousedown=!0,this.onDragStart(t))},onMouseDown:function(t){this.mousedown=!0},onDragMove:function(t){this.mousedown&&(this.dragstart?this.onDrag(t):(this.dragstart=!0,this.onDragStart(t)))},onDragStart:function(t){var e=this,n=t.originalEvent;if((!n||"touchstart"===t.name||0===n.button)&&("touchstart"===t.name||"undefined"==typeof window||!window.event||window.event.buttons||window.event.button)&&this.shouldBegin(t,this)&&!e.keydown&&this.allowDrag(t)){if(e.origin={x:t.clientX,y:t.clientY},e.dragging=!1,this.enableOptimize){for(var r=this.graph,i=r.getEdges(),o=0,a=i.length;o<a;o++){var s=i[o].get("group").get("children");s&&s.forEach((function(t){t.set("ori-visibility",t.get("ori-visibility")||t.get("visible")),t.hide()}))}for(var u=r.getNodes(),l=0,c=u.length;l<c;l++)for(var h=0,d=u[l].getContainer().get("children");h<d.length;h++){var f=d[h];f.get("isKeyShape")||(f.set("ori-visibility",f.get("ori-visibility")||f.get("visible")),f.hide())}}if("undefined"!=typeof window){var p=this;this.handleDOMContextMenu=function(t){return p.onMouseUp(t)},document.body.addEventListener("contextmenu",this.handleDOMContextMenu)}}},onTouchMove:function(t){var e=t.originalEvent.touches,n=e[0],r=e[1];n&&r?this.onMouseUp(t):(t.preventDefault(),this.onDrag(t))},onDrag:function(t){if(this.mousedown){var e=this.graph;if(!this.keydown&&this.allowDrag(t)&&(t=Ay(t),this.origin)){if(this.dragging)t.type="drag",e.emit("canvas:drag",t);else{if(Cy(this.origin.x-t.clientX)+Cy(this.origin.y-t.clientY)<10)return;this.shouldBegin(t,this)&&(t.type="dragstart",e.emit("canvas:dragstart",t),this.originPosition={x:t.clientX,y:t.clientY},this.dragging=!0)}this.shouldUpdate(t,this)&&this.updateViewport(t)}}},onMouseUp:function(t){var e,n;this.mousedown=!1,this.dragstart=!1;var r=this.graph;if(!this.keydown){var i=r.getZoom(),o=r.get("modeController"),a=null===(n=null===(e=null==o?void 0:o.modes[o.mode])||void 0===e?void 0:e.filter((function(t){return"zoom-canvas"===t.type})))||void 0===n?void 0:n[0],s=a?a.optimizeZoom||.1:0;if(this.enableOptimize){for(var u=r.getEdges(),l=0,c=u.length;l<c;l++){var h=u[l].get("group").get("children");h&&h.forEach((function(t){var e=t.get("ori-visibility");t.set("ori-visibility",void 0),e&&t.show()}))}if(i>s)for(var d=r.getNodes(),f=0,p=d.length;f<p;f++)for(var m=0,g=d[f].getContainer().get("children");m<g.length;m++){var v=g[m];if(!v.get("isKeyShape")){var y=v.get("ori-visibility");v.set("ori-visibility",void 0),y&&v.show()}}}this.dragging?(t=Ay(t),this.shouldEnd(t,this)&&this.updateViewport(t),t.type="dragend",t.dx=t.clientX-this.originPosition.x,t.dy=t.clientY-this.originPosition.y,r.emit("canvas:dragend",t),this.endDrag(),"undefined"!=typeof window&&document.body.removeEventListener("contextmenu",this.handleDOMContextMenu)):this.origin=null}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1,this.mousedown=!1,this.dragstart=!1},onKeyDown:function(t){var e=t.key;e&&(Ty.indexOf(e.toLowerCase())>-1?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1},allowDrag:function(t){var e,n,r=t.target,i=r&&r.isCanvas&&r.isCanvas();if((0,x.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!i)return!1;if((0,x.isObject)(this.allowDragOnItem)){var o=this.allowDragOnItem,a=o.node,s=o.edge,u=o.combo,l=null===(n=null===(e=t.item)||void 0===e?void 0:e.getType)||void 0===n?void 0:n.call(e);if(!a&&"node"===l)return!1;if(!s&&"edge"===l)return!1;if(!u&&"combo"===l)return!1}return!0}},Iy={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1,enableStack:!0}},getEvents:function(){return{"node:mousedown":"onMouseDown",drag:"onDragMove",dragend:"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onDragEnd",afterchangedata:"onDragEnd"}},validationCombo:function(t){return!(!this.origin||!t||t.destroyed)&&"combo"===t.getType()},onTouchStart:function(t){if(t.item){try{var e=t.originalEvent.touches,n=e[0],r=e[1];if(n&&r)return;t.preventDefault()}catch(t){console.warn("Touch original event not exist!")}this.mousedown={item:t.item,target:t.target,origin:{x:t.x,y:t.y}},this.dragstart=!0,this.onDragStart(t)}},onTouchMove:function(t){try{var e=t.originalEvent.touches,n=e[0],r=e[1];if(n&&r)return void this.onDragEnd(t);t.preventDefault()}catch(t){console.warn("Touch original event not exist!")}this.onDrag(t)},onMouseDown:function(t){this.mousedown={item:t.item,target:t.target,origin:{x:t.x,y:t.y}},"undefined"==typeof window||this.windowEventBinded||(this.windowEventBinded=!0,document.body.addEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.addEventListener("mouseup",this.onDragEnd.bind(this)))},onDragMove:function(t){var e,n;"node"===(null===(n=null===(e=t.item)||void 0===e?void 0:e.getType)||void 0===n?void 0:n.call(e))?this.mousedown&&(this.dragstart?this.onDrag((0,b.__assign)((0,b.__assign)({},t),this.mousedown)):(this.dragstart=!0,this.onDragStart(t))):this.onDragEnd()},onDragStart:function(t){var e=this;if(this.currentShouldEnd=!0,this.shouldBegin((0,b.__assign)((0,b.__assign)({},t),this.mousedown),this)){var n=this.mousedown,r=n.item,i=n.target;if(r&&!r.destroyed&&!r.hasLocked()){if(r.getContainer().set("capture",!1),this.cachedCaptureItems||(this.cachedCaptureItems=[]),this.cachedCaptureItems.push(r),i)if(i.get("isAnchorPoint"))return;var o=this.graph;this.targets=[],this.targetCombo=null;var a=o.findAllByState("node",this.selectedState),s=r.get("id"),u=a.filter((function(t){var e=t.get("id");return s===e}));if(0===u.length?this.targets.push(r):a.length>1?a.forEach((function(t){t.hasLocked()||e.targets.push(t)})):this.targets.push(r),this.graph.get("enabledStack")&&this.enableStack){var l=[];this.targets.forEach((function(t){var e=t.getModel(),n=e.x,r=e.y,i=e.id;l.push({x:n,y:r,id:i})})),this.set("beforeDragNodes",l)}this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach((function(t){t.getEdges().forEach((function(t){t.isVisible()&&(e.hidenEdge[t.getID()]=!0,t.hide())}))})),this.origin=this.mousedown.origin,this.point={},this.originPoint={}}}},onDrag:function(t){var e=this;if(this.mousedown&&this.origin&&this.shouldUpdate(t,this))if(this.get("enableDelegate"))this.updateDelegate(t);else if(this.enableDebounce)this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:t,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos});else{var n={};this.targets.map((function(r){e.update(r,t);var i=r.getModel().comboId;i&&(n[i]=e.graph.findById(i))})),this.onlyChangeComboSize&&this.updateParentCombos()}},onDragEnd:function(t){var e,n=this;if(this.mousedown=!1,this.dragstart=!1,"undefined"!=typeof window&&this.windowEventBinded&&(this.windowEventBinded=!1,document.body.removeEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.removeEventListener("mouseup",this.onDragEnd.bind(this))),this.origin){null===(e=this.cachedCaptureItems)||void 0===e||e.forEach((function(t){t.getContainer().set("capture",!0)})),this.cachedCaptureItems=[],this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach((function(t){t.getEdges().forEach((function(t){n.hidenEdge[t.getID()]&&t.show(),t.refresh()}))})),this.hidenEdge={};var r=this.graph;if(r.get("enabledStack")&&this.enableStack){var i={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.get("beforeDragNodes").forEach((function(t){i.before.nodes.push(t)})),this.targets.forEach((function(t){var e=t.getModel(),n=e.x,r=e.y,o=e.id;i.after.nodes.push({x:n,y:r,id:o})})),r.pushStack("update",(0,x.clone)(i))}r.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(t){var e=t.item;if(this.currentShouldEnd=this.shouldEnd(t,e,this),this.updatePositions(t,!this.currentShouldEnd),this.currentShouldEnd&&this.validationCombo(e)){var n=this.graph;if(this.comboActiveState&&n.setItemState(e,this.comboActiveState,!1),this.targetCombo=e,this.onlyChangeComboSize)n.updateCombos();else{var r=e.getModel();this.targets.map((function(t){t.getModel().comboId!==r.id&&n.updateComboTree(t,r.id)})),n.updateCombo(e)}n.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(t){var e=this.graph;this.currentShouldEnd=this.shouldEnd(t,void 0,this),this.updatePositions(t,!this.currentShouldEnd),this.targets&&0!==this.targets.length&&this.currentShouldEnd&&(this.onlyChangeComboSize?this.updateParentCombos():this.targets.map((function(t){t.getModel().comboId&&e.updateComboTree(t)})))},onDropNode:function(t){if(this.targets&&0!==this.targets.length){var e=this,n=t.item,r=e.graph,i=n.getModel().comboId,o=i?r.findById(i):void 0;if(this.currentShouldEnd=this.shouldEnd(t,o,this),this.updatePositions(t,!this.currentShouldEnd),this.currentShouldEnd){if(this.onlyChangeComboSize)this.updateParentCombos();else if(i){var a=r.findById(i);e.comboActiveState&&r.setItemState(a,e.comboActiveState,!1),this.targets.map((function(t){var e=t.getModel();i!==e.comboId&&r.updateComboTree(t,i)})),r.updateCombo(a)}else this.targets.map((function(t){t.getModel().comboId&&r.updateComboTree(t)}));r.emit("dragnodeend",{items:this.targets,targetItem:n})}}},onDragEnter:function(t){var e=t.item;if(this.validationCombo(e)){var n=this.graph;this.comboActiveState&&n.setItemState(e,this.comboActiveState,!0)}},onDragLeave:function(t){var e=t.item;if(this.validationCombo(e)){var n=this.graph;this.comboActiveState&&n.setItemState(e,this.comboActiveState,!1)}},updatePositions:function(t,e){var n=this;this.targets&&0!==this.targets.length&&(this.get("enableDelegate")?this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:t,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos}):e||this.targets.map((function(e){return n.update(e,t)})):this.targets.map((function(r){return n.update(r,t,e)})))},update:function(t,e,n){var r=this.origin,i=t.get("model"),o=t.get("id");this.point[o]||(this.point[o]={x:i.x||0,y:i.y||0});var a=e.x-r.x+this.point[o].x,s=e.y-r.y+this.point[o].y;n&&(a+=r.x-e.x,s+=r.y-e.y);var u={x:a,y:s};this.get("updateEdge")?this.graph.updateItem(t,u,!1):t.updatePosition(u)},debounceUpdate:(0,x.debounce)((function(t){var e=t.targets,n=t.graph,r=t.point,i=t.origin,o=t.evt,a=t.updateEdge,s=t.onlyChangeComboSize,u=t.updateParentCombos;e.map((function(t){var e=t.get("model"),s=t.get("id");r[s]||(r[s]={x:e.x||0,y:e.y||0});var u={x:o.x-i.x+r[s].x,y:o.y-i.y+r[s].y};a?n.updateItem(t,u,!1):t.updatePosition(u)})),s&&u(n,e)}),50,!0),updateDelegate:function(t){var e=this.graph;if(this.delegateRect){var n=t.x-this.origin.x+this.originPoint.minX,r=t.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:n,y:r})}else{var i=e.get("group"),o=(0,x.deepMix)({},Gd.delegateStyle,this.delegateStyle),a=this.calculationGroupPosition(t),s=a.x,u=a.y,l=a.width,c=a.height,h=a.minX,d=a.minY;this.originPoint={x:s,y:u,width:l,height:c,minX:h,minY:d},this.delegateRect=i.addShape("rect",{attrs:(0,b.__assign)({width:l,height:c,x:s,y:u},o),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(t){var e=this.targets;0===e.length&&e.push(t.item);for(var n=1/0,r=-1/0,i=1/0,o=-1/0,a=0;a<e.length;a++){var s=e[a].getBBox(),u=s.minX,l=s.minY,c=s.maxX,h=s.maxY;u<n&&(n=u),l<i&&(i=l),c>r&&(r=c),h>o&&(o=h)}return{x:Math.floor(n),y:Math.floor(i),width:Math.ceil(r)-Math.floor(n),height:Math.ceil(o)-Math.floor(i),minX:n,minY:i}},updateParentCombos:function(t,e){var n=t||this.graph,r=e||this.targets,i={};null==r||r.forEach((function(t){var e=t.getModel().comboId;e&&(i[e]=n.findById(e))})),Object.values(i).forEach((function(t){t&&n.updateCombo(t)}))}};var Ny=null;const Py={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldClearStatusOnSecond:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return"mouseenter"===this.get("trigger")?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(t){try{var e=t.originalEvent.touches,n=e[0],r=e[1];if(n&&r)return;t.preventDefault()}catch(t){console.warn("Touch original event not exist!")}this.setAllItemStates(t)},clearOnTouchStart:function(t){try{var e=t.originalEvent.touches,n=e[0],r=e[1];if(n&&r)return;t.preventDefault()}catch(t){console.warn("Touch original event not exist!")}this.clearActiveState(t)},setAllItemStates:function(t){clearTimeout(this.timer),this.throttleSetAllItemStates(t,this)},clearActiveState:function(t){var e=this;this.shouldClearStatusOnSecond&&(Ny=null),this.timer=setTimeout((function(){e.throttleClearActiveState(t,e)}),50)},throttleSetAllItemStates:(0,x.throttle)((function(t,e){var n=t.item,r=e.graph;if(r&&!r.destroyed&&(e.item=n,e.shouldUpdate(t.item,{event:t,action:"activate"},e))){var i=e.shouldClearStatusOnSecond,o=n.getModel().id;if(Ny===o&&i)return e.throttleClearActiveState(t,e),void(Ny=null);for(var a=e.activeState,s=e.inactiveState,u=r.getNodes(),l=r.getCombos(),c=r.getEdges(),h=r.get("vedges"),d=u.length,f=l.length,p=c.length,m=h.length,g=e.inactiveItems||{},v=e.activeItems||{},y=0;y<d;y++){var b=u[y],x=b.getID(),w=b.hasState("selected");e.resetSelected&&w&&r.setItemState(b,"selected",!1),v[x]&&(r.setItemState(b,a,!1),delete v[x]),s&&!g[x]&&(r.setItemState(b,s,!0),g[x]=b)}for(y=0;y<f;y++){var _=l[y],S=_.getID();w=_.hasState("selected");e.resetSelected&&w&&r.setItemState(_,"selected",!1),v[S]&&(r.setItemState(_,a,!1),delete v[S]),s&&!g[S]&&(r.setItemState(_,s,!0),g[S]=_)}for(y=0;y<p;y++){v[k=(T=c[y]).getID()]&&(r.setItemState(T,a,!1),delete v[k]),s&&!g[k]&&(r.setItemState(T,s,!0),g[k]=T)}for(y=0;y<m;y++){var E=h[y],A=E.getID();v[A]&&(r.setItemState(E,a,!1),delete v[A]),s&&!g[A]&&(r.setItemState(E,s,!0),g[A]=E)}if(n&&!n.destroyed){s&&(r.setItemState(n,s,!1),delete g[n.getID()]),v[n.getID()]||(r.setItemState(n,a,!0),v[n.getID()]=n);var M=n.getEdges(),C=M.length;for(y=0;y<C;y++){var T,k=(T=M[y]).getID(),I=void 0,N=(I=T.getSource()===n?T.getTarget():T.getSource()).getID();s&&g[N]&&(r.setItemState(I,s,!1),delete g[N]),v[N]||(r.setItemState(I,a,!0),v[N]=I),g[k]&&(r.setItemState(T,s,!1),delete g[k]),v[k]||(r.setItemState(T,a,!0),v[k]=T),T.toFront()}}e.activeItems=v,e.inactiveItems=g,i&&(Ny=n.getModel().id),r.emit("afteractivaterelations",{item:t.item,action:"activate"})}}),50,{trailing:!0,leading:!0}),throttleClearActiveState:(0,x.throttle)((function(t,e){var n=e.get("graph");if(n&&!n.destroyed&&e.shouldUpdate(t.item,{event:t,action:"deactivate"},e)){var r=e.activeState,i=e.inactiveState,o=e.activeItems||{},a=e.inactiveItems||{};Object.values(o).filter((function(t){return!t.destroyed})).forEach((function(t){n.clearItemStates(t,r)})),Object.values(a).filter((function(t){return!t.destroyed})).forEach((function(t){n.clearItemStates(t,i)})),e.activeItems={},e.inactiveItems={},n.emit("afteractivaterelations",{item:t.item||e.get("item"),action:"deactivate"})}}),50,{trailing:!0,leading:!0})};var Oy=Math.min,Ly=Math.max,Ry=Math.abs,Dy="shift",zy=["drag","shift","ctrl","alt","control"];const Fy={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:Dy,includeEdges:!0,includeCombos:!1,selectOnCombo:!1,selectedEdges:[],selectedNodes:[],selectedCombos:[]}},getEvents:function(){return zy.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=Dy,console.warn("Behavior brush-select  trigger  'drag''shift''ctrl'  'alt'")),"drag"===this.trigger?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(t){var e=t.item,n=this.brush,r=this.selectOnCombo,i="combo"===(null==e?void 0:e.getType());i&&!r||!i&&e||("drag"===this.trigger||this.keydown)&&(this.selectedNodes&&0!==this.selectedNodes.length&&this.clearStates(),n||(n=this.createBrush()),this.originPoint={x:t.canvasX,y:t.canvasY},n.attr({width:0,height:0}),n.show(),this.dragging=!0)},onMouseMove:function(t){this.dragging&&("drag"===this.trigger||this.keydown)&&this.updateBrush(t)},onMouseUp:function(t){this.graph;(this.brush||this.dragging)&&("drag"===this.trigger||this.keydown)&&(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(t),this.dragging=!1)},clearStates:function(){var t=this.graph,e=this.selectedState,n=t.findAllByState("node",e),r=t.findAllByState("edge",e),i=t.findAllByState("combo",e);n.forEach((function(n){return t.setItemState(n,e,!1)})),r.forEach((function(n){return t.setItemState(n,e,!1)})),i.forEach((function(n){return t.setItemState(n,e,!1)})),this.selectedNodes=[],this.selectedEdges=[],this.selectedCombos=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges,this.selectedCombos),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},isBBoxCenterInRect:function(t,e,n,r,i){var o=t.getBBox();return o.centerX>=e&&o.centerX<=n&&o.centerY>=r&&o.centerY<=i},getSelectedNodes:function(t){var e=this,n=this,r=n.graph,i=n.originPoint,o=n.shouldUpdate,a=n.isBBoxCenterInRect,s=this.selectedState,u={x:t.x,y:t.y},l=r.getPointByCanvas(i.x,i.y),c=Oy(u.x,l.x),h=Ly(u.x,l.x),d=Oy(u.y,l.y),f=Ly(u.y,l.y),p=[],m=[];r.getNodes().forEach((function(t){if(t.isVisible()&&a(t,c,h,d,f)&&o(t,"select",e)){p.push(t);var n=t.getModel();m.push(n.id),r.setItemState(t,s,!0)}}));var g=[];this.includeEdges&&p.forEach((function(t){t.getOutEdges().forEach((function(t){if(t.isVisible()){var n=t.getModel(),i=n.source,a=n.target;m.includes(i)&&m.includes(a)&&o(t,"select",e)&&(g.push(t),r.setItemState(t,e.selectedState,!0))}}))}));var v=[];this.includeCombos&&r.getCombos().forEach((function(t){if(t.isVisible()&&a(t,c,h,d,f)&&o(t,"select",e)){v.push(t);var n=t.getModel();m.push(n.id),r.setItemState(t,s,!0)}})),this.selectedEdges=g,this.selectedNodes=p,this.selectedCombos=v,this.onSelect&&this.onSelect(p,g,v),r.emit("nodeselectchange",{selectedItems:{nodes:p,edges:g,combos:v},select:!0})},createBrush:function(){var t=this.graph.get("canvas").addShape("rect",{attrs:this.brushStyle,capture:!1,name:"brush-shape"});return this.brush=t,this.delegate=t,t},updateBrush:function(t){var e=this.originPoint;this.brush.attr({width:Ry(t.canvasX-e.x),height:Ry(t.canvasY-e.y),x:Oy(t.canvasX,e.x),y:Oy(t.canvasY,e.y)})},onKeyDown:function(t){var e=t.key;if(e){var n=this.trigger.toLowerCase(),r=e.toLowerCase();this.keydown=r===n||"control"===r&&"ctrl"===n||"ctrl"===r&&"control"===n}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}};var By="shift",Uy=["shift","ctrl","alt","control"];const jy={getDefaultCfg:function(){return{multiple:!0,trigger:By,selectedState:"selected",selectNode:!0,selectEdge:!1,selectCombo:!0}},getEvents:function(){var t=this;return Uy.indexOf(t.trigger.toLowerCase())>-1||(t.trigger=By,console.warn("Behavior click-select  trigger  'drag''shift''ctrl'  'alt'")),t.multiple?{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(t){var e=this,n=t.item;if(n&&!n.destroyed){var r=n.getType(),i=e.graph,o=e.keydown,a=e.multiple,s=e.shouldUpdate;if((0,e.shouldBegin)(t,e)){if(!o||!a){var u=i.findAllByState("node",e.selectedState).concat(i.findAllByState("edge",e.selectedState)).concat(i.findAllByState("combo",e.selectedState));(0,x.each)(u,(function(t){t!==n&&i.setItemState(t,e.selectedState,!1)}))}if(function(){switch(r){case"node":return e.selectNode;case"edge":return e.selectEdge;case"combo":return e.selectCombo;default:return!1}}())if(n.hasState(e.selectedState)){s(t,e)&&i.setItemState(n,e.selectedState,!1);l=i.findAllByState("node",e.selectedState),c=i.findAllByState("edge",e.selectedState),h=i.findAllByState("combo",e.selectedState);i.emit("nodeselectchange",{target:n,selectedItems:{nodes:l,edges:c,combos:h},select:!1})}else{s(t,e)&&i.setItemState(n,e.selectedState,!0);l=i.findAllByState("node",e.selectedState),c=i.findAllByState("edge",e.selectedState),h=i.findAllByState("combo",e.selectedState);i.emit("nodeselectchange",{target:n,selectedItems:{nodes:l,edges:c,combos:h},select:!0})}else{var l=i.findAllByState("node",e.selectedState),c=i.findAllByState("edge",e.selectedState),h=i.findAllByState("combo",e.selectedState);i.emit("nodeselectchange",{selectedItems:{nodes:l,edges:c,combos:h},select:!1})}}}},onCanvasClick:function(t){var e=this,n=this.graph;if((0,this.shouldBegin)(t,this)){var r=n.findAllByState("node",this.selectedState);(0,x.each)(r,(function(t){n.setItemState(t,e.selectedState,!1)}));var i=n.findAllByState("edge",this.selectedState);(0,x.each)(i,(function(t){n.setItemState(t,e.selectedState,!1)}));var o=n.findAllByState("combo",this.selectedState);(0,x.each)(o,(function(t){n.setItemState(t,e.selectedState,!1)})),n.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})}},onKeyDown:function(t){var e=t.key;e&&(e.toLowerCase()===this.trigger.toLowerCase()||"control"===e.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1}};var Vy=N,Hy=.05;const Gy={getDefaultCfg:function(){return this.isFireFox="firefox"===cf(),{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"},animate:!1,animateCfg:{duration:500}}},getEvents:function(){var t=this.fixSelectedItems;return t.fixState||(t.fixState="selected"),t.fixAll&&(t.fixLineWidth=!0,t.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(t){var e=t.originalEvent.touches,n=e[0],r=e[1];t.preventDefault(),r&&(this.shouldBegin&&!this.shouldBegin(t,this)||(this.startPoint={pageX:n.pageX,pageY:n.pageY},this.moveable=!0,r&&(this.endPoint={pageX:r.pageX,pageY:r.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1))},onTouchMove:function(t){if(this.moveable){t.preventDefault();var e=t.originalEvent.touches,n=e[0],r=e[1];if(r){this.endPoint||(this.endPoint={pageX:r.pageX,pageY:r.pageY});var i=function(t,e){return Math.hypot(e.x-t.x,e.y-t.y)},o=i({x:n.pageX,y:n.pageY},{x:r.pageX,y:r.pageY})/i({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),a=this.originScale*o;this.currentScale=a;var s=this.get("minZoom")||this.graph.get("minZoom");if(!(a>(this.get("maxZoom")||this.graph.get("maxZoom"))||a<s)){var u=this.get("animate"),l=this.get("animateCfg"),c=this.graph.get("canvas").getPointByClient(t.clientX,t.clientY);this.graph.zoomTo(a,{x:c.x,y:c.y},u,l),this.graph.emit("wheelzoom",t)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(t){var e=this,n=this.graph,r=this.fixSelectedItems;if((!this.shouldBegin||this.shouldBegin(t,this))&&this.shouldUpdate(t,this)){t.preventDefault();var i=n.get("canvas").getPointByClient(t.clientX,t.clientY),o=this.get("sensitivity"),a=n.getZoom(),s=a;s=a*(this.isFireFox?t.deltaY>0||t.wheelDelta<0?1-Hy*o:1/(1-Hy*o):t.wheelDelta<0?1-Hy*o:1/(1-Hy*o));var u=this.get("minZoom")||n.get("minZoom"),l=this.get("maxZoom")||n.get("maxZoom");if(s>l?s=l:s<u&&(s=u),this.get("enableOptimize")){var c=this.get("optimizeZoom"),h=this.get("optimized"),d=n.getNodes(),f=n.getEdges(),p=d.length,m=f.length;if(!h){for(var g=0;g<p;g++){if(!(C=d[g]).destroyed)for(var v=($=C.get("group").get("children")).length,y=0;y<v;y++){(z=$[y]).destoryed||z.get("isKeyShape")||(z.set("ori-visibility",z.get("ori-visibility")||z.get("visible")),z.hide())}}for(var b=0;b<m;b++)for(v=($=(q=f[b]).get("group").get("children")).length,y=0;y<v;y++){(z=$[y]).set("ori-visibility",z.get("ori-visibility")||z.get("visible")),z.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var w=setTimeout((function(){var t=n.getZoom();if(e.get("optimized")){e.set("optimized",!1);for(var r=0;r<p;r++){var i=d[r],o=(l=i.get("group").get("children")).length;if(t<c){var a=(g=i.getKeyShape()).get("ori-visibility");g.set("ori-visibility",void 0),a&&g.show()}else for(var s=0;s<o;s++){a=(v=l[s]).get("ori-visibility");v.set("ori-visibility",void 0),!v.get("visible")&&a&&a&&v.show()}}for(var u=0;u<m;u++){var l,h=f[u];o=(l=h.get("group").get("children")).length;if(t<c){var g;a=(g=h.getKeyShape()).get("ori-visibility");g.set("ori-visibility",void 0),a&&g.show()}else for(s=0;s<o;s++){var v;if(!(v=l[s]).get("visible")){a=v.get("ori-visibility");v.set("ori-visibility",void 0),a&&v.show()}}}}}),100);this.set("timeout",w)}if(a<=1){var _=void 0,S=void 0;if(r.fixAll||r.fixLineWidth||r.fixLabel){_=n.findAllByState("node",r.fixState),S=n.findAllByState("edge",r.fixState);for(var E=a/s,A=_.length,M=0;M<A;M++){var C,T=(C=_[M]).getContainer(),k=C.getModel(),I=C.getOriginStyle(),N=C.getStateStyle(r.fixState),P=C.get("shapeFactory").getShape(k.type).getStateStyle(r.fixState,C)[r.fixState];if(r.fixAll){if(s<=1){var O=(0,x.clone)(T.getMatrix());O||(O=[1,0,0,0,1,0,0,0,1]);var L=C.getModel(),R=L.x,D=L.y;O=Vy(O,[["t",-R,-D],["s",E,E],["t",R,D]]),T.setMatrix(O)}}else for(v=($=T.get("children")).length,y=0;y<v;y++){var z=$[y],F=void 0,B=void 0;if(r.fixLabel)if("text"===z.get("type")){F=z.attr("fontSize")||12;var U=N[z.get("name")],j=P[z.get("name")],V=U?U.fontSize:12,H=j?j.fontSize:12,G=V||H||12;if(s<=1&&z.attr("fontSize",G/s),B)break}if(r.fixLineWidth&&z.get("isKeyShape")){B=z.attr("lineWidth")||0;var W=N.lineWidth||P.lineWidth||I.lineWidth||0;if(s<=1&&z.attr("lineWidth",W/s),F)break}}}for(var X=S.length,Y=0;Y<X;Y++){var q,$=(T=(q=S[Y]).getContainer()).get("children");for(k=q.getModel(),N=q.getStateStyle(r.fixState),P=q.get("shapeFactory").getShape(k.type).getStateStyle(r.fixState,q)[r.fixState],v=$.length,y=0;y<v;y++){z=$[y],F=void 0,B=void 0;if(r.fixLabel||r.fixAll)if("text"===z.get("type")){F=z.attr("fontSize")||12;U=N[z.get("name")],j=P[z.get("name")],V=U?U.fontSize:12,H=j?j.fontSize:12,G=V||H||12;if(s<=1&&z.attr("fontSize",G/s),B)break}if((r.fixLineWidth||r.fixAll)&&z.get("isKeyShape")){B=z.attr("lineWidth")||0;W=N.lineWidth||P.lineWidth||1;if(s<=1&&z.attr("lineWidth",W/s),F)break}}}}}var K=this.get("animate"),Z=this.get("animateCfg");n.zoomTo(s,{x:i.x,y:i.y},K,Z),n.emit("wheelzoom",t)}}},Wy={onMouseEnter:function(t){var e=t.item;this.currentTarget=e,this.showTooltip(t),this.graph.emit("tooltipchange",{item:t.item,action:"show"})},onMouseMove:function(t){this.shouldUpdate(t,this)?this.currentTarget&&t.item===this.currentTarget&&this.updatePosition(t):this.hideTooltip()},onMouseLeave:function(t){this.shouldEnd(t,this)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(t){var e=this.container;if(t.item&&!t.item.destroyed){e||(e=this.createTooltip(this.graph.get("canvas")),this.container=e);var n=this.formatText(t.item.get("model"),t);e.innerHTML=n,Gf(this.container,{visibility:"visible"}),this.updatePosition(t)}},hideTooltip:function(){Gf(this.container,{visibility:"hidden"})},updatePosition:function(t){var e=this.get("shouldBegin"),n=this,r=n.width,i=n.height,o=n.container,a=n.graph;if(e(t,this)){var s=a.getPointByClient(t.clientX,t.clientY),u=a.getCanvasByPoint(s.x,s.y),l=u.x,c=u.y,h=o.getBoundingClientRect();l>r/2?l-=h.width:l+=this.offset,c>i/2?c-=h.height:c+=this.offset;var d="".concat(l,"px"),f="".concat(c,"px");Gf(this.container,{left:d,top:f,visibility:"visible"})}else Gf(o,{visibility:"hidden"})},createTooltip:function(t){var e=t.get("el");e.style.position="relative";var n=Uh('<div class="g6-tooltip g6-'.concat(this.item,'-tooltip"></div>'));return e.parentNode.appendChild(n),Gf(n,{position:"absolute",visibility:"visible"}),this.width=t.get("width"),this.height=t.get("height"),this.container=n,this.graph.get("tooltips").push(n),n}},Xy=(0,b.__assign)({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(t){return t.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},Wy),Yy=(0,b.__assign)({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(t){return"source: ".concat(t.source," target: ").concat(t.target)}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},Wy);var qy="click",$y=["click","dblclick"];const Ky={getDefaultCfg:function(){return{trigger:qy,onChange:function(){}}},getEvents:function(){var t,e;return $y.includes(this.trigger)?e=this.trigger:(e=qy,console.warn("Behavior collapse-expand  trigger  'click'  'dblclick'")),(t={})["node:".concat(e)]="onNodeClick",t.touchstart="onNodeClick",t},onNodeClick:function(t){var e=this;if("click"===this.trigger){if(this.timer)return clearTimeout(this.timer),void(this.timer=0);this.timer=setTimeout((function(){e.toggle(t),clearTimeout(e.timer),e.timer=0}),200)}else this.toggle(t)},toggle:function(t){var e=t.item;if(e){var n=this.graph.findDataById(e.get("id"));if(n){var r=n.children;if(r&&0!==r.length){var i=!n.collapsed;this.shouldBegin(t,i,this)&&(n.collapsed=i,e.getModel().collapsed=i,this.graph.emit("itemcollapsed",{item:t.item,collapsed:i}),this.shouldUpdate(t,i,this)&&(this.onChange(e,i,this),this.graph.layout()))}}}}};var Zy=hf.calculationItemsBBox,Qy=function t(e,n){if(!1!==n(e)&&e){var r=e.get("combos");if(0===r.length)return!1;(0,x.each)(r,(function(e){t(e,n)}))}};const Jy={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected",enableStack:!0}},getEvents:function(){return{"combo:mousedown":"onMouseDown","combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(t){var e=t.item;return!(!e||e.destroyed)&&(!!this.shouldUpdate(t,this)&&"combo"===e.getType())},onMouseDown:function(t){this.origin={x:t.x,y:t.y}},onDragStart:function(t){var e=this,n=this.graph,r=t.item;if(this.currentShouldEnd=!0,this.validationCombo(t)){this.targets=[];var i=n.findAllByState("combo",this.selectedState),o=r.get("id"),a=i.filter((function(t){var e=t.get("id");return o===e}));0===a.length?this.targets.push(r):this.targets=i;var s=[];this.targets.forEach((function(t){var e=t.getModel(),n=e.x,r=e.y,i=e.id;s.push({x:n,y:r,id:i})})),this.set("beforeDragItems",s),this.activeState&&this.targets.map((function(t){var r=t.getModel();if(r.parentId){var i=n.findById(r.parentId);i&&n.setItemState(i,e.activeState,!0)}})),this.point={},this.originPoint={},this.currentItemChildCombos=[],Qy(r,(function(t){if(t.destroyed)return!1;var n=t.getModel();return e.currentItemChildCombos.push(n.id),!0}))}},onDrag:function(t){var e=this;if(this.origin&&this.validationCombo(t))if(this.enableDelegate)this.updateDelegate(t);else{if(this.activeState){var n=this.graph,r=t.item,i=r.getModel(),o=n.getCombos(),a=r.getBBox(),s=a.centerX,u=a.centerY,l=a.width,c=o.filter((function(t){var n=t.getModel();return i.parentId,n.id!==i.id&&!e.currentItemChildCombos.includes(n.id)}));c.map((function(t){var r=t.getBBox(),i=r.centerX,o=r.centerY,a=r.width,c=s-i,h=u-o,d=2*Math.sqrt(c*c+h*h);l+a-d>.8*l?n.setItemState(t,e.activeState,!0):n.setItemState(t,e.activeState,!1)}))}(0,x.each)(this.targets,(function(n){e.updateCombo(n,t)})),this.onlyChangeComboSize&&this.updateParentCombos()}},updatePositions:function(t,e){var n=this;(this.enableDelegate||e)&&(0,x.each)(this.targets,(function(r){n.updateCombo(r,t,e)}))},onDrop:function(t){var e=this,n=t.item;if(this.currentShouldEnd=this.shouldEnd(t,n,this),this.updatePositions(t,!this.currentShouldEnd),this.currentShouldEnd&&n&&this.targets&&!n.destroyed){var r=this.graph,i=n.getModel();this.targets.map((function(t){t.getModel().parentId!==i.id?(e.activeState&&r.setItemState(n,e.activeState,!1),e.onlyChangeComboSize?r.updateCombo(t):r.updateComboTree(t,i.id,!1)):r.updateCombo(n)})),this.end(n,t),this.endComparison=!0}},onNodeDrop:function(t){var e=this;if(this.targets&&0!==this.targets.length){var n=this.graph,r=t.item.getModel().comboId,i=r?n.findById(r):void 0;if(this.currentShouldEnd=this.shouldEnd(t,i,this),this.updatePositions(t,!this.currentShouldEnd),this.currentShouldEnd){var o;if(r){if(this.activeState){var a=n.findById(r);n.setItemState(a,this.activeState,!1)}this.targets.map((function(t){e.onlyChangeComboSize?n.updateCombo(t):r!==t.getID()&&(o=n.findById(r),r!==t.getModel().parentId&&n.updateComboTree(t,r,!1))}))}else this.targets.map((function(t){e.onlyChangeComboSize?n.updateCombo(t):t.getModel().comboId&&n.updateComboTree(t,void 0,!1)}));this.endComparison=!0,this.end(o,t)}}},onDragEnter:function(t){if(this.origin&&this.validationCombo(t)){var e=t.item,n=this.graph;this.activeState&&n.setItemState(e,this.activeState,!0)}},onDragLeave:function(t){if(this.origin&&this.validationCombo(t)){var e=t.item,n=this.graph;this.activeState&&n.setItemState(e,this.activeState,!1)}},onDragEnd:function(t){if(this.targets&&0!==this.targets.length){var e=t.item;this.currentShouldEnd&&this.updatePositions(t);var n=this.getParentCombo(e.getModel().parentId),r=this.graph;n&&this.activeState&&r.setItemState(n,this.activeState,!1),this.end(void 0,t)}},end:function(t,e){var n=this;if(this.origin){var r=this.graph;if(this.delegateShape)r.get("delegateGroup").clear(),this.delegateShape=null;if(t&&this.activeState&&r.setItemState(t,this.activeState,!1),!t){var i=r.get("enabledStack")&&this.enableStack,o={before:{nodes:[],edges:[],combos:[].concat(this.get("beforeDragItems"))},after:{nodes:[],edges:[],combos:[]}};this.targets.map((function(t){if(n.onlyChangeComboSize){r.updateCombo(t);var e=t.getModel(),a=e.x,s=e.y,u=e.id;o.after.combos.push({x:a,y:s,id:u}),r.pushStack("update",o)}else r.updateComboTree(t,void 0,i)}))}this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(t,e,n){var r=this;if(void 0===n&&(n={}),!1!==e(t,n)&&t){var i=t.get("combos");(0,x.each)(i,(function(t){r.traverse(t,e,n)}));var o=t.get("nodes");(0,x.each)(o,(function(t){r.traverse(t,e,n)}))}},updateCombo:function(t,e,n){this.updateSingleItem(t,e,n);var r={};this.traverse(t,(function(t,e){return!t.destroyed&&(t.getEdges().forEach((function(t){return e[t.getID()]=t})),!0)}),r),Object.values(r).forEach((function(t){return t.refresh()}))},updateSingleItem:function(t,e,n){var r=this.origin,i=this.graph,o=t.getModel(),a=t.get("id");this.point[a]||(this.point[a]={x:o.x,y:o.y});var s=e.x-r.x+this.point[a].x,u=e.y-r.y+this.point[a].y;n&&(s+=r.x-e.x,u+=r.y-e.y),i.updateItem(t,{x:s,y:u},!1)},getParentCombo:function(t){var e=this.graph;if(t){var n=e.findById(t);if(n)return n}},updateDelegate:function(t){var e=this.graph;if(this.delegateShape){var n=t.x-this.origin.x+this.originPoint.minX,r=t.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:n,y:r})}else{var i=e.get("delegateGroup"),o=null,a=(o=this.targets.length>1?Zy(this.targets):this.targets[0].getBBox()).x,s=o.y,u=o.width,l=o.height,c=o.minX,h=o.minY;this.originPoint={x:a,y:s,width:u,height:l,minX:c,minY:h};var d=(0,b.__assign)((0,b.__assign)({},Gd.delegateStyle),this.delegateStyle);this.delegateShape=i.addShape("rect",{attrs:(0,b.__assign)({width:o.width,height:o.height,x:o.x,y:o.y},d),name:"combo-delegate-shape"}),this.delegateShape.set("capture",!1),this.delegate=this.delegateShape}},updateParentCombos:function(){var t=this.graph,e=this.targets,n={};null==e||e.forEach((function(e){var r=e.getModel().parentId;r&&(n[r]=t.findById(r))})),Object.values(n).forEach((function(e){e&&t.updateCombo(e)}))}};var tb="dblclick",eb=["click","dblclick"];const nb={getDefaultCfg:function(){return{trigger:tb,relayout:!0}},getEvents:function(){var t,e;return eb.includes(this.trigger)?e=this.trigger:(e=tb,console.warn("Behavior collapse-expand-group  trigger  'click'  'dblclick'")),(t={})["combo:".concat(e)]="onComboClick",t},onComboClick:function(t){var e=t.item,n=this.graph,r=this.relayout;if(e&&!e.destroyed&&"combo"===e.getType()){var i=e.getModel().id;i&&(n.collapseExpandCombo(i),r&&n.get("layout")?n.layout():n.refreshPositions())}}};var rb=hf.isPolygonsIntersect,ib=hf.pathToPoints,ob="shift",ab=["drag","shift","ctrl","alt","control"];const sb={getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},shouldDeselect:void 0,selectedState:"selected",trigger:ob,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return ab.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=ob,console.warn("Behavior lasso-select  trigger  'drag''shift''ctrl'  'alt'")),"drag"===this.trigger?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(t){var e=this.lasso;t.item||("drag"===this.trigger||this.keydown)&&(this.selectedNodes&&0!==this.selectedNodes.length&&this.clearStates("dragstart"),e||(e=this.createLasso()),this.dragging=!0,this.originPoint={x:t.x,y:t.y},this.points.push(this.originPoint),e.show())},onDragMove:function(t){this.dragging&&("drag"===this.trigger||this.keydown)&&(this.points.push({x:t.x,y:t.y}),this.updateLasso(t))},onDragEnd:function(t){(this.lasso||this.dragging)&&("drag"===this.trigger||this.keydown)&&(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var t=this.points,e=[];return t.length&&(t.forEach((function(t,n){0===n?e.push(["M",t.x,t.y]):e.push(["L",t.x,t.y])})),e.push(["L",t[0].x,t[0].y])),e},clearStates:function(t){void 0===t&&(t="canvas:click");var e=this,n=e.graph,r=e.selectedState,i=e.shouldDeselect,o=n.findAllByState("node",r),a=n.findAllByState("edge",r);i&&!i({action:t,nodes:o,edges:a})||(o.forEach((function(t){return n.setItemState(t,r,!1)})),a.forEach((function(t){return n.setItemState(t,r,!1)}))),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],n.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var t=this,e=this.graph,n=this.shouldUpdate,r=this.points.map((function(t){return[e.getCanvasByPoint(t.x,t.y).x,e.getCanvasByPoint(t.x,t.y).y]})),i=this.selectedState,o=[],a=[];e.getNodes().forEach((function(s){if(s.isVisible()&&function(t,e){var n,r=t.getKeyShape();if("path"===t.get("type"))n=ib(r.attr("path"));else{var i=r.getCanvasBBox();n=[[i.minX,i.minY],[i.maxX,i.minY],[i.maxX,i.maxY],[i.minX,i.maxY]]}return rb(e,n)}(s,r)&&n(s,"select",t)){o.push(s);var u=s.getModel();a.push(u.id),e.setItemState(s,i,!0)}}));var s=[];this.includeEdges&&o.forEach((function(r){r.getOutEdges().forEach((function(r){if(r.isVisible()){var i=r.getModel(),o=i.source,u=i.target;a.includes(o)&&a.includes(u)&&n(r,"select",t)&&(s.push(r),e.setItemState(r,t.selectedState,!0))}}))})),this.selectedEdges=s,this.selectedNodes=o,this.onSelect&&this.onSelect(o,s),e.emit("nodeselectchange",{selectedItems:{nodes:o,edges:s},select:!0})},createLasso:function(){var t=this.graph.get("delegateGroup").addShape("path",{attrs:(0,b.__assign)({path:[]},this.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=t,this.delegate=t,this.points=[],t},updateLasso:function(t){this.lasso.attr({path:this.getLassoPath()})},onKeyDown:function(t){var e=t.key;e&&(e.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}};var ub="click",lb=["click","drag"],cb=void 0,hb=["shift","ctrl","control","alt","meta",void 0];const db={getDefaultCfg:function(){return{trigger:ub,key:cb,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var t,e=this;return lb.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=ub,console.warn("Behavior create-edge  trigger  'click''drag'")),e.key&&-1===hb.indexOf(e.key.toLowerCase())&&(e.trigger=cb,console.warn("Behavior create-edge  key  'shift''ctrl''alt''control' undefined")),"drag"===e.trigger?t={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:"click"===e.trigger&&(t={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),e.key&&(t.keydown="onKeyDown",t.keyup="onKeyUp"),t},onDragEnd:function(t){var e=this;if(!e.key||e.keydown){var n=t.item;n&&n.getID()!==e.source&&"node"===n.getType()||e.cancelCreating({item:e.edge,x:t.x,y:t.y})}},onClick:function(t){var e=this;if(!e.key||e.keydown){var n=t.item,r=e.graph,i=n.getModel(),o=e.getEdgeConfig;if(e.addingEdge&&e.edge){if(!e.shouldEnd(t,e))return;var a=void 0;a=o&&(0,x.isFunction)(o)?o({source:e.source,target:i.id},e):e.edgeConfig;var s=(0,b.__assign)({target:i.id},a);if(e.source===i.id&&(s.type="loop"),r.emit("beforecreateedge",{}),r.updateItem(e.edge,s,!1),r.get("enabledStack")){var u=(0,b.__assign)((0,b.__assign)({},e.edge.getModel()),{itemType:"edge"}),l={};l.edges=[u],r.pushStack("add",{before:{},after:l})}r.emit("aftercreateedge",{edge:e.edge}),e.edge.getKeyShape().set("capture",!0),e.edge=null,e.addingEdge=!1}else{if(!e.shouldBegin(t,e))return;a=void 0;a=o&&(0,x.isFunction)(o)?o({source:i.id,target:i.id},e):e.edgeConfig,e.edge=r.addItem("edge",(0,b.__assign)({source:i.id,target:i.id},a),!1),e.source=i.id,e.addingEdge=!0,e.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(t){var e=this;if(!e.key||e.keydown){e.edge&&e.edge.destroyed&&e.cancelCreating({item:e.edge});var n={x:t.x,y:t.y};e.graph.findById(e.source)?e.addingEdge&&e.edge&&e.graph.updateItem(e.edge,{target:n},!1):e.addingEdge=!1}},cancelCreating:function(t){var e,n,r=this;if(!r.key||r.keydown){var i=r.graph,o=t.item;return r.addingEdge&&(r.edge===o||(null===(n=null===(e=t.target)||void 0===e?void 0:e.isCanvas)||void 0===n?void 0:n.call(e)))?(r.edge&&!r.edge.destroyed&&i.removeItem(r.edge,!1),r.edge=null,void(r.addingEdge=!1)):void 0}},onKeyDown:function(t){var e=this,n=t.key;n&&(n.toLowerCase()===e.key.toLowerCase()?e.keydown=!0:e.keydown=!1)},onKeyUp:function(){var t=this;t.addingEdge&&t.edge&&(t.graph.removeItem(t.edge,!1),t.addingEdge=!1,t.edge=null),this.keydown=!1}};var fb="ctrl",pb=["shift","ctrl","alt","control"];const mb={getDefaultCfg:function(){return{trigger:fb,combinedKey:"1",functionName:"fitView",functionParams:[]}},getEvents:function(){return pb.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=fb,console.warn("Behavior shortcuts-fit-view  trigger  '".concat(this.trigger,"'  'drag''shift''ctrl'  'alt'"))),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(t){var e=t.key;if(e){var n=this.trigger.toLowerCase(),r=e.toLowerCase();this.triggerKeydown||(this.triggerKeydown=r===n||"control"===r&&"ctrl"===n||"ctrl"===r&&"control"===n);var i=this.graph;if(!i[this.functionName])return console.warn("Behavior shortcuts-fit-view  functionName  '".concat(this.functionName,"'  Graph ")),{};if(!this.triggerKeydown||this.combinedKey){var o=this.combinedKey.toLowerCase();this.triggerKeydown&&(r===o||"control"===r&&"ctrl"===o||"ctrl"===r&&"control"===o)&&(this.functionParams&&this.functionParams.length?i[this.functionName].apply(i,this.functionParams):i[this.functionName]())}else this.functionParams&&this.functionParams.length?i[this.functionName].apply(i,this.functionParams):i[this.functionName]()}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}};var gb=["shift","ctrl","alt","control","meta"];const vb={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0,allowDragOnItem:!0}},getEvents:function(){return this.zoomKey&&-1!==gb.indexOf(this.zoomKey)||(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(t){var e=this;if(this.allowDrag(t)){var n=this.graph,r=Array.isArray(this.zoomKey)?[].concat(this.zoomKey):[this.zoomKey];if(r.includes("control")&&r.push("ctrl"),r.some((function(e){return t["".concat(e,"Key")]}))){var i=n.get("canvas").getPointByClient(t.clientX,t.clientY),o=n.getZoom();t.wheelDelta>0?o+=.05*o:o-=.05*o,n.zoomTo(o,{x:i.x,y:i.y})}else{var a=t.deltaX||t.movementX,s=t.deltaY||t.movementY;!s&&navigator.userAgent.indexOf("Firefox")>-1&&(s=125*-t.wheelDelta/3);var u=this.graph.get("width"),l=this.graph.get("height"),c=this.graph.get("canvas").getCanvasBBox(),h=this.scalableRange,d=this.scalableRange;h<1&&h>-1&&(h*=u,d*=l);var f=c.minX,p=c.maxX,m=c.minY,g=c.maxY;a>0?p<-h?a=0:p-a<-h&&(a=p+h):a<0&&(f>u+h?a=0:f-a>u+h&&(a=f-(u+h))),s>0?g<-d?s=0:g-s<-d&&(s=g+d):s<0&&(m>l+d?s=0:m-s>l+d&&(s=m-(l+d))),"x"===this.get("direction")?s=0:"y"===this.get("direction")&&(a=0),n.translate(-a,-s)}if(t.preventDefault(),this.get("enableOptimize")){var v=this.get("optimizeZoom"),y=this.get("optimized"),b=n.getNodes(),x=n.getEdges(),w=b.length,_=x.length;if(!y){for(var S=0;S<w;S++){var E=b[S];if(!E.destroyed)for(var A=(T=E.get("group").get("children")).length,M=0;M<A;M++){(k=T[M]).destoryed||k.get("isKeyShape")||(k.set("ori-visibility",k.get("ori-visibility")||k.get("visible")),k.hide())}}for(var C=0;C<_;C++){var T;for(A=(T=x[C].get("group").get("children")).length,M=0;M<A;M++){var k;(k=T[M]).set("ori-visibility",k.get("ori-visibility")||k.get("visible")),k.hide()}}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var I=setTimeout((function(){var t=n.getZoom();if(e.get("optimized")){e.set("optimized",!1);for(var r=0;r<w;r++){var i=b[r],o=(l=i.get("group").get("children")).length;if(t<v)(s=(c=i.getKeyShape()).get("ori-visibility"))&&c.show();else for(var a=0;a<o;a++){var s=(d=l[a]).get("ori-visibility");!d.get("visible")&&s&&s&&d.show()}}for(var u=0;u<_;u++){var l,c,h=x[u];o=(l=h.get("group").get("children")).length;if(t<v)(s=(c=h.getKeyShape()).get("ori-visibility"))&&c.show();else for(a=0;a<o;a++){var d;if(!(d=l[a]).get("visible"))(s=d.get("ori-visibility"))&&d.show()}}}}),100);this.set("timeout",I)}}},allowDrag:function(t){var e,n,r=t.target,i=r&&r.isCanvas&&r.isCanvas();if((0,x.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!i)return!1;if((0,x.isObject)(this.allowDragOnItem)){var o=this.allowDragOnItem,a=o.node,s=o.edge,u=o.combo,l=null===(n=null===(e=t.item)||void 0===e?void 0:e.getType)||void 0===n?void 0:n.call(e);if(!a&&"node"===l)return!1;if(!s&&"edge"===l)return!1;if(!u&&"combo"===l)return!1}return!0}};var yb={"drag-canvas":ky,"zoom-canvas":Gy,"drag-node":Iy,"activate-relations":Py,"brush-select":Fy,"click-select":jy,"lasso-select":sb,tooltip:Xy,"edge-tooltip":Yy,"collapse-expand":Ky,"drag-combo":Jy,"collapse-expand-combo":nb,"create-edge":db,"shortcuts-call":mb,"scroll-canvas":vb};(0,x.each)(yb,(function(t,e){ll(e,t)}));var bb=(0,b.__assign)((0,b.__assign)({},r),hl),xb=Wv.Fisheye,wb=Wv.TimeBar,_b=Wv.ImageMinimap,Sb=Wv.EdgeFilterLens,Eb=Wv.SnapLine,Ab=Wv.Annotation;const Mb={version:(Gd.version,"4.8.23"),Graph:Df,TreeGraph:Hf,Util:hf,Layout:Zd.Layouts,TreeLayout:ff,registerLayout:function(t,e){e.isCustomLayout=!0,Zd.Layouts[t]=(0,Zd.registerLayout)(t,e)},Global:Gd,registerBehavior:ll,registerCombo:ul,registerEdge:sl,registerNode:al,Minimap:Wv.Minimap,Grid:Wv.Grid,Bundling:Wv.Bundling,Menu:Wv.Menu,ToolBar:Wv.ToolBar,Tooltip:Wv.Tooltip,Legend:Wv.Legend,TimeBar:wb,SnapLine:Eb,Fisheye:xb,ImageMinimap:_b,EdgeFilterLens:Sb,Annotation:Ab,Algorithm:bb,Arrow:$u,Marker:Ku,Shape:Zu},Cb=Mb},46888:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Graph:()=>w,GraphWithEvent:()=>T,algorithm:()=>r,comparision:()=>o,essence:()=>i,generate:()=>s});var r={};n.r(r),n.d(r,{components:()=>O,dfs:()=>R,dijkstra:()=>U,dijkstraAll:()=>j,findCycles:()=>H,floydWarshall:()=>it,isAcyclic:()=>tt,postorder:()=>et,preorder:()=>nt,prim:()=>P,tarjan:()=>V,topsort:()=>J});var i={};n.r(i),n.d(i,{hasSelfLoop:()=>bt,isGraph:()=>gt,isNullGraph:()=>yt,isSimpleGraph:()=>vt});var o={};n.r(o),n.d(o,{containAllSameEdges:()=>ht,containAllSameNodes:()=>ct,containSameEdges:()=>at,containSameNodes:()=>ot,getSameEdges:()=>ut,getSameNodes:()=>st,isGraphComplement:()=>xt,isGraphContainsAnother:()=>ft,isGraphOptionSame:()=>lt,isGraphSame:()=>dt});var a,s={};function u(t,e){var n=t.get(e)||0;t.set(e,n+1)}function l(t,e){var n=t.get(e);void 0!==n&&((n-=1)>0?t.set(e,n):t.delete(e))}function c(t,e,n,r){var i=String(e),o=String(n);if(!t&&i>o){var s=i;i=o,o=s}return i+a.EDGE_KEY_DELIM+o+a.EDGE_KEY_DELIM+(void 0===r?a.DEFAULT_EDGE_NAME:r)}function h(t,e,n,r){var i=String(e),o=String(n),a={v:e,w:n};if(!t&&i>o){var s=a.v;a.v=a.w,a.w=s}return void 0!==r&&(a.name=r),a}function d(t,e){return c(t,e.v,e.w,e.name)}function f(t){return"function"==typeof t}n.r(s),n.d(s,{getGraphComplement:()=>wt}),function(t){t.DEFAULT_EDGE_NAME="\0",t.GRAPH_NODE="\0",t.EDGE_KEY_DELIM=""}(a||(a={}));var p=function(t){return t.nodes().map((function(e){var n={id:e,value:t.node(e),parent:t.parent(e)};return void 0===n.value&&delete n.value,void 0===n.parent&&delete n.parent,n}))},m=function(t){return t.edges().map((function(e){var n=t.edge(e),r={v:e.v,w:e.w,value:n,name:e.name};return void 0===r.name&&delete r.name,void 0===r.value&&delete r.value,r}))};function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var x={compound:!1,multigraph:!1,directed:!0},w=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=a.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return e.directed},this.isMultigraph=function(){return e.multigraph},this.isCompound=function(){return e.compound},this.setGraph=function(t){return e.label=t,e},this.graph=function(){return e.label},this.setDefaultNodeLabel=function(t){return f(t)?e.defaultNodeLabelFn=t:e.defaultNodeLabelFn=function(){return t},e},this.nodeCount=function(){return e.nodeCountNum},this.node=function(t){return e.nodesLabelMap.get(t)},this.nodes=function(){return Array.from(e.nodesLabelMap.keys())},this.sources=function(){return e.nodes().filter((function(t){var n;return!(null===(n=e.inEdgesMap.get(t))||void 0===n?void 0:n.size)}))},this.sinks=function(){return e.nodes().filter((function(t){var n;return!(null===(n=e.outEdgesMap.get(t))||void 0===n?void 0:n.size)}))},this.setNodes=function(t,n){return t.map((function(t){return e.setNode(t,n)})),e},this.hasNode=function(t){return e.nodesLabelMap.has(t)},this.checkCompound=function(){if(!e.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(t){if(e.isCompound()){var n,r=null===(n=e.parentMap)||void 0===n?void 0:n.get(t);if(r!==e.GRAPH_NODE)return r}},this.removeFromParentsChildList=function(t){var n=e.parentMap.get(t);e.childrenMap.get(n).delete(t)},this.setParent=function(t,n){var r,i;e.checkCompound();for(var o=void 0===n?e.GRAPH_NODE:n,a=e.parent(o);a;){if(t===a)throw new Error("Setting "+n+" as parent of "+t+" would create a cycle");a=e.parent(a)}n&&e.setNode(n),e.setNode(t),e.removeFromParentsChildList(t),null===(r=e.parentMap)||void 0===r||r.set(t,o);var s=e.childrenMap.get(o);return s.set(t,!0),null===(i=e.childrenMap)||void 0===i||i.set(o,s),e},this.children=function(t){var n=void 0===t?e.GRAPH_NODE:t;if(e.isCompound()){var r,i=null===(r=e.childrenMap)||void 0===r?void 0:r.get(n);return i?Array.from(i.keys()):void 0}return n===e.GRAPH_NODE?e.nodes():t&&e.hasNode(t)?[]:void 0},this.predecessors=function(t){var n=e.predecessorsMap.get(t);return n?Array.from(n.keys()):void 0},this.successors=function(t){var n=e.successorsMap.get(t);return n?Array.from(n.keys()):void 0},this.neighbors=function(t){var n;if(e.hasNode(t))return Array.from(new Set(null===(n=e.predecessors(t))||void 0===n?void 0:n.concat(e.successors(t))))},this.isLeaf=function(t){var n,r;return e.isDirected()?!(null===(r=e.successors(t))||void 0===r?void 0:r.length):!(null===(n=e.neighbors(t))||void 0===n?void 0:n.length)},this.filterNodes=function(n){var r=e.directed,i=e.multigraph,o=e.compound,a=new t({directed:r,multigraph:i,compound:o});if(a.setGraph(e.graph()),e.nodes().forEach((function(t){n(t)&&a.setNode(t,e.node(t))})),e.edges().forEach((function(t){a.hasNode(t.v)&&a.hasNode(t.w)&&a.setEdgeObj(t,e.edge(t))})),o){a.nodes().forEach((function(t){a.setParent(t,function(t){for(var n=e.parent(t);void 0!==n&&!a.hasNode(n);)n=e.parent(n);return n}(t))}))}return a},this.setDefaultEdgeLabel=function(t){return f(t)?e.defaultEdgeLabelFn=t:e.defaultEdgeLabelFn=function(){return t},e},this.edgeCount=function(){return e.edgeCountNum},this.setEdgeObj=function(t,n){return e.setEdge(t.v,t.w,n,t.name)},this.setPath=function(t,n){return t.reduce((function(t,r){return e.setEdge(t,r,n),r})),e},this.edgeFromArgs=function(t,n,r){return e.edge({v:t,w:n,name:r})},this.edge=function(t){return e.edgesLabelsMap.get(d(e.isDirected(),t))},this.hasEdge=function(t,n,r){return e.edgesLabelsMap.has(d(e.isDirected(),{v:t,w:n,name:r}))},this.removeEdgeObj=function(t){var n=t.v,r=t.w,i=t.name;return e.removeEdge(n,r,i)},this.edges=function(){return Array.from(e.edgesMap.values())},this.inEdges=function(t,n){var r=e.inEdgesMap.get(t);if(r)return Array.from(r.values()).filter((function(t){return!n||t.v===n}))},this.outEdges=function(t,n){var r=e.outEdgesMap.get(t);if(r)return Array.from(r.values()).filter((function(t){return!n||t.w===n}))},this.nodeEdges=function(t,n){var r;if(e.hasNode(t))return null===(r=e.inEdges(t,n))||void 0===r?void 0:r.concat(e.outEdges(t,n))},this.toJSON=function(){return void 0===(n={options:{directed:(t=e).isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:p(t),edges:m(t),value:t.graph()}).value&&delete n.value,n;var t,n},this.nodeInDegree=function(t){var n=e.inEdgesMap.get(t);return n?n.size:0},this.nodeOutDegree=function(t){var n=e.outEdgesMap.get(t);return n?n.size:0},this.nodeDegree=function(t){return e.nodeInDegree(t)+e.nodeOutDegree(t)},this.source=function(t){return t.v},this.target=function(t){return t.w};var r=v(v({},x),n);this.compound=r.compound,this.directed=r.directed,this.multigraph=r.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}var e,n,r;return e=t,(n=[{key:"setNode",value:function(t,e){var n,r=this.nodesLabelMap,i=this.defaultNodeLabelFn,o=this.isCompound,a=this.parentMap,s=this.childrenMap,u=this.inEdgesMap,l=this.outEdgesMap,c=this.predecessorsMap,h=this.successorsMap;return r.has(t)?(void 0!==e&&r.set(t,e),this):(r.set(t,e||i(t)),o()&&(null==a||a.set(t,this.GRAPH_NODE),null==s||s.set(t,new Map),(null==s?void 0:s.has(this.GRAPH_NODE))||null==s||s.set(this.GRAPH_NODE,new Map),null==s||null===(n=s.get(this.GRAPH_NODE))||void 0===n||n.set(t,!0)),[u,l,c,h].forEach((function(e){return e.set(t,new Map)})),this.nodeCountNum+=1,this)}},{key:"removeNode",value:function(t){var e=this;if(this.hasNode(t)){var n,r,i,o=function(t){e.removeEdge(t.v,t.w,t.name)},a=this.inEdgesMap,s=this.outEdgesMap,u=this.predecessorsMap,l=this.successorsMap,c=this.nodesLabelMap;this.isCompound()&&(this.removeFromParentsChildList(t),null===(n=this.parentMap)||void 0===n||n.delete(t),null===(r=this.children(t))||void 0===r||r.forEach((function(t){return e.setParent(t)})),null===(i=this.childrenMap)||void 0===i||i.delete(t));var h=a.get(t),d=s.get(t);Array.from(h.values()).forEach((function(t){return o(t)})),Array.from(d.values()).forEach((function(t){return o(t)})),c.delete(t),a.delete(t),s.delete(t),u.delete(t),l.delete(t),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(t,e,n,r){var i,o,a=h(this.isDirected(),t,e,r),s=d(this.isDirected(),a),l=a.v,c=a.w;if(this.edgesLabelsMap.has(s))return this.edgesLabelsMap.set(s,n),this;if(void 0!==r&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(l),this.setNode(c),this.edgesLabelsMap.set(s,n||this.defaultEdgeLabelFn(l,c,r)),Object.freeze(a),this.edgesMap.set(s,a);var f=this.predecessorsMap.get(c),p=this.successorsMap.get(l);return u(f,l),u(p,c),null===(i=this.inEdgesMap.get(c))||void 0===i||i.set(s,a),null===(o=this.outEdgesMap.get(l))||void 0===o||o.set(s,a),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(t,e,n){var r=c(this.isDirected(),t,e,n);if(this.edgesMap.get(r)){var i=h(this.isDirected(),t,e,n),o=i.v,a=i.w;this.edgesLabelsMap.delete(r),this.edgesMap.delete(r);var s=this.predecessorsMap.get(a),u=this.successorsMap.get(o);l(s,o),l(u,a),this.inEdgesMap.get(a).delete(r),this.outEdgesMap.get(o).delete(r),this.edgeCountNum-=1}return this}}])&&b(e.prototype,n),r&&b(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function E(){return E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=C(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},E.apply(this,arguments)}function A(t,e){return A=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},A(t,e)}function M(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C(t);if(e){var i=C(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function C(t){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},C(t)}w.fromJSON=function(t){var e=new w(t.options);return void 0!==t.value&&e.setGraph(t.value),t.nodes.forEach((function(t){e.setNode(t.id,t.value),t.parent&&e.setParent(t.id,t.parent)})),t.edges.forEach((function(t){e.setEdge(t.v,t.w,t.value,t.name)})),e};var T=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A(t,e)}(o,t);var e,n,r,i=M(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))).eventPool={},t}return e=o,n=[{key:"appendEvent",value:function(t,e){this.eventPool[t]||(this.eventPool[t]=[]),this.eventPool[t].push(e)}},{key:"removeEvent",value:function(t,e){if(this.eventPool[t]){var n=this.eventPool[t].indexOf(e);n>-1&&this.eventPool[t].splice(n,1)}}},{key:"emitEvent",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.eventPool[t]&&this.eventPool[t].forEach((function(t){t.apply(void 0,n)}))}},{key:"setNode",value:function(t,e){return E(C(o.prototype),"setNode",this).call(this,t,e),this.emitEvent("nodeAdd",t,e),this}},{key:"removeNode",value:function(t){return E(C(o.prototype),"removeNode",this).call(this,t),this.emitEvent("nodeRemove",t),this}},{key:"setEdge",value:function(t,e,n,r){return E(C(o.prototype),"setEdge",this).call(this,t,e,n,r),this.emitEvent("edgeAdd",t,e,n,r),this}},{key:"removeEdge",value:function(t,e,n){return E(C(o.prototype),"removeEdge",this).call(this,t,e,n),this.emitEvent("edgeRemove",t,e,n),this}}],n&&S(e.prototype,n),r&&S(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(w);function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function I(t,e,n){return e&&k(t.prototype,e),n&&k(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var N=I((function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.arr=[],this.keyIndice=new Map,this.size=function(){return e.arr.length},this.keys=function(){return e.arr.map((function(t){return t.key}))},this.has=function(t){return e.keyIndice.has(t)},this.priority=function(t){var n=e.keyIndice.get(t);if(void 0!==n)return e.arr[n].priority},this.swap=function(t,n){var r=e.arr,i=e.keyIndice,o=[r[t],r[n]],a=o[0],s=o[1];r[t]=s,r[n]=a,i.set(a.key,n),i.set(s.key,t)},this.innerDecrease=function(t){for(var n,r=e.arr,i=r[t].priority,o=t;0!==o;){var a;if((null===(a=r[n=o>>1])||void 0===a?void 0:a.priority)<i)break;e.swap(o,n),o=n}},this.heapify=function(t){var n=e.arr,r=t<<1,i=r+1,o=t;r<n.length&&(o=n[r].priority<n[o].priority?r:o,i<n.length&&(o=n[i].priority<n[o].priority?i:o),o!==t&&(e.swap(t,o),e.heapify(o)))},this.min=function(){if(0===e.size())throw new Error("Queue underflow");return e.arr[0].key},this.add=function(t,n){var r=e.keyIndice,i=e.arr;if(!r.has(t)){var o=i.length;return r.set(t,o),i.push({key:t,priority:n}),e.innerDecrease(o),!0}return!1},this.removeMin=function(){e.swap(0,e.arr.length-1);var t=e.arr.pop();return e.keyIndice.delete(t.key),e.heapify(0),t.key},this.decrease=function(t,n){if(!e.has(t))throw new Error("There's no key named ".concat(t));var r=e.keyIndice.get(t);if(n>e.arr[r].priority)throw new Error("New priority is greater than current priority.Key: ".concat(t," Old: + ").concat(e.arr[r].priority," New: ").concat(n));e.arr[r].priority=n,e.innerDecrease(r)}}));const P=function(t,e){var n,r=new w,i=new Map,o=new N;function a(t){var r=t.v===n?t.w:t.v,a=o.priority(r);if(void 0!==a){var s=e(t);s<a&&(i.set(r,n),o.decrease(r,s))}}if(0===t.nodeCount())return r;t.nodes().forEach((function(t){o.add(t,Number.POSITIVE_INFINITY),r.setNode(t)})),o.decrease(t.nodes()[0],0);for(var s=!1;o.size()>0;){var u;if(n=o.removeMin(),i.has(n))r.setEdge(n,i.get(n));else{if(s)throw new Error("Input graph is not connected: "+t.graph());s=!0}null===(u=t.nodeEdges(n))||void 0===u||u.forEach(a)}return r};const O=function(t){var e=new Set,n=[];return t.nodes().forEach((function(r){for(var i=[],o=[r];o.length>0;){var a,s,u=o.pop();if(!e.has(u))e.add(u),i.push(u),null===(a=t.successors(u))||void 0===a||a.forEach((function(t){return o.push(t)})),null===(s=t.predecessors(u))||void 0===s||s.forEach((function(t){return o.push(t)}))}i.length&&n.push(i)})),n};var L=function t(e,n,r,i,o,a){i.includes(n)||(i.push(n),r||a.push(n),o(n).forEach((function(n){return t(e,n,r,i,o,a)})),r&&a.push(n))};const R=function(t,e,n){var r=Array.isArray(e)?e:[e],i=function(e){return t.isDirected()?t.successors(e):t.neighbors(e)},o=[],a=[];return r.forEach((function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);L(t,e,"post"===n,a,i,o)})),o};function D(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return z(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var F=function(){return 1},B=function(t,e,n,r){var i,o,a=new Map,s=new N,u=function(t){var e=t.v!==i?t.v:t.w,r=a.get(e),u=n(t),l=o.distance+u;if(u<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+u);l<r.distance&&(r.distance=l,r.predecessor=i,s.decrease(e,l))};for(t.nodes().forEach((function(t){var n=t===e?0:Number.POSITIVE_INFINITY;a.set(t,{distance:n}),s.add(t,n)}));s.size()>0&&(i=s.removeMin(),!(o=a.get(i))||o.distance!==Number.POSITIVE_INFINITY);)r(i).forEach(u);var l={};return Array.from(a.entries()).forEach((function(t){var e=D(t,2),n=e[0],r=e[1];return l[String(n)]=r,l})),l};const U=function(t,e,n,r){return B(t,e,n||F,r||function(e){return t.outEdges(e)})};const j=function(t,e,n){var r={};return t.nodes().forEach((function(i){return r[String(i)]=U(t,i,e,n),r})),r};const V=function(t){var e=0,n=[],r=new Map,i=[];function o(a){var s,u={onStack:!0,lowlink:e,index:e};if(r.set(a,u),e+=1,n.push(a),null===(s=t.successors(a))||void 0===s||s.forEach((function(t){var e;if(r.has(t)){if(null===(e=r.get(t))||void 0===e?void 0:e.onStack){var n=r.get(t);u.lowlink=Math.min(u.lowlink,n.index)}}else{o(t);var i=r.get(t);u.lowlink=Math.min(u.lowlink,i.lowlink)}})),u.lowlink===u.index){var l,c=[];do{l=n.pop(),r.get(l).onStack=!1,c.push(l)}while(a!==l);i.push(c)}}return t.nodes().forEach((function(t){r.has(t)||o(t)})),i};const H=function(t){return V(t).filter((function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])}))};function G(t){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G(t)}function W(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function X(t){var e=$();return function(){var n,r=Z(t);if(e){var i=Z(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===G(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function Y(t){var e="function"==typeof Map?new Map:void 0;return Y=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return q(t,arguments,Z(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),K(r,t)},Y(t)}function q(t,e,n){return q=$()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&K(i,n.prototype),i},q.apply(null,arguments)}function $(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function K(t,e){return K=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},K(t,e)}function Z(t){return Z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Z(t)}var Q=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&K(t,e)}(o,t);var e,n,r,i=X(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.apply(this,arguments)}return e=o,n&&W(e.prototype,n),r&&W(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(Y(Error));const J=function(t){var e=new Set,n=new Set,r=[];if(t.sinks().forEach((function i(o){if(n.has(o))throw new Q;var a;e.has(o)||(n.add(o),e.add(o),null===(a=t.predecessors(o))||void 0===a||a.forEach(i),n.delete(o),r.push(o))})),e.size!==t.nodeCount())throw new Q;return r};const tt=function(t){try{J(t)}catch(t){if(t instanceof Q)return!1;throw t}return!0};const et=function(t,e){return R(t,e,"post")};const nt=function(t,e){return R(t,e,"pre")};var rt=function(){return 1};const it=function(t,e,n){return function(t,e,n){var r={},i=t.nodes();return i.forEach((function(t){var o=String(t);r[o]={},r[o][o]={distance:0},i.forEach((function(e){t!==e&&(r[o][String(e)]={distance:Number.POSITIVE_INFINITY})})),n(t).forEach((function(n){var i=n.v===t?n.w:n.v,a=e(n);r[o][String(i)]={distance:a,predecessor:t}}))})),i.forEach((function(t){var e=String(t),n=r[e];i.forEach((function(t){var o=String(t),a=r[o];i.forEach((function(t){var r=String(t),i=a[e],o=n[r],s=a[r],u=i.distance+o.distance;u<s.distance&&(s.distance=u,s.predecessor=o.predecessor)}))}))})),r}(t,e||rt,n||function(e){return t.outEdges(e)})};var ot=function(t,e){for(var n=t.nodes(),r=0;r<n.length;r++){var i=n[r];if(e.hasNode(i))return!0}return!1},at=function(t,e){for(var n=t.edges(),r=0;r<n.length;r++){var i=n[r];if(e.hasEdge(i.v,i.w,i.name))return!0}return!1},st=function(t,e){return t.nodes().filter((function(t){return e.hasNode(t)}))},ut=function(t,e){return t.edges().filter((function(t){return e.hasEdge(t.v,t.w,t.name)}))},lt=function(t,e){return t.isCompound()===e.isCompound()&&t.isDirected()===e.isDirected()&&t.isMultigraph()===e.isMultigraph()},ct=function(t,e){return st(t,e).length===t.nodes().length},ht=function(t,e){return ut(t,e).length===t.edges().length},dt=function(t,e){return lt(t,e)&&t.nodeCount()===e.nodeCount()&&ct(t,e)&&t.edgeCount()===e.edgeCount()&&ht(t,e)},ft=function(t,e){return ct(t,e)&&ht(t,e)};function pt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return mt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function gt(t){return t instanceof w}function vt(t){if(t.isMultigraph())return!1;for(var e=t.edges(),n=new Map,r=0;r<e.length;r++){var i=e[r];if(i.v===i.w)return!1;var o=pt([i.v,i.w].sort(),2),a=o[0],s=o[1],u="".concat(a,"-").concat(s);if(n.has(u))return!1;n.set(u,!0)}return!0}function yt(t){return 0===t.nodes().length}function bt(t){for(var e=t.edges(),n=0;n<e.length;n++){var r=e[n];if(r.v===r.w)return!0}return!1}var xt=function(t,e){if(!vt(t)||!vt(e))return!1;if(!ct(t,e))return!1;if(at(t,e))return!1;var n=t.nodeCount();return t.edgeCount()+e.edgeCount()===n*(n-1)/2},wt=function(t){if(!vt(t))return null;for(var e=t.nodeCount(),n=new w({compound:t.isCompound(),directed:t.isDirected(),multigraph:t.isMultigraph()}),r=t.nodes(),i=0;i<e;i++){var o=r[i];n.setNode(o,t.node(o));for(var a=i+1;a<e;a++){var s=r[a];t.hasEdge(o,s)||n.setEdge(o,s)}}return n}},5802:function(t){var e;"undefined"!=typeof self&&self,e=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=36)}([function(t,e,n){"use strict";var r=n(3);e.a=function(t){return Array.isArray?Array.isArray(t):Object(r.a)(t,"Array")}},function(t,e,n){"use strict";e.a=function(t){return null!==t&&"function"!=typeof t&&isFinite(t.length)}},function(t,e,n){"use strict";var r=n(3);e.a=function(t){return Object(r.a)(t,"Function")}},function(t,e,n){"use strict";var r={}.toString;e.a=function(t,e){return r.call(t)==="[object "+e+"]"}},function(t,e,n){"use strict";var r=n(3);e.a=function(t){return Object(r.a)(t,"String")}},function(t,e,n){"use strict";var r=n(3);e.a=function(t){return Object(r.a)(t,"Number")}},function(t,e,n){var r=n(38).mix;t.exports={assign:r,getHeight:function(t,e,n,r){return void 0===r&&(r="height"),"center"===n?(t[r]+e[r])/2:t.height}}},function(t,e,n){"use strict";e.a=function(t){return null==t}},function(t,e,n){"use strict";var r=n(0),i=n(12);e.a=function(t,e){if(t)if(Object(r.a)(t))for(var n=0,o=t.length;n<o&&!1!==e(t[n],n);n++);else if(Object(i.a)(t))for(var a in t)if(t.hasOwnProperty(a)&&!1===e(t[a],a))break}},function(t,e,n){"use strict";var r=n(7);e.a=function(t){return Object(r.a)(t)?"":t.toString()}},function(t,e,n){"use strict";var r=n(14),i=n(3);e.a=function(t){if(!Object(r.a)(t)||!Object(i.a)(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}},function(t,e,n){var r=n(18),i=function(){function t(t,e){void 0===e&&(e={}),this.options=e,this.rootNode=r(t,e)}return t.prototype.execute=function(){throw new Error("please override this method")},t}();t.exports=i},function(t,e,n){"use strict";e.a=function(t){var e=typeof t;return null!==t&&"object"===e||"function"===e}},function(t,e,n){"use strict";var r=n(1);e.a=function(t,e){return!!Object(r.a)(t)&&t.indexOf(e)>-1}},function(t,e,n){"use strict";e.a=function(t){return"object"==typeof t&&null!==t}},function(t,e,n){"use strict";var r=n(8),i=n(2),o=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return Object(r.a)(t,(function(n,r){Object(i.a)(t)&&"prototype"===r||e.push(n)})),e};e.a=o},function(t,e,n){"use strict";function r(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}e.a=function(t,e,n,i){return e&&r(t,e),n&&r(t,n),i&&r(t,i),t}},function(t,e,n){var r=n(35),i=["LR","RL","TB","BT","H","V"],o=["LR","RL","H"],a=i[0];t.exports=function(t,e,n){var s=e.direction||a;if(e.isHorizontal=function(t){return o.indexOf(t)>-1}(s),s&&-1===i.indexOf(s))throw new TypeError("Invalid direction: "+s);if(s===i[0])n(t,e);else if(s===i[1])n(t,e),t.right2left();else if(s===i[2])n(t,e);else if(s===i[3])n(t,e),t.bottom2top();else if(s===i[4]||s===i[5]){var u=r(t,e),l=u.left,c=u.right;n(l,e),n(c,e),e.isHorizontal?l.right2left():l.bottom2top(),c.translate(l.x-c.x,l.y-c.y),t.x=l.x,t.y=c.y;var h=t.getBoundingBox();e.isHorizontal?h.top<0&&t.translate(0,-h.top):h.left<0&&t.translate(-h.left,0)}var d=e.fixedRoot;return void 0===d&&(d=!0),d&&t.translate(-(t.x+t.width/2+t.hgap),-(t.y+t.height/2+t.vgap)),t}},function(t,e,n){var r=n(6),i={getId:function(t){return t.id||t.name},getPreH:function(t){return t.preH||0},getPreV:function(t){return t.preV||0},getHGap:function(t){return t.hgap||18},getVGap:function(t){return t.vgap||18},getChildren:function(t){return t.children},getHeight:function(t){return t.height||36},getWidth:function(t){var e=t.label||" ";return t.width||18*e.split("").length}};function o(t,e){var n=this;if(n.vgap=n.hgap=0,t instanceof o)return t;n.data=t;var r=e.getHGap(t),i=e.getVGap(t);return n.preH=e.getPreH(t),n.preV=e.getPreV(t),n.width=e.getWidth(t),n.height=e.getHeight(t),n.width+=n.preH,n.height+=n.preV,n.id=e.getId(t),n.x=n.y=0,n.depth=0,n.children||(n.children=[]),n.addGap(r,i),n}r.assign(o.prototype,{isRoot:function(){return 0===this.depth},isLeaf:function(){return 0===this.children.length},addGap:function(t,e){var n=this;n.hgap+=t,n.vgap+=e,n.width+=2*t,n.height+=2*e},eachNode:function(t){for(var e,n=[this];e=n.shift();)t(e),n=e.children.concat(n)},DFTraverse:function(t){this.eachNode(t)},BFTraverse:function(t){for(var e,n=[this];e=n.shift();)t(e),n=n.concat(e.children)},getBoundingBox:function(){var t={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode((function(e){t.left=Math.min(t.left,e.x),t.top=Math.min(t.top,e.y),t.width=Math.max(t.width,e.x+e.width),t.height=Math.max(t.height,e.y+e.height)})),t},translate:function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.eachNode((function(n){n.x+=t,n.y+=e,n.x+=n.preH,n.y+=n.preV}))},right2left:function(){var t=this,e=t.getBoundingBox();t.eachNode((function(t){t.x=t.x-2*(t.x-e.left)-t.width})),t.translate(e.width,0)},bottom2top:function(){var t=this,e=t.getBoundingBox();t.eachNode((function(t){t.y=t.y-2*(t.y-e.top)-t.height})),t.translate(0,e.height)}}),t.exports=function(t,e,n){void 0===e&&(e={});var a,s=new o(t,e=r.assign({},i,e)),u=[s];if(!n&&!t.collapsed)for(;a=u.shift();)if(!a.data.collapsed){var l=e.getChildren(a.data),c=l?l.length:0;if(a.children=new Array(c),l&&c)for(var h=0;h<c;h++){var d=new o(l[h],e);a.children[h]=d,u.push(d),d.parent=a,d.depth=a.depth+1}}return s}},function(t,e,n){"use strict";var r=n(1);e.a=function(t,e){if(!Object(r.a)(t))return t;for(var n=[],i=0;i<t.length;i++){var o=t[i];e(o,i)&&n.push(o)}return n}},function(t,e,n){"use strict";var r=n(7),i=n(21);e.a=function(t,e){var n=Object(i.a)(e),o=n.length;if(Object(r.a)(t))return!o;for(var a=0;a<o;a+=1){var s=n[a];if(e[s]!==t[s]||!(s in t))return!1}return!0}},function(t,e,n){"use strict";var r=n(8),i=n(2),o=Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];return Object(r.a)(t,(function(n,r){Object(i.a)(t)&&"prototype"===r||e.push(r)})),e};e.a=o},function(t,e,n){"use strict";var r=n(0);e.a=function(t){if(Object(r.a)(t))return t.reduce((function(t,e){return Math.max(t,e)}),t[0])}},function(t,e,n){"use strict";var r=n(0);e.a=function(t){if(Object(r.a)(t))return t.reduce((function(t,e){return Math.min(t,e)}),t[0])}},function(t,e,n){"use strict";var r=n(1),i=Array.prototype.splice;e.a=function(t,e){if(!Object(r.a)(t))return[];for(var n=t?e.length:0,o=n-1;n--;){var a=void 0,s=e[n];n!==o&&s===a||(a=s,i.call(t,s,1))}return t}},function(t,e,n){"use strict";var r=n(8),i=n(0),o=n(10);e.a=function(t,e,n){if(!Object(i.a)(t)&&!Object(o.a)(t))return t;var a=n;return Object(r.a)(t,(function(t,n){a=e(a,t,n)})),a}},function(t,e,n){"use strict";e.a=function(t,e){void 0===e&&(e=new Map);var n=[];if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++){var o=t[r];e.has(o)||(n.push(o),e.set(o,!0))}return n}},function(t,e,n){"use strict";e.a=function(t,e){if(!e)return{0:t};if(!Object(i.a)(e)){var n=Object(r.a)(e)?e:e.replace(/\s+/g,"").split("*");e=function(t){for(var e="_",r=0,i=n.length;r<i;r++)e+=t[n[r]]&&t[n[r]].toString();return e}}return Object(o.a)(t,e)};var r=n(0),i=n(2),o=n(28)},function(t,e,n){"use strict";var r=n(0),i=n(2),o=Object.prototype.hasOwnProperty;e.a=function(t,e){if(!e||!Object(r.a)(t))return{};for(var n,a={},s=Object(i.a)(e)?e:function(t){return t[e]},u=0;u<t.length;u++){var l=t[u];n=s(l),o.call(a,n)?a[n].push(l):a[n]=[l]}return a}},function(t,e,n){"use strict";e.a=function(t,e){return t.hasOwnProperty(e)}},function(t,e,n){"use strict";var r={}.toString;e.a=function(t){return r.call(t).replace(/^\[object /,"").replace(/]$/,"")}},function(t,e,n){"use strict";var r=Object.prototype;e.a=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||r)}},function(t,e,n){"use strict";var r=n(2);e.a=function(t,e){if(!Object(r.a)(t))throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=e?e.apply(this,r):r[0],a=n.cache;if(a.has(o))return a.get(o);var s=t.apply(this,r);return a.set(o,s),s};return n.cache=new Map,n}},function(t,e,n){"use strict";var r=n(14),i=n(1),o=n(4),a=function(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Object(o.a)(t)||Object(o.a)(e))return!1;if(Object(i.a)(t)||Object(i.a)(e)){if(t.length!==e.length)return!1;for(var n=!0,s=0;s<t.length&&(n=a(t[s],e[s]));s++);return n}if(Object(r.a)(t)||Object(r.a)(e)){var u=Object.keys(t),l=Object.keys(e);if(u.length!==l.length)return!1;for(n=!0,s=0;s<u.length&&(n=a(t[u[s]],e[u[s]]));s++);return n}return!1};e.a=a},function(t,e,n){"use strict";var r,i=n(116),o=n(15),a=n(32),s=n(4);e.a=Object(a.a)((function(t,e){void 0===e&&(e={});var n=e.fontSize,i=e.fontFamily,o=e.fontWeight,a=e.fontStyle,u=e.fontVariant;return r||(r=document.createElement("canvas").getContext("2d")),r.font=[a,u,o,n+"px",i].join(" "),r.measureText(Object(s.a)(t)?t:"").width}),(function(t,e){return void 0===e&&(e={}),Object(i.a)([t],Object(o.a)(e)).join("")}))},function(t,e,n){var r=n(18);t.exports=function(t,e){for(var n=r(t.data,e,!0),i=r(t.data,e,!0),o=t.children.length,a=Math.round(o/2),s=e.getSide||function(t,e){return e<a?"right":"left"},u=0;u<o;u++){var l=t.children[u];"right"===s(l,u)?i.children.push(l):n.children.push(l)}return n.eachNode((function(t){t.isRoot()||(t.side="left")})),i.eachNode((function(t){t.isRoot()||(t.side="right")})),{left:n,right:i}}},function(t,e,n){var r={compactBox:n(37),dendrogram:n(120),indented:n(122),mindmap:n(124)};t.exports=r},function(t,e,n){function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}var i=n(11),o=n(119),a=n(17),s=n(6),u=function(t){var e,n;function i(){return t.apply(this,arguments)||this}return n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n),i.prototype.execute=function(){return a(this.rootNode,this.options,o)},i}(i),l={};t.exports=function(t,e){return e=s.assign({},l,e),new u(t,e).execute()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(13);n.d(e,"contains",(function(){return r.a})),n.d(e,"includes",(function(){return r.a}));var i=n(39);n.d(e,"difference",(function(){return i.a}));var o=n(40);n.d(e,"find",(function(){return o.a}));var a=n(41);n.d(e,"findIndex",(function(){return a.a}));var s=n(42);n.d(e,"firstValue",(function(){return s.a}));var u=n(43);n.d(e,"flatten",(function(){return u.a}));var l=n(44);n.d(e,"flattenDeep",(function(){return l.a}));var c=n(45);n.d(e,"getRange",(function(){return c.a}));var h=n(46);n.d(e,"pull",(function(){return h.a}));var d=n(24);n.d(e,"pullAt",(function(){return d.a}));var f=n(25);n.d(e,"reduce",(function(){return f.a}));var p=n(47);n.d(e,"remove",(function(){return p.a}));var m=n(48);n.d(e,"sortBy",(function(){return m.a}));var g=n(49);n.d(e,"union",(function(){return g.a}));var v=n(26);n.d(e,"uniq",(function(){return v.a}));var y=n(50);n.d(e,"valuesOfKey",(function(){return y.a}));var b=n(51);n.d(e,"head",(function(){return b.a}));var x=n(52);n.d(e,"last",(function(){return x.a}));var w=n(53);n.d(e,"startsWith",(function(){return w.a}));var _=n(54);n.d(e,"endsWith",(function(){return _.a}));var S=n(19);n.d(e,"filter",(function(){return S.a}));var E=n(55);n.d(e,"every",(function(){return E.a}));var A=n(56);n.d(e,"some",(function(){return A.a}));var M=n(57);n.d(e,"group",(function(){return M.a}));var C=n(28);n.d(e,"groupBy",(function(){return C.a}));var T=n(27);n.d(e,"groupToMap",(function(){return T.a}));var k=n(58);n.d(e,"getWrapBehavior",(function(){return k.a}));var I=n(59);n.d(e,"wrapBehavior",(function(){return I.a}));var N=n(60);n.d(e,"number2color",(function(){return N.a}));var P=n(61);n.d(e,"parseRadius",(function(){return P.a}));var O=n(62);n.d(e,"clamp",(function(){return O.a}));var L=n(63);n.d(e,"fixedBase",(function(){return L.a}));var R=n(64);n.d(e,"isDecimal",(function(){return R.a}));var D=n(65);n.d(e,"isEven",(function(){return D.a}));var z=n(66);n.d(e,"isInteger",(function(){return z.a}));var F=n(67);n.d(e,"isNegative",(function(){return F.a}));var B=n(68);n.d(e,"isNumberEqual",(function(){return B.a}));var U=n(69);n.d(e,"isOdd",(function(){return U.a}));var j=n(70);n.d(e,"isPositive",(function(){return j.a}));var V=n(22);n.d(e,"max",(function(){return V.a}));var H=n(71);n.d(e,"maxBy",(function(){return H.a}));var G=n(23);n.d(e,"min",(function(){return G.a}));var W=n(72);n.d(e,"minBy",(function(){return W.a}));var X=n(73);n.d(e,"mod",(function(){return X.a}));var Y=n(74);n.d(e,"toDegree",(function(){return Y.a}));var q=n(75);n.d(e,"toInteger",(function(){return q.a}));var $=n(76);n.d(e,"toRadian",(function(){return $.a}));var K=n(77);n.d(e,"forIn",(function(){return K.a}));var Z=n(29);n.d(e,"has",(function(){return Z.a}));var Q=n(78);n.d(e,"hasKey",(function(){return Q.a}));var J=n(79);n.d(e,"hasValue",(function(){return J.a}));var tt=n(21);n.d(e,"keys",(function(){return tt.a}));var et=n(20);n.d(e,"isMatch",(function(){return et.a}));var nt=n(15);n.d(e,"values",(function(){return nt.a}));var rt=n(80);n.d(e,"lowerCase",(function(){return rt.a}));var it=n(81);n.d(e,"lowerFirst",(function(){return it.a}));var ot=n(82);n.d(e,"substitute",(function(){return ot.a}));var at=n(83);n.d(e,"upperCase",(function(){return at.a}));var st=n(84);n.d(e,"upperFirst",(function(){return st.a}));var ut=n(30);n.d(e,"getType",(function(){return ut.a}));var lt=n(85);n.d(e,"isArguments",(function(){return lt.a}));var ct=n(0);n.d(e,"isArray",(function(){return ct.a}));var ht=n(1);n.d(e,"isArrayLike",(function(){return ht.a}));var dt=n(86);n.d(e,"isBoolean",(function(){return dt.a}));var ft=n(87);n.d(e,"isDate",(function(){return ft.a}));var pt=n(88);n.d(e,"isError",(function(){return pt.a}));var mt=n(2);n.d(e,"isFunction",(function(){return mt.a}));var gt=n(89);n.d(e,"isFinite",(function(){return gt.a}));var vt=n(7);n.d(e,"isNil",(function(){return vt.a}));var yt=n(90);n.d(e,"isNull",(function(){return yt.a}));var bt=n(5);n.d(e,"isNumber",(function(){return bt.a}));var xt=n(12);n.d(e,"isObject",(function(){return xt.a}));var wt=n(14);n.d(e,"isObjectLike",(function(){return wt.a}));var _t=n(10);n.d(e,"isPlainObject",(function(){return _t.a}));var St=n(31);n.d(e,"isPrototype",(function(){return St.a}));var Et=n(91);n.d(e,"isRegExp",(function(){return Et.a}));var At=n(4);n.d(e,"isString",(function(){return At.a}));var Mt=n(3);n.d(e,"isType",(function(){return Mt.a}));var Ct=n(92);n.d(e,"isUndefined",(function(){return Ct.a}));var Tt=n(93);n.d(e,"isElement",(function(){return Tt.a}));var kt=n(94);n.d(e,"requestAnimationFrame",(function(){return kt.a}));var It=n(95);n.d(e,"clearAnimationFrame",(function(){return It.a}));var Nt=n(96);n.d(e,"augment",(function(){return Nt.a}));var Pt=n(97);n.d(e,"clone",(function(){return Pt.a}));var Ot=n(98);n.d(e,"debounce",(function(){return Ot.a}));var Lt=n(32);n.d(e,"memoize",(function(){return Lt.a}));var Rt=n(99);n.d(e,"deepMix",(function(){return Rt.a}));var Dt=n(8);n.d(e,"each",(function(){return Dt.a}));var zt=n(100);n.d(e,"extend",(function(){return zt.a}));var Ft=n(101);n.d(e,"indexOf",(function(){return Ft.a}));var Bt=n(102);n.d(e,"isEmpty",(function(){return Bt.a}));var Ut=n(33);n.d(e,"isEqual",(function(){return Ut.a}));var jt=n(103);n.d(e,"isEqualWith",(function(){return jt.a}));var Vt=n(104);n.d(e,"map",(function(){return Vt.a}));var Ht=n(105);n.d(e,"mapValues",(function(){return Ht.a}));var Gt=n(16);n.d(e,"mix",(function(){return Gt.a})),n.d(e,"assign",(function(){return Gt.a}));var Wt=n(106);n.d(e,"get",(function(){return Wt.a}));var Xt=n(107);n.d(e,"set",(function(){return Xt.a}));var Yt=n(108);n.d(e,"pick",(function(){return Yt.a}));var qt=n(109);n.d(e,"omit",(function(){return qt.a}));var $t=n(110);n.d(e,"throttle",(function(){return $t.a}));var Kt=n(111);n.d(e,"toArray",(function(){return Kt.a}));var Zt=n(9);n.d(e,"toString",(function(){return Zt.a}));var Qt=n(112);n.d(e,"uniqueId",(function(){return Qt.a}));var Jt=n(113);n.d(e,"noop",(function(){return Jt.a}));var te=n(114);n.d(e,"identity",(function(){return te.a}));var ee=n(115);n.d(e,"size",(function(){return ee.a}));var ne=n(34);n.d(e,"measureTextWidth",(function(){return ne.a}));var re=n(117);n.d(e,"getEllipsisText",(function(){return re.a}));var ie=n(118);n.d(e,"Cache",(function(){return ie.a}))},function(t,e,n){"use strict";var r=n(19),i=n(13);e.a=function(t,e){return void 0===e&&(e=[]),Object(r.a)(t,(function(t){return!Object(i.a)(e,t)}))}},function(t,e,n){"use strict";var r=n(2),i=n(20),o=n(0),a=n(10);e.a=function(t,e){if(!Object(o.a)(t))return null;var n;if(Object(r.a)(e)&&(n=e),Object(a.a)(e)&&(n=function(t){return Object(i.a)(t,e)}),n)for(var s=0;s<t.length;s+=1)if(n(t[s]))return t[s];return null}},function(t,e,n){"use strict";e.a=function(t,e,n){void 0===n&&(n=0);for(var r=n;r<t.length;r++)if(e(t[r],r))return r;return-1}},function(t,e,n){"use strict";var r=n(7),i=n(0);e.a=function(t,e){for(var n=null,o=0;o<t.length;o++){var a=t[o][e];if(!Object(r.a)(a)){n=Object(i.a)(a)?a[0]:a;break}}return n}},function(t,e,n){"use strict";var r=n(0);e.a=function(t){if(!Object(r.a)(t))return[];for(var e=[],n=0;n<t.length;n++)e=e.concat(t[n]);return e}},function(t,e,n){"use strict";var r=n(0),i=function(t,e){if(void 0===e&&(e=[]),Object(r.a)(t))for(var n=0;n<t.length;n+=1)i(t[n],e);else e.push(t);return e};e.a=i},function(t,e,n){"use strict";var r=n(0),i=n(22),o=n(23);e.a=function(t){var e=t.filter((function(t){return!isNaN(t)}));if(!e.length)return{min:0,max:0};if(Object(r.a)(t[0])){for(var n=[],a=0;a<t.length;a++)n=n.concat(t[a]);e=n}var s=Object(i.a)(e);return{min:Object(o.a)(e),max:s}}},function(t,e,n){"use strict";var r=Array.prototype,i=r.splice,o=r.indexOf;e.a=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r++)for(var a=e[r],s=-1;(s=o.call(t,a))>-1;)i.call(t,s,1);return t}},function(t,e,n){"use strict";var r=n(1),i=n(24);e.a=function(t,e){var n=[];if(!Object(r.a)(t))return n;for(var o=-1,a=[],s=t.length;++o<s;){var u=t[o];e(u,o,t)&&(n.push(u),a.push(o))}return Object(i.a)(t,a),n}},function(t,e,n){"use strict";var r=n(0),i=n(4),o=n(2);e.a=function(t,e){var n;if(Object(o.a)(e))n=function(t,n){return e(t)-e(n)};else{var a=[];Object(i.a)(e)?a.push(e):Object(r.a)(e)&&(a=e),n=function(t,e){for(var n=0;n<a.length;n+=1){var r=a[n];if(t[r]>e[r])return 1;if(t[r]<e[r])return-1}return 0}}return t.sort(n),t}},function(t,e,n){"use strict";var r=n(26);e.a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(r.a)([].concat.apply([],t))}},function(t,e,n){"use strict";var r=n(0),i=n(7);e.a=function(t,e){for(var n=[],o={},a=0;a<t.length;a++){var s=t[a][e];if(!Object(i.a)(s)){Object(r.a)(s)||(s=[s]);for(var u=0;u<s.length;u++){var l=s[u];o[l]||(n.push(l),o[l]=!0)}}}return n}},function(t,e,n){"use strict";e.a=function(t){if(Object(r.a)(t))return t[0]};var r=n(1)},function(t,e,n){"use strict";e.a=function(t){if(Object(r.a)(t))return t[t.length-1]};var r=n(1)},function(t,e,n){"use strict";var r=n(0),i=n(4);e.a=function(t,e){return!(!Object(r.a)(t)&&!Object(i.a)(t))&&t[0]===e}},function(t,e,n){"use strict";var r=n(0),i=n(4);e.a=function(t,e){return!(!Object(r.a)(t)&&!Object(i.a)(t))&&t[t.length-1]===e}},function(t,e,n){"use strict";e.a=function(t,e){for(var n=0;n<t.length;n++)if(!e(t[n],n))return!1;return!0}},function(t,e,n){"use strict";e.a=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n))return!0;return!1}},function(t,e,n){"use strict";var r=n(27);e.a=function(t,e){if(!e)return[t];var n=Object(r.a)(t,e),i=[];for(var o in n)i.push(n[o]);return i}},function(t,e,n){"use strict";e.a=function(t,e){return t["_wrap_"+e]}},function(t,e,n){"use strict";e.a=function(t,e){if(t["_wrap_"+e])return t["_wrap_"+e];var n=function(n){t[e](n)};return t["_wrap_"+e]=n,n}},function(t,e,n){"use strict";var r={};e.a=function(t){var e=r[t];if(!e){for(var n=t.toString(16),i=n.length;i<6;i++)n="0"+n;e="#"+n,r[t]=e}return e}},function(t,e,n){"use strict";var r=n(0);e.a=function(t){var e=0,n=0,i=0,o=0;return Object(r.a)(t)?1===t.length?e=n=i=o=t[0]:2===t.length?(e=i=t[0],n=o=t[1]):3===t.length?(e=t[0],n=o=t[1],i=t[2]):(e=t[0],n=t[1],i=t[2],o=t[3]):e=n=i=o=t,{r1:e,r2:n,r3:i,r4:o}}},function(t,e,n){"use strict";e.a=function(t,e,n){return t<e?e:t>n?n:t}},function(t,e,n){"use strict";e.a=function(t,e){var n=e.toString(),r=n.indexOf(".");if(-1===r)return Math.round(t);var i=n.substr(r+1).length;return i>20&&(i=20),parseFloat(t.toFixed(i))}},function(t,e,n){"use strict";var r=n(5);e.a=function(t){return Object(r.a)(t)&&t%1!=0}},function(t,e,n){"use strict";var r=n(5);e.a=function(t){return Object(r.a)(t)&&t%2==0}},function(t,e,n){"use strict";var r=n(5),i=Number.isInteger?Number.isInteger:function(t){return Object(r.a)(t)&&t%1==0};e.a=i},function(t,e,n){"use strict";var r=n(5);e.a=function(t){return Object(r.a)(t)&&t<0}},function(t,e,n){"use strict";e.a=function(t,e,n){return void 0===n&&(n=r),Math.abs(t-e)<n};var r=1e-5},function(t,e,n){"use strict";var r=n(5);e.a=function(t){return Object(r.a)(t)&&t%2!=0}},function(t,e,n){"use strict";var r=n(5);e.a=function(t){return Object(r.a)(t)&&t>0}},function(t,e,n){"use strict";var r=n(0),i=n(2);e.a=function(t,e){if(Object(r.a)(t)){for(var n,o=-1/0,a=0;a<t.length;a++){var s=t[a],u=Object(i.a)(e)?e(s):s[e];u>o&&(n=s,o=u)}return n}}},function(t,e,n){"use strict";var r=n(0),i=n(2);e.a=function(t,e){if(Object(r.a)(t)){for(var n,o=1/0,a=0;a<t.length;a++){var s=t[a],u=Object(i.a)(e)?e(s):s[e];u<o&&(n=s,o=u)}return n}}},function(t,e,n){"use strict";e.a=function(t,e){return(t%e+e)%e}},function(t,e,n){"use strict";var r=180/Math.PI;e.a=function(t){return r*t}},function(t,e,n){"use strict";e.a=parseInt},function(t,e,n){"use strict";var r=Math.PI/180;e.a=function(t){return r*t}},function(t,e,n){"use strict";var r=n(8);e.a=r.a},function(t,e,n){"use strict";var r=n(29);e.a=r.a},function(t,e,n){"use strict";var r=n(13),i=n(15);e.a=function(t,e){return Object(r.a)(Object(i.a)(t),e)}},function(t,e,n){"use strict";var r=n(9);e.a=function(t){return Object(r.a)(t).toLowerCase()}},function(t,e,n){"use strict";var r=n(9);e.a=function(t){var e=Object(r.a)(t);return e.charAt(0).toLowerCase()+e.substring(1)}},function(t,e,n){"use strict";e.a=function(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,(function(t,n){return"\\"===t.charAt(0)?t.slice(1):void 0===e[n]?"":e[n]})):t}},function(t,e,n){"use strict";var r=n(9);e.a=function(t){return Object(r.a)(t).toUpperCase()}},function(t,e,n){"use strict";var r=n(9);e.a=function(t){var e=Object(r.a)(t);return e.charAt(0).toUpperCase()+e.substring(1)}},function(t,e,n){"use strict";var r=n(3);e.a=function(t){return Object(r.a)(t,"Arguments")}},function(t,e,n){"use strict";var r=n(3);e.a=function(t){return Object(r.a)(t,"Boolean")}},function(t,e,n){"use strict";var r=n(3);e.a=function(t){return Object(r.a)(t,"Date")}},function(t,e,n){"use strict";var r=n(3);e.a=function(t){return Object(r.a)(t,"Error")}},function(t,e,n){"use strict";var r=n(5);e.a=function(t){return Object(r.a)(t)&&isFinite(t)}},function(t,e,n){"use strict";e.a=function(t){return null===t}},function(t,e,n){"use strict";var r=n(3);e.a=function(t){return Object(r.a)(t,"RegExp")}},function(t,e,n){"use strict";e.a=function(t){return void 0===t}},function(t,e,n){"use strict";e.a=function(t){return t instanceof Element||t instanceof HTMLDocument}},function(t,e,n){"use strict";e.a=function(t){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)})(t)}},function(t,e,n){"use strict";e.a=function(t){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(t)}},function(t,e,n){"use strict";var r=n(16),i=n(2);e.a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t[0],o=1;o<t.length;o++){var a=t[o];Object(i.a)(a)&&(a=a.prototype),Object(r.a)(n.prototype,a)}}},function(t,e,n){"use strict";var r=n(0),i=function(t){if("object"!=typeof t||null===t)return t;var e;if(Object(r.a)(t)){e=[];for(var n=0,o=t.length;n<o;n++)"object"==typeof t[n]&&null!=t[n]?e[n]=i(t[n]):e[n]=t[n]}else for(var a in e={},t)"object"==typeof t[a]&&null!=t[a]?e[a]=i(t[a]):e[a]=t[a];return e};e.a=i},function(t,e,n){"use strict";e.a=function(t,e,n){var r;return function(){var i=this,o=arguments,a=n&&!r;clearTimeout(r),r=setTimeout((function(){r=null,n||t.apply(i,o)}),e),a&&t.apply(i,o)}}},function(t,e,n){"use strict";var r=n(0),i=n(10);function o(t,e,n,a){for(var s in n=n||0,a=a||5,e)if(e.hasOwnProperty(s)){var u=e[s];null!==u&&Object(i.a)(u)?(Object(i.a)(t[s])||(t[s]={}),n<a?o(t[s],u,n+1,a):t[s]=e[s]):Object(r.a)(u)?(t[s]=[],t[s]=t[s].concat(u)):void 0!==u&&(t[s]=u)}}e.a=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)o(t,e[r]);return t}},function(t,e,n){"use strict";var r=n(16),i=n(2);e.a=function(t,e,n,o){Object(i.a)(e)||(n=e,e=t,t=function(){});var a=Object.create?function(t,e){return Object.create(t,{constructor:{value:e}})}:function(t,e){function n(){}n.prototype=t;var r=new n;return r.constructor=e,r},s=a(e.prototype,t);return t.prototype=Object(r.a)(s,t.prototype),t.superclass=a(e.prototype,e),Object(r.a)(s,n),Object(r.a)(t,o),t}},function(t,e,n){"use strict";var r=n(1);e.a=function(t,e){if(!Object(r.a)(t))return-1;var n=Array.prototype.indexOf;if(n)return n.call(t,e);for(var i=-1,o=0;o<t.length;o++)if(t[o]===e){i=o;break}return i}},function(t,e,n){"use strict";var r=n(7),i=n(1),o=n(30),a=n(31),s=Object.prototype.hasOwnProperty;e.a=function(t){if(Object(r.a)(t))return!0;if(Object(i.a)(t))return!t.length;var e=Object(o.a)(t);if("Map"===e||"Set"===e)return!t.size;if(Object(a.a)(t))return!Object.keys(t).length;for(var n in t)if(s.call(t,n))return!1;return!0}},function(t,e,n){"use strict";var r=n(2),i=n(33);e.a=function(t,e,n){return Object(r.a)(n)?!!n(t,e):Object(i.a)(t,e)}},function(t,e,n){"use strict";var r=n(1);e.a=function(t,e){if(!Object(r.a)(t))return t;for(var n=[],i=0;i<t.length;i++){var o=t[i];n.push(e(o,i))}return n}},function(t,e,n){"use strict";var r=n(7),i=n(12),o=function(t){return t};e.a=function(t,e){void 0===e&&(e=o);var n={};return Object(i.a)(t)&&!Object(r.a)(t)&&Object.keys(t).forEach((function(r){n[r]=e(t[r],r)})),n}},function(t,e,n){"use strict";var r=n(4);e.a=function(t,e,n){for(var i=0,o=Object(r.a)(e)?e.split("."):e;t&&i<o.length;)t=t[o[i++]];return void 0===t||i<o.length?n:t}},function(t,e,n){"use strict";var r=n(12),i=n(4),o=n(5);e.a=function(t,e,n){var a=t,s=Object(i.a)(e)?e.split("."):e;return s.forEach((function(t,e){e<s.length-1?(Object(r.a)(a[t])||(a[t]=Object(o.a)(s[e+1])?[]:{}),a=a[t]):a[t]=n})),t}},function(t,e,n){"use strict";var r=n(8),i=n(10),o=Object.prototype.hasOwnProperty;e.a=function(t,e){if(null===t||!Object(i.a)(t))return{};var n={};return Object(r.a)(e,(function(e){o.call(t,e)&&(n[e]=t[e])})),n}},function(t,e,n){"use strict";var r=n(25);e.a=function(t,e){return Object(r.a)(t,(function(t,n,r){return e.includes(r)||(t[r]=n),t}),{})}},function(t,e,n){"use strict";e.a=function(t,e,n){var r,i,o,a,s=0;n||(n={});var u=function(){s=!1===n.leading?0:Date.now(),r=null,a=t.apply(i,o),r||(i=o=null)},l=function(){var l=Date.now();s||!1!==n.leading||(s=l);var c=e-(l-s);return i=this,o=arguments,c<=0||c>e?(r&&(clearTimeout(r),r=null),s=l,a=t.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(u,c)),a};return l.cancel=function(){clearTimeout(r),s=0,r=i=o=null},l}},function(t,e,n){"use strict";var r=n(1);e.a=function(t){return Object(r.a)(t)?Array.prototype.slice.call(t):[]}},function(t,e,n){"use strict";var r={};e.a=function(t){return r[t=t||"g"]?r[t]+=1:r[t]=1,t+r[t]}},function(t,e,n){"use strict";e.a=function(){}},function(t,e,n){"use strict";e.a=function(t){return t}},function(t,e,n){"use strict";e.a=function(t){return Object(r.a)(t)?0:Object(i.a)(t)?t.length:Object.keys(t).length};var r=n(7),i=n(1)},function(t,e,n){"use strict";e.a=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},Object.create,Object.create},function(t,e,n){"use strict";var r=n(4),i=n(9),o=n(34);e.a=function(t,e,n,a){void 0===a&&(a="...");var s,u,l=Object(o.a)(a,n),c=Object(r.a)(t)?t:Object(i.a)(t),h=e,d=[];if(Object(o.a)(t,n)<=e)return t;for(;s=c.substr(0,16),!((u=Object(o.a)(s,n))+l>h&&u>h);)if(d.push(s),h-=u,!(c=c.substr(16)))return d.join("");for(;s=c.substr(0,1),!((u=Object(o.a)(s,n))+l>h);)if(d.push(s),h-=u,!(c=c.substr(1)))return d.join("");return""+d.join("")+a}},function(t,e,n){"use strict";var r=function(){function t(){this.map={}}return t.prototype.has=function(t){return void 0!==this.map[t]},t.prototype.get=function(t,e){var n=this.map[t];return void 0===n?e:n},t.prototype.set=function(t,e){this.map[t]=e},t.prototype.clear=function(){this.map={}},t.prototype.delete=function(t){delete this.map[t]},t.prototype.size=function(){return Object.keys(this.map).length},t}();e.a=r},function(t,e){function n(t,e,n,r){void 0===r&&(r=[]);var i=this;i.w=t||0,i.h=e||0,i.y=n||0,i.x=0,i.c=r||[],i.cs=r.length,i.prelim=0,i.mod=0,i.shift=0,i.change=0,i.tl=null,i.tr=null,i.el=null,i.er=null,i.msel=0,i.mser=0}function r(t,e,n){n?t.y+=e:t.x+=e,t.children.forEach((function(t){r(t,e,n)}))}function i(t,e){var n=e?t.y:t.x;return t.children.forEach((function(t){n=Math.min(i(t,e),n)})),n}function o(t,e){r(t,-i(t,e),e)}function a(t,e,n){n?e.y=t.x:e.x=t.x,t.c.forEach((function(t,r){a(t,e.children[r],n)}))}function s(t,e,n){void 0===n&&(n=0),e?(t.x=n,n+=t.width):(t.y=n,n+=t.height),t.children.forEach((function(t){s(t,e,n)}))}n.fromNode=function(t,e){if(!t)return null;var r=[];return t.children.forEach((function(t){r.push(n.fromNode(t,e))})),e?new n(t.height,t.width,t.x,r):new n(t.width,t.height,t.y,r)},t.exports=function(t,e){void 0===e&&(e={});var r=e.isHorizontal;function i(t){0===t.cs?(t.el=t,t.er=t,t.msel=t.mser=0):(t.el=t.c[0].el,t.msel=t.c[0].msel,t.er=t.c[t.cs-1].er,t.mser=t.c[t.cs-1].mser)}function u(t,e,n){for(var r=t.c[e-1],i=r.mod,o=t.c[e],a=o.mod;null!==r&&null!==o;){d(r)>n.low&&(n=n.nxt);var s=i+r.prelim+r.w-(a+o.prelim);s>0&&(a+=s,l(t,e,n.index,s));var u=d(r),f=d(o);u<=f&&null!==(r=h(r))&&(i+=r.mod),u>=f&&null!==(o=c(o))&&(a+=o.mod)}!r&&o?function(t,e,n,r){var i=t.c[0].el;i.tl=n;var o=r-n.mod-t.c[0].msel;i.mod+=o,i.prelim-=o,t.c[0].el=t.c[e].el,t.c[0].msel=t.c[e].msel}(t,e,o,a):r&&!o&&function(t,e,n,r){var i=t.c[e].er;i.tr=n;var o=r-n.mod-t.c[e].mser;i.mod+=o,i.prelim-=o,t.c[e].er=t.c[e-1].er,t.c[e].mser=t.c[e-1].mser}(t,e,r,i)}function l(t,e,n,r){t.c[e].mod+=r,t.c[e].msel+=r,t.c[e].mser+=r,function(t,e,n,r){if(n!==e-1){var i=e-n;t.c[n+1].shift+=r/i,t.c[e].shift-=r/i,t.c[e].change-=r-r/i}}(t,e,n,r)}function c(t){return 0===t.cs?t.tl:t.c[0]}function h(t){return 0===t.cs?t.tr:t.c[t.cs-1]}function d(t){return t.y+t.h}function f(t,e,n){for(;null!==n&&t>=n.low;)n=n.nxt;return{low:t,index:e,nxt:n}}s(t,r);var p=n.fromNode(t,r);return function t(e){if(0!==e.cs){t(e.c[0]);for(var n=f(d(e.c[0].el),0,null),r=1;r<e.cs;++r){t(e.c[r]);var o=d(e.c[r].er);u(e,r,n),n=f(o,r,n)}!function(t){t.prelim=(t.c[0].prelim+t.c[0].mod+t.c[t.cs-1].mod+t.c[t.cs-1].prelim+t.c[t.cs-1].w)/2-t.w/2}(e),i(e)}else i(e)}(p),function t(e,n){n+=e.mod,e.x=e.prelim+n,function(t){for(var e=0,n=0,r=0;r<t.cs;r++)n+=(e+=t.c[r].shift)+t.c[r].change,t.c[r].mod+=n}(e);for(var r=0;r<e.cs;r++)t(e.c[r],n)}(p,0),a(p,t,r),o(t,r),t}},function(t,e,n){function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}var i=n(11),o=n(121),a=n(17),s=n(6),u=function(t){var e,n;function i(){return t.apply(this,arguments)||this}return n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n),i.prototype.execute=function(){var t=this;return t.rootNode.width=0,a(t.rootNode,t.options,o)},i}(i),l={};t.exports=function(t,e){return e=s.assign({},l,e),new u(t,e).execute()}},function(t,e,n){var r=n(6);function i(t,e){void 0===t&&(t=0),void 0===e&&(e=[]);var n=this;n.x=n.y=0,n.leftChild=n.rightChild=null,n.height=0,n.children=e}var o={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function a(t,e,n){n?(e.x=t.x,e.y=t.y):(e.x=t.y,e.y=t.x),t.children.forEach((function(t,r){a(t,e.children[r],n)}))}t.exports=function(t,e){void 0===e&&(e={}),e=r.assign({},o,e);var n,s=0,u=function t(e){if(!e)return null;e.width=0,e.depth&&e.depth>s&&(s=e.depth);var n=e.children,r=n.length,o=new i(e.height,[]);return n.forEach((function(e,n){var i=t(e);o.children.push(i),0===n&&(o.leftChild=i),n===r-1&&(o.rightChild=i)})),o.originNode=e,o.isLeaf=e.isLeaf(),o}(t);return function t(e){if(e.isLeaf||0===e.children.length)e.drawingDepth=s;else{var n=e.children.map((function(e){return t(e)})),r=Math.min.apply(null,n);e.drawingDepth=r-1}return e.drawingDepth}(u),function t(r){r.x=r.drawingDepth*e.rankSep,r.isLeaf?(r.y=0,n&&(r.y=n.y+n.height+e.nodeSep,r.originNode.parent!==n.originNode.parent&&(r.y+=e.subTreeSep)),n=r):(r.children.forEach((function(e){t(e)})),r.y=(r.leftChild.y+r.rightChild.y)/2)}(u),a(u,t,e.isHorizontal),t}},function(t,e,n){function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}var i=n(11),o=n(123),a=n(35),s=n(6),u=["LR","RL","H"],l=u[0],c=function(t){var e,n;function i(){return t.apply(this,arguments)||this}return n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n),i.prototype.execute=function(){var t=this.options,e=this.rootNode;t.isHorizontal=!0;var n=t.indent,r=void 0===n?20:n,i=t.dropCap,s=void 0===i||i,c=t.direction,h=void 0===c?l:c,d=t.align;if(h&&-1===u.indexOf(h))throw new TypeError("Invalid direction: "+h);if(h===u[0])o(e,r,s,d);else if(h===u[1])o(e,r,s,d),e.right2left();else if(h===u[2]){var f=a(e,t),p=f.left,m=f.right;o(p,r,s,d),p.right2left(),o(m,r,s,d);var g=p.getBoundingBox();m.translate(g.width,0),e.x=m.x-e.width/2}return e},i}(i),h={};t.exports=function(t,e){return e=s.assign({},h,e),new c(t,e).execute()}},function(t,e,n){var r=n(6);t.exports=function(t,e,n,i){var o=null;t.eachNode((function(t){!function(t,e,n,i,o){var a="function"==typeof n?n(t):n*t.depth;if(!i)try{if(t.id===t.parent.children[0].id)return t.x+=a,void(t.y=e?e.y:0)}catch(t){}if(t.x+=a,e){if(t.y=e.y+r.getHeight(e,t,o),e.parent&&t.parent.id!==e.parent.id){var s=e.parent,u=s.y+r.getHeight(s,t,o);t.y=u>t.y?u:t.y}}else t.y=0}(t,o,e,n,i),o=t}))}},function(t,e,n){function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}var i=n(11),o=n(125),a=n(17),s=n(6),u=function(t){var e,n;function i(){return t.apply(this,arguments)||this}return n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n),i.prototype.execute=function(){return a(this.rootNode,this.options,o)},i}(i),l={};t.exports=function(t,e){return e=s.assign({},l,e),new u(t,e).execute()}},function(t,e,n){var r=n(6);function i(t,e){var n=0;return t.children.length?t.children.forEach((function(t){n+=i(t,e)})):n=t.height,t._subTreeSep=e.getSubTreeSep(t.data),t.totalHeight=Math.max(t.height,n)+2*t._subTreeSep,t.totalHeight}function o(t){var e=t.children,n=e.length;if(n){e.forEach((function(t){o(t)}));var r=e[0],i=e[n-1],a=i.y-r.y+i.height,s=0;if(e.forEach((function(t){s+=t.totalHeight})),a>t.height)t.y=r.y+a/2-t.height/2;else if(1!==e.length||t.height>s){var u=t.y+(t.height-a)/2-r.y;e.forEach((function(t){t.translate(0,u)}))}else t.y=(r.y+r.height/2+i.y+i.height/2)/2-t.height/2}}var a={getSubTreeSep:function(){return 0}};t.exports=function(t,e){void 0===e&&(e={}),e=r.assign({},a,e),t.parent={x:0,width:0,height:0,y:0},t.BFTraverse((function(t){t.x=t.parent.x+t.parent.width})),t.parent=null,i(t,e),t.startY=0,t.y=t.totalHeight/2-t.height/2,t.eachNode((function(t){var e=t.children,n=e.length;if(n){var r=e[0];if(r.startY=t.startY+t._subTreeSep,1===n)r.y=t.y+t.height/2-r.height/2;else{r.y=r.startY+r.totalHeight/2-r.height/2;for(var i=1;i<n;i++){var o=e[i];o.startY=e[i-1].startY+e[i-1].totalHeight,o.y=o.startY+o.totalHeight/2-o.height/2}}}})),o(t)}}])},t.exports=e()},84821:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.getLayoutByName=e.unRegisterLayout=e.registerLayout=void 0;var o=n(38119);Object.defineProperty(e,"registerLayout",{enumerable:!0,get:function(){return o.registerLayout}}),Object.defineProperty(e,"unRegisterLayout",{enumerable:!0,get:function(){return o.unRegisterLayout}}),Object.defineProperty(e,"getLayoutByName",{enumerable:!0,get:function(){return o.getLayoutByName}}),i(n(28352),e)},46271:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Base=void 0;var n=function(){function t(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}return t.prototype.layout=function(t){return this.init(t),this.execute(!0)},t.prototype.init=function(t){this.nodes=t.nodes||[],this.edges=t.edges||[],this.combos=t.combos||[],this.comboEdges=t.comboEdges||[],this.hiddenNodes=t.hiddenNodes||[],this.hiddenEdges=t.hiddenEdges||[],this.hiddenCombos=t.hiddenCombos||[],this.vedges=t.vedges||[]},t.prototype.execute=function(t){},t.prototype.executeWithWorker=function(){},t.prototype.getDefaultCfg=function(){return{}},t.prototype.updateCfg=function(t){t&&Object.assign(this,t)},t.prototype.getType=function(){return"base"},t.prototype.destroy=function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0},t}();e.Base=n},33455:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CircularLayout=void 0;var o=n(46271),a=n(81422);function s(t,e){var n=t.degree,r=e.degree;return n<r?-1:n>r?1:0}var u=function(t){function e(e){var n=t.call(this)||this;return n.radius=null,n.nodeSize=void 0,n.startRadius=null,n.endRadius=null,n.startAngle=0,n.endAngle=2*Math.PI,n.clockwise=!0,n.divisions=1,n.ordering=null,n.angleRatio=1,n.nodes=[],n.edges=[],n.nodeMap={},n.degrees=[],n.width=300,n.height=300,n.updateCfg(e),n}return i(e,t),e.prototype.getDefaultCfg=function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},e.prototype.execute=function(){var t,e=this,n=e.nodes,r=e.edges,i=n.length;if(0!==i){e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]);var o=e.center;if(1===i)return n[0].x=o[0],n[0].y=o[1],void(e.onLayoutEnd&&e.onLayoutEnd());var s=e.radius,u=e.startRadius,l=e.endRadius,c=e.divisions,h=e.startAngle,d=e.endAngle,f=e.angleRatio,p=e.ordering,m=e.clockwise,g=e.nodeSpacing,v=e.nodeSize,y=(d-h)/i,b={};n.forEach((function(t,e){b[t.id]=e})),e.nodeMap=b;var x=(0,a.getDegree)(n.length,b,r);if(e.degrees=x,g){var w=(0,a.getFuncByUnknownType)(10,g),_=(0,a.getFuncByUnknownType)(10,v),S=-1/0;n.forEach((function(t){var e=_(t);S<e&&(S=e)}));var E=0;n.forEach((function(t,e){E+=0===e?S||10:(w(t)||0)+(S||10)})),s=E/(2*Math.PI)}else s||u||l?!u&&l?u=l:u&&!l&&(l=u):s=e.height>e.width?e.width/2:e.height/2;var A=y*f,M=[];M="topology"===p?e.topologyOrdering():"topology-directed"===p?e.topologyOrdering(!0):"degree"===p?e.degreeOrdering():n;for(var C=Math.ceil(i/c),T=0;T<i;++T){var k=s;k||null===u||null===l||(k=u+T*(l-u)/(i-1)),k||(k=10+100*T/(i-1));var I=h+T%C*A+2*Math.PI/c*Math.floor(T/C);m||(I=d-T%C*A-2*Math.PI/c*Math.floor(T/C)),M[T].x=o[0]+Math.cos(I)*k,M[T].y=o[1]+Math.sin(I)*k,M[T].weight=x[T].all}return null===(t=e.onLayoutEnd)||void 0===t||t.call(e),{nodes:M,edges:this.edges}}e.onLayoutEnd&&e.onLayoutEnd()},e.prototype.topologyOrdering=function(t){void 0===t&&(t=!1);var e=this,n=e.degrees,r=e.edges,i=e.nodes,o=(0,a.clone)(i),s=e.nodeMap,u=[o[0]],l=[i[0]],c=[],h=i.length;c[0]=!0,function(t,e,n,r){t.forEach((function(e,n){t[n].children=[],t[n].parent=[]})),r?e.forEach((function(e){var r=(0,a.getEdgeTerminal)(e,"source"),i=(0,a.getEdgeTerminal)(e,"target"),o=0;r&&(o=n[r]);var s=0;i&&(s=n[i]);var u=t[o].children,l=t[s].parent;u.push(t[s].id),l.push(t[o].id)})):e.forEach((function(e){var r=(0,a.getEdgeTerminal)(e,"source"),i=(0,a.getEdgeTerminal)(e,"target"),o=0;r&&(o=n[r]);var s=0;i&&(s=n[i]);var u=t[o].children,l=t[s].children;u.push(t[s].id),l.push(t[o].id)}))}(o,r,s,t);var d=0;return o.forEach((function(t,e){if(0!==e)if(e!==h-1&&n[e].all===n[e+1].all&&!function(t,e,n){for(var r=n.length,i=0;i<r;i++){var o=(0,a.getEdgeTerminal)(n[i],"source"),s=(0,a.getEdgeTerminal)(n[i],"target");if(t.id===o&&e.id===s||e.id===o&&t.id===s)return!0}return!1}(u[d],t,r)||c[e]){for(var f=u[d].children,p=!1,m=0;m<f.length;m++){var g=s[f[m]];if(n[g].all===n[e].all&&!c[g]){u.push(o[g]),l.push(i[s[o[g].id]]),c[g]=!0,p=!0;break}}for(var v=0;!p&&(c[v]||(u.push(o[v]),l.push(i[s[o[v].id]]),c[v]=!0,p=!0),++v!==h););}else u.push(t),l.push(i[s[t.id]]),c[e]=!0,d++})),l},e.prototype.degreeOrdering=function(){var t=this.nodes,e=[],n=this.degrees;return t.forEach((function(t,r){t.degree=n[r].all,e.push(t)})),e.sort(s),e},e.prototype.getType=function(){return"circular"},e}(o.Base);e.CircularLayout=u},4193:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.ComboCombinedLayout=void 0;var a=n(55573),s=n(46271),u=n(81422),l=n(28352),c=function(t){function e(e){var n=t.call(this)||this;return n.center=[0,0],n.nodes=[],n.edges=[],n.combos=[],n.comboEdges=[],n.comboPadding=10,n.comboTrees=[],n.updateCfg(e),n}return i(e,t),e.prototype.getDefaultCfg=function(){return{}},e.prototype.execute=function(){var t=this,e=t.nodes,n=t.center;if(e&&0!==e.length){if(1===e.length)return e[0].x=n[0],e[0].y=n[1],void(t.onLayoutEnd&&t.onLayoutEnd());t.initVals(),t.run(),t.onLayoutEnd&&t.onLayoutEnd()}else t.onLayoutEnd&&t.onLayoutEnd()},e.prototype.run=function(){var t,e=this,n=e.nodes,r=e.edges,i=e.combos,s=e.comboEdges,c=e.center,h={};n.forEach((function(t){h[t.id]=t}));var d={};i.forEach((function(t){d[t.id]=t}));var f=e.getInnerGraphs(h),p=[],m=[],g={},v=!0;this.comboTrees.forEach((function(t){var e=f[t.id];if(e){var n=o(o({},t),{x:e.x||d[t.id].x,y:e.y||d[t.id].y,fx:e.fx||d[t.id].fx,fy:e.fy||d[t.id].fy,mass:e.mass||d[t.id].mass,size:e.size});m.push(n),isNaN(n.x)||0===n.x||isNaN(n.y)||0===n.y?(n.x=100*Math.random(),n.y=100*Math.random()):v=!1,p.push(t.id),(0,u.traverseTreeUp)(t,(function(e){return e.id!==t.id&&(g[e.id]=t.id),!0}))}})),n.forEach((function(t){if(!t.comboId||!d[t.comboId]){var e=o({},t);m.push(e),isNaN(e.x)||0===e.x||isNaN(e.y)||0===e.y?(e.x=100*Math.random(),e.y=100*Math.random()):v=!1,p.push(t.id)}}));var y=[];if(r.concat(s).forEach((function(t){var e=g[t.source]||t.source,n=g[t.target]||t.target;e!==n&&p.includes(e)&&p.includes(n)&&y.push({source:e,target:n})})),null==m?void 0:m.length){if(1===m.length)m[0].x=c[0],m[0].y=c[1];else{var b={nodes:m,edges:y},x=this.outerLayout||new l.GForceLayout({gravity:1,factor:4,linkDistance:function(t,e,n){var r,i,o=(((null===(r=e.size)||void 0===r?void 0:r[0])||30)+((null===(i=n.size)||void 0===i?void 0:i[0])||30))/2;return Math.min(1.5*o,700)}}),w=null===(t=x.getType)||void 0===t?void 0:t.call(x);if(x.updateCfg({center:c,kg:5,preventOverlap:!0,animate:!1}),v&&a.FORCE_LAYOUT_TYPE_MAP[w])(m.length<100?new l.MDSLayout:new l.GridLayout).layout(b);x.layout(b)}m.forEach((function(t){var e=f[t.id];if(e)e.visited=!0,e.x=t.x,e.y=t.y,e.nodes.forEach((function(e){e.x+=t.x,e.y+=t.y}));else{var n=h[t.id];n&&(n.x=t.x,n.y=t.y)}}))}for(var _=Object.keys(f),S=function(t){var e=_[t],n=f[e];if(!n)return"continue";n.nodes.forEach((function(t){n.visited||(t.x+=n.x||0,t.y+=n.y||0),h[t.id]&&(h[t.id].x=t.x,h[t.id].y=t.y)})),d[e]&&(d[e].x=n.x,d[e].y=n.y)},E=_.length-1;E>=0;E--)S(E);return{nodes:n,edges:r,combos:i,comboEdges:s}},e.prototype.getInnerGraphs=function(t){var e=this,n=e.comboTrees,r=e.nodeSize,i=e.edges,a=e.comboPadding,s=e.spacing,c={},h=this.innerLayout||new l.ConcentricLayout({type:"concentric",sortBy:"id"});return h.center=[0,0],h.preventOverlap=!0,h.nodeSpacing=s,(n||[]).forEach((function(e){(0,u.traverseTreeUp)(e,(function(e){var n,s=(null==a?void 0:a(e))||10;if((0,u.isArray)(s)&&(s=Math.max.apply(Math,s)),null===(n=e.children)||void 0===n?void 0:n.length){var l=e.children.map((function(e){if("combo"===e.itemType)return c[e.id];var n=t[e.id]||{};return o(o({},n),e)})),d=l.map((function(t){return t.id})),f={nodes:l,edges:i.filter((function(t){return d.includes(t.source)&&d.includes(t.target)}))},p=1/0;l.forEach((function(t){var e;t.size||(t.size=(null===(e=c[t.id])||void 0===e?void 0:e.size)||(null==r?void 0:r(t))||[30,30]),(0,u.isNumber)(t.size)&&(t.size=[t.size,t.size]),p>t.size[0]&&(p=t.size[0]),p>t.size[1]&&(p=t.size[1])})),h.layout(f);var m=(0,u.getLayoutBBox)(l),g=m.minX,v=m.minY,y=m.maxX,b=m.maxY,x={x:(y+g)/2,y:(b+v)/2};f.nodes.forEach((function(t){t.x-=x.x,t.y-=x.y}));var w=Math.max(y-g,p)+2*s,_=Math.max(b-v,p)+2*s;c[e.id]={id:e.id,nodes:l,size:[w,_]}}else if("combo"===e.itemType){var S=s?[2*s,2*s]:[30,30];c[e.id]={id:e.id,nodes:[],size:S}}return!0}))})),c},e.prototype.initVals=function(){var t,e,n=this,r=n.nodeSize,i=n.spacing;if(e=(0,u.isNumber)(i)?function(){return i}:(0,u.isFunction)(i)?i:function(){return 0},this.spacing=e,r)if((0,u.isFunction)(r))t=function(t){var n=r(t),i=e(t);return(0,u.isArray)(t.size)?((t.size[0]>t.size[1]?t.size[0]:t.size[1])+i)/2:((n||10)+i)/2};else if((0,u.isArray)(r)){var o=(r[0]>r[1]?r[0]:r[1])/2;t=function(t){return o+e(t)/2}}else{var a=r/2;t=function(t){return a+e(t)/2}}else t=function(t){var n=e(t);return t.size?(0,u.isArray)(t.size)?((t.size[0]>t.size[1]?t.size[0]:t.size[1])+n)/2:(0,u.isObject)(t.size)?((t.size.width>t.size.height?t.size.width:t.size.height)+n)/2:(t.size+n)/2:10+n/2};this.nodeSize=t;var s,l=n.comboPadding;s=(0,u.isNumber)(l)?function(){return l}:(0,u.isArray)(l)?function(){return Math.max.apply(null,l)}:(0,u.isFunction)(l)?l:function(){return 0},this.comboPadding=s},e.prototype.getType=function(){return"comboCombined"},e}(s.Base);e.ComboCombinedLayout=c},42335:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.ComboForceLayout=void 0;var o=n(46271),a=n(81422),s=function(t){function e(e){var n=t.call(this)||this;return n.center=[0,0],n.maxIteration=100,n.gravity=10,n.comboGravity=10,n.linkDistance=10,n.alpha=1,n.alphaMin=.001,n.alphaDecay=1-Math.pow(n.alphaMin,1/300),n.alphaTarget=0,n.velocityDecay=.6,n.edgeStrength=.6,n.nodeStrength=30,n.preventOverlap=!1,n.preventNodeOverlap=!1,n.preventComboOverlap=!1,n.collideStrength=void 0,n.nodeCollideStrength=.5,n.comboCollideStrength=.5,n.comboSpacing=20,n.comboPadding=10,n.optimizeRangeFactor=1,n.onTick=function(){},n.onLayoutEnd=function(){},n.depthAttractiveForceScale=1,n.depthRepulsiveForceScale=2,n.nodes=[],n.edges=[],n.combos=[],n.comboTrees=[],n.width=300,n.height=300,n.bias=[],n.nodeMap={},n.oriComboMap={},n.indexMap={},n.comboMap={},n.previousLayouted=!1,n.updateCfg(e),n}return i(e,t),e.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}},e.prototype.execute=function(){var t=this,e=t.nodes,n=t.center;if(t.comboTree={id:"comboTreeRoot",depth:-1,children:t.comboTrees},e&&0!==e.length){if(1===e.length)return e[0].x=n[0],e[0].y=n[1],void(t.onLayoutEnd&&t.onLayoutEnd());t.initVals(),t.run(),t.onLayoutEnd&&t.onLayoutEnd()}else t.onLayoutEnd&&t.onLayoutEnd()},e.prototype.run=function(){var t=this,e=t.nodes,n=t.previousLayouted?t.maxIteration/5:t.maxIteration;t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight);var r=t.center,i=t.velocityDecay,o=t.comboMap;t.previousLayouted||t.initPos(o);for(var s=function(n){var r=[];e.forEach((function(t,e){r[e]={x:0,y:0}})),t.applyCalculate(r),t.applyComboCenterForce(r),e.forEach((function(t,e){(0,a.isNumber)(t.x)&&(0,a.isNumber)(t.y)&&(t.x+=r[e].x*i,t.y+=r[e].y*i)})),t.alpha+=(t.alphaTarget-t.alpha)*t.alphaDecay,t.onTick()},u=0;u<n;u++)s();var l=[0,0];e.forEach((function(t){(0,a.isNumber)(t.x)&&(0,a.isNumber)(t.y)&&(l[0]+=t.x,l[1]+=t.y)})),l[0]/=e.length,l[1]/=e.length;var c=[r[0]-l[0],r[1]-l[1]];e.forEach((function(t,e){(0,a.isNumber)(t.x)&&(0,a.isNumber)(t.y)&&(t.x+=c[0],t.y+=c[1])})),t.combos.forEach((function(t){var e=o[t.id];e&&e.empty&&(t.x=e.cx||t.x,t.y=e.cy||t.y)})),t.previousLayouted=!0},e.prototype.initVals=function(){var t=this,e=t.edges,n=t.nodes,r=t.combos,i={},o={},s={};n.forEach((function(t,e){o[t.id]=t,s[t.id]=e})),t.nodeMap=o,t.indexMap=s;var u={};r.forEach((function(t){u[t.id]=t})),t.oriComboMap=u,t.comboMap=t.getComboMap();var l=t.preventOverlap;t.preventComboOverlap=t.preventComboOverlap||l,t.preventNodeOverlap=t.preventNodeOverlap||l;var c=t.collideStrength;c&&(t.comboCollideStrength=c,t.nodeCollideStrength=c),t.comboCollideStrength=t.comboCollideStrength?t.comboCollideStrength:0,t.nodeCollideStrength=t.nodeCollideStrength?t.nodeCollideStrength:0;for(var h=0;h<e.length;++h){var d=(0,a.getEdgeTerminal)(e[h],"source"),f=(0,a.getEdgeTerminal)(e[h],"target");i[d]?i[d]++:i[d]=1,i[f]?i[f]++:i[f]=1}var p=[];for(h=0;h<e.length;++h){d=(0,a.getEdgeTerminal)(e[h],"source"),f=(0,a.getEdgeTerminal)(e[h],"target");p[h]=i[d]/(i[d]+i[f])}this.bias=p;var m,g,v=t.nodeSize,y=t.nodeSpacing;if(g=(0,a.isNumber)(y)?function(){return y}:(0,a.isFunction)(y)?y:function(){return 0},this.nodeSpacing=g,v)if((0,a.isFunction)(v))m=function(t){return v(t)};else if((0,a.isArray)(v)){var b=(v[0]>v[1]?v[0]:v[1])/2;m=function(t){return b}}else{var x=v/2;m=function(t){return x}}else m=function(t){return t.size?(0,a.isArray)(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])/2:(0,a.isObject)(t.size)?(t.size.width>t.size.height?t.size.width:t.size.height)/2:t.size/2:10};this.nodeSize=m;var w,_=t.comboSpacing;w=(0,a.isNumber)(_)?function(){return _}:(0,a.isFunction)(_)?_:function(){return 0},this.comboSpacing=w;var S,E=t.comboPadding;S=(0,a.isNumber)(E)?function(){return E}:(0,a.isArray)(E)?function(){return Math.max.apply(null,E)}:(0,a.isFunction)(E)?E:function(){return 0},this.comboPadding=S;var A,M=this.linkDistance;M||(M=10),A=(0,a.isNumber)(M)?function(t){return M}:M,this.linkDistance=A;var C,T=this.edgeStrength;T||(T=1),C=(0,a.isNumber)(T)?function(t){return T}:T,this.edgeStrength=C;var k,I=this.nodeStrength;I||(I=30),k=(0,a.isNumber)(I)?function(t){return I}:I,this.nodeStrength=k},e.prototype.initPos=function(t){this.nodes.forEach((function(e,n){var r=e.comboId,i=t[r];r&&i?(e.x=i.cx+100/(n+1),e.y=i.cy+100/(n+1)):(e.x=100/(n+1),e.y=100/(n+1))}))},e.prototype.getComboMap=function(){var t=this,e=t.nodeMap,n=t.comboTrees,r=t.oriComboMap,i={};return(n||[]).forEach((function(n){var o=[];(0,a.traverseTreeUp)(n,(function(n){if("node"===n.itemType)return!0;if(!r[n.id])return!0;if(void 0===i[n.id]){var s={id:n.id,name:n.id,cx:0,cy:0,count:0,depth:t.oriComboMap[n.id].depth||0,children:[]};i[n.id]=s}var u=n.children;u&&u.forEach((function(t){if(!i[t.id]&&!e[t.id])return!0;o.push(t)}));var l=i[n.id];if(l.cx=0,l.cy=0,0===o.length){l.empty=!0;var c=r[n.id];l.cx=c.x,l.cy=c.y}return o.forEach((function(t){if(l.count++,"node"!==t.itemType){var n=i[t.id];return(0,a.isNumber)(n.cx)&&(l.cx+=n.cx),void((0,a.isNumber)(n.cy)&&(l.cy+=n.cy))}var r=e[t.id];r&&((0,a.isNumber)(r.x)&&(l.cx+=r.x),(0,a.isNumber)(r.y)&&(l.cy+=r.y))})),l.cx/=l.count||1,l.cy/=l.count||1,l.children=o,!0}))})),i},e.prototype.applyComboCenterForce=function(t){var e=this,n=e.gravity,r=e.comboGravity||n,i=this.alpha,o=e.comboTrees,s=e.indexMap,u=e.nodeMap,l=e.comboMap;(o||[]).forEach((function(e){(0,a.traverseTreeUp)(e,(function(e){if("node"===e.itemType)return!0;if(!l[e.id])return!0;var n=l[e.id],o=(n.depth+1)/10*.5,c=n.cx,h=n.cy;return n.cx=0,n.cy=0,n.children.forEach((function(e){if("node"!==e.itemType){var d=l[e.id];return d&&(0,a.isNumber)(d.cx)&&(n.cx+=d.cx),void(d&&(0,a.isNumber)(d.cy)&&(n.cy+=d.cy))}var f=u[e.id],p=f.x-c||.005,m=f.y-h||.005,g=Math.sqrt(p*p+m*m),v=s[f.id],y=r*i/g*o;t[v].x-=p*y,t[v].y-=m*y,(0,a.isNumber)(f.x)&&(n.cx+=f.x),(0,a.isNumber)(f.y)&&(n.cy+=f.y)})),n.cx/=n.count||1,n.cy/=n.count||1,!0}))}))},e.prototype.applyCalculate=function(t){var e=this,n=e.comboMap,r=e.nodes,i={};r.forEach((function(t,e){r.forEach((function(n,r){if(!(e<r)){var o=t.x-n.x||.005,a=t.y-n.y||.005,s=o*o+a*a,u=Math.sqrt(s);s<1&&(s=u),i["".concat(t.id,"-").concat(n.id)]={vx:o,vy:a,vl2:s,vl:u},i["".concat(n.id,"-").concat(t.id)]={vl2:s,vl:u,vx:-o,vy:-a}}}))})),e.updateComboSizes(n),e.calRepulsive(t,i),e.calAttractive(t,i),e.preventComboOverlap&&e.comboNonOverlapping(t,n)},e.prototype.updateComboSizes=function(t){var e=this,n=e.comboTrees,r=e.nodeMap,i=e.nodeSize,o=e.comboSpacing,s=e.comboPadding;(n||[]).forEach((function(n){var u=[];(0,a.traverseTreeUp)(n,(function(n){if("node"===n.itemType)return!0;var l=t[n.id];if(!l)return!1;var c=n.children;c&&c.forEach((function(e){(t[e.id]||r[e.id])&&u.push(e)})),l.minX=1/0,l.minY=1/0,l.maxX=-1/0,l.maxY=-1/0,u.forEach((function(t){if("node"!==t.itemType)return!0;var e=r[t.id];if(!e)return!0;var n=i(e),o=e.x-n,a=e.y-n,s=e.x+n,u=e.y+n;l.minX>o&&(l.minX=o),l.minY>a&&(l.minY=a),l.maxX<s&&(l.maxX=s),l.maxY<u&&(l.maxY=u)}));var h=e.oriComboMap[n.id].size||10;(0,a.isArray)(h)&&(h=h[0]);var d=Math.max(l.maxX-l.minX,l.maxY-l.minY,h);return l.r=d/2+o(l)/2+s(l),!0}))}))},e.prototype.comboNonOverlapping=function(t,e){var n=this,r=n.comboTree,i=n.comboCollideStrength,o=n.indexMap,s=n.nodeMap;(0,a.traverseTreeUp)(r,(function(n){if(!e[n.id]&&!s[n.id]&&"comboTreeRoot"!==n.id)return!1;var r=n.children;return r&&r.length>1&&r.forEach((function(n,a){if("node"===n.itemType)return!1;var u=e[n.id];u&&r.forEach((function(r,l){if(a<=l)return!1;if("node"===r.itemType)return!1;var c=e[r.id];if(!c)return!1;var h=u.cx-c.cx||.005,d=u.cy-c.cy||.005,f=h*h+d*d,p=u.r||1,m=c.r||1,g=p+m,v=m*m,y=p*p;if(f<g*g){var b=n.children;if(!b||0===b.length)return!1;var x=r.children;if(!x||0===x.length)return!1;var w=Math.sqrt(f),_=(g-w)/w*i,S=h*_,E=d*_,A=v/(y+v),M=1-A;b.forEach((function(e){if("node"!==e.itemType)return!1;if(s[e.id]){var n=o[e.id];x.forEach((function(e){if("node"!==e.itemType)return!1;if(!s[e.id])return!1;var r=o[e.id];t[n].x+=S*A,t[n].y+=E*A,t[r].x-=S*M,t[r].y-=E*M}))}}))}}))})),!0}))},e.prototype.calRepulsive=function(t,e){var n=this,r=n.nodes,i=n.width*n.optimizeRangeFactor,o=n.nodeStrength,a=n.alpha,s=n.nodeCollideStrength,u=n.preventNodeOverlap,l=n.nodeSize,c=n.nodeSpacing,h=n.depthRepulsiveForceScale,d=n.center;r.forEach((function(f,p){if(f.x&&f.y){if(d){var m=n.gravity,g=f.x-d[0]||.005,v=f.y-d[1]||.005,y=Math.sqrt(g*g+v*v);t[p].x-=g*m*a/y,t[p].y-=v*m*a/y}r.forEach((function(n,r){if(p!==r&&n.x&&n.y){var d=e["".concat(f.id,"-").concat(n.id)],m=d.vl2,g=d.vl;if(!(g>i)){var v=e["".concat(f.id,"-").concat(n.id)],y=v.vx,b=v.vy,x=Math.log(Math.abs(n.depth-f.depth)/10)+1||1;x=x<1?1:x,n.comboId!==f.comboId&&(x+=1);var w=x?Math.pow(h,x):1,_=o(n)*a/m*w;if(t[p].x+=y*_,t[p].y+=b*_,p<r&&u){var S=l(f)+c(f)||1,E=l(n)+c(n)||1,A=S+E;if(m<A*A){var M=(A-g)/g*s,C=E*E,T=C/(S*S+C),k=y*M,I=b*M;t[p].x+=k*T,t[p].y+=I*T,T=1-T,t[r].x-=k*T,t[r].y-=I*T}}}}}))}}))},e.prototype.calAttractive=function(t,e){var n=this,r=n.edges,i=n.linkDistance,o=n.alpha,s=n.edgeStrength,u=n.bias,l=n.depthAttractiveForceScale;r.forEach((function(r,c){var h=(0,a.getEdgeTerminal)(r,"source"),d=(0,a.getEdgeTerminal)(r,"target");if(h&&d&&h!==d){var f=n.indexMap[h],p=n.indexMap[d],m=n.nodeMap[h],g=n.nodeMap[d];if(m&&g){var v=m.depth===g.depth?0:Math.log(Math.abs(m.depth-g.depth)/10);m.comboId===g.comboId&&(v/=2);var y=v?Math.pow(l,v):1;if(m.comboId!==g.comboId&&1===y?y=l/2:m.comboId===g.comboId&&(y=2),(0,a.isNumber)(g.x)&&(0,a.isNumber)(m.x)&&(0,a.isNumber)(g.y)&&(0,a.isNumber)(m.y)){var b=e["".concat(d,"-").concat(h)],x=b.vl,w=b.vx,_=b.vy,S=(x-i(r))/x*o*s(r)*y,E=w*S,A=_*S,M=u[c];t[p].x-=E*M,t[p].y-=A*M,t[f].x+=E*(1-M),t[f].y+=A*(1-M)}}}}))},e.prototype.getType=function(){return"comboForce"},e}(o.Base);e.ComboForceLayout=s},58006:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.ConcentricLayout=void 0;var o=n(81422),a=function(t){function e(e){var n=t.call(this)||this;return n.nodeSize=30,n.minNodeSpacing=10,n.nodeSpacing=10,n.preventOverlap=!1,n.equidistant=!1,n.startAngle=1.5*Math.PI,n.clockwise=!0,n.sortBy="degree",n.nodes=[],n.edges=[],n.width=300,n.height=300,n.onLayoutEnd=function(){},n.updateCfg(e),n}return i(e,t),e.prototype.getDefaultCfg=function(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:1.5*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},e.prototype.execute=function(){var t,e,n=this,r=n.nodes,i=n.edges,a=r.length;if(0!==a){n.width||"undefined"==typeof window||(n.width=window.innerWidth),n.height||"undefined"==typeof window||(n.height=window.innerHeight),n.center||(n.center=[n.width/2,n.height/2]);var s=n.center;if(1===a)return r[0].x=s[0],r[0].y=s[1],void(null===(e=n.onLayoutEnd)||void 0===e||e.call(n));var u,l=n.nodeSize,c=n.nodeSpacing,h=[],d=0;u=(0,o.isArray)(l)?Math.max(l[0],l[1]):l,(0,o.isArray)(c)?d=Math.max(c[0],c[1]):(0,o.isNumber)(c)&&(d=c),r.forEach((function(t){h.push(t);var e=u;(0,o.isArray)(t.size)?e=Math.max(t.size[0],t.size[1]):(0,o.isNumber)(t.size)?e=t.size:(0,o.isObject)(t.size)&&(e=Math.max(t.size.width,t.size.height)),u=Math.max(u,e),(0,o.isFunction)(c)&&(d=Math.max(c(t),d))})),n.clockwise=void 0!==n.counterclockwise?!n.counterclockwise:n.clockwise;var f={},p={};if(h.forEach((function(t,e){f[t.id]=t,p[t.id]=e})),!("degree"!==n.sortBy&&(0,o.isString)(n.sortBy)&&void 0!==h[0][n.sortBy]||(n.sortBy="degree",(0,o.isNumber)(r[0].degree)))){var m=(0,o.getDegree)(r.length,p,i);h.forEach((function(t,e){t.degree=m[e].all}))}h.sort((function(t,e){return e[n.sortBy]-t[n.sortBy]})),n.maxValueNode=h[0],n.maxLevelDiff=n.maxLevelDiff||n.maxValueNode[n.sortBy]/4;var g=[[]],v=g[0];h.forEach((function(t){if(v.length>0){var e=Math.abs(v[0][n.sortBy]-t[n.sortBy]);n.maxLevelDiff&&e>=n.maxLevelDiff&&(v=[],g.push(v))}v.push(t)}));var y=u+(d||n.minNodeSpacing);if(!n.preventOverlap){var b=g.length>0&&g[0].length>1,x=(Math.min(n.width,n.height)/2-y)/(g.length+(b?1:0));y=Math.min(y,x)}var w=0;if(g.forEach((function(t){var e=n.sweep;void 0===e&&(e=2*Math.PI-2*Math.PI/t.length);var r=t.dTheta=e/Math.max(1,t.length-1);if(t.length>1&&n.preventOverlap){var i=Math.cos(r)-Math.cos(0),o=Math.sin(r)-Math.sin(0),a=Math.sqrt(y*y/(i*i+o*o));w=Math.max(a,w)}t.r=w,w+=y})),n.equidistant){for(var _=0,S=0,E=0;E<g.length;E++){var A=g[E].r-S;_=Math.max(_,A)}S=0,g.forEach((function(t,e){0===e&&(S=t.r),t.r=S,S+=_}))}return g.forEach((function(t){var e=t.dTheta,r=t.r;t.forEach((function(t,i){var o=n.startAngle+(n.clockwise?1:-1)*e*i;t.x=s[0]+r*Math.cos(o),t.y=s[1]+r*Math.sin(o)}))})),n.onLayoutEnd&&n.onLayoutEnd(),{nodes:r,edges:i}}null===(t=n.onLayoutEnd)||void 0===t||t.call(n)},e.prototype.getType=function(){return"concentric"},e}(n(46271).Base);e.ConcentricLayout=a},55573:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FORCE_LAYOUT_TYPE_MAP=e.LAYOUT_MESSAGE=void 0,e.LAYOUT_MESSAGE={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"},e.FORCE_LAYOUT_TYPE_MAP={gForce:!0,force2:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0}},79829:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.DagreLayout=void 0;var a=o(n(43038)),s=n(81422),u=n(46271),l=n(78326),c=function(t){function e(e){var n=t.call(this)||this;return n.rankdir="TB",n.nodesep=50,n.ranksep=50,n.controlPoints=!1,n.sortByCombo=!1,n.edgeLabelSpace=!0,n.radial=!1,n.nodes=[],n.edges=[],n.onLayoutEnd=function(){},n.layoutNode=function(t){var e=n.nodes.find((function(e){return e.id===t}));return!e||!1!==e.layout},n.updateCfg(e),n}return i(e,t),e.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}},e.prototype.execute=function(){var t,e,n,r,i=this,o=this,u=o.nodes,c=o.nodeSize,d=o.rankdir,f=o.combos,p=o.begin,m=o.radial,g=o.comboEdges,v=void 0===g?[]:g,y=o.vedges,b=void 0===y?[]:y;if(u){var x=o.edges||[],w=new l.Graph({multigraph:!0,compound:!0});o.nodeMap={};var _={};u.forEach((function(t){o.nodeMap[t.id]=t,t.comboId&&(_[t.comboId]=_[t.comboId]||[],_[t.comboId].push(t.id))}));var S,E=[],A={};(null===(t=o.nodeOrder)||void 0===t?void 0:t.length)?(o.nodeOrder.forEach((function(t){A[t]=!0,E.push(o.nodeMap[t])})),u.forEach((function(t){A[t.id]||E.push(t)}))):E=u,S=c?(0,s.isArray)(c)?function(){return c}:function(){return[c,c]}:function(t){return t.size?(0,s.isArray)(t.size)?t.size:(0,s.isObject)(t.size)?[t.size.width||40,t.size.height||40]:[t.size,t.size]:[40,40]};var M=(0,s.getFunc)(o.ranksep,50,o.ranksepFunc),C=(0,s.getFunc)(o.nodesep,50,o.nodesepFunc),T=C,k=M;"LR"!==d&&"RL"!==d||(T=M,k=C),w.setDefaultEdgeLabel((function(){return{}})),w.setGraph(o);var I={};this.sortByCombo&&f&&f.forEach((function(t){if(I[t.id]=t,t.collapsed){var e=S(t),n=k(t),r=T(t),i=e[0]+2*r,o=e[1]+2*n;w.setNode(t.id,{width:i,height:o})}t.parentId&&(I[t.parentId]||w.setNode(t.parentId,{}),w.setParent(t.id,t.parentId))})),E.filter((function(t){return!1!==t.layout})).forEach((function(t){var e=S(t),n=k(t),r=T(t),o=e[0]+2*r,a=e[1]+2*n,u=t.layer;(0,s.isNumber)(u)?w.setNode(t.id,{width:o,height:a,layer:u}):w.setNode(t.id,{width:o,height:a}),i.sortByCombo&&t.comboId&&(I[t.comboId]||(I[t.comboId]={id:t.comboId},w.setNode(t.comboId,{})),w.setParent(t.id,t.comboId))})),x.forEach((function(t){var e=(0,s.getEdgeTerminal)(t,"source"),n=(0,s.getEdgeTerminal)(t,"target");i.layoutNode(e)&&i.layoutNode(n)&&w.setEdge(e,n,{weight:t.weight||1})})),null===(e=null==v?void 0:v.concat(b||[]))||void 0===e||e.forEach((function(t){var e,n,r=t.source,i=t.target,o=(null===(e=I[r])||void 0===e?void 0:e.collapsed)?[r]:_[r]||[r],a=(null===(n=I[i])||void 0===n?void 0:n.collapsed)?[i]:_[i]||[i];o.forEach((function(e){a.forEach((function(n){w.setEdge(e,n,{weight:t.weight||1})}))}))}));var N=void 0;(null===(n=o.preset)||void 0===n?void 0:n.nodes)&&(N=new l.Graph({multigraph:!0,compound:!0}),o.preset.nodes.forEach((function(t){null==N||N.setNode(t.id,t)}))),a.default.layout(w,{prevGraph:N,edgeLabelSpace:o.edgeLabelSpace,keepNodeOrder:Boolean(!!o.nodeOrder),nodeOrder:o.nodeOrder});var P=[0,0];if(p){var O=1/0,L=1/0;w.nodes().forEach((function(t){var e=w.node(t);O>e.x&&(O=e.x),L>e.y&&(L=e.y)})),w.edges().forEach((function(t){var e;null===(e=w.edge(t).points)||void 0===e||e.forEach((function(t){O>t.x&&(O=t.x),L>t.y&&(L=t.y)}))})),P[0]=p[0]-O,P[1]=p[1]-L}var R="LR"===d||"RL"===d;if(m){var D=this,z=D.focusNode,F=D.ranksep,B=D.getRadialPos,U=(0,s.isString)(z)?z:null==z?void 0:z.id,j=U?null===(r=w.node(U))||void 0===r?void 0:r._rank:0,V=[],H=R?"y":"x",G=R?"height":"width",W=1/0,X=-1/0;w.nodes().forEach((function(t){var e=w.node(t);if(o.nodeMap[t]){var n=C(o.nodeMap[t]);if(0===j)V[e._rank]||(V[e._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),V[e._rank].nodes.push(t),V[e._rank].totalWidth+=2*n+e[G],V[e._rank].maxSize<Math.max(e.width,e.height)&&(V[e._rank].maxSize=Math.max(e.width,e.height));else{var r=e._rank-j;if(0===r)V[r]||(V[r]={nodes:[],totalWidth:0,maxSize:-1/0}),V[r].nodes.push(t),V[r].totalWidth+=2*n+e[G],V[r].maxSize<Math.max(e.width,e.height)&&(V[r].maxSize=Math.max(e.width,e.height));else{var i=Math.abs(r);V[i]||(V[i]={left:[],right:[],totalWidth:0,maxSize:-1/0}),V[i].totalWidth+=2*n+e[G],V[i].maxSize<Math.max(e.width,e.height)&&(V[i].maxSize=Math.max(e.width,e.height)),r<0?V[i].left.push(t):V[i].right.push(t)}}var a=e[H]-e[G]/2-n,s=e[H]+e[G]/2+n;a<W&&(W=a),s>X&&(X=s)}}));var Y=F||50,q={},$=(X-W)/.9,K=[.5*(W+X-$),.5*(W+X+$)],Z=function(t,e,n,r){void 0===n&&(n=-1/0),void 0===r&&(r=[0,1]);var i=n;return t.forEach((function(t){var n=w.node(t);q[t]=e;var a=B(n[H],K,$,e,r),s=a.x,u=a.y;if(o.nodeMap[t]){o.nodeMap[t].x=s+P[0],o.nodeMap[t].y=u+P[1],o.nodeMap[t]._order=n._order;var l=M(o.nodeMap[t]);i<l&&(i=l)}})),i},Q=!0;V.forEach((function(t){var e,n,r,i,a,s,u;if((null===(e=null==t?void 0:t.nodes)||void 0===e?void 0:e.length)||(null===(n=null==t?void 0:t.left)||void 0===n?void 0:n.length)||(null===(r=null==t?void 0:t.right)||void 0===r?void 0:r.length)){if(Q&&1===t.nodes.length){var l=t.nodes[0];if(!o.nodeMap[l])return;return o.nodeMap[l].x=P[0],o.nodeMap[l].y=P[1],q[t.nodes[0]]=0,Y=M(o.nodeMap[l]),void(Q=!1)}Y=Math.max(Y,t.totalWidth/(2*Math.PI));var c=-1/0;if(0===j||(null===(i=t.nodes)||void 0===i?void 0:i.length))c=Z(t.nodes,Y,c,[0,1]);else{var h=(null===(a=t.left)||void 0===a?void 0:a.length)/((null===(s=t.left)||void 0===s?void 0:s.length)+(null===(u=t.right)||void 0===u?void 0:u.length));c=Z(t.left,Y,c,[0,h]),c=Z(t.right,Y,c,[h+.05,1])}Y+=c,Q=!1,t.maxSize}})),w.edges().forEach((function(t){var e,n,r,i=w.edge(t),a=x.findIndex((function(e){var n=(0,s.getEdgeTerminal)(e,"source"),r=(0,s.getEdgeTerminal)(e,"target");return n===t.v&&r===t.w}));if(!(a<=-1)&&o.edgeLabelSpace&&o.controlPoints&&"loop"!==x[a].type){var u="x"===H?"y":"x",l=null===(e=null==i?void 0:i.points)||void 0===e?void 0:e.slice(1,i.points.length-1),c=[],h=null===(n=w.node(t.v))||void 0===n?void 0:n[u],d=h-(null===(r=w.node(t.w))||void 0===r?void 0:r[u]),f=q[t.v],p=f-q[t.w];null==l||l.forEach((function(t){var e=(t[u]-h)/d*p+f,n=B(t[H],K,$,e);c.push({x:n.x+P[0],y:n.y+P[1]})})),x[a].controlPoints=c}}))}else{var J=new Set,tt="BT"===d||"RL"===d?function(t,e){return e-t}:function(t,e){return t-e};w.nodes().forEach((function(t){var e=w.node(t);if(e){var n=i.nodeMap[t];n||(n=null==f?void 0:f.find((function(e){return e.id===t}))),n&&(n.x=e.x+P[0],n.y=e.y+P[1],n._order=e._order,J.add(R?n.x:n.y))}}));var et=Array.from(J).sort(tt),nt=R?function(t,e){return t.x!==e.x}:function(t,e){return t.y!==e.y},rt=R?function(t,e,n){var r=Math.max(e.y,n.y),i=Math.min(e.y,n.y);return t.filter((function(t){return t.y<=r&&t.y>=i}))}:function(t,e,n){var r=Math.max(e.x,n.x),i=Math.min(e.x,n.x);return t.filter((function(t){return t.x<=r&&t.x>=i}))};w.edges().forEach((function(t){var e,n=w.edge(t),r=x.findIndex((function(e){var n=(0,s.getEdgeTerminal)(e,"source"),r=(0,s.getEdgeTerminal)(e,"target");return n===t.v&&r===t.w}));if(!(r<=-1)&&o.edgeLabelSpace&&o.controlPoints&&"loop"!==x[r].type){null===(e=null==n?void 0:n.points)||void 0===e||e.forEach((function(t){t.x+=P[0],t.y+=P[1]}));var i=o.nodeMap[t.v],a=o.nodeMap[t.w];x[r].controlPoints=h(null==n?void 0:n.points,i,a,et,R,nt,rt)}}))}return o.onLayoutEnd&&o.onLayoutEnd(),{nodes:u,edges:x}}},e.prototype.getRadialPos=function(t,e,n,r,i){void 0===i&&(i=[0,1]);var o=(t-e[0])/n,a=2*(o=o*(i[1]-i[0])+i[0])*Math.PI;return{x:Math.cos(a)*r,y:Math.sin(a)*r}},e.prototype.getType=function(){return"dagre"},e}(u.Base);e.DagreLayout=c;var h=function(t,e,n,r,i,o,a){var s=(null==t?void 0:t.slice(1,t.length-1))||[];if(e&&n){var u=e.x,l=e.y,c=n.x,h=n.y;if(i&&(u=e.y,l=e.x,c=n.y,h=n.x),h!==l&&u!==c){var d=r.indexOf(l),f=r[d+1];if(f){var p=s[0],m=i?{x:(l+f)/2,y:(null==p?void 0:p.y)||c}:{x:(null==p?void 0:p.x)||c,y:(l+f)/2};p&&!o(p,m)||s.unshift(m)}var g=r.indexOf(h),v=Math.abs(g-d);if(1===v)(s=a(s,e,n)).length||s.push(i?{x:(l+h)/2,y:u}:{x:u,y:(l+h)/2});else if(v>1){var y=r[g-1];if(y){var b=s[s.length-1],x=i?{x:(h+y)/2,y:(null==b?void 0:b.y)||c}:{x:(null==b?void 0:b.x)||u,y:(h+y)/2};b&&!o(b,x)||s.push(x)}}}}return s}},69524:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.DagreCompoundLayout=void 0;var s=n(46271),u=n(89861),l=n(81422),c=function(t){function e(e){var n=t.call(this)||this;return n.rankdir="TB",n.nodesep=50,n.edgesep=5,n.ranksep=50,n.controlPoints=!0,n.anchorPoint=!0,n.nodes=[],n.edges=[],n.combos=[],n.onLayoutEnd=function(){},n.updateCfg(e),n}return i(e,t),e.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,begin:void 0,nodeSize:void 0,nodesep:50,ranksep:50,controlPoints:!0,anchorPoint:!0}},e.prototype.init=function(t){var e=t.hiddenNodes||[],n=t.hiddenEdges||[],r=t.hiddenCombos||[];this.nodes=this.getDataByOrder((t.nodes||[]).concat(e)),this.edges=this.getDataByOrder((t.edges||[]).concat(n)),this.combos=(t.combos||[]).concat(r.map((function(t){return o(o({},t),{collapsed:!0})})))},e.prototype.execute=function(){var t=this,e=t.nodes,n=t.edges;if(e){var r=t.getLayoutConfig(),i=r.graphDef,o=r.graphOption,a=r.graphSettings,s=(0,u.buildGraph)(i,o,a),l=(0,u.flatGraph)(s,!0);return this.updatePosition(l),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n}}},e.prototype.getNodePath=function(t){var e=this.nodes,n=this.combos,r=e.find((function(e){return e.id===t})),i=function(t,e){void 0===e&&(e=[]);var r=n.find((function(e){return e.id===t}));return r?(e.unshift(t),r.parentId?i(r.parentId,e):e):e};return r&&r.comboId?i(r.comboId,[t]):[t]},e.prototype.getLayoutConfig=function(){var t,e,n,r,i=this,s=i.nodes,c=i.edges,h=i.combos,d=i.nodeSize,f=i.rankdir,p=i.align,m=i.edgesep,g=i.nodesep,v=i.ranksep,y=i.settings,b=(h||[]).reduce((function(t,e){var n=s.filter((function(t){return t.comboId===e.id})).map((function(t){return t.id})),r=(h||[]).filter((function(t){return t.parentId===e.id})).map((function(t){return t.id}));return(n.length||r.length)&&(t[e.id]=a(a([],n,!0),r,!0)),t}),{});r=d?(0,l.isArray)(d)?function(){return d}:function(){return[d,d]}:function(t){return t&&t.size?(0,l.isArray)(t.size)?t.size:(0,l.isObject)(t.size)?[t.size.width||40,t.size.height||40]:[t.size,t.size]:[40,40]};var x,w=(x=null==h?void 0:h[0])&&x.size?(0,l.isArray)(x.size)?x.size:[x.size,x.size]:[80,40],_=w[0],S=w[1],E=null===(e=null===(t=i.graphSettings)||void 0===t?void 0:t.subScene)||void 0===e?void 0:e.meta,A=(null===(n=h.find((function(t){return!t.collapsed})))||void 0===n?void 0:n.padding)||[20,20,20,20],M=A[0],C=A[1],T=A[2],k=A[3],I={compound:b,nodes:a([],(s||[]).map((function(t){var e=r(t),n=e[0],i=e[1];return o(o({},t),{width:n,height:i})})),!0),edges:a([],(c||[]).map((function(t){return o(o({},t),{v:t.source,w:t.target})})),!0)},N={expanded:(h||[]).filter((function(t){return!t.collapsed})).map((function(t){return t.id}))},P={graph:{meta:{align:p,rankDir:f,nodeSep:g,edgeSep:m,rankSep:v}},subScene:{meta:{paddingTop:M||(null==E?void 0:E.paddingTop)||20,paddingRight:C||(null==E?void 0:E.paddingRight)||20,paddingBottom:T||(null==E?void 0:E.paddingBottom)||20,paddingLeft:k||(null==E?void 0:E.paddingLeft)||20,labelHeight:0}},nodeSize:{meta:{width:_,height:S}}},O=(0,u.mergeConfig)(y,o({},(0,u.mergeConfig)(P,u.LAYOUT_CONFIG)));return i.graphSettings=O,{graphDef:I,graphOption:N,graphSettings:O}},e.prototype.updatePosition=function(t){var e=t.nodes,n=t.edges;this.updateNodePosition(e,n),this.updateEdgePosition(e,n)},e.prototype.getBegin=function(t,e){var n=this.begin,r=[0,0];if(n){var i=1/0,o=1/0;t.forEach((function(t){i>t.x&&(i=t.x),o>t.y&&(o=t.y)})),e.forEach((function(t){t.points.forEach((function(t){i>t.x&&(i=t.x),o>t.y&&(o=t.y)}))})),r[0]=n[0]-i,r[1]=n[1]-o}return r},e.prototype.updateNodePosition=function(t,e){var n=this,r=n.combos,i=n.nodes,o=n.edges,a=n.anchorPoint,s=n.graphSettings,l=this.getBegin(t,e);t.forEach((function(t){var n,c=t.x,h=t.y,d=t.id,f=t.type,p=t.coreBox;if(f===u.HierarchyNodeType.META&&d!==u.ROOT_NAME){var m=r.findIndex((function(t){return t.id===d})),g=null===(n=null==s?void 0:s.subScene)||void 0===n?void 0:n.meta;r[m].offsetX=c+l[0],r[m].offsetY=h+l[1],r[m].fixSize=[p.width,p.height],r[m].fixCollapseSize=[p.width,p.height],t.expanded?r[m].padding=[null==g?void 0:g.paddingTop,null==g?void 0:g.paddingRight,null==g?void 0:g.paddingBottom,null==g?void 0:g.paddingLeft]:r[m].padding=[0,0,0,0]}else if(f===u.HierarchyNodeType.OP){m=i.findIndex((function(t){return t.id===d}));if(i[m].x=c+l[0],i[m].y=h+l[1],a){var v=[],y=e.filter((function(t){return t.v===d})),b=e.filter((function(t){return t.w===d}));y.length>0&&y.forEach((function(e){var n=e.points[0],r=(n.x-c)/t.width+.5,i=(n.y-h)/t.height+.5;v.push([r,i]),e.baseEdgeList.forEach((function(t){var e=o.find((function(e){return e.source===t.v&&e.target===t.w}));e&&(e.sourceAnchor=v.length-1)}))})),b.length>0&&b.forEach((function(e){var n=e.points[e.points.length-1],r=(n.x-c)/t.width+.5,i=(n.y-h)/t.height+.5;v.push([r,i]),e.baseEdgeList.forEach((function(t){var e=o.find((function(e){return e.source===t.v&&e.target===t.w}));e&&(e.targetAnchor=v.length-1)}))})),i[m].anchorPoints=v.length>0?v:i[m].anchorPoints||[]}}}))},e.prototype.updateEdgePosition=function(t,e){var n=this,r=n.combos,i=n.edges,s=n.controlPoints,l=this.getBegin(t,e);s&&(r.forEach((function(t){t.inEdges=[],t.outEdges=[]})),i.forEach((function(e){var i,s,c,h,d=t.find((function(t){return t.id===e.source})),f=t.find((function(t){return t.id===e.target})),p=[],m=[];if(d&&f)m=(0,u.getEdges)(null==d?void 0:d.id,null==f?void 0:f.id,t);else if(!d||!f){var g=n.getNodePath(e.source),v=n.getNodePath(e.target),y=g.reverse().slice(d?0:1).find((function(e){return t.find((function(t){return t.id===e}))})),b=v.reverse().slice(f?0:1).find((function(e){return t.find((function(t){return t.id===e}))}));d=t.find((function(t){return t.id===y})),f=t.find((function(t){return t.id===b})),m=(0,u.getEdges)(null==d?void 0:d.id,null==f?void 0:f.id,t,{v:e.source,w:e.target})}if(p=(p=m.reduce((function(t,e){return a(a([],t,!0),e.points.map((function(t){return o(o({},t),{x:t.x+l[0],y:t.y+l[1]})})),!0)}),[])).slice(1,-1),e.controlPoints=p,(null==f?void 0:f.type)===u.NodeType.META){var x=r.findIndex((function(t){return t.id===(null==f?void 0:f.id)}));if(!r[x]||(null===(i=r[x].inEdges)||void 0===i?void 0:i.some((function(t){return t.source===d.id&&t.target===f.id}))))return;null===(s=r[x].inEdges)||void 0===s||s.push({source:d.id,target:f.id,controlPoints:p})}if((null==d?void 0:d.type)===u.NodeType.META){x=r.findIndex((function(t){return t.id===(null==d?void 0:d.id)}));if(!r[x]||(null===(c=r[x].outEdges)||void 0===c?void 0:c.some((function(t){return t.source===d.id&&t.target===f.id}))))return;null===(h=r[x].outEdges)||void 0===h||h.push({source:d.id,target:f.id,controlPoints:p})}})))},e.prototype.getType=function(){return"dagreCompound"},e.prototype.getDataByOrder=function(t){return t.every((function(t){return void 0!==t.layoutOrder}))||t.forEach((function(t,e){t.layoutOrder=e})),t.sort((function(t,e){return t.layoutOrder-e.layoutOrder}))},e}(s.Base);e.DagreCompoundLayout=c},78326:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=void 0;var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(n(46888).Graph);e.Graph=o},43038:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(38733)),o=n(11519);e.default={layout:i.default,util:{time:o.time,notime:o.notime}}},99367:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(99952)),o=function(t){var e=[],n={},r={},i=function(o){var a;r[o]||(r[o]=!0,n[o]=!0,null===(a=t.outEdges(o))||void 0===a||a.forEach((function(t){n[t.w]?e.push(t):i(t.w)})),delete n[o])};return t.nodes().forEach(i),e};e.default={run:function(t){var e="greedy"===t.graph().acyclicer?(0,i.default)(t,function(t){return function(e){var n;return(null===(n=t.edge(e))||void 0===n?void 0:n.weight)||1}}(t)):o(t);null==e||e.forEach((function(e){var n=t.edge(e);t.removeEdgeObj(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,"rev-".concat(Math.random()))}))},undo:function(t){t.edges().forEach((function(e){var n=t.edge(e);if(n.reversed){t.removeEdgeObj(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}}))}}},82342:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(11519),i=function(t,e,n,i,o,a){var s={rank:a,borderType:e,width:0,height:0},u=o[e][a-1],l=(0,r.addDummyNode)(t,"border",s,n);o[e][a]=l,t.setParent(l,i),u&&t.setEdge(u,l,{weight:1})};e.default=function(t){var e,n=function(e){var r=t.children(e),o=t.node(e);if((null==r?void 0:r.length)&&r.forEach((function(t){return n(t)})),o.hasOwnProperty("minRank")){o.borderLeft=[],o.borderRight=[];for(var a=o.minRank,s=o.maxRank+1;a<s;a+=1)i(t,"borderLeft","_bl",e,o,a),i(t,"borderRight","_br",e,o,a)}};null===(e=t.children())||void 0===e||e.forEach((function(t){return n(t)}))}},30347:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){t.nodes().forEach((function(e){r(t.node(e))})),t.edges().forEach((function(e){r(t.edge(e))}))},r=function(t){var e=t.width;t.width=t.height,t.height=e},i=function(t){t.nodes().forEach((function(e){o(t.node(e))})),t.edges().forEach((function(e){var n,r=t.edge(e);null===(n=r.points)||void 0===n||n.forEach((function(t){return o(t)})),r.hasOwnProperty("y")&&o(r)}))},o=function(t){(null==t?void 0:t.y)&&(t.y=-t.y)},a=function(t){t.nodes().forEach((function(e){s(t.node(e))})),t.edges().forEach((function(e){var n,r=t.edge(e);null===(n=r.points)||void 0===n||n.forEach((function(t){return s(t)})),r.hasOwnProperty("x")&&s(r)}))},s=function(t){var e=t.x;t.x=t.y,t.y=e};e.default={adjust:function(t){var e,r=null===(e=t.graph().rankdir)||void 0===e?void 0:e.toLowerCase();"lr"!==r&&"rl"!==r||n(t)},undo:function(t){var e,r=null===(e=t.graph().rankdir)||void 0===e?void 0:e.toLowerCase();"bt"!==r&&"rl"!==r||i(t),"lr"!==r&&"rl"!==r||(a(t),n(t))}}},57110:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e){if("next"!==t&&"prev"!==t)return e},r=function(t){t.prev.next=t.next,t.next.prev=t.prev,delete t.next,delete t.prev},i=function(){function t(){var t={};t.prev=t,t.next=t.prev,this.shortcut=t}return t.prototype.dequeue=function(){var t=this.shortcut,e=t.prev;if(e&&e!==t)return r(e),e},t.prototype.enqueue=function(t){var e=this.shortcut;t.prev&&t.next&&r(t),t.next=e.next,e.next.prev=t,e.next=t,t.prev=e},t.prototype.toString=function(){for(var t=[],e=this.shortcut,r=e.prev;r!==e;)t.push(JSON.stringify(r,n)),r=null==r?void 0:r.prev;return"[".concat(t.join(", "),"]")},t}();e.default=i},99952:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(n(57110)),s=n(46888),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(a.default),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(s.Graph),c=function(){return 1},h=function(t,e,n){for(var r,i=[],o=e[e.length-1],a=e[0];t.nodeCount();){for(;r=a.dequeue();)d(t,e,n,r);for(;r=o.dequeue();)d(t,e,n,r);if(t.nodeCount())for(var s=e.length-2;s>0;--s)if(r=e[s].dequeue()){i=i.concat(d(t,e,n,r,!0));break}}return i},d=function(t,e,n,r,i){var o,a,s=[];return null===(o=t.inEdges(r.v))||void 0===o||o.forEach((function(r){var o=t.edge(r),a=t.node(r.v);i&&s.push({v:r.v,w:r.w,in:0,out:0}),void 0===a.out&&(a.out=0),a.out-=o,p(e,n,a)})),null===(a=t.outEdges(r.v))||void 0===a||a.forEach((function(r){var i=t.edge(r),o=r.w,a=t.node(o);void 0===a.in&&(a.in=0),a.in-=i,p(e,n,a)})),t.removeNode(r.v),i?s:void 0},f=function(t,e){var n=new l,r=0,i=0;t.nodes().forEach((function(t){n.setNode(t,{v:t,in:0,out:0})})),t.edges().forEach((function(t){var o=n.edge(t)||0,a=(null==e?void 0:e(t))||1,s=o+a;n.setEdge(t.v,t.w,s),i=Math.max(i,n.node(t.v).out+=a),r=Math.max(r,n.node(t.w).in+=a)}));for(var o=[],a=i+r+3,s=0;s<a;s++)o.push(new u);var c=r+1;return n.nodes().forEach((function(t){p(o,c,n.node(t))})),{buckets:o,zeroIdx:c,graph:n}},p=function(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)};e.default=function(t,e){var n;if(t.nodeCount()<=1)return[];var r=f(t,e||c);return null===(n=h(r.graph,r.buckets,r.zeroIdx).map((function(e){return t.outEdges(e.v,e.w)})))||void 0===n?void 0:n.flat()}},38733:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(99367)),a=i(n(67484)),s=i(n(96686)),u=n(11519),l=i(n(66873)),c=i(n(3396)),h=i(n(82342)),d=i(n(30347)),f=i(n(96524)),p=i(n(33099)),m=i(n(41696)),g=n(78326),v=function(t,e,n){e("    removeSelfEdges",(function(){F(t)})),e("    acyclic",(function(){o.default.run(t)})),e("    nestingGraph.run",(function(){c.default.run(t)})),e("    rank",(function(){(0,s.default)((0,u.asNonCompoundGraph)(t))})),e("    injectEdgeLabelProxies",(function(){I(t)})),e("    removeEmptyRanks",(function(){(0,u.removeEmptyRanks)(t)})),e("    nestingGraph.cleanup",(function(){c.default.cleanup(t)})),e("    normalizeRanks",(function(){(0,u.normalizeRanks)(t)})),e("    assignRankMinMax",(function(){N(t)})),e("    removeEdgeLabelProxies",(function(){P(t)})),e("    normalize.run",(function(){a.default.run(t)})),e("    parentDummyChains",(function(){(0,l.default)(t)})),e("    addBorderSegments",(function(){(0,h.default)(t)})),n&&n.keepNodeOrder&&e("    initDataOrder",(function(){(0,m.default)(t,n.nodeOrder)})),e("    order",(function(){(0,f.default)(t,null==n?void 0:n.keepNodeOrder)})),e("    insertSelfEdges",(function(){B(t)})),e("    adjustCoordinateSystem",(function(){d.default.adjust(t)})),e("    position",(function(){(0,p.default)(t)})),e("    positionSelfEdges",(function(){U(t)})),e("    removeBorderNodes",(function(){z(t)})),e("    normalize.undo",(function(){a.default.undo(t)})),e("    fixupEdgeLabelCoords",(function(){R(t)})),e("    undoCoordinateSystem",(function(){d.default.undo(t)})),e("    translateGraph",(function(){O(t)})),e("    assignNodeIntersects",(function(){L(t)})),e("    reversePoints",(function(){D(t)})),e("    acyclic.undo",(function(){o.default.undo(t)}))},y=function(t,e){t.nodes().forEach((function(n){var r=t.node(n),i=e.node(n);void 0!==i?(r.fixorder=i._order,delete i._order):delete r.fixorder}))},b=function(t,e){t.nodes().forEach((function(n){var r,i=t.node(n);if(i){var o=e.node(n);i.x=o.x,i.y=o.y,i._order=o.order,i._rank=o.rank,(null===(r=e.children(n))||void 0===r?void 0:r.length)&&(i.width=o.width,i.height=o.height)}})),t.edges().forEach((function(n){var r=t.edge(n),i=e.edge(n);r.points=i?i.points:[],i&&i.hasOwnProperty("x")&&(r.x=i.x,r.y=i.y)})),t.graph().width=e.graph().width,t.graph().height=e.graph().height},x=["nodesep","edgesep","ranksep","marginx","marginy"],w={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},_=["acyclicer","ranker","rankdir","align"],S=["width","height","layer","fixorder"],E={width:0,height:0},A=["minlen","weight","width","height","labeloffset"],M={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},C=["labelpos"],T=function(t){var e=new g.Graph({multigraph:!0,compound:!0}),n=V(t.graph()),i={};return null==_||_.forEach((function(t){void 0!==n[t]&&(i[t]=n[t])})),e.setGraph(Object.assign({},w,j(n,x),i)),t.nodes().forEach((function(n){var i=V(t.node(n)),o=r(r({},E),i),a=j(o,S);e.setNode(n,a),e.setParent(n,t.parent(n))})),t.edges().forEach((function(n){var r=V(t.edge(n)),i={};null==C||C.forEach((function(t){void 0!==r[t]&&(i[t]=r[t])})),e.setEdgeObj(n,Object.assign({},M,j(r,A),i))})),e},k=function(t){var e=t.graph();e.ranksep||(e.ranksep=0),e.ranksep/=2,t.nodes().forEach((function(e){var n=t.node(e);isNaN(n.layer)||n.layer||(n.layer=0)})),t.edges().forEach((function(n){var r,i=t.edge(n);i.minlen*=2,"c"!==(null===(r=i.labelpos)||void 0===r?void 0:r.toLowerCase())&&("TB"===e.rankdir||"BT"===e.rankdir?i.width+=i.labeloffset:i.height+=i.labeloffset)}))},I=function(t){t.edges().forEach((function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),i={e,rank:(t.node(e.w).rank-r.rank)/2+r.rank};(0,u.addDummyNode)(t,"edge-proxy",i,"_ep")}}))},N=function(t){var e=0;t.nodes().forEach((function(n){var r,i,o=t.node(n);o.borderTop&&(o.minRank=null===(r=t.node(o.borderTop))||void 0===r?void 0:r.rank,o.maxRank=null===(i=t.node(o.borderBottom))||void 0===i?void 0:i.rank,e=Math.max(e,o.maxRank||-1/0))})),t.graph().maxRank=e},P=function(t){t.nodes().forEach((function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))}))},O=function(t){var e,n,r=0,i=0,o=t.graph(),a=o.marginx||0,s=o.marginy||0,u=function(t){if(t){var o=t.x,a=t.y,s=t.width,u=t.height;isNaN(o)||isNaN(s)||(void 0===e&&(e=o-s/2),e=Math.min(e,o-s/2),r=Math.max(r,o+s/2)),isNaN(a)||isNaN(u)||(void 0===n&&(n=a-u/2),n=Math.min(n,a-u/2),i=Math.max(i,a+u/2))}};t.nodes().forEach((function(e){u(t.node(e))})),t.edges().forEach((function(e){var n=t.edge(e);(null==n?void 0:n.hasOwnProperty("x"))&&u(n)})),e-=a,n-=s,t.nodes().forEach((function(r){var i=t.node(r);i&&(i.x-=e,i.y-=n)})),t.edges().forEach((function(r){var i,o=t.edge(r);null===(i=o.points)||void 0===i||i.forEach((function(t){t.x-=e,t.y-=n})),o.hasOwnProperty("x")&&(o.x-=e),o.hasOwnProperty("y")&&(o.y-=n)})),o.width=r-e+a,o.height=i-n+s},L=function(t){t.edges().forEach((function(e){var n,r,i=t.edge(e),o=t.node(e.v),a=t.node(e.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=a,r=o),i.points.unshift((0,u.intersectRect)(o,n)),i.points.push((0,u.intersectRect)(a,r))}))},R=function(t){t.edges().forEach((function(e){var n=t.edge(e);if(null==n?void 0:n.hasOwnProperty("x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}}))},D=function(t){t.edges().forEach((function(e){var n,r=t.edge(e);r.reversed&&(null===(n=r.points)||void 0===n||n.reverse())}))},z=function(t){t.nodes().forEach((function(e){var n,r,i;if(null===(n=t.children(e))||void 0===n?void 0:n.length){var o=t.node(e),a=t.node(o.borderTop),s=t.node(o.borderBottom),u=t.node(o.borderLeft[(null===(r=o.borderLeft)||void 0===r?void 0:r.length)-1]),l=t.node(o.borderRight[(null===(i=o.borderRight)||void 0===i?void 0:i.length)-1]);o.width=Math.abs((null==l?void 0:l.x)-(null==u?void 0:u.x))||10,o.height=Math.abs((null==s?void 0:s.y)-(null==a?void 0:a.y))||10,o.x=((null==u?void 0:u.x)||0)+o.width/2,o.y=((null==a?void 0:a.y)||0)+o.height/2}})),t.nodes().forEach((function(e){var n;"border"===(null===(n=t.node(e))||void 0===n?void 0:n.dummy)&&t.removeNode(e)}))},F=function(t){t.edges().forEach((function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e,label:t.edge(e)}),t.removeEdgeObj(e)}}))},B=function(t){var e=(0,u.buildLayerMatrix)(t);null==e||e.forEach((function(e){var n=0;null==e||e.forEach((function(e,r){var i,o=t.node(e);o.order=r+n,null===(i=o.selfEdges)||void 0===i||i.forEach((function(e){(0,u.addDummyNode)(t,"selfedge",{width:e.label.width,height:e.label.height,rank:o.rank,order:r+ ++n,e:e.e,label:e.label},"_se")})),delete o.selfEdges}))}))},U=function(t){t.nodes().forEach((function(e){var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),i=r.x+r.width/2,o=r.y,a=n.x-i,s=r.height/2;t.setEdgeObj(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*a/3,y:o-s},{x:i+5*a/6,y:o-s},{y:o,x:i+a},{x:i+5*a/6,y:o+s},{x:i+2*a/3,y:o+s}],n.label.x=n.x,n.label.y=n.y}}))},j=function(t,e){var n={};return null==e||e.forEach((function(e){void 0!==t[e]&&(n[e]=+t[e])})),n},V=function(t){void 0===t&&(t={});var e={};return Object.keys(t).forEach((function(n){e[n.toLowerCase()]=t[n]})),e};e.default=function(t,e){var n=e&&e.debugTiming?u.time:u.notime;n("layout",(function(){e&&!e.keepNodeOrder&&e.prevGraph&&n("  inheritOrder",(function(){y(t,e.prevGraph)}));var r=n("  buildLayoutGraph",(function(){return T(t)}));e&&!1===e.edgeLabelSpace||n("  makeSpaceForEdgeLabels",(function(){k(r)}));try{n("  runLayout",(function(){v(r,n,e)}))}catch(t){if("Not possible to find intersection inside of the rectangle"===t.message)return void console.error("The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:\n",t);throw t}n("  updateInputGraph",(function(){b(t,r)}))}))}},3396:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(11519),i=function(t,e,n,o,a,s,u){var l=t.children(u);if(null==l?void 0:l.length){var c=(0,r.addBorderNode)(t,"_bt"),h=(0,r.addBorderNode)(t,"_bb"),d=t.node(u);t.setParent(c,u),d.borderTop=c,t.setParent(h,u),d.borderBottom=h,null==l||l.forEach((function(r){i(t,e,n,o,a,s,r);var l=t.node(r),d=l.borderTop?l.borderTop:r,f=l.borderBottom?l.borderBottom:r,p=l.borderTop?o:2*o,m=d!==f?1:a-s[u]+1;t.setEdge(c,d,{minlen:m,weight:p,nestingEdge:!0}),t.setEdge(f,h,{minlen:m,weight:p,nestingEdge:!0})})),t.parent(u)||t.setEdge(e,c,{weight:0,minlen:a+s[u]})}else u!==e&&t.setEdge(e,u,{weight:0,minlen:n})},o=function(t){var e,n={},r=function(e,i){var o=t.children(e);null==o||o.forEach((function(t){return r(t,i+1)})),n[e]=i};return null===(e=t.children())||void 0===e||e.forEach((function(t){return r(t,1)})),n},a=function(t){var e=0;return t.edges().forEach((function(n){e+=t.edge(n).weight})),e};e.default={run:function(t){var e,n=(0,r.addDummyNode)(t,"root",{},"_root"),s=o(t),u=Math.max.apply(Math,Object.values(s));Math.abs(u)===1/0&&(u=1);var l=u-1,c=2*l+1;t.graph().nestingRoot=n,t.edges().forEach((function(e){t.edge(e).minlen*=c}));var h=a(t)+1;null===(e=t.children())||void 0===e||e.forEach((function(e){i(t,n,c,h,l,s,e)})),t.graph().nodeRankFactor=c},cleanup:function(t){var e=t.graph();e.nestingRoot&&t.removeNode(e.nestingRoot),delete e.nestingRoot,t.edges().forEach((function(e){t.edge(e).nestingEdge&&t.removeEdgeObj(e)}))}}},67484:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(11519),i=function(t,e){var n=e.v,i=t.node(n).rank,o=e.w,a=t.node(o).rank,s=e.name,u=t.edge(e),l=u.labelRank;if(a!==i+1){t.removeEdgeObj(e);var c,h,d,f=t.graph();for(d=0,++i;i<a;++d,++i)u.points=[],h={edgeLabel:u,width:0,height:0,edgeObj:e,rank:i},c=(0,r.addDummyNode)(t,"edge",h,"_d"),i===l&&(h.width=u.width,h.height=u.height,h.dummy="edge-label",h.labelpos=u.labelpos),t.setEdge(n,c,{weight:u.weight},s),0===d&&(f.dummyChains||(f.dummyChains=[]),f.dummyChains.push(c)),n=c;t.setEdge(n,o,{weight:u.weight},s)}};e.default={run:function(t){t.graph().dummyChains=[],t.edges().forEach((function(e){return i(t,e)}))},undo:function(t){var e;null===(e=t.graph().dummyChains)||void 0===e||e.forEach((function(e){var n,r=t.node(e),i=r.edgeLabel;r.edgeObj&&t.setEdgeObj(r.edgeObj,i);for(var o=e;r.dummy;)n=t.successors(o)[0],t.removeNode(o),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),o=n,r=t.node(o)}))}}},18319:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,e,n){var r,i={};null==n||n.forEach((function(n){for(var o,a,s=t.parent(n);s;){if((o=t.parent(s))?(a=i[o],i[o]=s):(a=r,r=s),a&&a!==s)return void e.setEdge(a,s);s=o}}))}},69843:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,e){return e.map((function(e){var n=t.inEdges(e);if(!(null==n?void 0:n.length))return{v:e};var r={sum:0,weight:0};return null==n||n.forEach((function(e){var n=t.edge(e),i=t.node(e.v);r.sum+=n.weight*i.order,r.weight+=n.weight})),{v:e,barycenter:r.sum/r.weight,weight:r.weight}}))}},43517:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(78326),i=function(t){for(var e;t.hasNode(e="_root".concat(Math.random())););return e};e.default=function(t,e,n){var o=i(t),a=new r.Graph({compound:!0}).setGraph({root:o}).setDefaultNodeLabel((function(e){return t.node(e)}));return t.nodes().forEach((function(r){var i,s=t.node(r),u=t.parent(r);(s.rank===e||s.minRank<=e&&e<=s.maxRank)&&(a.setNode(r),a.setParent(r,u||o),null===(i=t[n](r))||void 0===i||i.forEach((function(e){var n=e.v===r?e.w:e.v,i=a.edgeFromArgs(n,r),o=void 0!==i?i.weight:0;a.setEdge(n,r,{weight:t.edge(e).weight+o})})),s.hasOwnProperty("minRank")&&a.setNode(r,{borderLeft:s.borderLeft[e],borderRight:s.borderRight[e]}))})),a}},1294:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(11519),i=function(t,e,n){for(var i=(0,r.zipObject)(n,n.map((function(t,e){return e}))),o=e.map((function(e){var n,r=null===(n=t.outEdges(e))||void 0===n?void 0:n.map((function(e){return{pos:i[e.w]||0,weight:t.edge(e).weight}}));return null==r?void 0:r.sort((function(t,e){return t.pos-e.pos}))})).flat().filter((function(t){return void 0!==t})),a=1;a<n.length;)a<<=1;var s=2*a-1;a-=1;var u=Array(s).fill(0,0,s),l=0;return null==o||o.forEach((function(t){if(t){var e=t.pos+a;u[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=u[e+1]),u[e=e-1>>1]+=t.weight;l+=t.weight*n}})),l};e.default=function(t,e){for(var n=0,r=1;r<(null==e?void 0:e.length);r+=1)n+=i(t,e[r-1],e[r]);return n}},96524:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(50497)),o=r(n(1294)),a=r(n(43517)),s=r(n(18319)),u=r(n(77749)),l=n(81422),c=n(78326),h=n(11519),d=function(t,e,n){return e.map((function(e){return(0,a.default)(t,e,n)}))},f=function(t,e,n,r){var i=new c.Graph;null==t||t.forEach((function(t){for(var o,a=t.graph().root,l=(0,u.default)(t,a,i,e,n,r),c=0;c<(null===(o=l.vs)||void 0===o?void 0:o.length);c++){var h=t.node(l.vs[c]);h&&(h.order=c)}(0,s.default)(t,i,l.vs)}))},p=function(t,e){null==e||e.forEach((function(e){null==e||e.forEach((function(e,n){t.node(e).order=n}))}))};e.default=function(t,e){for(var n=(0,h.maxRank)(t),r=[],a=[],s=1;s<n+1;s++)r.push(s);for(s=n-1;s>-1;s--)a.push(s);var u=d(t,r,"inEdges"),c=d(t,a,"outEdges"),m=(0,i.default)(t);p(t,m);for(var g,v=Number.POSITIVE_INFINITY,y=(s=0,0);y<4;++s,++y){f(s%2?u:c,s%4>=2,!1,e),m=(0,h.buildLayerMatrix)(t),(b=(0,o.default)(t,m))<v&&(y=0,g=(0,l.clone)(m),v=b)}m=(0,i.default)(t),p(t,m);for(s=0,y=0;y<4;++s,++y){var b;f(s%2?u:c,s%4>=2,!0,e),m=(0,h.buildLayerMatrix)(t),(b=(0,o.default)(t,m))<v&&(y=0,g=(0,l.clone)(m),v=b)}p(t,g)}},41696:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,e){for(var n=t.nodes().filter((function(e){var n;return!(null===(n=t.children(e))||void 0===n?void 0:n.length)})).map((function(e){return t.node(e).rank})),r=Math.max.apply(Math,n),i=[],o=0;o<r+1;o++)i[o]=[];null==e||e.forEach((function(e){var n=t.node(e);n&&!(null==n?void 0:n.dummy)&&(isNaN(n.rank)||(n.fixorder=i[n.rank].length,i[n.rank].push(e)))}))}},50497:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(79987);e.default=function(t){for(var e={},n=t.nodes().filter((function(e){var n;return!(null===(n=t.children(e))||void 0===n?void 0:n.length)})),i=n.map((function(e){return t.node(e).rank})),o=(0,r.max)(i),a=[],s=0;s<o+1;s++)a.push([]);var u=function(n){var r;if(!e.hasOwnProperty(n)){e[n]=!0;var i=t.node(n);isNaN(i.rank)||a[i.rank].push(n),null===(r=t.successors(n))||void 0===r||r.forEach((function(t){return u(t)}))}},l=n.sort((function(e,n){return t.node(e).rank-t.node(n).rank})),c=l.filter((function(e){return void 0!==t.node(e).fixorder})).sort((function(e,n){return t.node(e).fixorder-t.node(n).fixorder}));return null==c||c.forEach((function(n){isNaN(t.node(n).rank)||a[t.node(n).rank].push(n),e[n]=!0})),null==l||l.forEach(u),a}},8406:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){for(var e,n,i=[],o=function(){var o=t.pop();i.push(o),null===(e=o.in.reverse())||void 0===e||e.forEach((function(t){return(e=o,function(t){t.merged||(void 0===t.barycenter||void 0===e.barycenter||t.barycenter>=e.barycenter)&&r(e,t)})(t);var e})),null===(n=o.out)||void 0===n||n.forEach((function(e){return(n=o,function(e){e.in.push(n),0==--e.indegree&&t.push(e)})(e);var n}))};null==t?void 0:t.length;)o();var a=i.filter((function(t){return!t.merged})),s=["vs","i","barycenter","weight"];return a.map((function(t){var e={};return null==s||s.forEach((function(n){void 0!==t[n]&&(e[n]=t[n])})),e}))},r=function(t,e){var n,r=0,i=0;t.weight&&(r+=t.barycenter*t.weight,i+=t.weight),e.weight&&(r+=e.barycenter*e.weight,i+=e.weight),t.vs=null===(n=e.vs)||void 0===n?void 0:n.concat(t.vs),t.barycenter=r/i,t.weight=i,t.i=Math.min(e.i,t.i),e.merged=!0};e.default=function(t,e){var r,i,o,a={};null==t||t.forEach((function(t,e){a[t.v]={i:e,indegree:0,in:[],out:[],vs:[t.v]};var n=a[t.v];void 0!==t.barycenter&&(n.barycenter=t.barycenter,n.weight=t.weight)})),null===(r=e.edges())||void 0===r||r.forEach((function(t){var e=a[t.v],n=a[t.w];void 0!==e&&void 0!==n&&(n.indegree++,e.out.push(a[t.w]))}));var s=null===(o=(i=Object.values(a)).filter)||void 0===o?void 0:o.call(i,(function(t){return!t.indegree}));return n(s)}},77749:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(69843)),o=r(n(8406)),a=r(n(73462)),s=function(t,e,n,r,c,h){var d,f,p,m,g=t.children(e),v=t.node(e),y=v?v.borderLeft:void 0,b=v?v.borderRight:void 0,x={};y&&(g=null==g?void 0:g.filter((function(t){return t!==y&&t!==b})));var w=(0,i.default)(t,g||[]);null==w||w.forEach((function(e){var i;if(null===(i=t.children(e.v))||void 0===i?void 0:i.length){var o=s(t,e.v,n,r,h);x[e.v]=o,o.hasOwnProperty("barycenter")&&l(e,o)}}));var _=(0,o.default)(w,n);u(_,x),null===(d=_.filter((function(t){return t.vs.length>0})))||void 0===d||d.forEach((function(e){var n=t.node(e.vs[0]);n&&(e.fixorder=n.fixorder,e.order=n.order)}));var S=(0,a.default)(_,r,c,h);if(y&&(S.vs=[y,S.vs,b].flat(),null===(f=t.predecessors(y))||void 0===f?void 0:f.length)){var E=t.node((null===(p=t.predecessors(y))||void 0===p?void 0:p[0])||""),A=t.node((null===(m=t.predecessors(b))||void 0===m?void 0:m[0])||"");S.hasOwnProperty("barycenter")||(S.barycenter=0,S.weight=0),S.barycenter=(S.barycenter*S.weight+E.order+A.order)/(S.weight+2),S.weight+=2}return S},u=function(t,e){null==t||t.forEach((function(t){var n,r=null===(n=t.vs)||void 0===n?void 0:n.map((function(t){return e[t]?e[t].vs:t}));t.vs=r.flat()}))},l=function(t,e){void 0!==t.barycenter?(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight):(t.barycenter=e.barycenter,t.weight=e.weight)};e.default=s},73462:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(11519),i=function(t,e,n){for(var r,i=n;e.length&&(r=e[e.length-1]).i<=i;)e.pop(),null==t||t.push(r.vs),i++;return i},o=function(t,e){return function(n,r){if(void 0!==n.fixorder&&void 0!==r.fixorder)return n.fixorder-r.fixorder;if(n.barycenter<r.barycenter)return-1;if(n.barycenter>r.barycenter)return 1;if(e&&void 0!==n.order&&void 0!==r.order){if(n.order<r.order)return-1;if(n.order>r.order)return 1}return t?r.i-n.i:n.i-r.i}};e.default=function(t,e,n,a){var s=(0,r.partition)(t,(function(t){var e=t.hasOwnProperty("fixorder")&&!isNaN(t.fixorder);return a?!e&&t.hasOwnProperty("barycenter"):e||t.hasOwnProperty("barycenter")})),u=s.lhs,l=s.rhs.sort((function(t,e){return-t.i- -e.i})),c=[],h=0,d=0,f=0;null==u||u.sort(o(!!e,!!n)),f=i(c,l,f),null==u||u.forEach((function(t){var e;f+=null===(e=t.vs)||void 0===e?void 0:e.length,c.push(t.vs),h+=t.barycenter*t.weight,d+=t.weight,f=i(c,l,f)}));var p={vs:c.flat()};return d&&(p.barycenter=h/d,p.weight=d),p}},66873:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t){var e,n=function(t){var e,n={},r=0,i=function(e){var o,a=r;null===(o=t.children(e))||void 0===o||o.forEach(i),n[e]={low:a,lim:r++}};return null===(e=t.children())||void 0===e||e.forEach(i),n}(t);null===(e=t.graph().dummyChains)||void 0===e||e.forEach((function(e){var r,i,o=e,a=t.node(o),s=a.edgeObj;if(s)for(var u=function(t,e,n,r){var i,o,a=[],s=[],u=Math.min(e[n].low,e[r].low),l=Math.max(e[n].lim,e[r].lim);i=n;do{i=t.parent(i),a.push(i)}while(i&&(e[i].low>u||l>e[i].lim));for(o=i,i=r;i&&i!==o;)s.push(i),i=t.parent(i);return{lca:o,path:a.concat(s.reverse())}}(t,n,s.v,s.w),l=u.path,c=u.lca,h=0,d=l[h],f=!0;o!==s.w;){if(a=t.node(o),f){for(;d!==c&&(null===(r=t.node(d))||void 0===r?void 0:r.maxRank)<a.rank;)d=l[++h];d===c&&(f=!1)}if(!f){for(;h<l.length-1&&(null===(i=t.node(l[h+1]))||void 0===i?void 0:i.minRank)<=a.rank;)h++;d=l[h]}t.setParent(o,d),o=t.successors(o)[0]}}))}},79436:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.width=e.sep=e.positionX=e.balance=e.alignCoordinates=e.findSmallestWidthAlignment=e.buildBlockGraph=e.horizontalCompaction=e.verticalAlignment=e.hasConflict=e.addConflict=e.findOtherInnerSegmentNode=e.findType2Conflicts=e.findType1Conflicts=void 0;var o=n(46888),a=n(79987),s=n(11519),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(o.Graph);e.findType1Conflicts=function(t,n){var r={};return(null==n?void 0:n.length)&&n.reduce((function(n,i){var o=0,a=0,s=n.length,u=null==i?void 0:i[(null==i?void 0:i.length)-1];return null==i||i.forEach((function(n,l){var c,h=(0,e.findOtherInnerSegmentNode)(t,n),d=h?t.node(h).order:s;(h||n===u)&&(null===(c=i.slice(a,l+1))||void 0===c||c.forEach((function(n){var i;null===(i=t.predecessors(n))||void 0===i||i.forEach((function(i){var a,s=t.node(i),u=s.order;!(u<o||d<u)||s.dummy&&(null===(a=t.node(n))||void 0===a?void 0:a.dummy)||(0,e.addConflict)(r,i,n)}))})),a=l+1,o=d)})),i})),r};e.findType2Conflicts=function(t,n){var r={};function i(n,i,o,a,s){for(var u,l,c,h=i;h<o;h++)c=n[h],(null===(u=t.node(c))||void 0===u?void 0:u.dummy)&&(null===(l=t.predecessors(c))||void 0===l||l.forEach((function(n){var i=t.node(n);i.dummy&&(i.order<a||i.order>s)&&(0,e.addConflict)(r,n,c)})))}function o(t,e){var n=function(t){return JSON.stringify(t.slice(1))}(t);e.get(n)||(i.apply(void 0,t),e.set(n,!0))}return(null==n?void 0:n.length)&&n.reduce((function(e,n){var r,i=-1,a=0,s=new Map;return null==n||n.forEach((function(u,l){var c;if("border"===(null===(c=t.node(u))||void 0===c?void 0:c.dummy)){var h=t.predecessors(u)||[];h.length&&(r=t.node(h[0]).order,o([n,a,l,i,r],s),a=l,i=r)}o([n,a,n.length,r,e.length],s)})),n})),r};e.findOtherInnerSegmentNode=function(t,e){var n,r;if(null===(n=t.node(e))||void 0===n?void 0:n.dummy)return null===(r=t.predecessors(e))||void 0===r?void 0:r.find((function(e){return t.node(e).dummy}))};e.addConflict=function(t,e,n){var r=e,i=n;if(r>i){var o=r;r=i,i=o}var a=t[r];a||(t[r]=a={}),a[i]=!0};e.hasConflict=function(t,e,n){var r=e;r>n&&(r=n);return!!t[r]};e.verticalAlignment=function(t,n,r,i){var o={},a={},s={};return null==n||n.forEach((function(t){null==t||t.forEach((function(t,e){o[t]=t,a[t]=t,s[t]=e}))})),null==n||n.forEach((function(t){var n=-1;null==t||t.forEach((function(t){var u=i(t);if(u.length)for(var l=((u=u.sort((function(t,e){return s[t]-s[e]}))).length-1)/2,c=Math.floor(l),h=Math.ceil(l);c<=h;++c){var d=u[c];a[t]===t&&n<s[d]&&!(0,e.hasConflict)(r,t,d)&&(a[d]=t,a[t]=o[t]=o[d],n=s[d])}}))})),{root:o,align:a}};e.horizontalCompaction=function(t,n,r,i,o){var a,s={},u=(0,e.buildBlockGraph)(t,n,r,o),l=o?"borderLeft":"borderRight",c=function(t,e){for(var n=u.nodes(),r=n.pop(),i={};r;)i[r]?t(r):(i[r]=!0,n.push(r),n=n.concat(e(r))),r=n.pop()};return c((function(t){s[t]=(u.inEdges(t)||[]).reduce((function(t,e){return Math.max(t,(s[e.v]||0)+u.edge(e))}),0)}),u.predecessors.bind(u)),c((function(e){var n=(u.outEdges(e)||[]).reduce((function(t,e){return Math.min(t,(s[e.w]||0)-u.edge(e))}),Number.POSITIVE_INFINITY),r=t.node(e);n!==Number.POSITIVE_INFINITY&&r.borderType!==l&&(s[e]=Math.max(s[e],n))}),u.successors.bind(u)),null===(a=Object.values(i))||void 0===a||a.forEach((function(t){s[t]=s[r[t]]})),s};e.buildBlockGraph=function(t,n,r,i){var o=new u,a=t.graph(),s=(0,e.sep)(a.nodesep,a.edgesep,i);return null==n||n.forEach((function(e){var n;null==e||e.forEach((function(e){var i=r[e];if(o.setNode(i),n){var a=r[n],u=o.edgeFromArgs(a,i);o.setEdge(a,i,Math.max(s(t,e,n),u||0))}n=e}))})),o};function l(t,e){var n=Object.values(e),r=(0,a.min)(n),i=(0,a.max)(n);["u","d"].forEach((function(n){["l","r"].forEach((function(o){var s,u=n+o,l=t[u];if(l!==e){var c=Object.values(l);(s="l"===o?r-(0,a.min)(c):i-(0,a.max)(c))&&(t[u]={},Object.keys(l).forEach((function(e){t[u][e]=l[e]+s})))}}))}))}e.findSmallestWidthAlignment=function(t,n){return(0,s.minBy)(Object.values(n),(function(n){var r,i=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return null===(r=Object.keys(n))||void 0===r||r.forEach((function(r){var a=n[r],s=(0,e.width)(t,r)/2;i=Math.max(a+s,i),o=Math.min(a-s,o)})),i-o}))},e.alignCoordinates=l;e.balance=function(t,e){var n={};return Object.keys(t.ul).forEach((function(r){if(e)n[r]=t[e.toLowerCase()][r];else{var i=Object.values(t).map((function(t){return t[r]}));n[r]=(i[0]+i[1])/2}})),n};e.positionX=function(t){var n,r=(0,s.buildLayerMatrix)(t),i=Object.assign((0,e.findType1Conflicts)(t,r),(0,e.findType2Conflicts)(t,r)),o={};["u","d"].forEach((function(a){n="u"===a?r:Object.values(r).reverse(),["l","r"].forEach((function(r){"r"===r&&(n=n.map((function(t){return Object.values(t).reverse()})));var s=("u"===a?t.predecessors:t.successors).bind(t),u=(0,e.verticalAlignment)(t,n,i,s),l=(0,e.horizontalCompaction)(t,n,u.root,u.align,"r"===r);"r"===r&&Object.keys(l).forEach((function(t){l[t]=-l[t]})),o[a+r]=l}))}));var a=(0,e.findSmallestWidthAlignment)(t,o);return l(o,a),(0,e.balance)(o,t.graph().align)};e.sep=function(t,e,n){return function(r,i,o){var a,s=r.node(i),u=r.node(o),l=0;if(l+=s.width/2,s.hasOwnProperty("labelpos"))switch((s.labelpos||"").toLowerCase()){case"l":a=-s.width/2;break;case"r":a=s.width/2}if(a&&(l+=n?a:-a),a=0,l+=(s.dummy?e:t)/2,l+=(u.dummy?e:t)/2,l+=u.width/2,u.labelpos)switch((u.labelpos||"").toLowerCase()){case"l":a=u.width/2;break;case"r":a=-u.width/2}return a&&(l+=n?a:-a),a=0,l}};e.width=function(t,e){return t.node(e).width||0}},33099:function(t,e,n){"use strict";var r=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0});var i=n(11519),o=n(79436);e.default=function(t){var e,n=(0,i.asNonCompoundGraph)(t);!function(t){var e=(0,i.buildLayerMatrix)(t),n=t.graph().ranksep,o=0;null==e||e.forEach((function(e){var i=e.map((function(e){return t.node(e).height})),a=Math.max.apply(Math,r(r([],i,!1),[0],!1));null==e||e.forEach((function(e){t.node(e).y=o+a/2})),o+=a+n}))}(n);var a=function(t){var e=(0,i.buildLayerMatrix)(t),n=Object.assign((0,o.findType1Conflicts)(t,e),(0,o.findType2Conflicts)(t,e)),r={},a=[];["u","d"].forEach((function(i){a="u"===i?e:Object.values(e).reverse(),["l","r"].forEach((function(e){"r"===e&&(a=a.map((function(t){return Object.values(t).reverse()})));var s=("u"===i?t.predecessors:t.successors).bind(t),u=(0,o.verticalAlignment)(t,a,n,s),l=(0,o.horizontalCompaction)(t,a,u.root,u.align,"r"===e);"r"===e&&Object.keys(l).forEach((function(t){return l[t]=-l[t]})),r[i+e]=l}))}));var s=(0,o.findSmallestWidthAlignment)(t,r);return s&&(0,o.alignCoordinates)(r,s),(0,o.balance)(r,t.graph().align)}(n);null===(e=Object.keys(a))||void 0===e||e.forEach((function(t){n.node(t).x=a[t]}))}},75022:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.feasibleTreeWithLayer=e.feasibleTree=void 0;var r=n(53472),i=n(11519),o=n(78326),a=function(t){var e,n,i=new o.Graph({directed:!1}),a=t.nodes()[0],u=t.nodeCount();for(i.setNode(a,{});s(i,t)<u;)e=c(i,t),n=i.hasNode(e.v)?(0,r.slack)(t,e):-(0,r.slack)(t,e),h(i,t,n);return i};e.feasibleTree=a;var s=function(t,e){var n=function(i){e.nodeEdges(i).forEach((function(o){var a=o.v,s=i===a?o.w:a;t.hasNode(s)||(0,r.slack)(e,o)||(t.setNode(s,{}),t.setEdge(i,s,{}),n(s))}))};return t.nodes().forEach(n),t.nodeCount()},u=function(t){var e,n,i=new o.Graph({directed:!1}),a=t.nodes()[0],s=t.nodes().filter((function(e){return!!t.node(e)})).length;for(i.setNode(a,{});l(i,t)<s;)e=c(i,t),n=i.hasNode(e.v)?(0,r.slack)(t,e):-(0,r.slack)(t,e),h(i,t,n);return i};e.feasibleTreeWithLayer=u;var l=function(t,e){var n=function(i){var o;null===(o=e.nodeEdges(i))||void 0===o||o.forEach((function(o){var a=o.v,s=i===a?o.w:a;t.hasNode(s)||void 0===e.node(s).layer&&(0,r.slack)(e,o)||(t.setNode(s,{}),t.setEdge(i,s,{}),n(s))}))};return t.nodes().forEach(n),t.nodeCount()},c=function(t,e){return(0,i.minBy)(e.edges(),(function(n){return t.hasNode(n.v)!==t.hasNode(n.w)?(0,r.slack)(e,n):1/0}))},h=function(t,e,n){t.nodes().forEach((function(t){e.node(t).rank||(e.node(t).rank=0),e.node(t).rank+=n}))};e.default={feasibleTree:a,feasibleTreeWithLayer:u}},96686:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(53472),o=n(75022),a=r(n(44883)),s=i.longestPath,u=function(t){(0,i.longestPathWithLayer)(t),(0,o.feasibleTreeWithLayer)(t)},l=function(t){(0,a.default)(t)};e.default=function(t){switch(t.graph().ranker){case"network-simplex":l(t);break;case"tight-tree":default:u(t);break;case"longest-path":s(t)}}},44883:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.exchangeEdges=e.enterEdge=e.leaveEdge=e.initLowLimValues=e.calcCutValue=e.initCutValues=void 0;var r=n(75022),i=n(53472),o=n(11519),a=n(46888),s=a.algorithm.preorder,u=a.algorithm.postorder;e.initCutValues=function(t,e){var n=u(t,t.nodes());null==(n=null==n?void 0:n.slice(0,(null==n?void 0:n.length)-1))||n.forEach((function(n){l(t,e,n)}))};var l=function(t,n,r){var i=t.node(r).parent;t.edgeFromArgs(r,i).cutvalue=(0,e.calcCutValue)(t,n,r)};e.calcCutValue=function(t,e,n){var r,i=t.node(n).parent,o=!0,a=e.edgeFromArgs(n,i),s=0;return a||(o=!1,a=e.edgeFromArgs(i,n)),s=a.weight,null===(r=e.nodeEdges(n))||void 0===r||r.forEach((function(r){var a=r.v===n,u=a?r.w:r.v;if(u!==i){var l=a===o,c=e.edge(r).weight;if(s+=l?c:-c,d(t,n,u)){var h=t.edgeFromArgs(n,u).cutvalue;s+=l?-h:h}}})),s};e.initLowLimValues=function(t,e){void 0===e&&(e=t.nodes()[0]),c(t,{},1,e)};var c=function(t,e,n,r,i){var o,a=n,s=n,u=t.node(r);return e[r]=!0,null===(o=t.neighbors(r))||void 0===o||o.forEach((function(n){e[n]||(s=c(t,e,s,n,r))})),u.low=a,u.lim=s++,i?u.parent=i:delete u.parent,s};e.leaveEdge=function(t){return t.edges().find((function(e){return t.edge(e).cutvalue<0}))};e.enterEdge=function(t,e,n){var r=n.v,a=n.w;e.hasEdge(r,a)||(r=n.w,a=n.v);var s=t.node(r),u=t.node(a),l=s,c=!1;s.lim>u.lim&&(l=u,c=!0);var h=e.edges().filter((function(e){return c===f(t,t.node(e.v),l)&&c!==f(t,t.node(e.w),l)}));return(0,o.minBy)(h,(function(t){return(0,i.slack)(e,t)}))};e.exchangeEdges=function(t,n,r,i){var o=r.v,a=r.w;t.removeEdge(o,a),t.setEdge(i.v,i.w,{}),(0,e.initLowLimValues)(t),(0,e.initCutValues)(t,n),h(t,n)};var h=function(t,e){var n=t.nodes().find((function(t){var n;return!(null===(n=e.node(t))||void 0===n?void 0:n.parent)})),r=s(t,n);null==(r=null==r?void 0:r.slice(1))||r.forEach((function(n){var r=t.node(n).parent,i=e.edgeFromArgs(n,r),o=!1;i||(i=e.edgeFromArgs(r,n),o=!0),e.node(n).rank=e.node(r).rank+(o?i.minlen:-i.minlen)}))},d=function(t,e,n){return t.hasEdge(e,n)},f=function(t,e,n){return n.low<=e.lim&&e.lim<=n.lim};e.default=function(t){var n=(0,o.simplify)(t);(0,i.longestPath)(n);var a,s,u=(0,r.feasibleTree)(n);for((0,e.initLowLimValues)(u),(0,e.initCutValues)(u,n);a=(0,e.leaveEdge)(u);)s=(0,e.enterEdge)(u,n,a),(0,e.exchangeEdges)(u,n,a,s)}},53472:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.slack=e.longestPathWithLayer=e.longestPath=void 0;var n=function(t){var e,n={},r=function(e){var i,o,a=t.node(e);return a?n[e]?a.rank:(n[e]=!0,null===(i=t.outEdges(e))||void 0===i||i.forEach((function(e){var n=r(e.w)-t.edge(e).minlen;n&&(void 0===o||n<o)&&(o=n)})),o||(o=0),a.rank=o,o):0};null===(e=t.sources())||void 0===e||e.forEach((function(t){return r(t)}))};e.longestPath=n;var r=function(t){var e,n,r={},i=function(e){var o,a,s=t.node(e);return s?r[e]?s.rank:(r[e]=!0,null===(o=t.outEdges(e))||void 0===o||o.forEach((function(e){var n=i(e.w)-t.edge(e).minlen;n&&(void 0===a||n<a)&&(a=n)})),a||(a=0),(void 0===n||a<n)&&(n=a),s.rank=a,a):0};null===(e=t.sources())||void 0===e||e.forEach((function(e){t.node(e)&&i(e)})),void 0===n&&(n=0);var o={},a=function(e,n){var r,i=t.node(e),s=isNaN(i.layer)?n:i.layer;(void 0===i.rank||i.rank<s)&&(i.rank=s),o[e]||(o[e]=!0,null===(r=t.outEdges(e))||void 0===r||r.map((function(e){a(e.w,s+t.edge(e).minlen)})))};t.nodes().forEach((function(e){var r=t.node(e);r&&(isNaN(r.layer)?r.rank-=n:a(e,r.layer))}))};e.longestPathWithLayer=r;var i=function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen};e.slack=i,e.default={longestPath:n,longestPathWithLayer:r,slack:i}},11519:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.minBy=e.notime=e.time=e.partition=e.maxRank=e.addBorderNode=e.removeEmptyRanks=e.normalizeRanks=e.buildLayerMatrix=e.intersectRect=e.predecessorWeights=e.successorWeights=e.zipObject=e.asNonCompoundGraph=e.simplify=e.addDummyNode=void 0;var r=n(81422),i=n(78326);e.addDummyNode=function(t,e,n,r){var i;do{i="".concat(r).concat(Math.random())}while(t.hasNode(i));return n.dummy=e,t.setNode(i,n),i};e.simplify=function(t){var e=(new i.Graph).setGraph(t.graph());return t.nodes().forEach((function(n){e.setNode(n,t.node(n))})),t.edges().forEach((function(n){var r=e.edgeFromArgs(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})})),e};e.asNonCompoundGraph=function(t){var e=new i.Graph({multigraph:t.isMultigraph()}).setGraph(t.graph());return t.nodes().forEach((function(n){var r;(null===(r=t.children(n))||void 0===r?void 0:r.length)||e.setNode(n,t.node(n))})),t.edges().forEach((function(n){e.setEdgeObj(n,t.edge(n))})),e};e.zipObject=function(t,e){return null==t?void 0:t.reduce((function(t,n,r){return t[n]=e[r],t}),{})};e.successorWeights=function(t){var e={};return t.nodes().forEach((function(n){var r,i={};null===(r=t.outEdges(n))||void 0===r||r.forEach((function(e){var n;i[e.w]=(i[e.w]||0)+((null===(n=t.edge(e))||void 0===n?void 0:n.weight)||0)})),e[n]=i})),e};e.predecessorWeights=function(t){var n=t.nodes(),r=n.map((function(e){var n,r={};return null===(n=t.inEdges(e))||void 0===n||n.forEach((function(e){r[e.v]=(r[e.v]||0)+t.edge(e).weight})),r}));return(0,e.zipObject)(n,r)};e.intersectRect=function(t,e){var n,r,i=Number(t.x),o=Number(t.y),a=Number(e.x)-i,s=Number(e.y)-o,u=Number(t.width)/2,l=Number(t.height)/2;return a||s?(Math.abs(s)*u>Math.abs(a)*l?(s<0&&(l=-l),n=l*a/s,r=l):(a<0&&(u=-u),n=u,r=u*s/a),{x:i+n,y:o+r}):{x:0,y:0}};e.buildLayerMatrix=function(t){for(var n=[],r=(0,e.maxRank)(t)+1,i=0;i<r;i++)n.push([]);t.nodes().forEach((function(e){var r=t.node(e);if(r){var i=r.rank;void 0!==i&&n[i]&&n[i].push(e)}}));for(i=0;i<r;i++)n[i]=n[i].sort((function(e,n){var r,i,o,a;return o=null===(r=t.node(e))||void 0===r?void 0:r.order,a=null===(i=t.node(n))||void 0===i?void 0:i.order,Number(o)-Number(a)}));return n};e.normalizeRanks=function(t){var e=t.nodes().filter((function(e){var n;return void 0!==(null===(n=t.node(e))||void 0===n?void 0:n.rank)})).map((function(e){return t.node(e).rank})),n=Math.min.apply(Math,e);t.nodes().forEach((function(e){var r=t.node(e);r.hasOwnProperty("rank")&&n!==1/0&&(r.rank-=n)}))};e.removeEmptyRanks=function(t){var e=t.nodes(),n=e.filter((function(e){var n;return void 0!==(null===(n=t.node(e))||void 0===n?void 0:n.rank)})).map((function(e){return t.node(e).rank})),r=Math.min.apply(Math,n),i=[];e.forEach((function(e){var n,o=((null===(n=t.node(e))||void 0===n?void 0:n.rank)||0)-r;i[o]||(i[o]=[]),i[o].push(e)}));for(var o=0,a=t.graph().nodeRankFactor||0,s=0;s<i.length;s++){var u=i[s];void 0===u?s%a!=0&&(o-=1):o&&(null==u||u.forEach((function(e){var n=t.node(e);n&&(n.rank=n.rank||0,n.rank+=o)})))}};e.addBorderNode=function(t,n,i,o){var a={width:0,height:0};return(0,r.isNumber)(i)&&(0,r.isNumber)(o)&&(a.rank=i,a.order=o),(0,e.addDummyNode)(t,"border",a,n)};e.maxRank=function(t){var e;return t.nodes().forEach((function(n){var r,i=null===(r=t.node(n))||void 0===r?void 0:r.rank;void 0!==i&&(void 0===e||i>e)&&(e=i)})),e||(e=0),e};e.partition=function(t,e){var n={lhs:[],rhs:[]};return null==t||t.forEach((function(t){e(t)?n.lhs.push(t):n.rhs.push(t)})),n};e.time=function(t,e){var n=Date.now();try{return e()}finally{console.log("".concat(t," time: ").concat(Date.now()-n,"ms"))}};e.notime=function(t,e){return e()};e.minBy=function(t,e){return t.reduce((function(t,n){return e(t)>e(n)?n:t}))}},84551:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var u=a(n(99877)),l=s(n(56401)),c=s(n(42787)),h=n(79829);e.default=function(t,e){var n=t.nodes,i=t.edges,o=e.width,a=e.height;if(!(null==n?void 0:n.length))return Promise.resolve();var s=[];n.forEach((function(t){if(i.filter((function(e){return e.source===t.id||e.target===t.id})).length>1){var e=r({},t);delete e.size,s.push(e)}}));var d=[];i.forEach((function(t){var e=s.find((function(e){return e.id===t.source})),n=s.find((function(e){return e.id===t.target}));e&&n&&d.push(t)}));var f=new h.DagreLayout({type:"dagre",ranksep:e.nodeMinGap,nodesep:e.nodeMinGap}).layout({nodes:s,edges:d}).nodes;n.forEach((function(t){var e=(f||[]).find((function(e){return e.id===t.id}));t.x=(null==e?void 0:e.x)||o/2,t.y=(null==e?void 0:e.y)||a/2}));var p=JSON.parse(JSON.stringify(n)),m=JSON.parse(JSON.stringify(i)),g=u.forceSimulation().nodes(p).force("link",u.forceLink(m).id((function(t){return t.id})).distance((function(t){return d.find((function(e){return e.source===t.source&&e.target===t.target}))?30:20}))).force("charge",u.forceManyBody()).force("center",u.forceCenter(o/2,a/2)).force("x",u.forceX(o/2)).force("y",u.forceY(a/2)).alpha(.3).alphaDecay(.08).alphaMin(.001);return new Promise((function(t){g.on("end",(function(){n.forEach((function(t){var e=p.find((function(e){return e.id===t.id}));e&&(t.x=e.x,t.y=e.y)}));var r=Math.min.apply(Math,n.map((function(t){return t.x}))),s=Math.max.apply(Math,n.map((function(t){return t.x}))),u=Math.min.apply(Math,n.map((function(t){return t.y}))),h=Math.max.apply(Math,n.map((function(t){return t.y}))),d=o/(s-r),f=a/(h-u);n.forEach((function(t){void 0!==t.x&&d<1&&(t.x=(t.x-r)*d),void 0!==t.y&&f<1&&(t.y=(t.y-u)*f)})),n.forEach((function(t){t.sizeTemp=t.size,t.size=[10,10]})),(0,c.default)(n,i),n.forEach((function(t){t.size=t.sizeTemp||[],delete t.sizeTemp})),(0,l.default)({nodes:n,edges:i},e),t()}))}))}},56401:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(90244));e.default=function(t,e){if(!t.nodes||0===t.nodes.length)return t;var n=e.width,r=e.height,o=e.nodeMinGap,a=1e4,s=1e4;t.nodes.forEach((function(t){var e=t.size[0]||50,n=t.size[1]||50;a=Math.min(e,a),s=Math.min(n,s)}));var u=new i.default;u.init(n,r,{CELL_H:s,CELL_W:a}),t.nodes.forEach((function(t){var e=u.occupyNearest(t);e&&(e.node={id:t.id,size:t.size},t.x=e.x,t.y=e.y,t.dx=e.dx,t.dy=e.dy)}));for(var l=0;l<t.nodes.length;l++){var c=t.nodes[l],h=u.findGridByNodeId(c.id);if(!h)throw new Error("can not find node cell");var d=h.column,f=h.row;if(c.size[0]+o>a){for(var p=g=Math.ceil((c.size[0]+o)/a)-1,m=0;m<g;m++){if(!(u.additionColumn.indexOf(d+m+1)>-1)||u.cells[d+m+1][f].node)break;p--}u.insertColumn(d,p)}if(c.size[1]+o>s){var g;for(p=g=Math.ceil((c.size[1]+o)/s)-1,m=0;m<g;m++){if(!(u.additionRow.indexOf(f+m+1)>-1)||u.cells[d][f+m+1].node)break;p--}u.insertRow(f,p)}}for(l=0;l<u.columnNum;l++){var v=function(e){var n=u.cells[l][e];if(n.node){var r=t.nodes.find((function(t){var e;return t.id===(null===(e=null==n?void 0:n.node)||void 0===e?void 0:e.id)}));r&&(r.x=n.x+r.size[0]/2,r.y=n.y+r.size[1]/2)}};for(m=0;m<u.rowNum;m++)v(m)}}},90244:function(t,e){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}return t.prototype.init=function(e,n,r){this.cells=[],this.CELL_W=r.CELL_W||t.DEFAULT_CELL_W,this.CELL_H=r.CELL_H||t.DEFAULT_CELL_H,this.columnNum=Math.ceil(e/this.CELL_W),this.rowNum=Math.ceil(n/this.CELL_H),t.MIN_DIST=Math.pow(e,2)+Math.pow(n,2);for(var i=0;i<this.columnNum;i++){for(var o=[],a=0;a<this.rowNum;a++){var s={dx:i,dy:a,x:i*this.CELL_W,y:a*this.CELL_H,occupied:!1};o.push(s)}this.cells.push(o)}},t.prototype.findGridByNodeId=function(t){for(var e,n,r=0;r<this.columnNum;r++)for(var i=0;i<this.rowNum;i++)if(this.cells[r][i].node&&(null===(n=null===(e=this.cells[r][i])||void 0===e?void 0:e.node)||void 0===n?void 0:n.id)===t)return{column:r,row:i};return null},t.prototype.sqdist=function(t,e){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)},t.prototype.occupyNearest=function(e){for(var n,r=t.MIN_DIST,i=null,o=0;o<this.columnNum;o++)for(var a=0;a<this.rowNum;a++)!this.cells[o][a].occupied&&(n=this.sqdist(e,this.cells[o][a]))<r&&(r=n,i=this.cells[o][a]);return i&&(i.occupied=!0),i},t.prototype.insertColumn=function(t,e){if(!(e<=0)){for(var r=0;r<e;r++){this.cells[r+this.columnNum]=[];for(var i=0;i<this.rowNum;i++)this.cells[r+this.columnNum][i]={dx:r,dy:i,x:r*this.CELL_W,y:i*this.CELL_H,occupied:!1,node:null}}for(r=this.columnNum-1;r>t;r--)for(i=0;i<this.rowNum;i++)this.cells[r+e][i]=n(n({},this.cells[r][i]),{x:(r+e)*this.CELL_W,y:i*this.CELL_H}),this.cells[r][i]={x:r*this.CELL_W,y:i*this.CELL_H,occupied:!0,node:null};for(i=0;i<this.additionColumn.length;i++)this.additionColumn[i]>=t&&(this.additionColumn[i]+=e);for(r=0;r<e;r++)this.additionColumn.push(t+r+1);this.columnNum+=e}},t.prototype.insertRow=function(t,e){if(!(e<=0)){for(var r=0;r<e;r++)for(var i=0;i<this.columnNum;i++)this.cells[i][r+this.rowNum]={dx:i,dy:r,x:i*this.CELL_W,y:r*this.CELL_H,occupied:!1,node:null};for(i=0;i<this.columnNum;i++)for(r=this.rowNum-1;r>t;r--)this.cells[i][r+e]=n(n({},this.cells[i][r]),{dx:i,dy:r+e,x:i*this.CELL_W,y:(r+e)*this.CELL_H}),this.cells[i][r]={dx:i,dy:r,x:i*this.CELL_W,y:r*this.CELL_H,occupied:!1,node:null};for(r=0;r<this.additionRow.length;r++)this.additionRow[r]>=t&&(this.additionRow[r]+=e);for(i=0;i<e;i++)this.additionRow.push(t+i+1);this.rowNum+=e}},t.prototype.getNodes=function(){for(var t=[],e=0;e<this.columnNum;e++)for(var n=0;n<this.rowNum;n++)this.cells[e][n].node&&t.push(this.cells[e][n]);return t},t.MIN_DIST=50,t.DEFAULT_CELL_W=80,t.DEFAULT_CELL_H=80,t}();e.default=r},69474:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ERLayout=void 0;var a=n(46271),s=o(n(84551)),u=function(t){function e(e){var n=t.call(this)||this;return n.width=300,n.height=300,n.nodeMinGap=50,n.onLayoutEnd=function(){},e&&n.updateCfg(e),n}return i(e,t),e.prototype.getDefaultCfg=function(){return{width:300,height:300,nodeMinGap:50}},e.prototype.execute=function(){var t=this,e=t.nodes,n=t.edges;return null==e||e.forEach((function(t){t.size||(t.size=[50,50])})),(0,s.default)({nodes:e,edges:n},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then((function(){t.onLayoutEnd&&t.onLayoutEnd()}))},e.prototype.getType=function(){return"er"},e}(a.Base);e.ERLayout=u},42787:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=1200,r=800,i=1e7,o=10,a=3.141592653589793,s=1.5707963267948966,u=.375*a,l=.625*a,c=new Map,h=10,d=10,f=.8,p=.1,m=.5;function g(t,e){var n=(c.get(t.id)||[]).find((function(t){return t.source===e.id||t.target===e.id})),r=t.size[0]*t.size[1],a=e.size[0]*e.size[1],h=r>a?e:t,d=r>a?t:e,f=h.x-h.size[0]/2,p=h.y-h.size[1]/2,m=h.x+h.size[0]/2,g=h.y+h.size[1]/2,v=d.x-d.size[0]/2,y=d.y-d.size[1]/2,b=d.x+d.size[0]/2,x=d.y+d.size[1]/2,w=h.x,_=h.y,S=d.x,E=d.y,A=0,M=0;if(m>=v&&b>=f&&g>=y&&x>=p){0===(M=Math.sqrt(Math.pow(S-w,2)+Math.pow(E-_,2)))&&(M=1e-7),A=1*o/M*100+((m<b?m:b)-(f>v?f:v))*((g<x?g:x)-(p>y?p:y)),A*=i}else{var C=!1,T=function(t,e,n){var r=t.x-t.size[0]/2,i=t.y-t.size[1]/2,o=t.x+t.size[0]/2,a=t.y+t.size[1]/2,c=e.x-e.size[0]/2,h=e.y-e.size[1]/2,d=e.x+e.size[0]/2,f=e.y+e.size[1]/2,p=t.x,m=t.y,g=e.x,v=e.y,y=g-p,b=Math.atan2(y,v-m),x=0,w=0,_=0,S=0;b>s?(w=i-f,x=c-o,_=parseFloat(w?(w/Math.cos(b)).toFixed(2):x.toFixed(2)),S=parseFloat(x?(x/Math.sin(b)).toFixed(2):w.toFixed(2))):_=S=0<b&&b<=s?(w=h-a)>(x=c-o)?parseFloat(w?(w/Math.cos(b)).toFixed(2):x.toFixed(2)):parseFloat(x?(x/Math.sin(b)).toFixed(2):w.toFixed(2)):b<-s?(w=i-f)>(x=-(d-r))?parseFloat(w?(w/Math.cos(b)).toFixed(2):x.toFixed(2)):parseFloat(x?(x/Math.sin(b)).toFixed(2):w.toFixed(2)):(w=h-a)>(x=Math.abs(y)>(o-r)/2?r-d:y)?parseFloat(w?(w/Math.cos(b)).toFixed(2):x.toFixed(2)):parseFloat(x&&0!==b?(x/Math.sin(b)).toFixed(2):w.toFixed(2));var E=parseFloat(b.toFixed(2)),A=n;return n&&(A=u<E&&E<l),{distance:Math.abs(_<S?_:S),isHoriz:A}}(h,d,C);M=T.distance,C=T.isHoriz,M<=o?A+=0!==M?n?o+1*i/M:o+i*o/M:i:(A+=M,n&&(A+=M*M))}return A}function v(t){for(var e=0,i=0;i<t.length;i++){var o=t[i];(o.x<0||o.y<0||o.x>n||o.y>r)&&(e+=1e12);for(var a=i+1;a<t.length;a++)e+=g(o,t[a])}return e}function y(t,e,n,r){var i=new Map;n.forEach((function(t,e){i.set(t.id,t)}));var o=r.filter((function(e){return e.source===t.id||e.target===t.id}))||[],a=[];o.forEach((function(e){var n=e.source===t.id?e.target:e.source,r=i.get(n);r&&a.push(r)}));for(var s=!0,u=0;u<a.length;u++){var l=a[u],c=180*Math.atan((t.y-l.y)/(l.x-t.y)),h=180*Math.atan((e.y-l.y)/(l.x-e.y)),d=c>70&&c<110,f=h>70&&h<110;if((c<30||c>150)&&!(h<30||h>150)||c*h<0){s=!1;break}if(d&&!f||c*h<0){s=!1;break}if((l.x-t.x)*(l.x-e.x)<0){s=!1;break}if((l.y-t.y)*(l.y-e.y)<0){s=!1;break}}return s}function b(t,e){for(var n=!1,r=1*h,i=1*d,o=[r,-r,0,0],a=[0,0,i,-i],s=0;s<t.length;++s)for(var u=t[s],l=x(u,t),c=0;c<o.length;c++){if(y(u,{x:u.x+o[c],y:u.y+a[c]},t,e)){u.x+=o[c],u.y+=a[c];var g=x(u,t),b=Math.random();g<l||b<f&&b>p?(l=g,n=!0):(u.x-=o[c],u.y-=a[c])}}return f>p&&(f*=m),n?v(t):0}function x(t,e){var i=0;(t.x<0||t.y<0||t.x+t.size[0]+20>n||t.y+t.size[1]+20>r)&&(i+=1e12);for(var o=0;o<e.length;++o)t.id!==e[o].id&&(i+=g(t,e[o]));return i}e.default=function(t,e){if(0===t.length)return{nodes:t,edges:e};t.forEach((function(t){var n=e.filter((function(e){return e.source===t.id||e.target===t.id}));c.set(t,n)})),t.sort((function(t,e){var n,r;return(null===(n=c.get(t.id))||void 0===n?void 0:n.length)-(null===(r=c.get(e.id))||void 0===r?void 0:r.length)}));for(var n=v(t),r=20,i=1,o=0,a=0;r>0&&!(++a>=50);){var s=b(t,e);0!==s&&(o=s),i=o-n,n=o,0===i?--r:r=20}return t.forEach((function(t){t.x=t.x-t.size[0]/2,t.y=t.y-t.size[1]/2})),{nodes:t,edges:e}}},92727:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.forceNBody=void 0;var r=n(30617);function i(t){var e=0,n=0,r=0;if(t.length){for(var i=0;i<4;i++){(o=t[i])&&o.weight&&(e+=o.weight,n+=o.x*o.weight,r+=o.y*o.weight)}t.x=n/e,t.y=r/e,t.weight=e}else{var o=t;t.x=o.data.x,t.y=o.data.y,t.weight=o.data.weight}}e.forceNBody=function(t,e,n,a,s){var u=n/a,l=t.map((function(t,n){var r=e[t.id],i=r.data,o=r.x,a=r.y,s=r.size,l=i.layout.force.nodeStrength;return{x:o,y:a,size:s,index:n,vx:0,vy:0,weight:u*l}})),c=(0,r.quadtree)(l,(function(t){return t.x}),(function(t){return t.y})).visitAfter(i);return l.forEach((function(t){!function(t,e){e.visit((function(e,n,r,i,a){return o(e,n,r,i,a,t)}))}(t,c)})),l.map((function(n,r){var i=e[t[r].id].data.layout.force.mass,o=void 0===i?1:i;s[2*r]=n.vx/o,s[2*r+1]=n.vy/o})),s};var o=function(t,e,n,r,i,o){var a=o.x-t.x||.1,s=o.y-t.y||.1,u=r-e,l=a*a+s*s,c=Math.sqrt(l)*l;if(u*u*.81<l){var h=t.weight/c;return o.vx+=a*h,o.vy+=s*h,!0}if(t.length)return!1;if(t.data!==o){h=t.data.weight/c;o.vx+=a*h,o.vy+=s*h}}},1782:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Force2Layout=void 0;var a=n(46271),s=n(81422),u=n(92727),l=function(t,e){return t?(0,s.isNumber)(t)?function(e){return t}:t:function(t){return e||1}},c=function(t){function e(e){var n=t.call(this)||this;n.maxIteration=1e3,n.workerEnabled=!1,n.edgeStrength=200,n.nodeStrength=1e3,n.coulombDisScale=.005,n.damping=.9,n.maxSpeed=500,n.minMovement=.4,n.interval=.02,n.factor=1,n.linkDistance=200,n.gravity=0,n.clusterNodeStrength=20,n.preventOverlap=!0,n.distanceThresholdMode="mean",n.tick=function(){},n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.judgingDistance=0,n.centripetalOptions={leaf:2,single:2,others:1,center:function(t){return{x:n.width/2,y:n.height/2}}};var r=e.getMass;return n.propsGetMass=r,n.updateCfg(e),n}return i(e,t),e.prototype.getCentripetalOptions=function(){var t,e=this,n=e.leafCluster,r=e.clustering,i=e.nodeClusterBy,a=e.nodes,u=e.nodeMap,l=e.clusterNodeStrength,c=function(t){return"function"==typeof l?l(t):l},h={};if(n){t=this.getSameTypeLeafMap()||{};var d=Array.from(new Set(null==a?void 0:a.map((function(t){return t[i]}))))||[];h={single:100,leaf:function(e,n,r){var i=t[e.id]||{},o=i.relativeLeafNodes,a=i.sameTypeLeafNodes;return(null==a?void 0:a.length)===(null==o?void 0:o.length)||1===(null==d?void 0:d.length)?1:c(e)},others:1,center:function(e,n,r){var i,o,a=((null===(i=e.data)||void 0===i?void 0:i.layout)||{}).degree;if(!a)return{x:100,y:100};if(1===a){var u=(t[e.id]||{}).sameTypeLeafNodes,l=void 0===u?[]:u;1===l.length?o=void 0:l.length>1&&(o=(0,s.getAvgNodePosition)(l))}else o=void 0;return{x:null==o?void 0:o.x,y:null==o?void 0:o.y}}}}if(r){t||(t=this.getSameTypeLeafMap());var f=Array.from(new Set(a.map((function(t,e){return t[i]})))).filter((function(t){return void 0!==t})),p={};f.forEach((function(t){var e=a.filter((function(e){return e[i]===t})).map((function(t){return u[t.id]}));p[t]=(0,s.getAvgNodePosition)(e)})),h={single:function(t){return c(t)},leaf:function(t){return c(t)},others:function(t){return c(t)},center:function(t,e,n){var r=p[t[i]];return{x:null==r?void 0:r.x,y:null==r?void 0:r.y}}}}this.centripetalOptions=o(o({},this.centripetalOptions),h);var m=this.centripetalOptions,g=m.leaf,v=m.single,y=m.others;g&&"function"!=typeof g&&(this.centripetalOptions.leaf=function(){return g}),v&&"function"!=typeof v&&(this.centripetalOptions.single=function(){return v}),y&&"function"!=typeof y&&(this.centripetalOptions.others=function(){return y})},e.prototype.updateCfg=function(t){t&&Object.assign(this,t)},e.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},e.prototype.execute=function(){var t=this;t.stop();var e=t.nodes,n=t.edges,r=t.defSpringLen;if(t.judgingDistance=0,e&&0!==e.length){t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);var i=t.center;if(1===e.length)return e[0].x=i[0],e[0].y=i[1],void t.onLayoutEnd([o({},e[0])]);t.degreesMap=(0,s.getDegreeMap)(e,n),t.propsGetMass?t.getMass=t.propsGetMass:t.getMass=function(e){var n=1;(0,s.isNumber)(e.mass)&&(n=e.mass);var r=t.degreesMap[e.id].all;return!r||r<5?n:5*r*n};var a,u=t.nodeSize;if(t.preventOverlap){var c,h=t.nodeSpacing;c=(0,s.isNumber)(h)?function(){return h}:(0,s.isFunction)(h)?h:function(){return 0},a=u?(0,s.isArray)(u)?function(t){return Math.max(u[0],u[1])+c(t)}:function(t){return u+c(t)}:function(t){return t.size?(0,s.isArray)(t.size)?Math.max(t.size[0],t.size[1])+c(t):(0,s.isObject)(t.size)?Math.max(t.size.width,t.size.height)+c(t):t.size+c(t):10+c(t)}}t.nodeSize=a,t.linkDistance=l(t.linkDistance,1),t.nodeStrength=l(t.nodeStrength,1),t.edgeStrength=l(t.edgeStrength,1);var d={},f={};e.forEach((function(e,r){(0,s.isNumber)(e.x)||(e.x=Math.random()*t.width),(0,s.isNumber)(e.y)||(e.y=Math.random()*t.height);var i=t.degreesMap[e.id];d[e.id]=o(o({},e),{data:o(o({},e.data),{size:t.nodeSize(e)||30,layout:{inDegree:i.in,outDegree:i.out,degree:i.all,tDegree:i.in,sDegree:i.out,force:{mass:t.getMass(e),nodeStrength:t.nodeStrength(e,n)}}})}),f[e.id]=r})),t.nodeMap=d,t.nodeIdxMap=f,t.edgeInfos=[],null==n||n.forEach((function(e){var n=d[e.source],i=d[e.target];n&&i?t.edgeInfos.push({edgeStrength:t.edgeStrength(e),linkDistance:r?r(o(o({},e),{source:n,target:i}),n,i):t.linkDistance(e,n,i)||1+(u(n)+u(n)||0)/2}):elf.edgeInfos.push({})})),this.getCentripetalOptions(),t.onLayoutEnd=t.onLayoutEnd||function(){},t.run()}else t.onLayoutEnd([])},e.prototype.run=function(){var t=this,e=t.maxIteration,n=t.nodes,r=t.edges,i=t.workerEnabled,o=t.minMovement,a=t.animate,s=t.nodeMap,u=t.height;if(t.currentMinY=0,t.currentMaxY=u,n){var l=[];if(n.forEach((function(t,e){l[2*e]=0,l[2*e+1]=0})),this.defSideCoe&&"function"==typeof this.defSideCoe){var c={};r.forEach((function(t){var e=t.source,n=t.target;c[e]=c[e]||[],c[e].push(t),c[n]=c[n]||[],c[n].push(t)})),this.relatedEdges=c}var h=e;if(i||!a){for(var d=0;(t.judgingDistance>o||d<1)&&d<h;d++)d,t.runOneStep(d,l);t.onLayoutEnd(Object.values(s))}else{if("undefined"==typeof window)return;var f=0;this.timeInterval=window.setInterval((function(){n&&(t.runOneStep(f,l),(++f>=h||t.judgingDistance<o)&&(t.onLayoutEnd(Object.values(s)),window.clearInterval(t.timeInterval)))}),0)}}},e.prototype.runOneStep=function(t,e){var n,r=this,i=r.nodes,o=r.edges,a=(r.nodeMap,r.monitor),s=[];if(null==i?void 0:i.length){r.calRepulsive(s),o&&r.calAttractive(s),r.calGravity(s),r.attractToSide(s);var u=r.interval;if(r.updateVelocity(s,e,u),r.updatePosition(e,u),null===(n=r.tick)||void 0===n||n.call(r),a)a({energy:this.calTotalEnergy(s),nodes:i,edges:o,iterations:t})}},e.prototype.calTotalEnergy=function(t){var e=this.nodes,n=this.nodeMap;if(!(null==e?void 0:e.length))return 0;var r=0;return e.forEach((function(e,i){var o=t[2*i],a=t[2*i+1],s=o*o+a*a,u=n[e.id].data.layout.force.mass;r+=(void 0===u?1:u)*s*.5})),r},e.prototype.calRepulsive=function(t){var e=this,n=e.nodes,r=e.nodeMap,i=e.factor,o=e.coulombDisScale;e.nodeSize;(0,u.forceNBody)(n,r,i,o*o,t)},e.prototype.calAttractive=function(t){var e=this,n=e.edges,r=e.nodeMap,i=e.nodeIdxMap,o=e.edgeInfos;e.nodeSize;n.forEach((function(e,n){var a=(0,s.getEdgeTerminal)(e,"source"),u=(0,s.getEdgeTerminal)(e,"target"),l=r[a],c=r[u];if(l&&c){var h=c.x-l.x,d=c.y-l.y;h||d||(h=.01*Math.random(),d=.01*Math.random());var f=Math.sqrt(h*h+d*d),p=h/f,m=d/f,g=o[n]||{},v=g.linkDistance,y=void 0===v?200:v,b=g.edgeStrength,x=(y-f)*(void 0===b?200:b),w=1/(l.data.layout.force.mass||1),_=1/(c.data.layout.force.mass||1),S=p*x,E=m*x,A=2*i[a],M=2*i[u];t[A]-=S*w,t[A+1]-=E*w,t[M]+=S*_,t[M+1]+=E*_}}))},e.prototype.calGravity=function(t){var e,n=this,r=n.nodes,i=n.edges,o=void 0===i?[]:i,a=n.nodeMap,u=n.width,l=n.height,c=n.center,h=n.gravity,d=n.degreesMap,f=n.centripetalOptions;if(r)for(var p=r.length,m=0;m<p;m++){var g=2*m,v=a[r[m].id],y=v.data.layout.force.mass,b=void 0===y?1:y,x=0,w=0,_=h,S=d[v.id],E=S.in,A=S.out,M=S.all,C=null===(e=n.getCenter)||void 0===e?void 0:e.call(n,v,M);if(C){var T=C[0],k=C[1],I=C[2];x=v.x-T,w=v.y-k,_=I}else x=v.x-c[0],w=v.y-c[1];if(_&&(t[g]-=_*x/b,t[g+1]-=_*w/b),f){var N=f.leaf,P=f.single,O=f.others,L=f.center,R=(null==L?void 0:L(v,r,o,u,l))||{x:0,y:0,centerStrength:0},D=R.x,z=R.y,F=R.centerStrength;if(!(0,s.isNumber)(D)||!(0,s.isNumber)(z))continue;var B=(v.x-D)/b,U=(v.y-z)/b;if(F&&(t[g]-=F*B,t[g+1]-=F*U),0===M){var j=P(v);if(!j)continue;t[g]-=j*B,t[g+1]-=j*U;continue}if(0===E||0===A){var V=N(v,r,o);if(!V)continue;t[g]-=V*B,t[g+1]-=V*U;continue}var H=O(v);if(!H)continue;t[g]-=H*B,t[g+1]-=H*U}}},e.prototype.attractToSide=function(t){var e=this,n=e.defSideCoe,r=(e.height,e.nodes),i=e.relatedEdges,o=e.currentMinY,a=void 0===o?0:o,s=e.currentMaxY,u=void 0===s?this.height:s;n&&"function"==typeof n&&(null==r?void 0:r.length)&&r.forEach((function(e,r){var o=n(e,i[e.id]||[]);if(0!==o){var s=o<0?a:u,l=Math.abs(o);t[2*r+1]-=l*(e.y-s)}}))},e.prototype.updateVelocity=function(t,e,n){var r=this,i=r.nodes,o=r.damping,a=r.maxSpeed;(null==i?void 0:i.length)&&i.forEach((function(r,i){var s=(e[2*i]+t[2*i]*n)*o||.01,u=(e[2*i+1]+t[2*i+1]*n)*o||.01,l=Math.sqrt(s*s+u*u);if(l>a){var c=a/l;s*=c,u*=c}e[2*i]=s,e[2*i+1]=u}))},e.prototype.updatePosition=function(t,e){var n=this,r=n.nodes,i=n.distanceThresholdMode,o=n.nodeMap;if(null==r?void 0:r.length){var a=0;"max"===i?n.judgingDistance=-1/0:"min"===i&&(n.judgingDistance=1/0);var u=1/0,l=-1/0;r.forEach((function(r,c){var h=o[r.id];if((0,s.isNumber)(r.fx)&&(0,s.isNumber)(r.fy))return r.x=r.fx,r.y=r.fy,h.x=r.x,void(h.y=r.y);var d=t[2*c]*e,f=t[2*c+1]*e;r.x+=d,r.y+=f,h.x=r.x,h.y=r.y,r.y<u&&(u=r.y),r.y>l&&(l=r.y);var p=Math.sqrt(d*d+f*f);switch(i){case"max":n.judgingDistance<p&&(n.judgingDistance=p);break;case"min":n.judgingDistance>p&&(n.judgingDistance=p);break;default:a+=p}})),this.currentMinY=u,this.currentMaxY=l,i&&"mean"!==i||(n.judgingDistance=a/r.length)}else this.judgingDistance=0},e.prototype.stop=function(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval)},e.prototype.destroy=function(){var t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0},e.prototype.getType=function(){return"force2"},e.prototype.getSameTypeLeafMap=function(){var t=this,e=t.nodeClusterBy,n=t.nodes,r=t.edges,i=t.nodeMap,o=t.degreesMap;if(null==n?void 0:n.length){var a={};return n.forEach((function(t,n){1===o[t.id].all&&(a[t.id]=(0,s.getCoreNodeAndRelativeLeafNodes)("leaf",t,r,e,o,i))})),a}},e}(a.Base);e.Force2Layout=c},23151:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.id=t.id||0,this.rx=t.rx,this.ry=t.ry,this.fx=0,this.fy=0,this.mass=t.mass,this.degree=t.degree,this.g=t.g||0}return t.prototype.distanceTo=function(t){var e=this.rx-t.rx,n=this.ry-t.ry;return Math.hypot(e,n)},t.prototype.setPos=function(t,e){this.rx=t,this.ry=e},t.prototype.resetForce=function(){this.fx=0,this.fy=0},t.prototype.addForce=function(t){var e=t.rx-this.rx,n=t.ry-this.ry,r=Math.hypot(e,n);r=r<1e-4?1e-4:r;var i=this.g*(this.degree+1)*(t.degree+1)/r;this.fx+=i*e/r,this.fy+=i*n/r},t.prototype.in=function(t){return t.contains(this.rx,this.ry)},t.prototype.add=function(e){var n=this.mass+e.mass;return new t({rx:(this.rx*this.mass+e.rx*e.mass)/n,ry:(this.ry*this.mass+e.ry*e.mass)/n,mass:n,degree:this.degree+e.degree})},t}();e.default=n},48991:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ForceAtlas2Layout=void 0;var a=n(46271),s=n(81422),u=o(n(23151)),l=o(n(42784)),c=o(n(25980)),h=function(t){function e(e){var n=t.call(this)||this;return n.center=[0,0],n.width=300,n.height=300,n.nodes=[],n.edges=[],n.kr=5,n.kg=1,n.mode="normal",n.preventOverlap=!1,n.dissuadeHubs=!1,n.barnesHut=void 0,n.maxIteration=0,n.ks=.1,n.ksmax=10,n.tao=.1,n.onLayoutEnd=function(){},n.prune=void 0,n.updateCfg(e),n}return i(e,t),e.prototype.getDefaultCfg=function(){return{}},e.prototype.execute=function(){var t=this,e=t.nodes,n=t.onLayoutEnd,r=t.prune,i=t.maxIteration;t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight);for(var o=[],a=e.length,u=0;u<a;u+=1){var l=e[u],c=10,h=10;(0,s.isNumber)(l.size)&&(c=l.size,h=l.size),(0,s.isArray)(l.size)?(isNaN(l.size[0])||(c=l.size[0]),isNaN(l.size[1])||(h=l.size[1])):(0,s.isObject)(l.size)&&(c=l.size.width,h=l.size.height),t.getWidth&&!isNaN(t.getWidth(l))&&(h=t.getWidth(l)),t.getHeight&&!isNaN(t.getHeight(l))&&(c=t.getHeight(l));var d=Math.max(c,h);o.push(d)}void 0===t.barnesHut&&a>250&&(t.barnesHut=!0),void 0===t.prune&&a>100&&(t.prune=!0),0!==this.maxIteration||t.prune?0===this.maxIteration&&r&&(i=100,a<=200&&a>100?i=500:a>200&&(i=950),this.maxIteration=i):(i=250,a<=200&&a>100?i=1e3:a>200&&(i=1200),this.maxIteration=i),t.kr||(t.kr=50,a>100&&a<=500?t.kr=20:a>500&&(t.kr=1)),t.kg||(t.kg=20,a>100&&a<=500?t.kg=10:a>500&&(t.kg=1)),this.nodes=t.updateNodesByForces(o),n()},e.prototype.updateNodesByForces=function(t){for(var e=this,n=e.edges,r=e.maxIteration,i=e.nodes,o=n.filter((function(t){return(0,s.getEdgeTerminal)(t,"source")!==(0,s.getEdgeTerminal)(t,"target")})),a=i.length,u=o.length,l=[],c={},h={},d=[],f=0;f<a;f+=1)c[i[f].id]=f,l[f]=0,(void 0===i[f].x||isNaN(i[f].x))&&(i[f].x=1e3*Math.random()),(void 0===i[f].y||isNaN(i[f].y))&&(i[f].y=1e3*Math.random()),d.push({x:i[f].x,y:i[f].y});for(f=0;f<u;f+=1){for(var p=void 0,m=void 0,g=0,v=0,y=0;y<a;y+=1){var b=(0,s.getEdgeTerminal)(o[f],"source"),x=(0,s.getEdgeTerminal)(o[f],"target");i[y].id===b?(p=i[y],g=y):i[y].id===x&&(m=i[y],v=y),h[f]={sourceIdx:g,targetIdx:v}}p&&(l[c[p.id]]+=1),m&&(l[c[m.id]]+=1)}var w=r;if(i=this.iterate(w,c,h,u,l,t),e.prune){for(y=0;y<u;y+=1)l[h[y].sourceIdx]<=1?(i[h[y].sourceIdx].x=i[h[y].targetIdx].x,i[h[y].sourceIdx].y=i[h[y].targetIdx].y):l[h[y].targetIdx]<=1&&(i[h[y].targetIdx].x=i[h[y].sourceIdx].x,i[h[y].targetIdx].y=i[h[y].sourceIdx].y);e.prune=!1,e.barnesHut=!1,w=100,i=this.iterate(w,c,h,u,l,t)}return i},e.prototype.iterate=function(t,e,n,r,i,o){for(var a=this,s=a.nodes,l=a.kr,c=a.preventOverlap,h=a.barnesHut,d=s.length,f=0,p=t,m=[],g=[],v=[],y=0;y<d;y+=1)if(m[2*y]=0,m[2*y+1]=0,h){var b={id:y,rx:s[y].x,ry:s[y].y,mass:1,g:l,degree:i[y]};v[y]=new u.default(b)}for(;p>0;){for(y=0;y<d;y+=1)g[2*y]=m[2*y],g[2*y+1]=m[2*y+1],m[2*y]=0,m[2*y+1]=0;m=this.getAttrForces(p,50,r,e,n,i,o,m),m=h&&(c&&p>50||!c)?this.getOptRepGraForces(m,v,i):this.getRepGraForces(p,50,m,100,o,i);var x=this.updatePos(m,g,f,i);s=x.nodes,f=x.sg,p--,a.tick&&a.tick()}return s},e.prototype.getAttrForces=function(t,e,n,r,i,o,a,s){for(var u=this,l=u.nodes,c=u.preventOverlap,h=u.dissuadeHubs,d=u.mode,f=u.prune,p=0;p<n;p+=1){var m=l[i[p].sourceIdx],g=i[p].sourceIdx,v=l[i[p].targetIdx],y=i[p].targetIdx;if(!f||!(o[g]<=1||o[y]<=1)){var b=[v.x-m.x,v.y-m.y],x=Math.hypot(b[0],b[1]);x=x<1e-4?1e-4:x,b[0]=b[0]/x,b[1]=b[1]/x,c&&t<e&&(x=x-a[g]-a[y]);var w=x,_=w;"linlog"===d&&(_=w=Math.log(1+x)),h&&(w=x/o[g],_=x/o[y]),c&&t<e&&x<=0?(w=0,_=0):c&&t<e&&x>0&&(w=x,_=x),s[2*r[m.id]]+=w*b[0],s[2*r[v.id]]-=_*b[0],s[2*r[m.id]+1]+=w*b[1],s[2*r[v.id]+1]-=_*b[1]}}return s},e.prototype.getRepGraForces=function(t,e,n,r,i,o){for(var a=this,s=a.nodes,u=a.preventOverlap,l=a.kr,c=a.kg,h=a.center,d=a.prune,f=s.length,p=0;p<f;p+=1){for(var m=p+1;m<f;m+=1)if(!d||!(o[p]<=1||o[m]<=1)){var g=[s[m].x-s[p].x,s[m].y-s[p].y],v=Math.hypot(g[0],g[1]);v=v<1e-4?1e-4:v,g[0]=g[0]/v,g[1]=g[1]/v,u&&t<e&&(v=v-i[p]-i[m]);var y=l*(o[p]+1)*(o[m]+1)/v;u&&t<e&&v<0?y=r*(o[p]+1)*(o[m]+1):u&&t<e&&0===v?y=0:u&&t<e&&v>0&&(y=l*(o[p]+1)*(o[m]+1)/v),n[2*p]-=y*g[0],n[2*m]+=y*g[0],n[2*p+1]-=y*g[1],n[2*m+1]+=y*g[1]}var b=[s[p].x-h[0],s[p].y-h[1]],x=Math.hypot(b[0],b[1]);b[0]=b[0]/x,b[1]=b[1]/x;var w=c*(o[p]+1);n[2*p]-=w*b[0],n[2*p+1]-=w*b[1]}return n},e.prototype.getOptRepGraForces=function(t,e,n){for(var r=this,i=r.nodes,o=r.kg,a=r.center,s=r.prune,u=i.length,h=9e10,d=-9e10,f=9e10,p=-9e10,m=0;m<u;m+=1)s&&n[m]<=1||(e[m].setPos(i[m].x,i[m].y),i[m].x>=d&&(d=i[m].x),i[m].x<=h&&(h=i[m].x),i[m].y>=p&&(p=i[m].y),i[m].y<=f&&(f=i[m].y));var g={xmid:(d+h)/2,ymid:(p+f)/2,length:Math.max(d-h,p-f),massCenter:a,mass:u},v=new l.default(g),y=new c.default(v);for(m=0;m<u;m+=1)s&&n[m]<=1||e[m].in(v)&&y.insert(e[m]);for(m=0;m<u;m+=1)if(!(s&&n[m]<=1)){e[m].resetForce(),y.updateForce(e[m]),t[2*m]-=e[m].fx,t[2*m+1]-=e[m].fy;var b=[i[m].x-a[0],i[m].y-a[1]],x=Math.hypot(b[0],b[1]);x=x<1e-4?1e-4:x,b[0]=b[0]/x,b[1]=b[1]/x;var w=o*(n[m]+1);t[2*m]-=w*b[0],t[2*m+1]-=w*b[1]}return t},e.prototype.updatePos=function(t,e,n,r){for(var i=this,o=i.nodes,a=i.ks,u=i.tao,l=i.prune,c=i.ksmax,h=o.length,d=[],f=[],p=0,m=0,g=0;g<h;g+=1)if(!(l&&r[g]<=1)){var v=[t[2*g]-e[2*g],t[2*g+1]-e[2*g+1]],y=Math.hypot(v[0],v[1]),b=[t[2*g]+e[2*g],t[2*g+1]+e[2*g+1]],x=Math.hypot(b[0],b[1]);d[g]=y,f[g]=x/2,p+=(r[g]+1)*d[g],m+=(r[g]+1)*f[g]}var w=n;n=u*m/p,0!==w&&(n=n>1.5*w?1.5*w:n);for(g=0;g<h;g+=1)if(!(l&&r[g]<=1||(0,s.isNumber)(o[g].fx)&&(0,s.isNumber)(o[g].fy))){var _=a*n/(1+n*Math.sqrt(d[g])),S=Math.hypot(t[2*g],t[2*g+1]),E=c/(S=S<1e-4?1e-4:S),A=(_=_>E?E:_)*t[2*g],M=_*t[2*g+1];o[g].x+=A,o[g].y+=M}return{nodes:o,sg:n}},e}(a.Base);e.ForceAtlas2Layout=h},42784:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.xmid=t.xmid,this.ymid=t.ymid,this.length=t.length,this.massCenter=t.massCenter||[0,0],this.mass=t.mass||1}return t.prototype.getLength=function(){return this.length},t.prototype.contains=function(t,e){var n=this.length/2;return t<=this.xmid+n&&t>=this.xmid-n&&e<=this.ymid+n&&e>=this.ymid-n},t.prototype.NW=function(){return new t({xmid:this.xmid-this.length/4,ymid:this.ymid+this.length/4,length:this.length/2})},t.prototype.NE=function(){return new t({xmid:this.xmid+this.length/4,ymid:this.ymid+this.length/4,length:this.length/2})},t.prototype.SW=function(){return new t({xmid:this.xmid-this.length/4,ymid:this.ymid-this.length/4,length:this.length/2})},t.prototype.SE=function(){return new t({xmid:this.xmid+this.length/4,ymid:this.ymid-this.length/4,length:this.length/2})},t}();e.default=n},25980:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,null!=t&&(this.quad=t)}return t.prototype.insert=function(e){null!=this.body?this._isExternal()?(this.quad&&(this.NW=new t(this.quad.NW()),this.NE=new t(this.quad.NE()),this.SW=new t(this.quad.SW()),this.SE=new t(this.quad.SE())),this._putBody(this.body),this._putBody(e),this.body=this.body.add(e)):(this.body=this.body.add(e),this._putBody(e)):this.body=e},t.prototype._putBody=function(t){this.quad&&(t.in(this.quad.NW())&&this.NW?this.NW.insert(t):t.in(this.quad.NE())&&this.NE?this.NE.insert(t):t.in(this.quad.SW())&&this.SW?this.SW.insert(t):t.in(this.quad.SE())&&this.SE&&this.SE.insert(t))},t.prototype._isExternal=function(){return null==this.NW&&null==this.NE&&null==this.SW&&null==this.SE},t.prototype.updateForce=function(t){null!=this.body&&t!==this.body&&(this._isExternal()||(this.quad?this.quad.getLength():0)/this.body.distanceTo(t)<this.theta?t.addForce(this.body):(this.NW&&this.NW.updateForce(t),this.NE&&this.NE.updateForce(t),this.SW&&this.SW.updateForce(t),this.SE&&this.SE.updateForce(t)))},t}();e.default=n},37657:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0});var a=o(n(99877)),s=n(81422);e.default=function(){function t(t){return function(){return t}}var e,n=function(t){return t.cluster},r=t(1),i=t(-1),o=t(100),u=t(.1),l=[0,0],c=[],h={},d=[],f=100,p=100,m={none:{x:0,y:0}},g=[],v="force",y=!0,b=.1;function x(t){if(!y)return x;e.tick(),_();for(var r=0,i=c.length,o=void 0,a=t*b;r<i;++r)(o=c[r]).vx+=(m[n(o)].x-o.x)*a,o.vy+=(m[n(o)].y-o.y)*a}function w(){c&&function(){if(!c||!c.length)return;if(void 0===n(c[0]))throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var t=(l=[],m=[],v={},y={},b=[],y=function(t){var e={};return t.forEach((function(t){var r=n(t);e[r]||(e[r]={count:0,sumforceNodeSize:0})})),t.forEach((function(t){var i=n(t),o=r(t),a=e[i];a.count=a.count+1,a.sumforceNodeSize=a.sumforceNodeSize+Math.PI*(o*o)*1.3,e[i]=a})),e}(c),b=function(t){var e={},r=[];return t.forEach((function(t){var r=function(t){var e=(0,s.getEdgeTerminal)(t,"source"),r=(0,s.getEdgeTerminal)(t,"target"),i=n(h[e]),o=n(h[r]);return i<=o?"".concat(i,"~").concat(o):"".concat(o,"~").concat(i)}(t),i=0;void 0!==e[r]&&(i=e[r]),i+=1,e[r]=i})),Object.entries(e).forEach((function(t){var e=t[0],n=t[1],i=e.split("~")[0],o=e.split("~")[1];void 0!==i&&void 0!==o&&r.push({source:i,target:o,count:n})})),r}(d),Object.keys(y).forEach((function(t,e){var n=y[t];l.push({id:t,size:n.count,r:Math.sqrt(n.sumforceNodeSize/Math.PI)}),v[t]=e})),b.forEach((function(t){var e=(0,s.getEdgeTerminal)(t,"source"),n=(0,s.getEdgeTerminal)(t,"target"),r=v[e],i=v[n];void 0!==r&&void 0!==i&&m.push({source:r,target:i,count:t.count})})),{nodes:l,links:m});var l,m,v,y,b;e=a.forceSimulation(t.nodes).force("x",a.forceX(f).strength(.1)).force("y",a.forceY(p).strength(.1)).force("collide",a.forceCollide((function(t){return t.r})).iterations(4)).force("charge",a.forceManyBody().strength(i)).force("links",a.forceLink(t.nodes.length?t.links:[]).distance(o).strength(u)),g=e.nodes(),_()}()}function _(){return m={none:{x:0,y:0}},g.forEach((function(t){m[t.id]={x:t.x-l[0],y:t.y-l[1]}})),m}return x.initialize=function(t){c=t,w()},x.template=function(t){return arguments.length?(v=t,w(),x):v},x.groupBy=function(t){return arguments.length?"string"==typeof t?(n=function(e){return e[t]},x):(n=t,x):n},x.enableGrouping=function(t){return arguments.length?(y=t,x):y},x.strength=function(t){return arguments.length?(b=t,x):b},x.centerX=function(t){return arguments.length?(f=t,x):f},x.centerY=function(t){return arguments.length?(p=t,x):p},x.nodes=function(t){return arguments.length?(function(t){h={},t.forEach((function(t){h[t.id]=t}))}(t||[]),c=t||[],x):c},x.links=function(t){return arguments.length?(d=t||[],w(),x):d},x.forceNodeSize=function(e){return arguments.length?(r="function"==typeof e?e:t(+e),w(),x):r},x.nodeSize=x.forceNodeSize,x.forceCharge=function(e){return arguments.length?(i="function"==typeof e?e:t(+e),w(),x):i},x.forceLinkDistance=function(e){return arguments.length?(o="function"==typeof e?e:t(+e),w(),x):o},x.forceLinkStrength=function(e){return arguments.length?(u="function"==typeof e?e:t(+e),w(),x):u},x.offset=function(t){return arguments.length?(l=t,x):l},x.getFocis=_,x}},22127:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&o(e,t,n);return a(e,t),e},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ForceLayout=void 0;var l=s(n(99877)),c=u(n(37657)),h=n(81422),d=n(46271),f=n(55573),p=function(t){function e(e){var n=t.call(this)||this;return n.center=[0,0],n.nodeStrength=null,n.edgeStrength=null,n.preventOverlap=!1,n.clusterNodeStrength=null,n.clusterEdgeStrength=null,n.clusterEdgeDistance=null,n.clusterNodeSize=null,n.clusterFociStrength=null,n.linkDistance=50,n.alphaDecay=.028,n.alphaMin=.001,n.alpha=.3,n.collideStrength=1,n.workerEnabled=!1,n.tick=function(){},n.onLayoutEnd=function(){},n.ticking=void 0,e&&n.updateCfg(e),n}return i(e,t),e.prototype.getDefaultCfg=function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}},e.prototype.init=function(t){var e=this;e.nodes=t.nodes||[];var n=t.edges||[];e.edges=n.map((function(t){var e={},n=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(t).forEach((function(r){n.indexOf(r)>-1||(e[r]=t[r])})),e})),e.ticking=!1},e.prototype.execute=function(t){var e=this,n=e.nodes,r=e.edges;if(!e.ticking){var i=e.forceSimulation,o=e.alphaMin,a=e.alphaDecay,s=e.alpha;if(i){if(t)if(e.clustering&&e.clusterForce&&(e.clusterForce.nodes(n),e.clusterForce.links(r)),i.nodes(n),r&&e.edgeForce)e.edgeForce.links(r);else if(r&&!e.edgeForce){d=l.forceLink().id((function(t){return t.id})).links(r);e.edgeStrength&&d.strength(e.edgeStrength),e.linkDistance&&d.distance(e.linkDistance),e.edgeForce=d,i.force("link",d)}e.preventOverlap&&e.overlapProcess(i),i.alpha(s).restart(),this.ticking=!0}else try{var u=l.forceManyBody();if(e.nodeStrength&&u.strength(e.nodeStrength),i=l.forceSimulation().nodes(n),e.clustering){var h=(0,c.default)();h.centerX(e.center[0]).centerY(e.center[1]).template("force").strength(e.clusterFociStrength),r&&h.links(r),n&&h.nodes(n),h.forceLinkDistance(e.clusterEdgeDistance).forceLinkStrength(e.clusterEdgeStrength).forceCharge(e.clusterNodeStrength).forceNodeSize(e.clusterNodeSize),e.clusterForce=h,i.force("group",h)}if(i.force("center",l.forceCenter(e.center[0],e.center[1])).force("charge",u).alpha(s).alphaDecay(a).alphaMin(o),e.preventOverlap&&e.overlapProcess(i),r){var d=l.forceLink().id((function(t){return t.id})).links(r);e.edgeStrength&&d.strength(e.edgeStrength),e.linkDistance&&d.distance(e.linkDistance),e.edgeForce=d,i.force("link",d)}if(e.workerEnabled&&!m()&&(e.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),e.workerEnabled){i.stop();for(var p=function(t){var e=t.alphaMin(),n=t.alphaTarget(),r=t.alpha(),i=Math.log((e-n)/(r-n))/Math.log(1-t.alphaDecay()),o=Math.ceil(i);return o}(i),g=1;g<=p;g++)i.tick(),postMessage({nodes:n,currentTick:g,totalTicks:p,type:f.LAYOUT_MESSAGE.TICK},void 0);e.ticking=!1}else i.on("tick",(function(){e.tick()})).on("end",(function(){e.ticking=!1,e.onLayoutEnd&&e.onLayoutEnd()})),e.ticking=!0;e.forceSimulation=i,e.ticking=!0}catch(t){e.ticking=!1,console.warn(t)}}},e.prototype.overlapProcess=function(t){var e,n,r=this,i=r.nodeSize,o=r.nodeSpacing,a=r.collideStrength;if(n=(0,h.isNumber)(o)?function(){return o}:(0,h.isFunction)(o)?o:function(){return 0},i)if((0,h.isFunction)(i))e=function(t){return i(t)+n(t)};else if((0,h.isArray)(i)){var s=(i[0]>i[1]?i[0]:i[1])/2;e=function(t){return s+n(t)}}else if((0,h.isNumber)(i)){var u=i/2;e=function(t){return u+n(t)}}else e=function(){return 10};else e=function(t){return t.size?(0,h.isArray)(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])/2+n(t):(0,h.isObject)(t.size)?(t.size.width>t.size.height?t.size.width:t.size.height)/2+n(t):t.size/2+n(t):10+n(t)};t.force("collisionForce",l.forceCollide(e).strength(a))},e.prototype.updateCfg=function(t){var e=this;e.ticking&&(e.forceSimulation.stop(),e.ticking=!1),e.forceSimulation=null,Object.assign(e,t)},e.prototype.destroy=function(){var t=this;t.ticking&&(t.forceSimulation.stop(),t.ticking=!1),t.nodes=null,t.edges=null,t.destroyed=!0},e}(d.Base);function m(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}e.ForceLayout=p},24964:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(22127),e)},361:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.FruchtermanLayout=void 0;var o=n(46271),a=n(81422),s=function(t){function e(e){var n=t.call(this)||this;return n.maxIteration=1e3,n.workerEnabled=!1,n.gravity=10,n.speed=5,n.clustering=!1,n.clusterGravity=10,n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.onLayoutEnd=function(){},n.tick=function(){},n.animate=!0,n.updateCfg(e),n}return i(e,t),e.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10,animate:!0}},e.prototype.execute=function(){var t,e,n=this,r=this,i=r.nodes;if(void 0!==r.timeInterval&&"undefined"!=typeof window&&window.clearInterval(r.timeInterval),i&&0!==i.length){r.width||"undefined"==typeof window||(r.width=window.innerWidth),r.height||"undefined"==typeof window||(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);var o=r.center;if(1===i.length)return i[0].x=o[0],i[0].y=o[1],void(null===(e=r.onLayoutEnd)||void 0===e||e.call(r));var s={},u={};return i.forEach((function(t,e){(0,a.isNumber)(t.x)||(t.x=Math.random()*n.width),(0,a.isNumber)(t.y)||(t.y=Math.random()*n.height),s[t.id]=t,u[t.id]=e})),r.nodeMap=s,r.nodeIdxMap=u,r.run()}null===(t=r.onLayoutEnd)||void 0===t||t.call(r)},e.prototype.run=function(){var t,e=this,n=e.nodes;if(n){var r=e.edges,i=e.maxIteration,o=e.workerEnabled,a=e.clustering,s=e.animate,u={};if(a&&n.forEach((function(t){void 0===u[t.cluster]&&(u[t.cluster]={name:t.cluster,cx:0,cy:0,count:0})})),o||!s){for(var l=0;l<i;l++)e.runOneStep(u);null===(t=e.onLayoutEnd)||void 0===t||t.call(e)}else{if("undefined"==typeof window)return;var c=0;this.timeInterval=window.setInterval((function(){var t;e.runOneStep(u),++c>=i&&(null===(t=e.onLayoutEnd)||void 0===t||t.call(e),window.clearInterval(e.timeInterval))}),0)}return{nodes:n,edges:r}}},e.prototype.runOneStep=function(t){var e,n=this,r=n.nodes;if(r){var i=n.edges,o=n.center,s=n.gravity,u=n.speed,l=n.clustering,c=n.height*n.width,h=Math.sqrt(c)/10,d=c/(r.length+1),f=Math.sqrt(d),p=[];if(r.forEach((function(t,e){p[e]={x:0,y:0}})),n.applyCalculate(r,i,p,f,d),l){for(var m in t)t[m].cx=0,t[m].cy=0,t[m].count=0;for(var m in r.forEach((function(e){var n=t[e.cluster];(0,a.isNumber)(e.x)&&(n.cx+=e.x),(0,a.isNumber)(e.y)&&(n.cy+=e.y),n.count++})),t)t[m].cx/=t[m].count,t[m].cy/=t[m].count;var g=n.clusterGravity||s;r.forEach((function(e,n){if((0,a.isNumber)(e.x)&&(0,a.isNumber)(e.y)){var r=t[e.cluster],i=Math.sqrt((e.x-r.cx)*(e.x-r.cx)+(e.y-r.cy)*(e.y-r.cy)),o=f*g;p[n].x-=o*(e.x-r.cx)/i,p[n].y-=o*(e.y-r.cy)/i}}))}r.forEach((function(t,e){if((0,a.isNumber)(t.x)&&(0,a.isNumber)(t.y)){var n=.01*f*s;p[e].x-=n*(t.x-o[0]),p[e].y-=n*(t.y-o[1])}})),r.forEach((function(t,e){if((0,a.isNumber)(t.fx)&&(0,a.isNumber)(t.fy))return t.x=t.fx,void(t.y=t.fy);if((0,a.isNumber)(t.x)&&(0,a.isNumber)(t.y)){var n=Math.sqrt(p[e].x*p[e].x+p[e].y*p[e].y);if(n>0){var r=Math.min(h*(u/800),n);t.x+=p[e].x/n*r,t.y+=p[e].y/n*r}}})),null===(e=n.tick)||void 0===e||e.call(n)}},e.prototype.applyCalculate=function(t,e,n,r,i){this.calRepulsive(t,n,i),e&&this.calAttractive(e,n,r)},e.prototype.calRepulsive=function(t,e,n){t.forEach((function(r,i){e[i]={x:0,y:0},t.forEach((function(t,o){if(i!==o&&(0,a.isNumber)(r.x)&&(0,a.isNumber)(t.x)&&(0,a.isNumber)(r.y)&&(0,a.isNumber)(t.y)){var s=r.x-t.x,u=r.y-t.y,l=s*s+u*u;if(0===l){l=1;var c=i>o?1:-1;s=.01*c,u=.01*c}var h=n/l;e[i].x+=s*h,e[i].y+=u*h}}))}))},e.prototype.calAttractive=function(t,e,n){var r=this;t.forEach((function(t){var i=(0,a.getEdgeTerminal)(t,"source"),o=(0,a.getEdgeTerminal)(t,"target");if(i&&o){var s=r.nodeIdxMap[i],u=r.nodeIdxMap[o];if(s!==u){var l=r.nodeMap[i],c=r.nodeMap[o];if((0,a.isNumber)(c.x)&&(0,a.isNumber)(l.x)&&(0,a.isNumber)(c.y)&&(0,a.isNumber)(l.y)){var h=c.x-l.x,d=c.y-l.y,f=Math.sqrt(h*h+d*d),p=f*f/n;e[u].x-=h/f*p,e[u].y-=d/f*p,e[s].x+=h/f*p,e[s].y+=d/f*p}}}}))},e.prototype.stop=function(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval)},e.prototype.destroy=function(){var t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0},e.prototype.getType=function(){return"fruchterman"},e}(o.Base);e.FruchtermanLayout=s},70238:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.GForceLayout=void 0;var o=n(46271),a=n(81422),s=function(t,e){return t?(0,a.isNumber)(t)?function(e){return t}:t:function(t){return e||1}},u=function(t){function e(e){var n=t.call(this)||this;return n.maxIteration=500,n.workerEnabled=!1,n.edgeStrength=200,n.nodeStrength=1e3,n.coulombDisScale=.005,n.damping=.9,n.maxSpeed=1e3,n.minMovement=.5,n.interval=.02,n.factor=1,n.linkDistance=1,n.gravity=10,n.preventOverlap=!0,n.collideStrength=1,n.tick=function(){},n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.animate=!0,n.updateCfg(e),n}return i(e,t),e.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},e.prototype.execute=function(){var t,e,n=this,r=n.nodes;if(void 0!==n.timeInterval&&"undefined"!=typeof window&&window.clearInterval(n.timeInterval),r&&0!==r.length){n.width||"undefined"==typeof window||(n.width=window.innerWidth),n.height||"undefined"==typeof window||(n.height=window.innerHeight),n.center||(n.center=[n.width/2,n.height/2]);var i=n.center;if(1===r.length)return r[0].x=i[0],r[0].y=i[1],void(null===(e=n.onLayoutEnd)||void 0===e||e.call(n));var o={},u={};r.forEach((function(t,e){(0,a.isNumber)(t.x)||(t.x=Math.random()*n.width),(0,a.isNumber)(t.y)||(t.y=Math.random()*n.height),o[t.id]=t,u[t.id]=e})),n.nodeMap=o,n.nodeIdxMap=u,n.linkDistance=s(n.linkDistance,1),n.nodeStrength=s(n.nodeStrength,1),n.edgeStrength=s(n.edgeStrength,1);var l,c=n.nodeSize;if(n.preventOverlap){var h,d=n.nodeSpacing;h=(0,a.isNumber)(d)?function(){return d}:(0,a.isFunction)(d)?d:function(){return 0},l=c?(0,a.isArray)(c)?function(t){return Math.max(c[0],c[1])+h(t)}:function(t){return c+h(t)}:function(t){return t.size?(0,a.isArray)(t.size)?Math.max(t.size[0],t.size[1])+h(t):(0,a.isObject)(t.size)?Math.max(t.size.width,t.size.height)+h(t):t.size+h(t):10+h(t)}}n.nodeSize=l;var f=n.edges;n.degrees=(0,a.getDegree)(r.length,n.nodeIdxMap,f),n.getMass||(n.getMass=function(t){return t.mass||n.degrees[n.nodeIdxMap[t.id]].all||1}),n.run()}else null===(t=n.onLayoutEnd)||void 0===t||t.call(n)},e.prototype.run=function(){var t,e=this,n=e.maxIteration,r=e.nodes,i=e.workerEnabled,o=e.minMovement,a=e.animate;if(r)if(i||!a){for(var s=0;s<n;s++){var u=e.runOneStep(s);if(e.reachMoveThreshold(r,u,o))break}null===(t=e.onLayoutEnd)||void 0===t||t.call(e)}else{if("undefined"==typeof window)return;var l=0;this.timeInterval=window.setInterval((function(){var t,i;if(r){var a=e.runOneStep(l)||[];e.reachMoveThreshold(r,a,o)&&(null===(t=e.onLayoutEnd)||void 0===t||t.call(e),window.clearInterval(e.timeInterval)),++l>=n&&(null===(i=e.onLayoutEnd)||void 0===i||i.call(e),window.clearInterval(e.timeInterval))}}),0)}},e.prototype.reachMoveThreshold=function(t,e,n){var r=0;return t.forEach((function(t,n){var i=t.x-e[n].x,o=t.y-e[n].y;r+=Math.sqrt(i*i+o*o)})),(r/=t.length)<n},e.prototype.runOneStep=function(t){var e,n=this,r=n.nodes,i=n.edges,o=[],a=[];if(r){r.forEach((function(t,e){o[2*e]=0,o[2*e+1]=0,a[2*e]=0,a[2*e+1]=0})),n.calRepulsive(o,r),i&&n.calAttractive(o,i),n.calGravity(o,r);var s=Math.max(.02,n.interval-.002*t);n.updateVelocity(o,a,s,r);var u=[];return r.forEach((function(t){u.push({x:t.x,y:t.y})})),n.updatePosition(a,s,r),null===(e=n.tick)||void 0===e||e.call(n),u}},e.prototype.calRepulsive=function(t,e){var n=this,r=n.getMass,i=n.factor,o=n.coulombDisScale,a=n.preventOverlap,s=n.collideStrength,u=void 0===s?1:s,l=n.nodeStrength,c=n.nodeSize;e.forEach((function(n,s){var h=r?r(n):1;e.forEach((function(e,d){if(!(s>=d)){var f=n.x-e.x,p=n.y-e.y;0===f&&0===p&&(f=.01*Math.random(),p=.01*Math.random());var m=f*f+p*p,g=Math.sqrt(m),v=(g+.1)*o,y=f/g,b=p/g,x=.5*(l(n)+l(e))*i/(v*v),w=r?r(e):1;if(t[2*s]+=y*x,t[2*s+1]+=b*x,t[2*d]-=y*x,t[2*d+1]-=b*x,a&&(c(n)+c(e))/2>g){var _=u*(l(n)+l(e))*.5/m;t[2*s]+=y*_/h,t[2*s+1]+=b*_/h,t[2*d]-=y*_/w,t[2*d+1]-=b*_/w}}}))}))},e.prototype.calAttractive=function(t,e){var n=this,r=n.nodeMap,i=n.nodeIdxMap,o=n.linkDistance,s=n.edgeStrength,u=n.nodeSize,l=n.getMass;e.forEach((function(e,n){var c=(0,a.getEdgeTerminal)(e,"source"),h=(0,a.getEdgeTerminal)(e,"target"),d=r[c],f=r[h],p=f.x-d.x,m=f.y-d.y;0===p&&0===m&&(p=.01*Math.random(),m=.01*Math.random());var g=Math.sqrt(p*p+m*m),v=p/g,y=m/g,b=((o(e,d,f)||1+(u(d)+u(f)||0)/2)-g)*s(e),x=i[c],w=i[h],_=l?l(d):1,S=l?l(f):1;t[2*x]-=v*b/_,t[2*x+1]-=y*b/_,t[2*w]+=v*b/S,t[2*w+1]+=y*b/S}))},e.prototype.calGravity=function(t,e){for(var n=this,r=n.center,i=n.gravity,o=n.degrees,s=e.length,u=0;u<s;u++){var l=e[u],c=l.x-r[0],h=l.y-r[1],d=i;if(n.getCenter){var f=n.getCenter(l,o[u].all);f&&(0,a.isNumber)(f[0])&&(0,a.isNumber)(f[1])&&(0,a.isNumber)(f[2])&&(c=l.x-f[0],h=l.y-f[1],d=f[2])}d&&(t[2*u]-=d*c,t[2*u+1]-=d*h)}},e.prototype.updateVelocity=function(t,e,n,r){var i=this,o=n*i.damping;r.forEach((function(n,r){var a=t[2*r]*o||.01,s=t[2*r+1]*o||.01,u=Math.sqrt(a*a+s*s);if(u>i.maxSpeed){var l=i.maxSpeed/u;a*=l,s*=l}e[2*r]=a,e[2*r+1]=s}))},e.prototype.updatePosition=function(t,e,n){n.forEach((function(n,r){if((0,a.isNumber)(n.fx)&&(0,a.isNumber)(n.fy))return n.x=n.fx,void(n.y=n.fy);var i=t[2*r]*e,o=t[2*r+1]*e;n.x+=i,n.y+=o}))},e.prototype.stop=function(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval)},e.prototype.destroy=function(){var t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0},e.prototype.getType=function(){return"gForce"},e}(o.Base);e.GForceLayout=u},25444:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.FruchtermanGPULayout=void 0;var s=n(46271),u=n(81422),l=n(4706),c=n(48196),h=n(94341),d=n(55573),f=function(t){function e(e){var n=t.call(this)||this;return n.maxIteration=1e3,n.gravity=10,n.speed=1,n.clustering=!1,n.clusterField="cluster",n.clusterGravity=10,n.workerEnabled=!1,n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.updateCfg(e),n}return i(e,t),e.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}},e.prototype.execute=function(){return o(this,void 0,void 0,(function(){var t,e,n,r,i,o=this;return a(this,(function(a){switch(a.label){case 0:return(e=(t=this).nodes)&&0!==e.length?(t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]),n=t.center,1===e.length?(e[0].x=n[0],e[0].y=n[1],t.onLayoutEnd&&t.onLayoutEnd(),[2]):(r={},i={},e.forEach((function(t,e){(0,u.isNumber)(t.x)||(t.x=Math.random()*o.width),(0,u.isNumber)(t.y)||(t.y=Math.random()*o.height),r[t.id]=t,i[t.id]=e})),t.nodeMap=r,t.nodeIdxMap=i,[4,t.run()])):(t.onLayoutEnd&&t.onLayoutEnd(),[2]);case 1:return a.sent(),[2]}}))}))},e.prototype.executeWithWorker=function(t,e){return o(this,void 0,void 0,(function(){var n,r,i,o,s,l=this;return a(this,(function(a){switch(a.label){case 0:return r=(n=this).nodes,i=n.center,r&&0!==r.length?1===r.length?(r[0].x=i[0],r[0].y=i[1],[2]):(o={},s={},r.forEach((function(t,e){(0,u.isNumber)(t.x)||(t.x=Math.random()*l.width),(0,u.isNumber)(t.y)||(t.y=Math.random()*l.height),o[t.id]=t,s[t.id]=e})),n.nodeMap=o,n.nodeIdxMap=s,[4,n.run(t,e)]):[2];case 1:return a.sent(),[2]}}))}))},e.prototype.run=function(t,e){return o(this,void 0,void 0,(function(){var n,r,i,s,f,p,m,g,v,y,b,x,w,_,S,E,A,M,C,T,k,I,N,P,O,L,R=this;return a(this,(function(D){switch(D.label){case 0:for(r=(n=this).nodes,i=n.edges,s=n.maxIteration,f=n.center,p=n.height*n.width,m=Math.sqrt(p)/10,g=p/(r.length+1),v=Math.sqrt(g),y=n.speed,b=n.clustering,x=(0,c.attributesToTextureData)([n.clusterField],r),w=x.array,_=x.count,r.forEach((function(t,e){var n=0,r=0;(0,u.isNumber)(t.fx)&&(0,u.isNumber)(t.fy)&&(n=t.fx||.001,r=t.fy||.001),w[4*e+1]=n,w[4*e+2]=r})),S=r.length,E=(0,c.buildTextureData)(r,i),A=E.maxEdgePerVetex,M=E.array,C=n.workerEnabled,T=C?l.World.create({canvas:t,engineOptions:{supportCompute:!0}}):l.World.create({engineOptions:{supportCompute:!0}}),k=n.onLayoutEnd,I=[],N=0;N<_;N++)I.push(0,0,0,0);return P=T.createKernel(h.fruchtermanBundle).setDispatch([S,1,1]).setBinding({u_Data:M,u_K:v,u_K2:g,u_Gravity:n.gravity,u_ClusterGravity:n.clusterGravity||n.gravity||1,u_Speed:y,u_MaxDisplace:m,u_Clustering:b?1:0,u_Center:f,u_AttributeArray:w,u_ClusterCenters:I,MAX_EDGE_PER_VERTEX:A,VERTEX_COUNT:S}),b&&(O=T.createKernel(h.clusterBundle).setDispatch([_,1,1]).setBinding({u_Data:M,u_NodeAttributes:w,u_ClusterCenters:I,VERTEX_COUNT:S,CLUSTER_COUNT:_})),L=function(){return o(R,void 0,void 0,(function(){var n,i;return a(this,(function(o){switch(o.label){case 0:n=0,o.label=1;case 1:return n<s?[4,P.execute()]:[3,6];case 2:return o.sent(),b?(O.setBinding({u_Data:P}),[4,O.execute()]):[3,4];case 3:o.sent(),P.setBinding({u_ClusterCenters:O}),o.label=4;case 4:P.setBinding({u_MaxDisplace:m*=.99}),o.label=5;case 5:return n++,[3,1];case 6:return[4,P.getOutput()];case 7:return i=o.sent(),t?e.postMessage({type:d.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:i}):r.forEach((function(t,e){var n=i[4*e],r=i[4*e+1];t.x=n,t.y=r})),k&&k(),[2]}}))}))},[4,L()];case 1:return D.sent(),[2]}}))}))},e.prototype.getType=function(){return"fruchterman-gpu"},e}(s.Base);e.FruchtermanGPULayout=f},94341:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.clusterBundle=e.clusterCode=e.fruchtermanBundle=e.fruchtermanCode=void 0,e.fruchtermanCode="\nimport { globalInvocationID } from 'g-webgpu';\nconst MAX_EDGE_PER_VERTEX;\nconst VERTEX_COUNT;\n@numthreads(1, 1, 1)\nclass Fruchterman {\n  @in @out\n  u_Data: vec4[];\n  @in\n  u_K: float;\n  @in\n  u_K2: float;\n  \n  @in\n  u_Center: vec2;\n  @in\n  u_Gravity: float;\n  @in\n  u_ClusterGravity: float;\n  @in\n  u_Speed: float;\n  @in\n  u_MaxDisplace: float;\n  @in\n  u_Clustering: float;\n  @in\n  u_AttributeArray: vec4[];\n  @in\n  u_ClusterCenters: vec4[];\n  calcRepulsive(i: int, currentNode: vec4): vec2 {\n    let dx = 0, dy = 0;\n    for (let j = 0; j < VERTEX_COUNT; j++) {\n      if (i != j) {\n        const nextNode = this.u_Data[j];\n        const xDist = currentNode[0] - nextNode[0];\n        const yDist = currentNode[1] - nextNode[1];\n        const dist = (xDist * xDist + yDist * yDist) + 0.01;\n        let param = this.u_K2 / dist;\n        \n        if (dist > 0.0) {\n          dx += param * xDist;\n          dy += param * yDist;\n          if (xDist == 0 && yDist == 0) {\n            const sign = i < j ? 1 : -1;\n            dx += param * sign;\n            dy += param * sign;\n          }\n        }\n      }\n    }\n    return [dx, dy];\n  }\n  calcGravity(currentNode: vec4, nodeAttributes: vec4): vec2 { // \n    let dx = 0, dy = 0;\n    const vx = currentNode[0] - this.u_Center[0];\n    const vy = currentNode[1] - this.u_Center[1];\n    const gf = 0.01 * this.u_K * this.u_Gravity;\n    dx = gf * vx;\n    dy = gf * vy;\n    if (this.u_Clustering == 1) {\n      const clusterIdx = int(nodeAttributes[0]);\n      const center = this.u_ClusterCenters[clusterIdx];\n      const cvx = currentNode[0] - center[0];\n      const cvy = currentNode[1] - center[1];\n      const dist = sqrt(cvx * cvx + cvy * cvy) + 0.01;\n      const parma = this.u_K * this.u_ClusterGravity / dist;\n      dx += parma * cvx;\n      dy += parma * cvy;\n    }\n    return [dx, dy];\n  }\n  calcAttractive(i: int, currentNode: vec4): vec2 {\n    let dx = 0, dy = 0;\n    const arr_offset = int(floor(currentNode[2] + 0.5));\n    const length = int(floor(currentNode[3] + 0.5));\n    const node_buffer: vec4;\n    for (let p = 0; p < MAX_EDGE_PER_VERTEX; p++) {\n      if (p >= length) break;\n      const arr_idx = arr_offset + p;\n      // when arr_idx % 4 == 0 update currentNodedx_buffer\n      const buf_offset = arr_idx - arr_idx / 4 * 4;\n      if (p == 0 || buf_offset == 0) {\n        node_buffer = this.u_Data[int(arr_idx / 4)];\n      }\n      const float_j = buf_offset == 0 ? node_buffer[0] :\n                      buf_offset == 1 ? node_buffer[1] :\n                      buf_offset == 2 ? node_buffer[2] :\n                                        node_buffer[3];\n      const nextNode = this.u_Data[int(float_j)];\n      const xDist = currentNode[0] - nextNode[0];\n      const yDist = currentNode[1] - nextNode[1];\n      const dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;\n      let attractiveF = dist / this.u_K;\n    \n      if (dist > 0.0) {\n        dx -= xDist * attractiveF;\n        dy -= yDist * attractiveF;\n        if (xDist == 0 && yDist == 0) {\n          const sign = i < int(float_j) ? 1 : -1;\n          dx -= sign * attractiveF;\n          dy -= sign * attractiveF;\n        }\n      }\n    }\n    return [dx, dy];\n  }\n  @main\n  compute() {\n    const i = globalInvocationID.x;\n    const currentNode = this.u_Data[i];\n    let dx = 0, dy = 0;\n    if (i >= VERTEX_COUNT) {\n      this.u_Data[i] = currentNode;\n      return;\n    }\n\n    // [gravity, fx, fy, 0]\n    const nodeAttributes = this.u_AttributeArray[i];\n\n    if (nodeAttributes[1] != 0 && nodeAttributes[2] != 0) {\n      // the node is fixed\n      this.u_Data[i] = [\n        nodeAttributes[1],\n        nodeAttributes[2],\n        currentNode[2],\n        currentNode[3]\n      ];\n      return;\n    }\n\n    // repulsive\n    const repulsive = this.calcRepulsive(i, currentNode);\n    dx += repulsive[0];\n    dy += repulsive[1];\n    // attractive\n    const attractive = this.calcAttractive(i, currentNode);\n    dx += attractive[0];\n    dy += attractive[1];\n    // gravity\n    const gravity = this.calcGravity(currentNode, nodeAttributes);\n    dx -= gravity[0];\n    dy -= gravity[1];\n    // speed\n    dx *= this.u_Speed;\n    dy *= this.u_Speed;\n\n    // move\n    const distLength = sqrt(dx * dx + dy * dy);\n    if (distLength > 0.0) {\n      const limitedDist = min(this.u_MaxDisplace * this.u_Speed, distLength);\n      this.u_Data[i] = [\n        currentNode[0] + dx / distLength * limitedDist,\n        currentNode[1] + dy / distLength * limitedDist,\n        currentNode[2],\n        currentNode[3]\n      ];\n    }\n  }\n}\n",e.fruchtermanBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',e.clusterCode="\nimport { globalInvocationID } from 'g-webgpu';\nconst VERTEX_COUNT;\nconst CLUSTER_COUNT;\n@numthreads(1, 1, 1)\nclass CalcCenter {\n  @in\n  u_Data: vec4[];\n  @in\n  u_NodeAttributes: vec4[]; // [[clusterIdx, 0, 0, 0], ...]\n  @in @out\n  u_ClusterCenters: vec4[]; // [[cx, cy, nodeCount, clusterIdx], ...]\n  @main\n  compute() {\n    const i = globalInvocationID.x;\n    const center = this.u_ClusterCenters[i];\n    let sumx = 0;\n    let sumy = 0;\n    let count = 0;\n    for (let j = 0; j < VERTEX_COUNT; j++) {\n      const attributes = this.u_NodeAttributes[j];\n      const clusterIdx = int(attributes[0]);\n      const vertex = this.u_Data[j];\n      if (clusterIdx == i) {\n        sumx += vertex.x;\n        sumy += vertex.y;\n        count += 1;\n      }\n    }\n    this.u_ClusterCenters[i] = [\n      sumx / count,\n      sumy / count,\n      count,\n      i\n    ];\n  }\n}\n",e.clusterBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}'},62121:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.GForceGPULayout=void 0;var s=n(46271),u=n(81422),l=n(4706),c=n(48196),h=n(91922),d=n(12564),f=n(55573),p=function(t){function e(e){var n=t.call(this)||this;return n.maxIteration=1e3,n.edgeStrength=200,n.nodeStrength=1e3,n.coulombDisScale=.005,n.damping=.9,n.maxSpeed=1e3,n.minMovement=.5,n.interval=.02,n.factor=1,n.linkDistance=1,n.gravity=10,n.workerEnabled=!1,n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.updateCfg(e),n}return i(e,t),e.prototype.getDefaultCfg=function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}},e.prototype.execute=function(){return o(this,void 0,void 0,(function(){var t,e,n,r,i;return a(this,(function(o){switch(o.label){case 0:return(e=(t=this).nodes)&&0!==e.length?(t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]),n=t.center,1===e.length?(e[0].x=n[0],e[0].y=n[1],t.onLayoutEnd&&t.onLayoutEnd(),[2]):(r={},i={},e.forEach((function(e,n){(0,u.isNumber)(e.x)||(e.x=Math.random()*t.width),(0,u.isNumber)(e.y)||(e.y=Math.random()*t.height),r[e.id]=e,i[e.id]=n})),t.nodeMap=r,t.nodeIdxMap=i,t.nodeStrength=(0,c.proccessToFunc)(t.nodeStrength,1),t.edgeStrength=(0,c.proccessToFunc)(t.edgeStrength,1),[4,t.run()])):(t.onLayoutEnd&&t.onLayoutEnd(),[2]);case 1:return o.sent(),[2]}}))}))},e.prototype.executeWithWorker=function(t,e){var n=this,r=n.nodes,i=n.center;if(r&&0!==r.length){if(1===r.length)return r[0].x=i[0],void(r[0].y=i[1]);var o={},a={};r.forEach((function(t,e){(0,u.isNumber)(t.x)||(t.x=Math.random()*n.width),(0,u.isNumber)(t.y)||(t.y=Math.random()*n.height),o[t.id]=t,a[t.id]=e})),n.nodeMap=o,n.nodeIdxMap=a,n.nodeStrength=(0,c.proccessToFunc)(n.nodeStrength,1),n.edgeStrength=(0,c.proccessToFunc)(n.edgeStrength,1),n.run(t,e)}},e.prototype.run=function(t,e){return o(this,void 0,void 0,(function(){var n,r,i,s,p,m,g,v,y,b,x,w,_,S,E,A,M,C,T,k,I,N,P,O,L,R,D,z=this;return a(this,(function(F){switch(F.label){case 0:for(r=(n=this).nodes,i=n.edges,s=n.maxIteration,n.width||"undefined"==typeof window||(n.width=window.innerWidth),n.height||"undefined"==typeof window||(n.height=window.innerHeight),p=r.length,n.linkDistance=(0,c.proccessToFunc)(n.linkDistance),n.edgeStrength=(0,c.proccessToFunc)(n.edgeStrength),m=(0,c.buildTextureDataWithTwoEdgeAttr)(r,i,n.linkDistance,n.edgeStrength),g=m.maxEdgePerVetex,v=m.array,n.degrees=(0,h.getDegree)(r.length,n.nodeIdxMap,i).map((function(t){return t.all})),y=[],b=[],x=[],w=[],_=[],S=[],E=[],n.getMass||(n.getMass=function(t){return n.degrees[n.nodeIdxMap[t.id]]||1}),A=n.gravity,M=n.center,r.forEach((function(t,e){y.push(n.getMass(t)),b.push(n.nodeStrength(t)),n.degrees[e]||(n.degrees[e]=0);var r=[M[0],M[1],A];if(n.getCenter){var i=n.getCenter(t,n.degrees[e]);i&&(0,u.isNumber)(i[0])&&(0,u.isNumber)(i[1])&&(0,u.isNumber)(i[2])&&(r=i)}x.push(r[0]),w.push(r[1]),_.push(r[2]),(0,u.isNumber)(t.fx)&&(0,u.isNumber)(t.fy)?(S.push(t.fx||.001),E.push(t.fy||.001)):(S.push(0),E.push(0))})),C=(0,c.arrayToTextureData)([y,n.degrees,b,S]),T=(0,c.arrayToTextureData)([x,w,_,E]),k=n.workerEnabled,I=k?l.World.create({canvas:t,engineOptions:{supportCompute:!0}}):l.World.create({engineOptions:{supportCompute:!0}}),N=n.onLayoutEnd,P=[],v.forEach((function(t){P.push(t)})),O=0;O<4;O++)P.push(0);return L=I.createKernel(d.gForceBundle).setDispatch([p,1,1]).setBinding({u_Data:v,u_damping:n.damping,u_maxSpeed:n.maxSpeed,u_minMovement:n.minMovement,u_coulombDisScale:n.coulombDisScale,u_factor:n.factor,u_NodeAttributeArray1:C,u_NodeAttributeArray2:T,MAX_EDGE_PER_VERTEX:g,VERTEX_COUNT:p,u_AveMovement:P,u_interval:n.interval}),R=I.createKernel(d.aveMovementBundle).setDispatch([1,1,1]).setBinding({u_Data:v,VERTEX_COUNT:p,u_AveMovement:[0,0,0,0]}),D=function(){return o(z,void 0,void 0,(function(){var i,o,u;return a(this,(function(a){switch(a.label){case 0:i=0,a.label=1;case 1:return i<s?[4,L.execute()]:[3,5];case 2:return a.sent(),R.setBinding({u_Data:L}),[4,R.execute()];case 3:a.sent(),o=Math.max(.02,n.interval-.002*i),L.setBinding({u_interval:o,u_AveMovement:R}),a.label=4;case 4:return i++,[3,1];case 5:return[4,L.getOutput()];case 6:return u=a.sent(),t?e.postMessage({type:f.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:u}):r.forEach((function(t,e){var n=u[4*e],r=u[4*e+1];t.x=n,t.y=r})),N&&N(),[2]}}))}))},[4,D()];case 1:return F.sent(),[2]}}))}))},e.prototype.getType=function(){return"gForce-gpu"},e}(s.Base);e.GForceGPULayout=p},12564:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.aveMovementBundle=e.aveMovementCode=e.gForceBundle=e.gForceCode=void 0,e.gForceCode="\nimport { globalInvocationID } from 'g-webgpu';\n\nconst MAX_EDGE_PER_VERTEX;\nconst VERTEX_COUNT;\nconst SHIFT_20 = 1048576;\n\n@numthreads(1, 1, 1)\nclass GGForce {\n  @in @out\n  u_Data: vec4[];\n\n  @in\n  u_damping: float;\n  \n  @in\n  u_maxSpeed: float;\n\n  @in\n  u_minMovement: float;\n\n  @in\n  u_AveMovement: vec4[];\n\n  @in\n  u_coulombDisScale: float;\n\n  @in\n  u_factor: float;\n\n  @in\n  u_NodeAttributeArray1: vec4[];\n\n  @in\n  u_NodeAttributeArray2: vec4[];\n\n  @in\n  u_interval: float;\n\n  unpack_float(packedValue: float): ivec2 {\n    const packedIntValue = int(packedValue);\n    const v0 = packedIntValue / SHIFT_20;\n    return [v0, packedIntValue - v0 * SHIFT_20];\n  }\n\n  calcRepulsive(i: int, currentNode: vec4): vec2 {\n    let ax = 0, ay = 0;\n    for (let j: int = 0; j < VERTEX_COUNT; j++) {\n      if (i != j) {\n        const nextNode = this.u_Data[j];\n        const vx = currentNode[0] - nextNode[0];\n        const vy = currentNode[1] - nextNode[1];\n        const dist = sqrt(vx * vx + vy * vy) + 0.01;\n        const n_dist = (dist + 0.1) * this.u_coulombDisScale;\n        const direx = vx / dist;\n        const direy = vy / dist;\n        const attributesi = this.u_NodeAttributeArray1[i];\n        const attributesj = this.u_NodeAttributeArray1[j];\n        const massi = attributesi[0];\n        const nodeStrengthi = attributesi[2];\n        const nodeStrengthj = attributesj[2];\n        const nodeStrength = (nodeStrengthi + nodeStrengthj) / 2;\n        // const param = nodeStrength * this.u_factor / (n_dist * n_dist * massi);\n        const param = nodeStrength * this.u_factor / (n_dist * n_dist);\n        ax += direx * param;\n        ay += direy * param;\n      }\n    }\n    return [ax, ay];\n  }\n\n  calcGravity(i: int, currentNode: vec4, attributes2: vec4): vec2 {\n    // note: attributes2 = [centerX, centerY, gravity, 0]\n\n    const vx = currentNode[0] - attributes2[0];\n    const vy = currentNode[1] - attributes2[1];\n    \n    const ax = vx * attributes2[2];\n    const ay = vy * attributes2[2];\n    \n    return [ax, ay];\n  }\n\n  calcAttractive(i: int, currentNode: vec4, attributes1: vec4): vec2 {\n    // note: attributes1 = [mass, degree, nodeSterngth, 0]\n\n    const mass = attributes1[0];\n    let ax = 0, ay = 0;\n    // const arr_offset = int(floor(currentNode[2] + 0.5));\n    // const length = int(floor(currentNode[3] + 0.5));\n\n    const compressed = this.unpack_float(currentNode[2]);\n    const length = compressed[0];\n    const arr_offset = compressed[1];\n\n    const node_buffer: vec4;\n    for (let p: int = 0; p < MAX_EDGE_PER_VERTEX; p++) {\n      if (p >= length) break;\n      const arr_idx = arr_offset + 4 * p; // i  p \n      const buf_offset = arr_idx - arr_idx / 4 * 4;\n      if (p == 0 || buf_offset == 0) {\n        node_buffer = this.u_Data[int(arr_idx / 4)]; // = / 4\n      }\n\n      let float_j: float = node_buffer[0];\n\n      const nextNode = this.u_Data[int(float_j)];\n      const vx = nextNode[0] - currentNode[0];\n      const vy = nextNode[1] - currentNode[1];\n      const dist = sqrt(vx * vx + vy * vy) + 0.01;\n      const direx = vx / dist;\n      const direy = vy / dist;\n      const edgeLength = node_buffer[1];\n      const edgeStrength = node_buffer[2];\n      const diff: float = edgeLength - dist;//edgeLength\n      // const param = diff * this.u_stiffness / mass; //\n      const param = diff * edgeStrength / mass; // \n      ax -= direx * param;\n      ay -= direy * param;\n    }\n    return [ax, ay];\n  }\n\n  @main\n  compute() {\n    const i = globalInvocationID.x;\n    const currentNode = this.u_Data[i];\n    const movement = u_AveMovement[0];\n    let ax = 0, ay = 0;\n\n    if (i >= VERTEX_COUNT || movement.x < u_minMovement) {\n      this.u_Data[i] = currentNode;\n      return;\n    }\n\n    // \n    // [mass, degree, nodeStrength, fx]\n    const nodeAttributes1 = this.u_NodeAttributeArray1[i];\n    // [centerX, centerY, centerGravity, fy]\n    const nodeAttributes2 = this.u_NodeAttributeArray2[i];\n\n    // repulsive\n    const repulsive = this.calcRepulsive(i, currentNode);\n    ax += repulsive[0];\n    ay += repulsive[1];\n\n    // attractive\n    const attractive = this.calcAttractive(i, currentNode, nodeAttributes1);\n    ax += attractive[0];\n    ay += attractive[1];\n\n    // gravity\n    const gravity = this.calcGravity(i, currentNode, nodeAttributes2);\n    ax -= gravity[0];\n    ay -= gravity[1];\n\n    // speed\n    const param = this.u_interval * this.u_damping;\n    let vx = ax * param;\n    let vy = ay * param;\n    const vlength = sqrt(vx * vx + vy * vy) + 0.0001;\n    if (vlength > this.u_maxSpeed) {\n      const param2 = this.u_maxSpeed / vlength;\n      vx = param2 * vx;\n      vy = param2 * vy;\n    }\n\n    // move\n    if (nodeAttributes1[3] != 0 && nodeAttributes2[3] != 0) {\n      this.u_Data[i] = [\n        nodeAttributes1[3],\n        nodeAttributes2[3],\n        currentNode[2],\n        0\n      ];\n    } else {\n      const distx = vx * this.u_interval;\n      const disty = vy * this.u_interval;\n      const distLength = sqrt(distx * distx + disty * disty);\n      this.u_Data[i] = [\n        currentNode[0] + distx,\n        currentNode[1] + disty,\n        currentNode[2],\n        distLength\n      ];\n    }\n    \n    // the avarage move distance\n    // need to share memory\n    \n  }\n}\n",e.gForceBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {float distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',e.aveMovementCode="\nconst VERTEX_COUNT;\n@numthreads(1, 1, 1)\nclass CalcAveMovement {\n  @in\n  u_Data: vec4[];\n  @in\n  u_iter: float;\n  @in @out\n  u_AveMovement: vec4[];\n  @main\n  compute() {\n    let movement = 0;\n    for (let j: int = 0; j < VERTEX_COUNT; j++) {\n      const vertex = this.u_Data[j];\n      movement += vertex[3];\n    }\n    movement = movement / float(VERTEX_COUNT);\n    this.u_AveMovement[0] = [movement, 0, 0, 0];\n  }\n}\n",e.aveMovementBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}'},36010:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.GridLayout=void 0;var o=n(81422),a=function(t){function e(e){var n=t.call(this)||this;return n.begin=[0,0],n.preventOverlap=!0,n.preventOverlapPadding=10,n.condense=!1,n.sortBy="degree",n.nodes=[],n.edges=[],n.width=300,n.height=300,n.row=0,n.col=0,n.cellWidth=0,n.cellHeight=0,n.cellUsed={},n.id2manPos={},n.onLayoutEnd=function(){},n.updateCfg(e),n}return i(e,t),e.prototype.getDefaultCfg=function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}},e.prototype.execute=function(){var t=this,e=t.nodes,n=t.edges,r=t.begin,i=e.length;if(0===i)return t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n};if(1===i)return e[0].x=r[0],e[0].y=r[1],t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n};var a=t.sortBy,s=t.width,u=t.height,l=t.condense,c=t.preventOverlapPadding,h=t.preventOverlap,d=t.nodeSpacing,f=t.nodeSize,p=[];e.forEach((function(t){p.push(t)}));var m={};if(p.forEach((function(t,e){m[t.id]=e})),("degree"===a||!(0,o.isString)(a)||void 0===p[0][a])&&(a="degree",(0,o.isNaN)(e[0].degree))){var g=(0,o.getDegree)(p.length,m,n);p.forEach((function(t,e){t.degree=g[e].all}))}p.sort((function(t,e){return e[a]-t[a]})),s||"undefined"==typeof window||(s=window.innerWidth),u||"undefined"==typeof window||(u=window.innerHeight);var v=t.rows,y=null!=t.cols?t.cols:t.columns;if(t.cells=i,null!=v&&null!=y?(t.rows=v,t.cols=y):null!=v&&null==y?(t.rows=v,t.cols=Math.ceil(t.cells/t.rows)):null==v&&null!=y?(t.cols=y,t.rows=Math.ceil(t.cells/t.cols)):(t.splits=Math.sqrt(t.cells*t.height/t.width),t.rows=Math.round(t.splits),t.cols=Math.round(t.width/t.height*t.splits)),t.rows=Math.max(t.rows,1),t.cols=Math.max(t.cols,1),t.cols*t.rows>t.cells)((x=t.small())-1)*(b=t.large())>=t.cells?t.small(x-1):(b-1)*x>=t.cells&&t.large(b-1);else for(;t.cols*t.rows<t.cells;){var b,x=t.small();((b=t.large())+1)*x>=t.cells?t.large(b+1):t.small(x+1)}if(t.cellWidth=s/t.cols,t.cellHeight=u/t.rows,l&&(t.cellWidth=0,t.cellHeight=0),h||d){var w=(0,o.getFuncByUnknownType)(10,d),_=(0,o.getFuncByUnknownType)(30,f,!1);p.forEach((function(e){e.x&&e.y||(e.x=0,e.y=0);var n,r,i=_(e)||30;(0,o.isArray)(i)?(n=i[0],r=i[1]):(n=i,r=i);var a=void 0!==w?w(e):c,s=n+a,u=r+a;t.cellWidth=Math.max(t.cellWidth,s),t.cellHeight=Math.max(t.cellHeight,u)}))}t.cellUsed={},t.row=0,t.col=0,t.id2manPos={};for(var S=0;S<p.length;S++){var E=p[S],A=void 0;if(t.position&&(A=t.position(E)),A&&(void 0!==A.row||void 0!==A.col)){var M={row:A.row,col:A.col};if(void 0===M.col)for(M.col=0;t.used(M.row,M.col);)M.col++;else if(void 0===M.row)for(M.row=0;t.used(M.row,M.col);)M.row++;t.id2manPos[E.id]=M,t.use(M.row,M.col)}t.getPos(E)}return t.onLayoutEnd&&t.onLayoutEnd(),{edges:n,nodes:p}},e.prototype.small=function(t){var e,n=this,r=n.rows||5,i=n.cols||5;null==t?e=Math.min(r,i):Math.min(r,i)===n.rows?n.rows=t:n.cols=t;return e},e.prototype.large=function(t){var e,n=this,r=n.rows||5,i=n.cols||5;null==t?e=Math.max(r,i):Math.max(r,i)===n.rows?n.rows=t:n.cols=t;return e},e.prototype.used=function(t,e){return this.cellUsed["c-".concat(t,"-").concat(e)]||!1},e.prototype.use=function(t,e){this.cellUsed["c-".concat(t,"-").concat(e)]=!0},e.prototype.moveToNextCell=function(){var t=this,e=t.cols||5;t.col++,t.col>=e&&(t.col=0,t.row++)},e.prototype.getPos=function(t){var e,n,r=this,i=r.begin,o=r.cellWidth,a=r.cellHeight,s=r.id2manPos[t.id];if(s)e=s.col*o+o/2+i[0],n=s.row*a+a/2+i[1];else{for(;r.used(r.row,r.col);)r.moveToNextCell();e=r.col*o+o/2+i[0],n=r.row*a+a/2+i[1],r.use(r.row,r.col),r.moveToNextCell()}t.x=e,t.y=n},e.prototype.getType=function(){return"grid"},e}(n(46271).Base);e.GridLayout=a},28352:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.ERLayout=e.ForceAtlas2Layout=e.ComboCombinedLayout=e.ComboForceLayout=e.GForceGPULayout=e.FruchtermanGPULayout=e.FruchtermanLayout=e.MDSLayout=e.ConcentricLayout=e.RadialLayout=e.DagreCompoundLayout=e.DagreLayout=e.CircularLayout=e.ForceLayout=e.Force2Layout=e.GForceLayout=e.RandomLayout=e.GridLayout=e.Layouts=e.Layout=void 0;var o=n(36010);Object.defineProperty(e,"GridLayout",{enumerable:!0,get:function(){return o.GridLayout}});var a=n(68501);Object.defineProperty(e,"RandomLayout",{enumerable:!0,get:function(){return a.RandomLayout}});var s=n(70238);Object.defineProperty(e,"GForceLayout",{enumerable:!0,get:function(){return s.GForceLayout}});var u=n(1782);Object.defineProperty(e,"Force2Layout",{enumerable:!0,get:function(){return u.Force2Layout}});var l=n(24964);Object.defineProperty(e,"ForceLayout",{enumerable:!0,get:function(){return l.ForceLayout}});var c=n(33455);Object.defineProperty(e,"CircularLayout",{enumerable:!0,get:function(){return c.CircularLayout}});var h=n(79829);Object.defineProperty(e,"DagreLayout",{enumerable:!0,get:function(){return h.DagreLayout}});var d=n(69524);Object.defineProperty(e,"DagreCompoundLayout",{enumerable:!0,get:function(){return d.DagreCompoundLayout}});var f=n(13570);Object.defineProperty(e,"RadialLayout",{enumerable:!0,get:function(){return f.RadialLayout}});var p=n(58006);Object.defineProperty(e,"ConcentricLayout",{enumerable:!0,get:function(){return p.ConcentricLayout}});var m=n(7982);Object.defineProperty(e,"MDSLayout",{enumerable:!0,get:function(){return m.MDSLayout}});var g=n(361);Object.defineProperty(e,"FruchtermanLayout",{enumerable:!0,get:function(){return g.FruchtermanLayout}});var v=n(25444);Object.defineProperty(e,"FruchtermanGPULayout",{enumerable:!0,get:function(){return v.FruchtermanGPULayout}});var y=n(62121);Object.defineProperty(e,"GForceGPULayout",{enumerable:!0,get:function(){return y.GForceGPULayout}});var b=n(42335);Object.defineProperty(e,"ComboForceLayout",{enumerable:!0,get:function(){return b.ComboForceLayout}});var x=n(4193);Object.defineProperty(e,"ComboCombinedLayout",{enumerable:!0,get:function(){return x.ComboCombinedLayout}});var w=n(48991);Object.defineProperty(e,"ForceAtlas2Layout",{enumerable:!0,get:function(){return w.ForceAtlas2Layout}});var _=n(69474);Object.defineProperty(e,"ERLayout",{enumerable:!0,get:function(){return _.ERLayout}});var S=n(52316);Object.defineProperty(e,"Layout",{enumerable:!0,get:function(){return S.Layout}}),Object.defineProperty(e,"Layouts",{enumerable:!0,get:function(){return S.Layouts}}),i(n(82149),e)},52316:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Layouts=e.Layout=void 0;var r=n(38119),i=n(36010),o=n(68501),a=n(1782),s=n(70238),u=n(24964),l=n(33455),c=n(79829),h=n(13570),d=n(58006),f=n(7982),p=n(361),m=n(25444),g=n(62121),v=n(42335),y=n(4193),b=n(48991),x=n(69474),w=n(69524),_=n(81422),S=function(){function t(t){var e=(0,r.getLayoutByName)(t.type);this.layoutInstance=new e(t)}return t.prototype.layout=function(t){return this.layoutInstance.layout(t)},t.prototype.updateCfg=function(t){this.layoutInstance.updateCfg(t)},t.prototype.init=function(t){this.correctLayers(t.nodes),this.layoutInstance.init(t)},t.prototype.correctLayers=function(t){if(null==t?void 0:t.length){var e=1/0,n=[];if(t.forEach((function(t){(0,_.isString)(t.layer)&&(t.layer=parseInt(t.layer,10)),void 0===t.layer||isNaN(t.layer)||(n.push(t),t.layer<e&&(e=t.layer))})),e<=0){var r=Math.abs(e)+1;n.forEach((function(t){return t.layer+=r}))}}},t.prototype.execute=function(){this.layoutInstance.execute()},t.prototype.getDefaultCfg=function(){return this.layoutInstance.getDefaultCfg()},t.prototype.destroy=function(){return this.layoutInstance.destroy()},t}();e.Layout=S,e.Layouts={force:u.ForceLayout,fruchterman:p.FruchtermanLayout,forceAtlas2:b.ForceAtlas2Layout,gForce:s.GForceLayout,force2:a.Force2Layout,dagre:c.DagreLayout,dagreCompound:w.DagreCompoundLayout,circular:l.CircularLayout,radial:h.RadialLayout,concentric:d.ConcentricLayout,grid:i.GridLayout,mds:f.MDSLayout,comboForce:v.ComboForceLayout,comboCombined:y.ComboCombinedLayout,random:o.RandomLayout,"gForce-gpu":g.GForceGPULayout,"fruchterman-gpu":m.FruchtermanGPULayout,er:x.ERLayout}},7982:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.MDSLayout=void 0;var o=n(7856),a=n(81422),s=function(t){function e(e){var n=t.call(this)||this;return n.center=[0,0],n.linkDistance=50,n.nodes=[],n.edges=[],n.onLayoutEnd=function(){},n.updateCfg(e),n}return i(e,t),e.prototype.getDefaultCfg=function(){return{center:[0,0],linkDistance:50}},e.prototype.execute=function(){var t=this,e=t.nodes,n=t.edges,r=void 0===n?[]:n,i=t.center;if(e&&0!==e.length){if(1===e.length)return e[0].x=i[0],e[0].y=i[1],void(t.onLayoutEnd&&t.onLayoutEnd());var o=t.linkDistance,s=(0,a.getAdjMatrix)({nodes:e,edges:r},!1),u=(0,a.floydWarshall)(s);t.handleInfinity(u);var l=(0,a.scaleMatrix)(u,o);t.scaledDistances=l;var c=t.runMDS();return t.positions=c,c.forEach((function(t,n){e[n].x=t[0]+i[0],e[n].y=t[1]+i[1]})),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:r}}t.onLayoutEnd&&t.onLayoutEnd()},e.prototype.runMDS=function(){var t=this.scaledDistances,e=o.Matrix.mul(o.Matrix.pow(t,2),-.5),n=e.mean("row"),r=e.mean("column"),i=e.mean();e.add(i).subRowVector(n).subColumnVector(r);var a=new o.SingularValueDecomposition(e),s=o.Matrix.sqrt(a.diagonalMatrix).diagonal();return a.leftSingularVectors.toJSON().map((function(t){return o.Matrix.mul([t],[s]).toJSON()[0].splice(0,2)}))},e.prototype.handleInfinity=function(t){var e=-999999;t.forEach((function(t){t.forEach((function(t){t!==1/0&&e<t&&(e=t)}))})),t.forEach((function(n,r){n.forEach((function(n,i){n===1/0&&(t[r][i]=e)}))}))},e.prototype.getType=function(){return"mds"},e}(n(46271).Base);e.MDSLayout=s},13570:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(83303),e)},78936:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(7856),i=function(){function t(t){this.distances=t.distances,this.dimension=t.dimension||2,this.linkDistance=t.linkDistance}return t.prototype.layout=function(){var t=this,e=t.dimension,n=t.distances,i=t.linkDistance;try{var o=r.Matrix.mul(r.Matrix.pow(n,2),-.5),a=o.mean("row"),s=o.mean("column"),u=o.mean();o.add(u).subRowVector(a).subColumnVector(s);var l=new r.SingularValueDecomposition(o),c=r.Matrix.sqrt(l.diagonalMatrix).diagonal();return l.leftSingularVectors.toJSON().map((function(t){return r.Matrix.mul([t],[c]).toJSON()[0].splice(0,e)}))}catch(t){for(var h=[],d=0;d<n.length;d++){var f=Math.random()*i,p=Math.random()*i;h.push([f,p])}return h}},t}();e.default=i},83303:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.RadialLayout=void 0;var a=n(81422),s=n(46271),u=o(n(78936)),l=o(n(15470));function c(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var h=function(t){function e(e){var n=t.call(this)||this;return n.maxIteration=1e3,n.focusNode=null,n.unitRadius=null,n.linkDistance=50,n.preventOverlap=!1,n.strictRadial=!0,n.maxPreventOverlapIteration=200,n.sortStrength=10,n.nodes=[],n.edges=[],n.updateCfg(e),n}return i(e,t),e.prototype.getDefaultCfg=function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}},e.prototype.execute=function(){var t=this,e=t.nodes,n=t.edges||[];if(e&&0!==e.length){t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);var r=t.center;if(1===e.length)return e[0].x=r[0],e[0].y=r[1],void(t.onLayoutEnd&&t.onLayoutEnd());var i=t.linkDistance,o=null;if((0,a.isString)(t.focusNode)){for(var s=!1,c=0;c<e.length;c++)e[c].id===t.focusNode&&(o=e[c],t.focusNode=o,s=!0,c=e.length);s||(o=null)}else o=t.focusNode;o||(o=e[0],t.focusNode=o);var h,d,f,p=(h=e,d=o.id,f=-1,h.forEach((function(t,e){t.id===d&&(f=e)})),f);p<0&&(p=0),t.focusIndex=p;var m=(0,a.getAdjMatrix)({nodes:e,edges:n},!1),g=(0,a.floydWarshall)(m),v=t.maxToFocus(g,p);t.handleInfinity(g,p,v+1),t.distances=g;var y=g[p],b=t.width||500,x=t.height||500,w=b-r[0]>r[0]?r[0]:b-r[0],_=x-r[1]>r[1]?r[1]:x-r[1];0===w&&(w=b/2),0===_&&(_=x/2);var S=_>w?w:_,E=Math.max.apply(Math,y),A=[];y.forEach((function(e,n){t.unitRadius||(t.unitRadius=S/E),A[n]=e*t.unitRadius})),t.radii=A;var M=t.eIdealDisMatrix();t.eIdealDistances=M;var C=function(t){for(var e=t.length,n=t[0].length,r=[],i=0;i<e;i++){for(var o=[],a=0;a<n;a++)0!==t[i][a]?o.push(1/(t[i][a]*t[i][a])):o.push(0);r.push(o)}return r}(M);t.weights=C;var T=new u.default({linkDistance:i,distances:M}).layout();T.forEach((function(t){(0,a.isNaN)(t[0])&&(t[0]=Math.random()*i),(0,a.isNaN)(t[1])&&(t[1]=Math.random()*i)})),t.positions=T,T.forEach((function(t,n){e[n].x=t[0]+r[0],e[n].y=t[1]+r[1]})),T.forEach((function(t){t[0]-=T[p][0],t[1]-=T[p][1]})),t.run();var k,I=t.preventOverlap,N=t.nodeSize,P=t.strictRadial;if(I){var O,L=t.nodeSpacing;O=(0,a.isNumber)(L)?function(){return L}:(0,a.isFunction)(L)?L:function(){return 0},k=N?(0,a.isArray)(N)?function(t){return(N[0]>N[1]?N[0]:N[1])+O(t)}:function(t){return N+O(t)}:function(t){return t.size?(0,a.isArray)(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])+O(t):(0,a.isObject)(t.size)?(t.size.width>t.size.height?t.size.width:t.size.height)+O(t):t.size+O(t):10+O(t)};var R={nodes:e,nodeSizeFunc:k,adjMatrix:m,positions:T,radii:A,height:x,width:b,strictRadial:P,focusID:p,iterations:t.maxPreventOverlapIteration||200,k:T.length/4.5},D=new l.default(R);T=D.layout()}return T.forEach((function(t,n){e[n].x=t[0]+r[0],e[n].y=t[1]+r[1]})),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n}}t.onLayoutEnd&&t.onLayoutEnd()},e.prototype.run=function(){for(var t=this,e=t.maxIteration,n=t.positions||[],r=t.weights||[],i=t.eIdealDistances||[],o=t.radii||[],a=0;a<=e;a++){var s=a/e;t.oneIteration(s,n,o,i,r)}},e.prototype.oneIteration=function(t,e,n,r,i){var o=1-t,a=this.focusIndex;e.forEach((function(s,u){var l=c(s,[0,0]),h=0===l?0:1/l;if(u!==a){var d=0,f=0,p=0;e.forEach((function(t,e){if(u!==e){var n=c(s,t),o=0===n?0:1/n,a=r[e][u];p+=i[u][e],d+=i[u][e]*(t[0]+a*(s[0]-t[0])*o),f+=i[u][e]*(t[1]+a*(s[1]-t[1])*o)}}));var m=0===n[u]?0:1/n[u];p*=o,p+=t*m*m,d*=o,d+=t*m*s[0]*h,s[0]=d/p,f*=o,f+=t*m*s[1]*h,s[1]=f/p}}))},e.prototype.eIdealDisMatrix=function(){var t=this,e=t.nodes;if(!e)return[];var n=t.distances,r=t.linkDistance,i=t.radii||[],o=t.unitRadius||50,s=[];return n&&n.forEach((function(n,u){var l=[];n.forEach((function(n,s){if(u===s)l.push(0);else if(i[u]===i[s])if("data"===t.sortBy)l.push(n*(Math.abs(u-s)*t.sortStrength)/(i[u]/o));else if(t.sortBy){var c=e[u][t.sortBy]||0,h=e[s][t.sortBy]||0;(0,a.isString)(c)&&(c=c.charCodeAt(0)),(0,a.isString)(h)&&(h=h.charCodeAt(0)),l.push(n*(Math.abs(c-h)*t.sortStrength)/(i[u]/o))}else l.push(n*r/(i[u]/o));else{var d=(r+o)/2;l.push(n*d)}})),s.push(l)})),s},e.prototype.handleInfinity=function(t,e,n){for(var r=t.length,i=0;i<r;i++)if(t[e][i]===1/0){t[e][i]=n,t[i][e]=n;for(var o=0;o<r;o++)t[i][o]!==1/0&&t[e][o]===1/0&&(t[e][o]=n+t[i][o],t[o][e]=n+t[i][o])}for(i=0;i<r;i++)if(i!==e)for(o=0;o<r;o++)if(t[i][o]===1/0){var a=Math.abs(t[e][i]-t[e][o]);a=0===a?1:a,t[i][o]=a}},e.prototype.maxToFocus=function(t,e){for(var n=0,r=0;r<t[e].length;r++)t[e][r]!==1/0&&(n=t[e][r]>n?t[e][r]:n);return n},e.prototype.getType=function(){return"radial"},e}(s.Base);e.RadialLayout=h},15470:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.disp=[],this.positions=t.positions,this.adjMatrix=t.adjMatrix,this.focusID=t.focusID,this.radii=t.radii,this.iterations=t.iterations||10,this.height=t.height||10,this.width=t.width||10,this.speed=t.speed||100,this.gravity=t.gravity||10,this.nodeSizeFunc=t.nodeSizeFunc,this.k=t.k||5,this.strictRadial=t.strictRadial,this.nodes=t.nodes}return t.prototype.layout=function(){var t=this,e=t.positions,n=[],r=t.iterations,i=t.width/10;t.maxDisplace=i,t.disp=n;for(var o=0;o<r;o++)e.forEach((function(t,e){n[e]={x:0,y:0}})),t.getRepulsion(),t.updatePositions();return e},t.prototype.getRepulsion=function(){var t=this,e=t.positions,n=t.nodes,r=t.disp,i=t.k,o=t.radii||[];e.forEach((function(a,s){r[s]={x:0,y:0},e.forEach((function(e,u){if(s!==u&&o[s]===o[u]){var l=a[0]-e[0],c=a[1]-e[1],h=Math.sqrt(l*l+c*c);if(0===h){h=1;var d=s>u?1:-1;l=.01*d,c=.01*d}if(h<t.nodeSizeFunc(n[s])/2+t.nodeSizeFunc(n[u])/2){var f=i*i/h;r[s].x+=l/h*f,r[s].y+=c/h*f}}}))}))},t.prototype.updatePositions=function(){var t=this,e=t.positions,n=t.disp,r=t.speed,i=t.strictRadial,o=t.focusID,a=t.maxDisplace||t.width/10;i&&n.forEach((function(t,n){var r=e[n][0]-e[o][0],i=e[n][1]-e[o][1],a=Math.sqrt(r*r+i*i),s=i/a,u=-r/a,l=Math.sqrt(t.x*t.x+t.y*t.y),c=Math.acos((s*t.x+u*t.y)/l);c>Math.PI/2&&(c-=Math.PI/2,s*=-1,u*=-1);var h=Math.cos(c)*l;t.x=s*h,t.y=u*h}));var s=t.radii;e.forEach((function(t,u){if(u!==o){var l=Math.sqrt(n[u].x*n[u].x+n[u].y*n[u].y);if(l>0&&u!==o){var c=Math.min(a*(r/800),l);if(t[0]+=n[u].x/l*c,t[1]+=n[u].y/l*c,i){var h=t[0]-e[o][0],d=t[1]-e[o][1],f=Math.sqrt(h*h+d*d);h=h/f*s[u],d=d/f*s[u],t[0]=e[o][0]+h,t[1]=e[o][1]+d}}}}))},t}();e.default=n},68501:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.RandomLayout=void 0;var o=function(t){function e(e){var n=t.call(this)||this;return n.center=[0,0],n.width=300,n.height=300,n.nodes=[],n.edges=[],n.onLayoutEnd=function(){},n.updateCfg(e),n}return i(e,t),e.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},e.prototype.execute=function(){var t=this,e=t.nodes,n=t.center;return t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),e&&e.forEach((function(e){e.x=.9*(Math.random()-.5)*t.width+n[0],e.y=.9*(Math.random()-.5)*t.height+n[1]})),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:this.edges}},e.prototype.getType=function(){return"random"},e}(n(46271).Base);e.RandomLayout=o},82149:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},38119:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.getLayoutByName=e.unRegisterLayout=e.registerLayout=void 0;var o=n(46271),a=n(81422),s=new Map;e.registerLayout=function(t,e){if(s.get(t)&&console.warn("The layout with the name ".concat(t," exists already, it will be overridden")),(0,a.isObject)(e)){var n=function(t){function n(n){var r,i,o=r=t.call(this)||this,a={},s=Object.assign({},o.getDefaultCfg(),(null===(i=e.getDefaultCfg)||void 0===i?void 0:i.call(e))||{});return Object.assign(a,s,e,n),Object.keys(a).forEach((function(t){var e=a[t];o[t]=e})),r}return i(n,t),n}(o.Base);s.set(t,n)}else s.set(t,e);return s.get(t)};e.unRegisterLayout=function(t){s.has(t)&&s.delete(t)};e.getLayoutByName=function(t){return s.has(t)?s.get(t):null}},86755:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isArray=void 0,e.isArray=Array.isArray},43380:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getFuncByUnknownType=e.getFunc=e.isFunction=void 0;var r=n(81422),i=n(19937);e.isFunction=function(t){return"function"==typeof t};e.getFunc=function(t,e,n){return n||((0,i.isNumber)(t)?function(){return t}:function(){return e})};e.getFuncByUnknownType=function(t,n,o){return void 0===o&&(o=!0),n||0===n?(0,e.isFunction)(n)?n:(0,i.isNumber)(n)?function(){return n}:(0,r.isArray)(n)?function(){if(o){var e=Math.max.apply(Math,n);return isNaN(e)?t:e}return n}:(0,r.isObject)(n)?function(){if(o){var e=Math.max(n.width,n.height);return isNaN(e)?t:e}return[n.width,n.height]}:function(){return t}:function(e){return e.size?(0,r.isArray)(e.size)?e.size[0]>e.size[1]?e.size[0]:e.size[1]:(0,r.isObject)(e.size)?e.size.width>e.size.height?e.size.width:e.size.height:e.size:t}}},48196:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.arrayToTextureData=e.attributesToTextureData=e.buildTextureDataWithTwoEdgeAttr=e.buildTextureData=e.proccessToFunc=void 0;var r=n(81422),i=n(91922);e.proccessToFunc=function(t,e){return t?(0,r.isNumber)(t)?function(){return t}:t:function(){return e||1}};e.buildTextureData=function(t,e){var n=[],r=[],o={},a=0;for(a=0;a<t.length;a++){var s=t[a];o[s.id]=a,n.push(s.x),n.push(s.y),n.push(0),n.push(0),r.push([])}for(a=0;a<e.length;a++){var u=e[a],l=(0,i.getEdgeTerminal)(u,"source"),c=(0,i.getEdgeTerminal)(u,"target");isNaN(o[l])||isNaN(o[c])||(r[o[l]].push(o[c]),r[o[c]].push(o[l]))}var h=0;for(a=0;a<t.length;a++){var d=n.length,f=r[a],p=f.length;n[4*a+2]=d,n[4*a+3]=p,h=Math.max(h,p);for(var m=0;m<p;++m){var g=f[m];n.push(+g)}}for(;n.length%4!=0;)n.push(0);return{maxEdgePerVetex:h,array:new Float32Array(n)}};e.buildTextureDataWithTwoEdgeAttr=function(t,e,n,r){var o=[],a=[],s={},u=0;for(u=0;u<t.length;u++){var l=t[u];s[l.id]=u,o.push(l.x),o.push(l.y),o.push(0),o.push(0),a.push([])}for(u=0;u<e.length;u++){var c=e[u],h=(0,i.getEdgeTerminal)(c,"source"),d=(0,i.getEdgeTerminal)(c,"target");a[s[h]].push(s[d]),a[s[h]].push(n(c)),a[s[h]].push(r(c)),a[s[h]].push(0),a[s[d]].push(s[h]),a[s[d]].push(n(c)),a[s[d]].push(r(c)),a[s[d]].push(0)}var f=0;for(u=0;u<t.length;u++){var p=o.length,m=a[u],g=m.length;o[4*u+2]=p+1048576*g/4,o[4*u+3]=0,f=Math.max(f,g/4);for(var v=0;v<g;++v){var y=m[v];o.push(+y)}}for(;o.length%4!=0;)o.push(0);return{maxEdgePerVetex:f,array:new Float32Array(o)}};e.attributesToTextureData=function(t,e){var n=[],r=t.length,i={};return e.forEach((function(e){t.forEach((function(t,o){if(void 0===i[e[t]]&&(i[e[t]]=Object.keys(i).length),n.push(i[e[t]]),o===r-1)for(;n.length%4!=0;)n.push(0)}))})),{array:new Float32Array(n),count:Object.keys(i).length}};e.arrayToTextureData=function(t){for(var e=[],n=t.length,r=t[0].length,i=function(r){t.forEach((function(t,i){if(e.push(t[r]),i===n-1)for(;e.length%4!=0;)e.push(0)}))},o=0;o<r;o++)i(o);return new Float32Array(e)}},81422:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(95757),e),i(n(86755),e),i(n(19937),e),i(n(91922),e),i(n(15747),e),i(n(43380),e)},91922:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCoreNodeAndRelativeLeafNodes=e.getAvgNodePosition=e.getLayoutBBox=e.traverseTreeUp=e.scaleMatrix=e.getAdjMatrix=e.floydWarshall=e.getDegreeMap=e.getDegree=e.getEdgeTerminal=void 0;var r=n(86755),i=n(19937),o=n(15747);e.getEdgeTerminal=function(t,e){var n=t[e];return(0,o.isObject)(n)?n.cell:n};e.getDegree=function(t,n,r){for(var i=[],o=0;o<t;o++)i[o]={in:0,out:0,all:0};return r?(r.forEach((function(t){var r=(0,e.getEdgeTerminal)(t,"source"),o=(0,e.getEdgeTerminal)(t,"target");r&&i[n[r]]&&(i[n[r]].out+=1,i[n[r]].all+=1),o&&i[n[o]]&&(i[n[o]].in+=1,i[n[o]].all+=1)})),i):i};e.getDegreeMap=function(t,n){var r={};return t.forEach((function(t){r[t.id]={in:0,out:0,all:0}})),n?(n.forEach((function(t){var n=(0,e.getEdgeTerminal)(t,"source"),i=(0,e.getEdgeTerminal)(t,"target");n&&(r[n].out+=1,r[n].all+=1),i&&(r[i].in+=1,r[i].all+=1)})),r):r};e.floydWarshall=function(t){for(var e=[],n=t.length,r=0;r<n;r+=1){e[r]=[];for(var i=0;i<n;i+=1)r===i?e[r][i]=0:0!==t[r][i]&&t[r][i]?e[r][i]=t[r][i]:e[r][i]=1/0}for(var o=0;o<n;o+=1)for(r=0;r<n;r+=1)for(i=0;i<n;i+=1)e[r][i]>e[r][o]+e[o][i]&&(e[r][i]=e[r][o]+e[o][i]);return e};e.getAdjMatrix=function(t,n){var r=t.nodes,i=t.edges,o=[],a={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach((function(t,e){a[t.id]=e;o.push([])})),null==i||i.forEach((function(t){var r=(0,e.getEdgeTerminal)(t,"source"),i=(0,e.getEdgeTerminal)(t,"target"),s=a[r],u=a[i];void 0!==s&&void 0!==u&&(o[s][u]=1,n||(o[u][s]=1))})),o};e.scaleMatrix=function(t,e){var n=[];return t.forEach((function(t){var r=[];t.forEach((function(t){r.push(t*e)})),n.push(r)})),n};var a=function(t,e){if(t&&t.children)for(var n=t.children.length-1;n>=0;n--)if(!a(t.children[n],e))return;return!!e(t)};e.traverseTreeUp=function(t,e){"function"==typeof e&&a(t,e)};e.getLayoutBBox=function(t){var e=1/0,n=1/0,o=-1/0,a=-1/0;return t.forEach((function(t){var s=t.size;(0,r.isArray)(s)?1===s.length&&(s=[s[0],s[0]]):(0,i.isNumber)(s)?s=[s,s]:(void 0===s||isNaN(s))&&(s=[30,30]);var u=[s[0]/2,s[1]/2],l=t.x-u[0],c=t.x+u[0],h=t.y-u[1],d=t.y+u[1];e>l&&(e=l),n>h&&(n=h),o<c&&(o=c),a<d&&(a=d)})),{minX:e,minY:n,maxX:o,maxY:a}};e.getAvgNodePosition=function(t){var e={x:0,y:0};t.forEach((function(t){e.x+=t.x||0,e.y+=t.y||0}));var n=t.length||1;return{x:e.x/n,y:e.y/n}};var s=function(t,e,n){var r,i;return"source"===t?(null===(r=null==n?void 0:n.find((function(t){return t.target===e.id})))||void 0===r?void 0:r.source)||{}:(null===(i=null==n?void 0:n.find((function(t){return t.source===e.id})))||void 0===i?void 0:i.target)||{}},u=function(t,e,n){var r=[];switch(t){case"source":r=null==n?void 0:n.filter((function(t){return t.source===e.id})).map((function(t){return t.target}));break;case"target":r=null==n?void 0:n.filter((function(t){return t.target===e.id})).map((function(t){return t.source}));break;case"both":r=null==n?void 0:n.filter((function(t){return t.source===e.id})).map((function(t){return t.target})).concat(null==n?void 0:n.filter((function(t){return t.target===e.id})).map((function(t){return t.source})))}var i=new Set(r);return Array.from(i)};e.getCoreNodeAndRelativeLeafNodes=function(t,e,n,r,i,o){var a=i[e.id],l=a.in,c=a.out,h=e,d=[];0===l?(h=s("source",e,n),d=u("both",h,n).map((function(t){return o[t]}))):0===c&&(h=s("target",e,n),d=u("both",h,n).map((function(t){return o[t]}))),d=d.filter((function(t){return i[t.id]&&(0===i[t.id].in||0===i[t.id].out)}));var f=function(t,e,n,r,i){var o=n[e]||"",a=(null==r?void 0:r.filter((function(t){return t[e]===o})))||[];return"leaf"===t&&(a=a.filter((function(t){var e,n;return 0===(null===(e=i[t.id])||void 0===e?void 0:e.in)||0===(null===(n=i[t.id])||void 0===n?void 0:n.out)}))),a}(t,r,e,d,i);return{coreNode:h,relativeLeafNodes:d,sameTypeLeafNodes:f}}},19937:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toNumber=e.isNaN=e.isNumber=void 0;e.isNumber=function(t){return"number"==typeof t};e.isNaN=function(t){return Number.isNaN(Number(t))};e.toNumber=function(t){var n=parseFloat(t);return(0,e.isNaN)(n)?t:n}},15747:function(t,e){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.clone=e.isObject=void 0;e.isObject=function(t){return null!==t&&"object"==typeof t};e.clone=function(t){if(null===t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof Array){var r=[];return t.forEach((function(t){r.push(t)})),r.map((function(t){return(0,e.clone)(t)}))}if("object"==typeof t&&Object.keys(t).length){var i=n({},t);return Object.keys(i).forEach((function(t){i[t]=(0,e.clone)(i[t])})),i}return t}},95757:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.camelize=e.isString=void 0;e.isString=function(t){return"string"==typeof t};var n,r,i=/-(\w)/g;e.camelize=(n=function(t){return t.replace(i,(function(t,e){return e?e.toUpperCase():""}))},r=Object.create(null),function(t){return r[t]||(r[t]=n(t))})},79987:(t,e,n)=>{"use strict";function r(t){return[parseInt(t.substr(1,2),16),parseInt(t.substr(3,2),16),parseInt(t.substr(5,2),16)]}function i(t){var e=Math.round(t).toString(16);return 1===e.length?"0"+e:e}function o(t){return"#"+i(t[0])+i(t[1])+i(t[2])}n.r(e),n.d(e,{Cache:()=>Vn,angleTo:()=>E,arcToCubic:()=>Y,assign:()=>dn,augment:()=>fn,clamp:()=>be,clearAnimationFrame:()=>cn,clone:()=>mn,clonePath:()=>J,contains:()=>St,createDOM:()=>Qn,debounce:()=>gn,deepMix:()=>bn,difference:()=>At,direction:()=>S,distanceSquareRoot:()=>et,each:()=>Nt,endsWith:()=>se,equalizeSegments:()=>wt,every:()=>ue,extend:()=>xn,filter:()=>Et,find:()=>Dt,findIndex:()=>zt,firstValue:()=>Ft,fixedBase:()=>xe,flatten:()=>Bt,flattenDeep:()=>jt,forIn:()=>Fe,get:()=>In,getDrawDirection:()=>gt,getPathArea:()=>mt,getPathBBox:()=>ht,getPathBBoxTotalLength:()=>ft,getPointAtLength:()=>vt,getRange:()=>Gt,getRotatedCurve:()=>pt,getTotalLength:()=>dt,getType:()=>Ke,getWrapBehavior:()=>pe,gradient:()=>d,group:()=>fe,groupBy:()=>he,groupToMap:()=>de,has:()=>Be,hasKey:()=>Ue,hasValue:()=>Ve,head:()=>ie,identity:()=>Un,includes:()=>St,indexOf:()=>wn,isArguments:()=>Ze,isArray:()=>kt,isArrayLike:()=>_t,isBoolean:()=>Qe,isDate:()=>Je,isDecimal:()=>_e,isElement:()=>un,isEmpty:()=>Sn,isEqual:()=>An,isEqualWith:()=>Mn,isError:()=>tn,isEven:()=>Se,isFinite:()=>en,isFunction:()=>a,isInteger:()=>Ee,isMatch:()=>Ot,isNegative:()=>Ae,isNil:()=>Mt,isNull:()=>nn,isNumber:()=>we,isNumberEqual:()=>Ce,isObject:()=>It,isObjectLike:()=>Lt,isOdd:()=>Te,isPlainObject:()=>Rt,isPointInPolygon:()=>Xn,isPointInStroke:()=>bt,isPolygonsIntersect:()=>Zn,isPositive:()=>ke,isPrototype:()=>on,isRegExp:()=>an,isString:()=>Jt,isType:()=>Tt,isUndefined:()=>sn,keys:()=>Pt,last:()=>oe,lowerCase:()=>Ge,lowerFirst:()=>We,map:()=>Cn,mapValues:()=>kn,max:()=>Vt,maxBy:()=>Ie,memoize:()=>s,min:()=>Ht,minBy:()=>Ne,mix:()=>dn,mod:()=>Pe,modifyCSS:()=>Jn,noop:()=>Bn,normalizePath:()=>W,number2color:()=>ve,omit:()=>Ln,parseRadius:()=>ye,path2Absolute:()=>H,path2Array:()=>Q,path2Curve:()=>Z,path2String:()=>M,pick:()=>On,pull:()=>qt,pullAt:()=>Kt,reduce:()=>Zt,remove:()=>Qt,requestAnimationFrame:()=>ln,reverseCurve:()=>tt,rgb2arr:()=>r,set:()=>Nn,size:()=>jn,some:()=>le,sortBy:()=>te,startsWith:()=>ae,substitute:()=>Xe,throttle:()=>Rn,toArray:()=>Dn,toCSSGradient:()=>g,toDegree:()=>Le,toInteger:()=>Re,toRGB:()=>c,toRadian:()=>ze,toString:()=>He,transform:()=>w,union:()=>ne,uniq:()=>ee,uniqueId:()=>Fn,upperCase:()=>Ye,upperFirst:()=>qe,values:()=>je,valuesOfKey:()=>re,vertical:()=>A,wrapBehavior:()=>me});const a=function(t){return"function"==typeof t};const s=function(t,e,n){if(void 0===n&&(n=128),!a(t))throw new TypeError("Expected a function");var r=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=e?e.apply(this,n):n[0],a=r.cache;if(a.has(o))return a.get(o);var s=t.apply(this,n);return a.set(o,s),s};return r.cache=function(t){var e,n,r,i=t||1;function o(t,o){++e>i&&(r=n,a(1),++e),n[t]=o}function a(t){e=0,n=Object.create(null),t||(r=Object.create(null))}return a(),{clear:a,has:function(t){return void 0!==n[t]||void 0!==r[t]},get:function(t){var e=n[t];return void 0!==e?e:void 0!==(e=r[t])?(o(t,e),e):void 0},set:function(t,e){void 0!==n[t]?n[t]=e:o(t,e)}}}(n),r};var u,l=/rgba?\(([\s.,0-9]+)\)/;var c=s((function(t){if("#"===t[0]&&7===t.length)return t;var e;u||((e=document.createElement("i")).title="Web Colour Picker",e.style.display="none",document.body.appendChild(e),u=e),u.style.color=t;var n=document.defaultView.getComputedStyle(u,"").getPropertyValue("color");return n=o(l.exec(n)[1].split(/\s*,\s*/).map((function(t){return Number(t)})))}),(function(t){return t}),256);function h(t,e,n,r){return t[r]+(e[r]-t[r])*n}function d(t){var e=("string"==typeof t?t.split("-"):t).map((function(t){return r(-1===t.indexOf("#")?c(t):t)}));return function(t){return function(t,e){var n=isNaN(Number(e))||e<0?0:e>1?1:Number(e),r=t.length-1,i=Math.floor(r*n),a=r*n-i,s=t[i],u=i===r?s:t[i+1];return o([h(s,u,a,0),h(s,u,a,1),h(s,u,a,2)])}(e,t)}}var f=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,p=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,m=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function g(t){if(/^[r,R,L,l]{1}[\s]*\(/.test(t)){var e,n=void 0;if("l"===t[0]){var r=+(i=f.exec(t))[1]+90;n=i[2],e="linear-gradient("+r+"deg, "}else if("r"===t[0]){var i;e="radial-gradient(",n=(i=p.exec(t))[4]}var o=n.match(m);return o.forEach((function(t,n){var r=t.split(":");e+=r[1]+" "+100*Number(r[0])+"%",n!==o.length-1&&(e+=", ")})),e+=")"}return t}var v=n(91409);function y(t,e,n){var r=[0,0,0,0,0,0,0,0,0];return v.fromRotation(r,n),v.multiply(t,r,e)}function b(t,e,n){var r=[0,0,0,0,0,0,0,0,0];return v.fromScaling(r,n),v.multiply(t,r,e)}function x(t,e,n){return v.multiply(t,n,e)}function w(t,e){for(var n,r,i,o,a=t?[].concat(t):[1,0,0,0,1,0,0,0,1],s=0,u=e.length;s<u;s++){var l=e[s];switch(l[0]){case"t":n=a,r=a,i=[l[1],l[2]],o=void 0,o=[0,0,0,0,0,0,0,0,0],v.fromTranslation(o,i),v.multiply(n,o,r);break;case"s":b(a,a,[l[1],l[2]]);break;case"r":y(a,a,l[1]);break;case"m":x(a,a,l[1])}}return a}var _=n(40842);function S(t,e){return t[0]*e[1]-e[0]*t[1]}function E(t,e,n){var r=_.angle(t,e),i=S(t,e)>=0;return n?i?2*Math.PI-r:r:i?r:2*Math.PI-r}function A(t,e,n){return n?(t[0]=e[1],t[1]=-1*e[0]):(t[0]=-1*e[1],t[1]=e[0]),t}function M(t,e){return void 0===e&&(e="off"),function(t,e){if("off"===e)return[].concat(t);var n="number"==typeof e&&e>=1?Math.pow(10,e):1;return t.map((function(t){var r=t.slice(1).map(Number).map((function(t){return e?Math.round(t*n)/n:Math.round(t)}));return[t[0]].concat(r)}))}(t,e).map((function(t){return t[0]+t.slice(1).join(" ")})).join("")}var C=n(31635),T={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function k(t,e,n){if(t[n].length>7){t[n].shift();for(var r=t[n],i=n;r.length;)e[n]="A",t.splice(i+=1,0,["C"].concat(r.splice(0,6)));t.splice(n,1)}}var I={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function N(t){return Array.isArray(t)&&t.every((function(t){var e=t[0].toLowerCase();return I[e]===t.length-1&&"achlmqstvz".includes(e)}))}function P(t){return N(t)&&t.every((function(t){var e=t[0];return e===e.toUpperCase()}))}function O(t){return P(t)&&t.every((function(t){var e=t[0];return"ACLMQZ".includes(e)}))}function L(t){for(var e=t.pathValue[t.segmentStart],n=e.toLowerCase(),r=t.data;r.length>=I[n]&&("m"===n&&r.length>2?(t.segments.push([e].concat(r.splice(0,2))),n="l",e="m"===e?"l":"L"):t.segments.push([e].concat(r.splice(0,I[n]))),I[n]););}function R(t){var e=t.index,n=t.pathValue,r=n.charCodeAt(e);return 48===r?(t.param=0,void(t.index+=1)):49===r?(t.param=1,void(t.index+=1)):void(t.err='[path-util]: invalid Arc flag "'+n[e]+'", expecting 0 or 1 at index '+e)}function D(t){return t>=48&&t<=57||43===t||45===t||46===t}function z(t){return t>=48&&t<=57}function F(t){var e,n=t.max,r=t.pathValue,i=t.index,o=i,a=!1,s=!1,u=!1,l=!1;if(o>=n)t.err="[path-util]: Invalid path value at index "+o+', "pathValue" is missing param';else if(43!==(e=r.charCodeAt(o))&&45!==e||(o+=1,e=r.charCodeAt(o)),z(e)||46===e){if(46!==e){if(a=48===e,o+=1,e=r.charCodeAt(o),a&&o<n&&e&&z(e))return void(t.err="[path-util]: Invalid path value at index "+i+', "'+r[i]+'" illegal number');for(;o<n&&z(r.charCodeAt(o));)o+=1,s=!0;e=r.charCodeAt(o)}if(46===e){for(l=!0,o+=1;z(r.charCodeAt(o));)o+=1,u=!0;e=r.charCodeAt(o)}if(101===e||69===e){if(l&&!s&&!u)return void(t.err="[path-util]: Invalid path value at index "+o+', "'+r[o]+'" invalid float exponent');if(o+=1,43!==(e=r.charCodeAt(o))&&45!==e||(o+=1),!(o<n&&z(r.charCodeAt(o))))return void(t.err="[path-util]: Invalid path value at index "+o+', "'+r[o]+'" invalid integer exponent');for(;o<n&&z(r.charCodeAt(o));)o+=1}t.index=o,t.param=+t.pathValue.slice(i,o)}else t.err="[path-util]: Invalid path value at index "+o+', "'+r[o]+'" is not a number'}function B(t){for(var e,n=t.pathValue,r=t.max;t.index<r&&(10===(e=n.charCodeAt(t.index))||13===e||8232===e||8233===e||32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e));)t.index+=1}function U(t){var e=t.max,n=t.pathValue,r=t.index,i=n.charCodeAt(r),o=I[n[r].toLowerCase()];if(t.segmentStart=r,function(t){switch(32|t){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}(i))if(t.index+=1,B(t),t.data=[],o){for(;;){for(var a=o;a>0;a-=1){if(97!=(32|i)||3!==a&&4!==a?F(t):R(t),t.err.length)return;t.data.push(t.param),B(t),t.index<e&&44===n.charCodeAt(t.index)&&(t.index+=1,B(t))}if(t.index>=t.max)break;if(!D(n.charCodeAt(t.index)))break}L(t)}else L(t);else t.err='[path-util]: Invalid path value "'+n[r]+'" is not a path command'}var j=function(t){this.pathValue=t,this.segments=[],this.max=t.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""};function V(t){if(N(t))return[].concat(t);var e=new j(t);for(B(e);e.index<e.max&&!e.err.length;)U(e);return e.err?e.err:e.segments}function H(t){if(P(t))return[].concat(t);var e=V(t),n=0,r=0,i=0,o=0;return e.map((function(t){var e,a=t.slice(1).map(Number),s=t[0],u=s.toUpperCase();if("M"===s)return n=a[0],r=a[1],i=n,o=r,["M",n,r];if(s!==u)switch(u){case"A":e=[u,a[0],a[1],a[2],a[3],a[4],a[5]+n,a[6]+r];break;case"V":e=[u,a[0]+r];break;case"H":e=[u,a[0]+n];break;default:var l=a.map((function(t,e){return t+(e%2?r:n)}));e=[u].concat(l)}else e=[u].concat(a);var c=e.length;switch(u){case"Z":n=i,r=o;break;case"H":n=e[1];break;case"V":r=e[1];break;default:n=e[c-2],r=e[c-1],"M"===u&&(i=n,o=r)}return e}))}function G(t,e){var n=t[0],r=e.x1,i=e.y1,o=e.x2,a=e.y2,s=t.slice(1).map(Number),u=t;if("TQ".includes(n)||(e.qx=null,e.qy=null),"H"===n)u=["L",t[1],i];else if("V"===n)u=["L",r,t[1]];else if("S"===n){var l=2*r-o,c=2*i-a;e.x1=l,e.y1=c,u=["C",l,c].concat(s)}else if("T"===n){var h=2*r-e.qx,d=2*i-e.qy;e.qx=h,e.qy=d,u=["Q",h,d].concat(s)}else if("Q"===n){var f=s[0],p=s[1];e.qx=f,e.qy=p}return u}function W(t){if(O(t))return[].concat(t);for(var e=H(t),n=(0,C.__assign)({},T),r=0;r<e.length;r+=1){e[r]=G(e[r],n);var i=e[r],o=i.length;n.x1=+i[o-2],n.y1=+i[o-1],n.x2=+i[o-4]||n.x1,n.y2=+i[o-3]||n.y1}return e}function X(t,e,n){return{x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}}function Y(t,e,n,r,i,o,a,s,u,l){var c,h,d,f,p,m=t,g=e,v=n,y=r,b=s,x=u,w=120*Math.PI/180,_=Math.PI/180*(+i||0),S=[];if(l)h=l[0],d=l[1],f=l[2],p=l[3];else{m=(c=X(m,g,-_)).x,g=c.y;var E=(m-(b=(c=X(b,x,-_)).x))/2,A=(g-(x=c.y))/2,M=E*E/(v*v)+A*A/(y*y);M>1&&(v*=M=Math.sqrt(M),y*=M);var C=v*v,T=y*y,k=(o===a?-1:1)*Math.sqrt(Math.abs((C*T-C*A*A-T*E*E)/(C*A*A+T*E*E)));f=k*v*A/y+(m+b)/2,p=k*-y*E/v+(g+x)/2,h=Math.asin(((g-p)/y*Math.pow(10,9)|0)/Math.pow(10,9)),d=Math.asin(((x-p)/y*Math.pow(10,9)|0)/Math.pow(10,9)),h=m<f?Math.PI-h:h,d=b<f?Math.PI-d:d,h<0&&(h=2*Math.PI+h),d<0&&(d=2*Math.PI+d),a&&h>d&&(h-=2*Math.PI),!a&&d>h&&(d-=2*Math.PI)}var I=d-h;if(Math.abs(I)>w){var N=d,P=b,O=x;d=h+w*(a&&d>h?1:-1),S=Y(b=f+v*Math.cos(d),x=p+y*Math.sin(d),v,y,i,0,a,P,O,[d,N,f,p])}I=d-h;var L=Math.cos(h),R=Math.sin(h),D=Math.cos(d),z=Math.sin(d),F=Math.tan(I/4),B=4/3*v*F,U=4/3*y*F,j=[m,g],V=[m+B*R,g-U*L],H=[b+B*z,x-U*D],G=[b,x];if(V[0]=2*j[0]-V[0],V[1]=2*j[1]-V[1],l)return V.concat(H,G,S);for(var W=[],q=0,$=(S=V.concat(H,G,S)).length;q<$;q+=1)W[q]=q%2?X(S[q-1],S[q],_).y:X(S[q],S[q+1],_).x;return W}function q(t,e,n){var r=t[0],i=t[1];return[r+(e[0]-r)*n,i+(e[1]-i)*n]}var $=function(t,e,n,r){var i=q([t,e],[n,r],.5);return(0,C.__spreadArray)((0,C.__spreadArray)([],i,!0),[n,r,n,r],!1)};function K(t,e){var n,r,i,o,a,s,u,l,c,h=t[0],d=t.slice(1).map(Number),f=d[0],p=d[1],m=e.x1,g=e.y1,v=e.x,y=e.y;switch("TQ".includes(h)||(e.qx=null,e.qy=null),h){case"M":return e.x=f,e.y=p,t;case"A":return n=[m,g].concat(d),["C"].concat(Y(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9]));case"Q":return e.qx=f,e.qy=p,n=[m,g].concat(d),["C"].concat((r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],[(l=1/3)*r+(c=2/3)*o,l*i+c*a,l*s+c*o,l*u+c*a,s,u]));case"L":return["C"].concat($(m,g,f,p));case"Z":return m===v&&g===y?["C",m,g,v,y,v,y]:["C"].concat($(m,g,v,y))}return t}function Z(t,e){if(void 0===e&&(e=!1),function(t){return O(t)&&t.every((function(t){var e=t[0];return"MC".includes(e)}))}(t)){var n=[].concat(t);return e?[n,[]]:n}for(var r,i,o=W(t),a=(0,C.__assign)({},T),s=[],u="",l=o.length,c=[],h=0;h<l;h+=1){o[h]&&(u=o[h][0]),s[h]=u;var d=K(o[h],a);o[h]=d,k(o,s,h),l=o.length,"Z"===u&&c.push(h),i=(r=o[h]).length,a.x1=+r[i-2],a.y1=+r[i-1],a.x2=+r[i-4]||a.x1,a.y2=+r[i-3]||a.y1}return e?[o,c]:o}function Q(t){return V(t)}function J(t){return t.map((function(t){return Array.isArray(t)?[].concat(t):t}))}function tt(t){var e=t.slice(1).map((function(e,n,r){return n?r[n-1].slice(-2).concat(e.slice(1)):t[0].slice(1).concat(e.slice(1))})).map((function(t){return t.map((function(e,n){return t[t.length-n-2*(1-n%2)]}))})).reverse();return[["M"].concat(e[0].slice(0,2))].concat(e.map((function(t){return["C"].concat(t.slice(2))})))}function et(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}function nt(t,e,n,r,i){var o=et([t,e],[n,r]),a={x:0,y:0};if("number"==typeof i)if(i<=0)a={x:t,y:e};else if(i>=o)a={x:n,y:r};else{var s=q([t,e],[n,r],i/o);a={x:s[0],y:s[1]}}return{length:o,point:a,min:{x:Math.min(t,n),y:Math.min(e,r)},max:{x:Math.max(t,n),y:Math.max(e,r)}}}function rt(t,e){var n=t.x,r=t.y,i=e.x,o=e.y,a=n*i+r*o,s=Math.sqrt((Math.pow(n,2)+Math.pow(r,2))*(Math.pow(i,2)+Math.pow(o,2)));return(n*o-r*i<0?-1:1)*Math.acos(a/s)}function it(t,e,n,r,i,o,a,s,u,l){var c=Math.abs,h=Math.sin,d=Math.cos,f=Math.sqrt,p=Math.PI,m=c(n),g=c(r),v=(i%360+360)%360*(p/180);if(t===s&&e===u)return{x:t,y:e};if(0===m||0===g)return nt(t,e,s,u,l).point;var y=(t-s)/2,b=(e-u)/2,x={x:d(v)*y+h(v)*b,y:-h(v)*y+d(v)*b},w=Math.pow(x.x,2)/Math.pow(m,2)+Math.pow(x.y,2)/Math.pow(g,2);w>1&&(m*=f(w),g*=f(w));var _=(Math.pow(m,2)*Math.pow(g,2)-Math.pow(m,2)*Math.pow(x.y,2)-Math.pow(g,2)*Math.pow(x.x,2))/(Math.pow(m,2)*Math.pow(x.y,2)+Math.pow(g,2)*Math.pow(x.x,2)),S=(o!==a?1:-1)*f(_=_<0?0:_),E=S*(m*x.y/g),A=S*(-g*x.x/m),M=d(v)*E-h(v)*A+(t+s)/2,C=h(v)*E+d(v)*A+(e+u)/2,T={x:(x.x-E)/m,y:(x.y-A)/g},k=rt({x:1,y:0},T),I=rt(T,{x:(-x.x-E)/m,y:(-x.y-A)/g});!a&&I>0?I-=2*p:a&&I<0&&(I+=2*p);var N=k+(I%=2*p)*l,P=m*d(N),O=g*h(N);return{x:d(v)*P-h(v)*O+M,y:h(v)*P+d(v)*O+C}}function ot(t,e,n,r,i,o,a,s,u,l,c){var h,d=c.bbox,f=void 0===d||d,p=c.length,m=void 0===p||p,g=c.sampleSize,v=void 0===g?30:g,y="number"==typeof l,b=t,x=e,w=0,_=[b,x,w],S=[b,x],E={x:0,y:0},A=[{x:b,y:x}];y&&l<=0&&(E={x:b,y:x});for(var M=0;M<=v;M+=1){if(b=(h=it(t,e,n,r,i,o,a,s,u,M/v)).x,x=h.y,f&&A.push({x:b,y:x}),m&&(w+=et(S,[b,x])),S=[b,x],y&&w>=l&&l>_[2]){var C=(w-l)/(w-_[2]);E={x:S[0]*(1-C)+_[0]*C,y:S[1]*(1-C)+_[1]*C}}_=[b,x,w]}return y&&l>=w&&(E={x:s,y:u}),{length:w,point:E,min:{x:Math.min.apply(null,A.map((function(t){return t.x}))),y:Math.min.apply(null,A.map((function(t){return t.y})))},max:{x:Math.max.apply(null,A.map((function(t){return t.x}))),y:Math.max.apply(null,A.map((function(t){return t.y})))}}}function at(t,e,n,r,i,o,a,s,u){var l=1-u;return{x:Math.pow(l,3)*t+3*Math.pow(l,2)*u*n+3*l*Math.pow(u,2)*i+Math.pow(u,3)*a,y:Math.pow(l,3)*e+3*Math.pow(l,2)*u*r+3*l*Math.pow(u,2)*o+Math.pow(u,3)*s}}function st(t,e,n,r,i,o,a,s,u,l){var c,h=l.bbox,d=void 0===h||h,f=l.length,p=void 0===f||f,m=l.sampleSize,g=void 0===m?10:m,v="number"==typeof u,y=t,b=e,x=0,w=[y,b,x],_=[y,b],S={x:0,y:0},E=[{x:y,y:b}];v&&u<=0&&(S={x:y,y:b});for(var A=0;A<=g;A+=1){if(y=(c=at(t,e,n,r,i,o,a,s,A/g)).x,b=c.y,d&&E.push({x:y,y:b}),p&&(x+=et(_,[y,b])),_=[y,b],v&&x>=u&&u>w[2]){var M=(x-u)/(x-w[2]);S={x:_[0]*(1-M)+w[0]*M,y:_[1]*(1-M)+w[1]*M}}w=[y,b,x]}return v&&u>=x&&(S={x:a,y:s}),{length:x,point:S,min:{x:Math.min.apply(null,E.map((function(t){return t.x}))),y:Math.min.apply(null,E.map((function(t){return t.y})))},max:{x:Math.max.apply(null,E.map((function(t){return t.x}))),y:Math.max.apply(null,E.map((function(t){return t.y})))}}}function ut(t,e,n,r,i,o,a){var s=1-a;return{x:Math.pow(s,2)*t+2*s*a*n+Math.pow(a,2)*i,y:Math.pow(s,2)*e+2*s*a*r+Math.pow(a,2)*o}}function lt(t,e,n,r,i,o,a,s){var u,l=s.bbox,c=void 0===l||l,h=s.length,d=void 0===h||h,f=s.sampleSize,p=void 0===f?10:f,m="number"==typeof a,g=t,v=e,y=0,b=[g,v,y],x=[g,v],w={x:0,y:0},_=[{x:g,y:v}];m&&a<=0&&(w={x:g,y:v});for(var S=0;S<=p;S+=1){if(g=(u=ut(t,e,n,r,i,o,S/p)).x,v=u.y,c&&_.push({x:g,y:v}),d&&(y+=et(x,[g,v])),x=[g,v],m&&y>=a&&a>b[2]){var E=(y-a)/(y-b[2]);w={x:x[0]*(1-E)+b[0]*E,y:x[1]*(1-E)+b[1]*E}}b=[g,v,y]}return m&&a>=y&&(w={x:i,y:o}),{length:y,point:w,min:{x:Math.min.apply(null,_.map((function(t){return t.x}))),y:Math.min.apply(null,_.map((function(t){return t.y})))},max:{x:Math.max.apply(null,_.map((function(t){return t.x}))),y:Math.max.apply(null,_.map((function(t){return t.y})))}}}function ct(t,e,n){for(var r,i,o,a,s,u,l,c,h,d=W(t),f="number"==typeof e,p=[],m=0,g=0,v=0,y=0,b=[],x=[],w=0,_={x:0,y:0},S=_,E=_,A=_,M=0,C=0,T=d.length;C<T;C+=1)p=(l="M"===(c=(h=d[C])[0]))?p:[m,g].concat(h.slice(1)),l?(S=_={x:v=h[1],y:y=h[2]},w=0,f&&e<.001&&(A=_)):"L"===c?(w=(r=nt(p[0],p[1],p[2],p[3],(e||0)-M)).length,_=r.min,S=r.max,E=r.point):"A"===c?(w=(i=ot(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],(e||0)-M,n||{})).length,_=i.min,S=i.max,E=i.point):"C"===c?(w=(o=st(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],(e||0)-M,n||{})).length,_=o.min,S=o.max,E=o.point):"Q"===c?(w=(a=lt(p[0],p[1],p[2],p[3],p[4],p[5],(e||0)-M,n||{})).length,_=a.min,S=a.max,E=a.point):"Z"===c&&(w=(s=nt((p=[m,g,v,y])[0],p[1],p[2],p[3],(e||0)-M)).length,_=s.min,S=s.max,E=s.point),f&&M<e&&M+w>=e&&(A=E),x.push(S),b.push(_),M+=w,m=(u="Z"!==c?h.slice(-2):[v,y])[0],g=u[1];return f&&e>=M&&(A={x:m,y:g}),{length:M,point:A,min:{x:Math.min.apply(null,b.map((function(t){return t.x}))),y:Math.min.apply(null,b.map((function(t){return t.y})))},max:{x:Math.max.apply(null,x.map((function(t){return t.x}))),y:Math.max.apply(null,x.map((function(t){return t.y})))}}}function ht(t,e){if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var n=ct(t,void 0,(0,C.__assign)((0,C.__assign)({},e),{length:!1})),r=n.min,i=r.x,o=r.y,a=n.max,s=a.x,u=a.y,l=s-i,c=u-o;return{width:l,height:c,x:i,y:o,x2:s,y2:u,cx:i+l/2,cy:o+c/2,cz:Math.max(l,c)+Math.min(l,c)/2}}function dt(t,e){return ct(t,void 0,(0,C.__assign)((0,C.__assign)({},e),{bbox:!1,length:!0})).length}function ft(t,e){if(!t)return{length:0,x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var n=ct(t,void 0,(0,C.__assign)((0,C.__assign)({},e),{bbox:!0,length:!0})),r=n.length,i=n.min,o=i.x,a=i.y,s=n.max,u=s.x,l=s.y,c=u-o,h=l-a;return{length:r,width:c,height:h,x:o,y:a,x2:u,y2:l,cx:o+c/2,cy:a+h/2,cz:Math.max(c,h)+Math.min(c,h)/2}}function pt(t,e){var n=t.length-1,r=[],i=0,o=function(t){var e=t.length,n=e-1;return t.map((function(r,i){return t.map((function(r,o){var a,s=i+o;return 0===o||t[s]&&"M"===t[s][0]?(a=t[s],["M"].concat(a.slice(-2))):(s>=e&&(s-=n),t[s])}))}))}(t);return o.forEach((function(o,a){t.slice(1).forEach((function(r,o){i+=et(t[(a+o)%n].slice(-2),e[o%n].slice(-2))})),r[a]=i,i=0})),o[r.indexOf(Math.min.apply(null,r))]}function mt(t){var e=0,n=0,r=0;return Z(t).map((function(t){var i;if("M"===t[0])return e=t[1],n=t[2],0;var o=t.slice(1),a=o[0],s=o[1],u=o[2],l=o[3],c=o[4],h=o[5];return r=function(t,e,n,r,i,o,a,s){return 3*((s-e)*(n+i)-(a-t)*(r+o)+r*(t-i)-n*(e-o)+s*(i+t/3)-a*(o+e/3))/20}(e,n,a,s,u,l,c,h),i=t.slice(-2),e=i[0],n=i[1],r})).reduce((function(t,e){return t+e}),0)}function gt(t){return mt(t)>=0}function vt(t,e,n){return ct(t,e,(0,C.__assign)((0,C.__assign)({},n),{bbox:!1,length:!0})).point}function yt(t,e){for(var n,r,i,o,a=V(t),s=W(a),u=dt(a),l=function(t){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r},c=8,h=0,d=0,f=1/0,p=0;p<=u;p+=c)(h=l(n=vt(s,p)))<f&&(r=n,d=p,f=h);c/=2;for(var m=0,g=0,v=0,y=0;c>.5;)v=l(i=vt(s,m=d-c)),y=l(o=vt(s,g=d+c)),m>=0&&v<f?(r=i,d=m,f=v):g<=u&&y<f?(r=o,d=g,f=y):c/=2;var b=function(t,e){var n=V(t);if("string"==typeof n)throw TypeError(n);var r=n.slice(),i=dt(r),o=r.length-1,a=0,s=0,u=n[0],l=u.slice(-2),c={x:l[0],y:l[1]};if(o<=0||!e||!Number.isFinite(e))return{segment:u,index:0,length:s,point:c,lengthAtSegment:a};if(e>=i)return s=i-(a=dt(r=n.slice(0,-1))),{segment:n[o],index:o,length:s,lengthAtSegment:a};for(var h=[];o>0;)u=r[o],s=i-(a=dt(r=r.slice(0,-1))),i=a,h.push({segment:u,index:o,length:s,lengthAtSegment:a}),o-=1;return h.find((function(t){return t.lengthAtSegment<=e}))}(a,d);return{closest:r,distance:Math.sqrt(f),segment:b}}function bt(t,e){var n=yt(t,e).distance;return Math.abs(n)<.001}function xt(t){return t.map((function(t,e,n){var r=e&&n[e-1].slice(-2).concat(t.slice(1)),i=e?st(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],{bbox:!1}).length:0;return{s:t,ss:e?i?function(t,e){void 0===e&&(e=.5);var n=t.slice(0,2),r=t.slice(2,4),i=t.slice(4,6),o=t.slice(6,8),a=q(n,r,e),s=q(r,i,e),u=q(i,o,e),l=q(a,s,e),c=q(s,u,e),h=q(l,c,e);return[["C"].concat(a,l,h),["C"].concat(c,u,o)]}(r):[t,t]:[t],l:i}}))}function wt(t,e,n){var r=xt(t),i=xt(e),o=r.length,a=i.length,s=r.filter((function(t){return t.l})).length,u=i.filter((function(t){return t.l})).length,l=r.filter((function(t){return t.l})).reduce((function(t,e){return t+e.l}),0)/s||0,c=i.filter((function(t){return t.l})).reduce((function(t,e){return t+e.l}),0)/u||0,h=n||Math.max(o,a),d=[l,c],f=[h-o,h-a],p=0,m=[r,i].map((function(t,e){return t.l===h?t.map((function(t){return t.s})):t.map((function(t,n){return p=n&&f[e]&&t.l>=d[e],f[e]-=p?1:0,p?t.ss:[t.s]})).flat()}));return m[0].length===m[1].length?m:wt(m[0],m[1],h)}const _t=function(t){return null!==t&&"function"!=typeof t&&isFinite(t.length)};const St=function(t,e){return!!_t(t)&&t.indexOf(e)>-1};const Et=function(t,e){if(!_t(t))return t;for(var n=[],r=0;r<t.length;r++){var i=t[r];e(i,r)&&n.push(i)}return n};const At=function(t,e){return void 0===e&&(e=[]),Et(t,(function(t){return!St(e,t)}))};const Mt=function(t){return null==t};var Ct={}.toString;const Tt=function(t,e){return Ct.call(t)==="[object "+e+"]"},kt=function(t){return Array.isArray?Array.isArray(t):Tt(t,"Array")},It=function(t){var e=typeof t;return null!==t&&"object"===e||"function"===e};const Nt=function(t,e){if(t)if(kt(t))for(var n=0,r=t.length;n<r&&!1!==e(t[n],n);n++);else if(It(t))for(var i in t)if(t.hasOwnProperty(i)&&!1===e(t[i],i))break};const Pt=Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];return Nt(t,(function(n,r){a(t)&&"prototype"===r||e.push(r)})),e};const Ot=function(t,e){var n=Pt(e),r=n.length;if(Mt(t))return!r;for(var i=0;i<r;i+=1){var o=n[i];if(e[o]!==t[o]||!(o in t))return!1}return!0};const Lt=function(t){return"object"==typeof t&&null!==t};const Rt=function(t){if(!Lt(t)||!Tt(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e};const Dt=function(t,e){if(!kt(t))return null;var n;if(a(e)&&(n=e),Rt(e)&&(n=function(t){return Ot(t,e)}),n)for(var r=0;r<t.length;r+=1)if(n(t[r]))return t[r];return null};const zt=function(t,e,n){void 0===n&&(n=0);for(var r=n;r<t.length;r++)if(e(t[r],r))return r;return-1};const Ft=function(t,e){for(var n=null,r=0;r<t.length;r++){var i=t[r][e];if(!Mt(i)){n=kt(i)?i[0]:i;break}}return n};const Bt=function(t){if(!kt(t))return[];for(var e=[],n=0;n<t.length;n++)e=e.concat(t[n]);return e};var Ut=function(t,e){if(void 0===e&&(e=[]),kt(t))for(var n=0;n<t.length;n+=1)Ut(t[n],e);else e.push(t);return e};const jt=Ut,Vt=function(t){if(kt(t))return t.reduce((function(t,e){return Math.max(t,e)}),t[0])},Ht=function(t){if(kt(t))return t.reduce((function(t,e){return Math.min(t,e)}),t[0])};const Gt=function(t){var e=t.filter((function(t){return!isNaN(t)}));if(!e.length)return{min:0,max:0};if(kt(t[0])){for(var n=[],r=0;r<t.length;r++)n=n.concat(t[r]);e=n}var i=Vt(e);return{min:Ht(e),max:i}};var Wt=Array.prototype,Xt=Wt.splice,Yt=Wt.indexOf;const qt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r++)for(var i=e[r],o=-1;(o=Yt.call(t,i))>-1;)Xt.call(t,o,1);return t};var $t=Array.prototype.splice;const Kt=function(t,e){if(!_t(t))return[];for(var n=t?e.length:0,r=n-1;n--;){var i=void 0,o=e[n];n!==r&&o===i||(i=o,$t.call(t,o,1))}return t};const Zt=function(t,e,n){if(!kt(t)&&!Rt(t))return t;var r=n;return Nt(t,(function(t,n){r=e(r,t,n)})),r};const Qt=function(t,e){var n=[];if(!_t(t))return n;for(var r=-1,i=[],o=t.length;++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return Kt(t,i),n},Jt=function(t){return Tt(t,"String")};const te=function(t,e){var n;if(a(e))n=function(t,n){return e(t)-e(n)};else{var r=[];Jt(e)?r.push(e):kt(e)&&(r=e),n=function(t,e){for(var n=0;n<r.length;n+=1){var i=r[n];if(t[i]>e[i])return 1;if(t[i]<e[i])return-1}return 0}}return t.sort(n),t};function ee(t,e){void 0===e&&(e=new Map);var n=[];if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++){var o=t[r];e.has(o)||(n.push(o),e.set(o,!0))}return n}const ne=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ee([].concat.apply([],t))},re=function(t,e){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i][e];if(!Mt(o)){kt(o)||(o=[o]);for(var a=0;a<o.length;a++){var s=o[a];r[s]||(n.push(s),r[s]=!0)}}}return n};function ie(t){if(_t(t))return t[0]}function oe(t){if(_t(t)){return t[t.length-1]}}const ae=function(t,e){return!(!kt(t)&&!Jt(t))&&t[0]===e};const se=function(t,e){return!(!kt(t)&&!Jt(t))&&t[t.length-1]===e};const ue=function(t,e){for(var n=0;n<t.length;n++)if(!e(t[n],n))return!1;return!0};const le=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n))return!0;return!1};var ce=Object.prototype.hasOwnProperty;const he=function(t,e){if(!e||!kt(t))return{};for(var n,r={},i=a(e)?e:function(t){return t[e]},o=0;o<t.length;o++){var s=t[o];n=i(s),ce.call(r,n)?r[n].push(s):r[n]=[s]}return r};function de(t,e){if(!e)return{0:t};if(!a(e)){var n=kt(e)?e:e.replace(/\s+/g,"").split("*");e=function(t){for(var e="_",r=0,i=n.length;r<i;r++)e+=t[n[r]]&&t[n[r]].toString();return e}}return he(t,e)}const fe=function(t,e){if(!e)return[t];var n=de(t,e),r=[];for(var i in n)r.push(n[i]);return r};const pe=function(t,e){return t["_wrap_"+e]};const me=function(t,e){if(t["_wrap_"+e])return t["_wrap_"+e];var n=function(n){t[e](n)};return t["_wrap_"+e]=n,n};var ge={};const ve=function(t){var e=ge[t];if(!e){for(var n=t.toString(16),r=n.length;r<6;r++)n="0"+n;e="#"+n,ge[t]=e}return e};const ye=function(t){var e=0,n=0,r=0,i=0;return kt(t)?1===t.length?e=n=r=i=t[0]:2===t.length?(e=r=t[0],n=i=t[1]):3===t.length?(e=t[0],n=i=t[1],r=t[2]):(e=t[0],n=t[1],r=t[2],i=t[3]):e=n=r=i=t,{r1:e,r2:n,r3:r,r4:i}};const be=function(t,e,n){return t<e?e:t>n?n:t};const xe=function(t,e){var n=e.toString(),r=n.indexOf(".");if(-1===r)return Math.round(t);var i=n.substr(r+1).length;return i>20&&(i=20),parseFloat(t.toFixed(i))};const we=function(t){return Tt(t,"Number")};const _e=function(t){return we(t)&&t%1!=0};const Se=function(t){return we(t)&&t%2==0};const Ee=Number.isInteger?Number.isInteger:function(t){return we(t)&&t%1==0};const Ae=function(t){return we(t)&&t<0};var Me=1e-5;function Ce(t,e,n){return void 0===n&&(n=Me),Math.abs(t-e)<n}const Te=function(t){return we(t)&&t%2!=0};const ke=function(t){return we(t)&&t>0},Ie=function(t,e){if(kt(t)){for(var n,r=-1/0,i=0;i<t.length;i++){var o=t[i],s=a(e)?e(o):o[e];s>r&&(n=o,r=s)}return n}},Ne=function(t,e){if(kt(t)){for(var n,r=1/0,i=0;i<t.length;i++){var o=t[i],s=a(e)?e(o):o[e];s<r&&(n=o,r=s)}return n}};const Pe=function(t,e){return(t%e+e)%e};var Oe=180/Math.PI;const Le=function(t){return Oe*t},Re=parseInt;var De=Math.PI/180;const ze=function(t){return De*t},Fe=Nt,Be=function(t,e){return t.hasOwnProperty(e)},Ue=Be;const je=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return Nt(t,(function(n,r){a(t)&&"prototype"===r||e.push(n)})),e},Ve=function(t,e){return St(je(t),e)},He=function(t){return Mt(t)?"":t.toString()};const Ge=function(t){return He(t).toLowerCase()};const We=function(t){var e=He(t);return e.charAt(0).toLowerCase()+e.substring(1)};const Xe=function(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,(function(t,n){return"\\"===t.charAt(0)?t.slice(1):void 0===e[n]?"":e[n]})):t};const Ye=function(t){return He(t).toUpperCase()};const qe=function(t){var e=He(t);return e.charAt(0).toUpperCase()+e.substring(1)};var $e={}.toString;const Ke=function(t){return $e.call(t).replace(/^\[object /,"").replace(/]$/,"")};const Ze=function(t){return Tt(t,"Arguments")};const Qe=function(t){return Tt(t,"Boolean")};const Je=function(t){return Tt(t,"Date")};const tn=function(t){return Tt(t,"Error")};function en(t){return we(t)&&isFinite(t)}const nn=function(t){return null===t};var rn=Object.prototype;const on=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||rn)};const an=function(t){return Tt(t,"RegExp")};const sn=function(t){return void 0===t};const un=function(t){return t instanceof Element||t instanceof Document};function ln(t){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)})(t)}function cn(t){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(t)}function hn(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}function dn(t,e,n,r){return e&&hn(t,e),n&&hn(t,n),r&&hn(t,r),t}const fn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t[0],r=1;r<t.length;r++){var i=t[r];a(i)&&(i=i.prototype),dn(n.prototype,i)}};var pn=function(t){if("object"!=typeof t||null===t)return t;var e;if(kt(t)){e=[];for(var n=0,r=t.length;n<r;n++)"object"==typeof t[n]&&null!=t[n]?e[n]=pn(t[n]):e[n]=t[n]}else for(var i in e={},t)"object"==typeof t[i]&&null!=t[i]?e[i]=pn(t[i]):e[i]=t[i];return e};const mn=pn;const gn=function(t,e,n){var r;return function(){var i=this,o=arguments,a=n&&!r;clearTimeout(r),r=setTimeout((function(){r=null,n||t.apply(i,o)}),e),a&&t.apply(i,o)}};function vn(t,e){if(Object.hasOwn)return Object.hasOwn(t,e);if(null==t)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(t),e)}function yn(t,e,n,r){for(var i in n=n||0,r=r||5,e)if(vn(e,i)){var o=e[i];null!==o&&Rt(o)?(Rt(t[i])||(t[i]={}),n<r?yn(t[i],o,n+1,r):t[i]=e[i]):kt(o)?(t[i]=[],t[i]=t[i].concat(o)):void 0!==o&&(t[i]=o)}}const bn=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)yn(t,e[r]);return t};const xn=function(t,e,n,r){a(e)||(n=e,e=t,t=function(){});var i=Object.create?function(t,e){return Object.create(t,{constructor:{value:e}})}:function(t,e){function n(){}n.prototype=t;var r=new n;return r.constructor=e,r},o=i(e.prototype,t);return t.prototype=dn(o,t.prototype),t.superclass=i(e.prototype,e),dn(o,n),dn(t,r),t};const wn=function(t,e){if(!_t(t))return-1;var n=Array.prototype.indexOf;if(n)return n.call(t,e);for(var r=-1,i=0;i<t.length;i++)if(t[i]===e){r=i;break}return r};var _n=Object.prototype.hasOwnProperty;const Sn=function(t){if(Mt(t))return!0;if(_t(t))return!t.length;var e=Ke(t);if("Map"===e||"Set"===e)return!t.size;if(on(t))return!Object.keys(t).length;for(var n in t)if(_n.call(t,n))return!1;return!0};var En=function(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Jt(t)||Jt(e))return!1;if(_t(t)||_t(e)){if(t.length!==e.length)return!1;for(var n=!0,r=0;r<t.length&&(n=En(t[r],e[r]));r++);return n}if(Lt(t)||Lt(e)){var i=Object.keys(t),o=Object.keys(e);if(i.length!==o.length)return!1;for(n=!0,r=0;r<i.length&&(n=En(t[i[r]],e[i[r]]));r++);return n}return!1};const An=En,Mn=function(t,e,n){return a(n)?!!n(t,e):An(t,e)};const Cn=function(t,e){if(!_t(t))return t;for(var n=[],r=0;r<t.length;r++){var i=t[r];n.push(e(i,r))}return n};var Tn=function(t){return t};const kn=function(t,e){void 0===e&&(e=Tn);var n={};return It(t)&&!Mt(t)&&Object.keys(t).forEach((function(r){n[r]=e(t[r],r)})),n},In=function(t,e,n){for(var r=0,i=Jt(e)?e.split("."):e;t&&r<i.length;)t=t[i[r++]];return void 0===t||r<i.length?n:t},Nn=function(t,e,n){var r=t,i=Jt(e)?e.split("."):e;return i.forEach((function(t,e){e<i.length-1?(It(r[t])||(r[t]=we(i[e+1])?[]:{}),r=r[t]):r[t]=n})),t};var Pn=Object.prototype.hasOwnProperty;const On=function(t,e){if(null===t||!Rt(t))return{};var n={};return Nt(e,(function(e){Pn.call(t,e)&&(n[e]=t[e])})),n},Ln=function(t,e){return Zt(t,(function(t,n,r){return e.includes(r)||(t[r]=n),t}),{})},Rn=function(t,e,n){var r,i,o,a,s=0;n||(n={});var u=function(){s=!1===n.leading?0:Date.now(),r=null,a=t.apply(i,o),r||(i=o=null)},l=function(){var l=Date.now();s||!1!==n.leading||(s=l);var c=e-(l-s);return i=this,o=arguments,c<=0||c>e?(r&&(clearTimeout(r),r=null),s=l,a=t.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(u,c)),a};return l.cancel=function(){clearTimeout(r),s=0,r=i=o=null},l},Dn=function(t){return _t(t)?Array.prototype.slice.call(t):[]};var zn={};const Fn=function(t){return zn[t=t||"g"]?zn[t]+=1:zn[t]=1,t+zn[t]},Bn=function(){},Un=function(t){return t};function jn(t){return Mt(t)?0:_t(t)?t.length:Object.keys(t).length}const Vn=function(){function t(){this.map={}}return t.prototype.has=function(t){return void 0!==this.map[t]},t.prototype.get=function(t,e){var n=this.map[t];return void 0===n?e:n},t.prototype.set=function(t,e){this.map[t]=e},t.prototype.clear=function(){this.map={}},t.prototype.delete=function(t){delete this.map[t]},t.prototype.size=function(){return Object.keys(this.map).length},t}();var Hn=1e-6;function Gn(t){return Math.abs(t)<Hn?0:t<0?-1:1}function Wn(t,e,n){return(n[0]-t[0])*(e[1]-t[1])==(e[0]-t[0])*(n[1]-t[1])&&Math.min(t[0],e[0])<=n[0]&&n[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=n[1]&&n[1]<=Math.max(t[1],e[1])}function Xn(t,e,n){var r=!1,i=t.length;if(i<=2)return!1;for(var o=0;o<i;o++){var a=t[o],s=t[(o+1)%i];if(Wn(a,s,[e,n]))return!0;Gn(a[1]-n)>0!=Gn(s[1]-n)>0&&Gn(e-(n-a[1])*(a[0]-s[0])/(a[1]-s[1])-a[0])<0&&(r=!r)}return r}var Yn=function(t,e,n){return t>=e&&t<=n};function qn(t){for(var e=[],n=t.length,r=0;r<n-1;r++){var i=t[r],o=t[r+1];e.push({from:{x:i[0],y:i[1]},to:{x:o[0],y:o[1]}})}if(e.length>1){var a=t[0],s=t[n-1];e.push({from:{x:s[0],y:s[1]},to:{x:a[0],y:a[1]}})}return e}function $n(t,e){var n=!1;return t.forEach((function(t){if(function(t,e,n,r){var i=n.x-t.x,o=n.y-t.y,a=e.x-t.x,s=e.y-t.y,u=r.x-n.x,l=r.y-n.y,c=a*l-s*u,h=null;if(c*c>.001*(a*a+s*s)*(u*u+l*l)){var d=(i*l-o*u)/c,f=(i*s-o*a)/c;Yn(d,0,1)&&Yn(f,0,1)&&(h={x:t.x+d*a,y:t.y+d*s})}return h}(t.from,t.to,e.from,e.to))return n=!0,!1})),n}function Kn(t){var e=t.map((function(t){return t[0]})),n=t.map((function(t){return t[1]}));return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,n),maxY:Math.max.apply(null,n)}}function Zn(t,e){if(t.length<2||e.length<2)return!1;var n,r,i=Kn(t),o=Kn(e);if(n=i,(r=o).minX>n.maxX||r.maxX<n.minX||r.minY>n.maxY||r.maxY<n.minY)return!1;var a=!1;if(e.forEach((function(e){if(Xn(t,e[0],e[1]))return a=!0,!1})),a)return!0;if(t.forEach((function(t){if(Xn(e,t[0],t[1]))return a=!0,!1})),a)return!0;var s=qn(t),u=qn(e),l=!1;return u.forEach((function(t){if($n(s,t))return l=!0,!1})),l}function Qn(t){var e=document.createElement("div");e.innerHTML=t;var n=e.childNodes[0];return n&&e.contains(n)&&e.removeChild(n),n}function Jn(t,e){if(t)return Object.keys(e).forEach((function(n){t.style[n]=e[n]})),t}},7856:(t,e,n)=>{"use strict";n.r(e),n.d(e,{AbstractMatrix:()=>x,CHO:()=>Z,CholeskyDecomposition:()=>Z,EVD:()=>$,EigenvalueDecomposition:()=>$,LU:()=>D,LuDecomposition:()=>D,Matrix:()=>_,MatrixColumnSelectionView:()=>A,MatrixColumnView:()=>E,MatrixFlipColumnView:()=>M,MatrixFlipRowView:()=>C,MatrixRowSelectionView:()=>k,MatrixRowView:()=>T,MatrixSelectionView:()=>I,MatrixSubView:()=>N,MatrixTransposeView:()=>P,NIPALS:()=>Q,Nipals:()=>Q,QR:()=>F,QrDecomposition:()=>F,SVD:()=>B,SingularValueDecomposition:()=>B,WrapperMatrix1D:()=>O,WrapperMatrix2D:()=>L,correlation:()=>q,covariance:()=>Y,default:()=>_,determinant:()=>V,inverse:()=>U,linearDependencies:()=>W,pseudoInverse:()=>X,solve:()=>j,wrap:()=>R});const r=Object.prototype.toString;function i(t){const e=r.call(t);return e.endsWith("Array]")&&!e.includes("Big")}function o(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!i(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");if(void 0!==n.output){if(!i(n.output))throw new TypeError("output option must be an array if specified");e=n.output}else e=new Array(t.length);var r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!i(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=e.fromIndex,r=void 0===n?0:n,o=e.toIndex,a=void 0===o?t.length:o;if(r<0||r>=t.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=r||a>t.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=t[r],u=r+1;u<a;u++)t[u]<s&&(s=t[u]);return s}(t),o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!i(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=e.fromIndex,r=void 0===n?0:n,o=e.toIndex,a=void 0===o?t.length:o;if(r<0||r>=t.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=r||a>t.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=t[r],u=r+1;u<a;u++)t[u]>s&&(s=t[u]);return s}(t);if(r===o)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var a=n.min,s=void 0===a?n.autoMinMax?r:0:a,u=n.max,l=void 0===u?n.autoMinMax?o:1:u;if(s>=l)throw new RangeError("min option must be smaller than max option");for(var c=(l-s)/(o-r),h=0;h<t.length;h++)e[h]=(t[h]-r)*c+s;return e}const a=" ".repeat(2),s=" ".repeat(4);function u(t,e={}){const{maxRows:n=15,maxColumns:r=10,maxNumSize:i=8}=e;return`${t.constructor.name} {\n${a}[\n${s}${function(t,e,n,r){const{rows:i,columns:o}=t,a=Math.min(i,e),u=Math.min(o,n),c=[];for(let e=0;e<a;e++){let n=[];for(let i=0;i<u;i++)n.push(l(t.get(e,i),r));c.push(`${n.join(" ")}`)}u!==o&&(c[c.length-1]+=` ... ${o-n} more columns`);a!==i&&c.push(`... ${i-e} more rows`);return c.join(`\n${s}`)}(t,n,r,i)}\n${a}]\n${a}rows: ${t.rows}\n${a}columns: ${t.columns}\n}`}function l(t,e){const n=String(t);if(n.length<=e)return n.padEnd(e," ");const r=t.toPrecision(e-2);if(r.length<=e)return r;const i=t.toExponential(e-2),o=i.indexOf("e"),a=i.slice(o);return i.slice(0,e-a.length)+a}function c(t,e,n){let r=n?t.rows:t.rows-1;if(e<0||e>r)throw new RangeError("Row index out of range")}function h(t,e,n){let r=n?t.columns:t.columns-1;if(e<0||e>r)throw new RangeError("Column index out of range")}function d(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function f(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function p(t,e,n){return{row:m(t,e),column:g(t,n)}}function m(t,e){if("object"!=typeof e)throw new TypeError("unexpected type for row indices");if(e.some((e=>e<0||e>=t.rows)))throw new RangeError("row indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function g(t,e){if("object"!=typeof e)throw new TypeError("unexpected type for column indices");if(e.some((e=>e<0||e>=t.columns)))throw new RangeError("column indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function v(t,e,n,r,i){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(b("startRow",e),b("endRow",n),b("startColumn",r),b("endColumn",i),e>n||r>i||e<0||e>=t.rows||n<0||n>=t.rows||r<0||r>=t.columns||i<0||i>=t.columns)throw new RangeError("Submatrix indices are out of range")}function y(t,e=0){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function b(t,e){if("number"!=typeof e)throw new TypeError(`${t} must be a number`)}class x{static from1DArray(t,e,n){if(t*e!==n.length)throw new RangeError("data length does not match given dimensions");let r=new _(t,e);for(let i=0;i<t;i++)for(let t=0;t<e;t++)r.set(i,t,n[i*e+t]);return r}static rowVector(t){let e=new _(1,t.length);for(let n=0;n<t.length;n++)e.set(0,n,t[n]);return e}static columnVector(t){let e=new _(t.length,1);for(let n=0;n<t.length;n++)e.set(n,0,t[n]);return e}static zeros(t,e){return new _(t,e)}static ones(t,e){return new _(t,e).fill(1)}static rand(t,e,n={}){if("object"!=typeof n)throw new TypeError("options must be an object");const{random:r=Math.random}=n;let i=new _(t,e);for(let n=0;n<t;n++)for(let t=0;t<e;t++)i.set(n,t,r());return i}static randInt(t,e,n={}){if("object"!=typeof n)throw new TypeError("options must be an object");const{min:r=0,max:i=1e3,random:o=Math.random}=n;if(!Number.isInteger(r))throw new TypeError("min must be an integer");if(!Number.isInteger(i))throw new TypeError("max must be an integer");if(r>=i)throw new RangeError("min must be smaller than max");let a=i-r,s=new _(t,e);for(let n=0;n<t;n++)for(let t=0;t<e;t++){let e=r+Math.round(o()*a);s.set(n,t,e)}return s}static eye(t,e,n){void 0===e&&(e=t),void 0===n&&(n=1);let r=Math.min(t,e),i=this.zeros(t,e);for(let t=0;t<r;t++)i.set(t,t,n);return i}static diag(t,e,n){let r=t.length;void 0===e&&(e=r),void 0===n&&(n=e);let i=Math.min(r,e,n),o=this.zeros(e,n);for(let e=0;e<i;e++)o.set(e,e,t[e]);return o}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let n=t.rows,r=t.columns,i=new _(n,r);for(let o=0;o<n;o++)for(let n=0;n<r;n++)i.set(o,n,Math.min(t.get(o,n),e.get(o,n)));return i}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let n=t.rows,r=t.columns,i=new this(n,r);for(let o=0;o<n;o++)for(let n=0;n<r;n++)i.set(o,n,Math.max(t.get(o,n),e.get(o,n)));return i}static checkMatrix(t){return x.isMatrix(t)?t:new _(t)}static isMatrix(t){return null!=t&&"Matrix"===t.klass}get size(){return this.rows*this.columns}apply(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.call(this,e,n);return this}to1DArray(){let t=[];for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.push(this.get(e,n));return t}to2DArray(){let t=[];for(let e=0;e<this.rows;e++){t.push([]);for(let n=0;n<this.columns;n++)t[e].push(this.get(e,n))}return t}toJSON(){return this.to2DArray()}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(let t=0;t<this.rows;t++)for(let e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}isEchelonForm(){let t=0,e=0,n=-1,r=!0,i=!1;for(;t<this.rows&&r;){for(e=0,i=!1;e<this.columns&&!1===i;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>n?(i=!0,n=e):(r=!1,i=!0);t++}return r}isReducedEchelonForm(){let t=0,e=0,n=-1,r=!0,i=!1;for(;t<this.rows&&r;){for(e=0,i=!1;e<this.columns&&!1===i;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>n?(i=!0,n=e):(r=!1,i=!0);for(let n=e+1;n<this.rows;n++)0!==this.get(t,n)&&(r=!1);t++}return r}echelonForm(){let t=this.clone(),e=0,n=0;for(;e<t.rows&&n<t.columns;){let r=e;for(let i=e;i<t.rows;i++)t.get(i,n)>t.get(r,n)&&(r=i);if(0===t.get(r,n))n++;else{t.swapRows(e,r);let i=t.get(e,n);for(let r=n;r<t.columns;r++)t.set(e,r,t.get(e,r)/i);for(let r=e+1;r<t.rows;r++){let i=t.get(r,n)/t.get(e,n);t.set(r,n,0);for(let o=n+1;o<t.columns;o++)t.set(r,o,t.get(r,o)-t.get(e,o)*i)}e++,n++}}return t}reducedEchelonForm(){let t=this.echelonForm(),e=t.columns,n=t.rows,r=n-1;for(;r>=0;)if(0===t.maxRow(r))r--;else{let i=0,o=!1;for(;i<n&&!1===o;)1===t.get(r,i)?o=!0:i++;for(let n=0;n<r;n++){let o=t.get(n,i);for(let a=i;a<e;a++){let e=t.get(n,a)-o*t.get(r,a);t.set(n,a,e)}}r--}return t}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");const{rows:e=1,columns:n=1}=t;if(!Number.isInteger(e)||e<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(n)||n<=0)throw new TypeError("columns must be a positive integer");let r=new _(this.rows*e,this.columns*n);for(let t=0;t<e;t++)for(let e=0;e<n;e++)r.setSubMatrix(this,this.rows*t,this.columns*e);return r}fill(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,t);return this}neg(){return this.mulS(-1)}getRow(t){c(this,t);let e=[];for(let n=0;n<this.columns;n++)e.push(this.get(t,n));return e}getRowVector(t){return _.rowVector(this.getRow(t))}setRow(t,e){c(this,t),e=d(this,e);for(let n=0;n<this.columns;n++)this.set(t,n,e[n]);return this}swapRows(t,e){c(this,t),c(this,e);for(let n=0;n<this.columns;n++){let r=this.get(t,n);this.set(t,n,this.get(e,n)),this.set(e,n,r)}return this}getColumn(t){h(this,t);let e=[];for(let n=0;n<this.rows;n++)e.push(this.get(n,t));return e}getColumnVector(t){return _.columnVector(this.getColumn(t))}setColumn(t,e){h(this,t),e=f(this,e);for(let n=0;n<this.rows;n++)this.set(n,t,e[n]);return this}swapColumns(t,e){h(this,t),h(this,e);for(let n=0;n<this.rows;n++){let r=this.get(n,t);this.set(n,t,this.get(n,e)),this.set(n,e,r)}return this}addRowVector(t){t=d(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[n]);return this}subRowVector(t){t=d(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[n]);return this}mulRowVector(t){t=d(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[n]);return this}divRowVector(t){t=d(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[n]);return this}addColumnVector(t){t=f(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[e]);return this}subColumnVector(t){t=f(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[e]);return this}mulColumnVector(t){t=f(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[e]);return this}divColumnVector(t){t=f(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[e]);return this}mulRow(t,e){c(this,t);for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this}mulColumn(t,e){h(this,t);for(let n=0;n<this.rows;n++)this.set(n,t,this.get(n,t)*e);return this}max(){let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}maxIndex(){let t=this.get(0,0),e=[0,0];for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.get(n,r)>t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}min(){let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}minIndex(){let t=this.get(0,0),e=[0,0];for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.get(n,r)<t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}maxRow(t){c(this,t);let e=this.get(t,0);for(let n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}maxRowIndex(t){c(this,t);let e=this.get(t,0),n=[t,0];for(let r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r),n[1]=r);return n}minRow(t){c(this,t);let e=this.get(t,0);for(let n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}minRowIndex(t){c(this,t);let e=this.get(t,0),n=[t,0];for(let r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r),n[1]=r);return n}maxColumn(t){h(this,t);let e=this.get(0,t);for(let n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t));return e}maxColumnIndex(t){h(this,t);let e=this.get(0,t),n=[0,t];for(let r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t),n[0]=r);return n}minColumn(t){h(this,t);let e=this.get(0,t);for(let n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t));return e}minColumnIndex(t){h(this,t);let e=this.get(0,t),n=[0,t];for(let r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t),n[0]=r);return n}diag(){let t=Math.min(this.rows,this.columns),e=[];for(let n=0;n<t;n++)e.push(this.get(n,n));return e}norm(t="frobenius"){let e=0;if("max"===t)return this.max();if("frobenius"===t){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e+=this.get(t,n)*this.get(t,n);return Math.sqrt(e)}throw new RangeError(`unknown norm type: ${t}`)}cumulativeSum(){let t=0;for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t+=this.get(e,n),this.set(e,n,t);return this}dot(t){x.isMatrix(t)&&(t=t.to1DArray());let e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");let n=0;for(let r=0;r<e.length;r++)n+=e[r]*t[r];return n}mmul(t){t=_.checkMatrix(t);let e=this.rows,n=this.columns,r=t.columns,i=new _(e,r),o=new Float64Array(n);for(let a=0;a<r;a++){for(let e=0;e<n;e++)o[e]=t.get(e,a);for(let t=0;t<e;t++){let e=0;for(let r=0;r<n;r++)e+=this.get(t,r)*o[r];i.set(t,a,e)}}return i}strassen2x2(t){t=_.checkMatrix(t);let e=new _(2,2);const n=this.get(0,0),r=t.get(0,0),i=this.get(0,1),o=t.get(0,1),a=this.get(1,0),s=t.get(1,0),u=this.get(1,1),l=t.get(1,1),c=(n+u)*(r+l),h=(a+u)*r,d=n*(o-l),f=u*(s-r),p=(n+i)*l,m=c+f-p+(i-u)*(s+l),g=d+p,v=h+f,y=c-h+d+(a-n)*(r+o);return e.set(0,0,m),e.set(0,1,g),e.set(1,0,v),e.set(1,1,y),e}strassen3x3(t){t=_.checkMatrix(t);let e=new _(3,3);const n=this.get(0,0),r=this.get(0,1),i=this.get(0,2),o=this.get(1,0),a=this.get(1,1),s=this.get(1,2),u=this.get(2,0),l=this.get(2,1),c=this.get(2,2),h=t.get(0,0),d=t.get(0,1),f=t.get(0,2),p=t.get(1,0),m=t.get(1,1),g=t.get(1,2),v=t.get(2,0),y=t.get(2,1),b=t.get(2,2),x=(n-o)*(-d+m),w=(-n+o+a)*(h-d+m),S=(o+a)*(-h+d),E=n*h,A=(-n+u+l)*(h-f+g),M=(-n+u)*(f-g),C=(u+l)*(-h+f),T=(-i+l+c)*(m+v-y),k=(i-c)*(m-y),I=i*v,N=(l+c)*(-v+y),P=(-i+a+s)*(g+v-b),O=(i-s)*(g-b),L=(a+s)*(-v+b),R=E+I+r*p,D=(n+r+i-o-a-l-c)*m+w+S+E+T+I+N,z=E+A+C+(n+r+i-a-s-u-l)*g+I+P+L,F=x+a*(-h+d+p-m-g-v+b)+w+E+I+P+O,B=x+w+S+E+s*y,U=I+P+O+L+o*f,j=E+A+M+l*(-h+f+p-m-g-v+y)+T+k+I,V=T+k+I+N+u*d,H=E+A+M+C+c*b;return e.set(0,0,R),e.set(0,1,D),e.set(0,2,z),e.set(1,0,F),e.set(1,1,B),e.set(1,2,U),e.set(2,0,j),e.set(2,1,V),e.set(2,2,H),e}mmulStrassen(t){t=_.checkMatrix(t);let e=this.clone(),n=e.rows,r=e.columns,i=t.rows,o=t.columns;function a(t,e,n){let r=t.rows,i=t.columns;if(r===e&&i===n)return t;{let r=x.zeros(e,n);return r=r.setSubMatrix(t,0,0),r}}r!==i&&console.warn(`Multiplying ${n} x ${r} and ${i} x ${o} matrix: dimensions do not match.`);let s=Math.max(n,i),u=Math.max(r,o);return e=a(e,s,u),function t(e,n,r,i){if(r<=512||i<=512)return e.mmul(n);r%2==1&&i%2==1?(e=a(e,r+1,i+1),n=a(n,r+1,i+1)):r%2==1?(e=a(e,r+1,i),n=a(n,r+1,i)):i%2==1&&(e=a(e,r,i+1),n=a(n,r,i+1));let o=parseInt(e.rows/2,10),s=parseInt(e.columns/2,10),u=e.subMatrix(0,o-1,0,s-1),l=n.subMatrix(0,o-1,0,s-1),c=e.subMatrix(0,o-1,s,e.columns-1),h=n.subMatrix(0,o-1,s,n.columns-1),d=e.subMatrix(o,e.rows-1,0,s-1),f=n.subMatrix(o,n.rows-1,0,s-1),p=e.subMatrix(o,e.rows-1,s,e.columns-1),m=n.subMatrix(o,n.rows-1,s,n.columns-1),g=t(x.add(u,p),x.add(l,m),o,s),v=t(x.add(d,p),l,o,s),y=t(u,x.sub(h,m),o,s),b=t(p,x.sub(f,l),o,s),w=t(x.add(u,c),m,o,s),_=t(x.sub(d,u),x.add(l,h),o,s),S=t(x.sub(c,p),x.add(f,m),o,s),E=x.add(g,b);E.sub(w),E.add(S);let A=x.add(y,w),M=x.add(v,b),C=x.sub(g,v);C.add(y),C.add(_);let T=x.zeros(2*E.rows,2*E.columns);return T=T.setSubMatrix(E,0,0),T=T.setSubMatrix(A,E.rows,0),T=T.setSubMatrix(M,0,E.columns),T=T.setSubMatrix(C,E.rows,E.columns),T.subMatrix(0,r-1,0,i-1)}(e,t=a(t,s,u),s,u)}scaleRows(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");const{min:e=0,max:n=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(e>=n)throw new RangeError("min must be smaller than max");let r=new _(this.rows,this.columns);for(let t=0;t<this.rows;t++){const i=this.getRow(t);o(i,{min:e,max:n,output:i}),r.setRow(t,i)}return r}scaleColumns(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");const{min:e=0,max:n=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(e>=n)throw new RangeError("min must be smaller than max");let r=new _(this.rows,this.columns);for(let t=0;t<this.columns;t++){const i=this.getColumn(t);o(i,{min:e,max:n,output:i}),r.setColumn(t,i)}return r}flipRows(){const t=Math.ceil(this.columns/2);for(let e=0;e<this.rows;e++)for(let n=0;n<t;n++){let t=this.get(e,n),r=this.get(e,this.columns-1-n);this.set(e,n,r),this.set(e,this.columns-1-n,t)}return this}flipColumns(){const t=Math.ceil(this.rows/2);for(let e=0;e<this.columns;e++)for(let n=0;n<t;n++){let t=this.get(n,e),r=this.get(this.rows-1-n,e);this.set(n,e,r),this.set(this.rows-1-n,e,t)}return this}kroneckerProduct(t){t=_.checkMatrix(t);let e=this.rows,n=this.columns,r=t.rows,i=t.columns,o=new _(e*r,n*i);for(let a=0;a<e;a++)for(let e=0;e<n;e++)for(let n=0;n<r;n++)for(let s=0;s<i;s++)o.set(r*a+n,i*e+s,this.get(a,e)*t.get(n,s));return o}transpose(){let t=new _(this.columns,this.rows);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.set(n,e,this.get(e,n));return t}sortRows(t=w){for(let e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t=w){for(let e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,n,r){v(this,t,e,n,r);let i=new _(e-t+1,r-n+1);for(let o=t;o<=e;o++)for(let e=n;e<=r;e++)i.set(o-t,e-n,this.get(o,e));return i}subMatrixRow(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.columns-1),e>n||e<0||e>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");let r=new _(t.length,n-e+1);for(let i=0;i<t.length;i++)for(let o=e;o<=n;o++){if(t[i]<0||t[i]>=this.rows)throw new RangeError(`Row index out of range: ${t[i]}`);r.set(i,o-e,this.get(t[i],o))}return r}subMatrixColumn(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.rows-1),e>n||e<0||e>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");let r=new _(n-e+1,t.length);for(let i=0;i<t.length;i++)for(let o=e;o<=n;o++){if(t[i]<0||t[i]>=this.columns)throw new RangeError(`Column index out of range: ${t[i]}`);r.set(o-e,i,this.get(o,t[i]))}return r}setSubMatrix(t,e,n){v(this,e,e+(t=_.checkMatrix(t)).rows-1,n,n+t.columns-1);for(let r=0;r<t.rows;r++)for(let i=0;i<t.columns;i++)this.set(e+r,n+i,t.get(r,i));return this}selection(t,e){let n=p(this,t,e),r=new _(t.length,e.length);for(let t=0;t<n.row.length;t++){let e=n.row[t];for(let i=0;i<n.column.length;i++){let o=n.column[i];r.set(t,i,this.get(e,o))}}return r}trace(){let t=Math.min(this.rows,this.columns),e=0;for(let n=0;n<t;n++)e+=this.get(n,n);return e}clone(){let t=new _(this.rows,this.columns);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.set(e,n,this.get(e,n));return t}sum(t){switch(t){case"row":return function(t){let e=y(t.rows);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[n]+=t.get(n,r);return e}(this);case"column":return function(t){let e=y(t.columns);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[r]+=t.get(n,r);return e}(this);case void 0:return function(t){let e=0;for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)e+=t.get(n,r);return e}(this);default:throw new Error(`invalid option: ${t}`)}}product(t){switch(t){case"row":return function(t){let e=y(t.rows,1);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[n]*=t.get(n,r);return e}(this);case"column":return function(t){let e=y(t.columns,1);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[r]*=t.get(n,r);return e}(this);case void 0:return function(t){let e=1;for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)e*=t.get(n,r);return e}(this);default:throw new Error(`invalid option: ${t}`)}}mean(t){const e=this.sum(t);switch(t){case"row":for(let t=0;t<this.rows;t++)e[t]/=this.columns;return e;case"column":for(let t=0;t<this.columns;t++)e[t]/=this.rows;return e;case void 0:return e/this.size;default:throw new Error(`invalid option: ${t}`)}}variance(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");const{unbiased:n=!0,mean:r=this.mean(t)}=e;if("boolean"!=typeof n)throw new TypeError("unbiased must be a boolean");switch(t){case"row":if(!Array.isArray(r))throw new TypeError("mean must be an array");return function(t,e,n){const r=t.rows,i=t.columns,o=[];for(let a=0;a<r;a++){let r=0,s=0,u=0;for(let e=0;e<i;e++)u=t.get(a,e)-n[a],r+=u,s+=u*u;e?o.push((s-r*r/i)/(i-1)):o.push((s-r*r/i)/i)}return o}(this,n,r);case"column":if(!Array.isArray(r))throw new TypeError("mean must be an array");return function(t,e,n){const r=t.rows,i=t.columns,o=[];for(let a=0;a<i;a++){let i=0,s=0,u=0;for(let e=0;e<r;e++)u=t.get(e,a)-n[a],i+=u,s+=u*u;e?o.push((s-i*i/r)/(r-1)):o.push((s-i*i/r)/r)}return o}(this,n,r);case void 0:if("number"!=typeof r)throw new TypeError("mean must be a number");return function(t,e,n){const r=t.rows,i=t.columns,o=r*i;let a=0,s=0,u=0;for(let e=0;e<r;e++)for(let r=0;r<i;r++)u=t.get(e,r)-n,a+=u,s+=u*u;return e?(s-a*a/o)/(o-1):(s-a*a/o)/o}(this,n,r);default:throw new Error(`invalid option: ${t}`)}}standardDeviation(t,e){"object"==typeof t&&(e=t,t=void 0);const n=this.variance(t,e);if(void 0===t)return Math.sqrt(n);for(let t=0;t<n.length;t++)n[t]=Math.sqrt(n[t]);return n}center(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");const{center:n=this.mean(t)}=e;switch(t){case"row":if(!Array.isArray(n))throw new TypeError("center must be an array");return function(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e[n])}(this,n),this;case"column":if(!Array.isArray(n))throw new TypeError("center must be an array");return function(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e[r])}(this,n),this;case void 0:if("number"!=typeof n)throw new TypeError("center must be a number");return function(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e)}(this,n),this;default:throw new Error(`invalid option: ${t}`)}}scale(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");let n=e.scale;switch(t){case"row":if(void 0===n)n=function(t){const e=[];for(let n=0;n<t.rows;n++){let r=0;for(let e=0;e<t.columns;e++)r+=Math.pow(t.get(n,e),2)/(t.columns-1);e.push(Math.sqrt(r))}return e}(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");return function(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e[n])}(this,n),this;case"column":if(void 0===n)n=function(t){const e=[];for(let n=0;n<t.columns;n++){let r=0;for(let e=0;e<t.rows;e++)r+=Math.pow(t.get(e,n),2)/(t.rows-1);e.push(Math.sqrt(r))}return e}(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");return function(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e[r])}(this,n),this;case void 0:if(void 0===n)n=function(t){const e=t.size-1;let n=0;for(let r=0;r<t.columns;r++)for(let i=0;i<t.rows;i++)n+=Math.pow(t.get(i,r),2)/e;return Math.sqrt(n)}(this);else if("number"!=typeof n)throw new TypeError("scale must be a number");return function(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e)}(this,n),this;default:throw new Error(`invalid option: ${t}`)}}toString(t){return u(this,t)}}function w(t,e){return t-e}x.prototype.klass="Matrix","undefined"!=typeof Symbol&&(x.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return u(this)}),x.random=x.rand,x.randomInt=x.randInt,x.diagonal=x.diag,x.prototype.diagonal=x.prototype.diag,x.identity=x.eye,x.prototype.negate=x.prototype.neg,x.prototype.tensorProduct=x.prototype.kroneckerProduct;class _ extends x{constructor(t,e){if(super(),_.isMatrix(t))return t.clone();if(Number.isInteger(t)&&t>0){if(this.data=[],!(Number.isInteger(e)&&e>0))throw new TypeError("nColumns must be a positive integer");for(let n=0;n<t;n++)this.data.push(new Float64Array(e))}else{if(!Array.isArray(t))throw new TypeError("First argument must be a positive number or an array");{const n=t;if(t=n.length,"number"!=typeof(e=n[0].length)||0===e)throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let r=0;r<t;r++){if(n[r].length!==e)throw new RangeError("Inconsistent array dimensions");this.data.push(Float64Array.from(n[r]))}}}return this.rows=t,this.columns=e,this}set(t,e,n){return this.data[t][e]=n,this}get(t,e){return this.data[t][e]}removeRow(t){if(c(this,t),1===this.rows)throw new RangeError("A matrix cannot have less than one row");return this.data.splice(t,1),this.rows-=1,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),c(this,t,!0),e=Float64Array.from(d(this,e)),this.data.splice(t,0,e),this.rows+=1,this}removeColumn(t){if(h(this,t),1===this.columns)throw new RangeError("A matrix cannot have less than one column");for(let e=0;e<this.rows;e++){const n=new Float64Array(this.columns-1);for(let r=0;r<t;r++)n[r]=this.data[e][r];for(let r=t+1;r<this.columns;r++)n[r-1]=this.data[e][r];this.data[e]=n}return this.columns-=1,this}addColumn(t,e){void 0===e&&(e=t,t=this.columns),h(this,t,!0),e=f(this,e);for(let n=0;n<this.rows;n++){const r=new Float64Array(this.columns+1);let i=0;for(;i<t;i++)r[i]=this.data[n][i];for(r[i++]=e[n];i<this.columns+1;i++)r[i]=this.data[n][i-1];this.data[n]=r}return this.columns+=1,this}}!function(t,e){t.prototype.add=function(t){return"number"==typeof t?this.addS(t):this.addM(t)},t.prototype.addS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t);return this},t.prototype.addM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t.get(e,n));return this},t.add=function(t,n){return new e(t).add(n)},t.prototype.sub=function(t){return"number"==typeof t?this.subS(t):this.subM(t)},t.prototype.subS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t);return this},t.prototype.subM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t.get(e,n));return this},t.sub=function(t,n){return new e(t).sub(n)},t.prototype.subtract=t.prototype.sub,t.prototype.subtractS=t.prototype.subS,t.prototype.subtractM=t.prototype.subM,t.subtract=t.sub,t.prototype.mul=function(t){return"number"==typeof t?this.mulS(t):this.mulM(t)},t.prototype.mulS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t);return this},t.prototype.mulM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t.get(e,n));return this},t.mul=function(t,n){return new e(t).mul(n)},t.prototype.multiply=t.prototype.mul,t.prototype.multiplyS=t.prototype.mulS,t.prototype.multiplyM=t.prototype.mulM,t.multiply=t.mul,t.prototype.div=function(t){return"number"==typeof t?this.divS(t):this.divM(t)},t.prototype.divS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t);return this},t.prototype.divM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t.get(e,n));return this},t.div=function(t,n){return new e(t).div(n)},t.prototype.divide=t.prototype.div,t.prototype.divideS=t.prototype.divS,t.prototype.divideM=t.prototype.divM,t.divide=t.div,t.prototype.mod=function(t){return"number"==typeof t?this.modS(t):this.modM(t)},t.prototype.modS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)%t);return this},t.prototype.modM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)%t.get(e,n));return this},t.mod=function(t,n){return new e(t).mod(n)},t.prototype.modulus=t.prototype.mod,t.prototype.modulusS=t.prototype.modS,t.prototype.modulusM=t.prototype.modM,t.modulus=t.mod,t.prototype.and=function(t){return"number"==typeof t?this.andS(t):this.andM(t)},t.prototype.andS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)&t);return this},t.prototype.andM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)&t.get(e,n));return this},t.and=function(t,n){return new e(t).and(n)},t.prototype.or=function(t){return"number"==typeof t?this.orS(t):this.orM(t)},t.prototype.orS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)|t);return this},t.prototype.orM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)|t.get(e,n));return this},t.or=function(t,n){return new e(t).or(n)},t.prototype.xor=function(t){return"number"==typeof t?this.xorS(t):this.xorM(t)},t.prototype.xorS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)^t);return this},t.prototype.xorM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)^t.get(e,n));return this},t.xor=function(t,n){return new e(t).xor(n)},t.prototype.leftShift=function(t){return"number"==typeof t?this.leftShiftS(t):this.leftShiftM(t)},t.prototype.leftShiftS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)<<t);return this},t.prototype.leftShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)<<t.get(e,n));return this},t.leftShift=function(t,n){return new e(t).leftShift(n)},t.prototype.signPropagatingRightShift=function(t){return"number"==typeof t?this.signPropagatingRightShiftS(t):this.signPropagatingRightShiftM(t)},t.prototype.signPropagatingRightShiftS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>t);return this},t.prototype.signPropagatingRightShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>t.get(e,n));return this},t.signPropagatingRightShift=function(t,n){return new e(t).signPropagatingRightShift(n)},t.prototype.rightShift=function(t){return"number"==typeof t?this.rightShiftS(t):this.rightShiftM(t)},t.prototype.rightShiftS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>>t);return this},t.prototype.rightShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>>t.get(e,n));return this},t.rightShift=function(t,n){return new e(t).rightShift(n)},t.prototype.zeroFillRightShift=t.prototype.rightShift,t.prototype.zeroFillRightShiftS=t.prototype.rightShiftS,t.prototype.zeroFillRightShiftM=t.prototype.rightShiftM,t.zeroFillRightShift=t.rightShift,t.prototype.not=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,~this.get(t,e));return this},t.not=function(t){return new e(t).not()},t.prototype.abs=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.abs(this.get(t,e)));return this},t.abs=function(t){return new e(t).abs()},t.prototype.acos=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.acos(this.get(t,e)));return this},t.acos=function(t){return new e(t).acos()},t.prototype.acosh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.acosh(this.get(t,e)));return this},t.acosh=function(t){return new e(t).acosh()},t.prototype.asin=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.asin(this.get(t,e)));return this},t.asin=function(t){return new e(t).asin()},t.prototype.asinh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.asinh(this.get(t,e)));return this},t.asinh=function(t){return new e(t).asinh()},t.prototype.atan=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.atan(this.get(t,e)));return this},t.atan=function(t){return new e(t).atan()},t.prototype.atanh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.atanh(this.get(t,e)));return this},t.atanh=function(t){return new e(t).atanh()},t.prototype.cbrt=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cbrt(this.get(t,e)));return this},t.cbrt=function(t){return new e(t).cbrt()},t.prototype.ceil=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.ceil(this.get(t,e)));return this},t.ceil=function(t){return new e(t).ceil()},t.prototype.clz32=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.clz32(this.get(t,e)));return this},t.clz32=function(t){return new e(t).clz32()},t.prototype.cos=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cos(this.get(t,e)));return this},t.cos=function(t){return new e(t).cos()},t.prototype.cosh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cosh(this.get(t,e)));return this},t.cosh=function(t){return new e(t).cosh()},t.prototype.exp=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.exp(this.get(t,e)));return this},t.exp=function(t){return new e(t).exp()},t.prototype.expm1=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.expm1(this.get(t,e)));return this},t.expm1=function(t){return new e(t).expm1()},t.prototype.floor=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.floor(this.get(t,e)));return this},t.floor=function(t){return new e(t).floor()},t.prototype.fround=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.fround(this.get(t,e)));return this},t.fround=function(t){return new e(t).fround()},t.prototype.log=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log(this.get(t,e)));return this},t.log=function(t){return new e(t).log()},t.prototype.log1p=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log1p(this.get(t,e)));return this},t.log1p=function(t){return new e(t).log1p()},t.prototype.log10=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log10(this.get(t,e)));return this},t.log10=function(t){return new e(t).log10()},t.prototype.log2=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log2(this.get(t,e)));return this},t.log2=function(t){return new e(t).log2()},t.prototype.round=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.round(this.get(t,e)));return this},t.round=function(t){return new e(t).round()},t.prototype.sign=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sign(this.get(t,e)));return this},t.sign=function(t){return new e(t).sign()},t.prototype.sin=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sin(this.get(t,e)));return this},t.sin=function(t){return new e(t).sin()},t.prototype.sinh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sinh(this.get(t,e)));return this},t.sinh=function(t){return new e(t).sinh()},t.prototype.sqrt=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sqrt(this.get(t,e)));return this},t.sqrt=function(t){return new e(t).sqrt()},t.prototype.tan=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.tan(this.get(t,e)));return this},t.tan=function(t){return new e(t).tan()},t.prototype.tanh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.tanh(this.get(t,e)));return this},t.tanh=function(t){return new e(t).tanh()},t.prototype.trunc=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.trunc(this.get(t,e)));return this},t.trunc=function(t){return new e(t).trunc()},t.pow=function(t,n){return new e(t).pow(n)},t.prototype.pow=function(t){return"number"==typeof t?this.powS(t):this.powM(t)},t.prototype.powS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,Math.pow(this.get(e,n),t));return this},t.prototype.powM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,Math.pow(this.get(e,n),t.get(e,n)));return this}}(x,_);class S extends x{constructor(t,e,n){super(),this.matrix=t,this.rows=e,this.columns=n}}class E extends S{constructor(t,e){h(t,e),super(t,t.rows,1),this.column=e}set(t,e,n){return this.matrix.set(t,this.column,n),this}get(t){return this.matrix.get(t,this.column)}}class A extends S{constructor(t,e){e=g(t,e),super(t,t.rows,e.length),this.columnIndices=e}set(t,e,n){return this.matrix.set(t,this.columnIndices[e],n),this}get(t,e){return this.matrix.get(t,this.columnIndices[e])}}class M extends S{constructor(t){super(t,t.rows,t.columns)}set(t,e,n){return this.matrix.set(t,this.columns-e-1,n),this}get(t,e){return this.matrix.get(t,this.columns-e-1)}}class C extends S{constructor(t){super(t,t.rows,t.columns)}set(t,e,n){return this.matrix.set(this.rows-t-1,e,n),this}get(t,e){return this.matrix.get(this.rows-t-1,e)}}class T extends S{constructor(t,e){c(t,e),super(t,1,t.columns),this.row=e}set(t,e,n){return this.matrix.set(this.row,e,n),this}get(t,e){return this.matrix.get(this.row,e)}}class k extends S{constructor(t,e){super(t,(e=m(t,e)).length,t.columns),this.rowIndices=e}set(t,e,n){return this.matrix.set(this.rowIndices[t],e,n),this}get(t,e){return this.matrix.get(this.rowIndices[t],e)}}class I extends S{constructor(t,e,n){let r=p(t,e,n);super(t,r.row.length,r.column.length),this.rowIndices=r.row,this.columnIndices=r.column}set(t,e,n){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],n),this}get(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}}class N extends S{constructor(t,e,n,r,i){v(t,e,n,r,i),super(t,n-e+1,i-r+1),this.startRow=e,this.startColumn=r}set(t,e,n){return this.matrix.set(this.startRow+t,this.startColumn+e,n),this}get(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}}class P extends S{constructor(t){super(t,t.columns,t.rows)}set(t,e,n){return this.matrix.set(e,t,n),this}get(t,e){return this.matrix.get(e,t)}}class O extends x{constructor(t,e={}){const{rows:n=1}=e;if(t.length%n!=0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=n,this.columns=t.length/n,this.data=t}set(t,e,n){let r=this._calculateIndex(t,e);return this.data[r]=n,this}get(t,e){let n=this._calculateIndex(t,e);return this.data[n]}_calculateIndex(t,e){return t*this.columns+e}}class L extends x{constructor(t){super(),this.data=t,this.rows=t.length,this.columns=t[0].length}set(t,e,n){return this.data[t][e]=n,this}get(t,e){return this.data[t][e]}}function R(t,e){if(Array.isArray(t))return t[0]&&Array.isArray(t[0])?new L(t):new O(t,e);throw new Error("the argument is not an array")}class D{constructor(t){let e,n,r,i,o,a,s,u,l,c=(t=L.checkMatrix(t)).clone(),h=c.rows,d=c.columns,f=new Float64Array(h),p=1;for(e=0;e<h;e++)f[e]=e;for(u=new Float64Array(h),n=0;n<d;n++){for(e=0;e<h;e++)u[e]=c.get(e,n);for(e=0;e<h;e++){for(l=Math.min(e,n),o=0,r=0;r<l;r++)o+=c.get(e,r)*u[r];u[e]-=o,c.set(e,n,u[e])}for(i=n,e=n+1;e<h;e++)Math.abs(u[e])>Math.abs(u[i])&&(i=e);if(i!==n){for(r=0;r<d;r++)a=c.get(i,r),c.set(i,r,c.get(n,r)),c.set(n,r,a);s=f[i],f[i]=f[n],f[n]=s,p=-p}if(n<h&&0!==c.get(n,n))for(e=n+1;e<h;e++)c.set(e,n,c.get(e,n)/c.get(n,n))}this.LU=c,this.pivotVector=f,this.pivotSign=p}isSingular(){let t=this.LU,e=t.columns;for(let n=0;n<e;n++)if(0===t.get(n,n))return!0;return!1}solve(t){t=_.checkMatrix(t);let e=this.LU;if(e.rows!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let n,r,i,o=t.columns,a=t.subMatrixRow(this.pivotVector,0,o-1),s=e.columns;for(i=0;i<s;i++)for(n=i+1;n<s;n++)for(r=0;r<o;r++)a.set(n,r,a.get(n,r)-a.get(i,r)*e.get(n,i));for(i=s-1;i>=0;i--){for(r=0;r<o;r++)a.set(i,r,a.get(i,r)/e.get(i,i));for(n=0;n<i;n++)for(r=0;r<o;r++)a.set(n,r,a.get(n,r)-a.get(i,r)*e.get(n,i))}return a}get determinant(){let t=this.LU;if(!t.isSquare())throw new Error("Matrix must be square");let e=this.pivotSign,n=t.columns;for(let r=0;r<n;r++)e*=t.get(r,r);return e}get lowerTriangularMatrix(){let t=this.LU,e=t.rows,n=t.columns,r=new _(e,n);for(let i=0;i<e;i++)for(let e=0;e<n;e++)i>e?r.set(i,e,t.get(i,e)):i===e?r.set(i,e,1):r.set(i,e,0);return r}get upperTriangularMatrix(){let t=this.LU,e=t.rows,n=t.columns,r=new _(e,n);for(let i=0;i<e;i++)for(let e=0;e<n;e++)i<=e?r.set(i,e,t.get(i,e)):r.set(i,e,0);return r}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function z(t,e){let n=0;return Math.abs(t)>Math.abs(e)?(n=e/t,Math.abs(t)*Math.sqrt(1+n*n)):0!==e?(n=t/e,Math.abs(e)*Math.sqrt(1+n*n)):0}class F{constructor(t){let e,n,r,i,o=(t=L.checkMatrix(t)).clone(),a=t.rows,s=t.columns,u=new Float64Array(s);for(r=0;r<s;r++){let t=0;for(e=r;e<a;e++)t=z(t,o.get(e,r));if(0!==t){for(o.get(r,r)<0&&(t=-t),e=r;e<a;e++)o.set(e,r,o.get(e,r)/t);for(o.set(r,r,o.get(r,r)+1),n=r+1;n<s;n++){for(i=0,e=r;e<a;e++)i+=o.get(e,r)*o.get(e,n);for(i=-i/o.get(r,r),e=r;e<a;e++)o.set(e,n,o.get(e,n)+i*o.get(e,r))}}u[r]=-t}this.QR=o,this.Rdiag=u}solve(t){t=_.checkMatrix(t);let e=this.QR,n=e.rows;if(t.rows!==n)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let r,i,o,a,s=t.columns,u=t.clone(),l=e.columns;for(o=0;o<l;o++)for(i=0;i<s;i++){for(a=0,r=o;r<n;r++)a+=e.get(r,o)*u.get(r,i);for(a=-a/e.get(o,o),r=o;r<n;r++)u.set(r,i,u.get(r,i)+a*e.get(r,o))}for(o=l-1;o>=0;o--){for(i=0;i<s;i++)u.set(o,i,u.get(o,i)/this.Rdiag[o]);for(r=0;r<o;r++)for(i=0;i<s;i++)u.set(r,i,u.get(r,i)-u.get(o,i)*e.get(r,o))}return u.subMatrix(0,l-1,0,s-1)}isFullRank(){let t=this.QR.columns;for(let e=0;e<t;e++)if(0===this.Rdiag[e])return!1;return!0}get upperTriangularMatrix(){let t,e,n=this.QR,r=n.columns,i=new _(r,r);for(t=0;t<r;t++)for(e=0;e<r;e++)t<e?i.set(t,e,n.get(t,e)):t===e?i.set(t,e,this.Rdiag[t]):i.set(t,e,0);return i}get orthogonalMatrix(){let t,e,n,r,i=this.QR,o=i.rows,a=i.columns,s=new _(o,a);for(n=a-1;n>=0;n--){for(t=0;t<o;t++)s.set(t,n,0);for(s.set(n,n,1),e=n;e<a;e++)if(0!==i.get(n,n)){for(r=0,t=n;t<o;t++)r+=i.get(t,n)*s.get(t,e);for(r=-r/i.get(n,n),t=n;t<o;t++)s.set(t,e,s.get(t,e)+r*i.get(t,n))}}return s}}class B{constructor(t,e={}){let n=(t=L.checkMatrix(t)).rows,r=t.columns;const{computeLeftSingularVectors:i=!0,computeRightSingularVectors:o=!0,autoTranspose:a=!1}=e;let s,u=Boolean(i),l=Boolean(o),c=!1;if(n<r)if(a){s=t.transpose(),n=s.rows,r=s.columns,c=!0;let e=u;u=l,l=e}else s=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else s=t.clone();let h=Math.min(n,r),d=Math.min(n+1,r),f=new Float64Array(d),p=new _(n,h),m=new _(r,r),g=new Float64Array(r),v=new Float64Array(n),y=new Float64Array(d);for(let t=0;t<d;t++)y[t]=t;let b=Math.min(n-1,r),x=Math.max(0,Math.min(r-2,n)),w=Math.max(b,x);for(let t=0;t<w;t++){if(t<b){f[t]=0;for(let e=t;e<n;e++)f[t]=z(f[t],s.get(e,t));if(0!==f[t]){s.get(t,t)<0&&(f[t]=-f[t]);for(let e=t;e<n;e++)s.set(e,t,s.get(e,t)/f[t]);s.set(t,t,s.get(t,t)+1)}f[t]=-f[t]}for(let e=t+1;e<r;e++){if(t<b&&0!==f[t]){let r=0;for(let i=t;i<n;i++)r+=s.get(i,t)*s.get(i,e);r=-r/s.get(t,t);for(let i=t;i<n;i++)s.set(i,e,s.get(i,e)+r*s.get(i,t))}g[e]=s.get(t,e)}if(u&&t<b)for(let e=t;e<n;e++)p.set(e,t,s.get(e,t));if(t<x){g[t]=0;for(let e=t+1;e<r;e++)g[t]=z(g[t],g[e]);if(0!==g[t]){g[t+1]<0&&(g[t]=0-g[t]);for(let e=t+1;e<r;e++)g[e]/=g[t];g[t+1]+=1}if(g[t]=-g[t],t+1<n&&0!==g[t]){for(let e=t+1;e<n;e++)v[e]=0;for(let e=t+1;e<n;e++)for(let n=t+1;n<r;n++)v[e]+=g[n]*s.get(e,n);for(let e=t+1;e<r;e++){let r=-g[e]/g[t+1];for(let i=t+1;i<n;i++)s.set(i,e,s.get(i,e)+r*v[i])}}if(l)for(let e=t+1;e<r;e++)m.set(e,t,g[e])}}let S=Math.min(r,n+1);if(b<r&&(f[b]=s.get(b,b)),n<S&&(f[S-1]=0),x+1<S&&(g[x]=s.get(x,S-1)),g[S-1]=0,u){for(let t=b;t<h;t++){for(let e=0;e<n;e++)p.set(e,t,0);p.set(t,t,1)}for(let t=b-1;t>=0;t--)if(0!==f[t]){for(let e=t+1;e<h;e++){let r=0;for(let i=t;i<n;i++)r+=p.get(i,t)*p.get(i,e);r=-r/p.get(t,t);for(let i=t;i<n;i++)p.set(i,e,p.get(i,e)+r*p.get(i,t))}for(let e=t;e<n;e++)p.set(e,t,-p.get(e,t));p.set(t,t,1+p.get(t,t));for(let e=0;e<t-1;e++)p.set(e,t,0)}else{for(let e=0;e<n;e++)p.set(e,t,0);p.set(t,t,1)}}if(l)for(let t=r-1;t>=0;t--){if(t<x&&0!==g[t])for(let e=t+1;e<r;e++){let n=0;for(let i=t+1;i<r;i++)n+=m.get(i,t)*m.get(i,e);n=-n/m.get(t+1,t);for(let i=t+1;i<r;i++)m.set(i,e,m.get(i,e)+n*m.get(i,t))}for(let e=0;e<r;e++)m.set(e,t,0);m.set(t,t,1)}let E=S-1,A=0,M=Number.EPSILON;for(;S>0;){let t,e;for(t=S-2;t>=-1&&-1!==t;t--){const e=Number.MIN_VALUE+M*Math.abs(f[t]+Math.abs(f[t+1]));if(Math.abs(g[t])<=e||Number.isNaN(g[t])){g[t]=0;break}}if(t===S-2)e=4;else{let n;for(n=S-1;n>=t&&n!==t;n--){let e=(n!==S?Math.abs(g[n]):0)+(n!==t+1?Math.abs(g[n-1]):0);if(Math.abs(f[n])<=M*e){f[n]=0;break}}n===t?e=3:n===S-1?e=1:(e=2,t=n)}switch(t++,e){case 1:{let e=g[S-2];g[S-2]=0;for(let n=S-2;n>=t;n--){let i=z(f[n],e),o=f[n]/i,a=e/i;if(f[n]=i,n!==t&&(e=-a*g[n-1],g[n-1]=o*g[n-1]),l)for(let t=0;t<r;t++)i=o*m.get(t,n)+a*m.get(t,S-1),m.set(t,S-1,-a*m.get(t,n)+o*m.get(t,S-1)),m.set(t,n,i)}break}case 2:{let e=g[t-1];g[t-1]=0;for(let r=t;r<S;r++){let i=z(f[r],e),o=f[r]/i,a=e/i;if(f[r]=i,e=-a*g[r],g[r]=o*g[r],u)for(let e=0;e<n;e++)i=o*p.get(e,r)+a*p.get(e,t-1),p.set(e,t-1,-a*p.get(e,r)+o*p.get(e,t-1)),p.set(e,r,i)}break}case 3:{const e=Math.max(Math.abs(f[S-1]),Math.abs(f[S-2]),Math.abs(g[S-2]),Math.abs(f[t]),Math.abs(g[t])),i=f[S-1]/e,o=f[S-2]/e,a=g[S-2]/e,s=f[t]/e,c=g[t]/e,h=((o+i)*(o-i)+a*a)/2,d=i*a*(i*a);let v=0;0===h&&0===d||(v=h<0?0-Math.sqrt(h*h+d):Math.sqrt(h*h+d),v=d/(h+v));let y=(s+i)*(s-i)+v,b=s*c;for(let e=t;e<S-1;e++){let i=z(y,b);0===i&&(i=Number.MIN_VALUE);let o=y/i,a=b/i;if(e!==t&&(g[e-1]=i),y=o*f[e]+a*g[e],g[e]=o*g[e]-a*f[e],b=a*f[e+1],f[e+1]=o*f[e+1],l)for(let t=0;t<r;t++)i=o*m.get(t,e)+a*m.get(t,e+1),m.set(t,e+1,-a*m.get(t,e)+o*m.get(t,e+1)),m.set(t,e,i);if(i=z(y,b),0===i&&(i=Number.MIN_VALUE),o=y/i,a=b/i,f[e]=i,y=o*g[e]+a*f[e+1],f[e+1]=-a*g[e]+o*f[e+1],b=a*g[e+1],g[e+1]=o*g[e+1],u&&e<n-1)for(let t=0;t<n;t++)i=o*p.get(t,e)+a*p.get(t,e+1),p.set(t,e+1,-a*p.get(t,e)+o*p.get(t,e+1)),p.set(t,e,i)}g[S-2]=y,A+=1;break}case 4:if(f[t]<=0&&(f[t]=f[t]<0?-f[t]:0,l))for(let e=0;e<=E;e++)m.set(e,t,-m.get(e,t));for(;t<E&&!(f[t]>=f[t+1]);){let e=f[t];if(f[t]=f[t+1],f[t+1]=e,l&&t<r-1)for(let n=0;n<r;n++)e=m.get(n,t+1),m.set(n,t+1,m.get(n,t)),m.set(n,t,e);if(u&&t<n-1)for(let r=0;r<n;r++)e=p.get(r,t+1),p.set(r,t+1,p.get(r,t)),p.set(r,t,e);t++}A=0,S--}}if(c){let t=m;m=p,p=t}this.m=n,this.n=r,this.s=f,this.U=p,this.V=m}solve(t){let e=t,n=this.threshold,r=this.s.length,i=_.zeros(r,r);for(let t=0;t<r;t++)Math.abs(this.s[t])<=n?i.set(t,t,0):i.set(t,t,1/this.s[t]);let o=this.U,a=this.rightSingularVectors,s=a.mmul(i),u=a.rows,l=o.rows,c=_.zeros(u,l);for(let t=0;t<u;t++)for(let e=0;e<l;e++){let n=0;for(let i=0;i<r;i++)n+=s.get(t,i)*o.get(e,i);c.set(t,e,n)}return c.mmul(e)}solveForDiagonal(t){return this.solve(_.diag(t))}inverse(){let t=this.V,e=this.threshold,n=t.rows,r=t.columns,i=new _(n,this.s.length);for(let o=0;o<n;o++)for(let n=0;n<r;n++)Math.abs(this.s[n])>e&&i.set(o,n,t.get(o,n)/this.s[n]);let o=this.U,a=o.rows,s=o.columns,u=new _(n,a);for(let t=0;t<n;t++)for(let e=0;e<a;e++){let n=0;for(let r=0;r<s;r++)n+=i.get(t,r)*o.get(e,r);u.set(t,e,n)}return u}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,n=this.s;for(let r=0,i=n.length;r<i;r++)n[r]>t&&e++;return e}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return _.diag(this.s)}}function U(t,e=!1){return t=L.checkMatrix(t),e?new B(t).inverse():j(t,_.eye(t.rows))}function j(t,e,n=!1){return t=L.checkMatrix(t),e=L.checkMatrix(e),n?new B(t).solve(e):t.isSquare()?new D(t).solve(e):new F(t).solve(e)}function V(t){if((t=_.checkMatrix(t)).isSquare()){let e,n,r,i;if(2===t.columns)return e=t.get(0,0),n=t.get(0,1),r=t.get(1,0),i=t.get(1,1),e*i-n*r;if(3===t.columns){let i,o,a;return i=new I(t,[1,2],[1,2]),o=new I(t,[1,2],[0,2]),a=new I(t,[1,2],[0,1]),e=t.get(0,0),n=t.get(0,1),r=t.get(0,2),e*V(i)-n*V(o)+r*V(a)}return new D(t).determinant}throw Error("determinant can only be calculated for a square matrix")}function H(t,e){let n=[];for(let r=0;r<t;r++)r!==e&&n.push(r);return n}function G(t,e,n,r=1e-9,i=1e-9){if(t>i)return new Array(e.rows+1).fill(0);{let t=e.addRow(n,[0]);for(let e=0;e<t.rows;e++)Math.abs(t.get(e,0))<r&&t.set(e,0,0);return t.to1DArray()}}function W(t,e={}){const{thresholdValue:n=1e-9,thresholdError:r=1e-9}=e;let i=(t=_.checkMatrix(t)).rows,o=new _(i,i);for(let e=0;e<i;e++){let a=_.columnVector(t.getRow(e)),s=t.subMatrixRow(H(i,e)).transpose(),u=new B(s).solve(a),l=_.sub(a,s.mmul(u)).abs().max();o.setRow(e,G(l,u,e,n,r))}return o}function X(t,e=Number.EPSILON){t=_.checkMatrix(t);let n=new B(t,{autoTranspose:!0}),r=n.leftSingularVectors,i=n.rightSingularVectors,o=n.diagonal;for(let t=0;t<o.length;t++)Math.abs(o[t])>e?o[t]=1/o[t]:o[t]=0;return i.mmul(_.diag(o).mmul(r.transpose()))}function Y(t,e=t,n={}){t=new _(t);let r=!1;if("object"!=typeof e||_.isMatrix(e)||Array.isArray(e)?e=new _(e):(n=e,e=t,r=!0),t.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:i=!0}=n;i&&(t=t.center("column"),r||(e=e.center("column")));const o=t.transpose().mmul(e);for(let e=0;e<o.rows;e++)for(let n=0;n<o.columns;n++)o.set(e,n,o.get(e,n)*(1/(t.rows-1)));return o}function q(t,e=t,n={}){t=new _(t);let r=!1;if("object"!=typeof e||_.isMatrix(e)||Array.isArray(e)?e=new _(e):(n=e,e=t,r=!0),t.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:i=!0,scale:o=!0}=n;i&&(t.center("column"),r||e.center("column")),o&&(t.scale("column"),r||e.scale("column"));const a=t.standardDeviation("column",{unbiased:!0}),s=r?a:e.standardDeviation("column",{unbiased:!0}),u=t.transpose().mmul(e);for(let e=0;e<u.rows;e++)for(let n=0;n<u.columns;n++)u.set(e,n,u.get(e,n)*(1/(a[e]*s[n]))*(1/(t.rows-1)));return u}class ${constructor(t,e={}){const{assumeSymmetric:n=!1}=e;if(!(t=L.checkMatrix(t)).isSquare())throw new Error("Matrix is not a square matrix");let r,i,o=t.columns,a=new _(o,o),s=new Float64Array(o),u=new Float64Array(o),l=t,c=!1;if(c=!!n||t.isSymmetric(),c){for(r=0;r<o;r++)for(i=0;i<o;i++)a.set(r,i,l.get(r,i));!function(t,e,n,r){let i,o,a,s,u,l,c,h;for(u=0;u<t;u++)n[u]=r.get(t-1,u);for(s=t-1;s>0;s--){for(h=0,a=0,l=0;l<s;l++)h+=Math.abs(n[l]);if(0===h)for(e[s]=n[s-1],u=0;u<s;u++)n[u]=r.get(s-1,u),r.set(s,u,0),r.set(u,s,0);else{for(l=0;l<s;l++)n[l]/=h,a+=n[l]*n[l];for(i=n[s-1],o=Math.sqrt(a),i>0&&(o=-o),e[s]=h*o,a-=i*o,n[s-1]=i-o,u=0;u<s;u++)e[u]=0;for(u=0;u<s;u++){for(i=n[u],r.set(u,s,i),o=e[u]+r.get(u,u)*i,l=u+1;l<=s-1;l++)o+=r.get(l,u)*n[l],e[l]+=r.get(l,u)*i;e[u]=o}for(i=0,u=0;u<s;u++)e[u]/=a,i+=e[u]*n[u];for(c=i/(a+a),u=0;u<s;u++)e[u]-=c*n[u];for(u=0;u<s;u++){for(i=n[u],o=e[u],l=u;l<=s-1;l++)r.set(l,u,r.get(l,u)-(i*e[l]+o*n[l]));n[u]=r.get(s-1,u),r.set(s,u,0)}}n[s]=a}for(s=0;s<t-1;s++){if(r.set(t-1,s,r.get(s,s)),r.set(s,s,1),a=n[s+1],0!==a){for(l=0;l<=s;l++)n[l]=r.get(l,s+1)/a;for(u=0;u<=s;u++){for(o=0,l=0;l<=s;l++)o+=r.get(l,s+1)*r.get(l,u);for(l=0;l<=s;l++)r.set(l,u,r.get(l,u)-o*n[l])}}for(l=0;l<=s;l++)r.set(l,s+1,0)}for(u=0;u<t;u++)n[u]=r.get(t-1,u),r.set(t-1,u,0);r.set(t-1,t-1,1),e[0]=0}(o,u,s,a),function(t,e,n,r){let i,o,a,s,u,l,c,h,d,f,p,m,g,v,y,b,x;for(a=1;a<t;a++)e[a-1]=e[a];e[t-1]=0;let w=0,_=0,S=Number.EPSILON;for(l=0;l<t;l++){for(_=Math.max(_,Math.abs(n[l])+Math.abs(e[l])),c=l;c<t&&!(Math.abs(e[c])<=S*_);)c++;if(c>l){x=0;do{for(x+=1,i=n[l],h=(n[l+1]-i)/(2*e[l]),d=z(h,1),h<0&&(d=-d),n[l]=e[l]/(h+d),n[l+1]=e[l]*(h+d),f=n[l+1],o=i-n[l],a=l+2;a<t;a++)n[a]-=o;for(w+=o,h=n[c],p=1,m=p,g=p,v=e[l+1],y=0,b=0,a=c-1;a>=l;a--)for(g=m,m=p,b=y,i=p*e[a],o=p*h,d=z(h,e[a]),e[a+1]=y*d,y=e[a]/d,p=h/d,h=p*n[a]-y*i,n[a+1]=o+y*(p*i+y*n[a]),u=0;u<t;u++)o=r.get(u,a+1),r.set(u,a+1,y*r.get(u,a)+p*o),r.set(u,a,p*r.get(u,a)-y*o);h=-y*b*g*v*e[l]/f,e[l]=y*h,n[l]=p*h}while(Math.abs(e[l])>S*_)}n[l]=n[l]+w,e[l]=0}for(a=0;a<t-1;a++){for(u=a,h=n[a],s=a+1;s<t;s++)n[s]<h&&(u=s,h=n[s]);if(u!==a)for(n[u]=n[a],n[a]=h,s=0;s<t;s++)h=r.get(s,a),r.set(s,a,r.get(s,u)),r.set(s,u,h)}}(o,u,s,a)}else{let t=new _(o,o),e=new Float64Array(o);for(i=0;i<o;i++)for(r=0;r<o;r++)t.set(r,i,l.get(r,i));!function(t,e,n,r){let i,o,a,s,u,l,c,h=0,d=t-1;for(l=h+1;l<=d-1;l++){for(c=0,s=l;s<=d;s++)c+=Math.abs(e.get(s,l-1));if(0!==c){for(a=0,s=d;s>=l;s--)n[s]=e.get(s,l-1)/c,a+=n[s]*n[s];for(o=Math.sqrt(a),n[l]>0&&(o=-o),a-=n[l]*o,n[l]=n[l]-o,u=l;u<t;u++){for(i=0,s=d;s>=l;s--)i+=n[s]*e.get(s,u);for(i/=a,s=l;s<=d;s++)e.set(s,u,e.get(s,u)-i*n[s])}for(s=0;s<=d;s++){for(i=0,u=d;u>=l;u--)i+=n[u]*e.get(s,u);for(i/=a,u=l;u<=d;u++)e.set(s,u,e.get(s,u)-i*n[u])}n[l]=c*n[l],e.set(l,l-1,c*o)}}for(s=0;s<t;s++)for(u=0;u<t;u++)r.set(s,u,s===u?1:0);for(l=d-1;l>=h+1;l--)if(0!==e.get(l,l-1)){for(s=l+1;s<=d;s++)n[s]=e.get(s,l-1);for(u=l;u<=d;u++){for(o=0,s=l;s<=d;s++)o+=n[s]*r.get(s,u);for(o=o/n[l]/e.get(l,l-1),s=l;s<=d;s++)r.set(s,u,r.get(s,u)+o*n[s])}}}(o,t,e,a),function(t,e,n,r,i){let o,a,s,u,l,c,h,d,f,p,m,g,v,y,b,x=t-1,w=0,_=t-1,S=Number.EPSILON,E=0,A=0,M=0,C=0,T=0,k=0,I=0,N=0;for(o=0;o<t;o++)for((o<w||o>_)&&(n[o]=i.get(o,o),e[o]=0),a=Math.max(o-1,0);a<t;a++)A+=Math.abs(i.get(o,a));for(;x>=w;){for(u=x;u>w&&(k=Math.abs(i.get(u-1,u-1))+Math.abs(i.get(u,u)),0===k&&(k=A),!(Math.abs(i.get(u,u-1))<S*k));)u--;if(u===x)i.set(x,x,i.get(x,x)+E),n[x]=i.get(x,x),e[x]=0,x--,N=0;else if(u===x-1){if(h=i.get(x,x-1)*i.get(x-1,x),M=(i.get(x-1,x-1)-i.get(x,x))/2,C=M*M+h,I=Math.sqrt(Math.abs(C)),i.set(x,x,i.get(x,x)+E),i.set(x-1,x-1,i.get(x-1,x-1)+E),d=i.get(x,x),C>=0){for(I=M>=0?M+I:M-I,n[x-1]=d+I,n[x]=n[x-1],0!==I&&(n[x]=d-h/I),e[x-1]=0,e[x]=0,d=i.get(x,x-1),k=Math.abs(d)+Math.abs(I),M=d/k,C=I/k,T=Math.sqrt(M*M+C*C),M/=T,C/=T,a=x-1;a<t;a++)I=i.get(x-1,a),i.set(x-1,a,C*I+M*i.get(x,a)),i.set(x,a,C*i.get(x,a)-M*I);for(o=0;o<=x;o++)I=i.get(o,x-1),i.set(o,x-1,C*I+M*i.get(o,x)),i.set(o,x,C*i.get(o,x)-M*I);for(o=w;o<=_;o++)I=r.get(o,x-1),r.set(o,x-1,C*I+M*r.get(o,x)),r.set(o,x,C*r.get(o,x)-M*I)}else n[x-1]=d+M,n[x]=d+M,e[x-1]=I,e[x]=-I;x-=2,N=0}else{if(d=i.get(x,x),f=0,h=0,u<x&&(f=i.get(x-1,x-1),h=i.get(x,x-1)*i.get(x-1,x)),10===N){for(E+=d,o=w;o<=x;o++)i.set(o,o,i.get(o,o)-d);k=Math.abs(i.get(x,x-1))+Math.abs(i.get(x-1,x-2)),d=f=.75*k,h=-.4375*k*k}if(30===N&&(k=(f-d)/2,k=k*k+h,k>0)){for(k=Math.sqrt(k),f<d&&(k=-k),k=d-h/((f-d)/2+k),o=w;o<=x;o++)i.set(o,o,i.get(o,o)-k);E+=k,d=f=h=.964}for(N+=1,l=x-2;l>=u&&(I=i.get(l,l),T=d-I,k=f-I,M=(T*k-h)/i.get(l+1,l)+i.get(l,l+1),C=i.get(l+1,l+1)-I-T-k,T=i.get(l+2,l+1),k=Math.abs(M)+Math.abs(C)+Math.abs(T),M/=k,C/=k,T/=k,l!==u)&&!(Math.abs(i.get(l,l-1))*(Math.abs(C)+Math.abs(T))<S*(Math.abs(M)*(Math.abs(i.get(l-1,l-1))+Math.abs(I)+Math.abs(i.get(l+1,l+1)))));)l--;for(o=l+2;o<=x;o++)i.set(o,o-2,0),o>l+2&&i.set(o,o-3,0);for(s=l;s<=x-1&&(y=s!==x-1,s!==l&&(M=i.get(s,s-1),C=i.get(s+1,s-1),T=y?i.get(s+2,s-1):0,d=Math.abs(M)+Math.abs(C)+Math.abs(T),0!==d&&(M/=d,C/=d,T/=d)),0!==d);s++)if(k=Math.sqrt(M*M+C*C+T*T),M<0&&(k=-k),0!==k){for(s!==l?i.set(s,s-1,-k*d):u!==l&&i.set(s,s-1,-i.get(s,s-1)),M+=k,d=M/k,f=C/k,I=T/k,C/=M,T/=M,a=s;a<t;a++)M=i.get(s,a)+C*i.get(s+1,a),y&&(M+=T*i.get(s+2,a),i.set(s+2,a,i.get(s+2,a)-M*I)),i.set(s,a,i.get(s,a)-M*d),i.set(s+1,a,i.get(s+1,a)-M*f);for(o=0;o<=Math.min(x,s+3);o++)M=d*i.get(o,s)+f*i.get(o,s+1),y&&(M+=I*i.get(o,s+2),i.set(o,s+2,i.get(o,s+2)-M*T)),i.set(o,s,i.get(o,s)-M),i.set(o,s+1,i.get(o,s+1)-M*C);for(o=w;o<=_;o++)M=d*r.get(o,s)+f*r.get(o,s+1),y&&(M+=I*r.get(o,s+2),r.set(o,s+2,r.get(o,s+2)-M*T)),r.set(o,s,r.get(o,s)-M),r.set(o,s+1,r.get(o,s+1)-M*C)}}}if(0===A)return;for(x=t-1;x>=0;x--)if(M=n[x],C=e[x],0===C)for(u=x,i.set(x,x,1),o=x-1;o>=0;o--){for(h=i.get(o,o)-M,T=0,a=u;a<=x;a++)T+=i.get(o,a)*i.get(a,x);if(e[o]<0)I=h,k=T;else if(u=o,0===e[o]?i.set(o,x,0!==h?-T/h:-T/(S*A)):(d=i.get(o,o+1),f=i.get(o+1,o),C=(n[o]-M)*(n[o]-M)+e[o]*e[o],c=(d*k-I*T)/C,i.set(o,x,c),i.set(o+1,x,Math.abs(d)>Math.abs(I)?(-T-h*c)/d:(-k-f*c)/I)),c=Math.abs(i.get(o,x)),S*c*c>1)for(a=o;a<=x;a++)i.set(a,x,i.get(a,x)/c)}else if(C<0)for(u=x-1,Math.abs(i.get(x,x-1))>Math.abs(i.get(x-1,x))?(i.set(x-1,x-1,C/i.get(x,x-1)),i.set(x-1,x,-(i.get(x,x)-M)/i.get(x,x-1))):(b=K(0,-i.get(x-1,x),i.get(x-1,x-1)-M,C),i.set(x-1,x-1,b[0]),i.set(x-1,x,b[1])),i.set(x,x-1,0),i.set(x,x,1),o=x-2;o>=0;o--){for(p=0,m=0,a=u;a<=x;a++)p+=i.get(o,a)*i.get(a,x-1),m+=i.get(o,a)*i.get(a,x);if(h=i.get(o,o)-M,e[o]<0)I=h,T=p,k=m;else if(u=o,0===e[o]?(b=K(-p,-m,h,C),i.set(o,x-1,b[0]),i.set(o,x,b[1])):(d=i.get(o,o+1),f=i.get(o+1,o),g=(n[o]-M)*(n[o]-M)+e[o]*e[o]-C*C,v=2*(n[o]-M)*C,0===g&&0===v&&(g=S*A*(Math.abs(h)+Math.abs(C)+Math.abs(d)+Math.abs(f)+Math.abs(I))),b=K(d*T-I*p+C*m,d*k-I*m-C*p,g,v),i.set(o,x-1,b[0]),i.set(o,x,b[1]),Math.abs(d)>Math.abs(I)+Math.abs(C)?(i.set(o+1,x-1,(-p-h*i.get(o,x-1)+C*i.get(o,x))/d),i.set(o+1,x,(-m-h*i.get(o,x)-C*i.get(o,x-1))/d)):(b=K(-T-f*i.get(o,x-1),-k-f*i.get(o,x),I,C),i.set(o+1,x-1,b[0]),i.set(o+1,x,b[1]))),c=Math.max(Math.abs(i.get(o,x-1)),Math.abs(i.get(o,x))),S*c*c>1)for(a=o;a<=x;a++)i.set(a,x-1,i.get(a,x-1)/c),i.set(a,x,i.get(a,x)/c)}for(o=0;o<t;o++)if(o<w||o>_)for(a=o;a<t;a++)r.set(o,a,i.get(o,a));for(a=t-1;a>=w;a--)for(o=w;o<=_;o++){for(I=0,s=w;s<=Math.min(a,_);s++)I+=r.get(o,s)*i.get(s,a);r.set(o,a,I)}}(o,u,s,a,t)}this.n=o,this.e=u,this.d=s,this.V=a}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let t,e,n=this.n,r=this.e,i=this.d,o=new _(n,n);for(t=0;t<n;t++){for(e=0;e<n;e++)o.set(t,e,0);o.set(t,t,i[t]),r[t]>0?o.set(t,t+1,r[t]):r[t]<0&&o.set(t,t-1,r[t])}return o}}function K(t,e,n,r){let i,o;return Math.abs(n)>Math.abs(r)?(i=r/n,o=n+i*r,[(t+i*e)/o,(e-i*t)/o]):(i=n/r,o=r+i*n,[(i*t+e)/o,(i*e-t)/o])}class Z{constructor(t){if(!(t=L.checkMatrix(t)).isSymmetric())throw new Error("Matrix is not symmetric");let e,n,r,i=t,o=i.rows,a=new _(o,o),s=!0;for(n=0;n<o;n++){let t=0;for(r=0;r<n;r++){let o=0;for(e=0;e<r;e++)o+=a.get(r,e)*a.get(n,e);o=(i.get(n,r)-o)/a.get(r,r),a.set(n,r,o),t+=o*o}for(t=i.get(n,n)-t,s&=t>0,a.set(n,n,Math.sqrt(Math.max(t,0))),r=n+1;r<o;r++)a.set(n,r,0)}this.L=a,this.positiveDefinite=Boolean(s)}isPositiveDefinite(){return this.positiveDefinite}solve(t){t=L.checkMatrix(t);let e=this.L,n=e.rows;if(t.rows!==n)throw new Error("Matrix dimensions do not match");if(!1===this.isPositiveDefinite())throw new Error("Matrix is not positive definite");let r,i,o,a=t.columns,s=t.clone();for(o=0;o<n;o++)for(i=0;i<a;i++){for(r=0;r<o;r++)s.set(o,i,s.get(o,i)-s.get(r,i)*e.get(o,r));s.set(o,i,s.get(o,i)/e.get(o,o))}for(o=n-1;o>=0;o--)for(i=0;i<a;i++){for(r=o+1;r<n;r++)s.set(o,i,s.get(o,i)-s.get(r,i)*e.get(r,o));s.set(o,i,s.get(o,i)/e.get(o,o))}return s}get lowerTriangularMatrix(){return this.L}}class Q{constructor(t,e={}){t=L.checkMatrix(t);let{Y:n}=e;const{scaleScores:r=!1,maxIterations:i=1e3,terminationCriteria:o=1e-10}=e;let a;if(n){if(n=Array.isArray(n)&&"number"==typeof n[0]?_.columnVector(n):L.checkMatrix(n),!n.isColumnVector()||n.rows!==t.rows)throw new Error("Y must be a column vector of length X.rows");a=n}else a=t.getColumnVector(0);let s,u,l,c,h=1;for(let e=0;e<i&&h>o;e++)l=t.transpose().mmul(a).div(a.transpose().mmul(a).get(0,0)),l=l.div(l.norm()),s=t.mmul(l).div(l.transpose().mmul(l).get(0,0)),e>0&&(h=s.clone().sub(c).pow(2).sum()),c=s.clone(),n?(u=n.transpose().mmul(s).div(s.transpose().mmul(s).get(0,0)),u=u.div(u.norm()),a=n.mmul(u).div(u.transpose().mmul(u).get(0,0))):a=s;if(n){let e=t.transpose().mmul(s).div(s.transpose().mmul(s).get(0,0));e=e.div(e.norm());let r=t.clone().sub(s.clone().mmul(e.transpose())),i=a.transpose().mmul(s).div(s.transpose().mmul(s).get(0,0)),o=n.clone().sub(s.clone().mulS(i.get(0,0)).mmul(u.transpose()));this.t=s,this.p=e.transpose(),this.w=l.transpose(),this.q=u,this.u=a,this.s=s.transpose().mmul(s),this.xResidual=r,this.yResidual=o,this.betas=i}else this.w=l.transpose(),this.s=s.transpose().mmul(s).sqrt(),this.t=r?s.clone().div(this.s.get(0,0)):s,this.xResidual=t.sub(s.mmul(l.transpose()))}}},47114:(t,e,n)=>{"use strict";var r=n(38274);function i(t,e,n){var i=[0,0,0,0,0,0,0,0,0];return r.mat3.fromTranslation(i,n),r.mat3.multiply(t,i,e)}function o(t,e,n){var i=[0,0,0,0,0,0,0,0,0];return r.mat3.fromRotation(i,n),r.mat3.multiply(t,i,e)}function a(t,e,n){var i=[0,0,0,0,0,0,0,0,0];return r.mat3.fromScaling(i,n),r.mat3.multiply(t,i,e)}function s(t,e){return t[0]*e[1]-e[0]*t[1]}e.pd=function(t,e){for(var n,s,u,l=t?[].concat(t):[1,0,0,0,1,0,0,0,1],c=0,h=e.length;c<h;c++){var d=e[c];switch(d[0]){case"t":i(l,l,[d[1],d[2]]);break;case"s":a(l,l,[d[1],d[2]]);break;case"r":o(l,l,d[1]);break;case"m":n=l,s=l,u=d[1],r.mat3.multiply(n,u,s)}}return l}},24425:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Cache:()=>Ce,assign:()=>Yt,augment:()=>qt,clamp:()=>et,clearAnimationFrame:()=>Wt,clone:()=>Kt,contains:()=>i,debounce:()=>Zt,deepMix:()=>te,difference:()=>a,each:()=>f,endsWith:()=>H,every:()=>G,extend:()=>ee,filter:()=>o,find:()=>y,findIndex:()=>b,firstValue:()=>x,fixedBase:()=>nt,flatten:()=>w,flattenDeep:()=>S,forIn:()=>xt,get:()=>he,getEllipsisText:()=>Me,getRange:()=>M,getType:()=>Pt,getWrapBehavior:()=>K,group:()=>$,groupBy:()=>Y,groupToMap:()=>q,has:()=>wt,hasKey:()=>_t,hasValue:()=>Et,head:()=>U,identity:()=>we,includes:()=>i,indexOf:()=>ne,isArguments:()=>Ot,isArray:()=>h,isArrayLike:()=>r,isBoolean:()=>Lt,isDate:()=>Rt,isDecimal:()=>it,isElement:()=>Ht,isEmpty:()=>ie,isEqual:()=>ae,isEqualWith:()=>se,isError:()=>Dt,isEven:()=>ot,isFinite:()=>zt,isFunction:()=>l,isInteger:()=>at,isMatch:()=>m,isNegative:()=>st,isNil:()=>c,isNull:()=>Ft,isNumber:()=>rt,isNumberEqual:()=>lt,isObject:()=>d,isObjectLike:()=>g,isOdd:()=>ct,isPlainObject:()=>v,isPositive:()=>ht,isPrototype:()=>Ut,isRegExp:()=>jt,isString:()=>R,isType:()=>u,isUndefined:()=>Vt,keys:()=>p,last:()=>j,lowerCase:()=>Mt,lowerFirst:()=>Ct,map:()=>ue,mapValues:()=>ce,max:()=>E,maxBy:()=>dt,measureTextWidth:()=>Ae,memoize:()=>Qt,min:()=>A,minBy:()=>ft,mix:()=>Yt,mod:()=>pt,noop:()=>xe,number2color:()=>J,omit:()=>me,parseRadius:()=>tt,pick:()=>pe,pull:()=>I,pullAt:()=>P,reduce:()=>O,remove:()=>L,requestAnimationFrame:()=>Gt,set:()=>de,size:()=>_e,some:()=>W,sortBy:()=>D,startsWith:()=>V,substitute:()=>Tt,throttle:()=>ge,toArray:()=>ve,toDegree:()=>gt,toInteger:()=>vt,toRadian:()=>bt,toString:()=>At,union:()=>F,uniq:()=>z,uniqueId:()=>be,upperCase:()=>kt,upperFirst:()=>It,values:()=>St,valuesOfKey:()=>B,wrapBehavior:()=>Z});const r=function(t){return null!==t&&"function"!=typeof t&&isFinite(t.length)};const i=function(t,e){return!!r(t)&&t.indexOf(e)>-1};const o=function(t,e){if(!r(t))return t;for(var n=[],i=0;i<t.length;i++){var o=t[i];e(o,i)&&n.push(o)}return n};const a=function(t,e){return void 0===e&&(e=[]),o(t,(function(t){return!i(e,t)}))};var s={}.toString;const u=function(t,e){return s.call(t)==="[object "+e+"]"},l=function(t){return u(t,"Function")};const c=function(t){return null==t},h=function(t){return Array.isArray?Array.isArray(t):u(t,"Array")},d=function(t){var e=typeof t;return null!==t&&"object"===e||"function"===e};const f=function(t,e){if(t)if(h(t))for(var n=0,r=t.length;n<r&&!1!==e(t[n],n);n++);else if(d(t))for(var i in t)if(t.hasOwnProperty(i)&&!1===e(t[i],i))break};const p=Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];return f(t,(function(n,r){l(t)&&"prototype"===r||e.push(r)})),e};const m=function(t,e){var n=p(e),r=n.length;if(c(t))return!r;for(var i=0;i<r;i+=1){var o=n[i];if(e[o]!==t[o]||!(o in t))return!1}return!0};const g=function(t){return"object"==typeof t&&null!==t};const v=function(t){if(!g(t)||!u(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e};const y=function(t,e){if(!h(t))return null;var n;if(l(e)&&(n=e),v(e)&&(n=function(t){return m(t,e)}),n)for(var r=0;r<t.length;r+=1)if(n(t[r]))return t[r];return null};const b=function(t,e,n){void 0===n&&(n=0);for(var r=n;r<t.length;r++)if(e(t[r],r))return r;return-1};const x=function(t,e){for(var n=null,r=0;r<t.length;r++){var i=t[r][e];if(!c(i)){n=h(i)?i[0]:i;break}}return n};const w=function(t){if(!h(t))return[];for(var e=[],n=0;n<t.length;n++)e=e.concat(t[n]);return e};var _=function(t,e){if(void 0===e&&(e=[]),h(t))for(var n=0;n<t.length;n+=1)_(t[n],e);else e.push(t);return e};const S=_,E=function(t){if(h(t))return t.reduce((function(t,e){return Math.max(t,e)}),t[0])},A=function(t){if(h(t))return t.reduce((function(t,e){return Math.min(t,e)}),t[0])};const M=function(t){var e=t.filter((function(t){return!isNaN(t)}));if(!e.length)return{min:0,max:0};if(h(t[0])){for(var n=[],r=0;r<t.length;r++)n=n.concat(t[r]);e=n}var i=E(e);return{min:A(e),max:i}};var C=Array.prototype,T=C.splice,k=C.indexOf;const I=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r++)for(var i=e[r],o=-1;(o=k.call(t,i))>-1;)T.call(t,o,1);return t};var N=Array.prototype.splice;const P=function(t,e){if(!r(t))return[];for(var n=t?e.length:0,i=n-1;n--;){var o=void 0,a=e[n];n!==i&&a===o||(o=a,N.call(t,a,1))}return t};const O=function(t,e,n){if(!h(t)&&!v(t))return t;var r=n;return f(t,(function(t,n){r=e(r,t,n)})),r};const L=function(t,e){var n=[];if(!r(t))return n;for(var i=-1,o=[],a=t.length;++i<a;){var s=t[i];e(s,i,t)&&(n.push(s),o.push(i))}return P(t,o),n},R=function(t){return u(t,"String")};const D=function(t,e){var n;if(l(e))n=function(t,n){return e(t)-e(n)};else{var r=[];R(e)?r.push(e):h(e)&&(r=e),n=function(t,e){for(var n=0;n<r.length;n+=1){var i=r[n];if(t[i]>e[i])return 1;if(t[i]<e[i])return-1}return 0}}return t.sort(n),t};function z(t,e){void 0===e&&(e=new Map);var n=[];if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++){var o=t[r];e.has(o)||(n.push(o),e.set(o,!0))}return n}const F=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return z([].concat.apply([],t))},B=function(t,e){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i][e];if(!c(o)){h(o)||(o=[o]);for(var a=0;a<o.length;a++){var s=o[a];r[s]||(n.push(s),r[s]=!0)}}}return n};function U(t){if(r(t))return t[0]}function j(t){if(r(t)){return t[t.length-1]}}const V=function(t,e){return!(!h(t)&&!R(t))&&t[0]===e};const H=function(t,e){return!(!h(t)&&!R(t))&&t[t.length-1]===e};const G=function(t,e){for(var n=0;n<t.length;n++)if(!e(t[n],n))return!1;return!0};const W=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n))return!0;return!1};var X=Object.prototype.hasOwnProperty;const Y=function(t,e){if(!e||!h(t))return{};for(var n,r={},i=l(e)?e:function(t){return t[e]},o=0;o<t.length;o++){var a=t[o];n=i(a),X.call(r,n)?r[n].push(a):r[n]=[a]}return r};function q(t,e){if(!e)return{0:t};if(!l(e)){var n=h(e)?e:e.replace(/\s+/g,"").split("*");e=function(t){for(var e="_",r=0,i=n.length;r<i;r++)e+=t[n[r]]&&t[n[r]].toString();return e}}return Y(t,e)}const $=function(t,e){if(!e)return[t];var n=q(t,e),r=[];for(var i in n)r.push(n[i]);return r};const K=function(t,e){return t["_wrap_"+e]};const Z=function(t,e){if(t["_wrap_"+e])return t["_wrap_"+e];var n=function(n){t[e](n)};return t["_wrap_"+e]=n,n};var Q={};const J=function(t){var e=Q[t];if(!e){for(var n=t.toString(16),r=n.length;r<6;r++)n="0"+n;e="#"+n,Q[t]=e}return e};const tt=function(t){var e=0,n=0,r=0,i=0;return h(t)?1===t.length?e=n=r=i=t[0]:2===t.length?(e=r=t[0],n=i=t[1]):3===t.length?(e=t[0],n=i=t[1],r=t[2]):(e=t[0],n=t[1],r=t[2],i=t[3]):e=n=r=i=t,{r1:e,r2:n,r3:r,r4:i}};const et=function(t,e,n){return t<e?e:t>n?n:t};const nt=function(t,e){var n=e.toString(),r=n.indexOf(".");if(-1===r)return Math.round(t);var i=n.substr(r+1).length;return i>20&&(i=20),parseFloat(t.toFixed(i))};const rt=function(t){return u(t,"Number")};const it=function(t){return rt(t)&&t%1!=0};const ot=function(t){return rt(t)&&t%2==0};const at=Number.isInteger?Number.isInteger:function(t){return rt(t)&&t%1==0};const st=function(t){return rt(t)&&t<0};var ut=1e-5;function lt(t,e,n){return void 0===n&&(n=ut),Math.abs(t-e)<n}const ct=function(t){return rt(t)&&t%2!=0};const ht=function(t){return rt(t)&&t>0},dt=function(t,e){if(h(t)){for(var n,r=-1/0,i=0;i<t.length;i++){var o=t[i],a=l(e)?e(o):o[e];a>r&&(n=o,r=a)}return n}},ft=function(t,e){if(h(t)){for(var n,r=1/0,i=0;i<t.length;i++){var o=t[i],a=l(e)?e(o):o[e];a<r&&(n=o,r=a)}return n}};const pt=function(t,e){return(t%e+e)%e};var mt=180/Math.PI;const gt=function(t){return mt*t},vt=parseInt;var yt=Math.PI/180;const bt=function(t){return yt*t},xt=f,wt=function(t,e){return t.hasOwnProperty(e)},_t=wt;const St=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return f(t,(function(n,r){l(t)&&"prototype"===r||e.push(n)})),e},Et=function(t,e){return i(St(t),e)},At=function(t){return c(t)?"":t.toString()};const Mt=function(t){return At(t).toLowerCase()};const Ct=function(t){var e=At(t);return e.charAt(0).toLowerCase()+e.substring(1)};const Tt=function(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,(function(t,n){return"\\"===t.charAt(0)?t.slice(1):void 0===e[n]?"":e[n]})):t};const kt=function(t){return At(t).toUpperCase()};const It=function(t){var e=At(t);return e.charAt(0).toUpperCase()+e.substring(1)};var Nt={}.toString;const Pt=function(t){return Nt.call(t).replace(/^\[object /,"").replace(/]$/,"")};const Ot=function(t){return u(t,"Arguments")};const Lt=function(t){return u(t,"Boolean")};const Rt=function(t){return u(t,"Date")};const Dt=function(t){return u(t,"Error")};function zt(t){return rt(t)&&isFinite(t)}const Ft=function(t){return null===t};var Bt=Object.prototype;const Ut=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Bt)};const jt=function(t){return u(t,"RegExp")};const Vt=function(t){return void 0===t};const Ht=function(t){return t instanceof Element||t instanceof HTMLDocument};function Gt(t){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)})(t)}function Wt(t){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(t)}function Xt(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}function Yt(t,e,n,r){return e&&Xt(t,e),n&&Xt(t,n),r&&Xt(t,r),t}const qt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t[0],r=1;r<t.length;r++){var i=t[r];l(i)&&(i=i.prototype),Yt(n.prototype,i)}};var $t=function(t){if("object"!=typeof t||null===t)return t;var e;if(h(t)){e=[];for(var n=0,r=t.length;n<r;n++)"object"==typeof t[n]&&null!=t[n]?e[n]=$t(t[n]):e[n]=t[n]}else for(var i in e={},t)"object"==typeof t[i]&&null!=t[i]?e[i]=$t(t[i]):e[i]=t[i];return e};const Kt=$t;const Zt=function(t,e,n){var r;return function(){var i=this,o=arguments,a=n&&!r;clearTimeout(r),r=setTimeout((function(){r=null,n||t.apply(i,o)}),e),a&&t.apply(i,o)}},Qt=function(t,e){if(!l(t))throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=e?e.apply(this,r):r[0],a=n.cache;if(a.has(o))return a.get(o);var s=t.apply(this,r);return a.set(o,s),s};return n.cache=new Map,n};function Jt(t,e,n,r){for(var i in n=n||0,r=r||5,e)if(e.hasOwnProperty(i)){var o=e[i];null!==o&&v(o)?(v(t[i])||(t[i]={}),n<r?Jt(t[i],o,n+1,r):t[i]=e[i]):h(o)?(t[i]=[],t[i]=t[i].concat(o)):void 0!==o&&(t[i]=o)}}const te=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)Jt(t,e[r]);return t};const ee=function(t,e,n,r){l(e)||(n=e,e=t,t=function(){});var i=Object.create?function(t,e){return Object.create(t,{constructor:{value:e}})}:function(t,e){function n(){}n.prototype=t;var r=new n;return r.constructor=e,r},o=i(e.prototype,t);return t.prototype=Yt(o,t.prototype),t.superclass=i(e.prototype,e),Yt(o,n),Yt(t,r),t};const ne=function(t,e){if(!r(t))return-1;var n=Array.prototype.indexOf;if(n)return n.call(t,e);for(var i=-1,o=0;o<t.length;o++)if(t[o]===e){i=o;break}return i};var re=Object.prototype.hasOwnProperty;const ie=function(t){if(c(t))return!0;if(r(t))return!t.length;var e=Pt(t);if("Map"===e||"Set"===e)return!t.size;if(Ut(t))return!Object.keys(t).length;for(var n in t)if(re.call(t,n))return!1;return!0};var oe=function(t,e){if(t===e)return!0;if(!t||!e)return!1;if(R(t)||R(e))return!1;if(r(t)||r(e)){if(t.length!==e.length)return!1;for(var n=!0,i=0;i<t.length&&(n=oe(t[i],e[i]));i++);return n}if(g(t)||g(e)){var o=Object.keys(t),a=Object.keys(e);if(o.length!==a.length)return!1;for(n=!0,i=0;i<o.length&&(n=oe(t[o[i]],e[o[i]]));i++);return n}return!1};const ae=oe,se=function(t,e,n){return l(n)?!!n(t,e):ae(t,e)};const ue=function(t,e){if(!r(t))return t;for(var n=[],i=0;i<t.length;i++){var o=t[i];n.push(e(o,i))}return n};var le=function(t){return t};const ce=function(t,e){void 0===e&&(e=le);var n={};return d(t)&&!c(t)&&Object.keys(t).forEach((function(r){n[r]=e(t[r],r)})),n},he=function(t,e,n){for(var r=0,i=R(e)?e.split("."):e;t&&r<i.length;)t=t[i[r++]];return void 0===t||r<i.length?n:t},de=function(t,e,n){var r=t,i=R(e)?e.split("."):e;return i.forEach((function(t,e){e<i.length-1?(d(r[t])||(r[t]=rt(i[e+1])?[]:{}),r=r[t]):r[t]=n})),t};var fe=Object.prototype.hasOwnProperty;const pe=function(t,e){if(null===t||!v(t))return{};var n={};return f(e,(function(e){fe.call(t,e)&&(n[e]=t[e])})),n},me=function(t,e){return O(t,(function(t,n,r){return e.includes(r)||(t[r]=n),t}),{})},ge=function(t,e,n){var r,i,o,a,s=0;n||(n={});var u=function(){s=!1===n.leading?0:Date.now(),r=null,a=t.apply(i,o),r||(i=o=null)},l=function(){var l=Date.now();s||!1!==n.leading||(s=l);var c=e-(l-s);return i=this,o=arguments,c<=0||c>e?(r&&(clearTimeout(r),r=null),s=l,a=t.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(u,c)),a};return l.cancel=function(){clearTimeout(r),s=0,r=i=o=null},l},ve=function(t){return r(t)?Array.prototype.slice.call(t):[]};var ye={};const be=function(t){return ye[t=t||"g"]?ye[t]+=1:ye[t]=1,t+ye[t]},xe=function(){},we=function(t){return t};function _e(t){return c(t)?0:r(t)?t.length:Object.keys(t).length}var Se,Ee=n(31635);const Ae=Qt((function(t,e){void 0===e&&(e={});var n=e.fontSize,r=e.fontFamily,i=e.fontWeight,o=e.fontStyle,a=e.fontVariant;return Se||(Se=document.createElement("canvas").getContext("2d")),Se.font=[o,a,i,n+"px",r].join(" "),Se.measureText(R(t)?t:"").width}),(function(t,e){return void 0===e&&(e={}),(0,Ee.__spreadArrays)([t],St(e)).join("")})),Me=function(t,e,n,r){void 0===r&&(r="...");var i,o,a=Ae(r,n),s=R(t)?t:At(t),u=e,l=[];if(Ae(t,n)<=e)return t;for(;i=s.substr(0,16),!((o=Ae(i,n))+a>u&&o>u);)if(l.push(i),u-=o,!(s=s.substr(16)))return l.join("");for(;i=s.substr(0,1),!((o=Ae(i,n))+a>u);)if(l.push(i),u-=o,!(s=s.substr(1)))return l.join("");return""+l.join("")+r};const Ce=function(){function t(){this.map={}}return t.prototype.has=function(t){return void 0!==this.map[t]},t.prototype.get=function(t,e){var n=this.map[t];return void 0===n?e:n},t.prototype.set=function(t,e){this.map[t]=e},t.prototype.clear=function(){this.map={}},t.prototype.delete=function(t){delete this.map[t]},t.prototype.size=function(){return Object.keys(this.map).length},t}()},62456:(t,e,n)=>{"use strict";n.d(e,{H:()=>h,K6:()=>o,Me:()=>l,Ob:()=>c,YL:()=>s,_:()=>i,g8:()=>p,n6:()=>f,oS:()=>m,wE:()=>u});var r=n(89244);function i(t,e,n){return{r:255*(0,r.Cg)(t,255),g:255*(0,r.Cg)(e,255),b:255*(0,r.Cg)(n,255)}}function o(t,e,n){t=(0,r.Cg)(t,255),e=(0,r.Cg)(e,255),n=(0,r.Cg)(n,255);var i=Math.max(t,e,n),o=Math.min(t,e,n),a=0,s=0,u=(i+o)/2;if(i===o)s=0,a=0;else{var l=i-o;switch(s=u>.5?l/(2-i-o):l/(i+o),i){case t:a=(e-n)/l+(e<n?6:0);break;case e:a=(n-t)/l+2;break;case n:a=(t-e)/l+4}a/=6}return{h:a,s,l:u}}function a(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*n*(e-t):n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function s(t,e,n){var i,o,s;if(t=(0,r.Cg)(t,360),e=(0,r.Cg)(e,100),n=(0,r.Cg)(n,100),0===e)o=n,s=n,i=n;else{var u=n<.5?n*(1+e):n+e-n*e,l=2*n-u;i=a(l,u,t+1/3),o=a(l,u,t),s=a(l,u,t-1/3)}return{r:255*i,g:255*o,b:255*s}}function u(t,e,n){t=(0,r.Cg)(t,255),e=(0,r.Cg)(e,255),n=(0,r.Cg)(n,255);var i=Math.max(t,e,n),o=Math.min(t,e,n),a=0,s=i,u=i-o,l=0===i?0:u/i;if(i===o)a=0;else{switch(i){case t:a=(e-n)/u+(e<n?6:0);break;case e:a=(n-t)/u+2;break;case n:a=(t-e)/u+4}a/=6}return{h:a,s:l,v:s}}function l(t,e,n){t=6*(0,r.Cg)(t,360),e=(0,r.Cg)(e,100),n=(0,r.Cg)(n,100);var i=Math.floor(t),o=t-i,a=n*(1-e),s=n*(1-o*e),u=n*(1-(1-o)*e),l=i%6;return{r:255*[n,s,a,a,u,n][l],g:255*[u,n,n,s,a,a][l],b:255*[a,a,u,n,n,s][l]}}function c(t,e,n,i){var o=[(0,r.wl)(Math.round(t).toString(16)),(0,r.wl)(Math.round(e).toString(16)),(0,r.wl)(Math.round(n).toString(16))];return i&&o[0].startsWith(o[0].charAt(1))&&o[1].startsWith(o[1].charAt(1))&&o[2].startsWith(o[2].charAt(1))?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function h(t,e,n,i,o){var a=[(0,r.wl)(Math.round(t).toString(16)),(0,r.wl)(Math.round(e).toString(16)),(0,r.wl)(Math.round(n).toString(16)),(0,r.wl)(d(i))];return o&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))&&a[3].startsWith(a[3].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function d(t){return Math.round(255*parseFloat(t)).toString(16)}function f(t){return p(t)/255}function p(t){return parseInt(t,16)}function m(t){return{r:t>>16,g:(65280&t)>>8,b:255&t}}},42434:(t,e,n)=>{"use strict";n.d(e,{D:()=>r});var r={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}},76250:(t,e,n)=>{"use strict";n.d(e,{RO:()=>a});var r=n(62456),i=n(42434),o=n(89244);function a(t){var e={r:0,g:0,b:0},n=1,a=null,s=null,u=null,l=!1,d=!1;return"string"==typeof t&&(t=function(t){if(t=t.trim().toLowerCase(),0===t.length)return!1;var e=!1;if(i.D[t])t=i.D[t],e=!0;else if("transparent"===t)return{r:0,g:0,b:0,a:0,format:"name"};var n=c.rgb.exec(t);if(n)return{r:n[1],g:n[2],b:n[3]};if(n=c.rgba.exec(t),n)return{r:n[1],g:n[2],b:n[3],a:n[4]};if(n=c.hsl.exec(t),n)return{h:n[1],s:n[2],l:n[3]};if(n=c.hsla.exec(t),n)return{h:n[1],s:n[2],l:n[3],a:n[4]};if(n=c.hsv.exec(t),n)return{h:n[1],s:n[2],v:n[3]};if(n=c.hsva.exec(t),n)return{h:n[1],s:n[2],v:n[3],a:n[4]};if(n=c.hex8.exec(t),n)return{r:(0,r.g8)(n[1]),g:(0,r.g8)(n[2]),b:(0,r.g8)(n[3]),a:(0,r.n6)(n[4]),format:e?"name":"hex8"};if(n=c.hex6.exec(t),n)return{r:(0,r.g8)(n[1]),g:(0,r.g8)(n[2]),b:(0,r.g8)(n[3]),format:e?"name":"hex"};if(n=c.hex4.exec(t),n)return{r:(0,r.g8)(n[1]+n[1]),g:(0,r.g8)(n[2]+n[2]),b:(0,r.g8)(n[3]+n[3]),a:(0,r.n6)(n[4]+n[4]),format:e?"name":"hex8"};if(n=c.hex3.exec(t),n)return{r:(0,r.g8)(n[1]+n[1]),g:(0,r.g8)(n[2]+n[2]),b:(0,r.g8)(n[3]+n[3]),format:e?"name":"hex"};return!1}(t)),"object"==typeof t&&(h(t.r)&&h(t.g)&&h(t.b)?(e=(0,r._)(t.r,t.g,t.b),l=!0,d="%"===String(t.r).substr(-1)?"prgb":"rgb"):h(t.h)&&h(t.s)&&h(t.v)?(a=(0,o.Px)(t.s),s=(0,o.Px)(t.v),e=(0,r.Me)(t.h,a,s),l=!0,d="hsv"):h(t.h)&&h(t.s)&&h(t.l)&&(a=(0,o.Px)(t.s),u=(0,o.Px)(t.l),e=(0,r.YL)(t.h,a,u),l=!0,d="hsl"),Object.prototype.hasOwnProperty.call(t,"a")&&(n=t.a)),n=(0,o.TV)(n),{ok:l,format:t.format||d,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n}}var s="(?:".concat("[-\\+]?\\d*\\.\\d+%?",")|(?:").concat("[-\\+]?\\d+%?",")"),u="[\\s|\\(]+(".concat(s,")[,|\\s]+(").concat(s,")[,|\\s]+(").concat(s,")\\s*\\)?"),l="[\\s|\\(]+(".concat(s,")[,|\\s]+(").concat(s,")[,|\\s]+(").concat(s,")[,|\\s]+(").concat(s,")\\s*\\)?"),c={CSS_UNIT:new RegExp(s),rgb:new RegExp("rgb"+u),rgba:new RegExp("rgba"+l),hsl:new RegExp("hsl"+u),hsla:new RegExp("hsla"+l),hsv:new RegExp("hsv"+u),hsva:new RegExp("hsva"+l),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function h(t){return Boolean(c.CSS_UNIT.exec(String(t)))}},24978:(t,e,n)=>{"use strict";n.d(e,{q:()=>s});var r=n(62456),i=n(42434),o=n(76250),a=n(89244),s=function(){function t(e,n){var i;if(void 0===e&&(e=""),void 0===n&&(n={}),e instanceof t)return e;"number"==typeof e&&(e=(0,r.oS)(e)),this.originalInput=e;var a=(0,o.RO)(e);this.originalInput=e,this.r=a.r,this.g=a.g,this.b=a.b,this.a=a.a,this.roundA=Math.round(100*this.a)/100,this.format=null!==(i=n.format)&&void 0!==i?i:a.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=a.ok}return t.prototype.isDark=function(){return this.getBrightness()<128},t.prototype.isLight=function(){return!this.isDark()},t.prototype.getBrightness=function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},t.prototype.getLuminance=function(){var t=this.toRgb(),e=t.r/255,n=t.g/255,r=t.b/255;return.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))},t.prototype.getAlpha=function(){return this.a},t.prototype.setAlpha=function(t){return this.a=(0,a.TV)(t),this.roundA=Math.round(100*this.a)/100,this},t.prototype.isMonochrome=function(){return 0===this.toHsl().s},t.prototype.toHsv=function(){var t=(0,r.wE)(this.r,this.g,this.b);return{h:360*t.h,s:t.s,v:t.v,a:this.a}},t.prototype.toHsvString=function(){var t=(0,r.wE)(this.r,this.g,this.b),e=Math.round(360*t.h),n=Math.round(100*t.s),i=Math.round(100*t.v);return 1===this.a?"hsv(".concat(e,", ").concat(n,"%, ").concat(i,"%)"):"hsva(".concat(e,", ").concat(n,"%, ").concat(i,"%, ").concat(this.roundA,")")},t.prototype.toHsl=function(){var t=(0,r.K6)(this.r,this.g,this.b);return{h:360*t.h,s:t.s,l:t.l,a:this.a}},t.prototype.toHslString=function(){var t=(0,r.K6)(this.r,this.g,this.b),e=Math.round(360*t.h),n=Math.round(100*t.s),i=Math.round(100*t.l);return 1===this.a?"hsl(".concat(e,", ").concat(n,"%, ").concat(i,"%)"):"hsla(".concat(e,", ").concat(n,"%, ").concat(i,"%, ").concat(this.roundA,")")},t.prototype.toHex=function(t){return void 0===t&&(t=!1),(0,r.Ob)(this.r,this.g,this.b,t)},t.prototype.toHexString=function(t){return void 0===t&&(t=!1),"#"+this.toHex(t)},t.prototype.toHex8=function(t){return void 0===t&&(t=!1),(0,r.H)(this.r,this.g,this.b,this.a,t)},t.prototype.toHex8String=function(t){return void 0===t&&(t=!1),"#"+this.toHex8(t)},t.prototype.toHexShortString=function(t){return void 0===t&&(t=!1),1===this.a?this.toHexString(t):this.toHex8String(t)},t.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},t.prototype.toRgbString=function(){var t=Math.round(this.r),e=Math.round(this.g),n=Math.round(this.b);return 1===this.a?"rgb(".concat(t,", ").concat(e,", ").concat(n,")"):"rgba(".concat(t,", ").concat(e,", ").concat(n,", ").concat(this.roundA,")")},t.prototype.toPercentageRgb=function(){var t=function(t){return"".concat(Math.round(100*(0,a.Cg)(t,255)),"%")};return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}},t.prototype.toPercentageRgbString=function(){var t=function(t){return Math.round(100*(0,a.Cg)(t,255))};return 1===this.a?"rgb(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%)"):"rgba(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%, ").concat(this.roundA,")")},t.prototype.toName=function(){if(0===this.a)return"transparent";if(this.a<1)return!1;for(var t="#"+(0,r.Ob)(this.r,this.g,this.b,!1),e=0,n=Object.entries(i.D);e<n.length;e++){var o=n[e],a=o[0];if(t===o[1])return a}return!1},t.prototype.toString=function(t){var e=Boolean(t);t=null!=t?t:this.format;var n=!1,r=this.a<1&&this.a>=0;return e||!r||!t.startsWith("hex")&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this.a?this.toName():this.toRgbString()},t.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},t.prototype.clone=function(){return new t(this.toString())},t.prototype.lighten=function(e){void 0===e&&(e=10);var n=this.toHsl();return n.l+=e/100,n.l=(0,a.J$)(n.l),new t(n)},t.prototype.brighten=function(e){void 0===e&&(e=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-e/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-e/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-e/100*255))),new t(n)},t.prototype.darken=function(e){void 0===e&&(e=10);var n=this.toHsl();return n.l-=e/100,n.l=(0,a.J$)(n.l),new t(n)},t.prototype.tint=function(t){return void 0===t&&(t=10),this.mix("white",t)},t.prototype.shade=function(t){return void 0===t&&(t=10),this.mix("black",t)},t.prototype.desaturate=function(e){void 0===e&&(e=10);var n=this.toHsl();return n.s-=e/100,n.s=(0,a.J$)(n.s),new t(n)},t.prototype.saturate=function(e){void 0===e&&(e=10);var n=this.toHsl();return n.s+=e/100,n.s=(0,a.J$)(n.s),new t(n)},t.prototype.greyscale=function(){return this.desaturate(100)},t.prototype.spin=function(e){var n=this.toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,new t(n)},t.prototype.mix=function(e,n){void 0===n&&(n=50);var r=this.toRgb(),i=new t(e).toRgb(),o=n/100;return new t({r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a})},t.prototype.analogous=function(e,n){void 0===e&&(e=6),void 0===n&&(n=30);var r=this.toHsl(),i=360/n,o=[this];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,o.push(new t(r));return o},t.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new t(e)},t.prototype.monochromatic=function(e){void 0===e&&(e=6);for(var n=this.toHsv(),r=n.h,i=n.s,o=n.v,a=[],s=1/e;e--;)a.push(new t({h:r,s:i,v:o})),o=(o+s)%1;return a},t.prototype.splitcomplement=function(){var e=this.toHsl(),n=e.h;return[this,new t({h:(n+72)%360,s:e.s,l:e.l}),new t({h:(n+216)%360,s:e.s,l:e.l})]},t.prototype.onBackground=function(e){var n=this.toRgb(),r=new t(e).toRgb(),i=n.a+r.a*(1-n.a);return new t({r:(n.r*n.a+r.r*r.a*(1-n.a))/i,g:(n.g*n.a+r.g*r.a*(1-n.a))/i,b:(n.b*n.a+r.b*r.a*(1-n.a))/i,a:i})},t.prototype.triad=function(){return this.polyad(3)},t.prototype.tetrad=function(){return this.polyad(4)},t.prototype.polyad=function(e){for(var n=this.toHsl(),r=n.h,i=[this],o=360/e,a=1;a<e;a++)i.push(new t({h:(r+a*o)%360,s:n.s,l:n.l}));return i},t.prototype.equals=function(e){return this.toRgbString()===new t(e).toRgbString()},t}()},89244:(t,e,n)=>{"use strict";function r(t,e){(function(t){return"string"==typeof t&&-1!==t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var n=function(t){return"string"==typeof t&&-1!==t.indexOf("%")}(t);return t=360===e?t:Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(String(t*e),10)/100),Math.abs(t-e)<1e-6?1:t=360===e?(t<0?t%e+e:t%e)/parseFloat(String(e)):t%e/parseFloat(String(e))}function i(t){return Math.min(1,Math.max(0,t))}function o(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function a(t){return t<=1?"".concat(100*Number(t),"%"):t}function s(t){return 1===t.length?"0"+t:String(t)}n.d(e,{Cg:()=>r,J$:()=>i,Px:()=>a,TV:()=>o,wl:()=>s})},33672:(t,e,n)=>{"use strict";n.d(e,{V1:()=>r});function r(t,e,n){if(void 0===n&&(n=Error),!t)throw new n(e)}},54819:(t,e,n)=>{"use strict";function r(t,e){var n=e&&e.cache?e.cache:c,r=e&&e.serializer?e.serializer:u;return(e&&e.strategy?e.strategy:s)(t,{cache:n,serializer:r})}function i(t,e,n,r){var i,o=null==(i=r)||"number"==typeof i||"boolean"==typeof i?r:n(r),a=e.get(o);return void 0===a&&(a=t.call(this,r),e.set(o,a)),a}function o(t,e,n){var r=Array.prototype.slice.call(arguments,3),i=n(r),o=e.get(i);return void 0===o&&(o=t.apply(this,r),e.set(i,o)),o}function a(t,e,n,r,i){return n.bind(e,t,r,i)}function s(t,e){return a(t,this,1===t.length?i:o,e.cache.create(),e.serializer)}n.d(e,{B:()=>r,W:()=>h});var u=function(){return JSON.stringify(arguments)};function l(){this.cache=Object.create(null)}l.prototype.get=function(t){return this.cache[t]},l.prototype.set=function(t,e){this.cache[t]=e};var c={create:function(){return new l}},h={variadic:function(t,e){return a(t,this,o,e.cache.create(),e.serializer)},monadic:function(t,e){return a(t,this,i,e.cache.create(),e.serializer)}}},78786:(t,e,n)=>{"use strict";n.d(e,{ZE:()=>i,Im:()=>u,tv:()=>c,Tu:()=>v,eW:()=>s,oF:()=>l,N1:()=>g,N6:()=>f,jA:()=>p,Jp:()=>d,xm:()=>m,Qh:()=>h,qg:()=>ot});var r,i,o,a=n(31635);function s(t){return t.type===i.literal}function u(t){return t.type===i.argument}function l(t){return t.type===i.number}function c(t){return t.type===i.date}function h(t){return t.type===i.time}function d(t){return t.type===i.select}function f(t){return t.type===i.plural}function p(t){return t.type===i.pound}function m(t){return t.type===i.tag}function g(t){return!(!t||"object"!=typeof t||t.type!==o.number)}function v(t){return!(!t||"object"!=typeof t||t.type!==o.dateTime)}!function(t){t[t.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",t[t.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",t[t.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",t[t.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",t[t.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",t[t.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",t[t.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",t[t.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",t[t.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",t[t.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",t[t.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",t[t.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",t[t.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",t[t.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",t[t.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",t[t.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",t[t.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",t[t.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",t[t.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",t[t.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",t[t.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",t[t.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",t[t.INVALID_TAG=23]="INVALID_TAG",t[t.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",t[t.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",t[t.UNCLOSED_TAG=27]="UNCLOSED_TAG"}(r||(r={})),function(t){t[t.literal=0]="literal",t[t.argument=1]="argument",t[t.number=2]="number",t[t.date=3]="date",t[t.time=4]="time",t[t.select=5]="select",t[t.plural=6]="plural",t[t.pound=7]="pound",t[t.tag=8]="tag"}(i||(i={})),function(t){t[t.number=0]="number",t[t.dateTime=1]="dateTime"}(o||(o={}));var y=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,b=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function x(t){var e={};return t.replace(b,(function(t){var n=t.length;switch(t[0]){case"G":e.era=4===n?"long":5===n?"narrow":"short";break;case"y":e.year=2===n?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":e.month=["numeric","2-digit","short","long","narrow"][n-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":e.day=["numeric","2-digit"][n-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":e.weekday=4===n?"long":5===n?"narrow":"short";break;case"e":if(n<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][n-4];break;case"c":if(n<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][n-4];break;case"a":e.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":e.hourCycle="h12",e.hour=["numeric","2-digit"][n-1];break;case"H":e.hourCycle="h23",e.hour=["numeric","2-digit"][n-1];break;case"K":e.hourCycle="h11",e.hour=["numeric","2-digit"][n-1];break;case"k":e.hourCycle="h24",e.hour=["numeric","2-digit"][n-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":e.minute=["numeric","2-digit"][n-1];break;case"s":e.second=["numeric","2-digit"][n-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":e.timeZoneName=n<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""})),e}var w=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;var _=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,S=/^(@+)?(\+|#+)?[rs]?$/g,E=/(\*)(0+)|(#+)(0+)|(0+)/g,A=/^(0+)$/;function M(t){var e={};return"r"===t[t.length-1]?e.roundingPriority="morePrecision":"s"===t[t.length-1]&&(e.roundingPriority="lessPrecision"),t.replace(S,(function(t,n,r){return"string"!=typeof r?(e.minimumSignificantDigits=n.length,e.maximumSignificantDigits=n.length):"+"===r?e.minimumSignificantDigits=n.length:"#"===n[0]?e.maximumSignificantDigits=n.length:(e.minimumSignificantDigits=n.length,e.maximumSignificantDigits=n.length+("string"==typeof r?r.length:0)),""})),e}function C(t){switch(t){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function T(t){var e;if("E"===t[0]&&"E"===t[1]?(e={notation:"engineering"},t=t.slice(2)):"E"===t[0]&&(e={notation:"scientific"},t=t.slice(1)),e){var n=t.slice(0,2);if("+!"===n?(e.signDisplay="always",t=t.slice(2)):"+?"===n&&(e.signDisplay="exceptZero",t=t.slice(2)),!A.test(t))throw new Error("Malformed concise eng/scientific notation");e.minimumIntegerDigits=t.length}return e}function k(t){var e=C(t);return e||{}}function I(t){for(var e={},n=0,r=t;n<r.length;n++){var i=r[n];switch(i.stem){case"percent":case"%":e.style="percent";continue;case"%x100":e.style="percent",e.scale=100;continue;case"currency":e.style="currency",e.currency=i.options[0];continue;case"group-off":case",_":e.useGrouping=!1;continue;case"precision-integer":case".":e.maximumFractionDigits=0;continue;case"measure-unit":case"unit":e.style="unit",e.unit=i.options[0].replace(/^(.*?)-/,"");continue;case"compact-short":case"K":e.notation="compact",e.compactDisplay="short";continue;case"compact-long":case"KK":e.notation="compact",e.compactDisplay="long";continue;case"scientific":e=(0,a.__assign)((0,a.__assign)((0,a.__assign)({},e),{notation:"scientific"}),i.options.reduce((function(t,e){return(0,a.__assign)((0,a.__assign)({},t),k(e))}),{}));continue;case"engineering":e=(0,a.__assign)((0,a.__assign)((0,a.__assign)({},e),{notation:"engineering"}),i.options.reduce((function(t,e){return(0,a.__assign)((0,a.__assign)({},t),k(e))}),{}));continue;case"notation-simple":e.notation="standard";continue;case"unit-width-narrow":e.currencyDisplay="narrowSymbol",e.unitDisplay="narrow";continue;case"unit-width-short":e.currencyDisplay="code",e.unitDisplay="short";continue;case"unit-width-full-name":e.currencyDisplay="name",e.unitDisplay="long";continue;case"unit-width-iso-code":e.currencyDisplay="symbol";continue;case"scale":e.scale=parseFloat(i.options[0]);continue;case"rounding-mode-floor":e.roundingMode="floor";continue;case"rounding-mode-ceiling":e.roundingMode="ceil";continue;case"rounding-mode-down":e.roundingMode="trunc";continue;case"rounding-mode-up":e.roundingMode="expand";continue;case"rounding-mode-half-even":e.roundingMode="halfEven";continue;case"rounding-mode-half-down":e.roundingMode="halfTrunc";continue;case"rounding-mode-half-up":e.roundingMode="halfExpand";continue;case"integer-width":if(i.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");i.options[0].replace(E,(function(t,n,r,i,o,a){if(n)e.minimumIntegerDigits=r.length;else{if(i&&o)throw new Error("We currently do not support maximum integer digits");if(a)throw new Error("We currently do not support exact integer digits")}return""}));continue}if(A.test(i.stem))e.minimumIntegerDigits=i.stem.length;else if(_.test(i.stem)){if(i.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");i.stem.replace(_,(function(t,n,r,i,o,a){return"*"===r?e.minimumFractionDigits=n.length:i&&"#"===i[0]?e.maximumFractionDigits=i.length:o&&a?(e.minimumFractionDigits=o.length,e.maximumFractionDigits=o.length+a.length):(e.minimumFractionDigits=n.length,e.maximumFractionDigits=n.length),""}));var o=i.options[0];"w"===o?e=(0,a.__assign)((0,a.__assign)({},e),{trailingZeroDisplay:"stripIfInteger"}):o&&(e=(0,a.__assign)((0,a.__assign)({},e),M(o)))}else if(S.test(i.stem))e=(0,a.__assign)((0,a.__assign)({},e),M(i.stem));else{var s=C(i.stem);s&&(e=(0,a.__assign)((0,a.__assign)({},e),s));var u=T(i.stem);u&&(e=(0,a.__assign)((0,a.__assign)({},e),u))}}return e}var N,P={"001":["H","h"],AC:["H","h","hb","hB"],AD:["H","hB"],AE:["h","hB","hb","H"],AF:["H","hb","hB","h"],AG:["h","hb","H","hB"],AI:["H","h","hb","hB"],AL:["h","H","hB"],AM:["H","hB"],AO:["H","hB"],AR:["H","h","hB","hb"],AS:["h","H"],AT:["H","hB"],AU:["h","hb","H","hB"],AW:["H","hB"],AX:["H"],AZ:["H","hB","h"],BA:["H","hB","h"],BB:["h","hb","H","hB"],BD:["h","hB","H"],BE:["H","hB"],BF:["H","hB"],BG:["H","hB","h"],BH:["h","hB","hb","H"],BI:["H","h"],BJ:["H","hB"],BL:["H","hB"],BM:["h","hb","H","hB"],BN:["hb","hB","h","H"],BO:["H","hB","h","hb"],BQ:["H"],BR:["H","hB"],BS:["h","hb","H","hB"],BT:["h","H"],BW:["H","h","hb","hB"],BY:["H","h"],BZ:["H","h","hb","hB"],CA:["h","hb","H","hB"],CC:["H","h","hb","hB"],CD:["hB","H"],CF:["H","h","hB"],CG:["H","hB"],CH:["H","hB","h"],CI:["H","hB"],CK:["H","h","hb","hB"],CL:["H","h","hB","hb"],CM:["H","h","hB"],CN:["H","hB","hb","h"],CO:["h","H","hB","hb"],CP:["H"],CR:["H","h","hB","hb"],CU:["H","h","hB","hb"],CV:["H","hB"],CW:["H","hB"],CX:["H","h","hb","hB"],CY:["h","H","hb","hB"],CZ:["H"],DE:["H","hB"],DG:["H","h","hb","hB"],DJ:["h","H"],DK:["H"],DM:["h","hb","H","hB"],DO:["h","H","hB","hb"],DZ:["h","hB","hb","H"],EA:["H","h","hB","hb"],EC:["H","hB","h","hb"],EE:["H","hB"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],ER:["h","H"],ES:["H","hB","h","hb"],ET:["hB","hb","h","H"],FI:["H"],FJ:["h","hb","H","hB"],FK:["H","h","hb","hB"],FM:["h","hb","H","hB"],FO:["H","h"],FR:["H","hB"],GA:["H","hB"],GB:["H","h","hb","hB"],GD:["h","hb","H","hB"],GE:["H","hB","h"],GF:["H","hB"],GG:["H","h","hb","hB"],GH:["h","H"],GI:["H","h","hb","hB"],GL:["H","h"],GM:["h","hb","H","hB"],GN:["H","hB"],GP:["H","hB"],GQ:["H","hB","h","hb"],GR:["h","H","hb","hB"],GT:["H","h","hB","hb"],GU:["h","hb","H","hB"],GW:["H","hB"],GY:["h","hb","H","hB"],HK:["h","hB","hb","H"],HN:["H","h","hB","hb"],HR:["H","hB"],HU:["H","h"],IC:["H","h","hB","hb"],ID:["H"],IE:["H","h","hb","hB"],IL:["H","hB"],IM:["H","h","hb","hB"],IN:["h","H"],IO:["H","h","hb","hB"],IQ:["h","hB","hb","H"],IR:["hB","H"],IS:["H"],IT:["H","hB"],JE:["H","h","hb","hB"],JM:["h","hb","H","hB"],JO:["h","hB","hb","H"],JP:["H","K","h"],KE:["hB","hb","H","h"],KG:["H","h","hB","hb"],KH:["hB","h","H","hb"],KI:["h","hb","H","hB"],KM:["H","h","hB","hb"],KN:["h","hb","H","hB"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],KW:["h","hB","hb","H"],KY:["h","hb","H","hB"],KZ:["H","hB"],LA:["H","hb","hB","h"],LB:["h","hB","hb","H"],LC:["h","hb","H","hB"],LI:["H","hB","h"],LK:["H","h","hB","hb"],LR:["h","hb","H","hB"],LS:["h","H"],LT:["H","h","hb","hB"],LU:["H","h","hB"],LV:["H","hB","hb","h"],LY:["h","hB","hb","H"],MA:["H","h","hB","hb"],MC:["H","hB"],MD:["H","hB"],ME:["H","hB","h"],MF:["H","hB"],MG:["H","h"],MH:["h","hb","H","hB"],MK:["H","h","hb","hB"],ML:["H"],MM:["hB","hb","H","h"],MN:["H","h","hb","hB"],MO:["h","hB","hb","H"],MP:["h","hb","H","hB"],MQ:["H","hB"],MR:["h","hB","hb","H"],MS:["H","h","hb","hB"],MT:["H","h"],MU:["H","h"],MV:["H","h"],MW:["h","hb","H","hB"],MX:["H","h","hB","hb"],MY:["hb","hB","h","H"],MZ:["H","hB"],NA:["h","H","hB","hb"],NC:["H","hB"],NE:["H"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NI:["H","h","hB","hb"],NL:["H","hB"],NO:["H","h"],NP:["H","h","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],NZ:["h","hb","H","hB"],OM:["h","hB","hb","H"],PA:["h","H","hB","hb"],PE:["H","hB","h","hb"],PF:["H","h","hB"],PG:["h","H"],PH:["h","hB","hb","H"],PK:["h","hB","H"],PL:["H","h"],PM:["H","hB"],PN:["H","h","hb","hB"],PR:["h","H","hB","hb"],PS:["h","hB","hb","H"],PT:["H","hB"],PW:["h","H"],PY:["H","h","hB","hb"],QA:["h","hB","hb","H"],RE:["H","hB"],RO:["H","hB"],RS:["H","hB","h"],RU:["H"],RW:["H","h"],SA:["h","hB","hb","H"],SB:["h","hb","H","hB"],SC:["H","h","hB"],SD:["h","hB","hb","H"],SE:["H"],SG:["h","hb","H","hB"],SH:["H","h","hb","hB"],SI:["H","hB"],SJ:["H"],SK:["H"],SL:["h","hb","H","hB"],SM:["H","h","hB"],SN:["H","h","hB"],SO:["h","H"],SR:["H","hB"],SS:["h","hb","H","hB"],ST:["H","hB"],SV:["H","h","hB","hb"],SX:["H","h","hb","hB"],SY:["h","hB","hb","H"],SZ:["h","hb","H","hB"],TA:["H","h","hb","hB"],TC:["h","hb","H","hB"],TD:["h","H","hB"],TF:["H","h","hB"],TG:["H","hB"],TH:["H","h"],TJ:["H","h"],TL:["H","hB","hb","h"],TM:["H","h"],TN:["h","hB","hb","H"],TO:["h","H"],TR:["H","hB"],TT:["h","hb","H","hB"],TW:["hB","hb","h","H"],TZ:["hB","hb","H","h"],UA:["H","hB","h"],UG:["hB","hb","H","h"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],UY:["H","h","hB","hb"],UZ:["H","hB","h"],VA:["H","h","hB"],VC:["h","hb","H","hB"],VE:["h","H","hB","hb"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],VN:["H","h"],VU:["h","H"],WF:["H","hB"],WS:["h","H"],XK:["H","hB","h"],YE:["h","hB","hb","H"],YT:["H","hB"],ZA:["H","h","hb","hB"],ZM:["h","hb","H","hB"],ZW:["H","h"],"af-ZA":["H","h","hB","hb"],"ar-001":["h","hB","hb","H"],"ca-ES":["H","h","hB"],"en-001":["h","hb","H","hB"],"es-BO":["H","h","hB","hb"],"es-BR":["H","h","hB","hb"],"es-EC":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"es-PE":["H","h","hB","hb"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"gu-IN":["hB","hb","h","H"],"hi-IN":["hB","h","H"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],"ta-IN":["hB","h","hb","H"],"te-IN":["hB","h","H"],"zu-ZA":["H","hB","hb","h"]};function O(t){var e=t.hourCycle;if(void 0===e&&t.hourCycles&&t.hourCycles.length&&(e=t.hourCycles[0]),e)switch(e){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var n,r=t.language;return"root"!==r&&(n=t.maximize().region),(P[n||""]||P[r||""]||P["".concat(r,"-001")]||P["001"])[0]}var L=new RegExp("^".concat(y.source,"*")),R=new RegExp("".concat(y.source,"*$"));function D(t,e){return{start:t,end:e}}var z=!!String.prototype.startsWith&&"_a".startsWith("a",1),F=!!String.fromCodePoint,B=!!Object.fromEntries,U=!!String.prototype.codePointAt,j=!!String.prototype.trimStart,V=!!String.prototype.trimEnd,H=!!Number.isSafeInteger?Number.isSafeInteger:function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t&&Math.abs(t)<=9007199254740991},G=!0;try{G="a"===(null===(N=Q("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu").exec("a"))||void 0===N?void 0:N[0])}catch(t){G=!1}var W,X=z?function(t,e,n){return t.startsWith(e,n)}:function(t,e,n){return t.slice(n,n+e.length)===e},Y=F?String.fromCodePoint:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n,r="",i=t.length,o=0;i>o;){if((n=t[o++])>1114111)throw RangeError(n+" is not a valid code point");r+=n<65536?String.fromCharCode(n):String.fromCharCode(55296+((n-=65536)>>10),n%1024+56320)}return r},q=B?Object.fromEntries:function(t){for(var e={},n=0,r=t;n<r.length;n++){var i=r[n],o=i[0],a=i[1];e[o]=a}return e},$=U?function(t,e){return t.codePointAt(e)}:function(t,e){var n=t.length;if(!(e<0||e>=n)){var r,i=t.charCodeAt(e);return i<55296||i>56319||e+1===n||(r=t.charCodeAt(e+1))<56320||r>57343?i:r-56320+(i-55296<<10)+65536}},K=j?function(t){return t.trimStart()}:function(t){return t.replace(L,"")},Z=V?function(t){return t.trimEnd()}:function(t){return t.replace(R,"")};function Q(t,e){return new RegExp(t,e)}if(G){var J=Q("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");W=function(t,e){var n;return J.lastIndex=e,null!==(n=J.exec(t)[1])&&void 0!==n?n:""}}else W=function(t,e){for(var n=[];;){var r=$(t,e);if(void 0===r||nt(r)||rt(r))break;n.push(r),e+=r>=65536?2:1}return Y.apply(void 0,n)};var tt=function(){function t(t,e){void 0===e&&(e={}),this.message=t,this.position={offset:0,line:1,column:1},this.ignoreTag=!!e.ignoreTag,this.locale=e.locale,this.requiresOtherClause=!!e.requiresOtherClause,this.shouldParseSkeletons=!!e.shouldParseSkeletons}return t.prototype.parse=function(){if(0!==this.offset())throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},t.prototype.parseMessage=function(t,e,n){for(var o=[];!this.isEOF();){var a=this.char();if(123===a){if((s=this.parseArgument(t,n)).err)return s;o.push(s.val)}else{if(125===a&&t>0)break;if(35!==a||"plural"!==e&&"selectordinal"!==e){if(60===a&&!this.ignoreTag&&47===this.peek()){if(n)break;return this.error(r.UNMATCHED_CLOSING_TAG,D(this.clonePosition(),this.clonePosition()))}if(60===a&&!this.ignoreTag&&et(this.peek()||0)){if((s=this.parseTag(t,e)).err)return s;o.push(s.val)}else{var s;if((s=this.parseLiteral(t,e)).err)return s;o.push(s.val)}}else{var u=this.clonePosition();this.bump(),o.push({type:i.pound,location:D(u,this.clonePosition())})}}}return{val:o,err:null}},t.prototype.parseTag=function(t,e){var n=this.clonePosition();this.bump();var o=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:i.literal,value:"<".concat(o,"/>"),location:D(n,this.clonePosition())},err:null};if(this.bumpIf(">")){var a=this.parseMessage(t+1,e,!0);if(a.err)return a;var s=a.val,u=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!et(this.char()))return this.error(r.INVALID_TAG,D(u,this.clonePosition()));var l=this.clonePosition();return o!==this.parseTagName()?this.error(r.UNMATCHED_CLOSING_TAG,D(l,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:i.tag,value:o,children:s,location:D(n,this.clonePosition())},err:null}:this.error(r.INVALID_TAG,D(u,this.clonePosition())))}return this.error(r.UNCLOSED_TAG,D(n,this.clonePosition()))}return this.error(r.INVALID_TAG,D(n,this.clonePosition()))},t.prototype.parseTagName=function(){var t,e=this.offset();for(this.bump();!this.isEOF()&&(45===(t=this.char())||46===t||t>=48&&t<=57||95===t||t>=97&&t<=122||t>=65&&t<=90||183==t||t>=192&&t<=214||t>=216&&t<=246||t>=248&&t<=893||t>=895&&t<=8191||t>=8204&&t<=8205||t>=8255&&t<=8256||t>=8304&&t<=8591||t>=11264&&t<=12271||t>=12289&&t<=55295||t>=63744&&t<=64975||t>=65008&&t<=65533||t>=65536&&t<=983039);)this.bump();return this.message.slice(e,this.offset())},t.prototype.parseLiteral=function(t,e){for(var n=this.clonePosition(),r="";;){var o=this.tryParseQuote(e);if(o)r+=o;else{var a=this.tryParseUnquoted(t,e);if(a)r+=a;else{var s=this.tryParseLeftAngleBracket();if(!s)break;r+=s}}}var u=D(n,this.clonePosition());return{val:{type:i.literal,value:r,location:u},err:null}},t.prototype.tryParseLeftAngleBracket=function(){return this.isEOF()||60!==this.char()||!this.ignoreTag&&(et(t=this.peek()||0)||47===t)?null:(this.bump(),"<");var t},t.prototype.tryParseQuote=function(t){if(this.isEOF()||39!==this.char())return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if("plural"===t||"selectordinal"===t)break;return null;default:return null}this.bump();var e=[this.char()];for(this.bump();!this.isEOF();){var n=this.char();if(39===n){if(39!==this.peek()){this.bump();break}e.push(39),this.bump()}else e.push(n);this.bump()}return Y.apply(void 0,e)},t.prototype.tryParseUnquoted=function(t,e){if(this.isEOF())return null;var n=this.char();return 60===n||123===n||35===n&&("plural"===e||"selectordinal"===e)||125===n&&t>0?null:(this.bump(),Y(n))},t.prototype.parseArgument=function(t,e){var n=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(r.EXPECT_ARGUMENT_CLOSING_BRACE,D(n,this.clonePosition()));if(125===this.char())return this.bump(),this.error(r.EMPTY_ARGUMENT,D(n,this.clonePosition()));var o=this.parseIdentifierIfPossible().value;if(!o)return this.error(r.MALFORMED_ARGUMENT,D(n,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(r.EXPECT_ARGUMENT_CLOSING_BRACE,D(n,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:i.argument,value:o,location:D(n,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(r.EXPECT_ARGUMENT_CLOSING_BRACE,D(n,this.clonePosition())):this.parseArgumentOptions(t,e,o,n);default:return this.error(r.MALFORMED_ARGUMENT,D(n,this.clonePosition()))}},t.prototype.parseIdentifierIfPossible=function(){var t=this.clonePosition(),e=this.offset(),n=W(this.message,e),r=e+n.length;return this.bumpTo(r),{value:n,location:D(t,this.clonePosition())}},t.prototype.parseArgumentOptions=function(t,e,n,s){var u,l=this.clonePosition(),c=this.parseIdentifierIfPossible().value,h=this.clonePosition();switch(c){case"":return this.error(r.EXPECT_ARGUMENT_TYPE,D(l,h));case"number":case"date":case"time":this.bumpSpace();var d=null;if(this.bumpIf(",")){this.bumpSpace();var f=this.clonePosition();if((_=this.parseSimpleArgStyleIfPossible()).err)return _;if(0===(v=Z(_.val)).length)return this.error(r.EXPECT_ARGUMENT_STYLE,D(this.clonePosition(),this.clonePosition()));d={style:v,styleLocation:D(f,this.clonePosition())}}if((S=this.tryParseArgumentClose(s)).err)return S;var p=D(s,this.clonePosition());if(d&&X(null==d?void 0:d.style,"::",0)){var m=K(d.style.slice(2));if("number"===c)return(_=this.parseNumberSkeletonFromString(m,d.styleLocation)).err?_:{val:{type:i.number,value:n,location:p,style:_.val},err:null};if(0===m.length)return this.error(r.EXPECT_DATE_TIME_SKELETON,p);var g=m;this.locale&&(g=function(t,e){for(var n="",r=0;r<t.length;r++){var i=t.charAt(r);if("j"===i){for(var o=0;r+1<t.length&&t.charAt(r+1)===i;)o++,r++;var a=1+(1&o),s=o<2?1:3+(o>>1),u=O(e);for("H"!=u&&"k"!=u||(s=0);s-- >0;)n+="a";for(;a-- >0;)n=u+n}else n+="J"===i?"H":i}return n}(m,this.locale));var v={type:o.dateTime,pattern:g,location:d.styleLocation,parsedOptions:this.shouldParseSkeletons?x(g):{}};return{val:{type:"date"===c?i.date:i.time,value:n,location:p,style:v},err:null}}return{val:{type:"number"===c?i.number:"date"===c?i.date:i.time,value:n,location:p,style:null!==(u=null==d?void 0:d.style)&&void 0!==u?u:null},err:null};case"plural":case"selectordinal":case"select":var y=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(r.EXPECT_SELECT_ARGUMENT_OPTIONS,D(y,(0,a.__assign)({},y)));this.bumpSpace();var b=this.parseIdentifierIfPossible(),w=0;if("select"!==c&&"offset"===b.value){if(!this.bumpIf(":"))return this.error(r.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,D(this.clonePosition(),this.clonePosition()));var _;if(this.bumpSpace(),(_=this.tryParseDecimalInteger(r.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,r.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE)).err)return _;this.bumpSpace(),b=this.parseIdentifierIfPossible(),w=_.val}var S,E=this.tryParsePluralOrSelectOptions(t,c,e,b);if(E.err)return E;if((S=this.tryParseArgumentClose(s)).err)return S;var A=D(s,this.clonePosition());return"select"===c?{val:{type:i.select,value:n,options:q(E.val),location:A},err:null}:{val:{type:i.plural,value:n,options:q(E.val),offset:w,pluralType:"plural"===c?"cardinal":"ordinal",location:A},err:null};default:return this.error(r.INVALID_ARGUMENT_TYPE,D(l,h))}},t.prototype.tryParseArgumentClose=function(t){return this.isEOF()||125!==this.char()?this.error(r.EXPECT_ARGUMENT_CLOSING_BRACE,D(t,this.clonePosition())):(this.bump(),{val:!0,err:null})},t.prototype.parseSimpleArgStyleIfPossible=function(){for(var t=0,e=this.clonePosition();!this.isEOF();){switch(this.char()){case 39:this.bump();var n=this.clonePosition();if(!this.bumpUntil("'"))return this.error(r.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,D(n,this.clonePosition()));this.bump();break;case 123:t+=1,this.bump();break;case 125:if(!(t>0))return{val:this.message.slice(e.offset,this.offset()),err:null};t-=1;break;default:this.bump()}}return{val:this.message.slice(e.offset,this.offset()),err:null}},t.prototype.parseNumberSkeletonFromString=function(t,e){var n=[];try{n=function(t){if(0===t.length)throw new Error("Number skeleton cannot be empty");for(var e=[],n=0,r=t.split(w).filter((function(t){return t.length>0}));n<r.length;n++){var i=r[n].split("/");if(0===i.length)throw new Error("Invalid number skeleton");for(var o=i[0],a=i.slice(1),s=0,u=a;s<u.length;s++)if(0===u[s].length)throw new Error("Invalid number skeleton");e.push({stem:o,options:a})}return e}(t)}catch(t){return this.error(r.INVALID_NUMBER_SKELETON,e)}return{val:{type:o.number,tokens:n,location:e,parsedOptions:this.shouldParseSkeletons?I(n):{}},err:null}},t.prototype.tryParsePluralOrSelectOptions=function(t,e,n,i){for(var o,a=!1,s=[],u=new Set,l=i.value,c=i.location;;){if(0===l.length){var h=this.clonePosition();if("select"===e||!this.bumpIf("="))break;var d=this.tryParseDecimalInteger(r.EXPECT_PLURAL_ARGUMENT_SELECTOR,r.INVALID_PLURAL_ARGUMENT_SELECTOR);if(d.err)return d;c=D(h,this.clonePosition()),l=this.message.slice(h.offset,this.offset())}if(u.has(l))return this.error("select"===e?r.DUPLICATE_SELECT_ARGUMENT_SELECTOR:r.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,c);"other"===l&&(a=!0),this.bumpSpace();var f=this.clonePosition();if(!this.bumpIf("{"))return this.error("select"===e?r.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:r.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,D(this.clonePosition(),this.clonePosition()));var p=this.parseMessage(t+1,e,n);if(p.err)return p;var m=this.tryParseArgumentClose(f);if(m.err)return m;s.push([l,{value:p.val,location:D(f,this.clonePosition())}]),u.add(l),this.bumpSpace(),l=(o=this.parseIdentifierIfPossible()).value,c=o.location}return 0===s.length?this.error("select"===e?r.EXPECT_SELECT_ARGUMENT_SELECTOR:r.EXPECT_PLURAL_ARGUMENT_SELECTOR,D(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!a?this.error(r.MISSING_OTHER_CLAUSE,D(this.clonePosition(),this.clonePosition())):{val:s,err:null}},t.prototype.tryParseDecimalInteger=function(t,e){var n=1,r=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(n=-1);for(var i=!1,o=0;!this.isEOF();){var a=this.char();if(!(a>=48&&a<=57))break;i=!0,o=10*o+(a-48),this.bump()}var s=D(r,this.clonePosition());return i?H(o*=n)?{val:o,err:null}:this.error(e,s):this.error(t,s)},t.prototype.offset=function(){return this.position.offset},t.prototype.isEOF=function(){return this.offset()===this.message.length},t.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},t.prototype.char=function(){var t=this.position.offset;if(t>=this.message.length)throw Error("out of bound");var e=$(this.message,t);if(void 0===e)throw Error("Offset ".concat(t," is at invalid UTF-16 code unit boundary"));return e},t.prototype.error=function(t,e){return{val:null,err:{kind:t,message:this.message,location:e}}},t.prototype.bump=function(){if(!this.isEOF()){var t=this.char();10===t?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=t<65536?1:2)}},t.prototype.bumpIf=function(t){if(X(this.message,t,this.offset())){for(var e=0;e<t.length;e++)this.bump();return!0}return!1},t.prototype.bumpUntil=function(t){var e=this.offset(),n=this.message.indexOf(t,e);return n>=0?(this.bumpTo(n),!0):(this.bumpTo(this.message.length),!1)},t.prototype.bumpTo=function(t){if(this.offset()>t)throw Error("targetOffset ".concat(t," must be greater than or equal to the current offset ").concat(this.offset()));for(t=Math.min(t,this.message.length);;){var e=this.offset();if(e===t)break;if(e>t)throw Error("targetOffset ".concat(t," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},t.prototype.bumpSpace=function(){for(;!this.isEOF()&&nt(this.char());)this.bump()},t.prototype.peek=function(){if(this.isEOF())return null;var t=this.char(),e=this.offset(),n=this.message.charCodeAt(e+(t>=65536?2:1));return null!=n?n:null},t}();function et(t){return t>=97&&t<=122||t>=65&&t<=90}function nt(t){return t>=9&&t<=13||32===t||133===t||t>=8206&&t<=8207||8232===t||8233===t}function rt(t){return t>=33&&t<=35||36===t||t>=37&&t<=39||40===t||41===t||42===t||43===t||44===t||45===t||t>=46&&t<=47||t>=58&&t<=59||t>=60&&t<=62||t>=63&&t<=64||91===t||92===t||93===t||94===t||96===t||123===t||124===t||125===t||126===t||161===t||t>=162&&t<=165||166===t||167===t||169===t||171===t||172===t||174===t||176===t||177===t||182===t||187===t||191===t||215===t||247===t||t>=8208&&t<=8213||t>=8214&&t<=8215||8216===t||8217===t||8218===t||t>=8219&&t<=8220||8221===t||8222===t||8223===t||t>=8224&&t<=8231||t>=8240&&t<=8248||8249===t||8250===t||t>=8251&&t<=8254||t>=8257&&t<=8259||8260===t||8261===t||8262===t||t>=8263&&t<=8273||8274===t||8275===t||t>=8277&&t<=8286||t>=8592&&t<=8596||t>=8597&&t<=8601||t>=8602&&t<=8603||t>=8604&&t<=8607||8608===t||t>=8609&&t<=8610||8611===t||t>=8612&&t<=8613||8614===t||t>=8615&&t<=8621||8622===t||t>=8623&&t<=8653||t>=8654&&t<=8655||t>=8656&&t<=8657||8658===t||8659===t||8660===t||t>=8661&&t<=8691||t>=8692&&t<=8959||t>=8960&&t<=8967||8968===t||8969===t||8970===t||8971===t||t>=8972&&t<=8991||t>=8992&&t<=8993||t>=8994&&t<=9e3||9001===t||9002===t||t>=9003&&t<=9083||9084===t||t>=9085&&t<=9114||t>=9115&&t<=9139||t>=9140&&t<=9179||t>=9180&&t<=9185||t>=9186&&t<=9254||t>=9255&&t<=9279||t>=9280&&t<=9290||t>=9291&&t<=9311||t>=9472&&t<=9654||9655===t||t>=9656&&t<=9664||9665===t||t>=9666&&t<=9719||t>=9720&&t<=9727||t>=9728&&t<=9838||9839===t||t>=9840&&t<=10087||10088===t||10089===t||10090===t||10091===t||10092===t||10093===t||10094===t||10095===t||10096===t||10097===t||10098===t||10099===t||10100===t||10101===t||t>=10132&&t<=10175||t>=10176&&t<=10180||10181===t||10182===t||t>=10183&&t<=10213||10214===t||10215===t||10216===t||10217===t||10218===t||10219===t||10220===t||10221===t||10222===t||10223===t||t>=10224&&t<=10239||t>=10240&&t<=10495||t>=10496&&t<=10626||10627===t||10628===t||10629===t||10630===t||10631===t||10632===t||10633===t||10634===t||10635===t||10636===t||10637===t||10638===t||10639===t||10640===t||10641===t||10642===t||10643===t||10644===t||10645===t||10646===t||10647===t||10648===t||t>=10649&&t<=10711||10712===t||10713===t||10714===t||10715===t||t>=10716&&t<=10747||10748===t||10749===t||t>=10750&&t<=11007||t>=11008&&t<=11055||t>=11056&&t<=11076||t>=11077&&t<=11078||t>=11079&&t<=11084||t>=11085&&t<=11123||t>=11124&&t<=11125||t>=11126&&t<=11157||11158===t||t>=11159&&t<=11263||t>=11776&&t<=11777||11778===t||11779===t||11780===t||11781===t||t>=11782&&t<=11784||11785===t||11786===t||11787===t||11788===t||11789===t||t>=11790&&t<=11798||11799===t||t>=11800&&t<=11801||11802===t||11803===t||11804===t||11805===t||t>=11806&&t<=11807||11808===t||11809===t||11810===t||11811===t||11812===t||11813===t||11814===t||11815===t||11816===t||11817===t||t>=11818&&t<=11822||11823===t||t>=11824&&t<=11833||t>=11834&&t<=11835||t>=11836&&t<=11839||11840===t||11841===t||11842===t||t>=11843&&t<=11855||t>=11856&&t<=11857||11858===t||t>=11859&&t<=11903||t>=12289&&t<=12291||12296===t||12297===t||12298===t||12299===t||12300===t||12301===t||12302===t||12303===t||12304===t||12305===t||t>=12306&&t<=12307||12308===t||12309===t||12310===t||12311===t||12312===t||12313===t||12314===t||12315===t||12316===t||12317===t||t>=12318&&t<=12319||12320===t||12336===t||64830===t||64831===t||t>=65093&&t<=65094}function it(t){t.forEach((function(t){if(delete t.location,d(t)||f(t))for(var e in t.options)delete t.options[e].location,it(t.options[e].value);else l(t)&&g(t.style)||(c(t)||h(t))&&v(t.style)?delete t.style.location:m(t)&&it(t.children)}))}function ot(t,e){void 0===e&&(e={}),e=(0,a.__assign)({shouldParseSkeletons:!0,requiresOtherClause:!0},e);var n=new tt(t,e).parse();if(n.err){var i=SyntaxError(r[n.err.kind]);throw i.location=n.err.location,i.originalMessage=n.err.message,i}return(null==e?void 0:e.captureLocation)||it(n.val),n.val}},89160:(t,e,n)=>{"use strict";n.d(e,{Ho:()=>c,OC:()=>a,hr:()=>u,pg:()=>l,sb:()=>h,uo:()=>s});var r,i=n(31635);!function(t){t.FORMAT_ERROR="FORMAT_ERROR",t.UNSUPPORTED_FORMATTER="UNSUPPORTED_FORMATTER",t.INVALID_CONFIG="INVALID_CONFIG",t.MISSING_DATA="MISSING_DATA",t.MISSING_TRANSLATION="MISSING_TRANSLATION"}(r||(r={}));var o=function(t){function e(n,r,i){var o=this,a=i?i instanceof Error?i:new Error(String(i)):void 0;return(o=t.call(this,"[@formatjs/intl Error ".concat(n,"] ").concat(r,"\n").concat(a?"\n".concat(a.message,"\n").concat(a.stack):""))||this).code=n,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(o,e),o}return(0,i.__extends)(e,t),e}(Error),a=function(t){function e(e,n){return t.call(this,r.UNSUPPORTED_FORMATTER,e,n)||this}return(0,i.__extends)(e,t),e}(o),s=function(t){function e(e,n){return t.call(this,r.INVALID_CONFIG,e,n)||this}return(0,i.__extends)(e,t),e}(o),u=function(t){function e(e,n){return t.call(this,r.MISSING_DATA,e,n)||this}return(0,i.__extends)(e,t),e}(o),l=function(t){function e(e,n,i){var o=t.call(this,r.FORMAT_ERROR,"".concat(e,"\nLocale: ").concat(n,"\n"),i)||this;return o.locale=n,o}return(0,i.__extends)(e,t),e}(o),c=function(t){function e(e,n,r,i){var o=t.call(this,"".concat(e,"\nMessageID: ").concat(null==r?void 0:r.id,"\nDefault Message: ").concat(null==r?void 0:r.defaultMessage,"\nDescription: ").concat(null==r?void 0:r.description,"\n"),n,i)||this;return o.descriptor=r,o.locale=n,o}return(0,i.__extends)(e,t),e}(l),h=function(t){function e(e,n){var i=t.call(this,r.MISSING_TRANSLATION,'Missing message: "'.concat(e.id,'" for locale "').concat(n,'", using ').concat(e.defaultMessage?"default message (".concat("string"==typeof e.defaultMessage?e.defaultMessage:e.defaultMessage.map((function(t){var e;return null!==(e=t.value)&&void 0!==e?e:JSON.stringify(t)})).join(),")"):"id"," as fallback."))||this;return i.descriptor=e,i}return(0,i.__extends)(e,t),e}(o)},87683:(t,e,n)=>{"use strict";n.d(e,{F3:()=>d,GT:()=>h,J9:()=>s,JF:()=>u,MT:()=>l});var r=n(31635),i=n(62587),o=n(54819),a=n(89160);function s(t,e,n){return void 0===n&&(n={}),e.reduce((function(e,r){return r in t?e[r]=t[r]:r in n&&(e[r]=n[r]),e}),{})}var u={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:function(t){0},onWarn:function(t){0}};function l(){return{dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}}}function c(t){return{create:function(){return{get:function(e){return t[e]},set:function(e,n){t[e]=n}}}}}function h(t){void 0===t&&(t={dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}});var e=Intl.RelativeTimeFormat,n=Intl.ListFormat,a=Intl.DisplayNames,s=(0,o.B)((function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new((t=Intl.DateTimeFormat).bind.apply(t,(0,r.__spreadArray)([void 0],e,!1)))}),{cache:c(t.dateTime),strategy:o.W.variadic}),u=(0,o.B)((function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new((t=Intl.NumberFormat).bind.apply(t,(0,r.__spreadArray)([void 0],e,!1)))}),{cache:c(t.number),strategy:o.W.variadic}),l=(0,o.B)((function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new((t=Intl.PluralRules).bind.apply(t,(0,r.__spreadArray)([void 0],e,!1)))}),{cache:c(t.pluralRules),strategy:o.W.variadic});return{getDateTimeFormat:s,getNumberFormat:u,getMessageFormat:(0,o.B)((function(t,e,n,o){return new i.S(t,e,n,(0,r.__assign)({formatters:{getNumberFormat:u,getDateTimeFormat:s,getPluralRules:l}},o||{}))}),{cache:c(t.message),strategy:o.W.variadic}),getRelativeTimeFormat:(0,o.B)((function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new(e.bind.apply(e,(0,r.__spreadArray)([void 0],t,!1)))}),{cache:c(t.relativeTime),strategy:o.W.variadic}),getPluralRules:l,getListFormat:(0,o.B)((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new(n.bind.apply(n,(0,r.__spreadArray)([void 0],t,!1)))}),{cache:c(t.list),strategy:o.W.variadic}),getDisplayNames:(0,o.B)((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new(a.bind.apply(a,(0,r.__spreadArray)([void 0],t,!1)))}),{cache:c(t.displayNames),strategy:o.W.variadic})}}function d(t,e,n,r){var i,o=t&&t[e];if(o&&(i=o[n]),i)return i;r(new a.OC("No ".concat(e," format named: ").concat(n)))}},53242:function(t,e,n){(function(){"use strict";var t;function e(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}var r="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){return t==Array.prototype||t==Object.prototype||(t[e]=n.value),t};var i=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g];for(var e=0;e<t.length;++e){var r=t[e];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);function o(t,e){if(e)t:{var n=i;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];if(!(a in n))break t;n=n[a]}(e=e(o=n[t=t[t.length-1]]))!=o&&null!=e&&r(n,t,{configurable:!0,writable:!0,value:e})}}function a(t){return(t={next:t})[Symbol.iterator]=function(){return this},t}function s(t){var n="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return n?n.call(t):{next:e(t)}}function u(t){if(!(t instanceof Array)){t=s(t);for(var e,n=[];!(e=t.next()).done;)n.push(e.value);t=n}return t}o("Symbol",(function(t){function e(t,e){this.h=t,r(this,"description",{configurable:!0,writable:!0,value:e})}if(t)return t;e.prototype.toString=function(){return this.h};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return function t(r){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new e(n+(r||"")+"_"+i++,r)}})),o("Symbol.iterator",(function(t){if(t)return t;t=Symbol("Symbol.iterator");for(var n="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),o=0;o<n.length;o++){var s=i[n[o]];"function"==typeof s&&"function"!=typeof s.prototype[t]&&r(s.prototype,t,{configurable:!0,writable:!0,value:function(){return a(e(this))}})}return t}));var l="function"==typeof Object.assign?Object.assign:function(t,e){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t};o("Object.assign",(function(t){return t||l}));var c,h="function"==typeof Object.create?Object.create:function(t){function e(){}return e.prototype=t,new e};if("function"==typeof Object.setPrototypeOf)c=Object.setPrototypeOf;else{var d;t:{var f={};try{f.__proto__={a:!0},d=f.a;break t}catch(t){}d=!1}c=d?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var p=c;function m(t,e){if(t.prototype=h(e.prototype),t.prototype.constructor=t,p)p(t,e);else for(var n in e)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(e,n);r&&Object.defineProperty(t,n,r)}else t[n]=e[n];t.za=e.prototype}function g(){this.m=!1,this.j=null,this.i=void 0,this.h=1,this.v=this.s=0,this.l=null}function v(t){if(t.m)throw new TypeError("Generator is already running");t.m=!0}function y(t,e){t.l={ma:e,na:!0},t.h=t.s||t.v}function b(t,e,n){return t.h=n,{value:e}}function x(t){this.h=new g,this.i=t}function w(t,e,n,r){try{var i=e.call(t.h.j,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return t.h.m=!1,i;var o=i.value}catch(e){return t.h.j=null,y(t.h,e),_(t)}return t.h.j=null,r.call(t.h,o),_(t)}function _(t){for(;t.h.h;)try{var e=t.i(t.h);if(e)return t.h.m=!1,{value:e.value,done:!1}}catch(e){t.h.i=void 0,y(t.h,e)}if(t.h.m=!1,t.h.l){if(e=t.h.l,t.h.l=null,e.na)throw e.ma;return{value:e.return,done:!0}}return{value:void 0,done:!0}}function S(t){this.next=function(e){return v(t.h),t.h.j?e=w(t,t.h.j.next,e,t.h.u):(t.h.u(e),e=_(t)),e},this.throw=function(e){return v(t.h),t.h.j?e=w(t,t.h.j.throw,e,t.h.u):(y(t.h,e),e=_(t)),e},this.return=function(e){return function(t,e){v(t.h);var n=t.h.j;return n?w(t,"return"in n?n.return:function(t){return{value:t,done:!0}},e,t.h.return):(t.h.return(e),_(t))}(t,e)},this[Symbol.iterator]=function(){return this}}function E(t){return function(t){function e(e){return t.next(e)}function n(e){return t.throw(e)}return new Promise((function(r,i){!function t(o){o.done?r(o.value):Promise.resolve(o.value).then(e,n).then(t,i)}(t.next())}))}(new S(new x(t)))}function A(t){return t||Array.prototype.fill}g.prototype.u=function(t){this.i=t},g.prototype.return=function(t){this.l={return:t},this.h=this.v},o("Promise",(function(t){function e(t){this.i=0,this.j=void 0,this.h=[],this.u=!1;var e=this.l();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.h=null}function r(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.i=function(t){if(null==this.h){this.h=[];var e=this;this.j((function(){e.m()}))}this.h.push(t)};var o=i.setTimeout;n.prototype.j=function(t){o(t,0)},n.prototype.m=function(){for(;this.h&&this.h.length;){var t=this.h;this.h=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.l(t)}}}this.h=null},n.prototype.l=function(t){this.j((function(){throw t}))},e.prototype.l=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.I),reject:t(this.m)}},e.prototype.I=function(t){if(t===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.L(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.F(t):this.s(t)}},e.prototype.F=function(t){var e=void 0;try{e=t.then}catch(t){return void this.m(t)}"function"==typeof e?this.M(e,t):this.s(t)},e.prototype.m=function(t){this.v(2,t)},e.prototype.s=function(t){this.v(1,t)},e.prototype.v=function(t,e){if(0!=this.i)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.i);this.i=t,this.j=e,2===this.i&&this.K(),this.H()},e.prototype.K=function(){var t=this;o((function(){if(t.D()){var e=i.console;void 0!==e&&e.error(t.j)}}),1)},e.prototype.D=function(){if(this.u)return!1;var t=i.CustomEvent,e=i.Event,n=i.dispatchEvent;return void 0===n||("function"==typeof t?t=new t("unhandledrejection",{cancelable:!0}):"function"==typeof e?t=new e("unhandledrejection",{cancelable:!0}):(t=i.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,t),t.promise=this,t.reason=this.j,n(t))},e.prototype.H=function(){if(null!=this.h){for(var t=0;t<this.h.length;++t)a.i(this.h[t]);this.h=null}};var a=new n;return e.prototype.L=function(t){var e=this.l();t.T(e.resolve,e.reject)},e.prototype.M=function(t,e){var n=this.l();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.T(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.T=function(t,e){function n(){switch(r.i){case 1:t(r.j);break;case 2:e(r.j);break;default:throw Error("Unexpected state: "+r.i)}}var r=this;null==this.h?a.i(n):this.h.push(n),this.u=!0},e.resolve=r,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var i=s(t),o=i.next();!o.done;o=i.next())r(o.value).T(e,n)}))},e.all=function(t){var n=s(t),i=n.next();return i.done?r([]):new e((function(t,e){function o(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,r(i.value).T(o(a.length-1),e),i=n.next()}while(!i.done)}))},e})),o("Array.prototype.keys",(function(t){return t||function(){return function(t,e){t instanceof String&&(t+="");var n=0,r=!1,i={next:function(){if(!r&&n<t.length){var i=n++;return{value:e(i,t[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(t){return t}))}})),o("Array.prototype.fill",(function(t){return t||function(t,e,n){var r=this.length||0;for(0>e&&(e=Math.max(0,r+e)),(null==n||n>r)&&(n=r),0>(n=Number(n))&&(n=Math.max(0,r+n)),e=Number(e||0);e<n;e++)this[e]=t;return this}})),o("Int8Array.prototype.fill",A),o("Uint8Array.prototype.fill",A),o("Uint8ClampedArray.prototype.fill",A),o("Int16Array.prototype.fill",A),o("Uint16Array.prototype.fill",A),o("Int32Array.prototype.fill",A),o("Uint32Array.prototype.fill",A),o("Float32Array.prototype.fill",A),o("Float64Array.prototype.fill",A),o("Object.is",(function(t){return t||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}})),o("Array.prototype.includes",(function(t){return t||function(t,e){var n=this;n instanceof String&&(n=String(n));var r=n.length;for(0>(e=e||0)&&(e=Math.max(e+r,0));e<r;e++){var i=n[e];if(i===t||Object.is(i,t))return!0}return!1}})),o("String.prototype.includes",(function(t){return t||function(t,e){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(t,e||0)}}));var M=this||self;function C(t,e){t=t.split(".");var n,r=M;t[0]in r||void 0===r.execScript||r.execScript("var "+t[0]);for(;t.length&&(n=t.shift());)t.length||void 0===e?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=e}function T(t){var e;return(e=M.navigator)&&(e=e.userAgent)||(e=""),-1!=e.indexOf(t)}var k=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},I={},N=null;function P(t){var e=t.length,n=3*e/4;n%3?n=Math.floor(n):-1!="=.".indexOf(t[e-1])&&(n=-1!="=.".indexOf(t[e-2])?n-2:n-1);var r=new Uint8Array(n),i=0;return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=N[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}O();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){r[i++]=t})),i!==n?r.subarray(0,i):r}function O(){if(!N){N={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++){var r=t.concat(e[n].split(""));I[n]=r;for(var i=0;i<r.length;i++){var o=r[i];void 0===N[o]&&(N[o]=i)}}}}var L="undefined"!=typeof Uint8Array,R=!(T("Trident")||T("MSIE"))&&"function"==typeof M.btoa;function D(t){if(!R){var e;void 0===e&&(e=0),O(),e=I[e];for(var n=Array(Math.floor(t.length/3)),r=e[64]||"",i=0,o=0;i<t.length-2;i+=3){var a=t[i],s=t[i+1],u=t[i+2],l=e[a>>2];a=e[(3&a)<<4|s>>4],s=e[(15&s)<<2|u>>6],u=e[63&u],n[o++]=l+a+s+u}switch(l=0,u=r,t.length-i){case 2:u=e[(15&(l=t[i+1]))<<2]||r;case 1:t=t[i],n[o]=e[t>>2]+e[(3&t)<<4|l>>4]+u+r}return n.join("")}for(e="";10240<t.length;)e+=String.fromCharCode.apply(null,t.subarray(0,10240)),t=t.subarray(10240);return e+=String.fromCharCode.apply(null,t),btoa(e)}var z,F=RegExp("[-_.]","g");function B(t){switch(t){case"-":return"+";case"_":return"/";case".":return"=";default:return""}}function U(t){if(!R)return P(t);F.test(t)&&(t=t.replace(F,B)),t=atob(t);for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}function j(){return z||(z=new Uint8Array(0))}var V={},H="function"==typeof Uint8Array.prototype.slice,G=0,W=0;function X(t){var e=0>t,n=(t=Math.abs(t))>>>0;t=Math.floor((t-n)/4294967296),e&&(e=(n=s($(n,t))).next().value,t=n.next().value,n=e),G=n>>>0,W=t>>>0}var Y,q="function"==typeof BigInt;function $(t,e){return e=~e,t?t=1+~t:e+=1,[t,e]}function K(t,e){this.i=t>>>0,this.h=e>>>0}function Z(t){if(!t)return Y||(Y=new K(0,0));if(!/^-?\d+$/.test(t))return null;if(16>t.length)X(Number(t));else if(q)t=BigInt(t),G=Number(t&BigInt(4294967295))>>>0,W=Number(t>>BigInt(32)&BigInt(4294967295));else{var e=+("-"===t[0]);W=G=0;for(var n=t.length,r=e,i=(n-e)%6+e;i<=n;r=i,i+=6)r=Number(t.slice(r,i)),W*=1e6,4294967296<=(G=1e6*G+r)&&(W+=G/4294967296|0,G%=4294967296);e&&(t=(e=s($(G,W))).next().value,e=e.next().value,G=t,W=e)}return new K(G,W)}function Q(t,e){return Error("Invalid wire type: "+t+" (at position "+e+")")}function J(){return Error("Failed to read varint, encoding is invalid.")}function tt(t,e){return Error("Tried to read past the end of the data "+e+" > "+t)}function et(){throw Error("Invalid UTF8")}function nt(t,e){return e=String.fromCharCode.apply(null,e),null==t?e:t+e}var rt,it,ot,at=void 0,st="undefined"!=typeof TextDecoder,ut="undefined"!=typeof TextEncoder;function lt(t){if(t!==V)throw Error("illegal external caller")}function ct(t,e){if(lt(e),this.V=t,null!=t&&0===t.length)throw Error("ByteString should be constructed with non-empty values")}function ht(){return ot||(ot=new ct(null,V))}function dt(t){lt(V);var e=t.V;return null==(e=null==e||L&&null!=e&&e instanceof Uint8Array?e:"string"==typeof e?U(e):null)?e:t.V=e}function ft(t,e){this.i=null,this.m=!1,this.h=this.j=this.l=0,pt(this,t,e)}function pt(t,e,n){n=void 0===n?{}:n,t.S=void 0!==n.S&&n.S,e&&(e=function(t){if("string"==typeof t)return{buffer:U(t),C:!1};if(Array.isArray(t))return{buffer:new Uint8Array(t),C:!1};if(t.constructor===Uint8Array)return{buffer:t,C:!1};if(t.constructor===ArrayBuffer)return{buffer:new Uint8Array(t),C:!1};if(t.constructor===ct)return{buffer:dt(t)||j(),C:!0};if(t instanceof Uint8Array)return{buffer:new Uint8Array(t.buffer,t.byteOffset,t.byteLength),C:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}(e),t.i=e.buffer,t.m=e.C,t.l=0,t.j=t.i.length,t.h=t.l)}function mt(t,e){if(t.h=e,e>t.j)throw tt(t.j,e)}function gt(t){var e=t.i,n=t.h,r=e[n++],i=127&r;if(128&r&&(i|=(127&(r=e[n++]))<<7,128&r&&(i|=(127&(r=e[n++]))<<14,128&r&&(i|=(127&(r=e[n++]))<<21,128&r&&(i|=(r=e[n++])<<28,128&r&&128&e[n++]&&128&e[n++]&&128&e[n++]&&128&e[n++]&&128&e[n++])))))throw J();return mt(t,n),i}function vt(t,e){if(0>e)throw Error("Tried to read a negative byte length: "+e);var n=t.h,r=n+e;if(r>t.j)throw tt(e,t.j-n);return t.h=r,n}ft.prototype.reset=function(){this.h=this.l};var yt=[];function bt(){this.h=[]}function xt(t,e,n){for(;0<n||127<e;)t.h.push(127&e|128),e=(e>>>7|n<<25)>>>0,n>>>=7;t.h.push(e)}function wt(t,e){for(;127<e;)t.h.push(127&e|128),e>>>=7;t.h.push(e)}function _t(t,e){if(yt.length){var n=yt.pop();pt(n,t,e),t=n}else t=new ft(t,e);this.h=t,this.j=this.h.h,this.i=this.l=-1,this.setOptions(e)}function St(t){var e=t.h;if(e.h==e.j)return!1;t.j=t.h.h;var n=gt(t.h)>>>0;if(e=n>>>3,!(0<=(n&=7)&&5>=n))throw Q(n,t.j);if(1>e)throw Error("Invalid field number: "+e+" (at position "+t.j+")");return t.l=e,t.i=n,!0}function Et(t){switch(t.i){case 0:if(0!=t.i)Et(t);else t:{for(var e=(t=t.h).h,n=e+10,r=t.i;e<n;)if(!(128&r[e++])){mt(t,e);break t}throw J()}break;case 1:mt(t=t.h,t.h+8);break;case 2:2!=t.i?Et(t):(e=gt(t.h)>>>0,mt(t=t.h,t.h+e));break;case 5:mt(t=t.h,t.h+4);break;case 3:for(e=t.l;;){if(!St(t))throw Error("Unmatched start-group tag: stream EOF");if(4==t.i){if(t.l!=e)throw Error("Unmatched end-group tag");break}Et(t)}break;default:throw Q(t.i,t.j)}}bt.prototype.length=function(){return this.h.length},bt.prototype.end=function(){var t=this.h;return this.h=[],t},_t.prototype.setOptions=function(t){t=void 0===t?{}:t,this.ca=void 0!==t.ca&&t.ca},_t.prototype.reset=function(){this.h.reset(),this.j=this.h.h,this.i=this.l=-1};var At=[];function Mt(){this.j=[],this.i=0,this.h=new bt}function Ct(t,e){0!==e.length&&(t.j.push(e),t.i+=e.length)}var Tt="function"==typeof Symbol&&"symbol"==typeof Symbol()?Symbol():void 0;function kt(t,e){return Tt?t[Tt]|=e:void 0!==t.A?t.A|=e:(Object.defineProperties(t,{A:{value:e,configurable:!0,writable:!0,enumerable:!1}}),e)}function It(t,e){Tt?t[Tt]&&(t[Tt]&=~e):void 0!==t.A&&(t.A&=~e)}function Nt(t){var e;return null==(e=Tt?t[Tt]:t.A)?0:e}function Pt(t,e){Tt?t[Tt]=e:void 0!==t.A?t.A=e:Object.defineProperties(t,{A:{value:e,configurable:!0,writable:!0,enumerable:!1}})}function Ot(t){return kt(t,1),t}function Lt(t,e){Pt(e,-51&t)}function Rt(t,e){Pt(e,-41&t|18)}var Dt={};function zt(t){return null!==t&&"object"==typeof t&&!Array.isArray(t)&&t.constructor===Object}var Ft,Bt,Ut=[];function jt(t){if(2&Nt(t.o))throw Error("Cannot mutate an immutable Message")}function Vt(t){var e=t.length;(e=e?t[e-1]:void 0)&&zt(e)?e.g=1:(e={},t.push((e.g=1,e)))}function Ht(t){var e=t.i+t.G;return t.B||(t.B=t.o[e]={})}function Gt(t,e){return-1===e?null:e>=t.i?t.B?t.B[e]:void 0:t.o[e+t.G]}function Wt(t,e,n,r){jt(t),Xt(t,e,n,r)}function Xt(t,e,n,r){t.j&&(t.j=void 0),e>=t.i||r?Ht(t)[e]=n:(t.o[e+t.G]=n,(t=t.B)&&e in t&&delete t[e])}function Yt(t,e,n,r){var i=Gt(t,e);Array.isArray(i)||(i=Ft);var o=Nt(i);if(1&o||Ot(i),r)2&o||kt(i,2),1&n||Object.freeze(i);else{r=!(2&n);var a=2&o;1&n||!a?r&&16&o&&!a&&It(i,16):Xt(t,e,i=Ot(Array.prototype.slice.call(i)))}return i}function qt(t,e){var n=Gt(t,e),r=null==n?n:"number"==typeof n||"NaN"===n||"Infinity"===n||"-Infinity"===n?Number(n):void 0;return null!=r&&r!==n&&Xt(t,e,r),r}function $t(t,e,n,r,i){t.h||(t.h={});var o=t.h[n],a=Yt(t,n,3,i);if(!o){var s=a;o=[];var u=!!(16&Nt(t.o));a=!!(2&Nt(s));var l=s;!i&&a&&(s=Array.prototype.slice.call(s));for(var c=a,h=0;h<s.length;h++){var d=s[h],f=e,p=!1;if(p=void 0!==p&&p,void 0!==(d=Array.isArray(d)?new f(d):p?new f:void 0)){var m=p=Nt(f=d.o);a&&(m|=2),u&&(m|=16),m!=p&&Pt(f,m),f=m,c=c||!!(2&f),o.push(d)}}return t.h[n]=o,e=33|(u=Nt(s)),u!=(e=c?-9&e:8|e)&&(c=s,Object.isFrozen(c)&&(c=Array.prototype.slice.call(c)),Pt(c,e),s=c),l!==s&&Xt(t,n,s),(i||r&&a)&&kt(o,2),r&&Object.freeze(o),o}return i||(i=Object.isFrozen(o),r&&!i?Object.freeze(o):!r&&i&&(o=Array.prototype.slice.call(o),t.h[n]=o)),o}function Kt(t,e,n){var r=!!(2&Nt(t.o));if(e=$t(t,e,n,r,r),t=Yt(t,n,3,r),!(r||8&Nt(t))){for(r=0;r<e.length;r++){if(2&Nt((n=e[r]).o)){var i=ue(n,!1);i.j=n}else i=n;n!==i&&(e[r]=i,t[r]=i.o)}kt(t,8)}return e}function Zt(t,e,n){if(null!=n&&"number"!=typeof n)throw Error("Value of float/double field must be a number|null|undefined, found "+typeof n+": "+n);Wt(t,e,n)}function Qt(t,e,n,r,i){jt(t);var o=$t(t,n,e,!1,!1);return n=null!=r?r:new n,t=Yt(t,e,2,!1),null!=i?(o.splice(i,0,n),t.splice(i,0,n.o)):(o.push(n),t.push(n.o)),n.C()&&It(t,8),n}function Jt(t,e){return null==t?e:t}function te(t,e,n){return n=void 0===n?0:n,Jt(qt(t,e),n)}function ee(t,e,n,r){if(null!=t){if(Array.isArray(t))t=ne(t,e,n,void 0!==r);else if(zt(t)){var i,o={};for(i in t)o[i]=ee(t[i],e,n,r);t=o}else t=e(t,r);return t}}function ne(t,e,n,r){var i=Nt(t);r=r?!!(16&i):void 0,t=Array.prototype.slice.call(t);for(var o=0;o<t.length;o++)t[o]=ee(t[o],e,n,r);return n(i,t),t}function re(t){return t.ja===Dt?t.toJSON():function(t){switch(typeof t){case"number":return isFinite(t)?t:String(t);case"object":if(t)if(Array.isArray(t)){if(128&Nt(t))return Vt(t=Array.prototype.slice.call(t)),t}else{if(L&&null!=t&&t instanceof Uint8Array)return D(t);if(t instanceof ct){var e=t.V;return null==e?"":"string"==typeof e?e:t.V=D(e)}}}return t}(t)}function ie(t,e){128&t&&Vt(e)}function oe(t,e,n){if(n=void 0===n?Rt:n,null!=t){if(L&&t instanceof Uint8Array)return t.length?new ct(new Uint8Array(t),V):ht();if(Array.isArray(t)){var r=Nt(t);return 2&r?t:!e||32&r||!(16&r||0===r)?(4&(e=Nt(t=ne(t,oe,4&r?Rt:n,!0)))&&2&e&&Object.freeze(t),t):(Pt(t,2|r),t)}return t.ja===Dt?se(t):t}}function ae(t,e,n,r,i,o,a){if(t=t.h&&t.h[n]){if(2&(r=Nt(t))?r=t:(Rt(r,o=k(t,se)),Object.freeze(o),r=o),jt(e),a=null==r?Ft:Ot([]),null!=r){for(o=!!r.length,t=0;t<r.length;t++){var s=r[t];o=o&&!(2&Nt(s.o)),a[t]=s.o}o=1|(o?8:0),((t=Nt(a))&o)!==o&&(Object.isFrozen(a)&&(a=Array.prototype.slice.call(a)),Pt(a,t|o)),e.h||(e.h={}),e.h[n]=r}else e.h&&(e.h[n]=void 0);Xt(e,n,a,i)}else Wt(e,n,oe(r,o,a),i)}function se(t){return 2&Nt(t.o)||kt((t=ue(t,!0)).o,2),t}function ue(t,e){var n=t.o,r=[];kt(r,16);var i=t.constructor.h;if(i&&r.push(i),i=t.B){r.length=n.length,r.fill(void 0,r.length,n.length);var o={};r[r.length-1]=o}128&Nt(n)&&Vt(r),e=e||t.C()?Rt:Lt,o=t.constructor,Bt=r,r=new o(r),Bt=void 0,t.R&&(r.R=t.R.slice()),o=!!(16&Nt(n));for(var a=i?n.length-1:n.length,s=0;s<a;s++)ae(t,r,s-t.G,n[s],!1,o,e);if(i)for(var u in i)ae(t,r,+u,i[u],!0,o,e);return r}function le(t,e,n){null==t&&(t=Bt),Bt=void 0;var r,i=this.constructor.i||0,o=0<i,a=this.constructor.h,s=!1;if(null==t){var u=48,l=!0;o&&(i=0,u|=128),Pt(t=a?[a]:[],u)}else{if(!Array.isArray(t))throw Error();if(a&&a!==t[0])throw Error();var c=u=kt(t,0);if((l=!!(16&c))&&((s=!!(32&c))||(c|=32)),o){if(128&c)i=0;else if(0<t.length){var h=t[t.length-1];if(zt(h)&&"g"in h){i=0,c|=128,delete h.g;var d,f=!0;for(d in h){f=!1;break}f&&t.pop()}}}else if(128&c)throw Error();u!==c&&Pt(t,c)}if(this.G=(a?0:-1)-i,this.h=void 0,this.o=t,i=(a=this.o.length)-1,a&&zt(a=this.o[i])?(this.B=a,this.i=i-this.G):void 0!==e&&-1<e?(this.i=Math.max(e,i+1-this.G),this.B=void 0):this.i=Number.MAX_VALUE,!o&&this.B&&"g"in this.B)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(n)for(e=l&&!s&&!0,o=this.i,l=0;l<n.length;l++)(s=n[l])<o?(i=t[s+=this.G])?ce(i,e):t[s]=Ft:(r||(r=Ht(this)),(i=r[s])?ce(i,e):r[s]=Ft)}function ce(t,e){if(Array.isArray(t)){var n=Nt(t),r=1;!e||2&n||(r|=16),(n&r)!==r&&Pt(t,n|r)}}function he(t,e,n){if(n){var r,i={};for(r in n){var o=n[r],a=o.ra;a||(i.J=o.xa||o.oa.W,o.ia?(i.aa=be(o.ia),a=function(t){return function(e,n,r){return t.J(e,n,r,t.aa)}}(i)):o.ka?(i.Z=xe(o.da.P,o.ka),a=function(t){return function(e,n,r){return t.J(e,n,r,t.Z)}}(i)):a=i.J,o.ra=a),a(e,t,o.da),i={J:i.J,aa:i.aa,Z:i.Z}}}!function(t,e){if(e=e.R){Ct(t,t.h.end());for(var n=0;n<e.length;n++)Ct(t,dt(e[n])||j())}}(e,t)}Pt(Ut,23),Ft=Object.freeze(Ut),le.prototype.toJSON=function(){return ne(this.o,re,ie)},le.prototype.C=function(){return!!(2&Nt(this.o))},le.prototype.ja=Dt,le.prototype.toString=function(){return this.o.toString()};var de=Symbol();function fe(t,e,n){return t[de]||(t[de]=function(t,r){return e(t,r,n)})}function pe(t){var e=t[de];if(!e){var n=Pe(t);e=function(t,e){return Oe(t,e,n)},t[de]=e}return e}function me(t){var e=function(t){var e=t.ia;return e?pe(e):(e=t.wa)?fe(t.da.P,e,t.ka):void 0}(t),n=t.da,r=t.oa.U;return e?function(t,i){return r(t,i,n,e)}:function(t,e){return r(t,e,n)}}function ge(t,e){var n=t[e];return"function"==typeof n&&0===n.length&&(n=n(),t[e]=n),Array.isArray(n)&&(Ce in n||we in n||0<n.length&&"function"==typeof n[0])?n:void 0}function ve(t,e,n,r,i,o){e.P=t[0];var a=1;if(t.length>a&&"number"!=typeof t[a]){var s=t[a++];n(e,s)}for(;a<t.length;){n=t[a++];for(var u=a+1;u<t.length&&"number"!=typeof t[u];)u++;switch(s=t[a++],u-=a){case 0:r(e,n,s);break;case 1:(u=ge(t,a))?(a++,i(e,n,s,u)):r(e,n,s,t[a++]);break;case 2:i(e,n,s,u=ge(t,u=a++),t[a++]);break;case 3:o(e,n,s,t[a++],t[a++],t[a++]);break;case 4:o(e,n,s,t[a++],t[a++],t[a++],t[a++]);break;default:throw Error("unexpected number of binary field arguments: "+u)}}return e}var ye=Symbol();function be(t){var e=t[ye];if(!e){var n=Me(t);e=function(t,e){return Le(t,e,n)},t[ye]=e}return e}function xe(t,e){var n=t[ye];return n||(n=function(t,n){return he(t,n,e)},t[ye]=n),n}var we=Symbol();function _e(t,e){t.push(e)}function Se(t,e,n){t.push(e,n.W)}function Ee(t,e,n,r){var i=be(r),o=Me(r).P,a=n.W;t.push(e,(function(t,e,n){return a(t,e,n,o,i)}))}function Ae(t,e,n,r,i,o){var a=xe(r,o),s=n.W;t.push(e,(function(t,e,n){return s(t,e,n,r,a)}))}function Me(t){var e=t[we];return e||(e=ve(t,t[we]=[],_e,Se,Ee,Ae),Ce in t&&we in t&&(t.length=0),e)}var Ce=Symbol();function Te(t,e){t[0]=e}function ke(t,e,n,r){var i=n.U;t[e]=r?function(t,e,n){return i(t,e,n,r)}:i}function Ie(t,e,n,r,i){var o=n.U,a=pe(r),s=Pe(r).P;t[e]=function(t,e,n){return o(t,e,n,s,a,i)}}function Ne(t,e,n,r,i,o,a){var s=n.U,u=fe(r,i,o);t[e]=function(t,e,n){return s(t,e,n,r,u,a)}}function Pe(t){var e=t[Ce];return e||(e=ve(t,t[Ce]={},Te,ke,Ie,Ne),Ce in t&&we in t&&(t.length=0),e)}function Oe(t,e,n){for(;St(e)&&4!=e.i;){var r=e.l,i=n[r];if(!i){var o=n[0];o&&(o=o[r])&&(i=n[r]=me(o))}if(!i||!i(e,t,r)){r=t,o=(i=e).j,Et(i);var a=i;if(!a.ca){if(i=a.h.h-o,a.h.h=o,a=a.h,0==i)i=ht();else{if(o=vt(a,i),a.S&&a.m)i=a.i.subarray(o,o+i);else{a=a.i;var s=o;i=s===(i=o+i)?j():H?a.slice(s,i):new Uint8Array(a.subarray(s,i))}i=0==i.length?ht():new ct(i,V)}(o=r.R)?o.push(i):r.R=[i]}}}return t}function Le(t,e,n){for(var r=n.length,i=1==r%2,o=i?1:0;o<r;o+=2)(0,n[o+1])(e,t,n[o]);he(t,e,i?n[0]:void 0)}function Re(t,e){return{U:t,W:e}}var De=Re((function(t,e,n){if(5!==t.i)return!1;var r=(t=t.h).i,i=t.h,o=r[i],a=r[i+1],s=r[i+2];return r=r[i+3],mt(t,t.h+4),t=2*((a=(o|a<<8|s<<16|r<<24)>>>0)>>31)+1,o=a>>>23&255,a&=8388607,Wt(e,n,255==o?a?NaN:1/0*t:0==o?t*Math.pow(2,-149)*a:t*Math.pow(2,o-150)*(a+Math.pow(2,23))),!0}),(function(t,e,n){if(null!=(e=qt(e,n))){wt(t.h,8*n+5),t=t.h;var r=+e;0===r?0<1/r?G=W=0:(W=0,G=2147483648):isNaN(r)?(W=0,G=2147483647):34028234663852886e22<(r=(n=0>r?-2147483648:0)?-r:r)?(W=0,G=(2139095040|n)>>>0):11754943508222875e-54>r?(r=Math.round(r/Math.pow(2,-149)),W=0,G=(n|r)>>>0):(e=Math.floor(Math.log(r)/Math.LN2),r*=Math.pow(2,-e),16777216<=(r=Math.round(8388608*r))&&++e,W=0,G=(n|e+127<<23|8388607&r)>>>0),n=G,t.h.push(n>>>0&255),t.h.push(n>>>8&255),t.h.push(n>>>16&255),t.h.push(n>>>24&255)}})),ze=Re((function(t,e,n){if(0!==t.i)return!1;var r=t.h,i=0,o=t=0,a=r.i,s=r.h;do{var u=a[s++];i|=(127&u)<<o,o+=7}while(32>o&&128&u);for(32<o&&(t|=(127&u)>>4),o=3;32>o&&128&u;o+=7)t|=(127&(u=a[s++]))<<o;if(mt(r,s),!(128>u))throw J();return r=i>>>0,(t=2147483648&(u=t>>>0))&&(u=~u>>>0,0==(r=1+~r>>>0)&&(u=u+1>>>0)),r=4294967296*u+(r>>>0),Wt(e,n,t?-r:r),!0}),(function(t,e,n){null!=(e=Gt(e,n))&&("string"==typeof e&&Z(e),null!=e&&(wt(t.h,8*n),"number"==typeof e?(t=t.h,X(e),xt(t,G,W)):(n=Z(e),xt(t.h,n.i,n.h))))})),Fe=Re((function(t,e,n){return 0===t.i&&(Wt(e,n,gt(t.h)),!0)}),(function(t,e,n){if(null!=(e=Gt(e,n))&&null!=e)if(wt(t.h,8*n),t=t.h,0<=(n=e))wt(t,n);else{for(e=0;9>e;e++)t.h.push(127&n|128),n>>=7;t.h.push(1)}})),Be=Re((function(t,e,n){if(2!==t.i)return!1;var r=gt(t.h)>>>0,i=vt(t=t.h,r);if(t=t.i,st){var o,a=t;(o=rt)||(o=rt=new TextDecoder("utf-8",{fatal:!0})),t=i+r,a=0===i&&t===a.length?a:a.subarray(i,t);try{var s=o.decode(a)}catch(t){if(void 0===at){try{o.decode(new Uint8Array([128]))}catch(t){}try{o.decode(new Uint8Array([97])),at=!0}catch(t){at=!1}}throw!at&&(rt=void 0),t}}else{r=(s=i)+r,i=[];for(var u,l,c=null;s<r;)128>(u=t[s++])?i.push(u):224>u?s>=r?et():(l=t[s++],194>u||128!=(192&l)?(s--,et()):i.push((31&u)<<6|63&l)):240>u?s>=r-1?et():128!=(192&(l=t[s++]))||224===u&&160>l||237===u&&160<=l||128!=(192&(a=t[s++]))?(s--,et()):i.push((15&u)<<12|(63&l)<<6|63&a):244>=u?s>=r-2?et():128!=(192&(l=t[s++]))||l-144+(u<<28)>>30||128!=(192&(a=t[s++]))||128!=(192&(o=t[s++]))?(s--,et()):(u=(7&u)<<18|(63&l)<<12|(63&a)<<6|63&o,u-=65536,i.push(55296+(u>>10&1023),56320+(1023&u))):et(),8192<=i.length&&(c=nt(c,i),i.length=0);s=nt(c,i)}return Wt(e,n,s),!0}),(function(t,e,n){if(null!=(e=Gt(e,n))){var r=!1;if(r=void 0!==r&&r,ut){if(r&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(e))throw Error("Found an unpaired surrogate");e=(it||(it=new TextEncoder)).encode(e)}else{for(var i=0,o=new Uint8Array(3*e.length),a=0;a<e.length;a++){var s=e.charCodeAt(a);if(128>s)o[i++]=s;else{if(2048>s)o[i++]=s>>6|192;else{if(55296<=s&&57343>=s){if(56319>=s&&a<e.length){var u=e.charCodeAt(++a);if(56320<=u&&57343>=u){s=1024*(s-55296)+u-56320+65536,o[i++]=s>>18|240,o[i++]=s>>12&63|128,o[i++]=s>>6&63|128,o[i++]=63&s|128;continue}a--}if(r)throw Error("Found an unpaired surrogate");s=65533}o[i++]=s>>12|224,o[i++]=s>>6&63|128}o[i++]=63&s|128}}e=i===o.length?o:o.subarray(0,i)}wt(t.h,8*n+2),wt(t.h,e.length),Ct(t,t.h.end()),Ct(t,e)}})),Ue=Re((function(t,e,n,r,i){if(2!==t.i)return!1;e=Qt(e,n,r),n=t.h.j,r=gt(t.h)>>>0;var o=t.h.h+r,a=o-n;if(0>=a&&(t.h.j=o,i(e,t,void 0,void 0,void 0),a=o-t.h.h),a)throw Error("Message parsing ended unexpectedly. Expected to read "+r+" bytes, instead read "+(r-a)+" bytes, either the data ended unexpectedly or the message misreported its own length");return t.h.h=o,t.h.j=n,!0}),(function(t,e,n,r,i){if(null!=(e=Kt(e,r,n)))for(r=0;r<e.length;r++){var o=t;wt(o.h,8*n+2);var a=o.h.end();Ct(o,a),a.push(o.i),o=a,i(e[r],t),a=t;var s=o.pop();for(s=a.i+a.h.length()-s;127<s;)o.push(127&s|128),s>>>=7,a.i++;o.push(s),a.i++}}));function je(t){return function(e,n){t:{if(At.length){var r=At.pop();r.setOptions(n),pt(r.h,e,n),e=r}else e=new _t(e,n);try{var i=Pe(t),o=Oe(new i.P,e,i);break t}finally{(i=e.h).i=null,i.m=!1,i.l=0,i.j=0,i.h=0,i.S=!1,e.l=-1,e.i=-1,100>At.length&&At.push(e)}o=void 0}return o}}function Ve(t){return function(){var e=new Mt;Le(this,e,Me(t)),Ct(e,e.h.end());for(var n=new Uint8Array(e.i),r=e.j,i=r.length,o=0,a=0;a<i;a++){var s=r[a];n.set(s,o),o+=s.length}return e.j=[n],n}}function He(t){le.call(this,t)}m(He,le);var Ge=[He,1,Fe,2,De,3,Be,4,Be];function We(t){le.call(this,t,-1,Xe)}He.prototype.l=Ve(Ge),m(We,le),We.prototype.addClassification=function(t,e){return Qt(this,1,He,t,e),this};var Xe=[1],Ye=je([We,1,Ue,Ge]);function qe(t){le.call(this,t)}m(qe,le);var $e=[qe,1,De,2,De,3,De,4,De,5,De];function Ke(t){le.call(this,t,-1,Ze)}qe.prototype.l=Ve($e),m(Ke,le);var Ze=[1],Qe=je([Ke,1,Ue,$e]);function Je(t){le.call(this,t)}m(Je,le);var tn=[Je,1,De,2,De,3,De,4,De,5,De,6,ze],en=je(tn);function nn(t,e,n){if(n=t.createShader(0===n?t.VERTEX_SHADER:t.FRAGMENT_SHADER),t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw Error("Could not compile WebGL shader.\n\n"+t.getShaderInfoLog(n));return n}function rn(t){return Kt(t,He,1).map((function(t){var e=Gt(t,1);return{index:null==e?0:e,qa:te(t,2),label:null!=Gt(t,3)?Jt(Gt(t,3),""):void 0,displayName:null!=Gt(t,4)?Jt(Gt(t,4),""):void 0}}))}function on(t){return{x:te(t,1),y:te(t,2),z:te(t,3),visibility:null!=qt(t,4)?te(t,4):void 0}}function an(t){return Kt(Qe(t),qe,1).map(on)}function sn(t,e){this.i=t,this.h=e,this.m=0}function un(t,e,n){return function(t,e){var n=t.h;if(void 0===t.s){var r=nn(n,"\n  attribute vec2 aVertex;\n  attribute vec2 aTex;\n  varying vec2 vTex;\n  void main(void) {\n    gl_Position = vec4(aVertex, 0.0, 1.0);\n    vTex = aTex;\n  }",0),i=nn(n,"\n  precision mediump float;\n  varying vec2 vTex;\n  uniform sampler2D sampler0;\n  void main(){\n    gl_FragColor = texture2D(sampler0, vTex);\n  }",1),o=n.createProgram();if(n.attachShader(o,r),n.attachShader(o,i),n.linkProgram(o),!n.getProgramParameter(o,n.LINK_STATUS))throw Error("Could not compile WebGL program.\n\n"+n.getProgramInfoLog(o));r=t.s=o,n.useProgram(r),i=n.getUniformLocation(r,"sampler0"),t.l={O:n.getAttribLocation(r,"aVertex"),N:n.getAttribLocation(r,"aTex"),ya:i},t.v=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,t.v),n.enableVertexAttribArray(t.l.O),n.vertexAttribPointer(t.l.O,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),t.u=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,t.u),n.enableVertexAttribArray(t.l.N),n.vertexAttribPointer(t.l.N,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.uniform1i(i,0)}r=t.l,n.useProgram(t.s),n.canvas.width=e.width,n.canvas.height=e.height,n.viewport(0,0,e.width,e.height),n.activeTexture(n.TEXTURE0),t.i.bindTexture2d(e.glName),n.enableVertexAttribArray(r.O),n.bindBuffer(n.ARRAY_BUFFER,t.v),n.vertexAttribPointer(r.O,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(r.N),n.bindBuffer(n.ARRAY_BUFFER,t.u),n.vertexAttribPointer(r.N,2,n.FLOAT,!1,0,0),n.bindFramebuffer(n.DRAW_FRAMEBUFFER?n.DRAW_FRAMEBUFFER:n.FRAMEBUFFER,null),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.colorMask(!0,!0,!0,!0),n.drawArrays(n.TRIANGLE_FAN,0,4),n.disableVertexAttribArray(r.O),n.disableVertexAttribArray(r.N),n.bindBuffer(n.ARRAY_BUFFER,null),t.i.bindTexture2d(0)}(t,e),"function"==typeof t.h.canvas.transferToImageBitmap?Promise.resolve(t.h.canvas.transferToImageBitmap()):n?Promise.resolve(t.h.canvas):"function"==typeof createImageBitmap?createImageBitmap(t.h.canvas):(void 0===t.j&&(t.j=document.createElement("canvas")),new Promise((function(e){t.j.height=t.h.canvas.height,t.j.width=t.h.canvas.width,t.j.getContext("2d",{}).drawImage(t.h.canvas,0,0,t.h.canvas.width,t.h.canvas.height),e(t.j)})))}function ln(t){this.h=t}Je.prototype.l=Ve(tn);var cn=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function hn(t,e){return e+t}function dn(t,e){window[t]=e}function fn(t){if(this.h=t,this.listeners={},this.l={},this.L={},this.s={},this.v={},this.M=this.u=this.ga=!0,this.I=Promise.resolve(),this.fa="",this.D={},this.locateFile=t&&t.locateFile||hn,"object"==typeof window)var e=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if("undefined"==typeof location)throw Error("solutions can only be loaded on a web page or in a web worker");e=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.ha=e,t.options)for(var n=(e=s(Object.keys(t.options))).next();!n.done;n=e.next()){n=n.value;var r=t.options[n].default;void 0!==r&&(this.l[n]="function"==typeof r?r():r)}}function pn(t){var e,n,r,i,o,a,s,l,c,h,d;return E((function(f){switch(f.h){case 1:return t.ga?(e=void 0===t.h.files?[]:"function"==typeof t.h.files?t.h.files(t.l):t.h.files,b(f,E((function(t){switch(t.h){case 1:return t.s=2,b(t,WebAssembly.instantiate(cn),4);case 4:t.h=3,t.s=0;break;case 2:return t.s=0,t.l=null,t.return(!1);case 3:return t.return(!0)}})),2)):f.return();case 2:if(n=f.i,"object"==typeof window)return dn("createMediapipeSolutionsWasm",{locateFile:t.locateFile}),dn("createMediapipeSolutionsPackedAssets",{locateFile:t.locateFile}),a=e.filter((function(t){return void 0!==t.data})),s=e.filter((function(t){return void 0===t.data})),l=Promise.all(a.map((function(e){var n=mn(t,e.url);if(void 0!==e.path){var r=e.path;n=n.then((function(e){return t.overrideFile(r,e),Promise.resolve(e)}))}return n}))),c=Promise.all(s.map((function(e){return void 0===e.simd||e.simd&&n||!e.simd&&!n?function(t){var e=document.createElement("script");return e.setAttribute("src",t),e.setAttribute("crossorigin","anonymous"),new Promise((function(t){e.addEventListener("load",(function(){t()}),!1),e.addEventListener("error",(function(){t()}),!1),document.body.appendChild(e)}))}(t.locateFile(e.url,t.ha)):Promise.resolve()}))).then((function(){var e,n,r;return E((function(i){if(1==i.h)return e=window.createMediapipeSolutionsWasm,n=window.createMediapipeSolutionsPackedAssets,r=t,b(i,e(n),2);r.i=i.i,i.h=0}))})),h=E((function(e){return t.h.graph&&t.h.graph.url?e=b(e,mn(t,t.h.graph.url),0):(e.h=0,e=void 0),e})),b(f,Promise.all([c,l,h]),7);if("function"!=typeof importScripts)throw Error("solutions can only be loaded on a web page or in a web worker");return r=e.filter((function(t){return void 0===t.simd||t.simd&&n||!t.simd&&!n})).map((function(e){return t.locateFile(e.url,t.ha)})),importScripts.apply(null,u(r)),i=t,b(f,createMediapipeSolutionsWasm(Module),6);case 6:i.i=f.i,t.m=new OffscreenCanvas(1,1),t.i.canvas=t.m,o=t.i.GL.createContext(t.m,{antialias:!1,alpha:!1,va:"undefined"!=typeof WebGL2RenderingContext?2:1}),t.i.GL.makeContextCurrent(o),f.h=4;break;case 7:if(t.m=document.createElement("canvas"),!(d=t.m.getContext("webgl2",{}))&&!(d=t.m.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),f.return();t.K=d,t.i.canvas=t.m,t.i.createContext(t.m,!0,!0,{});case 4:t.j=new t.i.SolutionWasm,t.ga=!1,f.h=0}}))}function mn(t,e){var n,r;return E((function(i){return e in t.L?i.return(t.L[e]):(n=t.locateFile(e,""),r=fetch(n).then((function(t){return t.arrayBuffer()})),t.L[e]=r,i.return(r))}))}function gn(t,e,n){var r,i,o,a,u,l,c,h,d,f,p,m,g,v;return E((function(y){switch(y.h){case 1:if(!n)return y.return(e);for(r={},i=0,o=s(Object.keys(n)),a=o.next();!a.done;a=o.next())u=a.value,"string"!=typeof(l=n[u])&&"texture"===l.type&&void 0!==e[l.stream]&&++i;1<i&&(t.M=!1),c=s(Object.keys(n)),a=c.next();case 2:if(a.done){y.h=4;break}if(h=a.value,"string"==typeof(d=n[h]))return g=r,v=h,b(y,function(t,e,n){var r;return E((function(i){return"number"==typeof n||n instanceof Uint8Array||n instanceof t.i.Uint8BlobList?i.return(n):n instanceof t.i.Texture2dDataOut?((r=t.v[e])||(r=new sn(t.i,t.K),t.v[e]=r),i.return(un(r,n,t.M))):i.return(void 0)}))}(t,h,e[d]),14);if(f=e[d.stream],"detection_list"===d.type){if(f){for(var x=f.getRectList(),w=f.getLandmarksList(),_=f.getClassificationsList(),S=[],A=0;A<x.size();++A){var M=en(x.get(A)),C=void 0;C=void 0===C?0:C,M={la:{sa:te(M,1),ta:te(M,2),height:te(M,3),width:te(M,4),rotation:te(M,5,0),pa:Jt(Gt(M,6),C)},ea:an(w.get(A)),ba:rn(Ye(_.get(A)))},S.push(M)}x=S}else x=[];r[h]=x,y.h=7;break}if("proto_list"===d.type){if(f){for(x=Array(f.size()),w=0;w<f.size();w++)x[w]=f.get(w);f.delete()}else x=[];r[h]=x,y.h=7;break}if(void 0===f){y.h=3;break}if("float_list"===d.type){r[h]=f,y.h=7;break}if("proto"===d.type){r[h]=f,y.h=7;break}if("texture"!==d.type)throw Error("Unknown output config type: '"+d.type+"'");return(p=t.v[h])||(p=new sn(t.i,t.K),t.v[h]=p),b(y,un(p,f,t.M),13);case 13:m=y.i,r[h]=m;case 7:d.transform&&r[h]&&(r[h]=d.transform(r[h])),y.h=3;break;case 14:g[v]=y.i;case 3:a=c.next(),y.h=2;break;case 4:return y.return(r)}}))}function vn(t,e){for(var n=e.name||"$",r=[].concat(u(e.wants)),i=new t.i.StringList,o=s(e.wants),a=o.next();!a.done;a=o.next())i.push_back(a.value);o=t.i.PacketListener.implement({onResults:function(i){for(var o={},a=0;a<e.wants.length;++a)o[r[a]]=i.get(a);var s=t.listeners[n];s&&(t.I=gn(t,o,e.outs).then((function(n){n=s(n);for(var i=0;i<e.wants.length;++i){var a=o[r[i]];"object"==typeof a&&a.hasOwnProperty&&a.hasOwnProperty("delete")&&a.delete()}n&&(t.I=n)})))}}),t.j.attachMultiListener(i,o),i.delete()}function yn(t){switch(void 0===t&&(t=0),t){case 1:return"pose_landmark_full.tflite";case 2:return"pose_landmark_heavy.tflite";default:return"pose_landmark_lite.tflite"}}function bn(t){var e=this;t=t||{},this.h=new fn({locateFile:t.locateFile,files:function(t){return[{url:"pose_solution_packed_assets_loader.js"},{simd:!1,url:"pose_solution_wasm_bin.js"},{simd:!0,url:"pose_solution_simd_wasm_bin.js"},{data:!0,url:yn(t.modelComplexity)}]},graph:{url:"pose_web.binarypb"},listeners:[{wants:["pose_landmarks","world_landmarks","segmentation_mask","image_transformed"],outs:{image:{type:"texture",stream:"image_transformed"},poseLandmarks:{type:"proto",stream:"pose_landmarks",transform:an},poseWorldLandmarks:{type:"proto",stream:"world_landmarks",transform:an},segmentationMask:{type:"texture",stream:"segmentation_mask"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"object"==typeof window&&void 0!==window.navigator&&("iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document)},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(t){var n,r,i;return E((function(o){return 1==o.h?(n=yn(t),r="third_party/mediapipe/modules/pose_landmark/"+n,b(o,mn(e.h,n),2)):(i=o.i,e.h.overrideFile(r,i),o.return(!0))}))}},smoothLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothLandmarks",fieldName:"bool_value"}},enableSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorEnableSegmentation",fieldName:"bool_value"}},smoothSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothSegmentation",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"poselandmarkgpu__posedetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"poselandmarkgpu__poselandmarkbyroigpu__tensorstoposelandmarksandsegmentation__ThresholdingCalculator",fieldName:"threshold"}}}})}(t=fn.prototype).close=function(){return this.j&&this.j.delete(),Promise.resolve()},t.reset=function(){var t=this;return E((function(e){t.j&&(t.j.reset(),t.s={},t.v={}),e.h=0}))},t.setOptions=function(t,e){var n=this;if(e=e||this.h.options){for(var r=[],i=[],o={},a=s(Object.keys(t)),u=a.next();!u.done;o={X:o.X,Y:o.Y},u=a.next())if(!((u=u.value)in this.l)||this.l[u]!==t[u]){this.l[u]=t[u];var l=e[u];void 0!==l&&(l.onChange&&(o.X=l.onChange,o.Y=t[u],r.push(function(t){return function(){return E((function(e){if(1==e.h)return b(e,t.X(t.Y),2);!0===e.i&&(n.u=!0),e.h=0}))}}(o))),l.graphOptionXref&&(u=Object.assign({},{calculatorName:"",calculatorIndex:0},l.graphOptionXref,{valueNumber:1===l.type?t[u]:0,valueBoolean:0===l.type&&t[u],valueString:2===l.type?t[u]:""}),i.push(u)))}0===r.length&&0===i.length||(this.u=!0,this.H=(void 0===this.H?[]:this.H).concat(i),this.F=(void 0===this.F?[]:this.F).concat(r))}},t.initialize=function(){var t=this;return E((function(e){return 1==e.h?b(e,pn(t),2):3!=e.h?b(e,function(t){var e,n,r,i,o,a,u,l;return E((function(c){if(1==c.h)return t.h.graph&&t.h.graph.url&&t.fa===t.h.graph.url?c.return():(t.u=!0,t.h.graph&&t.h.graph.url?(t.fa=t.h.graph.url,b(c,mn(t,t.h.graph.url),3)):void(c.h=2));for(2!=c.h&&(e=c.i,t.j.loadGraph(e)),n=s(Object.keys(t.D)),r=n.next();!r.done;r=n.next())i=r.value,t.j.overrideFile(i,t.D[i]);if(t.D={},t.h.listeners)for(o=s(t.h.listeners),a=o.next();!a.done;a=o.next())u=a.value,vn(t,u);l=t.l,t.l={},t.setOptions(l),c.h=0}))}(t),3):b(e,function(t){var e,n,r,i,o,a;return E((function(u){switch(u.h){case 1:if(!t.u)return u.return();if(!t.F){u.h=2;break}e=s(t.F),n=e.next();case 3:if(n.done){u.h=5;break}return b(u,(0,n.value)(),4);case 4:n=e.next(),u.h=3;break;case 5:t.F=void 0;case 2:if(t.H){for(r=new t.i.GraphOptionChangeRequestList,i=s(t.H),o=i.next();!o.done;o=i.next())a=o.value,r.push_back(a);t.j.changeOptions(r),r.delete(),t.H=void 0}t.u=!1,u.h=0}}))}(t),0)}))},t.overrideFile=function(t,e){this.j?this.j.overrideFile(t,e):this.D[t]=e},t.clearOverriddenFiles=function(){this.D={},this.j&&this.j.clearOverriddenFiles()},t.send=function(t,e){var n,r,i,o,a,u,l,c,h,d=this;return E((function(f){switch(f.h){case 1:return d.h.inputs?(n=1e3*(null==e?performance.now():e),b(f,d.I,2)):f.return();case 2:return b(f,d.initialize(),3);case 3:for(r=new d.i.PacketDataList,i=s(Object.keys(t)),o=i.next();!o.done;o=i.next())if(a=o.value,u=d.h.inputs[a]){t:{var p=t[a];switch(u.type){case"video":var m=d.s[u.stream];if(m||(m=new sn(d.i,d.K),d.s[u.stream]=m),0===m.m&&(m.m=m.i.createTexture()),"undefined"!=typeof HTMLVideoElement&&p instanceof HTMLVideoElement)var g=p.videoWidth,v=p.videoHeight;else"undefined"!=typeof HTMLImageElement&&p instanceof HTMLImageElement?(g=p.naturalWidth,v=p.naturalHeight):(g=p.width,v=p.height);v={glName:m.m,width:g,height:v},(g=m.h).canvas.width=v.width,g.canvas.height=v.height,g.activeTexture(g.TEXTURE0),m.i.bindTexture2d(m.m),g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,p),m.i.bindTexture2d(0),m=v;break t;case"detections":for((m=d.s[u.stream])||(m=new ln(d.i),d.s[u.stream]=m),m.data||(m.data=new m.h.DetectionListData),m.data.reset(p.length),v=0;v<p.length;++v){g=p[v];var y=m.data,x=y.setBoundingBox,w=v,_=g.la,S=new Je;if(Zt(S,1,_.sa),Zt(S,2,_.ta),Zt(S,3,_.height),Zt(S,4,_.width),Zt(S,5,_.rotation),Wt(S,6,_.pa),_=S.l(),x.call(y,w,_),g.ea)for(y=0;y<g.ea.length;++y){S=g.ea[y],w=(x=m.data).addNormalizedLandmark,_=v,S=Object.assign({},S,{visibility:S.visibility?S.visibility:0});var E=new qe;Zt(E,1,S.x),Zt(E,2,S.y),Zt(E,3,S.z),S.visibility&&Zt(E,4,S.visibility),S=E.l(),w.call(x,_,S)}if(g.ba)for(y=0;y<g.ba.length;++y)w=(x=m.data).addClassification,_=v,S=g.ba[y],Zt(E=new He,2,S.qa),S.index&&Wt(E,1,S.index),S.label&&Wt(E,3,S.label),S.displayName&&Wt(E,4,S.displayName),S=E.l(),w.call(x,_,S)}m=m.data;break t;default:m={}}}switch(l=m,c=u.stream,u.type){case"video":r.pushTexture2d(Object.assign({},l,{stream:c,timestamp:n}));break;case"detections":(h=l).stream=c,h.timestamp=n,r.pushDetectionList(h);break;default:throw Error("Unknown input config type: '"+u.type+"'")}}return d.j.send(r),b(f,d.I,4);case 4:r.delete(),f.h=0}}))},t.onResults=function(t,e){this.listeners[e||"$"]=t},C("Solution",fn),C("OptionType",{BOOL:0,NUMBER:1,ua:2,0:"BOOL",1:"NUMBER",2:"STRING"}),(t=bn.prototype).reset=function(){this.h.reset()},t.close=function(){return this.h.close(),Promise.resolve()},t.onResults=function(t){this.h.onResults(t)},t.initialize=function(){var t=this;return E((function(e){return b(e,t.h.initialize(),0)}))},t.send=function(t,e){var n=this;return E((function(r){return b(r,n.h.send(t,e),0)}))},t.setOptions=function(t){this.h.setOptions(t)},C("Pose",bn),C("POSE_CONNECTIONS",[[0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]]),C("POSE_LANDMARKS",{NOSE:0,LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,LEFT_EAR:7,RIGHT_EAR:8,LEFT_RIGHT:9,RIGHT_LEFT:10,LEFT_SHOULDER:11,RIGHT_SHOULDER:12,LEFT_ELBOW:13,RIGHT_ELBOW:14,LEFT_WRIST:15,RIGHT_WRIST:16,LEFT_PINKY:17,RIGHT_PINKY:18,LEFT_INDEX:19,RIGHT_INDEX:20,LEFT_THUMB:21,RIGHT_THUMB:22,LEFT_HIP:23,RIGHT_HIP:24,LEFT_KNEE:25,RIGHT_KNEE:26,LEFT_ANKLE:27,RIGHT_ANKLE:28,LEFT_HEEL:29,RIGHT_HEEL:30,LEFT_FOOT_INDEX:31,RIGHT_FOOT_INDEX:32}),C("POSE_LANDMARKS_LEFT",{LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,LEFT_EAR:7,LEFT_RIGHT:9,LEFT_SHOULDER:11,LEFT_ELBOW:13,LEFT_WRIST:15,LEFT_PINKY:17,LEFT_INDEX:19,LEFT_THUMB:21,LEFT_HIP:23,LEFT_KNEE:25,LEFT_ANKLE:27,LEFT_HEEL:29,LEFT_FOOT_INDEX:31}),C("POSE_LANDMARKS_RIGHT",{RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,RIGHT_EAR:8,RIGHT_LEFT:10,RIGHT_SHOULDER:12,RIGHT_ELBOW:14,RIGHT_WRIST:16,RIGHT_PINKY:18,RIGHT_INDEX:20,RIGHT_THUMB:22,RIGHT_HIP:24,RIGHT_KNEE:26,RIGHT_ANKLE:28,RIGHT_HEEL:30,RIGHT_FOOT_INDEX:32}),C("POSE_LANDMARKS_NEUTRAL",{NOSE:0}),C("VERSION","0.5.1675469404")}).call(this)},39958:function(t,e,n){(function(){"use strict";var t;function e(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}var r="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){return t==Array.prototype||t==Object.prototype||(t[e]=n.value),t};var i=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g];for(var e=0;e<t.length;++e){var r=t[e];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);function o(t,e){if(e)t:{var n=i;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];if(!(a in n))break t;n=n[a]}(e=e(o=n[t=t[t.length-1]]))!=o&&null!=e&&r(n,t,{configurable:!0,writable:!0,value:e})}}function a(t){return(t={next:t})[Symbol.iterator]=function(){return this},t}function s(t){var n="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return n?n.call(t):{next:e(t)}}function u(t){if(!(t instanceof Array)){t=s(t);for(var e,n=[];!(e=t.next()).done;)n.push(e.value);t=n}return t}o("Symbol",(function(t){function e(t,e){this.h=t,r(this,"description",{configurable:!0,writable:!0,value:e})}if(t)return t;e.prototype.toString=function(){return this.h};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return function t(r){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new e(n+(r||"")+"_"+i++,r)}})),o("Symbol.iterator",(function(t){if(t)return t;t=Symbol("Symbol.iterator");for(var n="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),o=0;o<n.length;o++){var s=i[n[o]];"function"==typeof s&&"function"!=typeof s.prototype[t]&&r(s.prototype,t,{configurable:!0,writable:!0,value:function(){return a(e(this))}})}return t}));var l="function"==typeof Object.assign?Object.assign:function(t,e){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t};o("Object.assign",(function(t){return t||l}));var c,h="function"==typeof Object.create?Object.create:function(t){function e(){}return e.prototype=t,new e};if("function"==typeof Object.setPrototypeOf)c=Object.setPrototypeOf;else{var d;t:{var f={};try{f.__proto__={a:!0},d=f.a;break t}catch(t){}d=!1}c=d?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var p=c;function m(t,e){if(t.prototype=h(e.prototype),t.prototype.constructor=t,p)p(t,e);else for(var n in e)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(e,n);r&&Object.defineProperty(t,n,r)}else t[n]=e[n];t.za=e.prototype}function g(){this.m=!1,this.j=null,this.i=void 0,this.h=1,this.v=this.s=0,this.l=null}function v(t){if(t.m)throw new TypeError("Generator is already running");t.m=!0}function y(t,e){t.l={ma:e,na:!0},t.h=t.s||t.v}function b(t,e,n){return t.h=n,{value:e}}function x(t){this.h=new g,this.i=t}function w(t,e,n,r){try{var i=e.call(t.h.j,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return t.h.m=!1,i;var o=i.value}catch(e){return t.h.j=null,y(t.h,e),_(t)}return t.h.j=null,r.call(t.h,o),_(t)}function _(t){for(;t.h.h;)try{var e=t.i(t.h);if(e)return t.h.m=!1,{value:e.value,done:!1}}catch(e){t.h.i=void 0,y(t.h,e)}if(t.h.m=!1,t.h.l){if(e=t.h.l,t.h.l=null,e.na)throw e.ma;return{value:e.return,done:!0}}return{value:void 0,done:!0}}function S(t){this.next=function(e){return v(t.h),t.h.j?e=w(t,t.h.j.next,e,t.h.u):(t.h.u(e),e=_(t)),e},this.throw=function(e){return v(t.h),t.h.j?e=w(t,t.h.j.throw,e,t.h.u):(y(t.h,e),e=_(t)),e},this.return=function(e){return function(t,e){v(t.h);var n=t.h.j;return n?w(t,"return"in n?n.return:function(t){return{value:t,done:!0}},e,t.h.return):(t.h.return(e),_(t))}(t,e)},this[Symbol.iterator]=function(){return this}}function E(t){return function(t){function e(e){return t.next(e)}function n(e){return t.throw(e)}return new Promise((function(r,i){!function t(o){o.done?r(o.value):Promise.resolve(o.value).then(e,n).then(t,i)}(t.next())}))}(new S(new x(t)))}function A(t){return t||Array.prototype.fill}g.prototype.u=function(t){this.i=t},g.prototype.return=function(t){this.l={return:t},this.h=this.v},o("Promise",(function(t){function e(t){this.i=0,this.j=void 0,this.h=[],this.u=!1;var e=this.l();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.h=null}function r(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.i=function(t){if(null==this.h){this.h=[];var e=this;this.j((function(){e.m()}))}this.h.push(t)};var o=i.setTimeout;n.prototype.j=function(t){o(t,0)},n.prototype.m=function(){for(;this.h&&this.h.length;){var t=this.h;this.h=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.l(t)}}}this.h=null},n.prototype.l=function(t){this.j((function(){throw t}))},e.prototype.l=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.I),reject:t(this.m)}},e.prototype.I=function(t){if(t===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.L(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.F(t):this.s(t)}},e.prototype.F=function(t){var e=void 0;try{e=t.then}catch(t){return void this.m(t)}"function"==typeof e?this.M(e,t):this.s(t)},e.prototype.m=function(t){this.v(2,t)},e.prototype.s=function(t){this.v(1,t)},e.prototype.v=function(t,e){if(0!=this.i)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.i);this.i=t,this.j=e,2===this.i&&this.K(),this.H()},e.prototype.K=function(){var t=this;o((function(){if(t.D()){var e=i.console;void 0!==e&&e.error(t.j)}}),1)},e.prototype.D=function(){if(this.u)return!1;var t=i.CustomEvent,e=i.Event,n=i.dispatchEvent;return void 0===n||("function"==typeof t?t=new t("unhandledrejection",{cancelable:!0}):"function"==typeof e?t=new e("unhandledrejection",{cancelable:!0}):(t=i.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,t),t.promise=this,t.reason=this.j,n(t))},e.prototype.H=function(){if(null!=this.h){for(var t=0;t<this.h.length;++t)a.i(this.h[t]);this.h=null}};var a=new n;return e.prototype.L=function(t){var e=this.l();t.T(e.resolve,e.reject)},e.prototype.M=function(t,e){var n=this.l();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.T(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.T=function(t,e){function n(){switch(r.i){case 1:t(r.j);break;case 2:e(r.j);break;default:throw Error("Unexpected state: "+r.i)}}var r=this;null==this.h?a.i(n):this.h.push(n),this.u=!0},e.resolve=r,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var i=s(t),o=i.next();!o.done;o=i.next())r(o.value).T(e,n)}))},e.all=function(t){var n=s(t),i=n.next();return i.done?r([]):new e((function(t,e){function o(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,r(i.value).T(o(a.length-1),e),i=n.next()}while(!i.done)}))},e})),o("Array.prototype.keys",(function(t){return t||function(){return function(t,e){t instanceof String&&(t+="");var n=0,r=!1,i={next:function(){if(!r&&n<t.length){var i=n++;return{value:e(i,t[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(t){return t}))}})),o("Array.prototype.fill",(function(t){return t||function(t,e,n){var r=this.length||0;for(0>e&&(e=Math.max(0,r+e)),(null==n||n>r)&&(n=r),0>(n=Number(n))&&(n=Math.max(0,r+n)),e=Number(e||0);e<n;e++)this[e]=t;return this}})),o("Int8Array.prototype.fill",A),o("Uint8Array.prototype.fill",A),o("Uint8ClampedArray.prototype.fill",A),o("Int16Array.prototype.fill",A),o("Uint16Array.prototype.fill",A),o("Int32Array.prototype.fill",A),o("Uint32Array.prototype.fill",A),o("Float32Array.prototype.fill",A),o("Float64Array.prototype.fill",A),o("Object.is",(function(t){return t||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}})),o("Array.prototype.includes",(function(t){return t||function(t,e){var n=this;n instanceof String&&(n=String(n));var r=n.length;for(0>(e=e||0)&&(e=Math.max(e+r,0));e<r;e++){var i=n[e];if(i===t||Object.is(i,t))return!0}return!1}})),o("String.prototype.includes",(function(t){return t||function(t,e){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(t,e||0)}}));var M=this||self;function C(t,e){t=t.split(".");var n,r=M;t[0]in r||void 0===r.execScript||r.execScript("var "+t[0]);for(;t.length&&(n=t.shift());)t.length||void 0===e?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=e}function T(t){var e;return(e=M.navigator)&&(e=e.userAgent)||(e=""),-1!=e.indexOf(t)}var k=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},I={},N=null;function P(t){var e=t.length,n=3*e/4;n%3?n=Math.floor(n):-1!="=.".indexOf(t[e-1])&&(n=-1!="=.".indexOf(t[e-2])?n-2:n-1);var r=new Uint8Array(n),i=0;return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=N[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}O();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){r[i++]=t})),i!==n?r.subarray(0,i):r}function O(){if(!N){N={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++){var r=t.concat(e[n].split(""));I[n]=r;for(var i=0;i<r.length;i++){var o=r[i];void 0===N[o]&&(N[o]=i)}}}}var L="undefined"!=typeof Uint8Array,R=!(T("Trident")||T("MSIE"))&&"function"==typeof M.btoa;function D(t){if(!R){var e;void 0===e&&(e=0),O(),e=I[e];for(var n=Array(Math.floor(t.length/3)),r=e[64]||"",i=0,o=0;i<t.length-2;i+=3){var a=t[i],s=t[i+1],u=t[i+2],l=e[a>>2];a=e[(3&a)<<4|s>>4],s=e[(15&s)<<2|u>>6],u=e[63&u],n[o++]=l+a+s+u}switch(l=0,u=r,t.length-i){case 2:u=e[(15&(l=t[i+1]))<<2]||r;case 1:t=t[i],n[o]=e[t>>2]+e[(3&t)<<4|l>>4]+u+r}return n.join("")}for(e="";10240<t.length;)e+=String.fromCharCode.apply(null,t.subarray(0,10240)),t=t.subarray(10240);return e+=String.fromCharCode.apply(null,t),btoa(e)}var z,F=RegExp("[-_.]","g");function B(t){switch(t){case"-":return"+";case"_":return"/";case".":return"=";default:return""}}function U(t){if(!R)return P(t);F.test(t)&&(t=t.replace(F,B)),t=atob(t);for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}function j(){return z||(z=new Uint8Array(0))}var V={},H="function"==typeof Uint8Array.prototype.slice,G=0,W=0;function X(t){var e=0>t,n=(t=Math.abs(t))>>>0;t=Math.floor((t-n)/4294967296),e&&(e=(n=s($(n,t))).next().value,t=n.next().value,n=e),G=n>>>0,W=t>>>0}var Y,q="function"==typeof BigInt;function $(t,e){return e=~e,t?t=1+~t:e+=1,[t,e]}function K(t,e){this.i=t>>>0,this.h=e>>>0}function Z(t){if(!t)return Y||(Y=new K(0,0));if(!/^-?\d+$/.test(t))return null;if(16>t.length)X(Number(t));else if(q)t=BigInt(t),G=Number(t&BigInt(4294967295))>>>0,W=Number(t>>BigInt(32)&BigInt(4294967295));else{var e=+("-"===t[0]);W=G=0;for(var n=t.length,r=e,i=(n-e)%6+e;i<=n;r=i,i+=6)r=Number(t.slice(r,i)),W*=1e6,4294967296<=(G=1e6*G+r)&&(W+=G/4294967296|0,G%=4294967296);e&&(t=(e=s($(G,W))).next().value,e=e.next().value,G=t,W=e)}return new K(G,W)}function Q(t,e){return Error("Invalid wire type: "+t+" (at position "+e+")")}function J(){return Error("Failed to read varint, encoding is invalid.")}function tt(t,e){return Error("Tried to read past the end of the data "+e+" > "+t)}function et(){throw Error("Invalid UTF8")}function nt(t,e){return e=String.fromCharCode.apply(null,e),null==t?e:t+e}var rt,it,ot,at=void 0,st="undefined"!=typeof TextDecoder,ut="undefined"!=typeof TextEncoder;function lt(t){if(t!==V)throw Error("illegal external caller")}function ct(t,e){if(lt(e),this.V=t,null!=t&&0===t.length)throw Error("ByteString should be constructed with non-empty values")}function ht(){return ot||(ot=new ct(null,V))}function dt(t){lt(V);var e=t.V;return null==(e=null==e||L&&null!=e&&e instanceof Uint8Array?e:"string"==typeof e?U(e):null)?e:t.V=e}function ft(t,e){this.i=null,this.m=!1,this.h=this.j=this.l=0,pt(this,t,e)}function pt(t,e,n){n=void 0===n?{}:n,t.S=void 0!==n.S&&n.S,e&&(e=function(t){if("string"==typeof t)return{buffer:U(t),C:!1};if(Array.isArray(t))return{buffer:new Uint8Array(t),C:!1};if(t.constructor===Uint8Array)return{buffer:t,C:!1};if(t.constructor===ArrayBuffer)return{buffer:new Uint8Array(t),C:!1};if(t.constructor===ct)return{buffer:dt(t)||j(),C:!0};if(t instanceof Uint8Array)return{buffer:new Uint8Array(t.buffer,t.byteOffset,t.byteLength),C:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}(e),t.i=e.buffer,t.m=e.C,t.l=0,t.j=t.i.length,t.h=t.l)}function mt(t,e){if(t.h=e,e>t.j)throw tt(t.j,e)}function gt(t){var e=t.i,n=t.h,r=e[n++],i=127&r;if(128&r&&(i|=(127&(r=e[n++]))<<7,128&r&&(i|=(127&(r=e[n++]))<<14,128&r&&(i|=(127&(r=e[n++]))<<21,128&r&&(i|=(r=e[n++])<<28,128&r&&128&e[n++]&&128&e[n++]&&128&e[n++]&&128&e[n++]&&128&e[n++])))))throw J();return mt(t,n),i}function vt(t,e){if(0>e)throw Error("Tried to read a negative byte length: "+e);var n=t.h,r=n+e;if(r>t.j)throw tt(e,t.j-n);return t.h=r,n}ft.prototype.reset=function(){this.h=this.l};var yt=[];function bt(){this.h=[]}function xt(t,e,n){for(;0<n||127<e;)t.h.push(127&e|128),e=(e>>>7|n<<25)>>>0,n>>>=7;t.h.push(e)}function wt(t,e){for(;127<e;)t.h.push(127&e|128),e>>>=7;t.h.push(e)}function _t(t,e){if(yt.length){var n=yt.pop();pt(n,t,e),t=n}else t=new ft(t,e);this.h=t,this.j=this.h.h,this.i=this.l=-1,this.setOptions(e)}function St(t){var e=t.h;if(e.h==e.j)return!1;t.j=t.h.h;var n=gt(t.h)>>>0;if(e=n>>>3,!(0<=(n&=7)&&5>=n))throw Q(n,t.j);if(1>e)throw Error("Invalid field number: "+e+" (at position "+t.j+")");return t.l=e,t.i=n,!0}function Et(t){switch(t.i){case 0:if(0!=t.i)Et(t);else t:{for(var e=(t=t.h).h,n=e+10,r=t.i;e<n;)if(!(128&r[e++])){mt(t,e);break t}throw J()}break;case 1:mt(t=t.h,t.h+8);break;case 2:2!=t.i?Et(t):(e=gt(t.h)>>>0,mt(t=t.h,t.h+e));break;case 5:mt(t=t.h,t.h+4);break;case 3:for(e=t.l;;){if(!St(t))throw Error("Unmatched start-group tag: stream EOF");if(4==t.i){if(t.l!=e)throw Error("Unmatched end-group tag");break}Et(t)}break;default:throw Q(t.i,t.j)}}bt.prototype.length=function(){return this.h.length},bt.prototype.end=function(){var t=this.h;return this.h=[],t},_t.prototype.setOptions=function(t){t=void 0===t?{}:t,this.ca=void 0!==t.ca&&t.ca},_t.prototype.reset=function(){this.h.reset(),this.j=this.h.h,this.i=this.l=-1};var At=[];function Mt(){this.j=[],this.i=0,this.h=new bt}function Ct(t,e){0!==e.length&&(t.j.push(e),t.i+=e.length)}var Tt="function"==typeof Symbol&&"symbol"==typeof Symbol()?Symbol():void 0;function kt(t,e){return Tt?t[Tt]|=e:void 0!==t.A?t.A|=e:(Object.defineProperties(t,{A:{value:e,configurable:!0,writable:!0,enumerable:!1}}),e)}function It(t,e){Tt?t[Tt]&&(t[Tt]&=~e):void 0!==t.A&&(t.A&=~e)}function Nt(t){var e;return null==(e=Tt?t[Tt]:t.A)?0:e}function Pt(t,e){Tt?t[Tt]=e:void 0!==t.A?t.A=e:Object.defineProperties(t,{A:{value:e,configurable:!0,writable:!0,enumerable:!1}})}function Ot(t){return kt(t,1),t}function Lt(t,e){Pt(e,-51&t)}function Rt(t,e){Pt(e,-41&t|18)}var Dt={};function zt(t){return null!==t&&"object"==typeof t&&!Array.isArray(t)&&t.constructor===Object}var Ft,Bt,Ut=[];function jt(t){if(2&Nt(t.o))throw Error("Cannot mutate an immutable Message")}function Vt(t){var e=t.length;(e=e?t[e-1]:void 0)&&zt(e)?e.g=1:(e={},t.push((e.g=1,e)))}function Ht(t){var e=t.i+t.G;return t.B||(t.B=t.o[e]={})}function Gt(t,e){return-1===e?null:e>=t.i?t.B?t.B[e]:void 0:t.o[e+t.G]}function Wt(t,e,n,r){jt(t),Xt(t,e,n,r)}function Xt(t,e,n,r){t.j&&(t.j=void 0),e>=t.i||r?Ht(t)[e]=n:(t.o[e+t.G]=n,(t=t.B)&&e in t&&delete t[e])}function Yt(t,e,n,r){var i=Gt(t,e);Array.isArray(i)||(i=Ft);var o=Nt(i);if(1&o||Ot(i),r)2&o||kt(i,2),1&n||Object.freeze(i);else{r=!(2&n);var a=2&o;1&n||!a?r&&16&o&&!a&&It(i,16):Xt(t,e,i=Ot(Array.prototype.slice.call(i)))}return i}function qt(t,e){var n=Gt(t,e),r=null==n?n:"number"==typeof n||"NaN"===n||"Infinity"===n||"-Infinity"===n?Number(n):void 0;return null!=r&&r!==n&&Xt(t,e,r),r}function $t(t,e,n,r,i){t.h||(t.h={});var o=t.h[n],a=Yt(t,n,3,i);if(!o){var s=a;o=[];var u=!!(16&Nt(t.o));a=!!(2&Nt(s));var l=s;!i&&a&&(s=Array.prototype.slice.call(s));for(var c=a,h=0;h<s.length;h++){var d=s[h],f=e,p=!1;if(p=void 0!==p&&p,void 0!==(d=Array.isArray(d)?new f(d):p?new f:void 0)){var m=p=Nt(f=d.o);a&&(m|=2),u&&(m|=16),m!=p&&Pt(f,m),f=m,c=c||!!(2&f),o.push(d)}}return t.h[n]=o,e=33|(u=Nt(s)),u!=(e=c?-9&e:8|e)&&(c=s,Object.isFrozen(c)&&(c=Array.prototype.slice.call(c)),Pt(c,e),s=c),l!==s&&Xt(t,n,s),(i||r&&a)&&kt(o,2),r&&Object.freeze(o),o}return i||(i=Object.isFrozen(o),r&&!i?Object.freeze(o):!r&&i&&(o=Array.prototype.slice.call(o),t.h[n]=o)),o}function Kt(t,e,n){var r=!!(2&Nt(t.o));if(e=$t(t,e,n,r,r),t=Yt(t,n,3,r),!(r||8&Nt(t))){for(r=0;r<e.length;r++){if(2&Nt((n=e[r]).o)){var i=ue(n,!1);i.j=n}else i=n;n!==i&&(e[r]=i,t[r]=i.o)}kt(t,8)}return e}function Zt(t,e,n){if(null!=n&&"number"!=typeof n)throw Error("Value of float/double field must be a number|null|undefined, found "+typeof n+": "+n);Wt(t,e,n)}function Qt(t,e,n,r,i){jt(t);var o=$t(t,n,e,!1,!1);return n=null!=r?r:new n,t=Yt(t,e,2,!1),null!=i?(o.splice(i,0,n),t.splice(i,0,n.o)):(o.push(n),t.push(n.o)),n.C()&&It(t,8),n}function Jt(t,e){return null==t?e:t}function te(t,e,n){return n=void 0===n?0:n,Jt(qt(t,e),n)}function ee(t,e,n,r){if(null!=t){if(Array.isArray(t))t=ne(t,e,n,void 0!==r);else if(zt(t)){var i,o={};for(i in t)o[i]=ee(t[i],e,n,r);t=o}else t=e(t,r);return t}}function ne(t,e,n,r){var i=Nt(t);r=r?!!(16&i):void 0,t=Array.prototype.slice.call(t);for(var o=0;o<t.length;o++)t[o]=ee(t[o],e,n,r);return n(i,t),t}function re(t){return t.ja===Dt?t.toJSON():function(t){switch(typeof t){case"number":return isFinite(t)?t:String(t);case"object":if(t)if(Array.isArray(t)){if(128&Nt(t))return Vt(t=Array.prototype.slice.call(t)),t}else{if(L&&null!=t&&t instanceof Uint8Array)return D(t);if(t instanceof ct){var e=t.V;return null==e?"":"string"==typeof e?e:t.V=D(e)}}}return t}(t)}function ie(t,e){128&t&&Vt(e)}function oe(t,e,n){if(n=void 0===n?Rt:n,null!=t){if(L&&t instanceof Uint8Array)return t.length?new ct(new Uint8Array(t),V):ht();if(Array.isArray(t)){var r=Nt(t);return 2&r?t:!e||32&r||!(16&r||0===r)?(4&(e=Nt(t=ne(t,oe,4&r?Rt:n,!0)))&&2&e&&Object.freeze(t),t):(Pt(t,2|r),t)}return t.ja===Dt?se(t):t}}function ae(t,e,n,r,i,o,a){if(t=t.h&&t.h[n]){if(2&(r=Nt(t))?r=t:(Rt(r,o=k(t,se)),Object.freeze(o),r=o),jt(e),a=null==r?Ft:Ot([]),null!=r){for(o=!!r.length,t=0;t<r.length;t++){var s=r[t];o=o&&!(2&Nt(s.o)),a[t]=s.o}o=1|(o?8:0),((t=Nt(a))&o)!==o&&(Object.isFrozen(a)&&(a=Array.prototype.slice.call(a)),Pt(a,t|o)),e.h||(e.h={}),e.h[n]=r}else e.h&&(e.h[n]=void 0);Xt(e,n,a,i)}else Wt(e,n,oe(r,o,a),i)}function se(t){return 2&Nt(t.o)||kt((t=ue(t,!0)).o,2),t}function ue(t,e){var n=t.o,r=[];kt(r,16);var i=t.constructor.h;if(i&&r.push(i),i=t.B){r.length=n.length,r.fill(void 0,r.length,n.length);var o={};r[r.length-1]=o}128&Nt(n)&&Vt(r),e=e||t.C()?Rt:Lt,o=t.constructor,Bt=r,r=new o(r),Bt=void 0,t.R&&(r.R=t.R.slice()),o=!!(16&Nt(n));for(var a=i?n.length-1:n.length,s=0;s<a;s++)ae(t,r,s-t.G,n[s],!1,o,e);if(i)for(var u in i)ae(t,r,+u,i[u],!0,o,e);return r}function le(t,e,n){null==t&&(t=Bt),Bt=void 0;var r,i=this.constructor.i||0,o=0<i,a=this.constructor.h,s=!1;if(null==t){var u=48,l=!0;o&&(i=0,u|=128),Pt(t=a?[a]:[],u)}else{if(!Array.isArray(t))throw Error();if(a&&a!==t[0])throw Error();var c=u=kt(t,0);if((l=!!(16&c))&&((s=!!(32&c))||(c|=32)),o){if(128&c)i=0;else if(0<t.length){var h=t[t.length-1];if(zt(h)&&"g"in h){i=0,c|=128,delete h.g;var d,f=!0;for(d in h){f=!1;break}f&&t.pop()}}}else if(128&c)throw Error();u!==c&&Pt(t,c)}if(this.G=(a?0:-1)-i,this.h=void 0,this.o=t,i=(a=this.o.length)-1,a&&zt(a=this.o[i])?(this.B=a,this.i=i-this.G):void 0!==e&&-1<e?(this.i=Math.max(e,i+1-this.G),this.B=void 0):this.i=Number.MAX_VALUE,!o&&this.B&&"g"in this.B)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(n)for(e=l&&!s&&!0,o=this.i,l=0;l<n.length;l++)(s=n[l])<o?(i=t[s+=this.G])?ce(i,e):t[s]=Ft:(r||(r=Ht(this)),(i=r[s])?ce(i,e):r[s]=Ft)}function ce(t,e){if(Array.isArray(t)){var n=Nt(t),r=1;!e||2&n||(r|=16),(n&r)!==r&&Pt(t,n|r)}}function he(t,e,n){if(n){var r,i={};for(r in n){var o=n[r],a=o.ra;a||(i.J=o.xa||o.oa.W,o.ia?(i.aa=be(o.ia),a=function(t){return function(e,n,r){return t.J(e,n,r,t.aa)}}(i)):o.ka?(i.Z=xe(o.da.P,o.ka),a=function(t){return function(e,n,r){return t.J(e,n,r,t.Z)}}(i)):a=i.J,o.ra=a),a(e,t,o.da),i={J:i.J,aa:i.aa,Z:i.Z}}}!function(t,e){if(e=e.R){Ct(t,t.h.end());for(var n=0;n<e.length;n++)Ct(t,dt(e[n])||j())}}(e,t)}Pt(Ut,23),Ft=Object.freeze(Ut),le.prototype.toJSON=function(){return ne(this.o,re,ie)},le.prototype.C=function(){return!!(2&Nt(this.o))},le.prototype.ja=Dt,le.prototype.toString=function(){return this.o.toString()};var de=Symbol();function fe(t,e,n){return t[de]||(t[de]=function(t,r){return e(t,r,n)})}function pe(t){var e=t[de];if(!e){var n=Pe(t);e=function(t,e){return Oe(t,e,n)},t[de]=e}return e}function me(t){var e=function(t){var e=t.ia;return e?pe(e):(e=t.wa)?fe(t.da.P,e,t.ka):void 0}(t),n=t.da,r=t.oa.U;return e?function(t,i){return r(t,i,n,e)}:function(t,e){return r(t,e,n)}}function ge(t,e){var n=t[e];return"function"==typeof n&&0===n.length&&(n=n(),t[e]=n),Array.isArray(n)&&(Ce in n||we in n||0<n.length&&"function"==typeof n[0])?n:void 0}function ve(t,e,n,r,i,o){e.P=t[0];var a=1;if(t.length>a&&"number"!=typeof t[a]){var s=t[a++];n(e,s)}for(;a<t.length;){n=t[a++];for(var u=a+1;u<t.length&&"number"!=typeof t[u];)u++;switch(s=t[a++],u-=a){case 0:r(e,n,s);break;case 1:(u=ge(t,a))?(a++,i(e,n,s,u)):r(e,n,s,t[a++]);break;case 2:i(e,n,s,u=ge(t,u=a++),t[a++]);break;case 3:o(e,n,s,t[a++],t[a++],t[a++]);break;case 4:o(e,n,s,t[a++],t[a++],t[a++],t[a++]);break;default:throw Error("unexpected number of binary field arguments: "+u)}}return e}var ye=Symbol();function be(t){var e=t[ye];if(!e){var n=Me(t);e=function(t,e){return Le(t,e,n)},t[ye]=e}return e}function xe(t,e){var n=t[ye];return n||(n=function(t,n){return he(t,n,e)},t[ye]=n),n}var we=Symbol();function _e(t,e){t.push(e)}function Se(t,e,n){t.push(e,n.W)}function Ee(t,e,n,r){var i=be(r),o=Me(r).P,a=n.W;t.push(e,(function(t,e,n){return a(t,e,n,o,i)}))}function Ae(t,e,n,r,i,o){var a=xe(r,o),s=n.W;t.push(e,(function(t,e,n){return s(t,e,n,r,a)}))}function Me(t){var e=t[we];return e||(e=ve(t,t[we]=[],_e,Se,Ee,Ae),Ce in t&&we in t&&(t.length=0),e)}var Ce=Symbol();function Te(t,e){t[0]=e}function ke(t,e,n,r){var i=n.U;t[e]=r?function(t,e,n){return i(t,e,n,r)}:i}function Ie(t,e,n,r,i){var o=n.U,a=pe(r),s=Pe(r).P;t[e]=function(t,e,n){return o(t,e,n,s,a,i)}}function Ne(t,e,n,r,i,o,a){var s=n.U,u=fe(r,i,o);t[e]=function(t,e,n){return s(t,e,n,r,u,a)}}function Pe(t){var e=t[Ce];return e||(e=ve(t,t[Ce]={},Te,ke,Ie,Ne),Ce in t&&we in t&&(t.length=0),e)}function Oe(t,e,n){for(;St(e)&&4!=e.i;){var r=e.l,i=n[r];if(!i){var o=n[0];o&&(o=o[r])&&(i=n[r]=me(o))}if(!i||!i(e,t,r)){r=t,o=(i=e).j,Et(i);var a=i;if(!a.ca){if(i=a.h.h-o,a.h.h=o,a=a.h,0==i)i=ht();else{if(o=vt(a,i),a.S&&a.m)i=a.i.subarray(o,o+i);else{a=a.i;var s=o;i=s===(i=o+i)?j():H?a.slice(s,i):new Uint8Array(a.subarray(s,i))}i=0==i.length?ht():new ct(i,V)}(o=r.R)?o.push(i):r.R=[i]}}}return t}function Le(t,e,n){for(var r=n.length,i=1==r%2,o=i?1:0;o<r;o+=2)(0,n[o+1])(e,t,n[o]);he(t,e,i?n[0]:void 0)}function Re(t,e){return{U:t,W:e}}var De=Re((function(t,e,n){if(5!==t.i)return!1;var r=(t=t.h).i,i=t.h,o=r[i],a=r[i+1],s=r[i+2];return r=r[i+3],mt(t,t.h+4),t=2*((a=(o|a<<8|s<<16|r<<24)>>>0)>>31)+1,o=a>>>23&255,a&=8388607,Wt(e,n,255==o?a?NaN:1/0*t:0==o?t*Math.pow(2,-149)*a:t*Math.pow(2,o-150)*(a+Math.pow(2,23))),!0}),(function(t,e,n){if(null!=(e=qt(e,n))){wt(t.h,8*n+5),t=t.h;var r=+e;0===r?0<1/r?G=W=0:(W=0,G=2147483648):isNaN(r)?(W=0,G=2147483647):34028234663852886e22<(r=(n=0>r?-2147483648:0)?-r:r)?(W=0,G=(2139095040|n)>>>0):11754943508222875e-54>r?(r=Math.round(r/Math.pow(2,-149)),W=0,G=(n|r)>>>0):(e=Math.floor(Math.log(r)/Math.LN2),r*=Math.pow(2,-e),16777216<=(r=Math.round(8388608*r))&&++e,W=0,G=(n|e+127<<23|8388607&r)>>>0),n=G,t.h.push(n>>>0&255),t.h.push(n>>>8&255),t.h.push(n>>>16&255),t.h.push(n>>>24&255)}})),ze=Re((function(t,e,n){if(0!==t.i)return!1;var r=t.h,i=0,o=t=0,a=r.i,s=r.h;do{var u=a[s++];i|=(127&u)<<o,o+=7}while(32>o&&128&u);for(32<o&&(t|=(127&u)>>4),o=3;32>o&&128&u;o+=7)t|=(127&(u=a[s++]))<<o;if(mt(r,s),!(128>u))throw J();return r=i>>>0,(t=2147483648&(u=t>>>0))&&(u=~u>>>0,0==(r=1+~r>>>0)&&(u=u+1>>>0)),r=4294967296*u+(r>>>0),Wt(e,n,t?-r:r),!0}),(function(t,e,n){null!=(e=Gt(e,n))&&("string"==typeof e&&Z(e),null!=e&&(wt(t.h,8*n),"number"==typeof e?(t=t.h,X(e),xt(t,G,W)):(n=Z(e),xt(t.h,n.i,n.h))))})),Fe=Re((function(t,e,n){return 0===t.i&&(Wt(e,n,gt(t.h)),!0)}),(function(t,e,n){if(null!=(e=Gt(e,n))&&null!=e)if(wt(t.h,8*n),t=t.h,0<=(n=e))wt(t,n);else{for(e=0;9>e;e++)t.h.push(127&n|128),n>>=7;t.h.push(1)}})),Be=Re((function(t,e,n){if(2!==t.i)return!1;var r=gt(t.h)>>>0,i=vt(t=t.h,r);if(t=t.i,st){var o,a=t;(o=rt)||(o=rt=new TextDecoder("utf-8",{fatal:!0})),t=i+r,a=0===i&&t===a.length?a:a.subarray(i,t);try{var s=o.decode(a)}catch(t){if(void 0===at){try{o.decode(new Uint8Array([128]))}catch(t){}try{o.decode(new Uint8Array([97])),at=!0}catch(t){at=!1}}throw!at&&(rt=void 0),t}}else{r=(s=i)+r,i=[];for(var u,l,c=null;s<r;)128>(u=t[s++])?i.push(u):224>u?s>=r?et():(l=t[s++],194>u||128!=(192&l)?(s--,et()):i.push((31&u)<<6|63&l)):240>u?s>=r-1?et():128!=(192&(l=t[s++]))||224===u&&160>l||237===u&&160<=l||128!=(192&(a=t[s++]))?(s--,et()):i.push((15&u)<<12|(63&l)<<6|63&a):244>=u?s>=r-2?et():128!=(192&(l=t[s++]))||l-144+(u<<28)>>30||128!=(192&(a=t[s++]))||128!=(192&(o=t[s++]))?(s--,et()):(u=(7&u)<<18|(63&l)<<12|(63&a)<<6|63&o,u-=65536,i.push(55296+(u>>10&1023),56320+(1023&u))):et(),8192<=i.length&&(c=nt(c,i),i.length=0);s=nt(c,i)}return Wt(e,n,s),!0}),(function(t,e,n){if(null!=(e=Gt(e,n))){var r=!1;if(r=void 0!==r&&r,ut){if(r&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(e))throw Error("Found an unpaired surrogate");e=(it||(it=new TextEncoder)).encode(e)}else{for(var i=0,o=new Uint8Array(3*e.length),a=0;a<e.length;a++){var s=e.charCodeAt(a);if(128>s)o[i++]=s;else{if(2048>s)o[i++]=s>>6|192;else{if(55296<=s&&57343>=s){if(56319>=s&&a<e.length){var u=e.charCodeAt(++a);if(56320<=u&&57343>=u){s=1024*(s-55296)+u-56320+65536,o[i++]=s>>18|240,o[i++]=s>>12&63|128,o[i++]=s>>6&63|128,o[i++]=63&s|128;continue}a--}if(r)throw Error("Found an unpaired surrogate");s=65533}o[i++]=s>>12|224,o[i++]=s>>6&63|128}o[i++]=63&s|128}}e=i===o.length?o:o.subarray(0,i)}wt(t.h,8*n+2),wt(t.h,e.length),Ct(t,t.h.end()),Ct(t,e)}})),Ue=Re((function(t,e,n,r,i){if(2!==t.i)return!1;e=Qt(e,n,r),n=t.h.j,r=gt(t.h)>>>0;var o=t.h.h+r,a=o-n;if(0>=a&&(t.h.j=o,i(e,t,void 0,void 0,void 0),a=o-t.h.h),a)throw Error("Message parsing ended unexpectedly. Expected to read "+r+" bytes, instead read "+(r-a)+" bytes, either the data ended unexpectedly or the message misreported its own length");return t.h.h=o,t.h.j=n,!0}),(function(t,e,n,r,i){if(null!=(e=Kt(e,r,n)))for(r=0;r<e.length;r++){var o=t;wt(o.h,8*n+2);var a=o.h.end();Ct(o,a),a.push(o.i),o=a,i(e[r],t),a=t;var s=o.pop();for(s=a.i+a.h.length()-s;127<s;)o.push(127&s|128),s>>>=7,a.i++;o.push(s),a.i++}}));function je(t){return function(e,n){t:{if(At.length){var r=At.pop();r.setOptions(n),pt(r.h,e,n),e=r}else e=new _t(e,n);try{var i=Pe(t),o=Oe(new i.P,e,i);break t}finally{(i=e.h).i=null,i.m=!1,i.l=0,i.j=0,i.h=0,i.S=!1,e.l=-1,e.i=-1,100>At.length&&At.push(e)}o=void 0}return o}}function Ve(t){return function(){var e=new Mt;Le(this,e,Me(t)),Ct(e,e.h.end());for(var n=new Uint8Array(e.i),r=e.j,i=r.length,o=0,a=0;a<i;a++){var s=r[a];n.set(s,o),o+=s.length}return e.j=[n],n}}function He(t){le.call(this,t)}m(He,le);var Ge=[He,1,Fe,2,De,3,Be,4,Be];function We(t){le.call(this,t,-1,Xe)}He.prototype.l=Ve(Ge),m(We,le),We.prototype.addClassification=function(t,e){return Qt(this,1,He,t,e),this};var Xe=[1],Ye=je([We,1,Ue,Ge]);function qe(t){le.call(this,t)}m(qe,le);var $e=[qe,1,De,2,De,3,De,4,De,5,De];function Ke(t){le.call(this,t,-1,Ze)}qe.prototype.l=Ve($e),m(Ke,le);var Ze=[1],Qe=je([Ke,1,Ue,$e]);function Je(t){le.call(this,t)}m(Je,le);var tn=[Je,1,De,2,De,3,De,4,De,5,De,6,ze],en=je(tn);function nn(t,e,n){if(n=t.createShader(0===n?t.VERTEX_SHADER:t.FRAGMENT_SHADER),t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw Error("Could not compile WebGL shader.\n\n"+t.getShaderInfoLog(n));return n}function rn(t){return Kt(t,He,1).map((function(t){var e=Gt(t,1);return{index:null==e?0:e,qa:te(t,2),label:null!=Gt(t,3)?Jt(Gt(t,3),""):void 0,displayName:null!=Gt(t,4)?Jt(Gt(t,4),""):void 0}}))}function on(t){return{x:te(t,1),y:te(t,2),z:te(t,3),visibility:null!=qt(t,4)?te(t,4):void 0}}function an(t,e){this.i=t,this.h=e,this.m=0}function sn(t,e,n){return function(t,e){var n=t.h;if(void 0===t.s){var r=nn(n,"\n  attribute vec2 aVertex;\n  attribute vec2 aTex;\n  varying vec2 vTex;\n  void main(void) {\n    gl_Position = vec4(aVertex, 0.0, 1.0);\n    vTex = aTex;\n  }",0),i=nn(n,"\n  precision mediump float;\n  varying vec2 vTex;\n  uniform sampler2D sampler0;\n  void main(){\n    gl_FragColor = texture2D(sampler0, vTex);\n  }",1),o=n.createProgram();if(n.attachShader(o,r),n.attachShader(o,i),n.linkProgram(o),!n.getProgramParameter(o,n.LINK_STATUS))throw Error("Could not compile WebGL program.\n\n"+n.getProgramInfoLog(o));r=t.s=o,n.useProgram(r),i=n.getUniformLocation(r,"sampler0"),t.l={O:n.getAttribLocation(r,"aVertex"),N:n.getAttribLocation(r,"aTex"),ya:i},t.v=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,t.v),n.enableVertexAttribArray(t.l.O),n.vertexAttribPointer(t.l.O,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),t.u=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,t.u),n.enableVertexAttribArray(t.l.N),n.vertexAttribPointer(t.l.N,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.uniform1i(i,0)}r=t.l,n.useProgram(t.s),n.canvas.width=e.width,n.canvas.height=e.height,n.viewport(0,0,e.width,e.height),n.activeTexture(n.TEXTURE0),t.i.bindTexture2d(e.glName),n.enableVertexAttribArray(r.O),n.bindBuffer(n.ARRAY_BUFFER,t.v),n.vertexAttribPointer(r.O,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(r.N),n.bindBuffer(n.ARRAY_BUFFER,t.u),n.vertexAttribPointer(r.N,2,n.FLOAT,!1,0,0),n.bindFramebuffer(n.DRAW_FRAMEBUFFER?n.DRAW_FRAMEBUFFER:n.FRAMEBUFFER,null),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.colorMask(!0,!0,!0,!0),n.drawArrays(n.TRIANGLE_FAN,0,4),n.disableVertexAttribArray(r.O),n.disableVertexAttribArray(r.N),n.bindBuffer(n.ARRAY_BUFFER,null),t.i.bindTexture2d(0)}(t,e),"function"==typeof t.h.canvas.transferToImageBitmap?Promise.resolve(t.h.canvas.transferToImageBitmap()):n?Promise.resolve(t.h.canvas):"function"==typeof createImageBitmap?createImageBitmap(t.h.canvas):(void 0===t.j&&(t.j=document.createElement("canvas")),new Promise((function(e){t.j.height=t.h.canvas.height,t.j.width=t.h.canvas.width,t.j.getContext("2d",{}).drawImage(t.h.canvas,0,0,t.h.canvas.width,t.h.canvas.height),e(t.j)})))}function un(t){this.h=t}Je.prototype.l=Ve(tn);var ln=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function cn(t,e){return e+t}function hn(t,e){window[t]=e}function dn(t){if(this.h=t,this.listeners={},this.l={},this.L={},this.s={},this.v={},this.M=this.u=this.ga=!0,this.I=Promise.resolve(),this.fa="",this.D={},this.locateFile=t&&t.locateFile||cn,"object"==typeof window)var e=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if("undefined"==typeof location)throw Error("solutions can only be loaded on a web page or in a web worker");e=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.ha=e,t.options)for(var n=(e=s(Object.keys(t.options))).next();!n.done;n=e.next()){n=n.value;var r=t.options[n].default;void 0!==r&&(this.l[n]="function"==typeof r?r():r)}}function fn(t){var e,n,r,i,o,a,s,l,c,h,d;return E((function(f){switch(f.h){case 1:return t.ga?(e=void 0===t.h.files?[]:"function"==typeof t.h.files?t.h.files(t.l):t.h.files,b(f,E((function(t){switch(t.h){case 1:return t.s=2,b(t,WebAssembly.instantiate(ln),4);case 4:t.h=3,t.s=0;break;case 2:return t.s=0,t.l=null,t.return(!1);case 3:return t.return(!0)}})),2)):f.return();case 2:if(n=f.i,"object"==typeof window)return hn("createMediapipeSolutionsWasm",{locateFile:t.locateFile}),hn("createMediapipeSolutionsPackedAssets",{locateFile:t.locateFile}),a=e.filter((function(t){return void 0!==t.data})),s=e.filter((function(t){return void 0===t.data})),l=Promise.all(a.map((function(e){var n=pn(t,e.url);if(void 0!==e.path){var r=e.path;n=n.then((function(e){return t.overrideFile(r,e),Promise.resolve(e)}))}return n}))),c=Promise.all(s.map((function(e){return void 0===e.simd||e.simd&&n||!e.simd&&!n?function(t){var e=document.createElement("script");return e.setAttribute("src",t),e.setAttribute("crossorigin","anonymous"),new Promise((function(t){e.addEventListener("load",(function(){t()}),!1),e.addEventListener("error",(function(){t()}),!1),document.body.appendChild(e)}))}(t.locateFile(e.url,t.ha)):Promise.resolve()}))).then((function(){var e,n,r;return E((function(i){if(1==i.h)return e=window.createMediapipeSolutionsWasm,n=window.createMediapipeSolutionsPackedAssets,r=t,b(i,e(n),2);r.i=i.i,i.h=0}))})),h=E((function(e){return t.h.graph&&t.h.graph.url?e=b(e,pn(t,t.h.graph.url),0):(e.h=0,e=void 0),e})),b(f,Promise.all([c,l,h]),7);if("function"!=typeof importScripts)throw Error("solutions can only be loaded on a web page or in a web worker");return r=e.filter((function(t){return void 0===t.simd||t.simd&&n||!t.simd&&!n})).map((function(e){return t.locateFile(e.url,t.ha)})),importScripts.apply(null,u(r)),i=t,b(f,createMediapipeSolutionsWasm(Module),6);case 6:i.i=f.i,t.m=new OffscreenCanvas(1,1),t.i.canvas=t.m,o=t.i.GL.createContext(t.m,{antialias:!1,alpha:!1,va:"undefined"!=typeof WebGL2RenderingContext?2:1}),t.i.GL.makeContextCurrent(o),f.h=4;break;case 7:if(t.m=document.createElement("canvas"),!(d=t.m.getContext("webgl2",{}))&&!(d=t.m.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),f.return();t.K=d,t.i.canvas=t.m,t.i.createContext(t.m,!0,!0,{});case 4:t.j=new t.i.SolutionWasm,t.ga=!1,f.h=0}}))}function pn(t,e){var n,r;return E((function(i){return e in t.L?i.return(t.L[e]):(n=t.locateFile(e,""),r=fetch(n).then((function(t){return t.arrayBuffer()})),t.L[e]=r,i.return(r))}))}function mn(t,e,n){var r,i,o,a,u,l,c,h,d,f,p,m,g,v;return E((function(y){switch(y.h){case 1:if(!n)return y.return(e);for(r={},i=0,o=s(Object.keys(n)),a=o.next();!a.done;a=o.next())u=a.value,"string"!=typeof(l=n[u])&&"texture"===l.type&&void 0!==e[l.stream]&&++i;1<i&&(t.M=!1),c=s(Object.keys(n)),a=c.next();case 2:if(a.done){y.h=4;break}if(h=a.value,"string"==typeof(d=n[h]))return g=r,v=h,b(y,function(t,e,n){var r;return E((function(i){return"number"==typeof n||n instanceof Uint8Array||n instanceof t.i.Uint8BlobList?i.return(n):n instanceof t.i.Texture2dDataOut?((r=t.v[e])||(r=new an(t.i,t.K),t.v[e]=r),i.return(sn(r,n,t.M))):i.return(void 0)}))}(t,h,e[d]),14);if(f=e[d.stream],"detection_list"===d.type){if(f){for(var x=f.getRectList(),w=f.getLandmarksList(),_=f.getClassificationsList(),S=[],A=0;A<x.size();++A){var M=en(x.get(A)),C=void 0;C=void 0===C?0:C,M={la:{sa:te(M,1),ta:te(M,2),height:te(M,3),width:te(M,4),rotation:te(M,5,0),pa:Jt(Gt(M,6),C)},ea:Kt(Qe(w.get(A)),qe,1).map(on),ba:rn(Ye(_.get(A)))},S.push(M)}x=S}else x=[];r[h]=x,y.h=7;break}if("proto_list"===d.type){if(f){for(x=Array(f.size()),w=0;w<f.size();w++)x[w]=f.get(w);f.delete()}else x=[];r[h]=x,y.h=7;break}if(void 0===f){y.h=3;break}if("float_list"===d.type){r[h]=f,y.h=7;break}if("proto"===d.type){r[h]=f,y.h=7;break}if("texture"!==d.type)throw Error("Unknown output config type: '"+d.type+"'");return(p=t.v[h])||(p=new an(t.i,t.K),t.v[h]=p),b(y,sn(p,f,t.M),13);case 13:m=y.i,r[h]=m;case 7:d.transform&&r[h]&&(r[h]=d.transform(r[h])),y.h=3;break;case 14:g[v]=y.i;case 3:a=c.next(),y.h=2;break;case 4:return y.return(r)}}))}function gn(t,e){for(var n=e.name||"$",r=[].concat(u(e.wants)),i=new t.i.StringList,o=s(e.wants),a=o.next();!a.done;a=o.next())i.push_back(a.value);o=t.i.PacketListener.implement({onResults:function(i){for(var o={},a=0;a<e.wants.length;++a)o[r[a]]=i.get(a);var s=t.listeners[n];s&&(t.I=mn(t,o,e.outs).then((function(n){n=s(n);for(var i=0;i<e.wants.length;++i){var a=o[r[i]];"object"==typeof a&&a.hasOwnProperty&&a.hasOwnProperty("delete")&&a.delete()}n&&(t.I=n)})))}}),t.j.attachMultiListener(i,o),i.delete()}function vn(t){return void 0===t&&(t=0),1===t?"selfie_segmentation_landscape.tflite":"selfie_segmentation.tflite"}function yn(t){var e=this;t=t||{},this.h=new dn({locateFile:t.locateFile,files:function(t){return[{simd:!0,url:"selfie_segmentation_solution_simd_wasm_bin.js"},{simd:!1,url:"selfie_segmentation_solution_wasm_bin.js"},{data:!0,url:vn(t.modelSelection)}]},graph:{url:"selfie_segmentation.binarypb"},listeners:[{wants:["segmentation_mask","image_transformed"],outs:{image:{type:"texture",stream:"image_transformed"},segmentationMask:{type:"texture",stream:"segmentation_mask"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"object"==typeof window&&void 0!==window.navigator&&("iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document)},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelSelection:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelSelection",fieldName:"int_value"},onChange:function(t){var n,r,i;return E((function(o){return 1==o.h?(n=vn(t),r="third_party/mediapipe/modules/selfie_segmentation/"+n,b(o,pn(e.h,n),2)):(i=o.i,e.h.overrideFile(r,i),o.return(!0))}))}}}})}(t=dn.prototype).close=function(){return this.j&&this.j.delete(),Promise.resolve()},t.reset=function(){var t=this;return E((function(e){t.j&&(t.j.reset(),t.s={},t.v={}),e.h=0}))},t.setOptions=function(t,e){var n=this;if(e=e||this.h.options){for(var r=[],i=[],o={},a=s(Object.keys(t)),u=a.next();!u.done;o={X:o.X,Y:o.Y},u=a.next())if(!((u=u.value)in this.l)||this.l[u]!==t[u]){this.l[u]=t[u];var l=e[u];void 0!==l&&(l.onChange&&(o.X=l.onChange,o.Y=t[u],r.push(function(t){return function(){return E((function(e){if(1==e.h)return b(e,t.X(t.Y),2);!0===e.i&&(n.u=!0),e.h=0}))}}(o))),l.graphOptionXref&&(u=Object.assign({},{calculatorName:"",calculatorIndex:0},l.graphOptionXref,{valueNumber:1===l.type?t[u]:0,valueBoolean:0===l.type&&t[u],valueString:2===l.type?t[u]:""}),i.push(u)))}0===r.length&&0===i.length||(this.u=!0,this.H=(void 0===this.H?[]:this.H).concat(i),this.F=(void 0===this.F?[]:this.F).concat(r))}},t.initialize=function(){var t=this;return E((function(e){return 1==e.h?b(e,fn(t),2):3!=e.h?b(e,function(t){var e,n,r,i,o,a,u,l;return E((function(c){if(1==c.h)return t.h.graph&&t.h.graph.url&&t.fa===t.h.graph.url?c.return():(t.u=!0,t.h.graph&&t.h.graph.url?(t.fa=t.h.graph.url,b(c,pn(t,t.h.graph.url),3)):void(c.h=2));for(2!=c.h&&(e=c.i,t.j.loadGraph(e)),n=s(Object.keys(t.D)),r=n.next();!r.done;r=n.next())i=r.value,t.j.overrideFile(i,t.D[i]);if(t.D={},t.h.listeners)for(o=s(t.h.listeners),a=o.next();!a.done;a=o.next())u=a.value,gn(t,u);l=t.l,t.l={},t.setOptions(l),c.h=0}))}(t),3):b(e,function(t){var e,n,r,i,o,a;return E((function(u){switch(u.h){case 1:if(!t.u)return u.return();if(!t.F){u.h=2;break}e=s(t.F),n=e.next();case 3:if(n.done){u.h=5;break}return b(u,(0,n.value)(),4);case 4:n=e.next(),u.h=3;break;case 5:t.F=void 0;case 2:if(t.H){for(r=new t.i.GraphOptionChangeRequestList,i=s(t.H),o=i.next();!o.done;o=i.next())a=o.value,r.push_back(a);t.j.changeOptions(r),r.delete(),t.H=void 0}t.u=!1,u.h=0}}))}(t),0)}))},t.overrideFile=function(t,e){this.j?this.j.overrideFile(t,e):this.D[t]=e},t.clearOverriddenFiles=function(){this.D={},this.j&&this.j.clearOverriddenFiles()},t.send=function(t,e){var n,r,i,o,a,u,l,c,h,d=this;return E((function(f){switch(f.h){case 1:return d.h.inputs?(n=1e3*(null==e?performance.now():e),b(f,d.I,2)):f.return();case 2:return b(f,d.initialize(),3);case 3:for(r=new d.i.PacketDataList,i=s(Object.keys(t)),o=i.next();!o.done;o=i.next())if(a=o.value,u=d.h.inputs[a]){t:{var p=t[a];switch(u.type){case"video":var m=d.s[u.stream];if(m||(m=new an(d.i,d.K),d.s[u.stream]=m),0===m.m&&(m.m=m.i.createTexture()),"undefined"!=typeof HTMLVideoElement&&p instanceof HTMLVideoElement)var g=p.videoWidth,v=p.videoHeight;else"undefined"!=typeof HTMLImageElement&&p instanceof HTMLImageElement?(g=p.naturalWidth,v=p.naturalHeight):(g=p.width,v=p.height);v={glName:m.m,width:g,height:v},(g=m.h).canvas.width=v.width,g.canvas.height=v.height,g.activeTexture(g.TEXTURE0),m.i.bindTexture2d(m.m),g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,p),m.i.bindTexture2d(0),m=v;break t;case"detections":for((m=d.s[u.stream])||(m=new un(d.i),d.s[u.stream]=m),m.data||(m.data=new m.h.DetectionListData),m.data.reset(p.length),v=0;v<p.length;++v){g=p[v];var y=m.data,x=y.setBoundingBox,w=v,_=g.la,S=new Je;if(Zt(S,1,_.sa),Zt(S,2,_.ta),Zt(S,3,_.height),Zt(S,4,_.width),Zt(S,5,_.rotation),Wt(S,6,_.pa),_=S.l(),x.call(y,w,_),g.ea)for(y=0;y<g.ea.length;++y){S=g.ea[y],w=(x=m.data).addNormalizedLandmark,_=v,S=Object.assign({},S,{visibility:S.visibility?S.visibility:0});var E=new qe;Zt(E,1,S.x),Zt(E,2,S.y),Zt(E,3,S.z),S.visibility&&Zt(E,4,S.visibility),S=E.l(),w.call(x,_,S)}if(g.ba)for(y=0;y<g.ba.length;++y)w=(x=m.data).addClassification,_=v,S=g.ba[y],Zt(E=new He,2,S.qa),S.index&&Wt(E,1,S.index),S.label&&Wt(E,3,S.label),S.displayName&&Wt(E,4,S.displayName),S=E.l(),w.call(x,_,S)}m=m.data;break t;default:m={}}}switch(l=m,c=u.stream,u.type){case"video":r.pushTexture2d(Object.assign({},l,{stream:c,timestamp:n}));break;case"detections":(h=l).stream=c,h.timestamp=n,r.pushDetectionList(h);break;default:throw Error("Unknown input config type: '"+u.type+"'")}}return d.j.send(r),b(f,d.I,4);case 4:r.delete(),f.h=0}}))},t.onResults=function(t,e){this.listeners[e||"$"]=t},C("Solution",dn),C("OptionType",{BOOL:0,NUMBER:1,ua:2,0:"BOOL",1:"NUMBER",2:"STRING"}),(t=yn.prototype).close=function(){return this.h.close(),Promise.resolve()},t.onResults=function(t){this.h.onResults(t)},t.initialize=function(){var t=this;return E((function(e){return b(e,t.h.initialize(),0)}))},t.reset=function(){this.h.reset()},t.send=function(t){var e=this;return E((function(n){return b(n,e.h.send(t),0)}))},t.setOptions=function(t){this.h.setOptions(t)},C("SelfieSegmentation",yn),C("VERSION","0.1.1675465747")}).call(this)},70104:(t,e,n)=>{"use strict";n.d(e,{Q1:()=>y,ZC:()=>A,Ay:()=>z});var r=n(58168),i=n(64467),o=n(5544),a=n(96540),s=n(89379),u=n(23029),l=n(92901),c=n(15361),h=n(29426),d=n(53986),f=n(82284),p=n(24978),m=["b"],g=["v"],v=function(t){return Math.round(Number(t||0))},y=function(t){(0,c.A)(n,t);var e=(0,h.A)(n);function n(t){return(0,u.A)(this,n),e.call(this,function(t){if(t&&"object"===(0,f.A)(t)&&"h"in t&&"b"in t){var e=t,n=e.b,r=(0,d.A)(e,m);return(0,s.A)((0,s.A)({},r),{},{v:n})}return"string"==typeof t&&/hsb/.test(t)?t.replace(/hsb/,"hsv"):t}(t))}return(0,l.A)(n,[{key:"toHsbString",value:function(){var t=this.toHsb(),e=v(100*t.s),n=v(100*t.b),r=v(t.h),i=t.a,o="hsb(".concat(r,", ").concat(e,"%, ").concat(n,"%)"),a="hsba(".concat(r,", ").concat(e,"%, ").concat(n,"%, ").concat(i.toFixed(0===i?0:2),")");return 1===i?o:a}},{key:"toHsb",value:function(){var t=this.toHsv();"object"===(0,f.A)(this.originalInput)&&this.originalInput&&"h"in this.originalInput&&(t=this.originalInput);var e=t,n=(e.v,(0,d.A)(e,g));return(0,s.A)((0,s.A)({},n),{},{b:t.v,a:this.a})}}]),n}(p.q),b=function(t){return t instanceof y?t:new y(t)},x=b("#1677ff"),w=function(t){var e=t.offset,n=t.targetRef,r=t.containerRef,i=t.color,o=t.type,a=r.current.getBoundingClientRect(),u=a.width,l=a.height,c=n.current.getBoundingClientRect(),h=c.width/2,d=c.height/2,f=(e.x+h)/u,p=1-(e.y+d)/l,m=i.toHsb(),g=f,v=(e.x+h)/u*360;if(o)switch(o){case"hue":return b((0,s.A)((0,s.A)({},m),{},{h:v<=0?0:v}));case"alpha":return b((0,s.A)((0,s.A)({},m),{},{a:g<=0?0:g}))}return b({h:m.h,s:f<=0?0:f,b:p>=1?1:p,a:m.a})},_=function(t,e,n,r){var i=t.current.getBoundingClientRect(),o=i.width,a=i.height,s=e.current.getBoundingClientRect(),u=s.width,l=s.height,c=u/2,h=l/2,d=n.toHsb();if((0!==u||0!==l)&&u===l){if(r)switch(r){case"hue":return{x:d.h/360*o-c,y:-h/3};case"alpha":return{x:d.a/1*o-c,y:-h/3}}return{x:d.s*o-c,y:(1-d.b)*a-h}}},S=n(46942),E=n.n(S);const A=function(t){var e=t.color,n=t.prefixCls,r=t.className,i=t.style,o=t.onClick,s="".concat(n,"-color-block");return a.createElement("div",{className:E()(s,r),style:i,onClick:o},a.createElement("div",{className:"".concat(s,"-inner"),style:{background:e}}))};const M=function(t){var e=t.offset,n=t.targetRef,r=t.containerRef,i=t.direction,s=t.onDragChange,u=t.onDragChangeComplete,l=t.calculate,c=t.color,h=t.disabledDrag,d=(0,a.useState)(e||{x:0,y:0}),f=(0,o.A)(d,2),p=f[0],m=f[1],g=(0,a.useRef)(null),v=(0,a.useRef)(null),y=(0,a.useRef)({flag:!1});(0,a.useEffect)((function(){if(!1===y.current.flag){var t=null==l?void 0:l(r);t&&m(t)}}),[c,r]),(0,a.useEffect)((function(){return function(){document.removeEventListener("mousemove",g.current),document.removeEventListener("mouseup",v.current),document.removeEventListener("touchmove",g.current),document.removeEventListener("touchend",v.current),g.current=null,v.current=null}}),[]);var b=function(t){var e=function(t){var e="touches"in t?t.touches[0]:t,n=document.documentElement.scrollLeft||document.body.scrollLeft||window.pageXOffset,r=document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset;return{pageX:e.pageX-n,pageY:e.pageY-r}}(t),o=e.pageX,a=e.pageY,u=r.current.getBoundingClientRect(),l=u.x,c=u.y,h=u.width,d=u.height,f=n.current.getBoundingClientRect(),g=f.width,v=f.height,y=g/2,b=v/2,x=Math.max(0,Math.min(o-l,h))-y,w=Math.max(0,Math.min(a-c,d))-b,_={x,y:"x"===i?p.y:w};if(0===g&&0===v||g!==v)return!1;m(_),null==s||s(_)},x=function(t){t.preventDefault(),b(t)},w=function(t){t.preventDefault(),y.current.flag=!1,document.removeEventListener("mousemove",g.current),document.removeEventListener("mouseup",v.current),document.removeEventListener("touchmove",g.current),document.removeEventListener("touchend",v.current),g.current=null,v.current=null,null==u||u()};return[p,function(t){document.removeEventListener("mousemove",g.current),document.removeEventListener("mouseup",v.current),h||(b(t),y.current.flag=!0,document.addEventListener("mousemove",x),document.addEventListener("mouseup",w),document.addEventListener("touchmove",x),document.addEventListener("touchend",w),g.current=x,v.current=w)}]};var C=n(81470);const T=function(t){var e=t.size,n=void 0===e?"default":e,r=t.color,o=t.prefixCls;return a.createElement("div",{className:E()("".concat(o,"-handler"),(0,i.A)({},"".concat(o,"-handler-sm"),"small"===n)),style:{backgroundColor:r}})};const k=function(t){var e=t.children,n=t.style,r=t.prefixCls;return a.createElement("div",{className:"".concat(r,"-palette"),style:(0,s.A)({position:"relative"},n)},e)};const I=(0,a.forwardRef)((function(t,e){var n=t.children,r=t.offset;return a.createElement("div",{ref:e,style:{position:"absolute",left:r.x,top:r.y,zIndex:1}},n)}));const N=function(t){var e=t.color,n=t.onChange,r=t.prefixCls,i=t.onChangeComplete,s=t.disabled,u=(0,a.useRef)(),l=(0,a.useRef)(),c=(0,a.useRef)(e),h=(0,C._q)((function(t){var r=w({offset:t,targetRef:l,containerRef:u,color:e});c.current=r,n(r)})),d=M({color:e,containerRef:u,targetRef:l,calculate:function(t){return _(t,l,e)},onDragChange:h,onDragChangeComplete:function(){return null==i?void 0:i(c.current)},disabledDrag:s}),f=(0,o.A)(d,2),p=f[0],m=f[1];return a.createElement("div",{ref:u,className:"".concat(r,"-select"),onMouseDown:m,onTouchStart:m},a.createElement(k,{prefixCls:r},a.createElement(I,{offset:p,ref:l},a.createElement(T,{color:e.toRgbString(),prefixCls:r})),a.createElement("div",{className:"".concat(r,"-saturation"),style:{backgroundColor:"hsl(".concat(e.toHsb().h,",100%, 50%)"),backgroundImage:"linear-gradient(0deg, #000, transparent),linear-gradient(90deg, #fff, hsla(0, 0%, 100%, 0))"}})))};const P=function(t){var e=t.colors,n=t.children,r=t.direction,i=void 0===r?"to right":r,o=t.type,s=t.prefixCls,u=(0,a.useMemo)((function(){return e.map((function(t,n){var r=b(t);return"alpha"===o&&n===e.length-1&&r.setAlpha(1),r.toRgbString()})).join(",")}),[e,o]);return a.createElement("div",{className:"".concat(s,"-gradient"),style:{position:"absolute",inset:0,background:"linear-gradient(".concat(i,", ").concat(u,")")}},n)};const O=function(t){var e=t.gradientColors,n=t.direction,r=t.type,i=void 0===r?"hue":r,s=t.color,u=t.value,l=t.onChange,c=t.onChangeComplete,h=t.disabled,d=t.prefixCls,f=(0,a.useRef)(),p=(0,a.useRef)(),m=(0,a.useRef)(s),g=(0,C._q)((function(t){var e=w({offset:t,targetRef:p,containerRef:f,color:s,type:i});m.current=e,l(e)})),v=M({color:s,targetRef:p,containerRef:f,calculate:function(t){return _(t,p,s,i)},onDragChange:g,onDragChangeComplete:function(){null==c||c(m.current,i)},direction:"x",disabledDrag:h}),y=(0,o.A)(v,2),b=y[0],x=y[1];return a.createElement("div",{ref:f,className:E()("".concat(d,"-slider"),"".concat(d,"-slider-").concat(i)),onMouseDown:x,onTouchStart:x},a.createElement(k,{prefixCls:d},a.createElement(I,{offset:b,ref:p},a.createElement(T,{size:"small",color:u,prefixCls:d})),a.createElement(P,{colors:e,direction:n,type:i,prefixCls:d})))};function L(t){return void 0!==t}const R=function(t,e){var n=e.defaultValue,r=e.value,i=(0,a.useState)((function(){var e;return e=L(r)?r:L(n)?n:t,b(e)})),s=(0,o.A)(i,2),u=s[0],l=s[1];return(0,a.useEffect)((function(){r&&l(b(r))}),[r]),[u,l]};var D=["rgb(255, 0, 0) 0%","rgb(255, 255, 0) 17%","rgb(0, 255, 0) 33%","rgb(0, 255, 255) 50%","rgb(0, 0, 255) 67%","rgb(255, 0, 255) 83%","rgb(255, 0, 0) 100%"];const z=(0,a.forwardRef)((function(t,e){var n=t.value,s=t.defaultValue,u=t.prefixCls,l=void 0===u?"rc-color-picker":u,c=t.onChange,h=t.onChangeComplete,d=t.className,f=t.style,p=t.panelRender,m=t.disabledAlpha,g=void 0!==m&&m,v=t.disabled,y=void 0!==v&&v,w=R(x,{value:n,defaultValue:s}),_=(0,o.A)(w,2),S=_[0],M=_[1],C=(0,a.useMemo)((function(){var t=b(S.toRgbString());return t.setAlpha(1),t.toRgbString()}),[S]),T=E()("".concat(l,"-panel"),d,(0,i.A)({},"".concat(l,"-panel-disabled"),y)),k={prefixCls:l,onChangeComplete:h,disabled:y},I=function(t,e){n||M(t),null==c||c(t,e)},P=a.createElement(a.Fragment,null,a.createElement(N,(0,r.A)({color:S,onChange:I},k)),a.createElement("div",{className:"".concat(l,"-slider-container")},a.createElement("div",{className:E()("".concat(l,"-slider-group"),(0,i.A)({},"".concat(l,"-slider-group-disabled-alpha"),g))},a.createElement(O,(0,r.A)({gradientColors:D,color:S,value:"hsl(".concat(S.toHsb().h,",100%, 50%)"),onChange:function(t){return I(t,"hue")}},k)),!g&&a.createElement(O,(0,r.A)({type:"alpha",gradientColors:["rgba(255, 0, 4, 0) 0%",C],color:S,value:S.toRgbString(),onChange:function(t){return I(t,"alpha")}},k))),a.createElement(A,{color:S.toRgbString(),prefixCls:l})));return a.createElement("div",{className:T,style:f,ref:e},"function"==typeof p?p(P):P)}))},72595:(t,e,n)=>{"use strict";n.d(e,{A:()=>b});var r=n(5544),i=n(96540),o=n(40961),a=n(20998),s=(n(68210),n(8719));const u=i.createContext(null);var l=n(60436),c=n(30981),h=[];var d=n(85089);function f(t){var e="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),n=document.createElement("div");n.id=e;var r,i,o=n.style;if(o.position="absolute",o.left="0",o.top="0",o.width="100px",o.height="100px",o.overflow="scroll",t){var a=getComputedStyle(t);o.scrollbarColor=a.scrollbarColor,o.scrollbarWidth=a.scrollbarWidth;var s=getComputedStyle(t,"::-webkit-scrollbar"),u=parseInt(s.width,10),l=parseInt(s.height,10);try{var c=u?"width: ".concat(s.width,";"):"",h=l?"height: ".concat(s.height,";"):"";(0,d.BD)("\n#".concat(e,"::-webkit-scrollbar {\n").concat(c,"\n").concat(h,"\n}"),e)}catch(t){console.error(t),r=u,i=l}}document.body.appendChild(n);var f=t&&r&&!isNaN(r)?r:n.offsetWidth-n.clientWidth,p=t&&i&&!isNaN(i)?i:n.offsetHeight-n.clientHeight;return document.body.removeChild(n),(0,d.m6)(e),{width:f,height:p}}var p="rc-util-locker-".concat(Date.now()),m=0;function g(t){var e=!!t,n=i.useState((function(){return m+=1,"".concat(p,"_").concat(m)})),o=(0,r.A)(n,1)[0];(0,c.A)((function(){if(e){var t=(r=document.body,"undefined"!=typeof document&&r&&r instanceof Element?f(r):{width:0,height:0}).width,n=document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth;(0,d.BD)("\nhtml body {\n  overflow-y: hidden;\n  ".concat(n?"width: calc(100% - ".concat(t,"px);"):"","\n}"),o)}else(0,d.m6)(o);var r;return function(){(0,d.m6)(o)}}),[e,o])}var v=!1;var y=function(t){return!1!==t&&((0,a.A)()&&t?"string"==typeof t?document.querySelector(t):"function"==typeof t?t():t:null)};const b=i.forwardRef((function(t,e){var n=t.open,d=t.autoLock,f=t.getContainer,p=(t.debug,t.autoDestroy),m=void 0===p||p,b=t.children,x=i.useState(n),w=(0,r.A)(x,2),_=w[0],S=w[1],E=_||n;i.useEffect((function(){(m||n)&&S(n)}),[n,m]);var A=i.useState((function(){return y(f)})),M=(0,r.A)(A,2),C=M[0],T=M[1];i.useEffect((function(){var t=y(f);T(null!=t?t:null)}));var k=function(t,e){var n=i.useState((function(){return(0,a.A)()?document.createElement("div"):null})),o=(0,r.A)(n,1)[0],s=i.useRef(!1),d=i.useContext(u),f=i.useState(h),p=(0,r.A)(f,2),m=p[0],g=p[1],v=d||(s.current?void 0:function(t){g((function(e){return[t].concat((0,l.A)(e))}))});function y(){o.parentElement||document.body.appendChild(o),s.current=!0}function b(){var t;null===(t=o.parentElement)||void 0===t||t.removeChild(o),s.current=!1}return(0,c.A)((function(){return t?d?d(y):y():b(),b}),[t]),(0,c.A)((function(){m.length&&(m.forEach((function(t){return t()})),g(h))}),[m]),[o,v]}(E&&!C),I=(0,r.A)(k,2),N=I[0],P=I[1],O=null!=C?C:N;g(d&&n&&(0,a.A)()&&(O===N||O===document.body));var L=null;b&&(0,s.f3)(b)&&e&&(L=b.ref);var R=(0,s.xK)(L,e);if(!E||!(0,a.A)()||void 0===C)return null;var D,z=!1===O||("boolean"==typeof D&&(v=D),v),F=b;return e&&(F=i.cloneElement(b,{ref:R})),i.createElement(u.Provider,{value:P},z?F:(0,o.createPortal)(F,O))}))},62427:(t,e,n)=>{"use strict";n.d(e,{A:()=>V});var r=n(89379),i=n(5544),o=n(53986),a=n(72595),s=n(46942),u=n.n(s),l=n(18462),c=n(66588),h=n(72633),d=n(26956),f=n(56855),p=n(30981),m=n(68430),g=n(96540),v=n(58168),y=n(57557),b=n(8719);function x(t){var e=t.prefixCls,n=t.align,r=t.arrow,i=t.arrowPos,o=r||{},a=o.className,s=o.content,l=i.x,c=void 0===l?0:l,h=i.y,d=void 0===h?0:h,f=g.useRef();if(!n||!n.points)return null;var p={position:"absolute"};if(!1!==n.autoArrow){var m=n.points[0],v=n.points[1],y=m[0],b=m[1],x=v[0],w=v[1];y!==x&&["t","b"].includes(y)?"t"===y?p.top=0:p.bottom=0:p.top=d,b!==w&&["l","r"].includes(b)?"l"===b?p.left=0:p.right=0:p.left=c}return g.createElement("div",{ref:f,className:u()("".concat(e,"-arrow"),a),style:p},s)}function w(t){var e=t.prefixCls,n=t.open,r=t.zIndex,i=t.mask,o=t.motion;return i?g.createElement(y.Ay,(0,v.A)({},o,{motionAppear:!0,visible:n,removeOnLeave:!0}),(function(t){var n=t.className;return g.createElement("div",{style:{zIndex:r},className:u()("".concat(e,"-mask"),n)})})):null}const _=g.memo((function(t){return t.children}),(function(t,e){return e.cache}));const S=g.forwardRef((function(t,e){var n=t.popup,o=t.className,a=t.prefixCls,s=t.style,c=t.target,h=t.onVisibleChanged,d=t.open,f=t.keepDom,m=t.fresh,S=t.onClick,E=t.mask,A=t.arrow,M=t.arrowPos,C=t.align,T=t.motion,k=t.maskMotion,I=t.forceRender,N=t.getPopupContainer,P=t.autoDestroy,O=t.portal,L=t.zIndex,R=t.onMouseEnter,D=t.onMouseLeave,z=t.onPointerEnter,F=t.ready,B=t.offsetX,U=t.offsetY,j=t.offsetR,V=t.offsetB,H=t.onAlign,G=t.onPrepare,W=t.stretch,X=t.targetWidth,Y=t.targetHeight,q="function"==typeof n?n():n,$=d||f,K=(null==N?void 0:N.length)>0,Z=g.useState(!N||!K),Q=(0,i.A)(Z,2),J=Q[0],tt=Q[1];if((0,p.A)((function(){!J&&K&&c&&tt(!0)}),[J,K,c]),!J)return null;var et="auto",nt={left:"-1000vw",top:"-1000vh",right:et,bottom:et};if(F||!d){var rt,it=C.points,ot=C.dynamicInset||(null===(rt=C._experimental)||void 0===rt?void 0:rt.dynamicInset),at=ot&&"r"===it[0][1],st=ot&&"b"===it[0][0];at?(nt.right=j,nt.left=et):(nt.left=B,nt.right=et),st?(nt.bottom=V,nt.top=et):(nt.top=U,nt.bottom=et)}var ut={};return W&&(W.includes("height")&&Y?ut.height=Y:W.includes("minHeight")&&Y&&(ut.minHeight=Y),W.includes("width")&&X?ut.width=X:W.includes("minWidth")&&X&&(ut.minWidth=X)),d||(ut.pointerEvents="none"),g.createElement(O,{open:I||$,getContainer:N&&function(){return N(c)},autoDestroy:P},g.createElement(w,{prefixCls:a,open:d,zIndex:L,mask:E,motion:k}),g.createElement(l.A,{onResize:H,disabled:!d},(function(t){return g.createElement(y.Ay,(0,v.A)({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:I,leavedClassName:"".concat(a,"-hidden")},T,{onAppearPrepare:G,onEnterPrepare:G,visible:d,onVisibleChanged:function(t){var e;null==T||null===(e=T.onVisibleChanged)||void 0===e||e.call(T,t),h(t)}}),(function(n,i){var l=n.className,c=n.style,h=u()(a,l,o);return g.createElement("div",{ref:(0,b.K4)(t,e,i),className:h,style:(0,r.A)((0,r.A)((0,r.A)((0,r.A)({"--arrow-x":"".concat(M.x||0,"px"),"--arrow-y":"".concat(M.y||0,"px")},nt),ut),c),{},{boxSizing:"border-box",zIndex:L},s),onMouseEnter:R,onMouseLeave:D,onPointerEnter:z,onClick:S},A&&g.createElement(x,{prefixCls:a,arrow:A,arrowPos:M,align:C}),g.createElement(_,{cache:!d&&!m},q))}))})))}));const E=g.forwardRef((function(t,e){var n=t.children,r=t.getTriggerDOMNode,i=(0,b.f3)(n),o=g.useCallback((function(t){(0,b.Xf)(e,r?r(t):t)}),[r]),a=(0,b.xK)(o,n.ref);return i?g.cloneElement(n,{ref:a}):n}));const A=g.createContext(null);function M(t){return t?Array.isArray(t)?t:[t]:[]}var C=n(42467);function T(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(arguments.length>2?arguments[2]:void 0)?t[0]===e[0]:t[0]===e[0]&&t[1]===e[1]}function k(t,e,n,r){return e||(n?{motionName:"".concat(t,"-").concat(n)}:r?{motionName:r}:null)}function I(t){return t.ownerDocument.defaultView}function N(t){for(var e=[],n=null==t?void 0:t.parentElement,r=["hidden","scroll","clip","auto"];n;){var i=I(n).getComputedStyle(n);[i.overflowX,i.overflowY,i.overflow].some((function(t){return r.includes(t)}))&&e.push(n),n=n.parentElement}return e}function P(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Number.isNaN(t)?e:t}function O(t){return P(parseFloat(t),0)}function L(t,e){var n=(0,r.A)({},t);return(e||[]).forEach((function(t){if(!(t instanceof HTMLBodyElement||t instanceof HTMLHtmlElement)){var e=I(t).getComputedStyle(t),r=e.overflow,i=e.overflowClipMargin,o=e.borderTopWidth,a=e.borderBottomWidth,s=e.borderLeftWidth,u=e.borderRightWidth,l=t.getBoundingClientRect(),c=t.offsetHeight,h=t.clientHeight,d=t.offsetWidth,f=t.clientWidth,p=O(o),m=O(a),g=O(s),v=O(u),y=P(Math.round(l.width/d*1e3)/1e3),b=P(Math.round(l.height/c*1e3)/1e3),x=(d-f-g-v)*y,w=(c-h-p-m)*b,_=p*b,S=m*b,E=g*y,A=v*y,M=0,C=0;if("clip"===r){var T=O(i);M=T*y,C=T*b}var k=l.x+E-M,N=l.y+_-C,L=k+l.width+2*M-E-A-x,R=N+l.height+2*C-_-S-w;n.left=Math.max(n.left,k),n.top=Math.max(n.top,N),n.right=Math.min(n.right,L),n.bottom=Math.min(n.bottom,R)}})),n}function R(t){var e="".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),n=e.match(/^(.*)\%$/);return n?t*(parseFloat(n[1])/100):parseFloat(e)}function D(t,e){var n=e||[],r=(0,i.A)(n,2),o=r[0],a=r[1];return[R(t.width,o),R(t.height,a)]}function z(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return[t[0],t[1]]}function F(t,e){var n,r=e[0],i=e[1];return n="t"===r?t.y:"b"===r?t.y+t.height:t.y+t.height/2,{x:"l"===i?t.x:"r"===i?t.x+t.width:t.x+t.width/2,y:n}}function B(t,e){var n={t:"b",b:"t",l:"r",r:"l"};return t.map((function(t,r){return r===e?n[t]||"c":t})).join("")}var U=n(60436);n(68210);var j=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];const V=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.A;return g.forwardRef((function(e,n){var a=e.prefixCls,s=void 0===a?"rc-trigger-popup":a,v=e.children,y=e.action,b=void 0===y?"hover":y,x=e.showAction,w=e.hideAction,_=e.popupVisible,O=e.defaultPopupVisible,R=e.onPopupVisibleChange,V=e.afterPopupVisibleChange,H=e.mouseEnterDelay,G=e.mouseLeaveDelay,W=void 0===G?.1:G,X=e.focusDelay,Y=e.blurDelay,q=e.mask,$=e.maskClosable,K=void 0===$||$,Z=e.getPopupContainer,Q=e.forceRender,J=e.autoDestroy,tt=e.destroyPopupOnHide,et=e.popup,nt=e.popupClassName,rt=e.popupStyle,it=e.popupPlacement,ot=e.builtinPlacements,at=void 0===ot?{}:ot,st=e.popupAlign,ut=e.zIndex,lt=e.stretch,ct=e.getPopupClassNameFromAlign,ht=e.fresh,dt=e.alignPoint,ft=e.onPopupClick,pt=e.onPopupAlign,mt=e.arrow,gt=e.popupMotion,vt=e.maskMotion,yt=e.popupTransitionName,bt=e.popupAnimation,xt=e.maskTransitionName,wt=e.maskAnimation,_t=e.className,St=e.getTriggerDOMNode,Et=(0,o.A)(e,j),At=J||tt||!1,Mt=g.useState(!1),Ct=(0,i.A)(Mt,2),Tt=Ct[0],kt=Ct[1];(0,p.A)((function(){kt((0,m.A)())}),[]);var It=g.useRef({}),Nt=g.useContext(A),Pt=g.useMemo((function(){return{registerSubPopup:function(t,e){It.current[t]=e,null==Nt||Nt.registerSubPopup(t,e)}}}),[Nt]),Ot=(0,f.A)(),Lt=g.useState(null),Rt=(0,i.A)(Lt,2),Dt=Rt[0],zt=Rt[1],Ft=g.useRef(null),Bt=(0,d.A)((function(t){Ft.current=t,(0,c.f)(t)&&Dt!==t&&zt(t),null==Nt||Nt.registerSubPopup(Ot,t)})),Ut=g.useState(null),jt=(0,i.A)(Ut,2),Vt=jt[0],Ht=jt[1],Gt=g.useRef(null),Wt=(0,d.A)((function(t){(0,c.f)(t)&&Vt!==t&&(Ht(t),Gt.current=t)})),Xt=g.Children.only(v),Yt=(null==Xt?void 0:Xt.props)||{},qt={},$t=(0,d.A)((function(t){var e,n,r=Vt;return(null==r?void 0:r.contains(t))||(null===(e=(0,h.j)(r))||void 0===e?void 0:e.host)===t||t===r||(null==Dt?void 0:Dt.contains(t))||(null===(n=(0,h.j)(Dt))||void 0===n?void 0:n.host)===t||t===Dt||Object.values(It.current).some((function(e){return(null==e?void 0:e.contains(t))||t===e}))})),Kt=k(s,gt,bt,yt),Zt=k(s,vt,wt,xt),Qt=g.useState(O||!1),Jt=(0,i.A)(Qt,2),te=Jt[0],ee=Jt[1],ne=null!=_?_:te,re=(0,d.A)((function(t){void 0===_&&ee(t)}));(0,p.A)((function(){ee(_||!1)}),[_]);var ie=g.useRef(ne);ie.current=ne;var oe=g.useRef([]);oe.current=[];var ae=(0,d.A)((function(t){var e;re(t),(null!==(e=oe.current[oe.current.length-1])&&void 0!==e?e:ne)!==t&&(oe.current.push(t),null==R||R(t))})),se=g.useRef(),ue=function(){clearTimeout(se.current)},le=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;ue(),0===e?ae(t):se.current=setTimeout((function(){ae(t)}),1e3*e)};g.useEffect((function(){return ue}),[]);var ce=g.useState(!1),he=(0,i.A)(ce,2),de=he[0],fe=he[1];(0,p.A)((function(t){t&&!ne||fe(!0)}),[ne]);var pe=g.useState(null),me=(0,i.A)(pe,2),ge=me[0],ve=me[1],ye=g.useState([0,0]),be=(0,i.A)(ye,2),xe=be[0],we=be[1],_e=function(t){we([t.clientX,t.clientY])},Se=function(t,e,n,o,a,s,u){var l=g.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:a[o]||{}}),h=(0,i.A)(l,2),f=h[0],m=h[1],v=g.useRef(0),y=g.useMemo((function(){return e?N(e):[]}),[e]),b=g.useRef({});t||(b.current={});var x=(0,d.A)((function(){if(e&&n&&t){var l,h,d,f=e,p=f.ownerDocument,g=I(f).getComputedStyle(f),v=g.width,x=g.height,w=g.position,_=f.style.left,S=f.style.top,E=f.style.right,A=f.style.bottom,M=f.style.overflow,T=(0,r.A)((0,r.A)({},a[o]),s),k=p.createElement("div");if(null===(l=f.parentElement)||void 0===l||l.appendChild(k),k.style.left="".concat(f.offsetLeft,"px"),k.style.top="".concat(f.offsetTop,"px"),k.style.position=w,k.style.height="".concat(f.offsetHeight,"px"),k.style.width="".concat(f.offsetWidth,"px"),f.style.left="0",f.style.top="0",f.style.right="auto",f.style.bottom="auto",f.style.overflow="hidden",Array.isArray(n))d={x:n[0],y:n[1],width:0,height:0};else{var N=n.getBoundingClientRect();d={x:N.x,y:N.y,width:N.width,height:N.height}}var O=f.getBoundingClientRect(),R=p.documentElement,U=R.clientWidth,j=R.clientHeight,V=R.scrollWidth,H=R.scrollHeight,G=R.scrollTop,W=R.scrollLeft,X=O.height,Y=O.width,q=d.height,$=d.width,K={left:0,top:0,right:U,bottom:j},Z={left:-W,top:-G,right:V-W,bottom:H-G},Q=T.htmlRegion,J="visible",tt="visibleFirst";"scroll"!==Q&&Q!==tt&&(Q=J);var et=Q===tt,nt=L(Z,y),rt=L(K,y),it=Q===J?rt:nt,ot=et?rt:it;f.style.left="auto",f.style.top="auto",f.style.right="0",f.style.bottom="0";var at=f.getBoundingClientRect();f.style.left=_,f.style.top=S,f.style.right=E,f.style.bottom=A,f.style.overflow=M,null===(h=f.parentElement)||void 0===h||h.removeChild(k);var st=P(Math.round(Y/parseFloat(v)*1e3)/1e3),ut=P(Math.round(X/parseFloat(x)*1e3)/1e3);if(0===st||0===ut||(0,c.f)(n)&&!(0,C.A)(n))return;var lt=T.offset,ct=T.targetOffset,ht=D(O,lt),dt=(0,i.A)(ht,2),ft=dt[0],pt=dt[1],mt=D(d,ct),gt=(0,i.A)(mt,2),vt=gt[0],yt=gt[1];d.x-=vt,d.y-=yt;var bt=T.points||[],xt=(0,i.A)(bt,2),wt=xt[0],_t=z(xt[1]),St=z(wt),Et=F(d,_t),At=F(O,St),Mt=(0,r.A)({},T),Ct=Et.x-At.x+ft,Tt=Et.y-At.y+pt;function we(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:it,r=O.x+t,i=O.y+e,o=r+Y,a=i+X,s=Math.max(r,n.left),u=Math.max(i,n.top),l=Math.min(o,n.right),c=Math.min(a,n.bottom);return Math.max(0,(l-s)*(c-u))}var kt,It,Nt,Pt,Ot=we(Ct,Tt),Lt=we(Ct,Tt,rt),Rt=F(d,["t","l"]),Dt=F(O,["t","l"]),zt=F(d,["b","r"]),Ft=F(O,["b","r"]),Bt=T.overflow||{},Ut=Bt.adjustX,jt=Bt.adjustY,Vt=Bt.shiftX,Ht=Bt.shiftY,Gt=function(t){return"boolean"==typeof t?t:t>=0};function _e(){kt=O.y+Tt,It=kt+X,Nt=O.x+Ct,Pt=Nt+Y}_e();var Wt=Gt(jt),Xt=St[0]===_t[0];if(Wt&&"t"===St[0]&&(It>ot.bottom||b.current.bt)){var Yt=Tt;Xt?Yt-=X-q:Yt=Rt.y-Ft.y-pt;var qt=we(Ct,Yt),$t=we(Ct,Yt,rt);qt>Ot||qt===Ot&&(!et||$t>=Lt)?(b.current.bt=!0,Tt=Yt,pt=-pt,Mt.points=[B(St,0),B(_t,0)]):b.current.bt=!1}if(Wt&&"b"===St[0]&&(kt<ot.top||b.current.tb)){var Kt=Tt;Xt?Kt+=X-q:Kt=zt.y-Dt.y-pt;var Zt=we(Ct,Kt),Qt=we(Ct,Kt,rt);Zt>Ot||Zt===Ot&&(!et||Qt>=Lt)?(b.current.tb=!0,Tt=Kt,pt=-pt,Mt.points=[B(St,0),B(_t,0)]):b.current.tb=!1}var Jt=Gt(Ut),te=St[1]===_t[1];if(Jt&&"l"===St[1]&&(Pt>ot.right||b.current.rl)){var ee=Ct;te?ee-=Y-$:ee=Rt.x-Ft.x-ft;var ne=we(ee,Tt),re=we(ee,Tt,rt);ne>Ot||ne===Ot&&(!et||re>=Lt)?(b.current.rl=!0,Ct=ee,ft=-ft,Mt.points=[B(St,1),B(_t,1)]):b.current.rl=!1}if(Jt&&"r"===St[1]&&(Nt<ot.left||b.current.lr)){var ie=Ct;te?ie+=Y-$:ie=zt.x-Dt.x-ft;var oe=we(ie,Tt),ae=we(ie,Tt,rt);oe>Ot||oe===Ot&&(!et||ae>=Lt)?(b.current.lr=!0,Ct=ie,ft=-ft,Mt.points=[B(St,1),B(_t,1)]):b.current.lr=!1}_e();var se=!0===Vt?0:Vt;"number"==typeof se&&(Nt<rt.left&&(Ct-=Nt-rt.left-ft,d.x+$<rt.left+se&&(Ct+=d.x-rt.left+$-se)),Pt>rt.right&&(Ct-=Pt-rt.right-ft,d.x>rt.right-se&&(Ct+=d.x-rt.right+se)));var ue=!0===Ht?0:Ht;"number"==typeof ue&&(kt<rt.top&&(Tt-=kt-rt.top-pt,d.y+q<rt.top+ue&&(Tt+=d.y-rt.top+q-ue)),It>rt.bottom&&(Tt-=It-rt.bottom-pt,d.y>rt.bottom-ue&&(Tt+=d.y-rt.bottom+ue)));var le=O.x+Ct,ce=le+Y,he=O.y+Tt,de=he+X,fe=d.x,pe=fe+$,me=d.y,ge=me+q,ve=(Math.max(le,fe)+Math.min(ce,pe))/2-le,ye=(Math.max(he,me)+Math.min(de,ge))/2-he;null==u||u(e,Mt);var be=at.right-O.x-(Ct+O.width),xe=at.bottom-O.y-(Tt+O.height);m({ready:!0,offsetX:Ct/st,offsetY:Tt/ut,offsetR:be/st,offsetB:xe/ut,arrowX:ve/st,arrowY:ye/ut,scaleX:st,scaleY:ut,align:Mt})}})),w=function(){m((function(t){return(0,r.A)((0,r.A)({},t),{},{ready:!1})}))};return(0,p.A)(w,[o]),(0,p.A)((function(){t||w()}),[t]),[f.ready,f.offsetX,f.offsetY,f.offsetR,f.offsetB,f.arrowX,f.arrowY,f.scaleX,f.scaleY,f.align,function(){v.current+=1;var t=v.current;Promise.resolve().then((function(){v.current===t&&x()}))}]}(ne,Dt,dt?xe:Vt,it,at,st,pt),Ee=(0,i.A)(Se,11),Ae=Ee[0],Me=Ee[1],Ce=Ee[2],Te=Ee[3],ke=Ee[4],Ie=Ee[5],Ne=Ee[6],Pe=Ee[7],Oe=Ee[8],Le=Ee[9],Re=Ee[10],De=function(t,e,n,r){return g.useMemo((function(){var i=M(null!=n?n:e),o=M(null!=r?r:e),a=new Set(i),s=new Set(o);return t&&(a.has("hover")&&(a.delete("hover"),a.add("click")),s.has("hover")&&(s.delete("hover"),s.add("click"))),[a,s]}),[t,e,n,r])}(Tt,b,x,w),ze=(0,i.A)(De,2),Fe=ze[0],Be=ze[1],Ue=Fe.has("click"),je=Be.has("click")||Be.has("contextMenu"),Ve=(0,d.A)((function(){de||Re()}));!function(t,e,n,r,i){(0,p.A)((function(){if(t&&e&&n){var o=n,a=N(e),s=N(o),u=I(o),l=new Set([u].concat((0,U.A)(a),(0,U.A)(s)));function c(){r(),i()}return l.forEach((function(t){t.addEventListener("scroll",c,{passive:!0})})),u.addEventListener("resize",c,{passive:!0}),r(),function(){l.forEach((function(t){t.removeEventListener("scroll",c),u.removeEventListener("resize",c)}))}}}),[t,e,n])}(ne,Vt,Dt,Ve,(function(){ie.current&&dt&&je&&le(!1)})),(0,p.A)((function(){Ve()}),[xe,it]),(0,p.A)((function(){!ne||null!=at&&at[it]||Ve()}),[JSON.stringify(st)]);var He=g.useMemo((function(){var t=function(t,e,n,r){for(var i=n.points,o=Object.keys(t),a=0;a<o.length;a+=1){var s,u=o[a];if(T(null===(s=t[u])||void 0===s?void 0:s.points,i,r))return"".concat(e,"-placement-").concat(u)}return""}(at,s,Le,dt);return u()(t,null==ct?void 0:ct(Le))}),[Le,ct,at,s,dt]);g.useImperativeHandle(n,(function(){return{nativeElement:Gt.current,popupElement:Ft.current,forceAlign:Ve}}));var Ge=g.useState(0),We=(0,i.A)(Ge,2),Xe=We[0],Ye=We[1],qe=g.useState(0),$e=(0,i.A)(qe,2),Ke=$e[0],Ze=$e[1],Qe=function(){if(lt&&Vt){var t=Vt.getBoundingClientRect();Ye(t.width),Ze(t.height)}};function Je(t,e,n,r){qt[t]=function(i){var o;null==r||r(i),le(e,n);for(var a=arguments.length,s=new Array(a>1?a-1:0),u=1;u<a;u++)s[u-1]=arguments[u];null===(o=Yt[t])||void 0===o||o.call.apply(o,[Yt,i].concat(s))}}(0,p.A)((function(){ge&&(Re(),ge(),ve(null))}),[ge]),(Ue||je)&&(qt.onClick=function(t){var e;ie.current&&je?le(!1):!ie.current&&Ue&&(_e(t),le(!0));for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];null===(e=Yt.onClick)||void 0===e||e.call.apply(e,[Yt,t].concat(r))}),function(t,e,n,r,i,o,a,s){var u=g.useRef(t);u.current=t,g.useEffect((function(){if(e&&r&&(!i||o)){var t=function(t){var e=t.target;u.current&&!a(e)&&s(!1)},l=I(r);l.addEventListener("mousedown",t,!0),l.addEventListener("contextmenu",t,!0);var c=(0,h.j)(n);return c&&(c.addEventListener("mousedown",t,!0),c.addEventListener("contextmenu",t,!0)),function(){l.removeEventListener("mousedown",t,!0),l.removeEventListener("contextmenu",t,!0),c&&(c.removeEventListener("mousedown",t,!0),c.removeEventListener("contextmenu",t,!0))}}}),[e,n,r,i,o])}(ne,je,Vt,Dt,q,K,$t,le);var tn,en,nn=Fe.has("hover"),rn=Be.has("hover");nn&&(Je("onMouseEnter",!0,H,(function(t){_e(t)})),Je("onPointerEnter",!0,H,(function(t){_e(t)})),tn=function(t){(ne||de)&&null!=Dt&&Dt.contains(t.target)&&le(!0,H)},dt&&(qt.onMouseMove=function(t){var e;null===(e=Yt.onMouseMove)||void 0===e||e.call(Yt,t)})),rn&&(Je("onMouseLeave",!1,W),Je("onPointerLeave",!1,W),en=function(){le(!1,W)}),Fe.has("focus")&&Je("onFocus",!0,X),Be.has("focus")&&Je("onBlur",!1,Y),Fe.has("contextMenu")&&(qt.onContextMenu=function(t){var e;ie.current&&Be.has("contextMenu")?le(!1):(_e(t),le(!0)),t.preventDefault();for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];null===(e=Yt.onContextMenu)||void 0===e||e.call.apply(e,[Yt,t].concat(r))}),_t&&(qt.className=u()(Yt.className,_t));var on=(0,r.A)((0,r.A)({},Yt),qt),an={};["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"].forEach((function(t){Et[t]&&(an[t]=function(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];null===(e=on[t])||void 0===e||e.call.apply(e,[on].concat(r)),Et[t].apply(Et,r)})}));var sn=g.cloneElement(Xt,(0,r.A)((0,r.A)({},on),an)),un={x:Ie,y:Ne},ln=mt?(0,r.A)({},!0!==mt?mt:{}):null;return g.createElement(g.Fragment,null,g.createElement(l.A,{disabled:!ne,ref:Wt,onResize:function(){Qe(),Ve()}},g.createElement(E,{getTriggerDOMNode:St},sn)),g.createElement(A.Provider,{value:Pt},g.createElement(S,{portal:t,ref:Bt,prefixCls:s,popup:et,className:u()(nt,He),style:rt,target:Vt,onMouseEnter:tn,onMouseLeave:en,onPointerEnter:tn,zIndex:ut,open:ne,keepDom:de,fresh:ht,onClick:ft,mask:q,motion:Kt,maskMotion:Zt,onVisibleChanged:function(t){fe(!1),Re(),null==V||V(t)},onPrepare:function(){return new Promise((function(t){Qe(),ve((function(){return t}))}))},forceRender:Q,autoDestroy:At,getPopupContainer:Z,align:Le,arrow:ln,arrowPos:un,ready:Ae,offsetX:Me,offsetY:Ce,offsetR:Te,offsetB:ke,onAlign:Ve,stretch:lt,targetWidth:Xe/Pe,targetHeight:Ke/Oe})))}))}(a.A)},45588:(t,e,n)=>{"use strict";
/**
 * @remix-run/router v1.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function r(){return r=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r.apply(this,arguments)}var i;n.d(e,{Gh:()=>O,HS:()=>L,Oi:()=>s,Rr:()=>d,TM:()=>a,pX:()=>B,pb:()=>k,rc:()=>i,tH:()=>F,ue:()=>m,yD:()=>P}),function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"}(i||(i={}));const o="popstate";function a(t){return void 0===t&&(t={}),f((function(t,e){let{pathname:n="/",search:r="",hash:i=""}=d(t.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),c("",{pathname:n,search:r,hash:i},e.state&&e.state.usr||null,e.state&&e.state.key||"default")}),(function(t,e){let n=t.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let e=t.location.href,n=e.indexOf("#");r=-1===n?e:e.slice(0,n)}return r+"#"+("string"==typeof e?e:h(e))}),(function(t,e){u("/"===t.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(e)+")")}),t)}function s(t,e){if(!1===t||null==t)throw new Error(e)}function u(t,e){if(!t){"undefined"!=typeof console&&console.warn(e);try{throw new Error(e)}catch(t){}}}function l(t,e){return{usr:t.state,key:t.key,idx:e}}function c(t,e,n,i){return void 0===n&&(n=null),r({pathname:"string"==typeof t?t:t.pathname,search:"",hash:""},"string"==typeof e?d(e):e,{state:n,key:e&&e.key||i||Math.random().toString(36).substr(2,8)})}function h(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&"?"!==n&&(e+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(e+="#"===r.charAt(0)?r:"#"+r),e}function d(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function f(t,e,n,a){void 0===a&&(a={});let{window:u=document.defaultView,v5Compat:d=!1}=a,f=u.history,p=i.Pop,m=null,g=v();function v(){return(f.state||{idx:null}).idx}function y(){p=i.Pop;let t=v(),e=null==t?null:t-g;g=t,m&&m({action:p,location:x.location,delta:e})}function b(t){let e="null"!==u.location.origin?u.location.origin:u.location.href,n="string"==typeof t?t:h(t);return n=n.replace(/ $/,"%20"),s(e,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,e)}null==g&&(g=0,f.replaceState(r({},f.state,{idx:g}),""));let x={get action(){return p},get location(){return t(u,f)},listen(t){if(m)throw new Error("A history only accepts one active listener");return u.addEventListener(o,y),m=t,()=>{u.removeEventListener(o,y),m=null}},createHref:t=>e(u,t),createURL:b,encodeLocation(t){let e=b(t);return{pathname:e.pathname,search:e.search,hash:e.hash}},push:function(t,e){p=i.Push;let r=c(x.location,t,e);n&&n(r,t),g=v()+1;let o=l(r,g),a=x.createHref(r);try{f.pushState(o,"",a)}catch(t){if(t instanceof DOMException&&"DataCloneError"===t.name)throw t;u.location.assign(a)}d&&m&&m({action:p,location:x.location,delta:1})},replace:function(t,e){p=i.Replace;let r=c(x.location,t,e);n&&n(r,t),g=v();let o=l(r,g),a=x.createHref(r);f.replaceState(o,"",a),d&&m&&m({action:p,location:x.location,delta:0})},go:t=>f.go(t)};return x}var p;!function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"}(p||(p={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function m(t,e,n){void 0===n&&(n="/");let r=k(("string"==typeof e?d(e):e).pathname||"/",n);if(null==r)return null;let i=g(t);!function(t){t.sort(((t,e)=>t.score!==e.score?e.score-t.score:function(t,e){let n=t.length===e.length&&t.slice(0,-1).every(((t,n)=>t===e[n]));return n?t[t.length-1]-e[e.length-1]:0}(t.routesMeta.map((t=>t.childrenIndex)),e.routesMeta.map((t=>t.childrenIndex)))))}(i);let o=null;for(let t=0;null==o&&t<i.length;++t){let e=T(r);o=M(i[t],e)}return o}function g(t,e,n,r){void 0===e&&(e=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(t,i,o)=>{let a={relativePath:void 0===o?t.path||"":o,caseSensitive:!0===t.caseSensitive,childrenIndex:i,route:t};a.relativePath.startsWith("/")&&(s(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let u=L([r,a.relativePath]),l=n.concat(a);t.children&&t.children.length>0&&(s(!0!==t.index,'Index routes must not have child routes. Please remove all child routes from route path "'+u+'".'),g(t.children,e,l,u)),(null!=t.path||t.index)&&e.push({path:u,score:A(u,t.index),routesMeta:l})};return t.forEach(((t,e)=>{var n;if(""!==t.path&&null!=(n=t.path)&&n.includes("?"))for(let n of v(t.path))i(t,e,n);else i(t,e)})),e}function v(t){let e=t.split("/");if(0===e.length)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let a=v(r.join("/")),s=[];return s.push(...a.map((t=>""===t?o:[o,t].join("/")))),i&&s.push(...a),s.map((e=>t.startsWith("/")&&""===e?"/":e))}const y=/^:[\w-]+$/,b=3,x=2,w=1,_=10,S=-2,E=t=>"*"===t;function A(t,e){let n=t.split("/"),r=n.length;return n.some(E)&&(r+=S),e&&(r+=x),n.filter((t=>!E(t))).reduce(((t,e)=>t+(y.test(e)?b:""===e?w:_)),r)}function M(t,e){let{routesMeta:n}=t,r={},i="/",o=[];for(let t=0;t<n.length;++t){let a=n[t],s=t===n.length-1,u="/"===i?e:e.slice(i.length)||"/",l=C({path:a.relativePath,caseSensitive:a.caseSensitive,end:s},u);if(!l)return null;Object.assign(r,l.params);let c=a.route;o.push({params:r,pathname:L([i,l.pathname]),pathnameBase:R(L([i,l.pathnameBase])),route:c}),"/"!==l.pathnameBase&&(i=L([i,l.pathnameBase]))}return o}function C(t,e){"string"==typeof t&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=function(t,e,n){void 0===e&&(e=!1);void 0===n&&(n=!0);u("*"===t||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were "'+t.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+t.replace(/\*$/,"/*")+'".');let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((t,e,n)=>(r.push({paramName:e,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));t.endsWith("*")?(r.push({paramName:"*"}),i+="*"===t||"/*"===t?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==t&&"/"!==t&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,e?void 0:"i");return[o,r]}(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce(((t,e,n)=>{let{paramName:r,isOptional:i}=e;if("*"===r){let t=s[n]||"";a=o.slice(0,o.length-t.length).replace(/(.)\/+$/,"$1")}const u=s[n];return t[r]=i&&!u?void 0:(u||"").replace(/%2F/g,"/"),t}),{}),pathname:o,pathnameBase:a,pattern:t}}function T(t){try{return t.split("/").map((t=>decodeURIComponent(t).replace(/\//g,"%2F"))).join("/")}catch(e){return u(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+e+")."),t}}function k(t,e){if("/"===e)return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&"/"!==r?null:t.slice(n)||"/"}function I(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified `to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function N(t){return t.filter(((t,e)=>0===e||t.route.path&&t.route.path.length>0))}function P(t,e){let n=N(t);return e?n.map(((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)):n.map((t=>t.pathnameBase))}function O(t,e,n,i){let o;void 0===i&&(i=!1),"string"==typeof t?o=d(t):(o=r({},t),s(!o.pathname||!o.pathname.includes("?"),I("?","pathname","search",o)),s(!o.pathname||!o.pathname.includes("#"),I("#","pathname","hash",o)),s(!o.search||!o.search.includes("#"),I("#","search","hash",o)));let a,u=""===t||""===o.pathname,l=u?"/":o.pathname;if(null==l)a=n;else{let t=e.length-1;if(!i&&l.startsWith("..")){let e=l.split("/");for(;".."===e[0];)e.shift(),t-=1;o.pathname=e.join("/")}a=t>=0?e[t]:"/"}let c=function(t,e){void 0===e&&(e="/");let{pathname:n,search:r="",hash:i=""}="string"==typeof t?d(t):t,o=n?n.startsWith("/")?n:function(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach((t=>{".."===t?n.length>1&&n.pop():"."!==t&&n.push(t)})),n.length>1?n.join("/"):"/"}(n,e):e;return{pathname:o,search:D(r),hash:z(i)}}(o,a),h=l&&"/"!==l&&l.endsWith("/"),f=(u||"."===l)&&n.endsWith("/");return c.pathname.endsWith("/")||!h&&!f||(c.pathname+="/"),c}const L=t=>t.join("/").replace(/\/\/+/g,"/"),R=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),D=t=>t&&"?"!==t?t.startsWith("?")?t:"?"+t:"",z=t=>t&&"#"!==t?t.startsWith("#")?t:"#"+t:"";class F extends Error{}function B(t){return null!=t&&"number"==typeof t.status&&"string"==typeof t.statusText&&"boolean"==typeof t.internal&&"data"in t}const U=["post","put","patch","delete"],j=(new Set(U),["get",...U]);new Set(j),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred")},67466:(t,e,n)=>{"use strict";n.d(e,{addImpl:()=>m,bincountImpl:()=>v,bincountReduceImpl:()=>y,bitwiseAndImpl:()=>b,castImpl:()=>h,ceilImpl:()=>S,concatImpl:()=>E,equalImpl:()=>A,expImpl:()=>M,expm1Impl:()=>C,floorDivImpl:()=>k,floorImpl:()=>T,gatherNdImpl:()=>I,gatherV2Impl:()=>N,greaterEqualImpl:()=>O,greaterImpl:()=>P,lessEqualImpl:()=>R,lessImpl:()=>L,linSpaceImpl:()=>D,logImpl:()=>z,maxImpl:()=>F,maximumImpl:()=>B,minimumImpl:()=>U,multiplyImpl:()=>j,negImpl:()=>H,notEqualImpl:()=>G,prodImpl:()=>X,raggedGatherImpl:()=>K,raggedRangeImpl:()=>Q,raggedTensorToTensorImpl:()=>rt,rangeImpl:()=>it,rsqrtImpl:()=>ot,scatterImpl:()=>at,sigmoidImpl:()=>st,simpleAbsImpl:()=>o,sliceImpl:()=>ut,sparseFillEmptyRowsImpl:()=>lt,sparseReshapeImpl:()=>ct,sparseSegmentReductionImpl:()=>ht,sqrtImpl:()=>dt,staticRegexReplaceImpl:()=>ft,stridedSliceImpl:()=>pt,stringNGramsImpl:()=>gt,stringSplitImpl:()=>yt,stringToHashBucketFastImpl:()=>bt,subImpl:()=>xt,tileImpl:()=>_t,topKImpl:()=>At,transposeImpl:()=>W,uniqueImpl:()=>Mt});var r=n(86748);
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function i(t,e){Array.isArray(t)||(t=[t]),t.forEach((t=>{null!=t&&r.util.assert("complex64"!==t.dtype,(()=>`${e} does not support complex64 tensors in the CPU backend.`))}))}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}r.Abs;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function a(t){return(e,n,i,o,a)=>{const s=r.backend_util.assertAndGetBroadcastShape(e,n),u=s.length,l=r.util.computeStrides(s),c=r.util.sizeFromShape(s),h=r.util.getTypedArrayFromDType(a,c),d=e.length,f=n.length,p=r.util.computeStrides(e),m=r.util.computeStrides(n),g=r.backend_util.getBroadcastDims(e,s),v=r.backend_util.getBroadcastDims(n,s);if(g.length+v.length===0)for(let e=0;e<h.length;++e)h[e]=t(i[e%i.length],o[e%o.length]);else for(let e=0;e<h.length;++e){const n=r.util.indexToLoc(e,u,l),a=n.slice(-d);g.forEach((t=>a[t]=0));const s=r.util.locToIndex(a,d,p),c=n.slice(-f);v.forEach((t=>c[t]=0));const y=r.util.locToIndex(c,f,m);h[e]=t(i[s],o[y])}return[h,s]}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){const{inputs:e,backend:n}=t,{real:r,imag:i}=e,o=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",o),imag:n.makeTensorInfo(i.shape,"float32",a)},s}r.Complex;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e,n="float32"){if("complex64"===n){return s({inputs:{real:u(t,e,"float32"),imag:u(t,e,"float32")},backend:t})}const i=r.util.makeZerosTypedArray(r.util.sizeFromShape(e),n);return t.makeTensorInfo(e,n,i)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function l(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}r.Identity;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.data.get(r.dataId).complexTensorInfos.real,o=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,o)}r.Real;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function h(t,e,n,i){if("int32"===i){return[e,"int32",Int32Array.from(t)]}if("bool"===i){const i=r.util.toTypedArray([0],n),[o,s]=a(((t,e)=>t!==e?1:0))(e,[],t,i,"bool");return[s,"bool",o]}throw new Error(`Error in Cast: failed to cast ${n} to ${i}`)}function d(t){const{inputs:e,backend:n,attrs:i}=t,{x:o}=e,{dtype:a}=i;if("complex64"===a){if("complex64"===o.dtype)return l({inputs:{x:o},backend:n});const t=u(n,o.shape,o.dtype),e=d({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),r=s({inputs:{real:e,imag:t},backend:n});return n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(e),r}if("complex64"===o.dtype){const t=c({inputs:{input:o},backend:n}),e=d({inputs:{x:t},backend:n,attrs:{dtype:a}});return n.disposeIntermediateTensorInfo(t),e}if(!r.util.hasEncodingLoss(o.dtype,a)){const t=l({inputs:{x:o},backend:n});return{dataId:t.dataId,shape:t.shape,dtype:a}}const f=n.data.get(o.dataId).values,[p,m,g]=h(f,o.shape,o.dtype,a);return n.makeTensorInfo(p,m,g)}r.Cast;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function f(t,e,n,o){return null==n?({inputs:n,backend:a})=>{const{a:s,b:u}=n,l=a;i([s,u],t);const c=l.data.get(s.dataId).values,h=l.data.get(u.dataId).values,d="string"===s.dtype?r.backend_util.fromUint8ToStringArray(c):c,f="string"===s.dtype?r.backend_util.fromUint8ToStringArray(h):h,p=o||s.dtype,[m,g]=e(s.shape,u.shape,d,f,p);return l.makeTensorInfo(g,p,m)}:({inputs:t,backend:r})=>{const{a:i,b:a}=t,u=r;if("complex64"===i.dtype||"complex64"===a.dtype){const t=d({inputs:{x:i},backend:u,attrs:{dtype:"complex64"}}),e=u.data.get(t.dataId),r=e.complexTensorInfos.real,o=e.complexTensorInfos.imag,l=u.data.get(r.dataId).values,c=u.data.get(o.dataId).values,h=d({inputs:{x:a},backend:u,attrs:{dtype:"complex64"}}),f=u.data.get(h.dataId),p=f.complexTensorInfos.real,m=f.complexTensorInfos.imag,g=u.data.get(p.dataId).values,v=u.data.get(m.dataId).values,[y,b,x]=n(i.shape,a.shape,l,c,g,v),w=u.makeTensorInfo(x,"float32",y),_=u.makeTensorInfo(x,"float32",b),S=s({inputs:{real:w,imag:_},backend:u});return u.disposeIntermediateTensorInfo(t),u.disposeIntermediateTensorInfo(h),u.disposeIntermediateTensorInfo(w),u.disposeIntermediateTensorInfo(_),S}{const t=u.data.get(i.dataId).values,n=u.data.get(a.dataId).values,r=o||i.dtype,[s,l]=e(i.shape,a.shape,t,n,r);return u.makeTensorInfo(l,r,s)}}}function p(t){return(e,n,i,o,a,s)=>{const u=r.backend_util.assertAndGetBroadcastShape(e,n),l=r.util.sizeFromShape(u),c=u.length,h=r.util.computeStrides(u),d=r.util.getTypedArrayFromDType("float32",l),f=r.util.getTypedArrayFromDType("float32",l),p=r.backend_util.getBroadcastDims(e,u),m=r.backend_util.getBroadcastDims(n,u),g=r.backend_util.mergeRealAndImagArrays(i,o),v=r.backend_util.mergeRealAndImagArrays(a,s),y=e.length,b=r.util.computeStrides(e),x=n.length,w=r.util.computeStrides(n);if(p.length+m.length===0)for(let e=0;e<d.length;e++){const n=e%g.length,r=e%v.length,i=t(g[2*n],g[2*n+1],v[2*r],v[2*r+1]);d[e]=i.real,f[e]=i.imag}else for(let e=0;e<d.length;e++){const n=r.util.indexToLoc(e,c,h),i=n.slice(-y);p.forEach((t=>i[t]=0));const o=r.util.locToIndex(i,y,b),a=n.slice(-x);m.forEach((t=>a[t]=0));const s=r.util.locToIndex(a,x,w),u=t(g[2*o],g[2*o+1],v[2*s],v[2*s+1]);d[e]=u.real,f[e]=u.imag}return[d,f,u]}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const m=a(((t,e)=>t+e)),g=p(((t,e,n,r)=>({real:t+n,imag:e+r})));f(r.Add,m,g),r.Add;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function v(t,e,n,i,o){const a=r.util.sizeFromShape(i),s=r.util.makeZerosTypedArray(o,n);for(let n=0;n<t.length;n++){const r=t[n];if(r<0)throw new Error("Input x must be non-negative!");r>=o||(s[r]+=a>0?e[n]:1)}return s}function y(t,e,n,i=!1){const o=t.shape[0],a=t.shape[1],s=(0,r.buffer)([o,n],e.dtype);for(let r=0;r<o;r++)for(let o=0;o<a;o++){const a=t.get(r,o);if(a<0)throw new Error("Input x must be non-negative!");a>=n||(i?s.set(1,r,a):e.size>0?s.set(s.get(r,a)+e.get(r,o),r,a):s.set(s.get(r,a)+1,r,a))}return s}
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const b=a(((t,e)=>t&e));f(r.BitwiseAnd,b),r.BitwiseAnd;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function x(t){return(e,n,i)=>{const o=r.util.getArrayFromDType(n,e.length);for(let n=0;n<e.length;++n)o[n]=t(e[n],i);return o}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function w(t,e,n){return _(t,x(e),n)}function _(t,e,n){return({inputs:o,attrs:a,backend:s})=>{const{x:u}=o;i(u,t);const l=s,c=l.data.get(u.dataId).values;let h;if("string"===u.dtype){if(!Array.isArray(c))throw new Error("String tensor's value was not an instance of Array");h=r.backend_util.fromUint8ToStringArray(c)}else h=c;const d=n||u.dtype,f=e(h,d,a);return l.makeTensorInfo(u.shape,d,f)}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const S=x((t=>Math.ceil(t)));_(r.Ceil,S),r.Ceil;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function E(t,e,n,i){const o=r.util.getArrayFromDType(n,r.util.sizeFromShape(e));if(i&&"string"!==n){let e=0;t.forEach((t=>{const n=r.util.sizeFromShape(t.shape);o.set(t.vals,e),e+=n}))}else{let i=0;t.forEach((t=>{const a="string"===n?r.backend_util.fromUint8ToStringArray(t.vals):t.vals;let s=0;for(let n=0;n<t.shape[0];++n){const r=n*e[1]+i;for(let e=0;e<t.shape[1];++e)o[r+e]=a[s++]}i+=t.shape[1]}))}return o}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const A=a(((t,e)=>t===e?1:0)),M=(f(r.Equal,A,null,"bool"),r.Equal,x((t=>Math.exp(t)))),C=(_(r.Exp,M,"float32"),r.Exp,x((t=>Math.expm1(t)))),T=(_(r.Expm1,C),r.Expm1,x((t=>Math.floor(t)))),k=(_(r.Floor,T),r.Floor,a(((t,e)=>Math.floor(t/e))));f(r.FloorDiv,k,null,"int32"),r.FloorDiv;
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function I(t,e,n,i,o,a,s,u,l){const c=(0,r.buffer)([i,a],n);for(let n=0;n<i;n++){const r=[];let i=0;for(let e=0;e<o;e++){const a=t[n*o+e];i+=a*s[e],r.push(a)}if(i<0||i>=l/a)throw new Error(`Invalid indices: ${r} does not index into ${u}`);for(let t=0;t<a;t++)c.values[n*a+t]=e.get(...e.indexToLoc(i*a+t))}return c}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function N(t,e,n){const i=(0,r.buffer)(n,t.dtype);for(let n=0;n<i.size;++n){const r=i.indexToLoc(n).slice(),o=r[0],a=r[2],s=e.locToIndex([o,a]);r[2]=e.values[s];const u=t.locToIndex(r);0<=u&&u<t.values.length&&(i.values[n]=t.values[u])}return i}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const P=a(((t,e)=>t>e?1:0)),O=(f(r.Greater,P,null,"bool"),r.Greater,a(((t,e)=>t>=e?1:0))),L=(f(r.GreaterEqual,O,null,"bool"),r.GreaterEqual,a(((t,e)=>t<e?1:0))),R=(f(r.Less,L,null,"bool"),r.Less,a(((t,e)=>t<=e?1:0)));f(r.LessEqual,R,null,"bool"),r.LessEqual;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function D(t,e,n){const i=(e-t)/(n-1),o=r.util.makeZerosTypedArray(n,"float32");o[0]=t;for(let t=1;t<o.length;t++)o[t]=o[t-1]+i;return o}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const z=x((t=>Math.log(t)));_(r.Log,z),r.Log;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function F(t,e,n,i){const o=r.util.getTypedArrayFromDType(i,r.util.sizeFromShape(n));for(let n=0;n<o.length;++n){const r=n*e;let i=t[r];for(let n=0;n<e;++n){const e=t[r+n];(Number.isNaN(e)||e>i)&&(i=e)}o[n]=i}return o}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const B=a(((t,e)=>Math.max(t,e))),U=(f(r.Maximum,B),r.Maximum,a(((t,e)=>Math.min(t,e)))),j=(f(r.Minimum,U),r.Minimum,a(((t,e)=>t*e))),V=p(((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})));f(r.Multiply,j,V),r.Multiply;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function H(t,e,n){const i=r.util.createScalarValue(-1,n);return j([],e,i,t,n)}r.Neg;const G=a(((t,e)=>t!==e?1:0));f(r.NotEqual,G,null,"bool"),r.NotEqual;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function W(t,e,n,i,o){const a=e.length,s=r.util.sizeFromShape(e),u=r.util.computeStrides(e),l=r.util.computeStrides(o),c=r.util.getTypedArrayFromDType(n,r.util.sizeFromShape(o));for(let e=0;e<s;++e){const n=r.util.indexToLoc(e,a,u),o=new Array(n.length);for(let t=0;t<o.length;t++)o[t]=n[i[t]];c[r.util.locToIndex(o,a,l)]=t[e]}return c}r.Transpose;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function X(t,e,n,i){const[o,a]=r.backend_util.computeOutAndReduceShapes(t,i),s=(0,r.upcastType)(e,"int32"),u=r.util.makeZerosTypedArray(r.util.sizeFromShape(o),s),l=r.util.sizeFromShape(a);for(let t=0;t<u.length;++t){const e=t*l;let r=1;for(let t=0;t<l;++t)r*=n[e+t];u[t]=r}return{outVals:u,outShape:o,outDtype:s}}r.Prod;function Y(t,e,n,r){const i=[];let o=0;const a=e.length-1+n.length,s=new Array(a).fill(null).map((()=>[0]));!function(t,e){for(let n=0;n<t.length;++n){const r=t[n],i=n===t.length-1?e:t[n+1].length;if(0===r.length)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>i)throw new Error("Ragged splits must not point past values");for(let t=1;t<r.length;++t)if(r[t-1]>r[t])throw new Error("Ragged splits must be sorted in ascending order")}}(n,r);let u=1;for(let t=0;t<e.length-1;++t){u*=e[t];const n=e[t+1];for(let e=1;e<u+1;++e)s[t].push(e*n)}for(let r=0;r<t.length;++r){let a=t[r],u=t[r]+1;for(let t=0;t<n.length;++t){const r=n[t],i=t+e.length-1;if(i>=0){const t=s[i],e=t[t.length-1]-r[a];for(let t=a;t<u;++t)s[i].push(r[t+1]+e)}a=r[a],u=r[u]}u!==a&&(i.push([a,u]),o+=u-a)}return{outSplits:s,valueSlices:i,numValues:o}}function q(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function $(t,e,n,i,o){const a=e.slice();a[0]=o;const s=r.util.getArrayFromDType(n,r.util.sizeFromShape(a)),u=t.length;return function(t,e,n,r,i,o){const a=q(e,2)[1],s=q(o,2)[1];let u=0;for(const e of n)for(let n=e[0];n<e[1];++n){for(let e=0;e<r;++e)i[u*s+e]=t[n*a+e];++u}}(t,e,i,0===u?0:u/e[0],s,a),[s,a]}function K(t,e,n,i,o,a,s,u){if(0===t.length)throw new Error("paramsNestedSplits must be non empty");if(0===e[0].length)throw new Error("Split tensors must not be scalars");if(
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t,e,n){t.forEach(((t,i)=>{if(t<0||t>=n){const o=r.util.indexToLoc(i,e.length,r.util.computeStrides(e)).join(",");throw new Error(`indices[${o}] = ${t} is not in [0, ${n})`)}}))}(a,s,e[0][0]-1),0===i.length)throw new Error("params.rank must be nonzero");const l=i[0],{outSplits:c,valueSlices:h,numValues:d}=Y(a,s,t,l),f=function(t){const e=[];for(let n=0;n<t.length;++n){const i=t[n].length,o=r.util.getArrayFromDType("int32",i);e.push(o),t[n].forEach(((t,e)=>o[e]=t))}return e}(c),p=$(n,i,o,h,d);return[f,p[0],p[1]]}
/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Z=2147483647;function Q(t,e,n,i,o,a,s){if(e.length>1)throw new Error("starts must be a scalar or vector");if(o.length>1)throw new Error("limits must be a scalar or vector");if(s.length>1)throw new Error("deltas must be a scalar or vector");const u=0===e.length,l=0===o.length,c=0===s.length,h=[];u||h.push(e[0]),l||h.push(o[0]),c||h.push(s[0]);for(let t=1;t<h.length;++t)if(h[t]!==h[t-1])throw new Error("starts, limits, and deltas must have the same shape");const d=0===h.length?1:h[0],f=r.util.getArrayFromDType("int32",d+1);f[0]=0;for(let e=0;e<d;++e){const n=u?t[0]:t[e],r=l?i[0]:i[e],o=c?a[0]:a[e];if(0===o)throw new Error("Requires delta != 0");let s;if(o>0&&r<n||o<0&&r>n)s=0;else if(s=Math.ceil(Math.abs((r-n)/o)),s>Z)throw new Error(`Requires ((limit - start) / delta) <= ${Z}`);f[e+1]=f[e]+s}const p=f[d],m=r.util.getArrayFromDType(n,p);let g=0;for(let e=0;e<d;++e){const n=f[e+1]-f[e];let r=u?t[0]:t[e];const i=c?a[0]:a[e];for(let t=0;t<n;++t)m[g++]=r,r+=i}return[f,m]}
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
var J=r.backend_util.RowPartitionType;class tt{constructor(t,e,n,i,o,a,s,u,l,c){this.shape=t,this.shapeShape=e,this.values=n,this.valuesShape=i,this.valuesDType=o,this.defaultValue=a,this.defaultValueShape=s,this.rowPartitionValues=u,this.rowPartitionValuesShapes=l,this.rowPartitionTypes=r.backend_util.getRowPartitionTypesHelper(c),this.raggedRank=r.backend_util.getRaggedRank(this.rowPartitionTypes)}getRowPartitionTypeByDimension(t){return this.rowPartitionTypes[0]===J.FIRST_DIM_SIZE?this.rowPartitionTypes[t+1]:this.rowPartitionTypes[t]}getRowPartitionTensor(t){return this.rowPartitionTypes[0]===J.FIRST_DIM_SIZE?this.rowPartitionValues[t+1]:this.rowPartitionValues[t]}getMaxWidth(t){const e=this.getRowPartitionTensor(t-1);switch(this.getRowPartitionTypeByDimension(t-1)){case J.VALUE_ROWIDS:return tt.getMaxWidthValueRowID(e);case J.ROW_SPLITS:return tt.getMaxWidthRowSplit(e);default:throw new Error(`Cannot handle partition type ${J[this.getRowPartitionTypeByDimension(t-1)]}`)}}static getMaxWidthRowSplit(t){const e=t.length;if(0===e||1===e)return 0;let n=0;for(let r=0;r<e-1;++r){const e=t[r+1]-t[r];e>n&&(n=e)}return n}static getMaxWidthValueRowID(t){const e=t.length;if(0===e)return 0;let n=0,r=t[0],i=0;for(let o=1;o<e;++o){const e=t[o];e!==r&&(r=e,i=Math.max(o-n,i),n=o)}return Math.max(e-n,i)}tensorShapeFromTensor(t,e,n=!0){if(0===e.length){if(-1===t[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return nt(t,n)}calculateOutputSize(t){const e=this.valuesShape,n=this.defaultValueShape;r.backend_util.validateDefaultValueShape(n,e);const i=this.tensorShapeFromTensor(this.shape,this.shapeShape),o=r.backend_util.combineRaggedTensorToTensorShapes(this.raggedRank,i,e);o[0]<0&&(o[0]=t);for(let t=1;t<=this.raggedRank;++t)o[t]<0&&(o[t]=this.getMaxWidth(t));return o}calculateFirstParentOutputIndex(t,e,n){const i=Math.min(t,n),o=[];let a=0;for(let t=0;t<i;++t,a+=e)o.push(a);for(let e=i;e<t;++e)o.push(-1);return r.util.assert(o.length===t,(()=>"Final length of result must be equal to firstDimension.")),o}calculateOutputIndexRowSplit(t,e,n,r){const i=t.length,o=[];for(let a=0;a<i-1;++a){const i=t[a+1]-t[a];let s=Math.min(r,i),u=e[a];-1===u&&(s=0);for(let t=0;t<s;++t)o.push(u),u+=n;for(let t=0;t<i-s;++t)o.push(-1)}if(i>0&&o.length!==t[i-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(t,e,n,r){const i=t.length,o=[];if(0===i)return[];let a=0,s=t[0];if(s>=e.length)throw new Error(`Got currentValueRowId=${s}, which is not less than ${e.length}`);let u=e[s];o.push(u);for(let l=1;l<i;++l){const i=t[l];if(i===s)u>=0&&(++a,a<r?u+=n:u=-1);else{if(a=0,s=i,i>=e.length)throw new Error(`Got nextValueRowId=${i} which is not less than ${e.length}`);u=e[i]}o.push(u)}if(o.length!==t.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(t,e,n,r){const i=this.getRowPartitionTensor(t),o=this.getRowPartitionTypeByDimension(t);switch(o){case J.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,e,n,r);case J.ROW_SPLITS:if(i.length-1>e.length)throw new Error(`Row partition size is greater than output size: ${i.length-1} > ${e.length}`);return this.calculateOutputIndexRowSplit(i,e,n,r);default:throw new Error(`Unsupported partition type: ${J[o]}`)}}getFirstDimensionSize(){const t=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");const e=this.rowPartitionTypes[0];switch(e){case J.FIRST_DIM_SIZE:return t[0];case J.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case J.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${J[e]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const t=this.getFirstDimensionSize(),e=this.calculateOutputSize(t),n=new Array(this.raggedRank+1);n[n.length-1]=1;for(let t=n.length-2;t>=0;--t)n[t]=n[t+1]*e[t+1];const i=nt(e,!1),o=r.util.getArrayFromDType(this.valuesDType,r.util.sizeFromShape(i));if(n[0]*e[0]>0){let r=this.calculateFirstParentOutputIndex(t,n[0],e[0]);for(let t=1;t<=this.raggedRank;++t){r=this.calculateOutputIndex(t-1,r,n[t],e[t])}this.setOutput(this.raggedRank,r,o,i)}return[i,o]}setOutput(t,e,n,i){if(0===n.length)return;const o=this.values,a=n;let s=i.slice();s=s.slice(t+1);const u=r.util.sizeFromShape(s),l=e.length;let c=this.defaultValue;if(c.length!==u&&1!==c.length){const t=this.defaultValueShape;(0,r.tidy)((()=>{const e=(0,r.reshape)(c,t),n=(0,r.broadcastTo)(e,s);c=n.dataSync()}))}let h=0,d=0,f=0;for(let t=0;t<=l;++t){let r=t<l?e[t]:-1;if(r!==f){if(d<f){const t=o.subarray(h*u);et(a.subarray(d*u),t,(f-d)*u)}if(t>=l){const t=n.length;r=Math.floor(t/u)}if(r>f)if(1===this.defaultValue.length)a.subarray(f*u,r*u).fill(this.defaultValue[0]),f=r;else for(;r>f;){et(a.slice(f*u),c,u),++f}r<0?(h=t+1,d=f):(h=t,d=f,f=d+1)}else++f}}}function et(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function nt(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function rt(t,e,n,r,i,o,a,s,u,l){return new tt(t,e,n,r,i,o,a,s,u,l).compute()}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function it(t,e,n,i){if(t===e||t<e&&n<0||e<t&&n>1)return r.util.makeZerosTypedArray(0,i);const o=Math.abs(Math.ceil((e-t)/n)),a=r.util.makeZerosTypedArray(o,i);e<t&&1===n&&(n=-1),a[0]=t;for(let t=1;t<a.length;t++)a[t]=a[t-1]+n;return a}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const ot=x((t=>1/Math.sqrt(t)));_(r.Rsqrt,ot),r.Rsqrt;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function at(t,e,n,i,o,a,s,u,l,c){const h=[i/o,o],d=t.values,f=e.values;if(0===i)return(0,r.buffer)(n,e.dtype);const p=l instanceof r.TensorBuffer?l:(0,r.buffer)(h,e.dtype);"string"==typeof l||"number"==typeof l?p.values.fill(l):"boolean"==typeof l&&p.values.fill(+l);for(let t=0;t<a;t++){const r=[];let a=0;for(let e=0;e<s;e++){const n=d[t*s+e];r.push(n),a+=n*u[e]}if(a<0||a>=i/o)throw new Error(`Invalid indices: ${r} does not index into ${n}`);for(let n=0;n<o;n++)c?p.values[a*o+n]+=f[t*o+n]:p.values[a*o+n]=0===e.rank?f[0]:f[t*o+n]}return p}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const st=x((t=>1/(1+Math.exp(-t))));w(r.Sigmoid,(t=>1/(1+Math.exp(-t)))),r.Sigmoid;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ut(t,e,n,i,o){const a=r.slice_util.isSliceContinous(i,e,n),s=r.util.sizeFromShape(n),u=r.util.computeStrides(i);if(a){const n=r.slice_util.computeFlatOffset(e,u);return"string"===o?t.slice(n,n+s):t.subarray(n,n+s)}const l="string"===o?r.backend_util.fromUint8ToStringArray(t):t,c=(0,r.buffer)(i,o,l),h=(0,r.buffer)(n,o);for(let t=0;t<h.size;++t){const n=h.indexToLoc(t),r=n.map(((t,n)=>t+e[n]));h.set(c.get(...r),...n)}return"string"===o?r.backend_util.fromStringArrayToUint8(h.values):h.values}r.Slice;
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function lt(t,e,n,i,o,a,s){const u=e[0],l=a[0],c=new Array(l),h=new Array(u),d=e[1];if(0===l){if(0!==u)throw new Error(r.backend_util.getSparseFillEmptyRowsIndicesDenseShapeMismatch(u));return[r.util.getArrayFromDType(n,0),[0,d],r.util.getArrayFromDType(o,0),c,h]}let f=!0,p=0;const m=new Array(l).fill(0);for(let e=0;e<u;++e){const n=t[e*d];if(n<0)throw new Error(r.backend_util.getSparseFillEmptyRowsNegativeIndexErrorMessage(e,n));if(n>=l)throw new Error(r.backend_util.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(e,n,l));++m[n],f=f&&n>=p,p=n}let g=!0;for(let t=0;t<l;++t){const e=0===m[t];c[t]=e,g=g&&!e,m[t]=Math.max(m[t],1),t>0&&(m[t]+=m[t-1])}if(g&&f){const e=t,n=i;for(let t=0;t<u;++t)h[t]=t;return[e,[u,d],n,c,h]}{const e=m[l-1],a=r.util.getArrayFromDType(n,e*d),f=r.util.getArrayFromDType(o,e),p=new Array(l).fill(0);for(let e=0;e<u;++e){const n=t[e*d],r=p[n],o=(0===n?0:m[n-1])+r;p[n]++;for(let n=0;n<d;++n)a[o*d+n]=t[e*d+n];f[o]=i[e],h[e]=o}for(let t=0;t<l;++t){if(0===p[t]){const e=0===t?0:m[t-1];a[e*d+0]=t;for(let t=1;t<d;++t)a[e*d+t]=0;f[e]=s}}return[a,[e,d],f,c,h]}}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ct(t,e,n,i,o){const a=r.util.sizeFromShape(i),s=e[0],u=o.length,l=[];let c=1,h=-1;for(let t=0;t<u;++t){const e=o[t];if(-1===e){if(-1!==h)throw new Error(r.backend_util.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(h,t));h=t,l.push(1)}else{if(e<0)throw new Error(r.backend_util.getSparseReshapeNegativeOutputDimErrorMessage(t,e));c*=e,l.push(e)}}if(-1!==h){if(c<=0)throw new Error(r.backend_util.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());const t=Math.trunc(a/c);if(c*t!==a)throw new Error(r.backend_util.getSparseReshapeInputOutputMultipleErrorMessage(i,l));l[h]=t}if(r.util.sizeFromShape(l)!==a)throw new Error(r.backend_util.getSparseReshapeInputOutputMismatchErrorMessage(i,l));const d=i.length,f=[];if(d>0){f[d-1]=1;for(let t=d-2;t>=0;--t)f[t]=f[t+1]*i[t+1]}const p=[];if(u>0){p[u-1]=1;for(let t=u-2;t>=0;--t)p[t]=p[t+1]*l[t+1]}const m=r.util.getArrayFromDType(n,s*u);for(let e=0;e<s;++e){let n=0;for(let r=0;r<d;++r)n+=t[e*d+r]*f[r];for(let t=0;t<u;++t)m[e*u+t]=Math.trunc(n/p[t]),n%=p[t]}return[m,[s,u],l]}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ht(t,e,n,i,o,a=!1,s=0){const u=i.length,l=[e[0],t.length/e[0]],c=l[1],h=u>0?o[u-1]+1:0;if(h<0)throw new Error(r.backend_util.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());const d=e.slice();d[0]=h;const f=d.reduce(((t,e)=>t*e),1),p=r.util.getArrayFromDType(n,f);if(0===u)return h>0&&p.fill(s),[p,d];if(h<=0)throw new Error(r.backend_util.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let m=0,g=1,v=0,y=o[m];for(;;){let e=0;if(g<u){if(e=o[g],y===e){++g;continue}if(y>=e)throw new Error(r.backend_util.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(y<0||y>=h)throw new Error(r.backend_util.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(y,h));y>v&&p.fill(s,v*c,y*c);for(let e=m;e<g;++e){const n=i[e];if(n<0||n>=l[0])throw new Error(r.backend_util.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(e,i[e],l[0]));for(let e=0;e<c;e++)p[y*c+e]+=t[n*c+e]}if(a)for(let t=0;t<c;t++)p[y*c+t]/=g-m;if(m=g,++g,v=y+1,y=e,g>u)break}return v<h&&p.fill(s,v*c,h*c),[p,d]}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const dt=x((t=>Math.sqrt(t))),ft=(w(r.Sqrt,(t=>Math.sqrt(t))),r.Sqrt,x(((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:i}=e;return t.replace(new RegExp(n,r?"g":""),i)})));_(r.StaticRegexReplace,ft),r.StaticRegexReplace;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function pt(t,e,n,i){const o=(0,r.buffer)(t,e.dtype);for(let t=0;t<o.size;t++){const r=o.indexToLoc(t),a=new Array(r.length);for(let t=0;t<a.length;t++)a[t]=r[t]*n[t]+i[t];o.set(e.get(...a),...r)}return o}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class mt{constructor(t,e,n,i,o,a){this.separator=r.util.encodeString(t),this.nGramWidths=e,this.leftPad=r.util.encodeString(n),this.rightPad=r.util.encodeString(i),this.padWidth=o,this.preserveShort=a}getPadWidth(t){return Math.min(this.padWidth<0?t-1:this.padWidth,t-1)}getNumNGrams(t,e){const n=this.getPadWidth(e);return Math.max(0,t+2*n-e+1)}createNGrams(t,e,n,r,i,o){for(let a=0;a<i;++a){const s=this.getPadWidth(o),u=Math.max(0,s-a),l=Math.max(0,s-(i-(a+1))),c=o-(u+l),h=e+(u>0?0:a-s);let d=0;d+=u*this.leftPad.length;for(let e=0;e<c;++e)d+=t[h+e].length;d+=l*this.rightPad.length;d+=(u+l+c-1)*this.separator.length,n[r+a]=new Uint8Array(d);const f=n[r+a];let p=0;const m=t=>t.forEach((t=>f[p++]=t));for(let t=0;t<u;++t)m(this.leftPad),m(this.separator);for(let e=0;e<c-1;++e)m(t[h+e]),m(this.separator);if(c>0){m(t[h+c-1]);for(let t=0;t<l;++t)m(this.separator),m(this.rightPad)}else{for(let t=0;t<l-1;++t)m(this.rightPad),m(this.separator);m(this.rightPad)}}}compute(t,e){const n=t.length,i=e.length;if(i>0){let t=e[0];if(0!==t)throw new Error(`First split value must be 0, got ${t}`);for(let r=1;r<i;++r){let i=e[r]>=t;if(i=i&&e[r]<=n,!i)throw new Error(`Invalid split value ${e[r]}, must be in [${t}, ${n}]`);t=e[r]}if(t!==n)throw new Error(`Last split value must be data size. Expected ${n}, got ${t}`)}const o=i-1,a=r.util.getArrayFromDType("int32",i);if(0===n||0===i){const t=new Array(n);for(let t=0;t<=o;++t)a[t]=0;return[t,a]}a[0]=0;for(let t=1;t<=o;++t){const n=e[t]-e[t-1];let r=0;this.nGramWidths.forEach((t=>{r+=this.getNumNGrams(n,t)})),this.preserveShort&&n>0&&0===r&&(r=1),a[t]=a[t-1]+r}const s=new Array(a[o]);for(let n=0;n<o;++n){const r=e[n];let i=a[n];if(this.nGramWidths.forEach((o=>{const a=e[n+1]-e[n],u=this.getNumNGrams(a,o);this.createNGrams(t,r,s,i,u,o),i+=u})),this.preserveShort&&i===a[n]){const o=e[n+1]-e[n];if(0===o)continue;const a=o+2*this.padWidth,u=1;this.createNGrams(t,r,s,i,u,a)}}return[s,a]}}function gt(t,e,n,r,i,o,a,s){return new mt(n,r,i,o,a,s).compute(t,e)}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function vt(t,e,n,r){if(!t.length)return;if(0===e.length){for(let e=0;e<t.length;++e)r.push(t.subarray(e,e+1));return}if(1===e.length){const i=e[0];let o=t.indexOf(i);for(;-1!==o;){const e=t.subarray(0,o);n&&0===e.length||r.push(e),o=(t=t.subarray(o+1)).indexOf(i)}return void(n&&0===t.length||r.push(t))}let i=0;for(let o=0;o<t.length+1;o++)if(o===t.length||-1!==e.indexOf(t[o])){const e=t.subarray(i,o);n&&0===e.length||r.push(e),i=o+1}}function yt(t,e,n){const i=t.length,o=[];let a=0,s=0;const u=new Array(i);for(let r=0;r<i;++r){const i=o.length;vt(t[r],e,n,o);const l=o.length-i;u[r]=l,a+=l,s=Math.max(s,l)}const l=r.util.getArrayFromDType("int32",2*a),c=new Array(a),h=[i,s];let d=0;for(let t=0;t<i;++t)for(let e=0;e<u[t];++e)l[2*d]=t,l[2*d+1]=e,c[d]=o[d],++d;return[l,c,h]}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function bt(t,e){const n=r.util.getArrayFromDType("int32",t.length);for(let i=0;i<t.length;++i)n[i]=r.util.fingerPrint64(t[i]).modulo(e).getLowBitsUnsigned();return n}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const xt=a(((t,e)=>t-e)),wt=p(((t,e,n,r)=>({real:t-n,imag:e-r})));f(r.Sub,xt,wt),r.Sub;
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function _t(t,e){const n=new Array(t.rank);for(let r=0;r<n.length;r++)n[r]=t.shape[r]*e[r];const i=(0,r.buffer)(n,t.dtype);for(let e=0;e<i.values.length;++e){const n=i.indexToLoc(e),r=new Array(t.rank);for(let e=0;e<r.length;e++)r[e]=n[e]%t.shape[e];const o=t.locToIndex(r);i.values[e]=t.values[o]}return i}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const St=(t,e)=>{const n=e.value-t.value;return 0===n?t.index-e.index:n};function Et(t,e,n=0,i=t.length-1){for(;i>n;){if(i-n>600){const r=i-n+1,o=e-n+1,a=Math.log(r),s=.5*Math.exp(2*a/3),u=.5*Math.sqrt(a*s*(r-s)/r)*Math.sign(o-r/2);Et(t,e,Math.max(n,Math.floor(e-o*s/r+u)),Math.min(i,Math.floor(e+(r-o)*s/r+u)))}const o=t[e];let a=n,s=i;for(r.util.swap(t,n,e),St(t[i],o)>0&&r.util.swap(t,n,i);a<s;){for(r.util.swap(t,a,s),a++,s--;St(t[a],o)<0;)a+=1;for(;St(t[s],o)>0;)s-=1}0===St(t[n],o)?r.util.swap(t,n,s):(s+=1,r.util.swap(t,s,i)),s<=e&&(n=s+1),e<=s&&(i=s-1)}}function At(t,e,n,i,o){const a=e[e.length-1],[s,u]=[t.length/a,a],l=r.util.getTypedArrayFromDType(n,s*i),c=r.util.getTypedArrayFromDType("int32",s*i);for(let e=0;e<s;e++){const n=e*u,r=t.subarray(n,n+u);let a=new Array(r.length);r.forEach(((t,e)=>a[e]={value:t,index:e})),i<a.length&&(Et(a,i),a=a.slice(0,i)),o&&a.sort(St);const s=e*i,h=l.subarray(s,s+i),d=c.subarray(s,s+i);for(let t=0;t<i;t++)h[t]=a[t].value,d[t]=a[t].index}const h=e.slice();return h[h.length-1]=i,[(0,r.buffer)(h,n,l),(0,r.buffer)(h,"int32",c)]}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Mt(t,e,n,i){const o=r.util.parseAxisParam(e,n)[0],a=[1,n[0],1];for(let t=0;t<o;t++)a[0]*=n[t];a[1]=n[o];for(let t=o+1;t<n.length;t++)a[2]*=n[t];const s=new Map,u=new Int32Array(n[o]),l=new r.TensorBuffer(a,i,t),c=[],h=1===a[0]&&1===a[2];for(let e=0;e<n[o];e++){let n;if(h)n=t[e].toString();else{const t=[];for(let n=0;n<a[0];n++)for(let r=0;r<a[2];r++)t.push(l.get(n,e,r));n=t.join(",")}const r=s.get(n);if(null!=r)u[e]=r;else{const t=s.size;s.set(n,t),u[e]=t,c.push(e)}}const d=a.slice();d[1]=s.size;const f=new r.TensorBuffer(d,i);c.forEach(((t,e)=>{for(let n=0;n<a[0];n++)for(let r=0;r<a[2];r++)f.set(l.get(n,t,r),n,e,r)}));const p=n.slice();return p[o]=d[1],{outputValues:f.values,outputShape:p,indices:u}}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */,7511:(t,e,n)=>{"use strict";n.d(e,{l:()=>U,w:()=>r});var r={};n.r(r),n.d(r,{GPUBytesPerElement:()=>R,MatMulProgramType:()=>F,assertNotComplex:()=>z,computeDispatch:()=>I,computeWorkPerThreadForConv2d:()=>O,computeWorkgroupInfoForMatMul:()=>N,computeWorkgroupSizeForConv2d:()=>P,flatDispatchLayout:()=>L,isWebGPUSupported:()=>D,tilesFitEvenlyIntoShape:()=>k});var i=n(86748);
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const o=(0,i.env)();o.registerFlag("WEBGPU_DEFERRED_SUBMIT_BATCH_SIZE",(()=>15)),o.registerFlag("WEBGPU_CPU_FORWARD",(()=>!0)),o.registerFlag("WEBGPU_MATMUL_PROGRAM_TYPE",(()=>-1)),o.registerFlag("WEBGPU_USE_NAIVE_CONV2D_TRANSPOSE",(()=>!0)),o.registerFlag("WEBGPU_USE_LOW_POWER_GPU",(()=>!1)),o.registerFlag("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD",(()=>1e3)),o.registerFlag("WEBGPU_USE_PROFILE_TOOL",(()=>!1)),o.registerFlag("WEBGPU_IMPORT_EXTERNAL_TEXTURE",(()=>!0)),o.registerFlag("WEBGPU_USE_NAIVE_CONV2D_DEBUG",(()=>!1)),o.registerFlag("WEBGPU_THRESHOLD_TO_INCREASE_WORKGROUPS_FOR_MATMUL",(()=>-1)),o.registerFlag("WEBGPU_CONV_SEPARATE_IM2COL_SHADER",(()=>!1)),o.registerFlag("WEBGPU_PRINT_SHADER",(()=>"")),o.registerFlag("WEBGPU_ENGINE_COMPILE_ONLY",(()=>!1));
/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class a{constructor(t){t&&(this.vendor=t.vendor,this.architecture=t.architecture,this.intelGPUGeneration=this.getIntelGPUGeneration())}getIntelGPUGeneration(){if(this.isIntel()){if(this.architecture.startsWith("gen"))return Number(this.architecture.match(/\d+/));if(this.architecture.startsWith("xe"))return 12}return 0}isIntel(){return"intel"===this.vendor}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class s{constructor(t){this.device=t,this.numUsedBuffers=0,this.numFreeBuffers=0,this.freeBuffers=new Map,this.usedBuffers=new Map,this.numBytesUsed=0,this.numBytesAllocated=0}acquireBuffer(t,e,n=!1,r=!0){let i;const o=u(t,e);return r?(this.freeBuffers.has(o)||this.freeBuffers.set(o,[]),this.freeBuffers.get(o).length>0?(i=this.freeBuffers.get(o).pop(),this.numFreeBuffers--):(i=this.device.createBuffer({size:t,usage:e,mappedAtCreation:n}),this.numBytesAllocated+=t)):(i=this.device.createBuffer({size:t,usage:e,mappedAtCreation:n}),this.numBytesAllocated+=t),this.usedBuffers.has(o)||this.usedBuffers.set(o,[]),this.usedBuffers.get(o).push(i),this.numUsedBuffers++,this.numBytesUsed+=t,i}releaseBuffer(t,e=!0){if(0===this.freeBuffers.size)return;const n=t.size,r=u(n,t.usage),i=this.usedBuffers.get(r),o=i.indexOf(t);if(o<0)throw new Error("Cannot find the buffer in buffer manager");i[o]=i[i.length-1],i.pop(),this.numUsedBuffers--,this.numBytesUsed-=n,e?(this.freeBuffers.get(r).push(t),this.numFreeBuffers++):(t.destroy(),this.numBytesAllocated-=n)}getNumUsedBuffers(){return this.numUsedBuffers}getNumFreeBuffers(){return this.numFreeBuffers}dispose(){this.freeBuffers.forEach(((t,e)=>{t.forEach((t=>{t.destroy()}))})),this.usedBuffers.forEach(((t,e)=>{t.forEach((t=>{t.destroy()}))})),this.freeBuffers=new Map,this.usedBuffers=new Map,this.numUsedBuffers=0,this.numFreeBuffers=0,this.numBytesUsed=0,this.numBytesAllocated=0}}function u(t,e){return`${t}_${e}`}
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class l{constructor(t){this.device=t,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures=new Map,this.usedTextures=new Map,this.numBytesUsed=0,this.numBytesAllocated=0}acquireTexture(t,e,n,r){const i=t*e*h(n),o=c(t,e,n,r);if(this.freeTextures.has(o)||this.freeTextures.set(o,[]),this.usedTextures.has(o)||this.usedTextures.set(o,[]),this.numBytesUsed+=i,this.numUsedTextures++,this.freeTextures.get(o).length>0){this.numFreeTextures--;const t=this.freeTextures.get(o).shift();return this.usedTextures.get(o).push(t),t}this.numBytesAllocated+=i;const a=this.device.createTexture({size:[t,e],format:n,usage:r});return this.usedTextures.get(o).push(a),a}releaseTexture(t){if(0===this.freeTextures.size)return;const e=t.width,n=t.height,r=t.format,i=c(e,n,r,t.usage);this.freeTextures.has(i)||this.freeTextures.set(i,[]),this.freeTextures.get(i).push(t),this.numFreeTextures++,this.numUsedTextures--;const o=this.usedTextures.get(i),a=o.indexOf(t);if(a<0)throw new Error("Cannot release a texture that was never provided by this texture manager");o.splice(a,1);const s=e*n*h(r);this.numBytesUsed-=s}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){this.freeTextures.forEach(((t,e)=>{t.forEach((t=>{t.destroy()}))})),this.usedTextures.forEach(((t,e)=>{t.forEach((t=>{t.destroy()}))})),this.freeTextures=new Map,this.usedTextures=new Map,this.numUsedTextures=0,this.numFreeTextures=0,this.numBytesUsed=0,this.numBytesAllocated=0}}function c(t,e,n,r){return`${t}_${e}_${n}_${r}`}function h(t){if("rgba8unorm"===t)return 16;throw new Error(`${t} is not supported!`)}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function d(t,e){if(Math.max(...t)>5)throw new Error("Cannot symbolically compute strides for rank > 6 tensor.");const n=t.length,r=t.map((t=>`${e}.${"xyzwuv"[t]}`)),i=new Array(n-1);i[n-2]=r[n-1];for(let t=n-3;t>=0;--t)i[t]=`(${i[t+1]} * ${r[t+1]})`;return i}const f=(t,e,n)=>"int32"===n?`atomicAdd(${t}, bitcast<i32>(${e}));`:`\n          {\n            var oldValue = 0;\n            loop {\n              let newValueF32 = bitcast<f32>(oldValue) + (${e});\n              let newValue = bitcast<i32>(newValueF32);\n              let res = atomicCompareExchangeWeak(${t}, oldValue, newValue);\n              if res.exchanged {\n                break;\n              }\n              oldValue = res.old_value;\n            }\n          }`;
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
var p;!function(t){t[t.FROM_PIXELS=0]="FROM_PIXELS",t[t.DRAW=1]="DRAW"}(p||(p={}));const m=(t,e,n,r,o)=>{const a=function(t,e,n){const r=[],o=n.workgroupSize[0]*n.workgroupSize[1]*n.workgroupSize[2];if(n.outputComponent=n.outputComponent?n.outputComponent:1,r.push(`\n\n      var<private> localId: vec3<u32>;\n      var<private> localIndex: u32;\n      var<private> globalId: vec3<u32>;\n      var<private> numWorkgroups: vec3<u32>;\n      var<private> workgroupId: vec3<u32>;\n\n      // Only used when the y/z dimension of workgroup size is 1.\n      fn getGlobalIndex() -> i32 {\n        ${A(n)?"  return i32(globalId.x);":`  return i32((workgroupId.z * numWorkgroups.x * numWorkgroups.y +\n                workgroupId.y * numWorkgroups.x + workgroupId.x) * ${o}u +\n                localIndex);\n        `}\n      }\n    `),null!=n.pixelsOpType){const i=n.pixelsOpType===p.FROM_PIXELS?`@group(0) @binding(0) var<storage, read_write> result: array<${M(e.dtype,n.outputComponent)}>;`:`@group(0) @binding(1) var<storage, read> inBuf : array<${M(t[0].dtype,n.outputComponent)}>;`,o=3===e.shape.length?"vec2<i32>":"i32";r.push(`\n        struct Uniform {\n          outShapeStrides : ${o},\n          size            : i32,\n          numChannels     : i32,\n          alpha           : f32,\n        };\n\n        ${i}\n        @group(0) @binding(2) var<uniform> uniforms: Uniform;\n      `);const a=C(n);return[w,r.join("\n"),S(e.shape),n.getUserCode(),x(a,n)].join("\n")}let a,s,u="struct Uniforms { NAN : f32, INFINITY : f32, ";n.variableNames.forEach(((e,n)=>{const r=v(t[n].shape.length);u+=`${e.charAt(0).toLowerCase()+e.slice(1)}Shape : ${r}, `,a=t[n].shape.length-1,s=v(a),u+=`${e.charAt(0).toLowerCase()+e.slice(1)}ShapeStrides: ${s}, `}));const l=v(e.shape.length);u+=`outShape : ${l}, `,a=e.shape.length-1,s=v(a),u+=`\n         outShapeStrides: ${s}, `,n.size&&(u+="size : i32, ");n.uniforms&&(u+=n.uniforms);u+="};",u=function(t){const e=/(\w+)\s*:\s*vec(5|6)/g;t=t.replace(e,(t=>"@align(16) "+t));const n=/vec(5|6)\s*,\s*(\w+)/g;return t=t.replace(n,((t,e,n)=>`vec${e}, @align(16) ${n}`))}(u),r.push(u),n.atomic?r.push("\n      @group(0) @binding(0) var<storage, read_write> result: array<atomic<i32>>;\n    "):r.push(`\n      @group(0) @binding(0) var<storage, read_write> result: array<${M(e.dtype,n.outputComponent)}>;\n    `);n.variableNames.forEach(((e,i)=>{r.push(`\n      @group(0) @binding(${1+i}) var<storage, read> ${e}: array<${n.variableComponents?M(t[i].dtype,n.variableComponents[i]):M(t[i].dtype,n.outputComponent)}>;\n        `)})),""!==u&&r.push(`\n      @group(0) @binding(${1+n.variableNames.length}) var<uniform> uniforms: Uniforms;\n      `);const c=function(t,e){const{x:n,y:r=[],z:i=[]}=e,o=t.length,a=n.length+r.length+i.length;if(a!==o)return"";if(n.length===o){return`fn getOutputCoords() -> ${v(o)}{\n    let globalIndex = getGlobalIndex();\n    return getCoordsFromIndex(globalIndex);\n  }\n  `}let s="";const u=[n,r,i];for(let t=0;t<u.length;t++){const e=u[t];if(0!==e.length)if(1===e.length)s+=`let d${e[0]} = i32(globalId[${t}]);`;else{const n=d(e,"uniforms.outShape");s+=`var index${t} = i32(globalId[${t}]);`;for(let r=0;r<n.length;r++)s+=`let d${e[r]} = index${t} / ${n[r]};`,r===n.length-1?s+=`let d${e[r+1]} = index${t} - d${e[r]} * ${n[r]};`:s+=`index${t} = index${t} - d${e[r]} * ${n[r]};`}}const l=[];for(let t=0;t<a;t++)l.push(`d${t}`);const c=v(a);let h=`fn getOutputCoords() -> ${c} {\n  ${s}\n`;0===l.length?h+=`return ${c}(0); }`:h+=`return ${c}(${l.join(",")}); }`;return h}(e.shape,n.dispatchLayout),h=[w,r.join("\n")+_,S(e.shape),c,E(e.shape.length)];n.atomic||h.push(function(t,e,n){const r=t.length,i=M(e,n);let o=`fn setOutputAtIndex(flatIndex : i32, value : ${g(n)}) {\n      result[flatIndex] = ${i}(value);\n    }\n\n    fn setOutputAtIndexI32(flatIndex : i32, value : ${g(n,"i32")}) {\n      result[flatIndex] = ${i}(value);\n    }\n    `;if(r>=2){const t=["d0","d1","d2","d3","d4","d5"].slice(0,r),e=v(r);o+=`\n      fn setOutputAtCoords(${t.map((t=>`${t} : i32`)).join(", ")}, value : ${g(n)}) {\n        let flatIndex = getOutputIndexFromCoords(${e}(${t.join(", ")}));\n        setOutputAtIndex(flatIndex${1===n?"":` / ${n}`}, value);\n      }\n      fn setOutputAtCoordsI32(${t.map((t=>`${t} : i32`)).join(", ")}, value : ${g(n,"i32")}) {\n        let flatIndex = getOutputIndexFromCoords(${e}(${t.join(", ")}));\n        setOutputAtIndexI32(flatIndex${1===n?"":` / ${n}`}, value);\n      }\n    `}return o}(e.shape,e.dtype,n.outputComponent));n.variableNames.forEach(((e,n)=>{h.push(`${S(t[n].shape,e)}`)}));const f=t.map(((t,r)=>function(t,e,n,r){let o=function(t,e){const n=t.name,r=t.shape.length,i=v(r),o="get"+n.charAt(0).toUpperCase()+n.slice(1),a=["d0","d1","d2","d3","d4","d5"].slice(0,r),s=a.map((t=>`${t} : i32`)).join(", ");if(r<1)return`\n      fn ${o}() -> ${g(e)} {\n        return ${g(e)}(${n}[0]);\n      }\n    `;const u=`uniforms.${n.charAt(0).toLowerCase()+n.slice(1)}Shape`;let l=`${r}D`;0===r&&(l="1D");return`\n    fn ${o}(${s}) -> ${g(e)} {\n      return ${g(e)}(${n}[getIndexFromCoords${l}(${i}(${a.join(",")}),\n        ${u})${1===e?"":` / ${e}`}]);\n    }\n   `}(t,n);const a=t.shape;a.length<=e.length&&(o+=function(t,e,n,r){const o=t.name,a=o.charAt(0).toUpperCase()+o.slice(1),s="get"+a+"ByOutput",u=t.shape.length,l=e.length,c=v(l);if(i.util.arraysEqual(t.shape,e)&&r)return`\n    fn ${s}Index(globalIndex : i32) -> ${g(n)} {\n      return ${g(n)}(${o}[globalIndex]);\n    }\n\n    fn ${s}Coords(coords : ${c}) -> ${g(n)} {\n      return ${g(n)}(${o}[${l>1?"getOutputIndexFromCoords(coords)":"coords"}${1===n?"":` / ${n}`}]);\n    }\n    `;const h=i.backend_util.getBroadcastDims(t.shape,e),d=l-u;let f="";if(0===u)return`\n    fn ${s}Index(globalIndex : i32) -> ${g(n)}{\n      return get${a}();\n    }\n\n    fn ${s}Coords(coords : ${c}) -> ${g(n)}{\n      return get${a}();\n    }\n  `;f=l<2&&h.length>=1?"coords = 0;":h.map((t=>`coords.${y(t+d)} = 0;`)).join("\n");let p="";if(l<2&&u>0)p="coords";else if(l>1){const e=v(u),n=t.shape.map(((t,e)=>`coords.${y(e+d)}`)).join(", ");p=`${e}(${n})`}else p="coords";const m=`uniforms.${o.charAt(0).toLowerCase()+o.slice(1)}Shape`,b=`${u}D`;return`\n  fn ${s}Index(globalIndex : i32) -> ${g(n)} {\n    var coords = getCoordsFromIndex(globalIndex);\n    ${f}\n    return ${g(n)}(${o}[getIndexFromCoords${b}(${p}, ${m})${1===n?"":` / ${n}`}]);\n  }\n\n  fn ${s}Coords(coordsIn : ${c}) -> ${g(n)} {\n    var coords = coordsIn;\n    ${f}\n    return ${g(n)}(${o}[getIndexFromCoords${b}(${p}, ${m})${1===n?"":` / ${n}`}]);\n  }\n`}(t,e,n,r));return o}(t,e.shape,n.variableComponents?n.variableComponents[r]:n.outputComponent,n.dispatchLayout.x.length===e.shape.length))).join("\n");h.push(f),h.push(n.getUserCode());const m=C(n);h.push(x(m,n));const b=h.join("\n");return b}(n,{dtype:r.dtype,shape:r.shape},e),s=t.createShaderModule({code:a,label:e.constructor.name});let u=(0,i.env)().get("WEBGPU_PRINT_SHADER");if(""!==u){u=u.toLowerCase();const t=u.split(",");("all"===u||t.some((t=>e.shaderKey.toLowerCase().includes(t))))&&(console.group(e.shaderKey),console.debug(a),console.groupEnd())}return o?t.createComputePipelineAsync({compute:{module:s,entryPoint:"_start"},label:e.constructor.name,layout:"auto"}):t.createComputePipeline({compute:{module:s,entryPoint:"_start"},label:e.constructor.name,layout:"auto"})},g=(t,e="f32")=>{switch(t){case 1:return`${e}`;case 2:return`vec2<${e}>`;case 3:return`vec3<${e}>`;case 4:return`vec4<${e}>`;default:throw new Error(`${t}-component ${e} is not supported.`)}};function v(t){if(t<=1)return"i32";if(2===t)return"vec2<i32>";if(3===t)return"vec3<i32>";if(4===t)return"vec4<i32>";if(5===t)return"vec5";if(6===t)return"vec6";throw Error(`GPU for rank ${t} is not yet supported`)}function y(t){if(0===t)return"x";if(1===t)return"y";if(2===t)return"z";if(3===t)return"w";if(4===t)return"u";if(5===t)return"v";throw Error(`Index ${t} is not yet supported`)}function b(...t){let e;switch(t.length){case 0:e="\n        fn main()\n      ";break;case 1:e=`\n        fn main(${t[0]} : i32)\n      `;break;default:throw Error("Unreachable")}return e}function x(t,e){let n;return n=`\n     ${function(t){return`\n  @compute @workgroup_size(${t.workgroupSize[0]}, ${t.workgroupSize[1]}, ${t.workgroupSize[2]})\n`}(e)}\n      fn _start(@builtin(local_invocation_id) LocalId : vec3<u32>,\n                @builtin(global_invocation_id) GlobalId : vec3<u32>,\n                @builtin(local_invocation_index) LocalIndex: u32,\n                @builtin(workgroup_id) WorkgroupId : vec3<u32>,\n                @builtin(num_workgroups) NumWorkgroups : vec3<u32>) {\n        localId = LocalId;\n        localIndex = LocalIndex;\n        globalId = GlobalId;\n        numWorkgroups = NumWorkgroups;\n        workgroupId = WorkgroupId;\n        ${t?"main(getGlobalIndex());":"main();"};\n      }\n    `,n}const w="\n  struct vec5 {x: i32, y: i32, z: i32, w: i32, u: i32};\n  struct vec6 {x: i32, y: i32, z: i32, w: i32, u: i32, v: i32};\n\n  // Checks whether coordinates lie within the bounds of the shape.\n  fn coordsInBounds2D(coord : vec2<i32>, shape : vec2<i32>) -> bool {\n    return all(coord >= vec2<i32>(0)) && all(coord < shape);\n  }\n  fn coordsInBounds3D(coord : vec3<i32>, shape : vec3<i32>) -> bool {\n    return all(coord >= vec3<i32>(0)) && all(coord < shape);\n  }\n  fn coordsInBounds4D(coord : vec4<i32>, shape : vec4<i32>) -> bool {\n    return all(coord >= vec4<i32>(0)) && all(coord < shape);\n  }\n\n  fn getIndexFromCoords1D(coord : i32, shape : i32) -> i32 {\n    return coord;\n  }\n  fn getIndexFromCoords2D(coords : vec2<i32>, shape : vec2<i32>) -> i32 {\n    return dot(coords, vec2<i32>(shape.y, 1));\n  }\n  fn getIndexFromCoords3D(coords : vec3<i32>, shape : vec3<i32>) -> i32 {\n    return dot(coords, vec3<i32>(shape.y * shape.z, shape.z, 1));\n  }\n  fn getIndexFromCoords4D(coords : vec4<i32>, shape : vec4<i32>) -> i32 {\n    return dot(coords, vec4<i32>(\n        shape.y * shape.z * shape.w, shape.z * shape.w, shape.w, 1));\n  }\n  fn getIndexFromCoords5D(coords : vec5, shape : vec5) -> i32 {\n    let shapeStrides: vec5 = vec5(shape.y * shape.z * shape.w * shape.u, shape.z * shape.w * shape.u, shape.w * shape.u, shape.u, 1);\n    return coords.x*shapeStrides.x + coords.y*shapeStrides.y + coords.z*shapeStrides.z + coords.w*shapeStrides.w + coords.u*shapeStrides.u;\n  }\n  fn getIndexFromCoords6D(coords : vec6, shape : vec6) -> i32 {\n    let shapeStrides: vec6 = vec6(shape.y * shape.z * shape.w * shape.u * shape.v, shape.z * shape.w * shape.u * shape.v, shape.w * shape.u * shape.v, shape.u * shape.v, shape.v, 1);\n    return coords.x*shapeStrides.x + coords.y*shapeStrides.y + coords.z*shapeStrides.z + coords.w*shapeStrides.w + coords.u*shapeStrides.u + coords.v*shapeStrides.v;\n  }\n\n  // NaN defination in IEEE 754-1985 is :\n  //   - sign = either 0 or 1.\n  //   - biased exponent = all 1 bits.\n  //   - fraction = anything except all 0 bits (since all 0 bits represents infinity).\n  // https://en.wikipedia.org/wiki/IEEE_754-1985#Representation_of_non-numbers\n  fn isnan(val: f32) -> bool {\n    let floatToUint: u32 = bitcast<u32>(val);\n    return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n  }\n  fn isnanVec4(val : vec4<f32>) -> vec4<bool> {\n    let floatToUint: vec4<u32> = bitcast<vec4<u32>>(val);\n    return (floatToUint & vec4<u32>(0x7fffffffu)) > vec4<u32>(0x7f800000u);\n  }\n",_="\n  fn isinf(val: f32) -> bool {\n    return abs(val) == uniforms.INFINITY;\n  }\n";function S(t,e=""){const n=t.length,r=""!==e?`get${e.charAt(0).toUpperCase()+e.slice(1)}CoordsFromIndex`:"getCoordsFromIndex",o=""!==e?`${e.charAt(0).toLowerCase()+e.slice(1)}ShapeStrides`:"outShapeStrides";if(n<=1)return`fn ${r}(index : i32) -> i32 { return index; }`;const a=i.util.computeStrides(t),s=v(n),u=[];for(let t=0;t<n;t++)u.push(`d${t}`);if(1===a.length)return`    fn ${r}(index : i32) -> vec2<i32> {\n      let d0 = index / uniforms.${o}; let d1 = index - d0 * uniforms.${o};\n      return vec2<i32>(d0, d1);\n    }`;let l;return l="var index2 = index;"+a.map(((t,e)=>`${`let ${u[e]} = index2 / uniforms.${o}.${y(e)}`}; ${e===a.length-1?`let ${u[e+1]} = index2 - ${u[e]} * uniforms.${o}.${y(e)}`:`index2 = index2 - ${u[e]} * uniforms.${o}.${y(e)}`};`)).join(""),`\n    fn ${r}(index : i32) -> ${s} {\n      ${l}\n      return ${s}(${u.join(",")});\n    }\n  `}function E(t){let e="";switch(t){case 0:case 1:e+="\n        fn getOutputIndexFromCoords(coords : i32) -> i32 {\n          return coords;\n        }\n        ";break;case 2:e+="\n        fn getOutputIndexFromCoords(coords : vec2<i32>) -> i32 {\n          return dot(coords, vec2<i32>(uniforms.outShapeStrides, 1));\n        }\n        ";break;case 3:e+="\n        fn getOutputIndexFromCoords(coords : vec3<i32>) -> i32 {\n          return dot(coords, vec3<i32>(uniforms.outShapeStrides.x, uniforms.outShapeStrides.y, 1));\n        }\n        ";break;case 4:e+="\n        fn getOutputIndexFromCoords(coords : vec4<i32>) -> i32 {\n          return dot(coords, vec4<i32>(\n            uniforms.outShapeStrides.x, uniforms.outShapeStrides.y, uniforms.outShapeStrides.z, 1));\n        }\n        ";break;case 5:e+="\n        fn getOutputIndexFromCoords(coords : vec5) -> i32 {\n          return coords.x * uniforms.outShapeStrides.x +\n              coords.y * uniforms.outShapeStrides.y +\n              coords.z * uniforms.outShapeStrides.z +\n              coords.w * uniforms.outShapeStrides.w +\n              coords.u;\n        }\n        ";break;case 6:e+="\n        fn getOutputIndexFromCoords(coords : vec6) -> i32 {\n          return coords.x * uniforms.outShapeStrides.x +\n              coords.y * uniforms.outShapeStrides.y +\n              coords.z * uniforms.outShapeStrides.z +\n              coords.w * uniforms.outShapeStrides.w +\n              coords.u * uniforms.outShapeStrides.u +\n              coords.v;\n        }\n        ";break;default:i.util.assert(!1,(()=>`Unsupported ${t}D shape`))}return e}function A(t){return 1===t.dispatch[1]&&1===t.dispatch[2]}function M(t,e=1){if("float32"===t)return g(e,"f32");if("int32"===t||"bool"===t)return g(e,"i32");throw new Error(`type ${t} is not supported.`)}function C(t){return(!t.dispatchLayout.hasOwnProperty("y")||0===t.dispatchLayout.y.length)&&(!t.dispatchLayout.hasOwnProperty("z")||0===t.dispatchLayout.z.length)}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const T=t=>{let e=1;for(let n=0;n<t.length;n++)e*=t[n];return e};function k(t,e){if(t.length!==e.length)throw new Error(`Cannot compute whether rank ${t.length} tiles fit evenly into rank ${e.length} shape - ranks must match.`);return e.every(((e,n)=>e%t[n]==0))}function I(t,e,n=[1,1,1],r=[1,1,1]){const[i,o,a]=[Math.ceil(T(t.x.map((t=>e[t])))/(n[0]*r[0])),t.y?Math.ceil(T(t.y.map((t=>e[t])))/(n[1]*r[1])):1,t.z?Math.ceil(T(t.z.map((t=>e[t])))/(n[2]*r[2])):1];return[i,o,a]}function N(t,e,n,r=!1){const i=[8,8,1],o=[4,4,1];return r||(t<=8&&(o[1]=1),e<=16&&n<=16&&(i[0]=4)),{workgroupSize:i,elementsPerThread:o}}function P(t,e,n=!1){if(n)return[8,8,1];const r=T(t.x.map((t=>e[t]))),i=T(t.y.map((t=>e[t])));return r<=4?[4,16,1]:i<=4?[16,4,1]:[16,16,1]}function O(t,e,n=!1){if(n)return[4,4,1];const r=T(t.x.map((t=>e[t]))),i=T(t.y.map((t=>e[t])));return r<=4?[1,2,1]:i<=4?[2,1,1]:[2,2,1]}function L(t){return{x:t.map(((t,e)=>e))}}function R(t){if("float32"===t||"int32"===t||"bool"===t||"string"===t)return 4;if("complex64"===t)return 8;throw new Error(`Unknown dtype ${t}`)}function D(){return!("undefined"==typeof globalThis||!globalThis.navigator||!globalThis.navigator.gpu)}function z(t,e){Array.isArray(t)||(t=[t]),t.forEach((t=>{null!=t&&i.util.assert("complex64"!==t.dtype,(()=>`${e} does not support complex64 tensors in the WebGPU backend.`))}))}var F;!function(t){t[t.MatMulReduceProgram=0]="MatMulReduceProgram",t[t.MatMulSplitKProgram=1]="MatMulSplitKProgram",t[t.MatMulSmallOutputSizeProgram=2]="MatMulSmallOutputSizeProgram",t[t.MatMulPackedProgram=3]="MatMulPackedProgram",t[t.MatMulMax=4]="MatMulMax"}(F||(F={}));
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const B=(0,i.env)().getNumber("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD");class U extends i.KernelBackend{nextDataId(){return U.nextDataId++}constructor(t,e){if(super(),this.commandQueueOwnedIds=new WeakSet,this.dispatchCountInPass=0,this.disposed=!1,this.downloadWaitMs=0,this.tensorDataPendingDisposal=[],this.queryResolveBuffer=null,this.querySet=null,this.querySetCount=2,this.stagingPendingDisposal=[],this.uniformPendingDisposal=[],this.uploadWaitMs=0,this.hasReadSyncWarned=!1,this.hasTimestampQueryWarned=!1,!D())throw new Error("WebGPU is not supported on this device");this.pipelineCache={},this.device=t,this.queue=t.queue,this.commandEncoder=null,this.computePassEncoder=null,this.adapterInfo=new a(e),this.supportTimestampQuery=this.device.features.has("timestamp-query"),this.thresholdToIncreaseWorkgroups=this.adapterInfo.intelGPUGeneration>=12?16:8,this.bufferManager=new s(this.device),this.textureManager=new l(this.device),this.tensorMap=new i.DataStorage(this,(0,i.engine)()),(0,i.env)().getBool("WEBGPU_USE_PROFILE_TOOL")&&(this.dummyCanvas=document.createElement("canvas"),this.dummyCanvas.width=1,this.dummyCanvas.height=1,this.dummyContext=this.dummyCanvas.getContext("webgpu"),this.dummyContext.configure({device:t,format:"bgra8unorm"}),document.body.appendChild(this.dummyCanvas))}floatPrecision(){return 32}disposeData(t,e=!1){if(!this.tensorMap.has(t))return!0;const n=this.tensorMap.get(t);return e?n.refCount=0:n.refCount--,!(n.refCount>0)&&(null!=n.complexTensorInfos&&(this.disposeData(n.complexTensorInfos.real.dataId),this.disposeData(n.complexTensorInfos.imag.dataId)),this.commandQueueOwnedIds.has(t)?(this.tensorDataPendingDisposal.push(t),!0):(this.releaseResource(t),this.tensorMap.delete(t),!0))}memory(){return{numBytesInGPU:this.bufferManager.numBytesUsed,numBytesAllocatedInGPU:this.bufferManager.numBytesAllocated,unreliable:!1}}releaseResource(t){const e=this.tensorMap.get(t);e&&e.resource&&(e.external||(e.resource instanceof GPUBuffer?this.bufferManager.releaseBuffer(e.resource):e.resource instanceof GPUTexture&&this.textureManager.releaseTexture(e.resource)),e.resource=null)}refCount(t){if(this.tensorMap.has(t)){return this.tensorMap.get(t).refCount}return 0}incRef(t){this.tensorMap.get(t).refCount++}decRef(t){if(this.tensorMap.has(t)){this.tensorMap.get(t).refCount--}}write(t,e,n){if("complex64"===n&&null!=t)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const r={id:this.nextDataId()};return this.tensorMap.set(r,{dtype:n,shape:e,values:t,refCount:1}),r}move(t,e,n,r,i){if("complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.tensorMap.set(t,{dtype:r,shape:n,values:e,refCount:i})}submitQueue(){this.queue.submit([this.commandEncoder.finish()]),this.commandEncoder=null,this.dispatchCountInPass=0,this.commandQueueOwnedIds=new WeakSet,this.tensorDataPendingDisposal.forEach((t=>{this.releaseResource(t),this.tensorMap.delete(t)})),this.uniformPendingDisposal.forEach((t=>this.bufferManager.releaseBuffer(t))),this.stagingPendingDisposal.forEach((t=>this.bufferManager.releaseBuffer(t,!1))),this.tensorDataPendingDisposal=[],this.uniformPendingDisposal=[],this.stagingPendingDisposal=[]}ensureCommandEncoderReady(){this.commandEncoder||(this.commandEncoder=this.device.createCommandEncoder())}endComputePassEncoder(){this.computePassEncoder&&(this.computePassEncoder.end(),this.computePassEncoder=null)}async checkCompileCompletionAsync(){let t;try{t=await Promise.all(Object.values(this.pipelineCache))}catch(t){throw new Error(t.message)}Object.keys(this.pipelineCache).map(((e,n)=>{this.pipelineCache[e]=t[n]}))}async getBufferData(t){if((0,i.env)().getBool("WEBGPU_ENGINE_COMPILE_ONLY"))return console.warn("The data may be invalid since WEBGPU_ENGINE_COMPILE_ONLY is true, this can only be called when WEBGPU_ENGINE_COMPILE_ONLY is false"),null;const e=t.size,n=this.bufferManager.acquireBuffer(e,GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ);this.ensureCommandEncoderReady(),this.endComputePassEncoder(),this.commandEncoder.copyBufferToBuffer(t,0,n,0,e),this.submitQueue(),await n.mapAsync(GPUMapMode.READ);const r=n.getMappedRange().slice(0);return n.unmap(),null!=n&&this.bufferManager.releaseBuffer(n),(0,i.env)().getBool("WEBGPU_USE_PROFILE_TOOL")&&(i.util.assert(void 0!==this.dummyContext,(()=>"Fail to get context for profiling tool")),this.dummyContext.getCurrentTexture()),r}convertAndCacheOnCPU(t,e){const n=this.tensorMap.get(t);return n.values=e,n.values}readSync(t){const e=this.tensorMap.get(t),{values:n,complexTensorInfos:r}=e;if(null!=n||"string"===e.dtype)return n;if("complex64"===e.dtype){const e=this.readSync(r.real.dataId),n=this.readSync(r.imag.dataId),o=i.util.convertBackendValuesAndArrayBuffer(i.backend_util.mergeRealAndImagArrays(e,n).buffer,"float32");return this.convertAndCacheOnCPU(t,o),o}this.hasReadSyncWarned||(this.hasReadSyncWarned=!0,console.warn("The performance of synchronously reading data from GPU to CPU is poor on the webgpu backend, please use asynchronous APIs instead."));const o=["opaque","premultiplied"],a=e.resource,s=a.size;i.util.assert(s%4==0,(()=>"Because there is 4 bytes for one pixel, buffer size must be multiple of 4."));const u=s/4,l=new ArrayBuffer(s),c=256,h=256,d=o.map((t=>new OffscreenCanvas(c,h))),f=new OffscreenCanvas(c,h);this.endComputePassEncoder(),d.map(((t,e)=>{const n=t.getContext("webgpu");return n.configure({device:this.device,format:"bgra8unorm",usage:GPUTextureUsage.COPY_DST,alphaMode:o[e]}),n.getCurrentTexture()})).map(((t,e)=>{const n=(n,r,i)=>{this.ensureCommandEncoderReady(),this.commandEncoder.copyBufferToTexture({buffer:a,bytesPerRow:1024,offset:i},{texture:t},{width:n,height:r}),this.submitQueue();const s=f.getContext("2d",{willReadFrequently:!0});s.clearRect(0,0,n,r),s.drawImage(d[e],0,0);const u=s.getImageData(0,0,n,r).data,c=o[e],h=new Uint8ClampedArray(l,i,n*r*4);for(let t=0;t<h.length;t+=4)if("premultiplied"===c)h[t+3]=u[t+3];else{const e=u[t];h[t]=u[t+2],h[t+1]=u[t+1],h[t+2]=e}},r=Math.floor(u/65536);let i=c,s=h,p=0;for(let t=0;t<r;t++)n(i,s,p),p+=262144;const m=u%65536;s=Math.floor(m/c),s>0&&(n(i,s,p),p+=1024*s),i=m%c,i>0&&n(i,1,p)}));const p=i.util.convertBackendValuesAndArrayBuffer(l,e.dtype);return this.convertAndCacheOnCPU(t,p),p}async read(t){if(!this.tensorMap.has(t))throw new Error(`Tensor ${t} was not registered!`);const e=this.tensorMap.get(t),{values:n}=e;if(null!=n)return n;let r;if("complex64"===e.dtype){const t=await Promise.all([this.read(e.complexTensorInfos.real.dataId),this.read(e.complexTensorInfos.imag.dataId)]),n=t[0],o=t[1];r=i.backend_util.mergeRealAndImagArrays(n,o)}else{const t=await this.getBufferData(e.resource);r=i.util.convertBackendValuesAndArrayBuffer(t,e.dtype)}return this.convertAndCacheOnCPU(t,r),r}copyBuffer(t){const e=t.size,n=t.usage,r=this.bufferManager.acquireBuffer(e,n);return this.ensureCommandEncoderReady(),this.endComputePassEncoder(),this.commandEncoder.copyBufferToBuffer(t,0,r,0,e),this.submitQueue(),r}createTensorFromGPUData(t,e,n){let r=t.buffer;if("complex64"===n)throw new Error("Cannot write to a complex64 dtype. ");const o={id:this.nextDataId()};this.tensorMap.set(o,{dtype:n,shape:e,values:null,refCount:1,external:t.zeroCopy});const a=this.tensorMap.get(o),s=R(a.dtype)*i.util.sizeFromShape(a.shape);if(t.buffer.size<s)throw new Error(`GPUBuffer size(${t.buffer.size}) is smaller than tensor size(${s})!`);if((t.buffer.usage&(GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC))!=(GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC))throw new Error("GPUBuffer.usage should include GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_SRC!");return!0!==t.zeroCopy&&(r=this.copyBuffer(r)),a.resource=r,(0,i.engine)().makeTensorFromDataId(o,e,n,this)}readToGPU(t){const e=this.tensorMap.get(t),{values:n,dtype:r,shape:o,resource:a}=e;if("complex64"===r)throw new Error("Does not support reading buffer for complex64 dtype.");if(null==a)throw null!=n?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const s=a,u=s.size,l=s.usage,c=this.bufferManager.acquireBuffer(u,l);this.ensureCommandEncoderReady(),this.endComputePassEncoder(),this.commandEncoder.copyBufferToBuffer(a,0,c,0,u),this.submitQueue();const h=this.makeTensorInfo(o,r),d=(0,i.engine)().makeTensorFromTensorInfo(h);return this.tensorMap.get(h.dataId).resource=c,{tensorRef:d,buffer:c}}bufferSync(t){const e=this.readSync(t.dataId);if("string"===t.dtype)try{const n=e.map((t=>i.util.decodeString(t)));return(0,i.buffer)(t.shape,t.dtype,n)}catch(t){throw new Error("Failed to decode encoded string bytes into utf-8")}return(0,i.buffer)(t.shape,t.dtype,e)}async time(t){this.supportTimestampQuery||this.hasTimestampQueryWarned||(console.warn("This device doesn't support timestamp-query extension. Start Chrome browser with flag --enable-dawn-features=allow_unsafe_apis to try it again. Otherwise, zero will be shown for the kernel time when profiling mode is enabled."),this.hasTimestampQueryWarned=!0);const e=this.activeTimers,n=[];let r=!1;null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,t();const o=i.util.flatten(this.activeTimers.map((t=>t.query))).filter((t=>null!=t)),a=i.util.flatten(this.activeTimers.map((t=>t.name))).filter((t=>null!=t));this.activeTimers=e,r&&(this.programTimersStack=null);const s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},u=await Promise.all(o);return s.kernelMs=i.util.sum(u),s.getExtraProfileInfo=()=>u.map(((t,e)=>({name:a[e],ms:t}))).map((t=>`${t.name}: ${t.ms}`)).join(", "),this.uploadWaitMs=0,this.downloadWaitMs=0,s}makeTensorInfo(t,e,n){"string"===e&&null!=n&&n.length>0&&i.util.isString(n[0])&&(n=n.map((t=>i.util.encodeString(t))));return{dataId:this.write(n,t,e),shape:t,dtype:e}}tensorToBinding(t){if(!t)return null;const e=this.tensorMap.get(t.dataId).resource;return e instanceof GPUBuffer?{buffer:e}:e instanceof GPUTexture?e.createView():e}uploadToGPU(t){const e=this.tensorMap.get(t);if(null!=e.resource)return;const n=R(e.dtype)*i.util.sizeFromShape(e.shape);let r;const o=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST;if(e.values){if(r=this.bufferManager.acquireBuffer(n,o,!0),"unmapped"===r.mapState){const t=this.bufferManager.acquireBuffer(n,GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC,!0,!1),i=t.getMappedRange();"int32"===e.dtype||"bool"===e.dtype?new Int32Array(i).set(e.values):new Float32Array(i).set(e.values),t.unmap(),this.ensureCommandEncoderReady(),this.endComputePassEncoder(),this.commandEncoder.copyBufferToBuffer(t,0,r,0,n),this.stagingPendingDisposal.push(t)}else{const t=r.getMappedRange();"int32"===e.dtype||"bool"===e.dtype?new Int32Array(t).set(e.values):new Float32Array(t).set(e.values),r.unmap()}e.values=null}else r=this.bufferManager.acquireBuffer(n,o);e.resource=r}makeUniforms(t){let e=0,n=0;const r=[];let o=1;t.forEach((t=>{let a;switch(0===t.data.length&&(t.data=[1]),t.data.length){case 1:a=4;break;case 2:a=8;break;case 3:case 4:case 5:case 6:a=16;break;default:i.util.assert(!1,(()=>`Unsupported ${t.data.length}D shape`))}5!==n&&6!==n||(a=16),a>o&&(o=a),e=Math.ceil(e/a)*a,n=t.data.length,r.push(e),e+=4*t.data.length})),e=Math.ceil(e/o)*o;const a=new ArrayBuffer(e);t.forEach(((t,e)=>{const n=r[e];"int32"===t.type?new Int32Array(a,n,t.data.length).set(t.data):"uint32"===t.type?new Uint32Array(a,n,t.data.length).set(t.data):new Float32Array(a,n,t.data.length).set(t.data)}));const s=this.bufferManager.acquireBuffer(e,GPUBufferUsage.COPY_DST|GPUBufferUsage.UNIFORM);return this.queue.writeBuffer(s,0,a,0,e),this.uniformPendingDisposal.push(s),{offset:0,size:e,buffer:s}}runWebGPUProgram(t,e,n,r,o){if(o||(o=this.makeTensorInfo(t.outputShape,n)),0===i.util.sizeFromShape(o.shape))return this.tensorMap.get(o.dataId).values=i.util.getTypedArrayFromDType(o.dtype,0),o;this.uploadToGPU(o.dataId),t.dispatch=((t,e)=>{const n=t.limits.maxComputeWorkgroupsPerDimension,r=e.dispatchLayout,o=e.dispatch;if(o.every((t=>t<=n)))return o;i.util.assert(o[0]>n&&void 0===r.y&&void 0===r.z,(()=>"Dispatch size exceeds WebGPU limits in Y or Z dimension."));let a=Math.ceil(Math.sqrt(o[0]));return a>n?(a=Math.ceil(Math.cbrt(o[0])),i.util.assert(a<=n,(()=>"Total dispatch size exceeds WebGPU maximum.")),[a,a,a]):[a,a,1]})(this.device,t);const a=e.map(((e,n)=>{if("complex64"===e.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");return this.uploadToGPU(e.dataId),{dtype:this.tensorMap.get(e.dataId).dtype,shape:e.shape,name:t.variableNames[n]}}));t.shaderKey=function(t,e,n){let r=t.shaderKey;if(null!=t.pixelsOpType)return r;const o=[],a=[];e.forEach((t=>{o.push(t.shape),a.push(t.dtype)})),o.push(n.shape),a.push(n.dtype);const s=e.map((t=>i.backend_util.getBroadcastDims(t.shape,n.shape))),u=e.map((t=>i.util.arraysEqual(t.shape,n.shape))).join("_"),l=s.map((t=>t.join("_"))).join(";"),c=A(t)?"flatDispatch":"";return r+="_"+(t.workgroupSize?t.workgroupSize.join(","):"")+o.map((t=>t.length)).join(",")+a.join(",")+t.variableNames.join(",")+l+u+c,r}(t,a,o);const s=(0,i.env)().getBool("WEBGPU_ENGINE_COMPILE_ONLY");return t.shaderKey in this.pipelineCache||(this.pipelineCache[t.shaderKey]=m(this.device,t,a,o,s)),t.pipeline=this.pipelineCache[t.shaderKey],s||this.recordAndSubmit(t,o,e,r),o}recordAndSubmit(t,e,n,r){if(t.pipeline instanceof Promise)throw new Error("Please call checkCompileCompletionAsync to ensure parallel compilation is done!");let o=[],a=[];const s="int32";if(null==t.pixelsOpType){o.push({type:"float32",data:[NaN]},{type:"float32",data:[1/0]}),a=n.concat(e).map((t=>t.shape));const t="int32";a.map((e=>{o.push({type:t,data:e});const n=i.util.computeStrides(e);o.push({type:t,data:n})}))}else{const t=i.util.computeStrides(e.shape);o.push({type:s,data:t})}if(t.size){const e=i.util.sizeFromShape(t.outputShape);o.push({type:s,data:[t.outputComponent?e/t.outputComponent:e]})}r&&(o=[...o,...r]);const u=[this.tensorToBinding(e),...n.map((t=>this.tensorToBinding(t))),this.makeUniforms(o)];n.forEach((t=>{this.commandQueueOwnedIds.add(t.dataId)})),this.commandQueueOwnedIds.add(e.dataId);const l=this.device.createBindGroup({layout:t.pipeline.getBindGroupLayout(0),entries:u.map(((t,e)=>({binding:e,resource:t})))}),c=null!=this.activeTimers;this.ensureCommandEncoderReady();const h={};c&&this.supportTimestampQuery?(this.endComputePassEncoder(),null==this.querySet&&(this.querySet=this.device.createQuerySet({type:"timestamp",count:this.querySetCount})),h.timestampWrites={querySet:this.querySet,beginningOfPassWriteIndex:0,endOfPassWriteIndex:1},this.computePassEncoder=this.commandEncoder.beginComputePass(h)):this.computePassEncoder||(this.computePassEncoder=this.commandEncoder.beginComputePass(h)),this.computePassEncoder.setPipeline(t.pipeline),this.computePassEncoder.setBindGroup(0,l),this.computePassEncoder.dispatchWorkgroups(t.dispatch[0],t.dispatch[1],t.dispatch[2]),this.dispatchCountInPass++,(c||(0,i.env)().get("WEBGPU_DEFERRED_SUBMIT_BATCH_SIZE")<=this.dispatchCountInPass||t.pixelsOpType===p.DRAW)&&(this.endComputePassEncoder(),c?this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime()}):this.submitQueue())}async getQueryTime(){if(!this.supportTimestampQuery)return 0;null==this.queryResolveBuffer&&(this.queryResolveBuffer=this.bufferManager.acquireBuffer(8*this.querySetCount,GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST|GPUBufferUsage.QUERY_RESOLVE)),this.commandEncoder.resolveQuerySet(this.querySet,0,this.querySetCount,this.queryResolveBuffer,0);const t=this.bufferManager.acquireBuffer(8*this.querySetCount,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST);this.commandEncoder.copyBufferToBuffer(this.queryResolveBuffer,0,t,0,8*this.querySetCount),this.submitQueue(),await t.mapAsync(GPUMapMode.READ);const e=new BigUint64Array(t.getMappedRange()),n=Number(e[1]-e[0])/1e6;return t.unmap(),this.bufferManager.releaseBuffer(t),n}shouldExecuteOnCPU(t,e=B){return(0,i.env)().getBool("WEBGPU_CPU_FORWARD")&&t.every((t=>null==this.tensorMap.get(t.dataId).resource&&i.util.sizeFromShape(t.shape)<e))}numDataIds(){return this.tensorMap.numDataIds()-this.tensorDataPendingDisposal.length}dispose(){this.disposed||(null!=this.querySet&&this.querySet.destroy(),this.bufferManager.dispose(),this.textureManager.dispose(),this.disposed=!0)}}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
var j;U.nextDataId=0,
/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
D()&&(0,i.registerBackend)("webgpu",(async()=>{const t={powerPreference:(0,i.env)().get("WEBGPU_USE_LOW_POWER_GPU")?"low-power":"high-performance"},e=await navigator.gpu.requestAdapter(t),n={},r=[];e.features.has("timestamp-query")&&r.push("timestamp-query"),e.features.has("bgra8unorm-storage")&&r.push(["bgra8unorm-storage"]),n.requiredFeatures=r;const o=e.limits;n.requiredLimits={maxComputeWorkgroupStorageSize:o.maxComputeWorkgroupStorageSize,maxComputeWorkgroupsPerDimension:o.maxComputeWorkgroupsPerDimension,maxStorageBufferBindingSize:o.maxStorageBufferBindingSize,maxBufferSize:o.maxBufferSize,maxComputeWorkgroupSizeX:o.maxComputeWorkgroupSizeX,maxComputeInvocationsPerWorkgroup:o.maxComputeInvocationsPerWorkgroup};const a=await e.requestDevice(n),s=await e.requestAdapterInfo();return new U(a,s)}),3),function(t){t[t.ADD=0]="ADD",t[t.ATAN2=1]="ATAN2",t[t.COMPLEX_MULTIPLY_IMAG=2]="COMPLEX_MULTIPLY_IMAG",t[t.COMPLEX_MULTIPLY_REAL=3]="COMPLEX_MULTIPLY_REAL",t[t.DIV=4]="DIV",t[t.ELU_DER=5]="ELU_DER",t[t.EQUAL=6]="EQUAL",t[t.FLOOR_DIV=7]="FLOOR_DIV",t[t.GREATER=8]="GREATER",t[t.GREATER_EQUAL=9]="GREATER_EQUAL",t[t.LESS=10]="LESS",t[t.LESS_EQUAL=11]="LESS_EQUAL",t[t.LOGICAL_AND=12]="LOGICAL_AND",t[t.LOGICAL_OR=13]="LOGICAL_OR",t[t.MAX=14]="MAX",t[t.MIN=15]="MIN",t[t.MOD=16]="MOD",t[t.MUL=17]="MUL",t[t.NOT_EQUAL=18]="NOT_EQUAL",t[t.POW=19]="POW",t[t.PRELU=20]="PRELU",t[t.SQUARED_DIFFERENCE=21]="SQUARED_DIFFERENCE",t[t.SUB=22]="SUB"}(j||(j={}));const V="let resultTemp = a + b;",H="let resultTemp = atan2(a, b);",G="let resultTemp = areal * breal - aimag * bimag;",W="let resultTemp = areal * bimag + aimag * breal;",X="let resultTemp = a / b;",Y="let resultTemp = select(a * (b + 1.0), a, b >= b - b);",q="\n  let zero = sign(a) * 0 + 0;\n  let one = sign(b) * 0 + 1;\n  let resultTemp = select(zero, one, a == b);\n",$="\n  let remainder =\n      select(a % b, round(a % b), (round(a) == a) & (round(b) == b));\n  let quotient = (a - remainder) / b;\n  let resultTemp =\n      round(select(quotient, quotient - 1, sign(remainder) == -sign(b)));\n",K="\n  let zero = sign(a) * 0 + 0;\n  let one = sign(b) * 0 + 1;\n  let resultTemp = select(zero, one, a > b);\n",Z="\n  let zero = sign(a) * 0 + 0;\n  let one = sign(b) * 0 + 1;\n  let resultTemp = select(zero, one, a >= b);\n",Q="\n  let zero = sign(a) * 0 + 0;\n  let one = sign(b) * 0 + 1;\n  let resultTemp = select(zero, one, a < b);\n",J="\n  let zero = sign(a) * 0 + 0;\n  let one = sign(b) * 0 + 1;\n  let resultTemp = select(zero, one, a <= b);\n",tt="return f32(a >= 1.0 && b >= 1.0);",et="return (vec4<f32>(a >= vec4<f32>(1.0)) *\n  vec4<f32>(b >= vec4<f32>(1.0)));",nt="return f32(a >= 1.0 || b >= 1.0);",rt="return min(vec4<f32>(a >= vec4<f32>(1.0)) +\n  vec4<f32>(b >= vec4<f32>(1.0)), vec4<f32>(1.0));",it="let resultTemp = max(a, b);",ot="let resultTemp = min(a, b);",at="\n  let isNaN = b == 0.;\n  var resultTemp = a % b;\n  resultTemp = select((resultTemp + b) % b, resultTemp,\n      (a < 0. && b < 0.) || (a >= 0. && b > 0.));\n",st="\n  let isNaN = !vec4<bool>(b);\n  var resultTemp = vec4<f32>(a % b);\n  if (!((a[0] < 0. && b[0] < 0.) || (a[0] >= 0. && b[0] > 0.))) {\n    resultTemp[0] = (resultTemp[0] + b[0]) % b[0];\n  }\n  if (!((a[1] < 0. && b[1] < 0.) || (a[1] >= 0. && b[1] > 0.))) {\n    resultTemp[1] = (resultTemp[1] + b[1]) % b[1];\n  }\n  if (!((a[2] < 0. && b[2] < 0.) || (a[2] >= 0. && b[2] > 0.))) {\n    resultTemp[2] = (resultTemp[2] + b[2]) % b[2];\n  }\n  if (!((a[3] < 0. && b[3] < 0.) || (a[3] >= 0. && b[3] > 0.))) {\n    resultTemp[3] = (resultTemp[3] + b[3]) % b[3];\n  }\n",ut="let resultTemp = a * b;",lt="\n  var resultTemp = f32(a != b);\n  let valueForNaN = 1.0;\n",ct="\n  var resultTemp = vec4<f32>(a != b);\n  let valueForNaN = 1.0;\n",ht="\n  let isNaN = a < 0.0 && floor(b) < b;\n  if (b == 0.0) {\n    return 1.0;\n  }\n  var resultTemp = select(sign(a) * pow(abs(a), b), pow(abs(a), b),\n      round(abs(b) % 2.0) != 1.0);\n",dt="\n  let isModRound1Bool = vec4<i32>(round(abs(b) % vec4<f32>(2.0))) == vec4<i32>(1);\n  let isModRound1 = vec4<f32>(isModRound1Bool);\n  let multiplier = sign(a) * isModRound1 + (vec4<f32>(1.0) - isModRound1);\n  var resultTemp = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  let isExpZero = b == vec4<f32>(0.0);\n  if (isExpZero.r) {\n    resultTemp.r = 1.0;\n  }\n  if (isExpZero.g) {\n    resultTemp.g = 1.0;\n  }\n  if (isExpZero.b) {\n    resultTemp.b = 1.0;\n  }\n  if (isExpZero.a) {\n    resultTemp.a = 1.0;\n  }\n  let isNaN = (a < vec4<f32>(0.0)) & (floor(b) < b);\n",ft="if (a < 0.0) { return b * a; }  return a;",pt="\n  let aLessThanZero = vec4<f32>(a < vec4<f32>(0.0));\n  return (aLessThanZero * (b * a)) + ((vec4<f32>(1.0) - aLessThanZero) * a);\n",mt="let resultTemp = (a - b) * (a - b);",gt="let resultTemp = a - b;";function vt(t,e){let n;do{switch(t){case j.ATAN2:n=H;break;case j.MAX:n=it;break;case j.MIN:n=ot;break;case j.MOD:n=e?st:at;break;case j.NOT_EQUAL:n=e?ct:lt;break;case j.POW:n=e?dt:ht;break;default:continue}let r,i,o;return e?(r="isnanVec4",i="vec4<f32>",o="vec4<bool>"):(r="isnan",i="f32",o="bool"),`\n      let aIsNaN = ${r}(a);\n      let aPostLegalization = select(a, ${i}(42), aIsNaN);\n      let bIsNaN = ${r}(b);\n      let bPostLegalization = select(b, ${i}(42), bIsNaN);\n      let isNaN = false;\n      let valueForNaN = uniforms.NAN;\n      {\n        let a = aPostLegalization;\n        let b = bPostLegalization;\n        ${n}\n        return select(\n            resultTemp, ${i}(valueForNaN),\n            ${o}(isNaN) | aIsNaN | bIsNaN);\n      }\n    `}while(0);switch(t){case j.ADD:n=V;break;case j.COMPLEX_MULTIPLY_IMAG:n=W;break;case j.COMPLEX_MULTIPLY_REAL:n=G;break;case j.DIV:n=X;break;case j.ELU_DER:n=Y;break;case j.EQUAL:n=q;break;case j.FLOOR_DIV:n=$;break;case j.GREATER:n=K;break;case j.GREATER_EQUAL:n=Z;break;case j.LESS:n=Q;break;case j.LESS_EQUAL:n=J;break;case j.LOGICAL_AND:return e?et:tt;case j.LOGICAL_OR:return e?rt:nt;case j.MUL:n=ut;break;case j.PRELU:return e?pt:ft;case j.SQUARED_DIFFERENCE:n=mt;break;case j.SUB:n=gt}return`\n    ${n}\n    return resultTemp;\n  `}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
var yt;!function(t){t[t.ABS=0]="ABS",t[t.ACOS=1]="ACOS",t[t.ACOSH=2]="ACOSH",t[t.ASIN=3]="ASIN",t[t.ASINH=4]="ASINH",t[t.ATAN=5]="ATAN",t[t.ATANH=6]="ATANH",t[t.CEIL=7]="CEIL",t[t.COS=8]="COS",t[t.COSH=9]="COSH",t[t.ELU=10]="ELU",t[t.ERF=11]="ERF",t[t.EXP=12]="EXP",t[t.EXPM1=13]="EXPM1",t[t.FLOOR=14]="FLOOR",t[t.IS_FINITE=15]="IS_FINITE",t[t.IS_INF=16]="IS_INF",t[t.IS_NAN=17]="IS_NAN",t[t.LINEAR=18]="LINEAR",t[t.LOG=19]="LOG",t[t.LOG1P=20]="LOG1P",t[t.LOGICAL_NOT=21]="LOGICAL_NOT",t[t.NEG=22]="NEG",t[t.RELU=23]="RELU",t[t.RELU6=24]="RELU6",t[t.LEAKYRELU=25]="LEAKYRELU",t[t.RECIPROCAL=26]="RECIPROCAL",t[t.ROUND=27]="ROUND",t[t.RSQRT=28]="RSQRT",t[t.SELU=29]="SELU",t[t.SIGMOID=30]="SIGMOID",t[t.SIGN=31]="SIGN",t[t.SIN=32]="SIN",t[t.SINH=33]="SINH",t[t.SOFTPLUS=34]="SOFTPLUS",t[t.SQRT=35]="SQRT",t[t.SQUARE=36]="SQUARE",t[t.STEP=37]="STEP",t[t.TAN=38]="TAN",t[t.TANH=39]="TANH",t[t.TO_INT=40]="TO_INT"}(yt||(yt={}));const bt="return abs(a);",xt="\n  if (abs(a) > 1.) {\n    return uniforms.NAN;\n  }\n  return acos(a);\n",wt="\n  if (a < 1.) {\n    return uniforms.NAN;\n  }\n  return acosh(a);\n",_t="\n  if (abs(a) > 1.) {\n    return uniforms.NAN;\n  }\n  return asin(a);\n",St="return asinh(a);",Et="\n  if (isnan(a)) {\n    return uniforms.NAN;\n  }\n  return atan(a);\n",At="\n  if (abs(a) > 1.) {\n    return uniforms.NAN;\n  }\n  if (a == 1.) {\n    return uniforms.INFINITY;\n  }\n  if (a == -1.) {\n    return -uniforms.INFINITY;\n  }\n  return atanh(a);\n",Mt="return ceil(a);",Ct="return cos(a);",Tt="\n  let e2x = exp(-a);\n  return (e2x + 1.0 / e2x) / 2.0;\n",kt="return exp(a) - 1.0;",It="if (a >= 0.0) { return a; }  return (exp(a) - 1.0);",Nt="\n  var resFloat = exp(a) - vec4<f32>(1.0);\n  if (a.r >= 0.0) {\n    resFloat.r = a.r;\n  }\n  if (a.g >= 0.0) {\n    resFloat.g = a.g;\n  }\n  if (a.b >= 0.0) {\n    resFloat.b = a.b;\n  }\n  if (a.a >= 0.0) {\n    resFloat.a = a.a;\n  }\n  return resFloat;\n",Pt=`\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  let p = ${i.backend_util.ERF_P};\n  let a1 = ${i.backend_util.ERF_A1};\n  let a2 = ${i.backend_util.ERF_A2};\n  let a3 = ${i.backend_util.ERF_A3};\n  let a4 = ${i.backend_util.ERF_A4};\n  let a5 = ${i.backend_util.ERF_A5};\n\n  let sign = sign(a);\n  let absA = abs(a);\n  let t = 1.0 / (1.0 + p * absA);\n  return sign * (1.0 - (((((a5 * t + a4) * t) + a3) * t + a2) * t + a1) * t * exp(-absA * absA));\n`,Ot="return exp(a);",Lt="return floor(a);",Rt="return f32(!isnan(a) && !isinf(a));",Dt="return f32(isinf(a));",zt="return f32(isnan(a));",Ft="return a;",Bt="if (a < 0.0) { return uniforms.NAN; }\n  return log(a);",Ut="\n  if (isnan(a)) { return a; }\n  return log(1.0 + a);\n",jt="return f32(!(a >= 1.0));",Vt="return -a;",Ht="if (a < 0.0) { return uniforms.alpha * a; } return a;",Gt="\n  let aLessThanZero = vec4<f32>(a < vec4<f32>(0.0));\n  return (aLessThanZero * (uniforms.alpha * a)) + ((vec4<f32>(1.0) - aLessThanZero) * a);\n",Wt="return 1.0 / a;",Xt="return select(a, 0.0, a < 0.0);",Yt="return clamp(a, 0.0, 6.0);",qt="return clamp(a, vec4<f32>(0.0, 0.0, 0.0, 0.0), vec4<f32>(6.0, 6.0, 6.0, 6.0));",$t="\n  return select(a, vec4<f32>(0.0), a < vec4<f32>(0.0));\n",Kt="return round(a);",Zt="return inverseSqrt(a);",Qt=`\n  if (a >= 0.0) {\n    return ${i.backend_util.SELU_SCALE} * a;\n  } else {\n    return ${i.backend_util.SELU_SCALEALPHA} * (exp(a) - 1.0);\n  }\n`,Jt="return 1.0 / (1.0 + exp(-1.0 * a));",te="return sign(a);",ee="return sin(a);",ne="\n  let e2x = exp(a);\n  return (e2x - 1.0 / e2x) / 2.0;\n",re="\n  let epsilon = 1.1920928955078125e-7;\n  let threshold = log(epsilon) + 2.0;\n\n  let too_large = a > -threshold;\n  let too_small = a < threshold;\n  let exp_a = exp(a);\n\n  if (too_large) {\n    return a;\n  } else if (too_small) {\n    return exp_a;\n  } else {\n    return log(exp_a + 1.0);\n  }\n",ie="return sqrt(a);",oe="return a * a;",ae="\n  if (isnan(a)) {\n    return a;\n  }\n\n  return select(uniforms.stepAlpha, 1.0, a > 0.0);\n",se="return tan(a);",ue="\n  let e2x = exp(-2.0 * abs(a));\n  return sign(a) * (1.0 - e2x) / (1.0 + e2x);\n",le="return f32(i32((a)));";function ce(t,e){switch(t){case yt.ABS:return bt;case yt.ACOS:return xt;case yt.ACOSH:return wt;case yt.ASIN:return _t;case yt.ASINH:return St;case yt.ATAN:return Et;case yt.ATANH:return At;case yt.COS:return Ct;case yt.COSH:return Tt;case yt.CEIL:return Mt;case yt.ELU:return e?Nt:It;case yt.ERF:return Pt;case yt.EXP:return Ot;case yt.EXPM1:return kt;case yt.FLOOR:return Lt;case yt.IS_FINITE:return Rt;case yt.IS_INF:return Dt;case yt.IS_NAN:return zt;case yt.LINEAR:return Ft;case yt.LOG:return Bt;case yt.LOG1P:return Ut;case yt.LOGICAL_NOT:return jt;case yt.NEG:return Vt;case yt.LEAKYRELU:return e?Gt:Ht;case yt.RECIPROCAL:return Wt;case yt.RELU:return e?$t:Xt;case yt.RELU6:return e?qt:Yt;case yt.ROUND:return Kt;case yt.RSQRT:return Zt;case yt.SELU:return Qt;case yt.SIGMOID:return Jt;case yt.SIGN:return te;case yt.SIN:return ee;case yt.SINH:return ne;case yt.SOFTPLUS:return re;case yt.SQRT:return ie;case yt.SQUARE:return oe;case yt.STEP:return ae;case yt.TAN:return se;case yt.TANH:return ue;case yt.TO_INT:return le;default:throw new Error(`BinaryType ${t} is not implemented!`)}}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function he(t,e=!1,n=!1,r=3){if(null===t)return"";let i="";if("linear"===t)i=ce(yt.LINEAR);else if("relu"===t)i=ce(yt.RELU,n);else if("elu"===t)i=ce(yt.ELU,n);else if("relu6"===t)i=ce(yt.RELU6,n);else if("prelu"===t)i=vt(j.PRELU,n);else if("sigmoid"===t)i=ce(yt.SIGMOID,n);else{if("leakyrelu"!==t)throw new Error(`Activation ${t} has not been implemented for the WebGPU backend.`);i=ce(yt.LEAKYRELU,n)}const o=g(n?4:1);let a="";return a=e?`\n      fn activation(a : ${o}, coords : vec${r}<i32>) -> ${o} {\n        let b = getPreluActivationWeightsByOutputCoords(coords);\n        ${i}\n      }`:`\n      fn activation(a : ${o}, coords : vec${r}<i32>) -> ${o} {\n        ${i}\n      }`,a}function de(t,e){return`\n      ${t?"value = value + getBiasByOutputCoords(coords);":""}\n      ${e?"value = activation(value, coords);":""}\n      `}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function fe(t,e,n=!1,r=!1,o=!1,a=1){i.util.assert(t&&1===a||!t,(()=>`transposeA ${t} is not compatible with component size ${a}`));const s=`\n      ${t?"value = getA(batch, col, row);":"value = getA(batch, row, col);"}\n\n    `,u=e?"value = getB(batch, col, row);":"value = getB(batch, row, col);";return`\n  fn mm_readA(batch: i32, row: i32, col: i32) -> ${g(a)} {\n    var value = ${g(a)}(0.0);\n    ${n&&o?s:`\n    ${t?"if(row < uniforms.dimAOuter && col < uniforms.dimInner)":"if(row < uniforms.aShape[1] && col < uniforms.aShape[2])"}\n    {\n      ${s}\n    }\n    `}\n    return value;\n  }\n\n  fn mm_readB(batch: i32, row: i32, col: i32) -> ${g(a)} {\n    var value = ${g(a)}(0.0);\n    ${u}\n    return value;\n  }\n  `}function pe(t,e,n,r,i=!1,o=!1,a=!1,s=1){return`\n  ${fe(n,r,i,o,a,s)}\n  fn mm_write(batch: i32, row: i32, col: i32, valueIn: ${g(s)}) {\n    ${i&&o?"":"if (row < uniforms.dimAOuter && col < uniforms.dimBOuter)"}\n    {\n      var value = valueIn;\n      let coords = vec3<i32>(batch, row, col);\n      ${de(t,e)}\n      setOutputAtCoords(coords[0], coords[1], coords[2], value);\n    }\n  }\n  `}function me(t,e,n=!1,r=32,o=!1,a=32,s=!1){const u=e[1]*t[1],l=e[0]*t[0],c=n?u:r,h=n?r:u,d=c/e[0],f=r/e[1],p=t[1],m=t[0];return i.util.assert((n&&4===d&&4===t[1]||!n&&(3===d||4===d))&&c%e[0]==0&&r%e[1]==0&&4===t[0],(()=>`If transposeA ${n} is true, innerElementSize ${d} and workPerThread[1] ${t[1]} must be 4.\n          Otherwise, innerElementSize ${d} must be 3 or 4.\n      tileAWidth ${c} must be divisible by workgroupSize[0]${e[0]}. tileInner ${r} must be divisible by workgroupSize[1] ${e[1]}. colPerThread ${t[0]} must be 4.`)),`\n  var<workgroup> mm_Asub : array<array<vec${d}<f32>, ${c/d}>, ${h}>;\n  var<workgroup> mm_Bsub : array<array<vec4<f32>, ${l/t[0]}>, ${r}>;\n\n  ${b()} {\n    let localRow = i32(localId.y);\n    let tileRow = localRow * ${p};\n    let tileCol = i32(localId.x);\n\n    let globalRow = i32(globalId.y) * ${p};\n    let globalCol = i32(globalId.x) * ${m};\n    let batch = ${o?"0":"i32(globalId.z)"};\n    let batchA = ${o||!s?"batch":"batch % uniforms.aShape[0]"};\n    let batchB = ${o||!s?"batch":"batch % uniforms.bShape[0]"};\n    let globalRowStart = i32(workgroupId.y) * ${u};\n\n    let numTiles = ${o?`${Math.ceil(a/r)}`:`(uniforms.dimInner - 1) / ${r} + 1`};\n    var kStart = ${o?`i32(globalId.z) * ${a}`:"0"};\n\n    var acc: array<vec4<f32>, ${p}>;\n\n    // Loop over shared dimension.\n    let tileRowB = localRow * ${f};\n    for (var t = 0; t < numTiles; t++) {\n        // Load one tile of A into local memory.\n        for (var innerRow = 0; innerRow < ${p}; innerRow++) {\n            let inputRow = tileRow + innerRow;\n            let inputCol = tileCol;\n            ${((t,e)=>t?`\n        mm_Asub[inputRow][inputCol] = mm_readA(batchA,\n          kStart + inputRow,\n          globalRowStart + inputCol * ${e});\n        `:`\n        mm_Asub[inputRow][inputCol] = mm_readA(batchA,\n          globalRow + innerRow,\n          kStart + inputCol * ${e});\n        `)(n,d)}\n        }\n\n        // Load one tile of B into local memory.\n        for (var innerRow = 0; innerRow < ${f}; innerRow++) {\n            let inputRow = tileRowB + innerRow;\n            let inputCol = tileCol;\n            mm_Bsub[inputRow][inputCol] = mm_readB(batchB, kStart + inputRow, globalCol);\n        }\n        kStart = kStart + ${r};\n        workgroupBarrier();\n\n        // Compute acc values for a single thread.\n        ${((t,e,n,r)=>{if(t)return`\n      for (var k = 0; k < ${r}; k++) {\n        let BCached0 = mm_Bsub[k][tileCol];\n        let ACached0 = mm_Asub[k][localRow];\n        for (var i = 0; i < ${n}; i++) {\n          acc[i] = fma(BCached0, vec4<f32>(ACached0[i]), acc[i]);\n        }\n      }`;{let t="",i="";for(let n=0;n<e;n++)t+=`let BCached${n} = mm_Bsub[k * ${e} + ${n}][tileCol];`,i+=`acc[i] = fma(BCached${n}, vec4<f32>(ACached[${n}]), acc[i]);`;return`\n      for (var k = 0; k < ${r/e}; k++) {\n        ${t}\n        for (var i = 0; i < ${n}; i++) {\n          let ACached = mm_Asub[tileRow + i][k];\n          ${i}\n        }\n      }`}})(n,d,p,r)}\n        workgroupBarrier();\n    }\n\n    for (var innerRow = 0; innerRow < ${p}; innerRow++) {\n        mm_write(batch, globalRow + innerRow, globalCol, acc[innerRow]);\n    }\n  }`}const ge=t=>t?"\n        mm_Asub[inputRow][inputCol] = mm_readA(batchA,\n          kStart + inputRow,\n          globalRowStart + inputCol);\n        ":"\n        mm_Asub[inputRow][inputCol] = mm_readA(batchA,\n          globalRowStart + inputRow,\n          kStart + inputCol);\n        ";function ve(t,e,n=!1,r=32,o=!1,a=32,s=!1,u=!1){const l=t[1]*e[1],c=t[0]*e[0],h=n?l:r,d=n?r:l;i.util.assert(d%e[1]==0&&h%e[0]==0&&r%e[1]==0,(()=>`tileAHight ${d} must be divisible by workgroupSize[1]${e[1]}, tileAWidth ${h} must be divisible by workgroupSize[0]${e[0]}, tileInner ${r} must be divisible by workgroupSize[1]${e[1]}`));const f=d/e[1],p=h/e[0],m=r/e[1],g=t[1],v=t[0],y=s?`\n      let localRow = i32(localId.y);\n      let localCol = i32(localId.x);\n      let globalRowStart = i32(workgroupId.y) * ${l};\n      let globalColStart = i32(workgroupId.x) * ${c};\n\n      // Loop over shared dimension.\n      for (var t = 0; t < numTiles; t++) {\n        // Load one tile of A into local memory.\n        for (var inputRow = localRow; inputRow < ${d}; inputRow = inputRow + ${e[1]}) {\n          for (var inputCol = localCol; inputCol < ${h}; inputCol = inputCol + ${e[0]}) {\n            ${ge(n)}\n          }\n        }\n        // Load one tile of B into local memory.\n        for (var inputRow = localRow; inputRow < ${r}; inputRow = inputRow + ${e[1]}) {\n              for (var inputCol = localCol; inputCol < ${c}; inputCol = inputCol + ${e[0]}) {\n            mm_Bsub[inputRow][inputCol] = mm_readB(batchB,\n              kStart + inputRow,\n              globalColStart + inputCol);\n          }\n        }\n        kStart = kStart + ${r};\n        workgroupBarrier();\n\n        // Compute acc values for a single thread.\n        var BCached : array<f32, ${v}>;\n        for (var k = 0; k < ${r}; k++) {\n          for (var inner = 0; inner < ${v}; inner++) {\n            BCached[inner] = mm_Bsub[k][localCol + inner * ${e[0]}];\n          }\n          for (var innerRow = 0; innerRow < ${g}; innerRow++) {\n            let ACached = ${n?`mm_Asub[k][localRow + innerRow * ${e[1]}];`:`mm_Asub[localRow + innerRow * ${e[1]}][k];`}\n            for (var innerCol = 0; innerCol < ${v}; innerCol++) {\n              acc[innerRow][innerCol] =\n                  fma(ACached, BCached[innerCol], acc[innerRow][innerCol]);\n            }\n          }\n        }\n        workgroupBarrier();\n      }\n      for (var innerRow = 0; innerRow < ${g}; innerRow++) {\n        let gRow = globalRowStart + localRow + innerRow * ${e[1]};\n        for (var innerCol = 0; innerCol < ${v}; innerCol++) {\n          let gCol = globalColStart + localCol + innerCol * ${e[0]};\n          mm_write(batch, gRow, gCol, acc[innerRow][innerCol]);\n        }\n      }\n      `:`\n  let tileRow = i32(localId.y) * ${g};\n  let tileCol = i32(localId.x) * ${v};\n\n  let globalRow = i32(globalId.y) * ${g};\n  let globalCol = i32(globalId.x) * ${v};\n  let globalRowStart = i32(workgroupId.y) * ${l};\n\n  let tileRowA = i32(localId.y) * ${f};\n  let tileColA = i32(localId.x) * ${p};\n  let tileRowB = i32(localId.y) * ${m};\n  // Loop over shared dimension.\n  for (var t = 0; t < numTiles; t++) {\n    // Load one tile of A into local memory.\n    for (var innerRow = 0; innerRow < ${f}; innerRow++) {\n      for (var innerCol = 0; innerCol < ${p}; innerCol++) {\n        let inputRow = tileRowA + innerRow;\n        let inputCol = tileColA + innerCol;\n        ${ge(n)}\n      }\n    }\n\n    // Load one tile of B into local memory.\n    for (var innerRow = 0; innerRow < ${m}; innerRow++) {\n      for (var innerCol = 0; innerCol < ${v}; innerCol++) {\n        let inputRow = tileRowB + innerRow;\n        let inputCol = tileCol + innerCol;\n        mm_Bsub[inputRow][inputCol] = mm_readB(batchB,\n          kStart + inputRow,\n          globalCol + innerCol);\n      }\n    }\n    kStart = kStart + ${r};\n    workgroupBarrier();\n\n    // Compute acc values for a single thread.\n    var BCached : array<f32, ${v}>;\n    for (var k = 0; k < ${r}; k++) {\n      for (var inner = 0; inner < ${v}; inner++) {\n        BCached[inner] = mm_Bsub[k][tileCol + inner];\n      }\n\n      for (var innerRow = 0; innerRow < ${g}; innerRow++) {\n        ${(t=>t?"let ACached = mm_Asub[k][tileRow + innerRow];":"let ACached = mm_Asub[tileRow + innerRow][k];")(n)}\n        for (var innerCol = 0; innerCol < ${v}; innerCol++) {\n          acc[innerRow][innerCol] =\n              fma(ACached, BCached[innerCol], acc[innerRow][innerCol]);\n        }\n      }\n    }\n\n    workgroupBarrier();\n  }\n\n  for (var innerRow = 0; innerRow < ${g}; innerRow++) {\n    for (var innerCol = 0; innerCol < ${v}; innerCol++) {\n      mm_write(batch, globalRow + innerRow, globalCol + innerCol,\n          acc[innerRow][innerCol]);\n    }\n  }\n  `;return`\n    var<workgroup> mm_Asub : array<array<f32, ${h}>, ${d}>;\n    var<workgroup> mm_Bsub : array<array<f32, ${c}>, ${r}>;\n\n    ${b()} {\n      let batch = ${o?"0":"i32(globalId.z)"};\n      let batchA = ${o||!u?"batch":"batch % uniforms.aShape[0]"};\n      let batchB = ${o||!u?"batch":"batch % uniforms.bShape[0]"};\n      let numTiles = ${o?`${Math.ceil(a/r)}`:`(uniforms.dimInner - 1) / ${r} + 1`};\n      var kStart = ${o?`i32(globalId.z) * ${a}`:"0"};\n\n      var acc : array<array<f32, ${v}>, ${g}>;\n\n      // Without this initialization strange values show up in acc.\n      for (var innerRow = 0; innerRow < ${g}; innerRow++) {\n        for (var innerCol = 0; innerCol < ${v}; innerCol++) {\n          acc[innerRow][innerCol] = 0.0;\n        }\n      }\n      ${y}\n    }\n  `}class ye{constructor(t,e,n=!1,r=!1,i=null,o=null,a=null,s=!1){this.variableNames=["A","B"],this.uniforms="dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.outputShape=e,this.dispatchLayout={x:[2],y:[1],z:[0]};const u=n?t[1]:t[2];if(this.isVec4=(u%4==0&&!n||e[1]%4==0&&n)&&e[2]%4==0&&!r,this.outputComponent=this.isVec4?4:1,this.isVectorA=1===e[1]&&!n,!this.isVec4&&this.isVectorA)this.elementsPerThread=[1,1,1],this.workgroupSize=[32,1,1];else{const t=N(e[1],u,e[2],n);this.workgroupSize=t.workgroupSize,this.elementsPerThread=t.elementsPerThread}this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize,this.elementsPerThread);const l=null!=i,c=null!=a;l&&this.variableNames.push("bias"),c&&this.variableNames.push("preluActivationWeights"),this.sequentialAccessByThreads=s,this.transposeA=n,this.transposeB=r,this.addBias=l,this.activation=o,this.hasPreluActivationWeights=c,[this.fitAOuter,this.fitBOuter,this.fitInner]=this.getShapeFit(e[1],e[2],u),this.shaderKey=`matMulPacked_${this.elementsPerThread}_${n}_${r}_${this.activation}_${this.fitAOuter}_${this.fitBOuter}_${this.fitInner}_${this.isVec4}_${this.isVectorA}_${this.sequentialAccessByThreads}`}getShapeFit(t,e,n){const r=this.workgroupSize[1]*this.elementsPerThread[1],i=this.workgroupSize[0]*this.elementsPerThread[0];!this.isVec4&&this.isVectorA?this.tileInner=4*this.workgroupSize[0]:this.tileInner=i;return[t%r==0,e%i==0,n%this.tileInner==0]}getUserCode(){const t=`\n      ${he(this.activation,this.hasPreluActivationWeights,this.isVec4)}\n      ${pe(this.addBias,this.activation,!1,this.transposeB,this.fitAOuter,this.fitBOuter,this.fitInner,this.isVec4?4:1)}\n      ${this.isVec4?me(this.elementsPerThread,this.workgroupSize,this.transposeA,this.tileInner,!1,null,!0):this.isVectorA?function(t,e=!1){i.util.assert(1===t[1]&&1===t[2],(()=>`A linear work group size is required. But got ${t}.`));const n=4*t[0];return`\n    var<workgroup> mm_Asub : array<vec4<f32>, ${t[0]}>;\n\n    ${b()} {\n      let tileCol = i32(localId.x);\n      let globalCol = i32(globalId.x);\n      let globalRow = i32(globalId.y);\n\n      let numTiles = (uniforms.dimInner - 1) / ${n} + 1;\n      let batch = i32(globalId.z);\n      let batchA = batch % uniforms.aShape[0];\n      let batchB = batch % uniforms.bShape[0];\n      // Without this initialization strange values show up in acc.\n      var acc = 0.0;\n\n      // Loop over shared dimension.\n      for (var t = 0; t < numTiles; t++) {\n        // Load one tile of A into local memory.\n        let colA = t * ${n} + tileCol * 4;\n        mm_Asub[tileCol] = vec4<f32>(${(t=>t?"\n      mm_readA(batchA, colA, globalRow),\n      mm_readA(batchA, colA + 1, globalRow),\n      mm_readA(batchA, colA + 2, globalRow),\n      mm_readA(batchA, colA + 3, globalRow)\n  ":"\n      mm_readA(batchA, globalRow, colA),\n      mm_readA(batchA, globalRow, colA + 1),\n      mm_readA(batchA, globalRow, colA + 2),\n      mm_readA(batchA, globalRow, colA + 3)\n  ")(e)});\n        workgroupBarrier();\n\n        // Compute acc values for a single thread.\n        for (var k = 0; k < ${n/4}; k++) {\n          let rowB = t * ${n} + k * 4;\n          let BCached = vec4<f32>(mm_readB(batchB, rowB, globalCol),\n                              mm_readB(batchB, rowB + 1, globalCol),\n                              mm_readB(batchB, rowB + 2, globalCol),\n                              mm_readB(batchB, rowB + 3, globalCol));\n\n          let ACached = mm_Asub[k];\n          acc = acc + dot(ACached, BCached);\n        }\n\n        workgroupBarrier();\n      }\n\n      mm_write(batch, globalRow, globalCol, acc);\n    }\n  `}(this.workgroupSize,this.transposeA):ve(this.elementsPerThread,this.workgroupSize,this.transposeA,this.tileInner,!1,null,this.sequentialAccessByThreads,!0)}\n    `;return t}}class be{constructor(t,e=!1,n=!1,r=null,i=null,o=null){this.variableNames=["A","B"],this.uniforms="dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.workgroupSize=[256,1,1],this.outputShape=t,this.dispatchLayout={x:[],y:[1,2],z:[0]},this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize);const a=null!=r,s=null!=o;a&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),this.transposeA=e,this.transposeB=n,this.addBias=a,this.activation=i,this.hasPreluActivationWeights=s,this.shaderKey=`matMulReduce_${this.activation}_${e}_${n}`}getUserCode(){
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
var t;return`\n      ${he(this.activation,this.hasPreluActivationWeights)}\n      ${pe(this.addBias,this.activation,this.transposeA,this.transposeB)}\n      ${t=this.workgroupSize[0],`\n    var<workgroup> sumValues : array<f32, ${t}>;\n    ${b()} {\n      let coords = getOutputCoords();\n      let batch = coords[0];\n      let batchA = batch % uniforms.aShape[0];\n      let batchB = batch % uniforms.bShape[0];\n      let row = coords[1];\n      let col = coords[2];\n      var sum = 0.0;\n      let Length = uniforms.dimInner;\n      for (var k = i32(localId.x); k < Length; k = k + ${t}) {\n        let dataA = mm_readA(batchA, row, k);\n        let dataB = mm_readB(batchB, k, col);\n        sum = sum + dataA * dataB;\n      }\n      sumValues[localId.x] = sum;\n      workgroupBarrier();\n\n      for(var currentSize = ${t/2}u; currentSize > 1u;\n          currentSize = currentSize / 2u) {\n        if (localId.x < currentSize)\n        {\n          sumValues[localId.x] = sumValues[localId.x] + sumValues[localId.x + currentSize];\n        }\n        workgroupBarrier();\n      }\n\n      if (localId.x == 0u) {\n        sum = sumValues[0] + sumValues[1];\n        mm_write(batch, row, col, sum);\n      }\n    }\n  `}\n    `}}class xe{constructor(t,e,n,r=!1,i=!1,o=null,a=null,s=null){this.variableNames=["A","B"],this.uniforms="dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.workgroupSize=[16,8,1],this.outputShape=n,this.dispatchLayout={x:[2],y:[1],z:[0]},this.dispatch=[Math.ceil(n[2]/this.workgroupSize[0]),Math.ceil(n[1]/this.workgroupSize[1]),n[0]];const u=null!=o;u&&this.variableNames.push("bias");const l=null!=s;l&&this.variableNames.push("preluActivationWeights"),this.transposeA=r,this.transposeB=i,this.addBias=u,this.activation=a,this.hasPreluActivationWeights=l,this.shaderKey=`matMulSmallOutputSize_${this.activation}_${r}_${i}`}getUserCode(){return`\n      ${he(this.activation,this.hasPreluActivationWeights)}\n      ${pe(this.addBias,this.activation,this.transposeA,this.transposeB)}\n      ${
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const e=t[1],n=t[0],r=e>n?e:n;return`\n  var<workgroup> mm_Asub : array<array<f32, ${r}>, ${e}>;\n  var<workgroup> mm_Bsub : array<array<f32, ${n}>, ${r}>;\n\n  // If the output size is small for matrix multiplication, avoid to use vec4\n  // and handle some elements per thread to optimally utilize the ALU.\n  // Read data from global memory to registers firstly, then store them into\n  // shared memory, so it is instruction-Level parallelism for arithmetic\n  // operations and others handle IO operations between barrier api, makes ALU\n  // and load/store units work simultaneously, could improves the performance.\n  ${b()} {\n    let tileRow = i32(localId.y);\n    let tileCol = i32(localId.x);\n    let globalRow = i32(globalId.y);\n    let globalCol = i32(globalId.x);\n    let batch = i32(globalId.z);\n    let batchA = batch % uniforms.aShape[0];\n    let batchB = batch % uniforms.bShape[0];\n\n    // uniforms.dimInner should be greater than 0.\n    let numTiles = (uniforms.dimInner - 1) / ${r} + 1;\n    var acc = 0.0;\n\n    var globalColA = tileCol;\n    var globalRowB = 0;\n    var regA = mm_readA(batchA, globalRow, globalColA);\n    var regB0 = mm_readB(batchB, globalRowB + 2 * tileRow, globalCol);\n    var regB1 = mm_readB(batchB, globalRowB + 2 * tileRow + 1, globalCol);\n    globalColA = globalColA + ${r};\n    globalRowB = globalRowB + ${r};\n\n    for (var t = 0; t < numTiles; t = t + 1) {\n      mm_Asub[tileRow][tileCol] = regA;\n      mm_Bsub[2 * tileRow][tileCol] = regB0;\n      mm_Bsub[2 * tileRow + 1][tileCol] = regB1;\n\n      workgroupBarrier();\n\n      regA = mm_readA(batchA, globalRow, globalColA);\n      regB0 = mm_readB(batchB, globalRowB + 2 * tileRow, globalCol);\n      regB1 = mm_readB(batchB, globalRowB + 2 * tileRow + 1, globalCol);\n      globalColA = globalColA + ${r};\n      globalRowB = globalRowB + ${r};\n\n      for (var k = 0; k < ${r}; k = k + 1) {\n        acc = acc + mm_Asub[tileRow][k] * mm_Bsub[k][tileCol];\n      }\n      workgroupBarrier();\n    }\n\n    mm_write(batch, globalRow, globalCol, acc);\n  }\n  `}(this.workgroupSize)}\n    `}}
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class we{constructor(t,e,n=!1,r=!1){this.variableNames=["A","B"],this.uniforms="dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.workgroupSize=[8,8,1],this.atomic=!0,this.splitedDimInner=128,i.util.assert(1===t[0],(()=>"MatMulSplitKProgram only supports batch = 1.")),this.outputShape=t,this.dispatchLayout={x:[2],y:[1],z:[0,3]};const o=(n&&this.outputShape[1]%4==0||!n&&e%4==0)&&this.outputShape[2]%4==0;this.elementsPerThread=[4,4,this.splitedDimInner],this.outputComponent=o?4:1,o||(this.outputShape[1]<16&&(this.elementsPerThread[1]=1),this.outputShape[2]<16&&(this.elementsPerThread[0]=1)),this.dispatch=I(this.dispatchLayout,[this.outputShape[0],this.outputShape[1],this.outputShape[2],e],this.workgroupSize,this.elementsPerThread),this.transposeA=n,this.transposeB=r,this.shaderKey=`matMulSplitK_${n}_${r}_${this.elementsPerThread}_${this.outputComponent}`}getUserCode(){const t=this.outputComponent;return`\n      ${fe(!1,this.transposeB,!1,!1,!1,t)}\n      fn mm_write(batch: i32, row : i32, col : i32, value : ${g(t)}) {\n        if (row < uniforms.dimAOuter && col < uniforms.dimBOuter) {\n          let coords = vec3<i32>(batch, row, col);\n          let flatIndex = getOutputIndexFromCoords(coords);\n          // The problem is that we should initialize output to zero before using.\n          // Otherwise, the original value will be added to the result.\n          for (var i = 0; i < ${t}; i = i + 1) {\n            ${f("&result[flatIndex + i]",""+(t>1?"value[i]":"value"),"float32")}\n          }\n        }\n      }\n      ${4===t?me(this.elementsPerThread,this.workgroupSize,this.transposeA,32,!0,this.splitedDimInner):ve(this.elementsPerThread,this.workgroupSize,this.transposeA,32,!0,this.splitedDimInner)}\n    `}}class _e{constructor(t,e=null,n=null,r=null){this.uniforms="",this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.addBias=null!=e,this.hasPreluActivationWeights=null!=r,this.activation=n,this.addBias&&this.variableNames.push("bias"),this.hasPreluActivationWeights&&this.variableNames.push("preluActivationWeights"),this.shaderKey=`biasActivation_${n}`}getUserCode(){return`\n    ${he(this.activation,this.hasPreluActivationWeights)}\n    ${b("index")} {\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        var value = getXByOutputIndex(index);\n        ${de(this.addBias,this.activation)}\n        setOutputAtIndex(index, value);\n      }\n    }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Se{constructor(t){this.variableNames=[],this.outputShape=[],this.uniforms="value : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="fill"}getUserCode(){return`\n    ${b("index")} {\n      if (index < uniforms.size) {\n        setOutputAtIndex(index, uniforms.value);\n      }\n    }\n  `}}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ee(t){const{backend:e,attrs:n}=t,{shape:r,value:o}=n;let{dtype:a}=n;if(a=a||i.util.inferDtype(o),"string"===a){const t=i.util.getArrayFromDType(a,i.util.sizeFromShape(r));return t.fill(o),e.makeTensorInfo(r,a,t)}{const t=new Se(r),n=[{type:"float32",data:[o]}];return e.runWebGPUProgram(t,[],a,n)}}const Ae={kernelName:i.Fill,backendName:"webgpu",kernelFunc:Ee};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Me(t){const{inputs:e,attrs:n}=t,{x:r}=e,{shape:o}=n,a=i.util.sizeFromShape(r.shape),s=i.util.inferFromImplicitShape(o,a),u=i.util.sizeFromShape(s);return i.util.assert(a===u,(()=>`The new shape (${s}) has ${u} elements and the old shape (${r.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`)),t.backend.incRef(r.dataId),{dataId:r.dataId,shape:s,dtype:r.dtype}}const Ce={kernelName:i.Reshape,backendName:"webgpu",kernelFunc:Me};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Te({a:t,b:e,transposeA:n,transposeB:r,backend:o,bias:a=null,preluActivationWeights:s=null,leakyreluAlpha:u=0,activation:l=null}){const c=t.shape.length,h=e.shape.length,d=n?t.shape[c-2]:t.shape[c-1],f=r?e.shape[h-1]:e.shape[h-2],p=n?t.shape[c-1]:t.shape[c-2],m=r?e.shape[h-2]:e.shape[h-1],g=t.shape.slice(0,-2),v=e.shape.slice(0,-2),y=i.util.sizeFromShape(g),b=i.util.sizeFromShape(v),x=i.broadcast_util.assertAndGetBroadcastShape(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([p,m]);i.util.assert(d===f,(()=>`Error in matMul: inner shapes (${d}) and (${f}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`));const w=n?[y,d,p]:[y,p,d],_=r?[b,m,f]:[b,f,m],S=Me({inputs:{x:t},backend:o,attrs:{shape:w}}),E=Me({inputs:{x:e},backend:o,attrs:{shape:_}}),A=[S,E],M=Math.max(y,b),C=[S,E],T=[{type:"int32",data:[p]},{type:"int32",data:[m]},{type:"int32",data:[d]}];let k,I;const N=[M,p,m];let P=(0,i.env)().get("WEBGPU_MATMUL_PROGRAM_TYPE");if(P<0){const t=(0,i.env)().getNumber("WEBGPU_THRESHOLD_TO_INCREASE_WORKGROUPS_FOR_MATMUL"),e=t>0?t:o.thresholdToIncreaseWorkgroups,n=M*Math.ceil(p/32)*Math.ceil(m/32);P=n<=e||p<=8&&n<=2*e?M*p*m<=128?F.MatMulReduceProgram:1===M&&f>=2e3?F.MatMulSplitKProgram:F.MatMulSmallOutputSizeProgram:F.MatMulPackedProgram}switch(P){case F.MatMulReduceProgram:k=new be(N,n,r,a,l,s);break;case F.MatMulSplitKProgram:if(I=Ee({backend:o,attrs:{shape:N,value:0,dtype:t.dtype}}),k=new we(N,f,n,r),a||l){I=o.runWebGPUProgram(k,C,t.dtype,T,I);const e=new _e(I.shape,a,l,s);let n=null;const r=[I];a&&r.push(a),s&&r.push(s),"leakyrelu"===l&&(n=[{type:"float32",data:[u]}],e.uniforms+=" alpha : f32,");const i=o.runWebGPUProgram(e,r,I.dtype,n);A.push(I);const c=Me({inputs:{x:i},backend:o,attrs:{shape:x}});A.push(i);for(const t of A)o.disposeData(t.dataId);return c}break;case F.MatMulSmallOutputSizeProgram:k=new xe(w,_,N,n,r,a,l,s);break;case F.MatMulPackedProgram:const e=o.adapterInfo.isIntel();k=new ye(w,N,n,r,a,l,s,e);break;default:throw new Error(`Unsupported MatMulProgramType ${P}.`)}a&&C.push(a),s&&C.push(s),"leakyrelu"===l&&(T.push({type:"float32",data:[u]}),k.uniforms+=" alpha : f32,"),I=o.runWebGPUProgram(k,C,t.dtype,T,I);const O=Me({inputs:{x:I},backend:o,attrs:{shape:x}});A.push(I);for(const t of A)o.disposeData(t.dataId);return O}const ke={kernelName:i._FusedMatMul,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:o,bias:a,preluActivationWeights:s}=e,{transposeA:u,transposeB:l,activation:c,leakyreluAlpha:h}=r;return Te({a:i,b:o,transposeA:u,transposeB:l,backend:n,bias:a,preluActivationWeights:s,leakyreluAlpha:h,activation:c})}};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Ie{constructor(t,e,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.workgroupSize=[128,1,1],this.size=!0,this.outputShape=i.backend_util.assertAndGetBroadcastShape(e,n),this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey=`binaryOpComplex_${t}`,this.op=t}getUserCode(){return`\n      fn binaryOpComplex(\n          areal : f32, aimag : f32, breal : f32, bimag : f32) -> f32 {\n        ${vt(this.op,!1)}\n      }\n\n      ${b("index")} {\n        if(index < uniforms.size) {\n          let areal = getARealByOutputIndex(index);\n          let aimag = getAImagByOutputIndex(index);\n          let breal = getBRealByOutputIndex(index);\n          let bimag = getBImagByOutputIndex(index);\n          setOutputAtIndex(index, binaryOpComplex(areal, aimag, breal, bimag));\n        }\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Ne{constructor(t,e,n){if(this.size=!0,this.variableNames=["A","B"],this.outputShape=i.backend_util.assertAndGetBroadcastShape(e,n),this.dispatchLayout=L(this.outputShape),this.op=t,this.useSharedMemoryWithA=e.length<=1&&n.length>1&&e[0]<128,this.useSharedMemoryWithB=n.length<=1&&e.length>1&&n[0]<128,this.useSharedMemoryWithA||this.useSharedMemoryWithB)this.outputComponent=1,this.variableComponents=[1,1],this.lastDimensionSize=this.useSharedMemoryWithB?n[0]:e[0],this.shaderKey=`binary_${t}_${this.lastDimensionSize}`,this.type="shared",this.workgroupSize=[256,1,1];else{const r=e.length>0&&e[e.length-1]%4==0,o=n.length>0&&n[n.length-1]%4==0;r&&o?(this.outputComponent=4,this.variableComponents=[4,4]):r&&(i.util.isScalarShape(n)||1===n[n.length-1])||o&&(i.util.isScalarShape(e)||1===e[e.length-1])?(this.outputComponent=4,this.variableComponents=r?[4,1]:[1,4]):(this.outputComponent=1,this.variableComponents=[1,1]),this.type="nonshared",this.shaderKey=`binary_${t}_${this.variableComponents}`,this.workgroupSize=[128,1,1]}this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.outputComponent,1,1])}getUserCode(){let t;const e=4===this.outputComponent?"vec4<f32>":"f32",n=`\n    fn binaryOperation(a : ${e}, b : ${e}) -> ${e} {\n      ${vt(this.op,4===this.outputComponent)}\n    };\n    `;if("shared"===this.type){const e=this.lastDimensionSize>1?`coords[${this.outputShape.length-1}]`:"0",r=this.useSharedMemoryWithB?`let a = getAByOutputIndex(index);\n          let b = sharedBuf[${e}];`:`let a = sharedBuf[${e}];\n          let b = getBByOutputIndex(index);`;t=`\n        ${n}\n        var<workgroup> sharedBuf : array<f32, ${this.lastDimensionSize}>;\n        ${b("index")} {\n          // Fill in the shared memory buffer.\n          let localIndex = i32(localId.x);\n          if(localIndex < ${this.lastDimensionSize}) {\n            sharedBuf[localIndex] = f32(${this.useSharedMemoryWithB?"B":"A"}[localIndex]);\n          }\n          workgroupBarrier();\n\n          if(index < uniforms.size) {\n            let coords = getCoordsFromIndex(index);\n            ${r}\n            setOutputAtIndex(index, binaryOperation(a, b));\n          }\n        }\n        `}else t=`\n       ${n}\n       ${b("index")} {\n         if (index < uniforms.size) {\n           let coords = getCoordsFromIndex(index * ${this.outputComponent});\n           let a = ${e}(getAByOutputCoords(coords));\n           let b = ${e}(getBByOutputCoords(coords));\n           setOutputAtIndex(index, binaryOperation(a, b));\n         }\n       }\n       `;return t}}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Pe(t){const{inputs:e}=t,{x:n}=e;return t.backend.incRef(n.dataId),{dataId:n.dataId,shape:n.shape,dtype:n.dtype}}const Oe={kernelName:i.Identity,backendName:"webgpu",kernelFunc:Pe};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Le(t){const{inputs:e,backend:n}=t,{real:r,imag:i}=e,o=n.makeTensorInfo(r.shape,"complex64"),a=n.tensorMap.get(o.dataId),s=Pe({inputs:{x:r},backend:n}),u=Pe({inputs:{x:i},backend:n});return a.complexTensorInfos={real:s,imag:u},o}const Re={kernelName:i.Complex,backendName:"webgpu",kernelFunc:Le};
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class De{constructor(t,e,n=""){this.variableNames=["A"],this.size=!0;this.workgroupSize=[128,1,1],this.outputShape=t,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.op=e,""!==n&&(this.uniforms=n),this.shaderKey=`unary_${e}`}getUserCode(){return`\n      fn unaryOperation(a : f32) -> f32 {\n        ${ce(this.op,!1)}\n      }\n      ${b("index")} {\n        if (index < uniforms.size) {\n          let a = getAByOutputIndex(index);\n          setOutputAtIndex(index, unaryOperation(a));\n        }\n      }\n      `}}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ze({opType:t,cpuKernelImpl:e,dtype:n}){return({inputs:r,backend:i})=>{const{x:o}=r,a=i,s=n||o.dtype;if(a.shouldExecuteOnCPU([o])&&null!=e){const t=a.tensorMap.get(o.dataId),n=e(t.values,s);return a.makeTensorInfo(o.shape,s,n)}const u=new De(o.shape,t);return a.runWebGPUProgram(u,[o],s)}}function Fe({opType:t,cpuKernelImpl:e,supportsComplex:n=!1,dtype:r}){return({inputs:o,backend:a})=>{const{a:s,b:u}=o,l=a;if(n&&"complex64"===s.dtype){const e=l.tensorMap.get(s.dataId),n=l.tensorMap.get(u.dataId);let r,o;if(t!==j.MUL)[r,o]=[[e.complexTensorInfos.real,n.complexTensorInfos.real],[e.complexTensorInfos.imag,n.complexTensorInfos.imag]].map((e=>{const[n,r]=e,o={dataId:n.dataId,dtype:n.dtype,shape:s.shape},a={dataId:r.dataId,dtype:r.dtype,shape:u.shape},c=new Ne(t,s.shape,u.shape);return l.runWebGPUProgram(c,[o,a],(0,i.upcastType)(n.dtype,r.dtype))}));else{const t=new Ie(j.COMPLEX_MULTIPLY_REAL,s.shape,u.shape),i=new Ie(j.COMPLEX_MULTIPLY_IMAG,s.shape,u.shape),a=[{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:s.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:s.shape},{dataId:n.complexTensorInfos.real.dataId,dtype:n.complexTensorInfos.real.dtype,shape:u.shape},{dataId:n.complexTensorInfos.imag.dataId,dtype:n.complexTensorInfos.imag.dtype,shape:u.shape}];r=l.runWebGPUProgram(t,a,"float32"),o=l.runWebGPUProgram(i,a,"float32")}const a=Le({inputs:{real:r,imag:o},backend:l});return l.disposeData(r.dataId),l.disposeData(o.dataId),a}const c=r||(0,i.upcastType)(s.dtype,u.dtype);if(("string"===s.dtype||"string"===u.dtype||l.shouldExecuteOnCPU([s,u]))&&null!=e){const t=l.tensorMap.get(s.dataId).values,n=l.tensorMap.get(u.dataId).values,r="string"===s.dtype?i.backend_util.fromUint8ToStringArray(t):t,o="string"===s.dtype?i.backend_util.fromUint8ToStringArray(n):n,[a,h]=e(s.shape,u.shape,r,o,c);return l.makeTensorInfo(h,c,a)}const h=new Ne(t,s.shape,u.shape);return l.runWebGPUProgram(h,[s,u],c)}}var Be=n(67466);
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const{addImpl:Ue,castImpl:je,ceilImpl:Ve,concatImpl:He,equalImpl:Ge,expImpl:We,expm1Impl:Xe,floorImpl:Ye,floorDivImpl:qe,gatherNdImpl:$e,gatherV2Impl:Ke,greaterEqualImpl:Ze,greaterImpl:Qe,lessEqualImpl:Je,lessImpl:tn,logImpl:en,maxImpl:nn,maximumImpl:rn,minimumImpl:on,multiplyImpl:an,negImpl:sn,notEqualImpl:un,prodImpl:ln,rangeImpl:cn,rsqrtImpl:hn,scatterImpl:dn,simpleAbsImpl:fn,sliceImpl:pn,stridedSliceImpl:mn,stringNGramsImpl:gn,subImpl:vn,tileImpl:yn,topKImpl:bn,transposeImpl:xn,uniqueImpl:wn}=Be,_n=ze({opType:yt.ABS,cpuKernelImpl:fn}),Sn={kernelName:i.Abs,backendName:"webgpu",kernelFunc:_n},En=ze({opType:yt.ACOS}),An={kernelName:i.Acos,backendName:"webgpu",kernelFunc:En},Mn=ze({opType:yt.ACOSH}),Cn={kernelName:i.Acosh,backendName:"webgpu",kernelFunc:Mn},Tn=Fe({opType:j.ADD,cpuKernelImpl:Ue,supportsComplex:!0}),kn={kernelName:i.Add,backendName:"webgpu",kernelFunc:Tn};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class In{constructor(t){this.workPerThread=1,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t[0],this.variableNames=t.map(((t,e)=>`T${e}`)),this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.workPerThread,1,1]),this.shaderKey="addN"}getUserCode(){const t=[];this.variableNames.forEach((e=>{t.push(`let v${e} = get${e}ByOutputCoords(coords);`)}));const e=this.variableNames.map((t=>`v${t}`)).join(" + ");return`\n      ${b("index")} {\n        for (var i = 0; i < ${this.workPerThread}; i = i + 1) {\n          let flatIndex = index * ${this.workPerThread} + i;\n          if (flatIndex < uniforms.size) {\n            let coords = getCoordsFromIndex(flatIndex);\n            ${t.join("\n        ")}\n            setOutputAtIndex(flatIndex, ${e});\n          }\n        }\n      }\n    `}}const Nn={kernelName:i.AddN,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n}=t,r=e;if(1===r.length)return Pe({inputs:{x:r[0]},backend:n});const o=r.map((t=>t.dtype)).reduce(((t,e)=>(0,i.upcastType)(t,e))),a=r.map((t=>t.shape)),s=new In(a);return n.runWebGPUProgram(s,r,o)}};
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Pn{constructor(t,e){this.variableNames=["A"],this.workgroupSize=[16,16,1];const n=new Array(t.length);for(let r=0;r<n.length;r++)n[r]=t[e[r]];this.outputShape=n,this.dispatchLayout={x:[0],y:[1]},this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize,[1,1,1]),this.shaderKey="transposeShared"}getUserCode(){i.util.assert(this.workgroupSize[0]===this.workgroupSize[1],(()=>`Must be a square tile, current tile shape is ${this.workgroupSize[0]} x ${this.workgroupSize[1]}`));const t=this.workgroupSize[0];return`\n      var<workgroup> tile : array<array<f32, ${this.workgroupSize[0]+1}>, ${this.workgroupSize[0]}>;\n      ${b()} {\n        var x = i32(workgroupId.x) * ${t} + i32(localId.x);\n        var y = i32(workgroupId.y) * ${t} + i32(localId.y);\n        let width = uniforms.outShape[0];\n        let height = uniforms.outShape[1];\n        if (x < width && y < height) {\n          tile[localId.y][localId.x] = f32(A[y * width + x]);\n        }\n        workgroupBarrier();\n\n        x = i32(workgroupId.y) * ${t} + i32(localId.x);\n        y = i32(workgroupId.x) * ${t} + i32(localId.y);\n        if (x < height && y < width) {\n          setOutputAtIndex((y * height + x), tile[localId.x]\n            [localId.y]);\n        }\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class On{constructor(t,e){this.variableNames=["A"],this.workPerThread=1,this.workgroupSize=[64,1,1],this.size=!0;const n=new Array(t.length);for(let r=0;r<n.length;r++)n[r]=t[e[r]];this.outputShape=n,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.workPerThread,1,1]),this.newDim=e,this.shaderKey=`transpose_${e}`}getUserCode(){const t=v(this.outputShape.length),e=Ln(this.newDim);return`\n      ${b("index")} {\n        for(var i = 0; i < ${this.workPerThread}; i = i + 1) {\n          let flatIndex = index * ${this.workPerThread} + i;\n          if(flatIndex < uniforms.size) {\n            let coords = getCoordsFromIndex(flatIndex);\n            setOutputAtIndex(flatIndex, A[getIndexFromCoords${this.outputShape.length}D(\n              ${t}(${e}), uniforms.aShape)]);\n          }\n        }\n      }\n    `}}function Ln(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=new Array(e);for(let e=0;e<t.length;e++)n[t[e]]=`coords.${y(e)}`;return n.join()}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Rn(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{perm:a}=r,s=n,u=o.shape.length,l=new Array(u);for(let t=0;t<l.length;t++)l[t]=o.shape[a[t]];if(n.shouldExecuteOnCPU([o])){const t=s.tensorMap.get(o.dataId).values,e=xn(t,o.shape,o.dtype,a,l);return n.makeTensorInfo(l,o.dtype,e)}if(2===o.shape.length&&i.util.arraysEqual(a,[1,0])){const t=new Pn(o.shape,a);return s.runWebGPUProgram(t,[o],o.dtype)}const c=new On(o.shape,a);return s.runWebGPUProgram(c,[o],o.dtype)}const Dn={kernelName:i.Transpose,backendName:"webgpu",kernelFunc:Rn};
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class zn{constructor(t,e,n){this.variableNames=["x"],this.uniforms="reduceSize : i32,",this.size=!0,this.inputShape=[t.batchSize,t.inSize];const[r]=i.backend_util.computeOutAndReduceShapes(this.inputShape,[1]);this.outputShape=0===r.length?[1]:r,t.inSize>=32768&&n>=512?this.workgroupSize=[512,1,1]:t.inSize>=4096?this.workgroupSize=[256,1,1]:this.workgroupSize=[64,1,1],this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,[1,1,1]),this.reduceType=e,this.shaderKey=`reduce_${e}`}getUserCode(){let t="",e="0.0";const n=this.workgroupSize[0];"min"===this.reduceType||"max"===this.reduceType?(t=`\n         if (isnan(candidate)) {\n          bestValue = uniforms.NAN;\n         } else if (!isnan(bestValue) && candidate ${"min"===this.reduceType?"<":">"} bestValue)\n           {  bestValue = candidate; }`,e="f32(x[offset])"):"sum"===this.reduceType||"mean"===this.reduceType?t=" bestValue = bestValue + candidate; ":"prod"===this.reduceType?(t=" bestValue = bestValue * candidate; ",e="1.0"):"all"===this.reduceType?(t=" bestValue = f32(bestValue >= 1.0 && candidate >= 1.0); ",e="1.0"):"any"===this.reduceType&&(t=" bestValue = f32(bestValue >= 1.0 || candidate >= 1.0); ",e="0.0");const r="mean"===this.reduceType?"setOutputAtIndex(outputIndex, bestValue / f32(uniforms.reduceSize));":"setOutputAtIndex(outputIndex, bestValue);";return`\n       fn DIV_CEIL(a : u32, b : u32) -> u32 {\n        return ((a - 1u) / b + 1u);\n       }\n\n       ${`\n         var<workgroup> xBestValues : array<f32, ${n}>;\n       `}\n       fn getOffset(outputIndex : i32) -> i32 {\n         let outputCoords = getCoordsFromIndex(outputIndex);\n         let offset = ${1===this.outputShape.length?"outputCoords":"outputCoords[0]"} * uniforms.reduceSize;\n          return offset;\n       }\n       ${b("index")} {\n         let outputIndex = index / ${n};\n         let offset = getOffset(outputIndex);\n         var bestValue = ${e};\n         let Length = uniforms.reduceSize;\n         let WorkPerThread = DIV_CEIL(u32(Length), ${n}u);\n         for (var k = i32(localId.x); k < Length && outputIndex < uniforms.size;\n             k = k + ${n}) {\n           let candidate = f32(x[offset + k]);\n           ${t}\n         }\n         xBestValues[localId.x] = bestValue;\n         workgroupBarrier();\n\n         var reduceSize = min(u32(Length), ${n}u);\n         for (var currentSize = reduceSize / 2u; reduceSize > 1u;\n             currentSize = reduceSize / 2u) {\n           let interval = DIV_CEIL(reduceSize, 2u);\n           if (localId.x < currentSize) {\n            let candidate = xBestValues[localId.x + interval];\n            ${t}\n            xBestValues[localId.x] = bestValue;\n           }\n           reduceSize = interval;\n           workgroupBarrier();\n         }\n\n         if (localId.x == 0u && outputIndex < uniforms.size) {\n          ${r}\n        }\n       }\n     `}}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Fn={mean:"float32",all:"bool",any:"bool"};function Bn(t,e,n,r,o){const a=t.shape.length,s=[],u=i.util.parseAxisParam(e,t.shape);let l=u;const c=i.backend_util.getAxesPermutation(l,a);let h=t;null!=c&&(h=Rn({inputs:{x:t},attrs:{perm:c},backend:o}),l=i.backend_util.getInnerMostAxes(l.length,a),s.push(h)),i.backend_util.assertAxesAreInnerMostDims(r,l,a);const[d,f]=i.backend_util.computeOutAndReduceShapes(h.shape,l);let p,m=d;if(n&&(m=i.backend_util.expandShapeToKeepDim(d,u)),"max"!==r&&"prod"!==r||!o.shouldExecuteOnCPU([h])){const e=i.util.sizeFromShape(f),n={windowSize:e,inSize:e,batchSize:i.util.sizeFromShape(h.shape)/e,outSize:1},a=Fn[r]||(0,i.sumOutType)(t.dtype),u=[{type:"int32",data:[e]}],l=new zn(n,r,o.device.limits.maxComputeWorkgroupSizeX),c=o.runWebGPUProgram(l,[h],a,u);s.push(c),p=Me({inputs:{x:c},attrs:{shape:m},backend:o})}else{const e=o.tensorMap.get(h.dataId).values;switch(r){case"max":const n=nn(e,i.util.sizeFromShape(f),m,t.dtype);p=o.makeTensorInfo(m,t.dtype,n);break;case"prod":const{outVals:a,outShape:s,outDtype:u}=ln(h.shape,h.dtype,e,l);p=o.makeTensorInfo(s,u,a);break;default:throw new Error(`${r} CPU implementation is not yet supported.`)}}return s.forEach((t=>o.disposeData(t.dataId))),p}const Un={kernelName:i.All,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{keepDims:o,axis:a}=r;return Bn(i,a,o,"all",n)}};const jn={kernelName:i.Any,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{keepDims:o,axis:a}=r;return Bn(i,a,o,"any",n)}};
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Vn{constructor(t,e,n){this.workgroupSize=[64,1,1],this.variableNames=["x"],this.uniforms="infinityValue : f32,",this.size=!0;const r=[e];this.op="min"===n?"<":">";const[o,a]=i.backend_util.computeOutAndReduceShapes(t,r);this.outputShape=0===o.length?[1]:o,this.dispatchLayout=L(this.outputShape),i.util.sizeFromShape(a)<32?(this.type="plain",this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize)):(this.type="shared",this.dispatch=I(this.dispatchLayout,this.outputShape,[1,1,1])),this.inputShape=t,this.shaderKey=`argMinMax_${this.op}_${this.type}`}getUserCode(){const t=this.workgroupSize[0],e=()=>1===this.inputShape.length?"uniforms.xShape":`uniforms.xShape.${y(this.inputShape.length-1)}`,n=()=>{let t="";if(1===this.outputShape.length)1!==this.inputShape.length&&(t+="outputCoords,");else for(let e=0;e<this.outputShape.length;e++)t+=`outputCoords.${y(e)},`;return t};if("shared"===this.type){return`\n      fn DIV_CEIL(a : u32, b : u32) -> u32 {\n        return ((a - 1u) / b + 1u);\n      }\n\n      ${`\n      var<workgroup> xBestIndices : array<i32, ${t}>;\n      var<workgroup> xBestValues : array<f32, ${t}>;\n    `}\n\n      ${b("index")} {\n        let outputIndex = index / ${t};\n        let reduceLength = ${e()};\n\n        var bestIndex = i32(localId.x);\n        var bestValue = uniforms.infinityValue;\n        let outputCoords = getCoordsFromIndex(outputIndex);\n        for (var k = i32(localId.x); k < reduceLength && outputIndex < uniforms.size;\n            k = k + ${t}) {\n          let candidate = getX(${n()} k);\n          if (!isnan(candidate) && candidate ${this.op} bestValue) {\n            bestValue = candidate;\n            bestIndex = k;\n          }\n        }\n        xBestValues[localId.x] = bestValue;\n        xBestIndices[localId.x] = bestIndex;\n        workgroupBarrier();\n\n        var reduceSize = min(u32(reduceLength), ${t}u);\n        for (var currentSize = reduceSize / 2u; reduceSize > 1u;\n            currentSize = reduceSize / 2u) {\n          let interval = DIV_CEIL(reduceSize, 2u);\n          if (localId.x < currentSize) {\n            let candidate = xBestValues[localId.x + interval];\n            if (candidate ${this.op} bestValue) {\n              bestValue = candidate;\n              xBestValues[localId.x] = bestValue;\n              xBestIndices[localId.x] = xBestIndices[localId.x + interval];\n            }\n          }\n          reduceSize = interval;\n          workgroupBarrier();\n        }\n\n        if (localId.x == 0u && outputIndex < uniforms.size) {\n          setOutputAtIndexI32(outputIndex, xBestIndices[localId.x]);\n        }\n      }\n    `}return`\n      ${b("index")} {\n        if (index < uniforms.size) {\n          let outputCoords = getCoordsFromIndex(index);\n          var bestIndex = 0;\n          var bestValue = getX(${n()} 0);\n          let reduceLength = ${e()};\n          for (var i = 1; i < reduceLength; i++) {\n            let candidate = getX(${n()} i);\n            if (candidate ${this.op} bestValue) {\n              bestValue = candidate;\n              bestIndex = i;\n            }\n          }\n          setOutputAtIndexI32(index, bestIndex);\n        }\n      }\n      `}}const Hn={kernelName:i.ArgMax,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:a}=r;let s=i.util.parseAxisParam(a,o.shape);const u=i.backend_util.getAxesPermutation(s,o.shape.length);let l=o;const c=[];null!=u&&(l=Rn({inputs:{x:o},backend:n,attrs:{perm:u}}),c.push(l),s=i.backend_util.getInnerMostAxes(s.length,l.shape.length)),i.backend_util.assertAxesAreInnerMostDims("argMax",[s[0]],l.shape.length);const h=new Vn(l.shape,s[0],"max"),d=[{type:"float32",data:[Number.NEGATIVE_INFINITY]}],f=n.runWebGPUProgram(h,[l],"int32",d);return c.forEach((t=>n.disposeData(t.dataId))),f}};const Gn={kernelName:i.ArgMin,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:a}=r;let s=i.util.parseAxisParam(a,o.shape);const u=i.backend_util.getAxesPermutation(s,o.shape.length);let l=o;const c=[];null!=u&&(l=Rn({inputs:{x:o},backend:n,attrs:{perm:u}}),c.push(l),s=i.backend_util.getInnerMostAxes(s.length,l.shape.length)),i.backend_util.assertAxesAreInnerMostDims("argMin",[s[0]],l.shape.length);const h=new Vn(l.shape,s[0],"min"),d=[{type:"float32",data:[Number.POSITIVE_INFINITY]}],f=n.runWebGPUProgram(h,[l],"int32",d);return c.forEach((t=>n.disposeData(t.dataId))),f}},Wn=ze({opType:yt.ASIN}),Xn={kernelName:i.Asin,backendName:"webgpu",kernelFunc:Wn},Yn=ze({opType:yt.ASINH}),qn={kernelName:i.Asinh,backendName:"webgpu",kernelFunc:Yn},$n=ze({opType:yt.ATAN}),Kn={kernelName:i.Atan,backendName:"webgpu",kernelFunc:$n},Zn=Fe({opType:j.ATAN2}),Qn={kernelName:i.Atan2,backendName:"webgpu",kernelFunc:Zn},Jn=ze({opType:yt.ATANH}),tr={kernelName:i.Atanh,backendName:"webgpu",kernelFunc:Jn};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class er{constructor(t){this.variableNames=["x"],this.uniforms="strides : vec2<i32>,",this.workgroupSize=[256,1,1],this.size=!0,this.outputShape=t.outShape,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="poolWithFilterSizeEqualsOne"}getUserCode(){return`\n      ${b("index")} {\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let batch = coords[0];\n          let d = coords[3];\n\n          let xRCCorner = coords.yz * uniforms.strides;\n          let xRCorner = xRCCorner.x;\n          let xCCorner = xRCCorner.y;\n\n          let value = getX(batch, xRCorner, xCCorner, d);\n          setOutputAtIndex(index, value);\n        }\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class nr{constructor(t,e,n=!1,r=!1,i=!1){if(this.variableNames=["x"],this.uniforms="strides : vec2<i32>, pads : vec2<i32>, dilations : vec2<i32>, convDims : vec2<i32>, filterDims : vec2<i32>,",this.workgroupSize=[128,1,1],this.size=!0,"avg"===e&&n)throw new Error("Cannot compute positions for average pool.");this.outputShape=t.outShape,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.poolType=e,this.computePositions=n,this.flattenPositions=r,this.includeBatchIndex=i,this.shaderKey=`pool2D_${e}_${n}_${r}_${i}`}getUserCode(){let t;if("avg"===this.poolType)t="resultValue = resultValue + value; count = count + 1.0;";else if(this.computePositions){t=`let currMaxValue = mix(value, maxValue, maxValueFound);\n      if (value >= currMaxValue) {\n        maxValue = value;\n        maxValueFound = 1.0;\n        maxPosition = ${this.flattenPositions?this.includeBatchIndex?"((batch * uniforms.xShape[1] + xR) * uniforms.xShape[2] + xC) * uniforms.xShape[3] + d":"(xR * uniforms.xShape[2] + xC) * uniforms.xShape[3] + d":"wR * uniforms.filterDims.y + wC"};\n      }`}else t="resultValue = max(value, resultValue);";let e="resultValue";"avg"===this.poolType&&(e="resultValue / max(count, 1.0)");return`\n      ${b("index")} {\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n          let batch = coords[0];\n          let d = coords[3];\n          let xRCCorner = vec2<i32>(coords.yz) * uniforms.strides - uniforms.pads;\n          let xRCorner = xRCCorner.x;\n          let xCCorner = xRCCorner.y;\n\n          ${this.computePositions?"var maxValue = 0.0;\n            var maxValueFound = 0.0;\n            var maxPosition = 0;":`var resultValue = ${"avg"===this.poolType?"0.0":"-1.0 / pow(10.0, -20.0)"};`}\n\n          var count = 0.0;\n          for (var wR = 0; wR < uniforms.filterDims.x; wR = wR + uniforms.dilations.x) {\n            let xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= uniforms.convDims.x) {\n              continue;\n            }\n\n            for (var wC = 0; wC < uniforms.filterDims.y; wC = wC + uniforms.dilations.y) {\n              let xC = xCCorner + wC;\n              if (xC < 0 || xC >= uniforms.convDims.y) {\n                continue;\n              }\n\n              let value = getX(batch, xR, xC, d);\n              ${t}\n            }\n          }\n\n          ${this.computePositions?"setOutputAtIndexI32(index, maxPosition);":`setOutputAtIndex(index, ${e});`}\n        }\n      }\n    `}}class rr{constructor(t,e,n=!1,r=!1,i=!1){if(this.variableNames=["x"],this.uniforms="strides : vec3<i32>, pads : vec3<i32>, convDims : vec3<i32>, filterDims : vec3<i32>,",this.workgroupSize=[128,1,1],this.size=!0,"avg"===e&&n)throw new Error("Cannot compute positions for average pool.");this.outputShape=t.outShape,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.poolType=e,this.computePositions=n,this.flattenPositions=r,this.includeBatchIndex=i,this.shaderKey=`pool3D_${e}_${n}_${r}_${i}`}getUserCode(){let t;if("avg"===this.poolType)t="resultValue += value; count += 1.0;";else if(this.computePositions){t=`let currMaxValue = mix(value, maxValue, maxValueFound);\n      if (value >= currMaxValue) {\n        maxValue = value;\n        maxValueFound = 1.0;\n        maxPosition = ${this.flattenPositions?this.includeBatchIndex?"(((batch * uniforms.xShape.y + xD) * uniforms.xShape.z + xR) * uniforms.xShape.w + xC) * uniforms.xShape.u + ch":"((xD * uniforms.xShape.z + xR) * uniforms.xShape.w + xC) * uniforms.xShape.u + ch":"wD * uniforms.filterDims.y * uniforms.filterDims.y + wR * uniforms.filterDims.z + wC"};\n      }`}else t="resultValue = max(value, resultValue);";let e="resultValue";"avg"===this.poolType&&(e="resultValue / max(count, 1.0)");return`\n      ${b("index")} {\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let batch = coords.x;\n          let ch = coords.u;\n\n          let xCorner = vec3<i32>(coords.y, coords.z, coords.w) * uniforms.strides - uniforms.pads;\n          let xDCorner = xCorner.x;\n          let xRCorner = xCorner.y;\n          let xCCorner = xCorner.z;\n\n          ${this.computePositions?"var maxValue = 0.0;\n            var maxValueFound = 0.0;\n            var maxPosition = 0;":`var resultValue = ${"avg"===this.poolType?"0.0":"-1.0 / pow(10.0, -20.0)"};`}\n\n          var count = 0.0;\n          for (var wD = 0; wD < uniforms.filterDims.x; wD++) {\n            let xD = xDCorner + wD;\n            if (xD < 0 || xD >= uniforms.convDims.x) {\n              continue;\n            }\n\n            for (var wR = 0; wR < uniforms.filterDims.y; wR++) {\n              let xR = xRCorner + wR;\n              if (xR < 0 || xR >= uniforms.convDims.y) {\n                continue;\n              }\n\n              for (var wC = 0; wC < uniforms.filterDims.z; wC++) {\n                let xC = xCCorner + wC;\n                if (xC < 0 || xC >= uniforms.convDims.z) {\n                  continue;\n                }\n\n                let value = getX(batch, xD, xR, xC, ch);\n                ${t}\n              }\n            }\n          }\n\n          ${this.computePositions?"setOutputAtIndexI32(index, maxPosition);":`setOutputAtIndex(index, ${e});`}\n        }\n      }\n    `}}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ir(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reductionIndices:o,keepDims:a}=r;return Bn(i,o,a,"max",n)}const or={kernelName:i.Max,backendName:"webgpu",kernelFunc:ir};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ar(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{keepDims:o,axis:a}=r;return Bn(i,a,o,"mean",n)}const sr={kernelName:i.Mean,backendName:"webgpu",kernelFunc:ar};
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ur(t,e,n,r){if(1===e.filterWidth&&1===e.filterHeight&&i.util.arraysEqual(e.inShape,e.outShape))return Pe({inputs:{x:t},backend:r});if(e.filterWidth===e.inWidth&&e.filterHeight===e.inHeight&&1===e.batchSize&&"VALID"===e.padInfo.type){const o=t.shape.length,a=Me({inputs:{x:t},backend:r,attrs:{shape:[t.shape[o-3]*t.shape[o-2],t.shape[o-1]]}});let s;"avg"===n?s=ar({inputs:{x:a},backend:r,attrs:{axis:0,keepDims:!1}}):(i.util.assert("max"===n,(()=>`Invalid pool type ${n}`)),s=ir({inputs:{x:a},backend:r,attrs:{reductionIndices:0,keepDims:!1}}));const u=Me({inputs:{x:s},backend:r,attrs:{shape:e.outShape}});return r.disposeData(a.dataId),r.disposeData(s.dataId),u}let o;const a=[{type:"int32",data:[e.strideHeight,e.strideWidth]}];return 1===e.filterHeight&&1===e.filterWidth?o=new er(e):("avg"===n?o=new nr(e,"avg"):(i.util.assert("max"===n,(()=>`Invalid pool type ${n}`)),o=new nr(e,"max")),a.push({type:"int32",data:[e.padInfo.top,e.padInfo.left]},{type:"int32",data:[e.dilationHeight,e.dilationWidth]},{type:"int32",data:[e.inHeight,e.inWidth]},{type:"int32",data:[e.effectiveFilterHeight,e.effectiveFilterWidth]})),r.runWebGPUProgram(o,[t],t.dtype,a)}const lr={kernelName:i.AvgPool,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{filterSize:a,strides:s,pad:u,dimRoundingMode:l}=r;return ur(o,i.backend_util.computePool2DInfo(o.shape,a,s,1,u,l),"avg",n)}};const cr={kernelName:i.AvgPool3D,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{filterSize:a,strides:s,pad:u,dataFormat:l,dimRoundingMode:c}=r,h=i.backend_util.computePool3DInfo(o.shape,a,s,[1,1,1],u,c,l),d=new rr(h,"avg"),f=[{type:"int32",data:[h.strideDepth,h.strideHeight,h.strideWidth]},{type:"int32",data:[h.padInfo.front,h.padInfo.top,h.padInfo.left]},{type:"int32",data:[h.inDepth,h.inHeight,h.inWidth]},{type:"int32",data:[h.effectiveFilterDepth,h.effectiveFilterHeight,h.effectiveFilterWidth]}];return n.runWebGPUProgram(d,[o],o.dtype,f)}};
/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class hr{constructor(t){this.variableNames=["dy"],this.uniforms="strides : vec2<i32>, pads : vec2<i32>, dilations : vec2<i32>, filterDims : vec2<i32>,\n       outHeight : i32, outWidth : i32, avgMultiplier : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t.inShape,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="avgPool2DBackprop"}getUserCode(){return`\n      ${b("index")} {\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let batch = coords[0];\n        let d = coords[3];\n\n        let dyRCCorner = vec2<i32>(coords.yz) - uniforms.pads;\n        let dyRCorner = dyRCCorner.x;\n        let dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        var dotProd = 0.0;\n        for (var wR = 0; wR < uniforms.filterDims[0]; wR = wR + uniforms.dilations[0]) {\n          let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[0]);\n\n          if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {\n            continue;\n          }\n          let idyR = i32(dyR);\n\n          for (var wC = 0; wC < uniforms.filterDims[1]; wC = wC + uniforms.dilations[1]) {\n            let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[1]);\n\n            if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {\n              continue;\n            }\n            let idyC = i32(dyC);\n\n            let dyValue = getDy(batch, idyR, idyC, d);\n\n            dotProd = dotProd + dyValue * uniforms.avgMultiplier;\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n    `}}class dr{constructor(t){this.variableNames=["dy"],this.uniforms="strides : vec3<i32>, pads : vec3<i32>, filterDims : vec3<i32>,\n       outDepth : i32, outHeight : i32, outWidth : i32, avgMultiplier : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t.inShape,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="avgPool3DBackprop"}getUserCode(){return`\n      ${b("index")} {\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let batch = coords.x;\n        let ch = coords.u;\n\n        let dyCorner = vec3<i32>(coords.y, coords.z, coords.w) - uniforms.pads;\n        let dyDCorner = dyCorner.x;\n        let dyRCorner = dyCorner.y;\n        let dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        var dotProd = 0.0;\n        for (var wD = 0; wD < uniforms.filterDims[0]; wD++) {\n          let dyD = f32(dyDCorner + wD) / f32(uniforms.strides[0]);\n\n          if (dyD < 0.0 || dyD >= f32(uniforms.outDepth) || fract(dyD) > 0.0) {\n            continue;\n          }\n          let idyD = i32(dyD);\n\n          for (var wR = 0; wR < uniforms.filterDims[1]; wR++) {\n            let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[1]);\n\n            if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {\n              continue;\n            }\n            let idyR = i32(dyR);\n\n            for (var wC = 0; wC < uniforms.filterDims[2]; wC++) {\n              let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[2]);\n\n              if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {\n                continue;\n              }\n              let idyC = i32(dyC);\n\n              let dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              dotProd += dyValue * uniforms.avgMultiplier;\n            }\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n    `}}const fr={kernelName:i.AvgPool3DGrad,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:a}=e,s=a,{filterSize:u,strides:l,pad:c,dimRoundingMode:h}=r,d=i.backend_util.computePool3DInfo(s.shape,u,l,1,c,h),f=new dr(d),p=1/(d.filterDepth*d.filterHeight*d.filterWidth),m=[{type:"int32",data:[d.strideDepth,d.strideHeight,d.strideWidth]},{type:"int32",data:[d.effectiveFilterDepth-1-d.padInfo.front,d.effectiveFilterHeight-1-d.padInfo.top,d.effectiveFilterWidth-1-d.padInfo.left]},{type:"int32",data:[d.effectiveFilterDepth,d.effectiveFilterHeight,d.effectiveFilterWidth]},{type:"int32",data:[d.outDepth]},{type:"int32",data:[d.outHeight]},{type:"int32",data:[d.outWidth]},{type:"float32",data:[p]}];return n.runWebGPUProgram(f,[o],s.dtype,m)}};const pr={kernelName:i.AvgPoolGrad,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:a}=e,s=a;z([o,a],"avgPoolGrad");const{filterSize:u,strides:l,pad:c}=r,h=i.backend_util.computePool2DInfo(s.shape,u,l,1,c),d=new hr(h),f=1/(h.filterHeight*h.filterWidth),p=[{type:"int32",data:[h.strideHeight,h.strideWidth]},{type:"int32",data:[h.effectiveFilterHeight-1-h.padInfo.top,h.effectiveFilterWidth-1-h.padInfo.left]},{type:"int32",data:[h.dilationHeight,h.dilationWidth]},{type:"int32",data:[h.effectiveFilterHeight,h.effectiveFilterWidth]},{type:"int32",data:[h.outHeight]},{type:"int32",data:[h.outWidth]},{type:"float32",data:[f]}];return n.runWebGPUProgram(d,[o],s.dtype,p)}};const mr={kernelName:i.BatchMatMul,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:o}=e,{transposeA:a,transposeB:s}=r;return Te({a:i,b:o,transposeA:a,transposeB:s,backend:n})}};
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class gr{constructor(t,e){this.variableNames=["source"],this.workPerThread=1,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.rank=e.length,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.workPerThread,1,1]),this.start=t,this.uniforms=`start : ${v(t.length)}, `,this.shaderKey="slice"}getUserCode(){const t=v(this.rank),e=function(t){if(1===t)return"sourceLoc";if(t<=6)return vr.slice(0,t).map((t=>`sourceLoc.${t}`)).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}(this.rank);let n;n=1===this.start.length?this.outputShape.map(((t,e)=>"sourceLoc = uniforms.start + coords;")):this.outputShape.map(((t,e)=>`sourceLoc.${vr[e]} = uniforms.start.${y(e)} + coords.${vr[e]};`));return`\n      ${b("index")} {\n        if (index < uniforms.size) {\n          var sourceLoc : ${t};\n          let coords = getCoordsFromIndex(index);\n          ${n.join("\n")}\n          setOutputAtIndex(index, getSource(${e}));\n        }\n      }\n    `}}const vr=["x","y","z","w","u","v"];
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function yr(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{begin:a,size:s}=r,[u,l]=i.slice_util.parseSliceParams(o,a,s);if(i.slice_util.assertParamsValid(o,u,l),n.shouldExecuteOnCPU([o])||"string"===o.dtype){const t=n.tensorMap.get(o.dataId),e=pn(t.values,u,l,o.shape,o.dtype);return n.makeTensorInfo(l,o.dtype,e)}if(0===i.util.sizeFromShape(l))return n.makeTensorInfo(l,o.dtype,[]);const c=new gr(u,l),h=[{type:"int32",data:u}];return n.runWebGPUProgram(c,[o],o.dtype,h)}const br={kernelName:i.Slice,backendName:"webgpu",kernelFunc:yr},xr={kernelName:i.BatchToSpaceND,backendName:"webgpu",kernelFunc:t=>{const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{blockShape:a,crops:s}=r;i.util.assert(o.shape.length<=4,(()=>"batchToSpaceND for rank > 4 with a WebGPU backend not implemented yet"));const u=a.reduce(((t,e)=>t*e)),l=i.backend_util.getReshaped(o.shape,a,u),c=i.backend_util.getPermuted(l.length,a.length),h=i.backend_util.getReshapedPermuted(o.shape,a,u),d=i.backend_util.getSliceBeginCoords(s,a.length),f=i.backend_util.getSliceSize(h,s,a.length),p=[],m=Me({inputs:{x:o},backend:n,attrs:{shape:l}}),g=Rn({inputs:{x:m},backend:n,attrs:{perm:c}}),v=Me({inputs:{x:g},backend:n,attrs:{shape:h}}),y=yr({inputs:{x:v},backend:n,attrs:{begin:d,size:f}});return p.push(m),p.push(g),p.push(v),p.forEach((t=>n.disposeData(t.dataId))),y}},wr=`\n  fn bincount_write(index: i32, value: f32) {\n    ${f("&result[index]","value","float32")}\n  }\n`;class _r{constructor(t,e,n=!1){this.outputShape=[],this.variableNames=["x"],this.uniforms="binCountSize : i32,",this.workgroupSize=[64,1,1],this.atomic=!0,this.hasWeights=!0,this.binaryOutput=!1,this.outputShape=t,this.rank=t.length,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.binaryOutput=n,n&&(this.atomic=!1),this.hasWeights=e,this.hasWeights&&this.variableNames.push("w"),this.shaderKey=`bincount_${this.hasWeights}_${this.binaryOutput}_${this.rank}`}getUserCode(){return`\n    ${this.binaryOutput?"\n  fn bincount_write(index: i32, value: f32) {\n    atomicStore(&result[index], bitcast<i32>(value));\n  }\n":wr}\n  ${b("index")} {\n    ${1===this.rank?`if (index < uniforms.xShape) {\n      let indexVal = i32(getX(index));\n      if (indexVal < uniforms.binCountSize) {\n        let value = ${this.binaryOutput?1:this.hasWeights?"getW(index)":"1."};\n        bincount_write(indexVal, value);\n      }\n    }`:`let coord = getCoordsFromIndex(index);\n    if (coordsInBounds2D(coord, uniforms.xShape)) {\n      let indexVal = i32(getX(coord[0], coord[1]));\n      if (indexVal < uniforms.binCountSize) {\n        let value = ${this.binaryOutput?1:this.hasWeights?"getW(coord[0], coord[1])":"1."};\n        bincount_write(coord.x * uniforms.binCountSize + indexVal, value);\n      }\n    }`}\n  }\n  `}}const Sr={kernelName:i.Bincount,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,weights:a}=e,{size:s}=r,u=i.util.sizeFromShape(o.shape),l=i.util.sizeFromShape(a.shape)>0,c=[s],h=a.dtype,d=Ee({backend:n,attrs:{shape:c,value:0,dtype:h}}),f=new _r([u],l),p=[{type:"int32",data:[s]}],m=l?[o,a]:[o];return n.runWebGPUProgram(f,m,h,p,d)}};
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Er{constructor(t){this.outputShape=[],this.variableNames=["s0","s1"],this.uniforms="s0Size : i32, s1Size : i32, ",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[t],this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="broadcastArgs"}getUserCode(){return`\n  ${b("index")} {\n    if (index < uniforms.size) {\n      var s0 = 1.0;\n      var s1 = 1.0;\n      let indexS0 = index - uniforms.size + uniforms.s0Size;\n      let indexS1 = index - uniforms.size + uniforms.s1Size;\n      if (indexS0 >= 0) {\n        s0 = getS0(indexS0);\n      }\n      if (indexS1 >= 0) {\n        s1 = getS1(indexS1);\n      }\n\n      if (s0 == 1.0) {\n        setOutputAtIndex(index, s1);\n      } else if (s1 == 1.0) {\n        setOutputAtIndex(index, s0);\n      } else if (s0 != s1) {\n        setOutputAtIndex(index, uniforms.NAN);\n      } else {\n        setOutputAtIndex(index, s0);\n      }\n    }\n  }\n  `}}const Ar={kernelName:i.BroadcastArgs,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n}=t,{s0:r,s1:o}=e;if(n.shouldExecuteOnCPU([r,o])){const t=n.tensorMap.get(r.dataId),e=n.tensorMap.get(o.dataId),a=t.values,s=e.values,u=i.backend_util.assertAndGetBroadcastShape(Array.from(a),Array.from(s));return n.makeTensorInfo([u.length],"int32",Int32Array.from(u))}const a=i.util.sizeFromShape(r.shape),s=i.util.sizeFromShape(o.shape),u=Math.max(a,s),l=new Er(u),c=[{type:"int32",data:[a]},{type:"int32",data:[s]}];return n.runWebGPUProgram(l,[r,o],"int32",c)}},Mr=Fe({opType:j.NOT_EQUAL,dtype:"bool",cpuKernelImpl:un}),Cr={kernelName:i.NotEqual,backendName:"webgpu",kernelFunc:Mr};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Tr(t){const{inputs:e,backend:n}=t,{input:r}=e;return Pe({inputs:{x:n.tensorMap.get(r.dataId).complexTensorInfos.real},backend:n})}const kr={kernelName:i.Real,backendName:"webgpu",kernelFunc:Tr};const Ir={kernelName:i.Cast,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function t(e){const{inputs:n,backend:r,attrs:o}=e,{x:a}=n,{dtype:s}=o;if("complex64"===s){if("complex64"===a.dtype)return Pe({inputs:{x:a},backend:r});const e=i.zeros(a.shape),n=t({inputs:{x:a},backend:r,attrs:{dtype:"float32"}}),o=Le({inputs:{real:n,imag:e},backend:r});return e.dispose(),r.disposeData(n.dataId),o}if("complex64"===a.dtype){const e=Tr({inputs:{input:a},backend:r}),n=t({inputs:{x:e},backend:r,attrs:{dtype:s}});return r.disposeData(e.dataId),n}if(!i.util.hasEncodingLoss(a.dtype,s)){const t=Pe({inputs:{x:a},backend:r});return{dataId:t.dataId,shape:t.shape,dtype:s}}if(r.shouldExecuteOnCPU([a])){const t=r.tensorMap.get(a.dataId).values,[e,n,i]=je(t,a.shape,a.dtype,s);return r.makeTensorInfo(e,n,i)}if("int32"===s)
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
return function(t,e){const n=new De(t.shape,yt.TO_INT),r=e.runWebGPUProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(a,r);if("bool"===s){const t=r.makeTensorInfo([],"bool",i.util.getTypedArrayFromDType("bool",1)),e=Mr({inputs:{a,b:t},backend:r});return r.disposeData(t.dataId),e}throw new Error(`Error in Cast: failed to cast ${a.dtype} to ${s}`)}},Nr=ze({opType:yt.CEIL,cpuKernelImpl:Ve}),Pr={kernelName:i.Ceil,backendName:"webgpu",kernelFunc:Nr};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Or{constructor(t){this.variableNames=["A"],this.uniforms="minVal : f32, maxVal : f32,",this.workPerThread=4,this.workgroupSize=[64,1,1],this.outputComponent=4,this.size=!0,this.outputShape=t,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.workPerThread,1,1]),this.shaderKey="clipVec4"}getUserCode(){return`\n      ${b("index")} {\n        if(index < uniforms.size) {\n          let value = getAByOutputIndex(index);\n          var clampedValue = clamp(\n              value, vec4<f32>(uniforms.minVal), vec4<f32>(uniforms.maxVal));\n          clampedValue = select(clampedValue, value, isnanVec4(value));\n          setOutputAtIndex(index, clampedValue);\n        }\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Lr{constructor(t){this.variableNames=["A"],this.uniforms="minVal : f32, maxVal : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="clip"}getUserCode(){return`\n      ${b("index")} {\n        if(index < uniforms.size) {\n          let value = getAByOutputIndex(index);\n          if (isnan(value)) {\n            setOutputAtIndex(index, value);\n            return;\n          }\n          setOutputAtIndex(index, clamp(value, uniforms.minVal, uniforms.maxVal));\n        }\n      }\n    `}}const Rr={kernelName:i.ClipByValue,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{clipValueMin:a,clipValueMax:s}=r;let u;const l=[{type:"float32",data:[a]},{type:"float32",data:[s]}];return u=i.util.sizeFromShape(o.shape)%4==0?new Or(o.shape):new Lr(o.shape),n.runWebGPUProgram(u,[o],o.dtype,l)}};
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Dr{constructor(t){this.outputShape=[],this.variableNames=["real","imag"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="complexAbs"}getUserCode(){return`\n    ${b("index")} {\n      if (index < uniforms.size) {\n        let re = abs(getRealByOutputIndex(index));\n        let im = abs(getImagByOutputIndex(index));\n        let mx = max(re, im);\n\n        // The length function in wgsl may be not underflow-safe on some GPUs.\n        // So the safe solution is to ensure underflow-safety in all cases.\n        setOutputAtIndex(index, select(mx * length(vec2<f32>(1, min(re, im)/mx)), 0.0, mx == 0.0));\n      }\n    }\n  `}}
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function zr(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}const Fr={kernelName:i.ComplexAbs,backendName:"webgpu",kernelFunc:function(t){const{inputs:e,backend:n}=t,{x:r}=e,i=n.tensorMap.get(r.dataId),o=new Dr(r.shape),a=[zr(r,i.complexTensorInfos.real),zr(r,i.complexTensorInfos.imag)];return n.runWebGPUProgram(o,a,a[0].dtype)}};
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Br{constructor(t){this.uniforms="",this.workPerThread=1,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=i.backend_util.computeOutShape(t,1),this.variableNames=t.map(((t,e)=>`T${e}`)),this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.workPerThread,1,1]),this.offsetLength=t.length-1;for(let t=0;t<this.offsetLength;t++)this.uniforms+=`offset${t} : i32,`;this.shaderKey="concat"}getUserCode(){const t=[];if(this.offsetLength>0){t.push("if (yC < uniforms.offset0){ setOutputAtCoords(coords.x, coords.y, getT0(yR, yC)); }");for(let e=1;e<this.offsetLength;e++)t.push(`else if (yC < uniforms.offset${[e]}){ setOutputAtCoords(coords.x, coords.y, getT${e}(yR, yC - uniforms.offset${e-1})); }`);const e=this.offsetLength,n=this.offsetLength-1;t.push(`else { setOutputAtCoords(coords.x, coords.y, getT${e}(yR, yC - uniforms.offset${n})); }`)}else t.push("setOutputAtCoords(coords.x, coords.y, getT0(yR, yC));");return`\n      ${b("index")} {\n        for(var i = 0; i < ${this.workPerThread}; i = i + 1) {\n          let flatIndex = index * ${this.workPerThread} + i;\n          if(flatIndex < uniforms.size) {\n            let coords = getCoordsFromIndex(flatIndex);\n            let yR = coords.x;\n            let yC = coords.y;\n\n            ${t.join("\n        ")}\n          }\n        }\n      }\n    `}}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ur(t){const{inputs:e,backend:n}=t,{input:r}=e;return Pe({inputs:{x:n.tensorMap.get(r.dataId).complexTensorInfos.imag},backend:n})}const jr={kernelName:i.Imag,backendName:"webgpu",kernelFunc:Ur};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Vr(t,e,n){const r=t[0].dtype;if("complex64"===r){const r=t.map((t=>Tr({inputs:{input:t},backend:n}))),i=t.map((t=>Ur({inputs:{input:t},backend:n}))),o=Vr(r,e,n),a=Vr(i,e,n),s=Le({inputs:{real:o,imag:a},backend:n});return r.forEach((t=>n.disposeData(t.dataId))),i.forEach((t=>n.disposeData(t.dataId))),n.disposeData(o.dataId),n.disposeData(a.dataId),s}let o=n.shouldExecuteOnCPU(t);if("string"===r&&(o=!0),o){const o=t.map((t=>{const r=i.util.sizeFromShape(t.shape.slice(e));return Me({inputs:{x:t},backend:n,attrs:{shape:[-1,r]}})})),a=o.map((t=>({vals:n.readSync(t.dataId),shape:t.shape}))),s=i.backend_util.computeOutShape(o.map((t=>t.shape)),1),u=1===o[0].shape[0],l=He(a,s,r,u),c=i.backend_util.computeOutShape(t.map((t=>t.shape)),e),h=n.makeTensorInfo(c,r,l);return o.forEach((t=>n.disposeData(t.dataId))),h}const a=n.device.limits.maxStorageBuffersPerShaderStage-1;if(t.length>a){const r=[];for(let i=0;i<t.length;i+=a){const o=t.slice(i,i+a);r.push(Vr(o,e,n))}const i=Vr(r,e,n);for(const t of r)n.disposeData(t.dataId);return i}const{tensors2D:s,outShape:u}=function(t,e,n){const r=i.backend_util.computeOutShape(t.map((t=>t.shape)),e),o=t.map((t=>Me({inputs:{x:t},backend:n,attrs:{shape:[i.util.sizeFromShape(t.shape.slice(0,e)),i.util.sizeFromShape(t.shape.slice(e))]}})));return{tensors2D:o,outShape:r}}(t,e,n),l=s.map((t=>t.shape)),c=new Br(l),h=[],d=new Array(l.length-1);if(d.length>0){d[0]=l[0][1],h.push({type:"int32",data:[d[0]]});for(let t=1;t<d.length;t++)d[t]=d[t-1]+l[t][1],h.push({type:"int32",data:[d[t]]})}const f=n.runWebGPUProgram(c,s,s[0].dtype,h);s.forEach((t=>n.disposeData(t.dataId)));const p=Me({inputs:{x:f},backend:n,attrs:{shape:u}});return n.disposeData(f.dataId),p}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Hr(t){const{inputs:e,backend:n,attrs:r}=t,{axis:o}=r,a=i.util.parseAxisParam(o,e[0].shape)[0],s=e.map((t=>t.shape));i.backend_util.assertParamsConsistent(s,a);const u=i.backend_util.computeOutShape(e.map((t=>t.shape)),a);if(0===i.util.sizeFromShape(u))return n.makeTensorInfo(u,e[0].dtype,[]);const l=e.filter((t=>i.util.sizeFromShape(t.shape)>0));return 1===l.length?Pe({inputs:{x:l[0]},backend:n}):Vr(l,a,n)}const Gr={kernelName:i.Concat,backendName:"webgpu",kernelFunc:Hr};class Wr{constructor(t,e,n,r,i=!1,o=null,a=!1,s=!1){this.variableNames=["x","W"],this.uniforms="filterDims : vec2<i32>, pads : vec2<i32>, strides : vec2<i32>, dilations : vec2<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.outputShape=t.outShape,this.isChannelsLast="channelsLast"===t.dataFormat,this.isVec4=((t.inChannels%4==0||t.inChannels%3==0)&&this.isChannelsLast||t.outWidth%4==0&&!this.isChannelsLast)&&t.outChannels%4==0,this.dispatchLayout=this.isChannelsLast?{x:[3],y:[1,2],z:[0]}:{x:[2,3],y:[1],z:[0]},this.workgroupSize=P(this.dispatchLayout,this.outputShape,this.isVec4),this.elementsPerThread=O(this.dispatchLayout,this.outputShape,this.isVec4),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize,this.elementsPerThread),this.isVec4?(this.outputComponent=4,this.isChannelsLast&&t.inChannels%4!=0?(this.innerElementSize=3,this.variableComponents=[1,4]):(this.innerElementSize=4,this.variableComponents=[4,4]),i&&(this.variableNames.push("bias"),this.variableComponents.push(4)),a&&(this.variableNames.push("preluActivationWeights"),this.variableComponents.push(4))):(this.innerElementSize=this.elementsPerThread[0],i&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights")),this.sequentialAccessByThreads=s,this.addBias=i,this.activation=o,this.hasPreluActivationWeights=a,this.tileAOuter=this.workgroupSize[1]*this.elementsPerThread[1],this.tileBOuter=this.workgroupSize[0]*this.elementsPerThread[0],this.tileInner=Math.max(this.workgroupSize[0]*this.innerElementSize,this.workgroupSize[1]),this.fitAOuter=e%this.tileAOuter==0,this.fitBOuter=n%this.tileBOuter==0,this.fitInner=r%this.tileInner==0,this.shaderKey=`conv2DMM_${this.elementsPerThread}_${this.activation}}_${this.fitAOuter}_${this.fitBOuter}_${this.fitInner}_${this.isVec4}_${this.innerElementSize}_${this.isChannelsLast}_${this.sequentialAccessByThreads}`}getUserCode(){const t=this.isVec4?me(this.elementsPerThread,this.workgroupSize,!this.isChannelsLast,this.tileInner):ve(this.elementsPerThread,this.workgroupSize,!this.isChannelsLast,this.tileInner,!1,null,this.sequentialAccessByThreads),e=this.isVec4?[this.innerElementSize,4,4]:[1,1,1];return`\n    ${
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t,e,n,r,i=!1,o=null,a=!1,s=4,u=4,l=4){const c=t?"\n      let coord = vec4<i32>(batch, xRow, xCol, xCh);\n      ":"\n      let coord = vec4<i32>(batch, xCh, xRow, xCol);\n      ",h=t?"\n      let coords = vec4<i32>(\n        batch,\n        row / outWidth,\n        row % outWidth,\n        col);\n      ":"\n      let coords = vec4<i32>(\n        batch,\n        row,\n        col / outWidth,\n        col % outWidth);\n      ",d=t?"uniforms.xShape[1]":"uniforms.xShape[2]",f=t?"uniforms.xShape[2]":"uniforms.xShape[3]",p=t?"row":"col",m=t?"col":"row",v=`\n      let inChannels = uniforms.wShape[2];\n      let outWidth = ${t?"uniforms.outShape[2]":"uniforms.outShape[3]"};\n      let outRow = ${p} / outWidth;\n      let outCol = ${p} % outWidth;\n\n      let WRow = ${m} / (uniforms.filterDims[1] * inChannels);\n      let WCol = ${m} / inChannels % uniforms.filterDims[1];\n      let xRow = outRow * uniforms.strides[0] + uniforms.dilations[0] * WRow - uniforms.pads[0];\n      let xCol = outCol * uniforms.strides[1] + uniforms.dilations[1] * WCol - uniforms.pads[1];\n      let xCh = ${m} % inChannels;\n      var resData = ${g(s)}(0.0);\n      // The bounds checking is always needed since we use it to pad zero for\n      // the 'same' padding type.\n      if (xRow >= 0 && xRow < ${d} && xCol >= 0 && xCol < ${f}) {\n        ${c}\n        let xIndex = getIndexFromCoords4D(coord, uniforms.xShape);\n        ${(t=>{switch(t){case 1:return"resData = f32(x[xIndex]);";case 3:return"resData = vec3<f32>(x[xIndex], x[xIndex + 1], x[xIndex + 2]);";case 4:return"resData = vec4<f32>(x[xIndex / 4]);";default:throw new Error(`innerElementSize ${t} is not supported.`)}})(s)}\n      }\n      return resData;`,y=t?e&&r?`\n      ${v}`:`\n      if (row < uniforms.dimAOuter && col < uniforms.dimInner) {\n        ${v}\n      }\n      return ${g(s)}(0.0);`:r&&n?`\n      ${v}`:`\n      if (row < uniforms.dimInner && col < uniforms.dimBOuter) {\n        ${v}\n      }\n      return ${g(s)}(0.0);`,b=`${(t=>{switch(t){case 1:return"return f32(W[row * uniforms.wShape[3] + col]);";case 4:return"return vec4<f32>(W[(row * uniforms.wShape[3] + col) / 4]);";default:throw new Error(`innerElementSize ${t} is not supported.`)}})(u)}`,x=g(l),w=g(t?s:u),_=g(t?u:s);return`\n      ${he(o,a,4===l,4)}\n      fn mm_readA(batch: i32, row : i32, col : i32) -> ${w} {\n        ${t?y:b}\n      }\n\n      fn mm_readB(batch: i32, row : i32, col : i32) -> ${_} {\n        ${t?b:y}\n      }\n\n      fn mm_write(batch: i32, row : i32, col : i32, valueIn : ${x}) {\n        if (row < uniforms.dimAOuter && col < uniforms.dimBOuter)\n        {\n        var value = valueIn;\n        let outWidth = ${t?"uniforms.outShape[2]":"uniforms.outShape[3]"};\n        ${h}\n        ${de(i,o)}\n        setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);\n        }\n      }`}(this.isChannelsLast,this.fitAOuter,this.fitBOuter,this.fitInner,this.addBias,this.activation,this.hasPreluActivationWeights,e[0],e[1],e[2])}\n    ${t}\n  `}}
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Xr{constructor(t,e=!1,n=null,r=!1){this.variableNames=["x","W"],this.uniforms="filterDims: vec2<i32>, pads: vec2<i32>, strides: vec2<i32>, dilations: vec2<i32>,",this.workgroupSize=[4,4,8],this.outputShape=t.outShape,this.isChannelsLast="channelsLast"===t.dataFormat,this.dispatchLayout=this.isChannelsLast?{x:[2],y:[1],z:[0,3]}:{x:[3],y:[2],z:[0,1]},this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.addBias=e,this.activation=n,this.hasPreluActivationWeights=r,e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.shaderKey=`conv2dnaive_${this.activation}_${this.isChannelsLast}`}getUserCode(){return`\n       ${he(this.activation,this.hasPreluActivationWeights,!1,4)}\n       fn readInp(batch : i32, row : i32, col : i32, chan : i32) -> f32{\n         let coords = vec4<i32>(batch, row, col, chan);\n         if (coordsInBounds4D(coords, uniforms.xShape)) {\n           return  getX(batch, row, col, chan);\n         } else {\n          return 0.0;\n         }\n       }\n       fn readFilt(row : i32, col : i32, xChannel : i32, outChannel : i32) -> f32{\n         let coords = vec4<i32>(row, col, xChannel, outChannel);\n         if(coordsInBounds4D(coords, uniforms.wShape)) {\n           return getW(row, col, xChannel, outChannel);\n          } else {\n            return 0.0;\n          }\n       }\n       fn writeResult(batch : i32, row : i32, col : i32, chan : i32, valueIn : f32) {\n         let coords = ${this.isChannelsLast?"vec4<i32>(batch, row, col, chan);":"vec4<i32>(batch, chan, row, col);"}\n         if (coordsInBounds4D(coords, uniforms.outShape)) {\n           var value = valueIn;\n           ${de(this.addBias,this.activation)}\n           setOutputAtCoords(coords.x, coords.y, coords.z, coords.w, value);\n         }\n       }\n       ${b("index")} {\n         let coords = getOutputCoords();\n         let batch = coords[0];\n         let outChannel = ${this.isChannelsLast?"coords[3];":"coords[1];"}\n         let outRow = ${this.isChannelsLast?"coords[1];":"coords[2];"}\n         let outCol = ${this.isChannelsLast?"coords[2];":"coords[3];"}\n         var acc : f32 = 0.0;\n         for (var row = 0; row < uniforms.filterDims[0]; row = row + 1) {\n           for (var col = 0; col < uniforms.filterDims[1]; col = col + 1) {\n             let xRow = outRow * uniforms.strides[0] + uniforms.dilations[0] * row - uniforms.pads[0];\n             let xCol = outCol * uniforms.strides[1] + uniforms.dilations[1] * col - uniforms.pads[1];\n             for (var xChannel = 0; xChannel < ${this.isChannelsLast?"uniforms.xShape[3];":"uniforms.xShape[1];"} xChannel = xChannel + 1) {\n               ${this.isChannelsLast?"let v = readInp(batch, xRow, xCol, xChannel);":"let v = readInp(batch, xChannel, xRow, xCol);"}\n               let f = readFilt(row, col, xChannel, outChannel);\n               acc = acc + v * f;\n             }\n           }\n         }\n         writeResult(batch, outRow, outCol, outChannel, acc);\n       }\n     `}}
/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Yr{constructor(t,e){this.variableNames=["x"],this.uniforms="pads : vec2<i32>, strides : vec2<i32>, dilations : vec2<i32>, outWidth : i32, itemsPerBlockRow : i32,\n       inChannels : i32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.isChannelsLast=e,this.shaderKey=`im2col_${this.isChannelsLast}`}getUserCode(){const t=this.isChannelsLast?1:2,e=this.isChannelsLast?2:3,n=this.isChannelsLast?"coords[1]":"coords[2]",r=this.isChannelsLast?"coords[2]":"coords[1]",i=this.isChannelsLast?"getX(batch, xRow, xCol, ch)":"getX(batch, ch, xRow, xCol)";return`\n    ${b("index")} {\n      let coords = getCoordsFromIndex(index);\n      if(index < uniforms.size) {\n        let batch = coords[0];\n        let row = ${n};\n        let col = ${r};\n        let offsetY = (row / uniforms.outWidth) * uniforms.strides[0] - uniforms.pads[0];\n        let xRow = offsetY + uniforms.dilations[0] * (col / uniforms.itemsPerBlockRow);\n        var value = 0.0;\n        if(xRow < uniforms.xShape[${t}] && xRow >= 0) {\n          let offsetX = (row % uniforms.outWidth) * uniforms.strides[1] -\n              uniforms.pads[1];\n          let xCol = offsetX + uniforms.dilations[1] * ((col %\n              uniforms.itemsPerBlockRow) / uniforms.inChannels);\n          let ch = col % uniforms.inChannels;\n          if(xCol < uniforms.xShape[${e}] && xCol >= 0) {\n            value = ${i};\n          }\n        }\n        setOutputAtIndex(index, value);\n      }\n    }\n   `}}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function qr(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&1===n&&t[0]>1?[t[0],1]:null}function $r({x:t,filter:e,convInfo:n,backend:r,bias:o=null,preluActivationWeights:a=null,leakyreluAlpha:s=0,activation:u=null}){const l=null!=o,c=null!=a,h="channelsLast"===n.dataFormat,d=h&&n.filterHeight===n.inHeight&&n.filterWidth===n.inWidth&&"VALID"===n.padInfo.type,f=(0,i.env)().getBool("WEBGPU_USE_NAIVE_CONV2D_DEBUG");if(!f&&(d||1===n.filterHeight&&1===n.filterWidth&&1===n.dilationHeight&&1===n.dilationWidth&&1===n.strideHeight&&1===n.strideWidth&&("SAME"===n.padInfo.type||"VALID"===n.padInfo.type)))return function({x:t,filter:e,convInfo:n,backend:r,bias:i=null,preluActivationWeights:o=null,leakyreluAlpha:a=0,activation:s=null}){const u="channelsLast"===n.dataFormat,l=!u,c=[];let h,d;if(u&&n.filterHeight===n.inHeight&&n.filterWidth===n.inWidth&&"VALID"===n.padInfo.type){const i=n.inHeight*n.inWidth*n.inChannels;h=Me({inputs:{x:t},backend:r,attrs:{shape:[1,n.batchSize,i]}}),d=Me({inputs:{x:e},backend:r,attrs:{shape:[1,i,n.outChannels]}})}else h=Me({inputs:{x:t},backend:r,attrs:{shape:u?[n.batchSize,n.inHeight*n.inWidth,n.inChannels]:[n.batchSize,n.inChannels,n.inHeight*n.inWidth]}}),d=Me({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});if(c.push(h),c.push(d),null!=o){const t=qr(o.shape,u);null!=t&&(o=Me({inputs:{x:o},backend:r,attrs:{shape:t}}),c.push(o))}if(null!=i){const t=qr(i.shape,u);null!=t&&(i=Me({inputs:{x:i},backend:r,attrs:{shape:t}}),c.push(i))}const f=Te({a:u?h:d,b:u?d:h,transposeA:l,transposeB:!1,backend:r,bias:i,activation:s,preluActivationWeights:o,leakyreluAlpha:a}),p=Me({inputs:{x:f},backend:r,attrs:{shape:n.outShape}});c.push(f);for(const t of c)r.disposeData(t.dataId);return p}({x:t,filter:e,convInfo:n,backend:r,bias:o,activation:u,preluActivationWeights:a,leakyreluAlpha:s});const p=(0,i.env)().getNumber("WEBGPU_THRESHOLD_TO_INCREASE_WORKGROUPS_FOR_MATMUL"),m=p>-1?p:r.thresholdToIncreaseWorkgroups,g=n.batchSize*Math.ceil(n.outHeight*n.outWidth/32)*Math.ceil(n.outChannels/32);if((0,i.env)().getBool("WEBGPU_CONV_SEPARATE_IM2COL_SHADER")||g<=m)return function({x:t,filter:e,convInfo:n,backend:r,bias:i=null,preluActivationWeights:o=null,leakyreluAlpha:a=0,activation:s=null}){const{filterWidth:u,filterHeight:l,inChannels:c,strideWidth:h,strideHeight:d,padInfo:f,outWidth:p,outHeight:m,dilationWidth:g,dilationHeight:v,dataFormat:y}=n,b="channelsLast"===y,x=u*l*c,w=m*p,_=b?[n.batchSize,w,x]:[n.batchSize,x,w],S=new Yr(_,b),E=[{type:"int32",data:[f.top,f.left]},{type:"int32",data:[d,h]},{type:"int32",data:[v,g]},{type:"int32",data:[p]},{type:"int32",data:[c*u]},{type:"int32",data:[c]}],A=r.runWebGPUProgram(S,[t],t.dtype,E),M=[];M.push(A);const C=Me({inputs:{x:e},backend:r,attrs:{shape:[1,x,-1]}});if(M.push(C),null!=o){const t=qr(o.shape,b);null!=t&&(o=Me({inputs:{x:o},backend:r,attrs:{shape:t}}),M.push(o))}if(null!=i){const t=qr(i.shape,b);null!=t&&(i=Me({inputs:{x:i},backend:r,attrs:{shape:t}}),M.push(i))}const T=Te({a:b?A:C,b:b?C:A,transposeA:!b,transposeB:!1,backend:r,bias:i,activation:s,preluActivationWeights:o,leakyreluAlpha:a}),k=Me({inputs:{x:T},backend:r,attrs:{shape:n.outShape}});M.push(T);for(const t of M)r.disposeData(t.dataId);return k}({x:t,filter:e,convInfo:n,backend:r,bias:o,preluActivationWeights:a,leakyreluAlpha:s,activation:u});let v;const y=[n.padInfo.top,n.padInfo.left],b=[{type:"int32",data:[n.filterHeight,n.filterWidth]},{type:"int32",data:[...y]},{type:"int32",data:[n.strideHeight,n.strideWidth]},{type:"int32",data:[n.dilationHeight,n.dilationWidth]}];if(f)v=new Xr(n,l,u,c);else{const t=h?n.outHeight*n.outWidth:n.outChannels,e=h?n.outChannels:n.outHeight*n.outWidth,i=n.filterHeight*n.filterWidth*n.inChannels;b.push({type:"int32",data:[t]},{type:"int32",data:[e]},{type:"int32",data:[i]});const o=r.adapterInfo.isIntel();v=new Wr(n,t,e,i,l,u,c,o)}const x=[],w=[t,e];l&&(h||1!==o.shape.length||(o=Me({inputs:{x:o},backend:r,attrs:{shape:[o.shape[0],1,1]}}),x.push(o)),w.push(o)),c&&(h||1!==a.shape.length||(a=Me({inputs:{x:a},backend:r,attrs:{shape:[a.shape[0],1,1]}}),x.push(a)),w.push(a)),"leakyrelu"===u&&(b.push({type:"float32",data:[s]}),v.uniforms+=" alpha : f32,");const _=r.runWebGPUProgram(v,w,t.dtype,b);for(const t of x)r.disposeData(t.dataId);return _}const Kr={kernelName:i.Conv2D,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,attrs:n,backend:r}=t,{x:o,filter:a}=e,{strides:s,pad:u,dataFormat:l,dilations:c,dimRoundingMode:h}=n,d=i.backend_util.convertConv2DDataFormat(l);return $r({x:o,filter:a,convInfo:i.backend_util.computeConv2DInfo(o.shape,a.shape,s,c,u,h,!1,d),backend:r})}};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Zr{constructor(t){this.variableNames=["dy","W"],this.uniforms="filterDims : vec2<i32>, pads : vec2<i32>, strides : vec2<i32>, outBackprop : vec4<i32>,",this.workgroupSize=[64,1,1],this.size=!1,this.isVec4=!1,this.workPerThread=1,this.outputShape=t.inShape,this.isChannelsLast="channelsLast"===t.dataFormat,this.isVec4=this.isChannelsLast&&t.outChannels%4==0&&t.inChannels%4==0,this.isVec4?(this.workPerThread=2,this.outputComponent=4,this.workgroupSize=[4,4,4],this.dispatchLayout={x:[3],y:[2],z:[0,1]},this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize,[4,this.workPerThread,1])):(this.size=!0,this.workPerThread=1,this.workgroupSize=[64,1,1],this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize)),this.shaderKey=`conv2DDerInput_${this.isChannelsLast}_${this.isVec4}_${this.workPerThread}`}getUserCode(){const t=this.isChannelsLast?1:2,e=this.isChannelsLast?2:3,n=this.isChannelsLast?3:1,r=`\n    ${b()} {\n      let batch = i32(globalId.z) / uniforms.outShape[1];\n      let r = i32(globalId.z) % uniforms.outShape[1];\n      let c = i32(globalId.y) * ${this.workPerThread};\n      let d1 = i32(globalId.x) * 4;\n\n      let dyCorner = vec2<i32>(r, c) - uniforms.pads;\n\n      // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n      // ? = to be determined. : = across all values in that axis.\n      var dotProd: array<vec4<f32>, ${this.workPerThread}>;\n      for (var i = 0; i < ${this.workPerThread}; i++) {\n        dotProd[i] = vec4<f32>(0.0);\n      }\n      for (var wR = 0; wR < uniforms.filterDims.x; wR = wR + 1) {\n        let dyR = f32(dyCorner.x + wR) / f32(uniforms.strides.x);\n        let wRPerm = uniforms.filterDims.x - 1 - wR;\n        if (dyR < 0.0 || dyR >= f32(uniforms.outBackprop[1]) ||\n            fract(dyR) > 0.0) {\n          continue;\n        }\n        let idyR = i32(dyR);\n\n        for (var wC = 0; wC < uniforms.filterDims.y; wC = wC + 1) {\n          let dyC = f32(dyCorner.y + wC) / f32(uniforms.strides.y);\n          let dyC2 = f32(dyCorner.y + 1 + wC) / f32(uniforms.strides.y);\n          let wCPerm = uniforms.filterDims.y - 1 - wC;\n          var bDyCVal = true;\n          var bDyCVal2 = true;\n          if (dyC < 0.0 || dyC >= f32(uniforms.outBackprop[2]) ||\n              fract(dyC) > 0.0) {\n            bDyCVal = false;\n          }\n          if (dyC2 < 0.0 || dyC2 >= f32(uniforms.outBackprop[2]) ||\n              fract(dyC2) > 0.0) {\n            bDyCVal2 = false;\n          }\n\n          let idyC = i32(dyC);\n          let idyC2 = i32(dyC2);\n          if (bDyCVal && bDyCVal2) {\n            let d2Length = uniforms.outBackprop[3];\n            for (var d2 = 0; d2 < d2Length; d2 = d2 + 4) {\n              let wValue0 = getW(wRPerm, wCPerm, d1, d2);\n              let wValue1 = getW(wRPerm, wCPerm, d1 + 1, d2);\n              let wValue2 = getW(wRPerm, wCPerm, d1 + 2, d2);\n              let wValue3 = getW(wRPerm, wCPerm, d1 + 3, d2);\n              var xValue =  getDy(batch, idyR, idyC, d2);\n              let tmpval = vec4<f32>(dot(xValue, wValue0),\n                                     dot(xValue, wValue1),\n                                     dot(xValue, wValue2),\n                                     dot(xValue, wValue3));\n              dotProd[0] = dotProd[0] + tmpval;\n              xValue = getDy(batch, idyR, idyC2, d2);\n              dotProd[1] = dotProd[1] + vec4<f32>(dot(xValue, wValue0),\n                                                  dot(xValue, wValue1),\n                                                  dot(xValue, wValue2),\n                                                  dot(xValue, wValue3));\n            }\n          } else if (bDyCVal) {\n            let d2Length = uniforms.outBackprop[3];\n            for (var d2 = 0; d2 < d2Length; d2 = d2 + 4) {\n              let wValue0 = getW(wRPerm, wCPerm, d1, d2);\n              let wValue1 = getW(wRPerm, wCPerm, d1 + 1, d2);\n              let wValue2 = getW(wRPerm, wCPerm, d1 + 2, d2);\n              let wValue3 = getW(wRPerm, wCPerm, d1 + 3, d2);\n              var xValue =  getDy(batch, idyR, idyC, d2);\n              let tmpval = vec4<f32>(dot(xValue, wValue0),\n                                     dot(xValue, wValue1),\n                                     dot(xValue, wValue2),\n                                     dot(xValue, wValue3));\n              dotProd[0] = dotProd[0] + tmpval;\n            }\n          } else if (bDyCVal2) {\n            let d2Length = uniforms.outBackprop[3];\n            for (var d2 = 0; d2 < d2Length; d2 = d2 + 4) {\n              let wValue0 = getW(wRPerm, wCPerm, d1, d2);\n              let wValue1 = getW(wRPerm, wCPerm, d1 + 1, d2);\n              let wValue2 = getW(wRPerm, wCPerm, d1 + 2, d2);\n              let wValue3 = getW(wRPerm, wCPerm, d1 + 3, d2);\n              var xValue =  getDy(batch, idyR, idyC2, d2);\n              let tmpval = vec4<f32>(dot(xValue, wValue0),\n                                     dot(xValue, wValue1),\n                                     dot(xValue, wValue2),\n                                     dot(xValue, wValue3));\n              dotProd[1] = dotProd[1] + tmpval;\n            }\n          }\n        }\n      }\n\n      for (var i = 0; i < ${this.workPerThread}; i = i + 1) {\n        let coords = vec4<i32>(batch, r, c + i, d1);\n        if (coordsInBounds4D(coords, uniforms.outShape)) {\n          setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], dotProd[i]);\n        }\n      }\n    }\n    `;return this.isVec4?`\n    ${r}\n    `:`\n    ${b("index")} {\n      if(index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let batch = coords[0];\n        let d1 = coords[${n}];\n\n        let dyCorner = vec2<i32>(coords[${t}], coords[${e}]) - uniforms.pads;\n        let dyRCorner = dyCorner.x;\n        let dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        var dotProd = 0.0;\n        for (var wR = 0; wR < uniforms.filterDims.x; wR = wR + 1) {\n          let dyR = (f32(dyRCorner) + f32(wR)) / f32(uniforms.strides.x);\n          let wRPerm = uniforms.filterDims.x - 1 - wR;\n          if (dyR < 0.0 || dyR >= f32(uniforms.outBackprop[1]) || fract(dyR) > 0.0 ||\n              wRPerm < 0) {\n            continue;\n          }\n          let idyR = i32(dyR);\n\n          for (var wC = 0; wC < uniforms.filterDims.y; wC = wC + 1) {\n            let dyC = (f32(dyCCorner) + f32(wC)) / f32(uniforms.strides.y);\n            let wCPerm = uniforms.filterDims.y - 1 - wC;\n            if (dyC < 0.0 || dyC >= f32(uniforms.outBackprop[2]) ||\n                fract(dyC) > 0.0 || wCPerm < 0) {\n              continue;\n            }\n            let idyC = i32(dyC);\n\n            for (var d2 = 0; d2 < uniforms.outBackprop[3]; d2 = d2 + 1) {\n              let xValue = ${this.isChannelsLast?"getDy(batch, idyR, idyC, d2)":"getDy(batch, d2, idyR, idyC)"};\n              let wValue = getW(wRPerm, wCPerm, d1, d2);\n              dotProd = dotProd + xValue * wValue;\n            }\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n  `}}class Qr{constructor(t){this.variableNames=["x","dy"],this.uniforms="pads : vec2<i32>, strides : vec2<i32>, batchSize : i32, outHeight : i32, outWidth : i32, inHeight : i32, inWidth : i32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t.filterShape,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.isChannelsLast="channelsLast"===t.dataFormat,this.shaderKey=`conv2DDerFilter_${this.isChannelsLast}`}getUserCode(){return`\n    ${b("index")} {\n      if(index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let wR = coords[0];\n        let wC = coords[1];\n        let d1 = coords[2];\n        let d2 = coords[3];\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        var dotProd = 0.0;\n        for (var b = 0; b < uniforms.batchSize; b = b + 1) {\n          for (var yR = 0; yR < uniforms.outHeight; yR = yR + 1) {\n            let xR = wR + yR * uniforms.strides[0] - uniforms.pads[0];\n            if (xR < 0 || xR >= uniforms.inHeight) {\n              continue;\n            }\n\n            for (var yC = 0; yC < uniforms.outWidth; yC = yC + 1) {\n              let xC = wC + yC * uniforms.strides[1] - uniforms.pads[1];\n\n              if (xC < 0 || xC >= uniforms.inWidth) {\n                continue;\n              }\n\n              if (${this.isChannelsLast}) {\n                let dyValue = getDy(b, yR, yC, d2);\n                let xValue = getX(b, xR, xC, d1);\n                dotProd = dotProd + xValue * dyValue;\n              } else {\n                let dyValue = getDy(b, d2, yR, yC);\n                let xValue = getX(b, d1, xR, xC);\n                dotProd = dotProd + xValue * dyValue;\n              }\n            }\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n  `}}class Jr{constructor(t){this.variableNames=["x","dy"],this.uniforms="pads : vec3<i32>, strides : vec3<i32>, batchSize : i32, outDepth : i32,\n       outHeight : i32, outWidth : i32, inDepth : i32, inHeight : i32, inWidth : i32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t.filterShape,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="conv3DDerFilter"}getUserCode(){return`\n    ${b("index")} {\n      if(index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let wF = coords.x;\n        let wR = coords.y;\n        let wC = coords.z;\n        let d1 = coords.w;\n        let d2 = coords.u;\n\n        var dotProd = 0.0;\n        for (var b = 0; b < uniforms.batchSize; b++) {\n          for (var yF = 0; yF < uniforms.outDepth; yF++) {\n            let xF = wF + yF * uniforms.strides[0] - uniforms.pads[0];\n            if (xF < 0 || xF >= uniforms.inDepth) {\n              continue;\n            }\n\n            for (var yR = 0; yR < uniforms.outHeight; yR++) {\n              let xR = wR + yR * uniforms.strides[1] - uniforms.pads[1];\n              if (xR < 0 || xR >= uniforms.inHeight) {\n                continue;\n              }\n\n              for (var yC = 0; yC < uniforms.outWidth; yC++) {\n                let xC = wC + yC * uniforms.strides[2] - uniforms.pads[2];\n                if (xC < 0 || xC >= uniforms.inWidth) {\n                  continue;\n                }\n\n                let dyValue = getDy(b, yF, yR, yC, d2);\n                let xValue = getX(b, xF, xR, xC, d1);\n                dotProd += xValue * dyValue;\n              }\n            }\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n  `}}class ti{constructor(t){this.variableNames=["dy","W"],this.uniforms="filterDims : vec3<i32>, pads : vec3<i32>, strides : vec3<i32>,\n      outDepth : i32, outHeight : i32, outWidth : i32, outChannels : i32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t.inShape,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="conv3DDerInput"}getUserCode(){return`\n    ${b("index")} {\n      if(index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let batch = coords.x;\n        let d1 = coords.u;\n\n        let dyCorner = vec3<i32>(coords.y, coords.z, coords.w) - uniforms.pads;\n        let dyFCorner = dyCorner.x;\n        let dyRCorner = dyCorner.y;\n        let dyCCorner = dyCorner.z;\n\n        var dotProd = 0.0;\n        for (var wF = 0; wF < uniforms.filterDims[0]; wF++) {\n          let dyF = f32(dyFCorner + wF) / f32(uniforms.strides[0]);\n          if (dyF < 0.0 || dyF >= f32(uniforms.outDepth) || fract(dyF) > 0.0) {\n            continue;\n          }\n          let idyF = i32(dyF);\n\n          let wFPerm = uniforms.filterDims[0] - 1 - wF;\n\n          for (var wR = 0; wR < uniforms.filterDims[1]; wR++) {\n            let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[1]);\n\n            if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {\n              continue;\n            }\n            let idyR = i32(dyR);\n\n            let wRPerm = uniforms.filterDims[1] - 1 - wR;\n\n            for (var wC = 0; wC < uniforms.filterDims[2]; wC++) {\n              let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[2]);\n\n              if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {\n                continue;\n              }\n              let idyC = i32(dyC);\n\n              let wCPerm = uniforms.filterDims[2] - 1 - wC;\n\n              for (var d2 = 0; d2 < uniforms.outChannels; d2++) {\n                let xValue = getDy(batch, idyF, idyR, idyC, d2);\n                let wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n  `}}const ei={kernelName:i.Conv2DBackpropFilter,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,dy:a}=e,{strides:s,pad:u,dataFormat:l,dimRoundingMode:c,filterShape:h}=r,d=i.backend_util.convertConv2DDataFormat(l),f=i.backend_util.computeConv2DInfo(o.shape,h,s,1,u,c,!1,d),p=new Qr(f),m=[{type:"int32",data:[f.padInfo.top,f.padInfo.left]},{type:"int32",data:[f.strideHeight,f.strideWidth]},{type:"int32",data:[f.batchSize]},{type:"int32",data:[f.outHeight]},{type:"int32",data:[f.outWidth]},{type:"int32",data:[f.inHeight]},{type:"int32",data:[f.inWidth]}];return n.runWebGPUProgram(p,[o,a],o.dtype,m)}};class ni{constructor(t){this.variableNames=["x","W"],this.uniforms="filterDims : vec2<i32>, pads : vec2<i32>, strides : vec2<i32>, outBackprop : vec4<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.outputShape=t.inShape,i.util.assert("channelsLast"===t.dataFormat,(()=>"TODO: NCHW is unimplemented")),this.isVec4=t.inChannels%4==0&&t.outChannels%4==0,this.dispatchLayout={x:[3],y:[1,2],z:[0]},this.workgroupSize=P(this.dispatchLayout,this.outputShape,this.isVec4),this.elementsPerThread=O(this.dispatchLayout,this.outputShape,this.isVec4),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize,this.elementsPerThread),this.isVec4&&(this.outputComponent=4,this.variableComponents=[4,1]),this.shaderKey=`conv2DDerInputMM_${this.isVec4}_${this.elementsPerThread}`}getUserCode(){const t=this.isVec4?me(this.elementsPerThread,this.workgroupSize):ve(this.elementsPerThread,this.workgroupSize);return`\n    ${
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t=4){const e=`if (row < uniforms.dimAOuter && col < uniforms.dimInner) {\n        \n      let outRow = row / uniforms.outShape[2];\n      let outCol = row % uniforms.outShape[2];\n\n      let WRow = col / (uniforms.filterDims[1] * uniforms.outBackprop[3]);\n      let WCol = col / uniforms.outBackprop[3] % uniforms.filterDims[1];\n      let xR = f32(outRow - uniforms.pads[0] + WRow) / f32(uniforms.strides[0]);\n      let xC = f32(outCol - uniforms.pads[1] + WCol) / f32(uniforms.strides[1]);\n      if (xR < 0.0 || xR >= f32(uniforms.outBackprop[1]) || fract(xR) > 0.0) {\n        return ${g(t)}(0.0);\n      }\n      if (xC < 0.0 || xC >= f32(uniforms.outBackprop[2]) || fract(xC) > 0.0) {\n        return ${g(t)}(0.0);\n      }\n      let coord = vec4<i32>(\n          batch,\n          i32(xR),\n          i32(xC),\n          col % uniforms.outBackprop[3]);\n      return x[getIndexFromCoords4D(coord, uniforms.xShape)/${t}];\n      }\n      return ${g(t)}(0.0);`;return`\n  fn mm_readA(batch: i32, row : i32, col : i32) -> ${g(t)} {\n    ${e}\n  }\n\n  fn mm_readB(batch: i32, row : i32, col : i32) -> ${g(t)} {\n    let coordX = uniforms.filterDims.x - 1 -\n        row / (uniforms.filterDims[1] * uniforms.outBackprop[3]);\n    let coordY = uniforms.filterDims.y - 1 -\n        (row / uniforms.outBackprop[3]) % uniforms.filterDims[1];\n    if (row < uniforms.dimInner && col < uniforms.dimBOuter &&\n        coordX >= 0 && coordY >= 0) {\n      let rowInner = row % uniforms.outBackprop[3];\n      let coord = vec4<i32>(coordX, coordY, col, rowInner);\n      ${(t=>{switch(t){case 1:return"return W[getIndexFromCoords4D(coord, uniforms.wShape)];";case 4:return"\n            let coord1 = vec4<i32>(coordX, coordY, col + 1, rowInner);\n            let coord2 = vec4<i32>(coordX, coordY, col + 2, rowInner);\n            let coord3 = vec4<i32>(coordX, coordY, col + 3, rowInner);\n            let v0 = W[getIndexFromCoords4D(coord, uniforms.wShape)];\n            let v1 = W[getIndexFromCoords4D(coord1, uniforms.wShape)];\n            let v2 = W[getIndexFromCoords4D(coord2, uniforms.wShape)];\n            let v3 = W[getIndexFromCoords4D(coord3, uniforms.wShape)];\n            return vec4<f32>(v0, v1, v2, v3);\n            ";default:throw new Error(`innerElementSize ${t} is not supported.`)}})(t)}\n    }\n    return ${g(t)}(0.0);\n  }\n\n  fn mm_write(batch: i32, row : i32, col : i32, valueInput : ${g(t)}) {\n    if (row < uniforms.dimAOuter && col < uniforms.dimBOuter) {\n      var value = valueInput;\n      let outCoord = vec4<i32>(\n          batch,\n          row / uniforms.outShape[2],\n          row % uniforms.outShape[2],\n          col);\n      result[getIndexFromCoords4D(outCoord, uniforms.outShape)/${t}] = value;\n    }\n  }`}(this.isVec4?4:1)}\n    ${t}\n    `}}const ri={kernelName:i.Conv2DBackpropInput,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,filter:a}=e,{inputShape:s,strides:u,pad:l,dataFormat:c,dimRoundingMode:h}=r,d=i.backend_util.convertConv2DDataFormat(c),f=i.backend_util.computeConv2DInfo(s,a.shape,u,1,l,h,!1,d),p=[{type:"int32",data:[f.filterHeight,f.filterWidth]},{type:"int32",data:[f.filterHeight-1-f.padInfo.top,f.filterWidth-1-f.padInfo.left]},{type:"int32",data:[f.strideHeight,f.strideWidth]},{type:"int32",data:[f.batchSize,f.outHeight,f.outWidth,f.outChannels]}];let m;if((0,i.env)().getBool("WEBGPU_USE_NAIVE_CONV2D_TRANSPOSE")||"channelsLast"!==f.dataFormat)m=new Zr(f);else{m=new ni(f);const t=f.inHeight*f.inWidth,e=f.inChannels,n=f.filterHeight*f.filterWidth*f.outChannels;p.push({type:"uint32",data:[t]},{type:"uint32",data:[e]},{type:"uint32",data:[n]})}return n.runWebGPUProgram(m,[o,a],"float32",p)}};
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class ii{constructor(t){this.variableNames=["x","W"],this.uniforms="filterDims: vec3<i32>, pads: vec3<i32>, strides: vec3<i32>, dilations: vec3<i32>,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t.outShape,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="conv3dnaive"}getUserCode(){return`\n    ${b("index")} {\n      if (index < uniforms.size) {\n        let coords = getOutputCoords();\n        let batch = coords.x;\n        let d2 = coords.u;\n\n        let xFRCCorner = vec3<i32>(coords.y, coords.z, coords.w) * uniforms.strides - uniforms.pads;\n        let xFCorner = xFRCCorner.x;\n        let xRCorner = xFRCCorner.y;\n        let xCCorner = xFRCCorner.z;\n\n        let inputDepthNearestVec4 = (uniforms.xShape.u / 4) * 4;\n        let inputDepthVec4Remainder = uniforms.xShape.u % 4;\n\n        var dotProd = 0.0;\n        for (var wF = 0; wF < uniforms.filterDims[0]; wF++) {\n          let xF = xFCorner + wF * uniforms.dilations[0];\n          if (xF < 0 || xF >= uniforms.xShape.y) {\n            continue;\n          }\n\n          for (var wR = 0; wR < uniforms.filterDims[1]; wR++) {\n            let xR = xRCorner + wR * uniforms.dilations[1];\n            if (xR < 0 || xR >= uniforms.xShape.z) {\n              continue;\n            }\n\n            for (var wC = 0; wC < uniforms.filterDims[2]; wC++) {\n              let xC = xCCorner + wC * uniforms.dilations[2];\n              if (xC < 0 || xC >= uniforms.xShape.w) {\n                continue;\n              }\n\n              for (var d1 = 0; d1 < inputDepthNearestVec4; d1 += 4) {\n                let xValues = vec4<f32>(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                let wValues = vec4<f32>(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (inputDepthVec4Remainder == 1) {\n                dotProd += getX(batch, xF, xR, xC, inputDepthNearestVec4) *\n                  getW(wF, wR, wC, inputDepthNearestVec4, d2);\n              } else if (inputDepthVec4Remainder == 2) {\n                let xValues = vec2<f32>(\n                  getX(batch, xF, xR, xC, inputDepthNearestVec4),\n                  getX(batch, xF, xR, xC, inputDepthNearestVec4 + 1)\n                );\n                let wValues = vec2<f32>(\n                  getW(wF, wR, wC, inputDepthNearestVec4, d2),\n                  getW(wF, wR, wC, inputDepthNearestVec4 + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (inputDepthVec4Remainder == 3) {\n                let xValues = vec3<f32>(\n                  getX(batch, xF, xR, xC, inputDepthNearestVec4),\n                  getX(batch, xF, xR, xC, inputDepthNearestVec4 + 1),\n                  getX(batch, xF, xR, xC, inputDepthNearestVec4 + 2)\n                );\n                let wValues = vec3<f32>(\n                  getW(wF, wR, wC, inputDepthNearestVec4, d2),\n                  getW(wF, wR, wC, inputDepthNearestVec4 + 1, d2),\n                  getW(wF, wR, wC, inputDepthNearestVec4 + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }`}}const oi={kernelName:i.Conv3D,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:a}=e,{strides:s,pad:u,dilations:l}=r,c=i.backend_util.computeConv3DInfo(o.shape,a.shape,s,l,u),h=[c.padInfo.front,c.padInfo.top,c.padInfo.left],d=[{type:"int32",data:[c.filterDepth,c.filterHeight,c.filterWidth]},{type:"int32",data:[...h]},{type:"int32",data:[c.strideDepth,c.strideHeight,c.strideWidth]},{type:"int32",data:[c.dilationDepth,c.dilationHeight,c.dilationWidth]}],f=new ii(c),p=(0,i.upcastType)(o.dtype,a.dtype);return n.runWebGPUProgram(f,[o,a],p,d)}};const ai={kernelName:i.Conv3DBackpropFilterV2,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,dy:a}=e,{strides:s,pad:u,filterShape:l}=r,c=i.backend_util.computeConv3DInfo(o.shape,l,s,1,u),h=new Jr(c),d=[{type:"int32",data:[c.padInfo.front,c.padInfo.top,c.padInfo.left]},{type:"int32",data:[c.strideDepth,c.strideHeight,c.strideWidth]},{type:"int32",data:[c.batchSize]},{type:"int32",data:[c.outDepth]},{type:"int32",data:[c.outHeight]},{type:"int32",data:[c.outWidth]},{type:"int32",data:[c.inDepth]},{type:"int32",data:[c.inHeight]},{type:"int32",data:[c.inWidth]}];return n.runWebGPUProgram(h,[o,a],a.dtype,d)}};const si={kernelName:i.Conv3DBackpropInputV2,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,filter:a}=e,{strides:s,pad:u,inputShape:l}=r,c=i.backend_util.computeConv3DInfo(l,a.shape,s,1,u),h=new ti(c),d=[{type:"int32",data:[c.filterDepth,c.filterHeight,c.filterWidth]},{type:"int32",data:[c.filterDepth-1-c.padInfo.front,c.filterHeight-1-c.padInfo.top,c.filterWidth-1-c.padInfo.left]},{type:"int32",data:[c.strideDepth,c.strideHeight,c.strideWidth]},{type:"int32",data:[c.outDepth]},{type:"int32",data:[c.outHeight]},{type:"int32",data:[c.outWidth]},{type:"int32",data:[c.outChannels]}];return n.runWebGPUProgram(h,[o,a],o.dtype,d)}},ui=ze({opType:yt.COS}),li={kernelName:i.Cos,backendName:"webgpu",kernelFunc:ui},ci=ze({opType:yt.COSH}),hi={kernelName:i.Cosh,backendName:"webgpu",kernelFunc:ci};
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class di{constructor(t,e,n,r){this.variableNames=["Image","Boxes","BoxInd"],this.uniforms="extrapolationValue : f32,",this.workgroupSize=[64,1,1],this.size=!0;const[i]=e;this.outputShape=[i,n[0],n[1],t],this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.methodId="bilinear"===r?1:0,this.cropHeightBiggerThan1=this.outputShape[1]>1,this.cropWidthBiggerThan1=this.outputShape[2]>1,this.shaderKey=`cropAndResize_${this.methodId}_${this.cropHeightBiggerThan1}_${this.cropWidthBiggerThan1}`}getUserCode(){const[t,e]=["f32(uniforms.imageShape[1] - 1)","f32(uniforms.imageShape[2] - 1)"],[n,r,i]=this.cropHeightBiggerThan1?[`(${t} / f32(uniforms.outShape[1] - 1))`,"(y2-y1) * height_ratio",`y1*${t} + f32(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${t}`],[o,a,s]=this.cropWidthBiggerThan1?[`(${e} / f32(uniforms.outShape[2] - 1))`,"(x2-x1) * width_ratio",`x1*${e} + f32(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${e}`];return`\n    ${b("index")} {\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let height_ratio = f32(${n});\n        let width_ratio = f32(${o});\n        let b = coords[0];\n        let y = coords[1];\n        let x = coords[2];\n        let d = coords[3];\n        // get box vals\n        let y1 = getBoxes(b, 0);\n        let x1 = getBoxes(b, 1);\n        let y2 = getBoxes(b, 2);\n        let x2 = getBoxes(b, 3);\n        // get image in batch index\n        let bInd = i32(round(getBoxInd(b)));\n        if(bInd < 0 || bInd >= uniforms.outShape[0]) {\n          return;\n        }\n        let height_scale = ${r};\n        let width_scale = ${a};\n        let in_y = ${i};\n        if( in_y < 0.0 || in_y > ${t} ) {\n          setOutputAtIndex(index, uniforms.extrapolationValue);\n          return;\n        }\n        let in_x = ${s};\n        if( in_x < 0.0 || in_x > ${e} ) {\n          setOutputAtIndex(index, uniforms.extrapolationValue);\n          return;\n        }\n        let sourceFracIndexCR = vec2<f32>(in_x,in_y);\n        if(${this.methodId} == 1) {\n          // Compute the four integer indices.\n          let sourceFloorCR = vec2<i32>(sourceFracIndexCR);\n          let sourceCeilCR = vec2<i32>(ceil(sourceFracIndexCR));\n          let topLeft = getImage(bInd, sourceFloorCR.y, sourceFloorCR.x, d);\n          let bottomLeft = getImage(bInd, sourceCeilCR.y, sourceFloorCR.x, d);\n          let topRight = getImage(bInd, sourceFloorCR.y, sourceCeilCR.x, d);\n          let bottomRight = getImage(bInd, sourceCeilCR.y, sourceCeilCR.x, d);\n          let fracCR = sourceFracIndexCR - vec2<f32>(sourceFloorCR);\n          let top = topLeft + (topRight - topLeft) * fracCR.x;\n          let bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          let newValue = top + (bottom - top) * fracCR.y;\n          setOutputAtIndex(index, newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          let sourceNearestCR = vec2<i32>(floor(\n            sourceFracIndexCR + vec2<f32>(0.5,0.5)));\n          let newValue = getImage(\n            bInd, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutputAtIndex(index, newValue);\n        }\n      }\n    }\n    `}}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const fi={kernelName:i.CropAndResize,backendName:"webgpu",kernelFunc:t=>{const{inputs:e,backend:n,attrs:r}=t,{image:i,boxes:o,boxInd:a}=e,{cropSize:s,method:u,extrapolationValue:l}=r,c=new di(i.shape[3],o.shape,s,u),h=[{type:"float32",data:[l]}];return n.runWebGPUProgram(c,[i,o,a],"float32",h)}};
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
var pi;!function(t){t.Prod="*",t.Sum="+"}(pi||(pi={}));class mi{constructor(t,e,n,r){this.variableNames=["x"],this.uniforms="index : f32,",this.size=!0,this.workgroupSize=[128,1,1],this.outputShape=e,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.exclusive=n,this.reverse=r,this.op=t,this.shaderKey=`cum_${this.op}_${this.exclusive}_${this.reverse}`}getUserCode(){const t=this.outputShape.length,e=this.op===pi.Prod?"1.0":"0.0",n=this.exclusive?e:`getX(${gi(t,"coords",this.op)})`,r=this.outputShape[this.outputShape.length-1];let i="",o="";return this.exclusive?(i=this.reverse?"end != "+(r-1):"end != 0",o=this.reverse?"end + 1":"end - 1"):(i=this.reverse?`end + pow2 < ${r}`:"end >= pow2",o=this.reverse?"end + pow2":"end - pow2"),`\n      ${b("index")} {\n       if (index < uniforms.size) {\n         var coords = getCoordsFromIndex(index);\n\n         let end = ${vi(t,"coords",this.op)};\n         var val = ${n};\n         let pow2 = i32(pow(2.0, uniforms.index));\n         if (${i}) {\n           let idx = ${o};\n           ${vi(t,"coords",this.op)} = idx;\n           val ${this.op}= getX(${gi(t,"coords",this.op)});\n         }\n         setOutputAtIndex(index, val);\n       }\n      }\n    `}}function gi(t,e,n){if(1===t)return`${e}`;if(2===t)return`${e}.x, ${e}.y`;if(3===t)return`${e}.x, ${e}.y, ${e}.z`;if(4===t)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function vi(t,e,n){if(1===t)return`${e}`;if(2===t)return`${e}.y`;if(3===t)return`${e}.z`;if(4===t)return`${e}.w`;throw Error(`Cumulative ${n} for rank ${t} is not yet supported`)}
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function yi(t,e,n,r,o,a){const s=e.shape.length,u=i.backend_util.getAxesPermutation([r],s);let l=e;null!=u&&(l=Rn({inputs:{x:e},backend:n,attrs:{perm:u}}));const c=i.backend_util.getInnerMostAxes(1,s)[0];if(c!==s-1)throw new Error(`WebGPU cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const h=l.shape[c];let d=Pe({inputs:{x:l},backend:n});for(let e=0;e<=Math.ceil(Math.log2(h))-1;e++){const r=new mi(t,l.shape,!1,a),i=d,o=[{type:"float32",data:[e]}];d=n.runWebGPUProgram(r,[d],d.dtype,o),n.disposeData(i.dataId)}if(o){const e=new mi(t,l.shape,o,a),r=d,i=[{type:"float32",data:[0]}];d=n.runWebGPUProgram(e,[d],d.dtype,i),n.disposeData(r.dataId)}if(null!=u){const t=Rn({inputs:{x:d},backend:n,attrs:{perm:i.backend_util.getUndoAxesPermutation(u)}});return n.disposeData(d.dataId),n.disposeData(l.dataId),t}return d}const bi={kernelName:i.Cumprod,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:o,exclusive:a,reverse:s}=r;return yi(pi.Prod,i,n,o,a,s)}};const xi={kernelName:i.Cumsum,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:o,exclusive:a,reverse:s}=r;return yi(pi.Sum,i,n,o,a,s)}};const wi={kernelName:i.DenseBincount,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,weights:a}=e,{size:s,binaryOutput:u}=r,l=1===o.shape.length,c=i.util.sizeFromShape(a.shape)>0,h=a.dtype,d=l?[o.shape[0]]:[o.shape[0],o.shape[1]],f=Ee({backend:n,attrs:{shape:l?[s]:[o.shape[0],s],value:0,dtype:h}}),p=new _r(d,c,u),m=[{type:"int32",data:[s]}],g=c?[o,a]:[o];return n.runWebGPUProgram(p,g,h,m,f)}};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class _i{constructor(t,e){this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.uniforms="blockSize : i32,",this.outputShape=t,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey=`depthToSpace_${e}`,this.dataFormat=e}getUserCode(){return`\n      ${b("index")} {\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let b = coords[0];\n          let h = ${this.getHeightCoordString()};\n          let w = ${this.getWidthCoordString()};\n          let d = ${this.getDepthCoordString()};\n\n          let in_h = h / uniforms.blockSize;\n          let offset_h = h % uniforms.blockSize;\n          let in_w = w / uniforms.blockSize;\n          let offset_w = w % uniforms.blockSize;\n          let offset_d = (offset_h * uniforms.blockSize + offset_w) *\n            ${this.getOutputDepthSize()};\n          let in_d = d + offset_d;\n\n          let rlt = ${this.getInputSamplingString()};\n          setOutputAtIndex(index, rlt);\n        }\n      }`}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?"uniforms.outShape[3]":"uniforms.outShape[1]"}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}const Si={kernelName:i.DepthToSpace,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockSize:o,dataFormat:a}=r,s=i.shape[0],u=("NHWC"===a?i.shape[1]:i.shape[2])*o,l=("NHWC"===a?i.shape[2]:i.shape[3])*o,c=("NHWC"===a?i.shape[3]:i.shape[1])/(o*o),h=[{type:"int32",data:[o]}],d=new _i("NHWC"===a?[s,u,l,c]:[s,c,u,l],a);return n.runWebGPUProgram(d,[i],i.dtype,h)}};
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Ei{constructor(t,e,n,r=!1,i=null,o=!1){this.variableNames=["x","W"],this.uniforms="pads : vec2<i32>, inDims : vec2<i32>,",this.workgroupSize=[16,16,1],this.outputShape=t,this.dispatchLayout={x:[3],y:[2],z:[0,1]},this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),r&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),this.addBias=r,this.activation=i,this.hasPreluActivation=o,this.filterHeight=e,this.filterWidth=n,this.shaderKey=`depthwiseNCHW_${this.activation}_${this.filterHeight}_${this.filterWidth}`}getUserCode(){const t=this.filterWidth*this.filterHeight,e=this.workgroupSize[0]*this.workgroupSize[1]*this.workgroupSize[2],n=this.workgroupSize[1]+this.filterHeight-1,r=this.workgroupSize[0]+this.filterWidth-1;return`\n      ${he(this.activation,this.hasPreluActivation,!1,4)}\n\n      var<workgroup> mm_Asub : array<array<f32, ${r}>, ${n}>;\n      var<workgroup> mm_Bsub : array<array<f32, ${this.filterWidth}>, ${this.filterHeight}>;\n      fn readX(batch : i32, channel : i32, row : i32, col : i32) -> f32 {\n        var value = 0.0;\n        if (row >=0 && row < uniforms.inDims[0] && col >=0 && col < uniforms.inDims[1])\n        {\n          value = getX(batch, channel, row, col);\n        }\n        return value;\n      }\n\n      ${b()} {\n        let coords = getOutputCoords();\n        let batch = coords[0];\n        let xRCCorner = vec2<i32>(coords.zw) - uniforms.pads;\n        let channelMul = uniforms.wShape[3];\n        let d1 = coords[1] / channelMul;\n        let q = coords[1] % channelMul;\n\n        let inputRowStart = xRCCorner.x;\n        let inputColStart = xRCCorner.y;\n\n        let localRow = i32(localId.y);\n        let localCol = i32(localId.x);\n\n        // Load one tile of X into local memory.\n        for (var inputRow = localRow; inputRow < ${n}; inputRow = inputRow + ${this.workgroupSize[1]}) {\n          for (var inputCol = localCol; inputCol < ${r}; inputCol = inputCol + ${this.workgroupSize[0]}) {\n            let rowOffset = inputRow - localRow;\n            let colOffset = inputCol - localCol;\n            mm_Asub[inputRow][inputCol] = readX(batch, d1, inputRowStart + rowOffset, inputColStart + colOffset);\n          }\n        }\n\n        // Load one tile of W into local memory.\n        var wIndex = i32(localIndex);\n        ${t<e?`if (wIndex < ${t})`:`for(; wIndex < ${t}; wIndex = wIndex + ${e})`}\n\n        {\n          let wRow = wIndex / ${this.filterWidth};\n          let wCol = wIndex % ${this.filterWidth};\n          mm_Bsub[wRow][wCol] = getW(wRow, wCol, d1, q);\n        }\n\n        workgroupBarrier();\n\n        var value = 0.0;\n        for (var wR = 0; wR < ${this.filterHeight}; wR = wR + 1) {\n          for (var wC = 0; wC < ${this.filterWidth}; wC = wC + 1) {\n            let xVal = mm_Asub[localRow + wR][localCol + wC];\n            let wVal = mm_Bsub[wR][wC];\n            value = fma(xVal, wVal, value);\n          }\n        }\n        ${de(this.addBias,this.activation)}\n        if (coordsInBounds4D(coords, uniforms.outShape)) {\n          setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);\n        }\n      }\n    `}}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Ai{constructor(t,e=!1,n=null,r=!1){this.variableNames=["x","W"],this.uniforms="pads : vec2<i32>, inDims : vec2<i32>, virtualWidth : i32,",this.workgroupSize=[64,1,1],this.workPerThread=4,this.outputComponent=4,this.outputShape=t.outShape,this.virtualWidth=Math.ceil(this.outputShape[2]/this.workPerThread)*this.workPerThread;const o=[this.outputShape[0],this.outputShape[1],this.virtualWidth,this.outputShape[3]];this.dispatchLayout=L(o),this.dispatch=I(this.dispatchLayout,o,this.workgroupSize,[this.outputComponent*this.workPerThread,1,1]),i.util.assert("channelsLast"===t.dataFormat,(()=>"TODO: NCHW is unimplemented")),e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.convInfo=t,this.addBias=e,this.activation=n,this.hasPreluActivation=r,this.shaderKey=`depthwiseVec4_${n}_${this.convInfo.filterHeight}_${this.convInfo.filterWidth}_${this.convInfo.strideHeight}_${this.convInfo.strideWidth}_${this.workPerThread}`}getUserCode(){const t=(this.workPerThread-1)*this.convInfo.strideWidth+this.convInfo.filterWidth,e=this.convInfo.strideHeight,n=this.convInfo.strideWidth;return`\n      ${he(this.activation,this.hasPreluActivation,!0,4)}\n      fn readX(batch : i32, row : i32, col : i32, channel : i32) -> vec4<f32> {\n        var value = vec4<f32>(0.0);\n        if (col >=0 && col < uniforms.inDims[1]) {\n          value = getX(batch, row, col, channel);\n        }\n        return value;\n      }\n\n      ${b("index")} {\n        let width0 = uniforms.outShape[3] / ${this.outputComponent};\n        let d1 = (index % width0) * ${this.outputComponent};\n        var index1 = index / width0;\n        let width1 = uniforms.virtualWidth / ${this.workPerThread};\n        let c = (index1 % width1) * ${this.workPerThread};\n        index1 = index1 / width1;\n        let r = index1 % uniforms.outShape[1];\n        let batch = index1 / uniforms.outShape[1];\n\n        let xRCCorner = vec2<i32>(r, c) * vec2<i32>(${e}, ${n}) - uniforms.pads;\n\n        let xRCorner = xRCCorner.x;\n        let xCCorner = xRCCorner.y;\n        var xVals : array<vec4<f32>, ${t}>;\n        var dotProd : array<vec4<f32>, ${this.workPerThread}>;\n        for (var i = 0; i < ${this.workPerThread}; i++) {\n          dotProd[i] = vec4<f32>(0.0);\n        }\n\n        // Use constant instead of uniform can give better performance.\n        for (var wR = 0; wR < ${this.convInfo.filterHeight}; wR = wR + 1) {\n          let xR = xRCorner + wR;\n          if (xR >=0 && xR < uniforms.inDims[0]) {\n            for (var i = 0; i < ${t}; i++) {\n              xVals[i] = readX(batch, xR, xCCorner + i, d1);\n            }\n            for (var wC = 0; wC < ${this.convInfo.filterWidth}; wC = wC + 1) {\n              let wValue = getW(wR, wC, d1, 0);\n              for (var i = 0; i < ${this.workPerThread}; i++) {\n                dotProd[i] = fma(xVals[i * ${n} + wC], wValue, dotProd[i]);\n              }\n            }\n          }\n        }\n\n        for (var i = 0; i < ${this.workPerThread}; i = i + 1) {\n          let coords = vec4<i32>(batch, r, c + i, d1);\n          if (coordsInBounds4D(coords, uniforms.outShape)) {\n            var value = dotProd[i];\n            ${de(this.addBias,this.activation)}\n            setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);\n          }\n        }\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Mi{constructor(t,e=!1,n=null,r=!1){this.variableNames=["x","W"],this.uniforms="pads : vec2<i32>, inDims : vec2<i32>, filterHeight : i32,\n      filterWidth : i32, strides : vec2<i32>, dilations : vec2<i32>,",this.workgroupSize=[256,1,1],this.size=!0,this.outputShape=t.outShape,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.isChannelsLast="channelsLast"===t.dataFormat,e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.convInfo=t,this.addBias=e,this.activation=n,this.hasPreluActivation=r,this.shaderKey=`depthwise_${this.activation}_${this.isChannelsLast}`}getUserCode(){const t=this.isChannelsLast?"getX(batch, xR, xC, d1);":"getX(batch, d1, xR, xC);";return`\n      ${he(this.activation,this.hasPreluActivation,!1,4)}\n\n      ${b("index")} {\n        if (index < uniforms.size) {\n          let coords = getOutputCoords();\n          let batch = coords[0];\n          let xRCCorner = vec2<i32>(coords.${this.isChannelsLast?"yz":"zw"}) * uniforms.strides - uniforms.pads;\n          let d2 = coords[${this.isChannelsLast?3:1}];\n          let channelMul = uniforms.wShape[3];\n          let d1 = d2 / channelMul;\n          let q = d2 % channelMul;\n\n          let inputRowStart = xRCCorner.x;\n          let inputColStart = xRCCorner.y;\n          let inputRowEnd = inputRowStart + uniforms.filterHeight *\n              uniforms.dilations[0];\n          let inputColEnd = inputColStart + uniforms.filterWidth *\n              uniforms.dilations[1];\n\n          // Convolve x(?, ?, d1)|x(d1, ?, ?) with w(:, :, d1, q) to get\n          // y(yR, yC, d2)|y(d2, yR, yC). ? = to be determined. : = across all\n          // values in that axis. x(?, ?, d1) and y(yR, yC, d2) is for NHWC.\n          // x(d1, ?, ?) and y(d2, yR, yC) is for NCHW.\n          var value = 0.0;\n\n          // Extract if checking out of for loop for performance.\n          if (inputRowStart >= 0 && inputColStart >= 0 &&\n            inputRowEnd < uniforms.inDims[0] &&\n                inputColEnd < uniforms.inDims[1]) {\n              for (var wR = 0; wR < uniforms.filterHeight; wR = wR + 1) {\n                let xR = inputRowStart + wR * uniforms.dilations[0];\n\n                for (var wC = 0; wC < uniforms.filterWidth; wC = wC + 1) {\n                  let xC = inputColStart + wC * uniforms.dilations[1];\n\n                  let xVal = ${t};\n                  let wVal = getW(wR, wC, d1, q);\n                  value = value + xVal * wVal;\n                }\n              }\n            } else {\n              for (var wR = 0; wR < uniforms.filterHeight; wR = wR + 1) {\n                let xR = inputRowStart + wR * uniforms.dilations[0];\n\n                if (xR < 0 || xR >= uniforms.inDims[0]) {\n                  continue;\n                }\n\n                for (var wC = 0; wC < uniforms.filterWidth; wC = wC + 1) {\n                  let xC = inputColStart + wC * uniforms.dilations[1];\n\n                  if (xC < 0 || xC >= uniforms.inDims[1]) {\n                    continue;\n                  }\n\n                  let xVal = ${t};\n                  let wVal = getW(wR, wC, d1, q);\n                  value = value + xVal * wVal;\n                }\n              }\n            }\n            ${de(this.addBias,this.activation)}\n          setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);\n        }\n      }\n    `}}const Ci={kernelName:i.DepthwiseConv2dNative,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:a}=e,{strides:s,pad:u,dataFormat:l,dilations:c,dimRoundingMode:h}=r,d=i.backend_util.convertConv2DDataFormat(l);let f=c;null==f&&(f=[1,1]);const p=i.backend_util.computeConv2DInfo(o.shape,a.shape,s,f,u,h,!0,d),m=[{type:"int32",data:[p.padInfo.top,p.padInfo.left]},{type:"int32",data:[p.inHeight,p.inWidth]}],g="channelsLast"===p.dataFormat;let v;return!g&&p.inHeight>16&&p.inWidth>16&&1===p.strideHeight&&1===p.strideWidth&&1===p.dilationWidth&&1===p.dilationHeight&&p.inChannels===p.outChannels?v=new Ei(p.outShape,p.filterHeight,p.filterWidth):g&&p.outHeight>4&&p.outWidth>4&&p.strideWidth<=2&&p.inChannels===p.outChannels&&1===p.dilationHeight&&1===p.dilationWidth&&p.inChannels%4==0?(v=new Ai(p),m.push({type:"int32",data:[v.virtualWidth]})):(v=new Mi(p),m.push({type:"int32",data:[p.filterHeight]},{type:"int32",data:[p.filterWidth]},{type:"int32",data:[p.strideHeight,p.strideWidth]},{type:"int32",data:[p.dilationHeight,p.dilationWidth]})),n.runWebGPUProgram(v,[o,a],o.dtype,m)}};
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Ti{constructor(t){this.variableNames=["x","dy"],this.uniforms="strides : vec2<i32>, pads : vec2<i32>, filterDims : vec2<i32>, outHeight : i32,\n      outWidth : i32, inHeight : i32, inWidth : i32, batchSize : i32, channelMul : i32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t.filterShape,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="depthwise_conv2d_backprop_filter"}getUserCode(){return`\n      ${b("index")} {\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let wR = coords[0];\n        let wC = coords[1];\n        let d1 = coords[2];\n        let dm = coords[3];\n        let d2 = d1 * uniforms.channelMul + dm;\n\n        var dotProd = 0.0;\n        for (var b = 0; b < uniforms.batchSize; b++) {\n          for (var yR = 0; yR < uniforms.outHeight; yR++) {\n            let xR = wR + yR * uniforms.strides[0] - uniforms.pads[0];\n\n            if (xR < 0 || xR >= uniforms.inHeight) {\n              continue;\n            }\n\n            for (var yC = 0; yC < uniforms.outWidth; yC++) {\n              let xC = wC + yC * uniforms.strides[1] - uniforms.pads[1];\n\n              if (xC < 0 || xC >= uniforms.inWidth) {\n                continue;\n              }\n\n              let dyValue = getDy(b, yR, yC, d2);\n              let xValue = getX(b, xR, xC, d1);\n              dotProd += xValue * dyValue;\n            }\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n    `}}class ki{constructor(t){this.variableNames=["dy","W"],this.uniforms="strides : vec2<i32>, pads : vec2<i32>, filterDims : vec2<i32>,\n       outHeight : i32, outWidth : i32, channelMul : i32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t.inShape,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="depthwise_conv2d_backprop_input"}getUserCode(){return`\n      ${b("index")} {\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let batch = coords[0];\n        let d1 = coords[3];\n        let dyCorner = coords.yz - uniforms.pads;\n        let dyRCorner = dyCorner.x;\n        let dyCCorner = dyCorner.y;\n\n        var dotProd = 0.0;\n        for (var wR = 0; wR < uniforms.filterDims[0]; wR++) {\n          let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[0]);\n\n          if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {\n            continue;\n          }\n\n          let idyR = i32(dyR);\n          let wRPerm = uniforms.filterDims[0] - 1 - wR;\n\n          for (var wC = 0; wC < uniforms.filterDims[1]; wC++) {\n            let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[1]);\n\n            if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {\n              continue;\n            }\n\n            let idyC = i32(dyC);\n            let wCPerm = uniforms.filterDims[1] - 1 - wC;\n\n            for (var dm = 0; dm < uniforms.channelMul; dm++) {\n              let d2 = d1 * uniforms.channelMul + dm;\n              let xValue = getDy(batch, idyR, idyC, d2);\n              let wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n    `}}const Ii={kernelName:i.DepthwiseConv2dNativeBackpropFilter,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,dy:a}=e,{strides:s,dilations:u,pad:l,dimRoundingMode:c,filterShape:h}=r,d=i.backend_util.computeConv2DInfo(o.shape,h,s,u,l,c,!0),f=new Ti(d),p=[{type:"int32",data:[d.strideHeight,d.strideWidth]},{type:"int32",data:[d.padInfo.top,d.padInfo.left]},{type:"int32",data:[d.filterHeight,d.filterWidth]},{type:"int32",data:[d.outHeight]},{type:"int32",data:[d.outWidth]},{type:"int32",data:[d.inHeight]},{type:"int32",data:[d.inWidth]},{type:"int32",data:[d.batchSize]},{type:"int32",data:[d.outChannels/d.inChannels]}];return n.runWebGPUProgram(f,[o,a],"float32",p)}};const Ni={kernelName:i.DepthwiseConv2dNativeBackpropInput,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,filter:a}=e,{strides:s,dilations:u,pad:l,dimRoundingMode:c,inputShape:h}=r,d=i.backend_util.computeConv2DInfo(h,a.shape,s,u,l,c,!0),f=new ki(d),p=[{type:"int32",data:[d.strideHeight,d.strideWidth]},{type:"int32",data:[d.filterHeight-1-d.padInfo.top,d.filterWidth-1-d.padInfo.left]},{type:"int32",data:[d.filterHeight,d.filterWidth]},{type:"int32",data:[d.outHeight]},{type:"int32",data:[d.outWidth]},{type:"int32",data:[d.outChannels/d.inChannels]}];return n.runWebGPUProgram(f,[o,a],o.dtype,p)}};
/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Pi{constructor(t){this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[t,t],this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="diag"}getUserCode(){return`\n      ${b("index")} {\n        if (index < uniforms.size) {\n          let coords = getOutputCoords();\n          let value = select(0.0, getX(coords[0]), coords[0] == coords[1]);\n          setOutputAtIndex(index, value);\n        }\n      }\n    `}}const Oi={kernelName:i.Diag,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n}=t,{x:r}=e,o=[...r.shape,...r.shape],a=i.util.sizeFromShape(r.shape),s=Me({inputs:{x:r},backend:n,attrs:{shape:[a]}}),u=new Pi(a),l=n.runWebGPUProgram(u,[s],s.dtype),c=Me({inputs:{x:l},backend:n,attrs:{shape:o}});return n.disposeData(s.dataId),n.disposeData(l.dataId),c}};
/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Li{constructor(t){this.variableNames=["x","w"],this.uniforms="filterDims: vec2<i32>, pads: vec2<i32>, strides: vec2<i32>, dilations: vec2<i32>",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t.outShape,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="dilation2d"}getUserCode(){return`\n       ${b("index")} {\n         if (index < uniforms.size) {\n           let neg_infinity = -3.4e38;\n           let coords = getOutputCoords();\n           let batch = coords.x;\n           let d1 = coords.w;\n           let outTopLeftCorner = coords.yz * uniforms.strides - uniforms.pads;\n           let hBeg = outTopLeftCorner.x;\n           let wBeg = outTopLeftCorner.y;\n\n           var curVal = neg_infinity;\n           for (var h = 0; h < uniforms.filterDims[0]; h = h + 1) {\n             let hIn = hBeg + h * uniforms.dilations[0];\n\n             if (hIn >= 0 && hIn < uniforms.xShape[1]) {\n               for (var w = 0; w < uniforms.filterDims[1]; w = w + 1) {\n                 let wIn = wBeg + w * uniforms.dilations[1];\n\n                 if (wIn >= 0 && wIn < uniforms.xShape[2]) {\n                   let val = getX(batch, hIn, wIn, d1) + getW(h, w, d1);\n                   if (val > curVal) {\n                     curVal = val;\n                   }\n                 }\n               }\n             }\n           }\n\n           setOutputAtIndex(index, curVal);\n         }\n       }\n     `}}const Ri={kernelName:i.Dilation2D,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:a}=e,{strides:s,pad:u,dilations:l}=r,c=i.backend_util.computeDilation2DInfo(o.shape,a.shape,s,u,"NHWC",l),h=[c.padInfo.top,c.padInfo.left],d=[{type:"int32",data:[c.filterHeight,c.filterWidth]},{type:"int32",data:[...h]},{type:"int32",data:[c.strideHeight,c.strideWidth]},{type:"int32",data:[c.dilationHeight,c.dilationWidth]}],f=new Li(c);return n.runWebGPUProgram(f,[o,a],o.dtype,d)}};
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Di{constructor(t,e){if(this.variableNames=["x","w","dy"],this.uniforms="filterDims: vec2<i32>, pads: vec2<i32>, strides: vec2<i32>, dilations: vec2<i32>, dySize: i32,",this.workgroupSize=[64,1,1],this.atomic=!0,this.outputShape=t.inShape,this.dispatchLayout=L(t.outShape),this.dispatch=I(this.dispatchLayout,t.outShape,this.workgroupSize),"float32"!==e&&"int32"!==e)throw new Error(`Dilation2DBackpropInput only supports float32 and int32\n          types, does not support ${e} type.`);this.type=e,this.shaderKey="dilation2DBackpropInput"}getUserCode(){return`\n       ${b("index")} {\n         if (index < uniforms.dySize) {\n           let coords = getDyCoordsFromIndex(index);\n           let b = coords[0];\n           let r = coords[1];\n           let c = coords[2];\n           let d = coords[3];\n\n           let dyCorner = vec2<i32>(r, c) * uniforms.strides - uniforms.pads;\n           var curVal = -3.4e38;  // neg_infinity\n           var xRMax = 0;\n           var xCMax = 0;\n\n           // In the case of multiple argmax branches, we only back-propagate\n           // along the last branch, i.e., the one with largest value of\n           // 'wR * uniforms.filterDims[1] + wC', similarly to the max-pooling\n           // backward routines.\n           for (var wR = 0; wR < uniforms.filterDims[0]; wR++) {\n             let xR = dyCorner.x + wR * uniforms.dilations[0];\n\n             if (xR >= 0 && xR < uniforms.xShape[1]) {\n               for (var wC = 0; wC < uniforms.filterDims[1]; wC++) {\n                 let xC = dyCorner.y + wC * uniforms.dilations[1];\n\n                 if (xC >= 0 && xC < uniforms.xShape[2]) {\n                   let val = getX(b, xR, xC, d) + getW(wR, wC, d);\n                   if (val > curVal) {\n                     curVal = val;\n                     xRMax = xR;\n                     xCMax = xC;\n                   }\n                 }\n               }\n             }\n           }\n\n           let flatIndexIn = d + uniforms.xShape[3] *\n               (xCMax + uniforms.xShape[2] * (xRMax + uniforms.xShape[1] * b));\n           let value = getDy(b, r, c, d);\n           ${f("&result[flatIndexIn]","value",this.type)}\n         }\n       }\n     `}}class zi{constructor(t,e,n){if(this.variableNames=["x","w","dy"],this.uniforms="filterDims: vec2<i32>, pads: vec2<i32>, strides: vec2<i32>, dilations: vec2<i32>, dySize: i32,",this.workgroupSize=[64,1,1],this.atomic=!0,this.outputShape=t.filterShape,this.dispatchLayout=L(t.outShape),this.dispatch=I(this.dispatchLayout,t.outShape,this.workgroupSize),"float32"!==n&&"int32"!==n)throw new Error(`Dilation2DBackpropFilter only supports float32 and int32\n          types, does not support ${n} type.`);this.type=n,this.shaderKey="dilation2DBackpropFilter"}getUserCode(){return`\n       ${b("index")} {\n         if (index < uniforms.dySize) {\n           let coords = getDyCoordsFromIndex(index);\n           let b = coords[0];\n           let r = coords[1];\n           let c = coords[2];\n           let d = coords[3];\n\n           let dyCorner = vec2<i32>(r, c) * uniforms.strides - uniforms.pads;\n           var curVal = -3.4e38;  // neg_infinity\n           var wRMax = 0;\n           var wCMax = 0;\n\n           // In the case of multiple argmax branches, we only back-propagate\n           // along the last branch, i.e., the one with largest value of\n           // 'wR * uniforms.filterDims[1] + wC', similarly to the max-pooling\n           // backward routines.\n           for (var wR = 0; wR < uniforms.filterDims[0]; wR++) {\n             let xR = dyCorner.x + wR * uniforms.dilations[0];\n\n             if (xR >= 0 && xR < uniforms.xShape[1]) {\n               for (var wC = 0; wC < uniforms.filterDims[1]; wC++) {\n                 let xC = dyCorner.y + wC * uniforms.dilations[1];\n\n                 if (xC >= 0 && xC < uniforms.xShape[2]) {\n                   let val = getX(b, xR, xC, d) + getW(wR, wC, d);\n                   if (val > curVal) {\n                     curVal = val;\n                     wRMax = wR;\n                     wCMax = wC;\n                   }\n                 }\n               }\n             }\n           }\n\n           let flatIndexIn = d + uniforms.wShape[2] * (wCMax + wRMax * uniforms.wShape[1]);\n           let value = getDy(b, r, c, d);\n           ${f("&result[flatIndexIn]","value",this.type)}\n         }\n       }\n     `}}const Fi={kernelName:i.Dilation2DBackpropFilter,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:a,dy:s}=e,{strides:u,pad:l,dilations:c}=r,h=i.backend_util.computeDilation2DInfo(o.shape,a.shape,u,l,"NHWC",c),d=a.dtype,f=new zi(h,a.shape,d),p=[{type:"int32",data:[h.filterHeight,h.filterWidth]},{type:"int32",data:[h.padInfo.top,h.padInfo.left]},{type:"int32",data:[h.strideHeight,h.strideWidth]},{type:"int32",data:[h.dilationHeight,h.dilationWidth]},{type:"int32",data:[i.util.sizeFromShape(h.outShape)]}],m=Ee({backend:n,attrs:{shape:a.shape,value:0,dtype:d}});return n.runWebGPUProgram(f,[o,a,s],d,p,m)}};const Bi={kernelName:i.Dilation2DBackpropInput,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:a,dy:s}=e,{strides:u,pad:l,dilations:c}=r,h=i.backend_util.computeDilation2DInfo(o.shape,a.shape,u,l,"NHWC",c),d=o.dtype,f=new Di(h,d),p=[{type:"int32",data:[h.filterHeight,h.filterWidth]},{type:"int32",data:[h.padInfo.top,h.padInfo.left]},{type:"int32",data:[h.strideHeight,h.strideWidth]},{type:"int32",data:[h.dilationHeight,h.dilationWidth]},{type:"int32",data:[i.util.sizeFromShape(h.outShape)]}],m=Ee({backend:n,attrs:{shape:h.inShape,value:0,dtype:d}});return n.runWebGPUProgram(f,[o,a,s],d,p,m)}};
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Ui{constructor(t,e,n){this.variableNames=["Image"],this.uniforms="alpha: f32,",this.workgroupSize=[64,1,1],this.pixelsOpType=p.DRAW,this.size=!0,this.outputShape=t,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.type=e,this.textureFormat=n,this.shaderKey=`draw_${e}_${n}`}getUserCode(){let t;const e="float32"===this.type?"value":"value / 255.0";t=`\n      if (uniforms.numChannels == 1) {\n        rgba[0] = ${e};\n        rgba[1] = ${e};\n        rgba[2] = ${e};\n      } else {\n        rgba[d] = ${e};\n      }`;return`\n       @group(0) @binding(0) var outImage : texture_storage_2d<${this.textureFormat}, write>;\n       ${b("index")} {\n         if (index < uniforms.size) {\n           var rgba = vec4<f32>(0.0, 0.0, 0.0, uniforms.alpha);\n           for (var d = 0; d < uniforms.numChannels; d = d + 1) {\n             let value = f32(inBuf[index * uniforms.numChannels + d]);\n             ${t}\n           }\n           rgba.x = rgba.x * rgba.w;\n           rgba.y = rgba.y * rgba.w;\n           rgba.z = rgba.z * rgba.w;\n           let coords = getCoordsFromIndex(index);\n           textureStore(outImage, vec2<i32>(coords.yx), rgba);\n         }\n       }\n      `}}const ji={kernelName:i.Draw,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use backend file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{image:i}=e,{canvas:o,options:a}=r,[s,u]=i.shape.slice(0,2),{imageOptions:l}=a||{},c=(null==l?void 0:l.alpha)||1,h=n.device.features.has("bgra8unorm-storage")?"bgra8unorm":"rgba8unorm",d=[s,u],f=new Ui(d,i.dtype,h);o.width=u,o.height=s;const p="webgpu";let m,g=o.getContext(p);g||(m=new OffscreenCanvas(u,s),g=m.getContext(p));const v=3===i.shape.length?i.shape[2]:1;g.configure({device:n.device,format:h,usage:GPUTextureUsage.STORAGE_BINDING,alphaMode:"premultiplied"});const y="int32",b=n.makeTensorInfo(d,y),x=n.tensorMap.get(b.dataId);x.resource=g.getCurrentTexture(),x.external=!0;const w=[{type:"uint32",data:[v]},{type:"float32",data:[c]}];if(n.runWebGPUProgram(f,[i],y,w,b),m){const t=o.getContext("2d");if(!t)throw new Error("Please make sure this canvas has only been used for 2d or webgpu context!");t.drawImage(m,0,0)}return n.disposeData(b.dataId),i}},Vi=Fe({opType:j.MUL,cpuKernelImpl:an,supportsComplex:!0}),Hi={kernelName:i.Multiply,backendName:"webgpu",kernelFunc:Vi};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Gi(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:o,keepDims:a}=r;return Bn(i,o,a,"sum",n)}const Wi={kernelName:i.Sum,backendName:"webgpu",kernelFunc:Gi};const Xi={kernelName:i.Einsum,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{equation:o}=r,a=e,{allDims:s,summedDims:u,idDims:l}=i.backend_util.decodeEinsumEquation(o,a.length);i.backend_util.checkEinsumDimSizes(s.length,l,a);const{path:c,steps:h}=i.backend_util.getEinsumComputePath(u,l),d=h.length;let f=null,p=s.length;const m=[];for(let t=0;t<d;++t){for(const e of h[t]){const{permutationIndices:t,expandDims:r}=i.backend_util.getEinsumPermutation(p,l[e]);let o;i.backend_util.isIdentityPermutation(t)?o=a[e]:(o=Rn({inputs:{x:a[e]},backend:n,attrs:{perm:t}}),m.push(o));const s=o.shape.slice();for(let t=0;t<r.length;++t)s.splice(r[t],0,1);i.util.arraysEqual(o.shape,s)||(o=Me({inputs:{x:o},backend:n,attrs:{shape:s}}),m.push(o)),null===f?f=o:(f=Vi({inputs:{a:o,b:f},backend:n}),m.push(f))}t<d-1&&(c[t]>=0&&(f=Gi({inputs:{x:f},backend:n,attrs:{axis:c[t]-(s.length-p),keepDims:!1}}),m.push(f)),p--)}for(const t of m)t!==f&&n.disposeData(t.dataId);return f}},Yi=ze({opType:yt.ELU}),qi={kernelName:i.Elu,backendName:"webgpu",kernelFunc:Yi},$i={kernelName:i.EluGrad,backendName:"webgpu",kernelFunc:t=>{const{inputs:e,backend:n}=t,{dy:r,y:i}=e,o=new Ne(j.ELU_DER,r.shape,i.shape);return n.runWebGPUProgram(o,[r,i],r.dtype)}},Ki=Fe({opType:j.EQUAL,dtype:"bool",cpuKernelImpl:Ge}),Zi={kernelName:i.Equal,backendName:"webgpu",kernelFunc:Ki},Qi=ze({opType:yt.ERF}),Ji={kernelName:i.Erf,backendName:"webgpu",kernelFunc:Qi},to=ze({opType:yt.EXP,cpuKernelImpl:We,dtype:"float32"}),eo={kernelName:i.Exp,backendName:"webgpu",kernelFunc:to};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function no(t){const{inputs:e,attrs:n,backend:r}=t,{dim:o}=n,{input:a}=e,s=a.shape.length,u=a.shape.slice();let l=o;return o<0&&(i.util.assert(-(s+1)<=o,(()=>`Axis must be in the interval [${-(s+1)}, ${s}]`)),l=s+o+1),u.splice(l,0,1),Me({inputs:{x:a},backend:r,attrs:{shape:u}})}const ro={kernelName:i.ExpandDims,backendName:"webgpu",kernelFunc:no},io=ze({opType:yt.EXPM1,cpuKernelImpl:Xe}),oo={kernelName:i.Expm1,backendName:"webgpu",kernelFunc:io};
/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class ao{constructor(t,e){this.variableNames=["real","imag"],this.outputShape=[],this.uniforms="exponentMultiplier : f32, denominator: f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.component=t,this.shaderKey=`fft_${t}`}getUserCode(){return`\n    fn unaryOpComplex(real: f32, expR: f32, imag: f32, expI: f32) -> f32 {\n      ${"real"===this.component?"return real * expR - imag * expI;":"return real * expI + imag * expR;"}\n    }\n\n    fn mulMatDFT(batch: i32, index: i32) -> f32 {\n      let indexRatio = f32(index) / f32(uniforms.realShape[1]);\n      let exponentMultiplierTimesIndexRatio =\n          uniforms.exponentMultiplier * indexRatio;\n\n      var result = 0.0;\n\n      for (var i = 0; i < uniforms.realShape[1]; i = i + 1) {\n        // x = (-2|2 * PI / N) * index * i;\n        let x = exponentMultiplierTimesIndexRatio * f32(i);\n        let expR = cos(x);\n        let expI = sin(x);\n        let real = getReal(batch, i);\n        let imag = getImag(batch, i);\n\n        result = result +\n            unaryOpComplex(real, expR, imag, expI) / uniforms.denominator;\n      }\n\n      return result;\n    }\n\n    ${b("index")} {\n      if (index < uniforms.size) {\n        let coords = getOutputCoords();\n        setOutputAtIndex(index, mulMatDFT(coords[0], coords[1]));\n      }\n    }\n  `}}
/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function so(t,e,n){const r=n.tensorMap.get(t.dataId),o=i.util.sizeFromShape(t.shape),a=t.shape[t.shape.length-1],s=[],u=Me({inputs:{x:t},backend:n,attrs:{shape:[o/a,a]}});s.push(u);const l=u.shape,c=new ao("real",l),h=new ao("imag",l),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],f=[{type:"float32",data:[e?2*Math.PI:-2*Math.PI]},{type:"float32",data:[e?l[1]:1]}],p=n.runWebGPUProgram(c,d,"float32",f);s.push(p);const m=n.runWebGPUProgram(h,d,"float32",f);s.push(m);const g=Le({inputs:{real:p,imag:m},backend:n});s.push(g);const v=Me({inputs:{x:g},backend:n,attrs:{shape:t.shape}});return s.forEach((t=>n.disposeData(t.dataId))),v}const uo={kernelName:i.FFT,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n}=t,{input:r}=e;return so(r,!1,n)}};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class lo{constructor(t){this.outputShape=[],this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="flipLeftRight"}getUserCode(){return`\n      ${b("index")} {\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let coordX = uniforms.xShape[2] - coords[2] - 1;\n          let outputValue = getX(coords[0], coords[1], coordX, coords[3]);\n          setOutputAtIndex(index, outputValue);\n        }\n      }\n    `}}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const co={kernelName:i.FlipLeftRight,backendName:"webgpu",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,i=new lo(n.shape);return r.runWebGPUProgram(i,[n],n.dtype)}},ho=ze({opType:yt.FLOOR,cpuKernelImpl:Ye}),fo={kernelName:i.Floor,backendName:"webgpu",kernelFunc:ho},po=Fe({opType:j.FLOOR_DIV,cpuKernelImpl:qe,dtype:"int32"}),mo={kernelName:i.FloorDiv,backendName:"webgpu",kernelFunc:po};
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class go{constructor(t,e,n=!1){this.pixelsOpType=p.FROM_PIXELS,this.outputShape=[0],this.variableNames=[],this.workgroupSize=[256,1,1],this.outputShape=t,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize,[e,1,1]),this.importVideo=n,this.shaderKey=`fromPixels_${this.importVideo}`}getUserCode(){const t=this.importVideo?"textureLoad(src, vec2<i32>(coords.yx));":"textureLoad(src, vec2<i32>(coords.yx), 0)";return`\n      @binding(1) @group(0) var src: ${this.importVideo?"texture_external":"texture_2d<f32>"};\n      ${b("index")} {\n        let flatIndex = index * uniforms.numChannels;\n        if (flatIndex < uniforms.size) {\n          let coords = getCoordsFromIndex(flatIndex);\n          let values = ${t};\n          for (var i = 0; i < uniforms.numChannels; i = i + 1) {\n            result[flatIndex + i] = i32(floor(255.0 * values[i]));\n          }\n        }\n      }\n  `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use backend file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const vo={kernelName:i.FromPixels,backendName:"webgpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:o}=e;const{numChannels:a}=r;if(null==o)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");const s="undefined"!=typeof HTMLVideoElement&&o instanceof HTMLVideoElement,u="undefined"!=typeof HTMLImageElement&&o instanceof HTMLImageElement,l="undefined"!=typeof HTMLCanvasElement&&o instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&o instanceof OffscreenCanvas,c="undefined"!=typeof ImageBitmap&&o instanceof ImageBitmap,[h,d]=s?[o.videoWidth,o.videoHeight]:[o.width,o.height],f=[d,h,a],p=(0,i.env)().getBool("WEBGPU_IMPORT_EXTERNAL_TEXTURE")&&s,m=s||u;if(c||l||m){let t;if(p)t=n.device.importExternalTexture({source:o});else{if(m){const t=(0,i.env)().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");null!=yo&&t===bo||(bo=t,yo=document.createElement("canvas").getContext("2d",{willReadFrequently:bo})),yo.canvas.width=h,yo.canvas.height=d,yo.drawImage(o,0,0,h,d),o=yo.canvas}const e=GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING,r="rgba8unorm",a=n.textureManager.acquireTexture(f[1],f[0],r,e);n.queue.copyExternalImageToTexture({source:o},{texture:a},[f[1],f[0]]),t=a}const e=i.util.sizeFromShape(f),r=i.util.computeStrides(f),s=new go(f,a,p),u=[{type:"uint32",data:[e]},{type:"uint32",data:[a]},{type:"uint32",data:[...r]}],l=n.makeTensorInfo([d,h],"int32");n.tensorMap.get(l.dataId).resource=t;const c=n.runWebGPUProgram(s,[l],"int32",u);return n.disposeData(l.dataId),c}const g=o.data;let v=g;if(null!=a&&4!==a){v=new Uint8Array(o.width*o.height*a);const t=g.length;let e=0;for(let n=0;n<t;n++)n%4<a&&(v[e++]=g[n])}const y=n.makeTensorInfo(f,"int32",new Int32Array(v));return n.uploadToGPU(y.dataId),y}};let yo,bo=(0,i.env)().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class xo{constructor(t,e,n,r,o){this.uniforms="varianceEpsilon : f32,",this.workgroupSize=[128,1,1],this.size=!0,this.variableNames=["x","mean","variance"],i.backend_util.assertAndGetBroadcastShape(t,e),i.backend_util.assertAndGetBroadcastShape(t,n),this.outputShape=t,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),null!=r&&(i.backend_util.assertAndGetBroadcastShape(t,r),this.variableNames.push("offset")),null!=o&&(i.backend_util.assertAndGetBroadcastShape(t,o),this.variableNames.push("scale")),this.offsetShape=r,this.scaleShape=o,this.shaderKey="batchNorm"}getUserCode(){let t="0.0";null!=this.offsetShape&&(t="getOffsetByOutputIndex(index)");let e="1.0";null!=this.scaleShape&&(e="getScaleByOutputIndex(index)");return`\n      ${b("index")} {\n        if (index < uniforms.size)\n        {\n          let xValue = getXByOutputIndex(index);\n          let meanValue = getMeanByOutputIndex(index);\n          let varianValue = getVarianceByOutputIndex(index);\n          let offsetValue = ${t};\n          let scaleValue = ${e};\n          let inv = scaleValue * inverseSqrt(varianValue + f32(uniforms.varianceEpsilon));\n          setOutputAtIndex(index,dot(vec3<f32>(xValue, -meanValue, offsetValue), vec3<f32>(inv, inv, 1.0)));\n        }\n      }\n  `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const wo={kernelName:i.FusedBatchNorm,backendName:"webgpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r,scale:i,offset:o,mean:a,variance:s}=t,{varianceEpsilon:u}=e,l=n,c=[r,a,s];let h=null;null!=o&&(h=o.shape,c.push(o));let d=null;null!=i&&(d=i.shape,c.push(i));const f=new xo(r.shape,a.shape,s.shape,h,d),p=[{type:"float32",data:[u]}];return l.runWebGPUProgram(f,c,r.dtype,p)}};const _o={kernelName:i.FusedConv2D,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:a,bias:s,preluActivationWeights:u}=e,{strides:l,pad:c,dataFormat:h,dilations:d,dimRoundingMode:f,activation:p,leakyreluAlpha:m}=r,g=i.backend_util.convertConv2DDataFormat(h);return $r({x:o,filter:a,convInfo:i.backend_util.computeConv2DInfo(o.shape,a.shape,l,d,c,f,!1,g),backend:n,bias:s,preluActivationWeights:u,leakyreluAlpha:m,activation:p})}};const So={kernelName:i.FusedDepthwiseConv2D,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:a,bias:s,preluActivationWeights:u}=e,{strides:l,pad:c,dilations:h,dimRoundingMode:d,activation:f,leakyreluAlpha:p}=r;let m=h;null==m&&(m=[1,1]),i.util.assert(i.backend_util.eitherStridesOrDilationsAreOne(l,m),(()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${m}'`));const g=i.backend_util.computeConv2DInfo(o.shape,a.shape,l,m,c,d,!0),v=[o,a],y=null!=s,b=null!=u;y&&v.push(s),b&&v.push(u);const x=[{type:"int32",data:[g.padInfo.top,g.padInfo.left]},{type:"int32",data:[g.inHeight,g.inWidth]}];let w;return g.outHeight>4&&g.outWidth>4&&g.strideWidth<=2&&g.inChannels===g.outChannels&&1===g.dilationHeight&&1===g.dilationWidth&&g.inChannels%4==0?(w=new Ai(g,y,f,b),x.push({type:"int32",data:[w.virtualWidth]})):(w=new Mi(g,y,f,b),x.push({type:"int32",data:[g.filterHeight]},{type:"int32",data:[g.filterWidth]},{type:"int32",data:[g.strideHeight,g.strideWidth]},{type:"int32",data:[g.dilationHeight,g.dilationWidth]})),"leakyrelu"===f&&(x.push({type:"float32",data:[p]}),w.uniforms+=" alpha : f32,"),n.runWebGPUProgram(w,v,"float32",x)}};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Eo{constructor(t,e){this.variableNames=["A","indices"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey=`gathernd_${t}`,this.sliceDim=t,this.uniforms=`sliceDim : i32, strides : ${v(t)},`}getUserCode(){let t;t=this.sliceDim>1?"uniforms.strides[j]":"uniforms.strides";return`\n      ${b("index")} {\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          var flattenIndex = 0;\n          for (var j = 0; j < uniforms.sliceDim; j = j + 1) {\n            let indexTemp = i32(round(getIndices(coords[0], j)));\n            let strideNum = ${t};\n            flattenIndex = flattenIndex + indexTemp * strideNum;\n          }\n\n          setOutputAtIndex(index, getA(flattenIndex, coords[1]));\n        }\n      }\n      `}}const Ao={kernelName:i.GatherNd,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n}=t,{params:r,indices:o}=e,a=o.shape,s=a[a.length-1],u=i.util.sizeFromShape(r.shape),[l,c,h,d]=i.backend_util.prepareAndValidate(r,o),f=Me({inputs:{x:o},backend:n,attrs:{shape:[c,s]}}),p=Me({inputs:{x:r},backend:n,attrs:{shape:[i.util.sizeFromShape(r.shape)/h,h]}});if(n.shouldExecuteOnCPU([r,o])||"string"===r.dtype){const t=n.readSync(o.dataId),e=n.bufferSync(r),i=$e(t,e,r.dtype,c,s,h,d,r.shape,u);return n.makeTensorInfo(l,r.dtype,i.values)}const m=new Eo(s,[c,h]),g=[{type:"int32",data:[s]},{type:"int32",data:d}],v=n.runWebGPUProgram(m,[p,f],p.dtype,g),y=Me({inputs:{x:v},backend:n,attrs:{shape:l}});return n.disposeData(f.dataId),n.disposeData(p.dataId),n.disposeData(v.dataId),y}};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Mo{constructor(t,e){this.variableNames=["A","indices"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t.slice(),this.aShape=t,this.outputShape=e,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="gather"}getUserCode(){const t=function(t){const e=["resRC.x","resRC.y","resRC.z","resRC.w"],n=[];for(let r=0;r<t.length;r++)2===r?n.push("indexZ"):n.push(`${e[r]}`);return n.join()}(this.aShape);return`\n      ${b("index")} {\n        if (index < uniforms.size) {\n          let resRC = getCoordsFromIndex(index);\n          let indexZ = i32(getIndices(resRC.x, resRC.z));\n          let inBounds = select(0.0, 1.0, indexZ >= 0 && indexZ < uniforms.aShape[2]);\n          setOutputAtIndex(index, inBounds * getA(${t}));\n        }\n      }\n    `}}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Co(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,indices:a}=e,{axis:s,batchDims:u}=r,l=i.util.parseAxisParam(s,o.shape)[0],c=i.backend_util.segment_util.collectGatherOpShapeInfo(o,a,l,u),h=i.util.sizeFromShape(a.shape),d=[],f=Me({inputs:{x:o},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),p=Me({inputs:{x:a},backend:n,attrs:{shape:[c.batchSize,h/c.batchSize]}});d.push(f),d.push(p);const m=[c.batchSize,c.outerSize,h/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([o,a])){const t=n.tensorMap.get(p.dataId).values,e=(0,i.buffer)(p.shape,p.dtype,t),r=n.tensorMap.get(f.dataId).values,o=(0,i.buffer)(f.shape,f.dtype,r),a=Ke(o,e,m);return d.forEach((t=>n.disposeData(t.dataId))),n.makeTensorInfo(c.outputShape,a.dtype,a.values)}const g=new Mo(f.shape,m),v=n.runWebGPUProgram(g,[f,p],f.dtype);d.push(v);const y=Me({inputs:{x:v},backend:n,attrs:{shape:c.outputShape}});return d.forEach((t=>n.disposeData(t.dataId))),y}const To={kernelName:i.GatherV2,backendName:"webgpu",kernelFunc:Co},ko=Fe({opType:j.GREATER,cpuKernelImpl:Qe,dtype:"bool"}),Io={kernelName:i.Greater,backendName:"webgpu",kernelFunc:ko},No=Fe({opType:j.GREATER_EQUAL,dtype:"bool",cpuKernelImpl:Ze}),Po={kernelName:i.GreaterEqual,backendName:"webgpu",kernelFunc:No};const Oo={kernelName:i.IFFT,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n}=t,{input:r}=e;return so(r,!0,n)}},Lo=ze({opType:yt.IS_FINITE,dtype:"bool"}),Ro={kernelName:i.IsFinite,backendName:"webgpu",kernelFunc:Lo},Do=ze({opType:yt.IS_INF,dtype:"bool"}),zo={kernelName:i.IsInf,backendName:"webgpu",kernelFunc:Do},Fo=ze({opType:yt.IS_NAN,dtype:"bool"}),Bo={kernelName:i.IsNan,backendName:"webgpu",kernelFunc:Fo};const Uo={kernelName:i.LeakyRelu,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{alpha:o}=r,a=[{type:"float32",data:[o]}],s=new De(i.shape,yt.LEAKYRELU,"alpha : f32,");return n.runWebGPUProgram(s,[i],"float32",a)}},jo=Fe({opType:j.LESS,dtype:"bool",cpuKernelImpl:tn}),Vo={kernelName:i.Less,backendName:"webgpu",kernelFunc:jo},Ho=Fe({opType:j.LESS_EQUAL,dtype:"bool",cpuKernelImpl:Je}),Go={kernelName:i.LessEqual,backendName:"webgpu",kernelFunc:Ho};
/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Wo{constructor(t){this.variableNames=[],this.outputShape=[],this.uniforms="start : f32, step : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[t],this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="linSpace"}getUserCode(){return`\n      ${b("index")} {\n        if (index < uniforms.size) {\n          setOutputAtIndex(index, uniforms.start + f32(index) * uniforms.step);\n        }\n      }\n    `}}const Xo={kernelName:i.LinSpace,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{backend:e,attrs:n}=t,{start:r,stop:i,num:o}=n,a=(i-r)/(o-1),s=new Wo(o),u=[{type:"float32",data:[r]},{type:"float32",data:[a]}];return e.runWebGPUProgram(s,[],"float32",u)}},Yo=ze({opType:yt.LOG,cpuKernelImpl:en}),qo={kernelName:i.Log,backendName:"webgpu",kernelFunc:Yo},$o=ze({opType:yt.LOG1P}),Ko={kernelName:i.Log1p,backendName:"webgpu",kernelFunc:$o},Zo=Fe({opType:j.LOGICAL_AND,dtype:"bool"}),Qo={kernelName:i.LogicalAnd,backendName:"webgpu",kernelFunc:Zo},Jo=ze({opType:yt.LOGICAL_NOT}),ta={kernelName:i.LogicalNot,backendName:"webgpu",kernelFunc:Jo},ea=Fe({opType:j.LOGICAL_OR}),na={kernelName:i.LogicalOr,backendName:"webgpu",kernelFunc:ea},ra="\n  var powValue = 0.0;\n  let basis = uniforms.bias + uniforms.alpha * sum;\n  if (uniforms.beta == 0.5) {\n    powValue = inverseSqrt(basis);\n  } else if (uniforms.beta == 1.0) {\n    powValue = 1.0 / basis;\n  } else {\n    powValue = exp(log(basis) * (-uniforms.beta));\n  }\n";class ia{constructor(t){this.outputShape=[],this.variableNames=["x"],this.uniforms="radius : i32, bias : f32, alpha : f32, beta : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="lrn"}getUserCode(){return`\n    ${b("index")} {\n      if (index < uniforms.size) {\n        let coords = getOutputCoords();\n        let b = coords[0];\n        let r = coords[1];\n        let c = coords[2];\n        let d = coords[3];\n\n        let x = getX(b, r, c, d);\n        var sum = 0.0;\n        for (var i = -uniforms.radius; i <= uniforms.radius; i = i + 1) {\n          let idx = d + i;\n          if (idx >= 0 && idx < uniforms.xShape[3]) {\n            let z = getX(b, r, c, idx);\n            sum = sum + z * z;\n          }\n        }\n        ${ra}\n\n        setOutputAtIndex(index, x * powValue);\n      }\n    }\n  `}}class oa{constructor(t,e){this.outputShape=[],this.variableNames=["x"],this.uniforms="radius : i32, bias : f32, alpha : f32, beta : f32,",this.workgroupSize=[256,1,1],this.maxAllowRadius=16,i.util.assert(e<=this.maxAllowRadius,(()=>`Radius must be less than or equal to ${this.maxAllowRadius}, current radius is ${e}`)),this.outputShape=t,this.elementsPerWorkgroup=this.workgroupSize[0]-2*this.maxAllowRadius,this.dispatchLayout={x:[3],y:[2],z:[0,1]},this.dispatch=I(this.dispatchLayout,this.outputShape,[this.elementsPerWorkgroup,this.workgroupSize[1],this.workgroupSize[2]]),this.shaderKey="lrn_shared"}getUserCode(){return`\n    var <workgroup>lrnSub: array<f32, ${this.workgroupSize[0]}>;\n    const elementsPerWorkgroup = ${this.elementsPerWorkgroup};\n    const maxAllowRadius = ${this.maxAllowRadius};\n\n    ${b()} {\n      let localDepth = i32(localId.x);\n      let workgroupDepth = i32(workgroupId.x) * elementsPerWorkgroup;\n      let xDepth = workgroupDepth + localDepth - maxAllowRadius;\n      let b = i32(globalId.z) / uniforms.xShape[1];\n      let r = i32(globalId.z) - b * uniforms.xShape[1];\n      let c = i32(globalId.y);\n      let d = workgroupDepth + localDepth;\n\n      var x = 0.0;\n      if (xDepth >= 0 && xDepth < uniforms.xShape[3]) {\n        x = getX(b, r, c, xDepth);\n      }\n      lrnSub[localDepth] = x;\n      workgroupBarrier();\n\n      if (localDepth < elementsPerWorkgroup && d < uniforms.outShape[3]) {\n        var sum = 0.0;\n        let index = localDepth + maxAllowRadius;\n        for (var i = -uniforms.radius; i <= uniforms.radius; i = i + 1) {\n          let z = lrnSub[index + i];\n          sum = sum + z * z;\n        }\n        ${ra}\n\n        setOutputAtCoords(b, r, c, d, lrnSub[index] * powValue);\n      }\n    } `}}const aa={kernelName:i.LRN,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{depthRadius:o,bias:a,alpha:s,beta:u}=r;let l;l=o>16?new ia(i.shape):new oa(i.shape,o);const c=[{type:"int32",data:[o]},{type:"float32",data:[a]},{type:"float32",data:[s]},{type:"float32",data:[u]}];return n.runWebGPUProgram(l,[i],i.dtype,c)}};
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class sa{constructor(t){this.outputShape=[],this.variableNames=["inputImage","outputImage","dy"],this.uniforms="depthRadius : i32, bias : f32, alpha : f32, beta : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="lrn_grad"}getUserCode(){return`\n    ${b("index")} {\n      if (index < uniforms.size) {\n        let coords = getOutputCoords();\n        let b = coords[0];\n        let r = coords[1];\n        let c = coords[2];\n\n        let MIN_DEPTH_BEGIN = 0;\n        let MAX_DEPTH_END = uniforms.outShape[3];\n        var result = 0.0;\n        for (var d = MIN_DEPTH_BEGIN; d < MAX_DEPTH_END; d++) {\n          let depthBegin = max(MIN_DEPTH_BEGIN, d - uniforms.depthRadius);\n          let depthEnd = min(MAX_DEPTH_END, d + uniforms.depthRadius + 1);\n\n          var norm = 0.0;\n          for (var k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; k++) {\n            if (k < depthBegin) {\n              continue;\n            } else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            } else {\n              break;\n            }\n          }\n\n          norm = uniforms.alpha * norm + uniforms.bias;\n\n          for (var k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; k++) {\n            if (k < depthBegin) {\n              continue;\n            } else if (k >= depthBegin && k < depthEnd) {\n              var dyi = -2.0 * uniforms.alpha * uniforms.beta\n                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d) / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * uniforms.beta);\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            } else {\n              break;\n            }\n          }\n        }\n\n        setOutputAtIndex(index, result);\n      }\n    }\n  `}}const ua={kernelName:i.LRNGrad,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,y:o,dy:a}=e,{depthRadius:s,bias:u,alpha:l,beta:c}=r,h=new sa(i.shape),d=[{type:"int32",data:[s]},{type:"float32",data:[u]},{type:"float32",data:[l]},{type:"float32",data:[c]}];return n.runWebGPUProgram(h,[i,o,a],i.dtype,d)}},la=Fe({opType:j.MAX,cpuKernelImpl:rn}),ca={kernelName:i.Maximum,backendName:"webgpu",kernelFunc:la};const ha={kernelName:i.MaxPool,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{filterSize:a,strides:s,pad:u,dimRoundingMode:l}=r;return ur(o,i.backend_util.computePool2DInfo(o.shape,a,s,1,u,l),"max",n)}};const da={kernelName:i.MaxPool3D,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{filterSize:a,strides:s,pad:u,dataFormat:l,dimRoundingMode:c}=r,h=i.backend_util.computePool3DInfo(o.shape,a,s,[1,1,1],u,c,l),d=new rr(h,"max"),f=[{type:"int32",data:[h.strideDepth,h.strideHeight,h.strideWidth]},{type:"int32",data:[h.padInfo.front,h.padInfo.top,h.padInfo.left]},{type:"int32",data:[h.inDepth,h.inHeight,h.inWidth]},{type:"int32",data:[h.effectiveFilterDepth,h.effectiveFilterHeight,h.effectiveFilterWidth]}];return n.runWebGPUProgram(d,[o],o.dtype,f)}};
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class fa{constructor(t){this.variableNames=["dy","maxPos"],this.uniforms="strides : vec2<i32>, pads : vec2<i32>, dilations : vec2<i32>, filterDims : vec2<i32>,\n       outHeight : i32, outWidth : i32",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t.inShape,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="maxPool2DBackprop"}getUserCode(){return`\n      ${b("index")} {\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let batch = coords[0];\n        let d = coords[3];\n\n        let dyRCCorner = vec2<i32>(coords.yz) - uniforms.pads;\n        let dyRCorner = dyRCCorner.x;\n        let dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        var dotProd = 0.0;\n        let lastIndex = uniforms.filterDims[0] * uniforms.filterDims[1] - 1;\n        for (var wR = 0; wR < uniforms.filterDims[0]; wR += uniforms.dilations[0]) {\n          let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[0]);\n\n          if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {\n            continue;\n          }\n          let idyR = i32(dyR);\n\n          for (var wC = 0; wC < uniforms.filterDims[1]; wC += uniforms.dilations[1]) {\n            let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[1]);\n\n            if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {\n              continue;\n            }\n            let idyC = i32(dyC);\n\n            let dyValue = getDy(batch, idyR, idyC, d);\n            let maxPosValue = lastIndex - i32(getMaxPos(batch, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            let curPosValue = wR * uniforms.filterDims[1] + wC;\n            let mask = select(0.0, 1.0, maxPosValue == curPosValue);\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n    `}}class pa{constructor(t){this.variableNames=["dy","maxPos"],this.uniforms="strides : vec3<i32>, pads : vec3<i32>, filterDims : vec3<i32>,\n      outDepth : i32, outHeight : i32, outWidth : i32",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t.inShape,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="maxPool3DBackprop"}getUserCode(){return`\n      ${b("index")} {\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let batch = coords.x;\n        let ch = coords.u;\n\n        let dyCorner = vec3<i32>(coords.y, coords.z, coords.w) - uniforms.pads;\n        let dyDCorner = dyCorner.x;\n        let dyRCorner = dyCorner.y;\n        let dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        var dotProd = 0.0;\n        let lastIndex = uniforms.filterDims[0] * uniforms.filterDims[1] * uniforms.filterDims[2] - 1;\n\n        for (var wD = 0; wD < uniforms.filterDims[0]; wD++) {\n          let dyD = f32(dyDCorner + wD) / f32(uniforms.strides[0]);\n\n          if (dyD < 0.0 || dyD >= f32(uniforms.outDepth) || fract(dyD) > 0.0) {\n            continue;\n          }\n          let idyD = i32(dyD);\n\n          for (var wR = 0; wR < uniforms.filterDims[1]; wR++) {\n            let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[1]);\n\n            if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {\n              continue;\n            }\n            let idyR = i32(dyR);\n\n            for (var wC = 0; wC < uniforms.filterDims[2]; wC++) {\n              let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[2]);\n\n              if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {\n                continue;\n              }\n              let idyC = i32(dyC);\n\n              let dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              let maxPosValue = lastIndex - i32(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              let curPosValue = wD * uniforms.filterDims[1] * uniforms.filterDims[2] + wR * uniforms.filterDims[2] + wC;\n              let mask = select(0.0, 1.0, maxPosValue == curPosValue);\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n    `}}const ma={kernelName:i.MaxPool3DGrad,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:a}=e,s=a,{filterSize:u,strides:l,pad:c,dimRoundingMode:h}=r,d=i.backend_util.computePool3DInfo(s.shape,u,l,[1,1,1],c,h),f=new rr(d,"max",!0);let p=[{type:"int32",data:[d.strideDepth,d.strideHeight,d.strideWidth]},{type:"int32",data:[d.padInfo.front,d.padInfo.top,d.padInfo.left]},{type:"int32",data:[d.inDepth,d.inHeight,d.inWidth]},{type:"int32",data:[d.effectiveFilterDepth,d.effectiveFilterHeight,d.effectiveFilterWidth]}];const m=n.runWebGPUProgram(f,[s],"int32",p),g=new pa(d);p=[{type:"int32",data:[d.strideDepth,d.strideHeight,d.strideWidth]},{type:"int32",data:[d.effectiveFilterDepth-1-d.padInfo.front,d.effectiveFilterHeight-1-d.padInfo.top,d.effectiveFilterWidth-1-d.padInfo.left]},{type:"int32",data:[d.effectiveFilterDepth,d.effectiveFilterHeight,d.effectiveFilterWidth]},{type:"int32",data:[d.outDepth]},{type:"int32",data:[d.outHeight]},{type:"int32",data:[d.outWidth]}];const v=n.runWebGPUProgram(g,[o,m],s.dtype,p);return n.disposeData(m.dataId),v}};const ga={kernelName:i.MaxPoolGrad,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:a,output:s}=e,u=a;z([a,s],"maxPoolGrad");const{filterSize:l,strides:c,pad:h,dimRoundingMode:d}=r,f=i.backend_util.computePool2DInfo(u.shape,l,c,1,h,d),p=new nr(f,"max",!0);let m=[{type:"int32",data:[f.strideHeight,f.strideWidth]},{type:"int32",data:[f.padInfo.top,f.padInfo.left]},{type:"int32",data:[f.dilationHeight,f.dilationWidth]},{type:"int32",data:[f.inHeight,f.inWidth]},{type:"int32",data:[f.effectiveFilterHeight,f.effectiveFilterWidth]}];const g=n.runWebGPUProgram(p,[u],"int32",m),v=new fa(f);m=[{type:"int32",data:[f.strideHeight,f.strideWidth]},{type:"int32",data:[f.effectiveFilterHeight-1-f.padInfo.top,f.effectiveFilterWidth-1-f.padInfo.left]},{type:"int32",data:[f.dilationHeight,f.dilationWidth]},{type:"int32",data:[f.effectiveFilterHeight,f.effectiveFilterWidth]},{type:"int32",data:[f.outHeight]},{type:"int32",data:[f.outWidth]}];const y=n.runWebGPUProgram(v,[o,g],u.dtype,m);return n.disposeData(g.dataId),y}};const va={kernelName:i.MaxPoolWithArgmax,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{filterSize:o,strides:a,pad:s,includeBatchInIndex:u}=r,{x:l}=e;i.util.assert(4===l.shape.length,(()=>`Error in maxPool: input must be rank 4 but got rank ${l.shape.length}.`));const c=[1,1];i.util.assert(i.backend_util.eitherStridesOrDilationsAreOne(a,c),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`));const h=i.backend_util.computePool2DInfo(l.shape,o,a,c,s),d=[{type:"int32",data:[h.strideHeight,h.strideWidth]},{type:"int32",data:[h.padInfo.top,h.padInfo.left]},{type:"int32",data:[h.dilationHeight,h.dilationWidth]},{type:"int32",data:[h.inHeight,h.inWidth]},{type:"int32",data:[h.effectiveFilterHeight,h.effectiveFilterWidth]}];let f=new nr(h,"max",!1);const p=n.runWebGPUProgram(f,[l],l.dtype,d);return f=new nr(h,"max",!0,!0,u),[p,n.runWebGPUProgram(f,[l],"int32",d)]}};const ya={kernelName:i.Min,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:o,keepDims:a}=r;return Bn(i,o,a,"min",n)}},ba=Fe({opType:j.MIN,cpuKernelImpl:on}),xa={kernelName:i.Minimum,backendName:"webgpu",kernelFunc:ba};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class wa{constructor(t,e,n){this.uniforms="",this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.map(((e,n)=>e[0]+t[n]+e[1])),this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.xShape=t,e.map(((t,e)=>{this.uniforms+=` pad${e} : vec2<i32>,`})),this.offset="reflect"===n?0:1,this.shaderKey=`mirrorPad_${n}`}getUserCode(){const t=this.xShape.length,e=this.xShape.map(((t,e)=>`uniforms.pad${e}[0]`)).join(","),n=this.xShape.map(((e,n)=>`uniforms.pad${n}[0] + uniforms.xShape${t>1?`[${n}]`:""}`)).join(","),r=1===t?"start":"start[i]",i=1===t?"end":"end[i]",o=1===t?"outC":"outC[i]",a=v(t),s=t>1?["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,t):"coords";return`\n      ${b("index")} {\n        if (index < uniforms.size) {\n          let start = ${a}(${e});\n          let end = ${a}(${n});\n          var outC = getCoordsFromIndex(index);\n          for (var i = 0; i < ${t}; i = i + 1) {\n            if (${o} < ${r}) {\n              ${o} = ${r} * 2 - ${o} - ${this.offset};\n            } else if(${o} >= ${i}) {\n              ${o} = (${i} - 1) * 2 - ${o} + ${this.offset};\n            }\n          }\n          let coords = outC - start;\n          setOutputAtIndex(index, getX(${s}));\n        }\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const _a={kernelName:i.MirrorPad,backendName:"webgpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{paddings:i,mode:o}=e,a=n,s=i.map((t=>({type:"int32",data:[t[0],t[1]]}))),u=new wa(r.shape,i,o);return a.runWebGPUProgram(u,[r],r.dtype,s)}},Sa=Fe({opType:j.MOD}),Ea={kernelName:i.Mod,backendName:"webgpu",kernelFunc:Sa};
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Aa{constructor(t,e){this.variableNames=["probs"],this.outputShape=[],this.uniforms="seed : f32, numOutcomes: i32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[t,e],this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="multinomial"}getUserCode(){return`\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    fn random (seed : f32, resultUV : vec2<f32>) -> f32 {\n      let HASHSCALE1 = 443.8975;\n      let p = resultUV * seed;\n      var p3  = fract(vec3<f32>(p.xyx) * HASHSCALE1);\n      p3 = p3 + dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ${b("index")} {\n      if (index < uniforms.size) {\n        let coords = getOutputCoords();\n        let batch = coords[0];\n\n        let resUV = vec2<f32>(f32(coords[1]) / f32(uniforms.outShape[1]),\n            f32(coords[0]) / f32(uniforms.outShape[0]));\n        let r = random(uniforms.seed, resUV);\n        var cdf = 0.0;\n        for (var i = 0; i < uniforms.numOutcomes - 1; i = i + 1) {\n          cdf = cdf + getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutputAtIndexI32(index, i);\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutputAtIndexI32(index, uniforms.numOutcomes - 1);\n      }\n    }\n  `}}
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Ma{constructor(t){this.variableNames=["logits"],this.outputShape=t,this.dispatchLayout=L(this.outputShape),this.dispatch=[this.outputShape[0],1,1],this.outputShape[1]>=4096?this.workgroupSize=[256,1,1]:this.workgroupSize=[64,1,1],this.shaderKey="softmax"}getUserCode(){return`\n    var<workgroup> buf : array<f32, ${this.workgroupSize[0]}>;\n    var<workgroup> rowMaxShared : f32;\n    var<workgroup> rowSumShared : f32;\n    const blockSize = ${this.workgroupSize[0]};\n    ${b("index")} {\n      let row = index / blockSize;\n      let tid = i32(localId.x);\n      let cols = uniforms.outShape[1];\n\n      var threadMax = -3.402823e+38f;\n      for (var col = tid; col < cols; col += blockSize) {\n        let value = getLogits(row, col);\n        threadMax = max(threadMax, value);\n      }\n      if (tid < cols) {\n        buf[tid] = threadMax;\n      }\n      workgroupBarrier();\n\n      var reduceSize = min(cols, blockSize);\n      for (var currSize = reduceSize >> 1;  currSize > 0; currSize = reduceSize >> 1) {\n        reduceSize = currSize + (reduceSize & 1);\n        if (tid < currSize) {\n          buf[tid] = max(buf[tid], buf[tid + reduceSize]);\n        }\n        workgroupBarrier();\n      }\n\n      if (tid == 0) {\n        rowMaxShared = buf[0];\n      }\n      workgroupBarrier();\n\n      var threadSum = 0.0;\n      for (var col = tid; col < cols; col += blockSize) {\n        let subExp = exp(getLogits(row, col) - rowMaxShared);\n        threadSum += subExp;\n      }\n      buf[tid] = threadSum;\n      workgroupBarrier();\n\n      for (var currSize = blockSize >> 1;  currSize > 0; currSize = currSize >> 1) {\n        if (tid < currSize) {\n          buf[tid] = buf[tid] + buf[tid + currSize];\n        }\n        workgroupBarrier();\n      }\n\n      if (tid == 0) {\n        rowSumShared = buf[0];\n      }\n      workgroupBarrier();\n\n      for (var col = tid; col < cols; col += blockSize) {\n        let value = exp(getLogits(row, col) - rowMaxShared) / rowSumShared;\n        setOutputAtCoords(row, col, value);\n      }\n  }\n    `}}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ca(t){const{inputs:e,backend:n,attrs:r}=t,{logits:o}=e,{dim:a}=r,s=Me({inputs:{x:o},backend:n,attrs:{shape:[i.util.sizeFromShape(o.shape)/o.shape[a],o.shape[a]]}}),u=new Ma(s.shape),l=n.runWebGPUProgram(u,[s],o.dtype),c=Me({inputs:{x:l},backend:n,attrs:{shape:o.shape}});return n.disposeData(s.dataId),n.disposeData(l.dataId),c}const Ta={kernelName:i.Softmax,backendName:"webgpu",kernelFunc:Ca};const ka={kernelName:i.Multinomial,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{numSamples:o,seed:a,normalized:s}=r,u=s?i:Ca({inputs:{logits:i},backend:n,attrs:{dim:i.shape.length-1}}),l=u.shape[0],c=u.shape[1],h=new Aa(l,o),d=[{type:"float32",data:[a]},{type:"int32",data:[c]}],f=n.runWebGPUProgram(h,[u],"int32",d);return s||n.disposeData(u.dataId),f}};const Ia={kernelName:i.Neg,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const t=n.tensorMap.get(r.dataId),[e,i]=sn(t.values,r.shape,r.dtype);return n.makeTensorInfo(i,r.dtype,e)}const i=new De(r.shape,yt.NEG);return n.runWebGPUProgram(i,[r],r.dtype)}};const Na={kernelName:i.NonMaxSuppressionV3,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){console.warn("tf.nonMaxSuppression() in webgpu locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:o,scores:a}=e,{maxOutputSize:s,iouThreshold:u,scoreThreshold:l}=r,c=n.readSync(o.dataId),h=n.readSync(a.dataId),{selectedIndices:d}=i.kernel_impls.nonMaxSuppressionV3Impl(c,h,s,u,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}};const Pa={kernelName:i.NonMaxSuppressionV5,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){console.warn("tf.nonMaxSuppression() in webgpu locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:o,scores:a}=e,{maxOutputSize:s,iouThreshold:u,scoreThreshold:l,softNmsSigma:c}=r,h=n.readSync(o.dataId),d=n.readSync(a.dataId),f=s,p=u,m=l,g=c,{selectedIndices:v,selectedScores:y}=i.kernel_impls.nonMaxSuppressionV5Impl(h,d,f,p,m,g);return[n.makeTensorInfo([v.length],"int32",new Int32Array(v)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}};
/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Oa{constructor(t,e){this.variableNames=["x"],this.uniforms="onValue : f32, offValue : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[t,e],this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="onehot"}getUserCode(){return`\n      ${b("index")} {\n        if(index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          setOutputAtIndex(index, mix(uniforms.offValue, uniforms.onValue,\n                                      f32(i32(round(getX(coords.x))) == coords.y)));\n        }\n      }\n    `}}const La={kernelName:i.OneHot,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{indices:o}=e,{dtype:a,depth:s,onValue:u,offValue:l}=r,c=i.util.sizeFromShape(o.shape),h=new Oa(c,s),d=Me({inputs:{x:o},backend:n,attrs:{shape:[c]}}),f=[{type:"float32",data:[u]},{type:"float32",data:[l]}],p=n.runWebGPUProgram(h,[d],a,f);n.disposeData(d.dataId);const m=Me({inputs:{x:p},backend:n,attrs:{shape:[...o.shape,s]}});return n.disposeData(p.dataId),m}};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ra(t){const{inputs:e,backend:n}=t,{x:r}=e;if("complex64"===r.dtype){const t=Tr({inputs:{input:r},backend:n}),e=Ra({inputs:{x:t},backend:n}),i=Ur({inputs:{input:r},backend:n}),o=Ra({inputs:{x:i},backend:n}),a=Le({inputs:{real:e,imag:o},backend:n});return n.disposeData(t.dataId),n.disposeData(e.dataId),n.disposeData(i.dataId),n.disposeData(o.dataId),a}return Ee({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}const Da={kernelName:i.ZerosLike,backendName:"webgpu",kernelFunc:Ra};const za={kernelName:i.OnesLike,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function t(e){const{inputs:n,backend:r}=e,{x:i}=n;if("string"===i.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===i.dtype){const e=Tr({inputs:{input:i},backend:r}),n=t({inputs:{x:e},backend:r}),o=Ur({inputs:{input:i},backend:r}),a=Ra({inputs:{x:o},backend:r}),s=Le({inputs:{real:n,imag:a},backend:r});return r.disposeData(e.dataId),r.disposeData(n.dataId),r.disposeData(o.dataId),r.disposeData(a.dataId),s}return Ee({attrs:{shape:i.shape,dtype:i.dtype,value:1},backend:r})}};const Fa={kernelName:i.Pack,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{axis:o}=r;if(1===e.length)return no({inputs:{input:e[0]},backend:n,attrs:{dim:o}});const a=e[0].shape,s=e[0].dtype;e.forEach((t=>{i.util.assertShapesMatch(a,t.shape,"All tensors passed to stack must have matching shapes"),i.util.assert(s===t.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const u=[],l=Hr({inputs:e.map((t=>{const e=no({inputs:{input:t},backend:n,attrs:{dim:o}});return u.push(e),e})),backend:n,attrs:{axis:o}});return u.forEach((t=>n.disposeData(t.dataId))),l}};
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ba(t,e=!1){const n=t.length,r=v(n),i=t.map(((t,e)=>`uniforms.pad${e}[0]`)).join(","),o=t.map(((t,e)=>`uniforms.pad${e}[0] + uniforms.xShape${n>1?`[${e}]`:""}`)).join(",");return`\n        let start = ${n>1?`${r}(${i})`:`${i}`};\n        let end = ${n>1?`${r}(${o})`:`${o}`};\n        if (${n>1?"any(paddedCoords < start)":"paddedCoords < start"} || ${n>1?"any(paddedCoords >= end)":"paddedCoords >= end"}) {\n          setOutputAtIndex(index, ${e?0:"uniforms.constantValue"});\n        } else {\n          let coords = paddedCoords - start;\n          setOutputAtIndex(index, getX(${n>1?["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,n):"coords"}));\n        }\n  `}class Ua{constructor(t,e){this.variableNames=["x"],this.uniforms="constantValue : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.map(((e,n)=>e[0]+t[n]+e[1])),this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),e.map(((t,e)=>{this.uniforms+=` pad${e} : vec2<i32>,`})),this.xShape=t,this.shaderKey="pad"}getUserCode(){return`\n      ${b("index")} {\n        if (index < uniforms.size) {\n          let paddedCoords = getCoordsFromIndex(index);\n          ${Ba(this.xShape)}\n        }\n      }\n    `}}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const ja={kernelName:i.PadV2,backendName:"webgpu",kernelFunc:t=>{const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{paddings:a,constantValue:s}=r;if(a.every((t=>i.util.arraysEqual(t,[0,0]))))return Pe({inputs:{x:o},backend:n});if(0===i.util.sizeFromShape(o.shape)){return Ee({backend:n,attrs:{shape:a.map(((t,e)=>t[0]+o.shape[e]+t[1])),value:s,dtype:o.dtype}})}const u=[{type:"float32",data:[s]}];a.map((t=>u.push({type:"int32",data:[t[0],t[1]]})));const l=new Ua(o.shape,a);return n.runWebGPUProgram(l,[o],o.dtype,u)}},Va=Fe({opType:j.POW}),Ha={kernelName:i.Pow,backendName:"webgpu",kernelFunc:Va};const Ga={kernelName:i.Prelu,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n}=t,{x:r,alpha:i}=e,o=new Ne(j.PRELU,r.shape,i.shape);return n.runWebGPUProgram(o,[r,i],"float32")}};const Wa={kernelName:i.Prod,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:o,keepDims:a}=r;return Bn(i,o,a,"prod",n)}},Xa={kernelName:i.Range,backendName:"webgpu",kernelFunc:t=>{const{backend:e,attrs:n}=t,{start:r,stop:i,step:o,dtype:a}=n,s=cn(r,i,o,a);return e.makeTensorInfo([s.length],a,s)}},Ya=Fe({opType:j.DIV}),qa={kernelName:i.RealDiv,backendName:"webgpu",kernelFunc:Ya},$a=ze({opType:yt.RECIPROCAL}),Ka={kernelName:i.Reciprocal,backendName:"webgpu",kernelFunc:$a},Za=ze({opType:yt.RELU}),Qa={kernelName:i.Relu,backendName:"webgpu",kernelFunc:Za},Ja=ze({opType:yt.RELU6}),ts={kernelName:i.Relu6,backendName:"webgpu",kernelFunc:Ja};
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class es{constructor(t,e,n){this.variableNames=["x"],this.uniforms="adjustHeightWidth : vec2<f32>, halfPixelCenters : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[t[0],e,n,t[3]],this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="resizeBilinear"}getUserCode(){return`\n      ${b("index")} {\n        if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n          let b = coords[0];\n          let d = coords[3];\n          let rc = coords.yz;\n\n          let effectiveInSize = vec2<f32>(\n            f32(uniforms.xShape.y) - uniforms.adjustHeightWidth[0],\n            f32(uniforms.xShape.z) - uniforms.adjustHeightWidth[1]);\n\n          let effectiveOutSize = vec2<f32>(\n            f32(uniforms.outShape.y) - uniforms.adjustHeightWidth[0],\n            f32(uniforms.outShape.z) - uniforms.adjustHeightWidth[1]);\n\n          let effectiveInputOverOutputRatioRC =\n              effectiveInSize / effectiveOutSize;\n\n          // Fractional source index\n          let sourceFracIndexRC =\n            (vec2<f32>(rc) + vec2<f32>(uniforms.halfPixelCenters)) *\n            effectiveInputOverOutputRatioRC - vec2<f32>(uniforms.halfPixelCenters);\n\n          // Compute the four integer indices.\n          let sourceFloorRC = vec2<i32>(sourceFracIndexRC);\n          let sourceCeilRC = vec2<i32>(\n            min(vec2<f32>(uniforms.xShape.yz) - vec2<f32>(1.0), ceil(sourceFracIndexRC)));\n\n          let topLeft = getX(b, sourceFloorRC.x, sourceFloorRC.y, d);\n          let bottomLeft = getX(b, sourceCeilRC.x, sourceFloorRC.y, d);\n          let topRight = getX(b, sourceFloorRC.x, sourceCeilRC.y, d);\n          let bottomRight = getX(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n          let fracRC = sourceFracIndexRC - vec2<f32>(sourceFloorRC);\n\n          let top = topLeft + (topRight - topLeft) * fracRC.y;\n          let bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n          let newValue = top + (bottom - top) * fracRC.x;\n\n          setOutputAtIndex(index, newValue);\n        }\n      }\n    `}}const ns={kernelName:i.ResizeBilinear,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:o,size:a,halfPixelCenters:s}=r,[u,l]=a,c=[{type:"float32",data:[o&&u>1?1:0,o&&l>1?1:0]},{type:"float32",data:[s?.5:0]}],h=new es(i.shape,u,l);return n.runWebGPUProgram(h,[i],"float32",c)}};
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class rs{constructor(t,e){this.variableNames=["dy"],this.uniforms="effectiveXSize : vec2<i32>, effectiveYSize : vec2<i32>, heightScale : f32, widthScale : f32,\n       invHeightScale : f32, invWidthScale : f32, winHeight : i32, winWidth : i32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.alignCorners=e,this.shaderKey=`resizeBilinearBackprop_${e}`}getUserCode(){return`\n      ${b("index")} {\n        if (index < uniforms.size) {\n          let coords = getOutputCoords();\n          let b = coords[0];\n          let d = coords[3];\n          let r = coords[1];\n          let c = coords[2];\n\n          var accumulator = 0.0;\n\n          // Compute bounds for where in dy we will look\n          let startRLerp = floor(f32(r) * uniforms.invHeightScale);\n          let startDyR = i32(startRLerp - f32(uniforms.winHeight / 2));\n\n          let startCLerp = floor(f32(c) * uniforms.invWidthScale);\n          let startDyC = i32(startCLerp - f32(uniforms.winWidth / 2));\n\n          // Loop over dy\n          for (var dyROffset = 0; dyROffset < uniforms.winHeight; dyROffset++) {\n            let dyR = startDyR + dyROffset;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyR < 0 || dyR >= uniforms.dyShape[1]) {\n              continue;\n            }\n\n            for (var dyCOffset = 0; dyCOffset < uniforms.winWidth; dyCOffset++) {\n              let dyC = startDyC + dyCOffset;\n\n              // Guard against the window exceeding the bounds of dy\n              if (dyC < 0 || dyC >= uniforms.dyShape[2]) {\n                continue;\n              }\n\n              let dxR = f32(dyR) * uniforms.heightScale;\n              let topDxRIndex = i32(floor(dxR));\n              let bottomDxRIndex = i32(min(ceil(dxR), f32(uniforms.outShape[1] - 1)));\n              let dxRLerp = dxR - f32(topDxRIndex);\n              let inverseDxRLerp = 1.0 - dxRLerp;\n\n              let dxC = f32(dyC) * uniforms.widthScale;\n              let leftDxCIndex = i32(floor(dxC));\n              let rightDxCIndex = i32(min(ceil(dxC), f32(uniforms.outShape[2] - 1)));\n              let dxCLerp = dxC - f32(leftDxCIndex);\n              let inverseDxCLerp = 1.0 - dxCLerp;\n\n              if (r == topDxRIndex && c == leftDxCIndex) {\n                // topLeft\n                accumulator +=\n                  getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n              }\n\n              if (r == topDxRIndex && c == rightDxCIndex) {\n                // topRight\n                accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n              }\n\n              if (r == bottomDxRIndex && c == leftDxCIndex) {\n                // bottomLeft\n                accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n              }\n\n              if (r == bottomDxRIndex && c == rightDxCIndex) {\n                // bottomRight\n                accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n              }\n            }\n          }\n          // End loop over dy\n\n          setOutputAtIndex(index, accumulator);\n        }\n      }\n    `}}const is={kernelName:i.ResizeBilinearGrad,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:o}=e,{alignCorners:a}=r,[,s,u]=i.shape,[,l,c]=o.shape,h=[a&&l>1?s-1:s,a&&c>1?u-1:u],d=[a&&l>1?l-1:l,a&&c>1?c-1:c],f=h[0]/d[0],p=h[1]/d[1],m=1/f,g=1/p,v=2*Math.ceil(m)+2,y=2*Math.ceil(g)+2,b=new rs(i.shape,a),x=[{type:"int32",data:h},{type:"int32",data:d},{type:"float32",data:[f]},{type:"float32",data:[p]},{type:"float32",data:[m]},{type:"float32",data:[g]},{type:"int32",data:[v]},{type:"int32",data:[y]}];return n.runWebGPUProgram(b,[o],o.dtype,x)}};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class os{constructor(t,e,n,r){this.variableNames=["x"],this.uniforms="adjustHeightWidth : vec2<f32>, roundBase : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[t[0],e,n,t[3]],this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.halfPixelCenters=r,this.shaderKey=`resizeNearest_${r}`}getUserCode(){let t;t=this.halfPixelCenters?"max((vec2<f32>(rc) + vec2<f32>(0.5)) * effectiveInputOverOutputRatioRC, vec2<f32>(0.0))":"vec2<f32>(rc) * effectiveInputOverOutputRatioRC";return`\n      ${b("index")} {\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let b = coords[0];\n          let d = coords[3];\n          let rc = coords.yz;\n\n          let effectiveInSize = vec2<f32>(\n            f32(uniforms.xShape.y) - uniforms.adjustHeightWidth[0],\n            f32(uniforms.xShape.z) - uniforms.adjustHeightWidth[1]);\n\n          let effectiveOutSize = vec2<f32>(\n            f32(uniforms.outShape.y) - uniforms.adjustHeightWidth[0],\n            f32(uniforms.outShape.z) - uniforms.adjustHeightWidth[1]);\n\n          let effectiveInputOverOutputRatioRC =\n              effectiveInSize / effectiveOutSize;\n\n          // Fractional source index\n          let sourceFracIndexRC = ${t};\n\n          // Compute the coordinators of nearest neighbor point.\n          let inputShapeRC = vec2<f32>(f32(uniforms.xShape.y), f32(uniforms.xShape.z));\n          let sourceNearestRC = vec2<i32>(\n            min(inputShapeRC - 1.0, floor(sourceFracIndexRC + uniforms.roundBase)));\n          let newValue = getX(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n          setOutputAtIndex(index, newValue);\n        }\n      }\n    `}}const as={kernelName:i.ResizeNearestNeighbor,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:o,halfPixelCenters:a,size:s}=r,[u,l]=s,c=[{type:"float32",data:[o&&u>1?1:0,o&&l>1?1:0]},{type:"float32",data:[o?.5:0]}],h=new os(i.shape,u,l,a);return n.runWebGPUProgram(h,[i],i.dtype,c)}};
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class ss{constructor(t,e){this.variableNames=["dy"],this.uniforms="effectiveXSize : vec2<i32>, effectiveYSize : vec2<i32>, invHeightScale : f32, invWidthScale : f32,\n       winHeight : i32, winWidth : i32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.alignCorners=e,this.shaderKey=`resizeNearestNeigborBackprop_${e}`}getUserCode(){return`\n      ${b("index")} {\n        if (index < uniforms.size) {\n          let coords = getOutputCoords();\n          let b = coords[0];\n          let d = coords[3];\n          let r = coords[1];\n          let c = coords[2];\n\n          var accumulator = 0.0;\n\n          // Compute bounds for where in dy we will look\n          let startRLerp = floor(f32(r) * uniforms.invHeightScale);\n          let startDyR = i32(floor(startRLerp - f32(uniforms.winHeight / 2)));\n\n          let startCLerp = floor(f32(c) * uniforms.invWidthScale);\n          let startDyC = i32(floor(startCLerp - f32(uniforms.winWidth / 2)));\n\n          // Loop over dy\n          for (var dyROffset = 0; dyROffset < uniforms.winHeight; dyROffset++) {\n            let dyR = startDyR + dyROffset;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyR < 0 || dyR >= uniforms.dyShape[1]) {\n              continue;\n            }\n\n            for (var dyCOffset = 0; dyCOffset < uniforms.winWidth; dyCOffset++) {\n              let dyC = startDyC + dyCOffset;\n\n              // Guard against the window exceeding the bounds of dy\n              if (dyC < 0 || dyC >= uniforms.dyShape[2]) {\n                continue;\n              }\n\n              let sourceFracRow = f32(uniforms.effectiveXSize[0]) *\n                  (f32(dyR) / f32(uniforms.effectiveYSize[0]));\n\n              let sourceFracCol = f32(uniforms.effectiveXSize[1]) *\n                  (f32(dyC) / f32(uniforms.effectiveYSize[1]));\n\n              let sourceNearestRow =\n                  i32(min(f32(uniforms.outShape[1] - 1),\n                  ${this.alignCorners?"floor(sourceFracRow + 0.5)":"floor(sourceFracRow)"}));\n\n              let sourceNearestCol =\n                  i32(min(f32(uniforms.outShape[2] - 1),\n                  ${this.alignCorners?"floor(sourceFracCol + 0.5)":"floor(sourceFracCol)"}));\n\n              if (r == sourceNearestRow && c == sourceNearestCol) {\n                accumulator += getDy(b, dyR, dyC, d);\n              }\n            }\n          }\n          // End loop over dy\n\n          setOutputAtIndex(index, accumulator);\n        }\n      }\n    `}}const us={kernelName:i.ResizeNearestNeighborGrad,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:o}=e,{alignCorners:a}=r,[,s,u]=i.shape,[,l,c]=o.shape,h=[a&&l>1?s-1:s,a&&c>1?u-1:u],d=[a&&l>1?l-1:l,a&&c>1?c-1:c],f=1/(h[0]/d[0]),p=1/(h[1]/d[1]),m=2*Math.ceil(f)+2,g=2*Math.ceil(p)+2,v=new ss(i.shape,a),y=[{type:"int32",data:h},{type:"int32",data:d},{type:"float32",data:[f]},{type:"float32",data:[p]},{type:"int32",data:[m]},{type:"int32",data:[g]}];return n.runWebGPUProgram(v,[o],o.dtype,y)}};
/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class ls{constructor(t){this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.uniforms=" axis : vec4<i32>,",this.shaderKey="reverse"}getUserCode(){return`\n      \n      // Using uniform variables as judging conditions, so the function has\n      // coherent execution within all threads.\n      fn getReverseCoords(coords : vec4<i32>) -> vec4<i32> {\n        var reverseCoords = coords;\n        if (uniforms.axis[0] == 1) {\n          reverseCoords[0] = uniforms.xShape[0] - coords[0] - 1;\n        }\n        if (uniforms.axis[1] == 1) {\n          reverseCoords[1] = uniforms.xShape[1] - coords[1] - 1;\n        }\n        if (uniforms.axis[2] == 1) {\n          reverseCoords[2] = uniforms.xShape[2] - coords[2] - 1;\n        }\n        if (uniforms.axis[3] == 1) {\n          reverseCoords[3] = uniforms.xShape[3] - coords[3] - 1;\n        }\n\n        return reverseCoords;\n      }\n    \n      ${b("index")} {\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let reverseCoords = getReverseCoords(coords);\n          setOutputAtIndex(index, getX(reverseCoords[0],\n              reverseCoords[1], reverseCoords[2], reverseCoords[3]));\n        }\n      }\n    `}}const cs={kernelName:i.Reverse,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{dims:a}=r,s=o.shape.length;if(0===s)return Pe({inputs:{x:o},backend:n});const u=o.shape,l=[1,1,1,1];u.forEach(((t,e)=>{l[e+4-s]=t}));const c=i.util.parseAxisParam(a,o.shape),h=[0,0,0,0];c.forEach((t=>{h[t+4-s]=1}));const d=[{type:"int32",data:h}],f=Me({inputs:{x:o},backend:n,attrs:{shape:l}}),p=new ls(l),m=n.runWebGPUProgram(p,[f],f.dtype,d);n.disposeData(f.dataId);const g=Me({inputs:{x:m},backend:n,attrs:{shape:u}});return n.disposeData(m.dataId),g}};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class hs{constructor(t,e){this.outputShape=[],this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.uniforms="centerX : f32, centerY : f32, sinRadians : f32,\n          cosRadians : f32,",this.shaderKey="rotate",this.outputShape=t,"number"==typeof e?(this.uniforms+=" fillValue : f32,",this.fillSnippet="var outputValue = uniforms.fillValue;",this.shaderKey+="_float"):(this.uniforms+=" fillValue : vec3<f32>,",this.fillSnippet="var outputValue = uniforms.fillValue[coords[3]];",this.shaderKey+="_vec3")}getUserCode(){return`\n        ${b("index")} {\n          if (index < uniforms.size) {\n            let coords = getCoordsFromIndex(index);\n            let coordXFloat = (f32(coords[2]) - uniforms.centerX) *\n                uniforms.cosRadians - (f32(coords[1]) - uniforms.centerY) *\n                uniforms.sinRadians;\n            let coordYFloat = (f32(coords[2]) - uniforms.centerX) *\n                uniforms.sinRadians + (f32(coords[1]) - uniforms.centerY) *\n                uniforms.cosRadians;\n            let coordX = i32(round(coordXFloat + uniforms.centerX));\n            let coordY = i32(round(coordYFloat + uniforms.centerY));\n            ${this.fillSnippet}\n            if(coordX >= 0 && coordX < uniforms.xShape[2] && coordY >= 0 &&\n                coordY < uniforms.xShape[1]) {\n              outputValue = getX(coords[0], coordY, coordX, coords[3]);\n            }\n            setOutputAtIndex(index, outputValue);\n          }\n        }\n      `}}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const ds={kernelName:i.RotateWithOffset,backendName:"webgpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:o,fillValue:a,center:s}=e,u=n,l=new hs(r.shape,a),[c,h]=i.backend_util.getImageCenter(s,r.shape[1],r.shape[2]),d=[{type:"float32",data:[c]},{type:"float32",data:[h]},{type:"float32",data:[Math.sin(o)]},{type:"float32",data:[Math.cos(o)]}];"number"==typeof a?d.push({type:"float32",data:[Number.parseFloat(a.toFixed(2))]}):d.push({type:"float32",data:a});return u.runWebGPUProgram(l,[r],r.dtype,d)}},fs=ze({opType:yt.ROUND}),ps={kernelName:i.Round,backendName:"webgpu",kernelFunc:fs},ms=ze({opType:yt.RSQRT,cpuKernelImpl:hn}),gs={kernelName:i.Rsqrt,backendName:"webgpu",kernelFunc:ms};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class vs{constructor(t,e,n,r,i,o,a,s=!0){this.variableNames=["updates","indices"],this.workgroupSize=[64,1,1],this.atomic=!0,this.outputShape=o,this.type=a,this.sumDupeIndices=s,this.dispatchLayout=L(t),this.dispatch=I(this.dispatchLayout,t,this.workgroupSize),this.sliceDimGreaterThanOne=e>1,this.shaderKey=`scatter_${n}_${r}_${this.sliceDimGreaterThanOne}_${a}_${s}_${i.length}`;const u=v(i.length);this.uniforms=`sliceDim : i32, strides: ${u}, updatesSize: i32,`,this.updatesRank=r,this.indicesRank=n}getUserCode(){let t="";1===this.indicesRank?t="coords[0]":2===this.indicesRank&&(t="coords[0], j");const e=`getIndices(${t})`,n=this.sliceDimGreaterThanOne?"uniforms.strides[j]":"uniforms.strides";let r="",i="";1===this.dispatchLayout.x.length?(r="flattenedIndex",i="\n      fn getUpdatesCoordsFromFlatIndex(index : i32) -> i32 {\n        return index;\n      }\n      "):2===this.dispatchLayout.x.length&&(r="vec2<i32>(flattenedIndex, coords[1])",i="\n      fn getUpdatesCoordsFromFlatIndex(index : i32) -> vec2<i32> {\n        // N.B. |updates| could be a scalar tensor, conceptually representing a\n        // 2D tensor with all values equal to that. By design, its size must be\n        // the same as |outShape[1]| in one dimension, and |indicesShape[0]|\n        // gives the other.\n        let sliceSize = uniforms.outShape[1];\n        let d0 = index / sliceSize;\n        let d1 = index - d0 * sliceSize;\n        return vec2<i32>(d0, d1);\n      }\n      ");const o=`getUpdates(${Array.from({length:this.updatesRank},((t,e)=>`coords[${e}]`)).join(", ")})`;return`\n    ${i}\n      ${b("index")} {\n        if (index < uniforms.updatesSize) {\n          let coords = getUpdatesCoordsFromFlatIndex(index);\n          var flattenedIndex = 0;\n          for (var j = 0; j < uniforms.sliceDim; j = j + 1) {\n            let indexInside = i32(round(${e}));\n            flattenedIndex = flattenedIndex + indexInside * ${n};\n          }\n          let updateValue =\n              ${M(this.type)}(${o});\n          let flatIndex = getOutputIndexFromCoords(${r});\n\n          ${this.sumDupeIndices?f("&result[flatIndex]","updateValue",this.type):"atomicStore(&result[flatIndex], bitcast<i32>(updateValue));"}\n        }\n      }`}}const ys={kernelName:i.ScatterNd,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{indices:o,updates:a}=e,{shape:s}=r,{sliceRank:u,numUpdates:l,sliceSize:c,strides:h,outputSize:d}=i.backend_util.calculateShapes(a,o,s),f=[d/c,c];if(0===d)return n.makeTensorInfo(s,o.dtype);const p=Me({inputs:{x:o},backend:n,attrs:{shape:[l,u]}}),m=Me({inputs:{x:a},backend:n,attrs:{shape:[l,c]}}),g=m.dtype,v=Ee({backend:n,attrs:{shape:f,value:0,dtype:g}}),y=[{type:"int32",data:[u]},{type:"int32",data:h},{type:"int32",data:[i.util.sizeFromShape(m.shape)]}],b=new vs(m.shape,u,p.shape.length,m.shape.length,h,f,g),x=n.runWebGPUProgram(b,[m,p],g,y,v),w=Me({inputs:{x},backend:n,attrs:{shape:s}});return n.disposeData(p.dataId),n.disposeData(m.dataId),n.disposeData(x.dataId),w}};
/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class bs{constructor(t,e){this.outputShape=[],this.variableNames=["sortedSequence","values"],this.uniforms="numInputs : i32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.side=e,this.shaderKey=`search_sorted_${e}`}getUserCode(){return`\n      fn findBound(batch: i32, value: f32) -> i32 {\n        var left = i32(0);\n        var right = uniforms.numInputs;\n        while (left < right) {\n          var mid = (left + right) / 2;\n          if (getSortedSequence(batch, mid) ${"left"===this.side?"<":"<="} value) {\n            left = mid + 1;\n          } else {\n            right = mid;\n          }\n        }\n        return right;\n      }\n\n      ${b("index")} {\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let value = getValuesByOutputIndex(index);\n          setOutputAtIndexI32(index, findBound(coords[0], value));\n        }\n      }\n    `}}const xs={kernelName:i.SearchSorted,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:i,values:o}=e,{side:a}=r,s=new bs([o.shape[0],o.shape[1]],a),u=[{type:"int32",data:[i.shape[1]]}];return n.runWebGPUProgram(s,[i,o],"int32",u)}};
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class ws{constructor(t,e,n){this.variableNames=["c","a","b"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.cRank=t,this.rank=n,this.shaderKey="select"}getUserCode(){let t,e;if(this.rank>4)throw Error(`Where for rank ${this.rank} is not yet supported`);if(1===this.rank)e="resRC",t="resRC";else{const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],i=[];for(let t=0;t<this.outputShape.length;t++)i.push(`${n[t]}`),t<this.cRank&&r.push(`${n[t]}`);t=r.join(),e=i.join()}return`\n      ${b("index")} {\n        if (index < uniforms.size) {\n          let resRC = getCoordsFromIndex(index);\n          let cVal = getC(${t});\n          if (cVal >= 1.0) {\n            setOutputAtIndex(index, getA(${e}));\n          } else {\n            setOutputAtIndex(index, getB(${e}));\n          }\n        }\n      }\n    `}}const _s={kernelName:i.Select,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n}=t,{condition:r,t:o,e:a}=e,s=new ws(r.shape.length,o.shape,o.shape.length);return n.runWebGPUProgram(s,[r,o,a],(0,i.upcastType)(o.dtype,a.dtype))}},Ss=ze({opType:yt.SELU}),Es={kernelName:i.Selu,backendName:"webgpu",kernelFunc:Ss},As=ze({opType:yt.SIGMOID}),Ms={kernelName:i.Sigmoid,backendName:"webgpu",kernelFunc:As},Cs=ze({opType:yt.SIGN}),Ts={kernelName:i.Sign,backendName:"webgpu",kernelFunc:Cs},ks=ze({opType:yt.SIN}),Is={kernelName:i.Sin,backendName:"webgpu",kernelFunc:ks},Ns=ze({opType:yt.SINH}),Ps={kernelName:i.Sinh,backendName:"webgpu",kernelFunc:Ns},Os=ze({opType:yt.SOFTPLUS}),Ls={kernelName:i.Softplus,backendName:"webgpu",kernelFunc:Os};
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Rs{constructor(t,e,n,r,i,o){this.variableNames=["x"],this.outputShape=[],this.uniforms="",this.workgroupSize=[64,1,1],this.size=!0;const a=new Array(r.length);for(let t=0;t<a.length;t++)a[t]=r[i[t]];this.outputShape=a,this.newDim=i,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.xShape=t,this.paddedXShape=e,this.uniforms+=`reshapedPaddedXShape : ${v(r.length)}, paddedXShapeStrides : ${v(o)}, `,n.map(((t,e)=>{this.uniforms+=` pad${e} : vec2<i32>,`})),this.shaderKey=`spaceToBatchND_${i}`}getUserCode(){const t=v(this.outputShape.length),e=Ln(this.newDim);return`\n      ${S(this.paddedXShape,"PaddedX")}\n      ${b("index")} {\n        if(index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let switchedIndex = getIndexFromCoords${this.outputShape.length}D(${t}(${e}), uniforms.reshapedPaddedXShape);\n          let paddedCoords = getPaddedXCoordsFromIndex(switchedIndex);\n          ${Ba(this.xShape,!0)}\n        }\n      }\n    `}}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Ds={kernelName:i.SpaceToBatchND,backendName:"webgpu",kernelFunc:t=>{const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{blockShape:a,paddings:s}=r;i.util.assert(o.shape.length<=4,(()=>"spaceToBatchND for rank > 4 with a WebGPU backend not implemented yet"));const u=a.reduce(((t,e)=>t*e)),l=[[0,0]];l.push(...s);for(let t=1+a.length;t<o.shape.length;++t)l.push([0,0]);const c=l.map(((t,e)=>t[0]+o.shape[e]+t[1])),h=i.backend_util.getReshaped(c,a,u,!1),d=i.backend_util.getPermuted(h.length,a.length,!1),f=i.backend_util.getReshapedPermuted(c,a,u,!1),p=i.util.computeStrides(c),m=new Rs(o.shape,c,l,h,d,p.length),g=[{type:"int32",data:h},{type:"int32",data:p}];l.map((t=>g.push({type:"int32",data:[t[0],t[1]]})));const v=n.runWebGPUProgram(m,[o],o.dtype,g),y=Me({inputs:{x:v},backend:n,attrs:{shape:f}});return n.disposeData(v.dataId),y}};
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class zs{constructor(t,e,n){this.variableNames=["input","indices","segmentIds"],this.outputShape=[],this.uniforms="segmentSize : i32, sparseSize : i32,",this.workgroupSize=[64,1,1],this.atomic=!0,this.outputShape=t,this.type=n,this.dispatchLayout=L([e]),this.dispatch=I(this.dispatchLayout,[e],this.workgroupSize),this.shaderKey="sparseSegmentSum"}getUserCode(){return`\n    ${b("index")} {\n      if (index < uniforms.sparseSize) {\n        let indexInSegmentIds = index / uniforms.segmentSize;\n        let indexInSegment = index % uniforms.segmentSize;\n        let indexInInput = indices[indexInSegmentIds];\n        let segmentId = segmentIds[indexInSegmentIds];\n\n        let value = input[indexInInput * uniforms.segmentSize + indexInSegment];\n        let outIndex = segmentId * uniforms.segmentSize + indexInSegment;\n        ${f("&result[outIndex]","value",this.type)}\n      }\n    }\n  `}}class Fs{constructor(t,e){this.variableNames=["segmentIds"],this.outputShape=[],this.workgroupSize=[64,1,1],this.atomic=!0,this.outputShape=[t],this.dispatchLayout=L(e),this.dispatch=I(this.dispatchLayout,e,this.workgroupSize),this.shaderKey="sparseSegmentIdCountProgram"}getUserCode(){return`\n    ${b("index")} {\n      if (index < uniforms.segmentIdsShape) {\n        let segmentId = segmentIds[index];\n        ${f("&result[segmentId]","1","int32")}\n      }\n    }\n  `}}class Bs{constructor(t,e){this.variableNames=["segmentSum","sameSegmentIdCount"],this.outputShape=[],this.uniforms="segmentSize : i32",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.type=e,this.dispatchLayout=L(t),this.dispatch=I(this.dispatchLayout,t,this.workgroupSize),this.shaderKey="sparseSegmentMean"}getUserCode(){return`\n    ${b("index")} {\n      if (index < uniforms.size) {\n        let segmentId = index / uniforms.segmentSize;\n        let count = sameSegmentIdCount[segmentId];\n        if (count != 0) {\n          ${"float32"===this.type?"setOutputAtIndex(index, segmentSum[index] / f32(count));":"setOutputAtIndexI32(index, segmentSum[index] / count);"}\n        }\n      }\n    }\n  `}}
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Us(t,e,n,r=!1,o){const a=i.util.sizeFromShape(t.shape)/t.shape[0],s=t.dtype,u=i.util.sizeFromShape(e.shape),l=o.readSync(n.dataId),c=u>0?l[u-1]+1:0;let h;const d=t.shape.slice();d[0]=c;const f=u*a,p=Ee({backend:o,attrs:{shape:d,value:0,dtype:s}});h=new zs(d,f,s);let m=[{type:"int32",data:[a]},{type:"int32",data:[f]}];const g=o.runWebGPUProgram(h,[t,e,n],s,m,p);if(r)return g;const v=Ee({backend:o,attrs:{shape:[c],value:0,dtype:"int32"}});h=new Fs(c,n.shape);const y=o.runWebGPUProgram(h,[n],"int32",null,v),b=Ee({backend:o,attrs:{shape:d,value:0,dtype:s}});h=new Bs(d,s),m=[{type:"int32",data:[a]}];const x=o.runWebGPUProgram(h,[g,y],s,m,b);return o.disposeData(g.dataId),o.disposeData(y.dataId),x}const js={kernelName:i.SparseSegmentMean,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:o}=e;return Us(r,i,o,!1,n)}};const Vs={kernelName:i.SparseSegmentSum,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:o}=e;return Us(r,i,o,!0,n)}};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Hs{constructor(t,e){this.variableNames=["A"],this.workgroupSize=[64,1,1],this.size=!0;const n=new Array(t.length);for(let r=0;r<n.length;r++)n[r]=t[r]*e[r];this.outputShape=n,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.rank=this.outputShape.length,this.shaderKey="tile"}getUserCode(){const t=function(t,e=""){if(t>=5)throw Error(`Tile for rank ${t} is not yet supported`);if(1===t)return`(resRC % ${e}aShape)`;const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let i=0;i<t;i++)r.push(`(${n[i]} % ${e}aShape[${i}])`);return r.join()}(this.rank,"uniforms.");return`\n      ${b("index")} {\n        if (index < uniforms.size) {\n          let resRC = getCoordsFromIndex(index);\n          setOutputAtIndex(index, getA(${t}));\n        }\n      }\n    `}}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Gs(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{reps:a}=r;if(n.shouldExecuteOnCPU([o])||"string"===o.dtype||o.shape.length>=5){const t=n.readSync(o.dataId),e="string"===o.dtype?t.map((t=>i.util.decodeString(t))):t,r=(0,i.buffer)(o.shape,o.dtype,e),s=yn(r,a);return n.makeTensorInfo(s.shape,s.dtype,s.values)}const s=new Hs(o.shape,a);return n.runWebGPUProgram(s,[o],o.dtype)}const Ws={kernelName:i.Tile,backendName:"webgpu",kernelFunc:Gs};const Xs={kernelName:i.SparseToDense,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:o,sparseValues:a,defaultValue:s}=e,{outputShape:u}=r,{sliceRank:l,numUpdates:c,sliceSize:h,strides:d,outputSize:f}=i.backend_util.calculateShapes(a,o,u),p=!1;if("string"===a.dtype){const t=n.bufferSync(o),e=n.bufferSync(a),r=i.util.decodeString(n.readSync(s.dataId)[0]),m=dn(t,e,u,f,h,c,l,d,r,p);return n.makeTensorInfo(u,m.dtype,m.values)}const m=[f/h,h],g=Me({inputs:{x:o},backend:n,attrs:{shape:[c,l]}}),v=a.shape.length?Me({inputs:{x:a},backend:n,attrs:{shape:[c,h]}}):Pe({inputs:{x:a},backend:n}),y=v.dtype,b=n.makeTensorInfo([],y,i.util.makeZerosTypedArray(1,y)),x=Me({inputs:{x:s},backend:n,attrs:{shape:Array(m.length).fill(1)}}),w=Gs({inputs:{x},backend:n,attrs:{reps:m}}),_=[{type:"int32",data:[l]},{type:"int32",data:d},{type:"int32",data:[i.util.sizeFromShape([c,h])]}];switch(c){case 0:break;case 1:{const t=new vs([c,h],l,g.shape.length,v.shape.length,d,m,y,p);n.runWebGPUProgram(t,[v,g],y,_,w)}break;default:{const t=new vs([c,h],l,g.shape.length,b.shape.length,d,m,y,p);n.runWebGPUProgram(t,[b,g],y,_,w)}{const t=new vs([c,h],l,g.shape.length,v.shape.length,d,m,y);n.runWebGPUProgram(t,[v,g],y,_,w)}}const S=Me({inputs:{x:w},backend:n,attrs:{shape:u}});return n.disposeData(g.dataId),n.disposeData(v.dataId),n.disposeData(x.dataId),n.disposeData(b.dataId),n.disposeData(w.dataId),S}};const Ys={kernelName:i.SplitV,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{numOrSizeSplits:a,axis:s}=r,u=i.util.parseAxisParam(s,o.shape)[0],l=i.backend_util.prepareSplitSize(o,a,u),c=o.shape.length,h=new Array(c).fill(0),d=o.shape.slice();return l.map((t=>{const e=[...d];e[u]=t;const r=yr({inputs:{x:o},backend:n,attrs:{begin:h,size:e}});return h[u]+=t,r}))}},qs=ze({opType:yt.SQRT}),$s={kernelName:i.Sqrt,backendName:"webgpu",kernelFunc:qs},Ks={kernelName:i.Square,backendName:"webgpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e,i=new De(n.shape,yt.SQUARE);return r.runWebGPUProgram(i,[n],n.dtype)}},Zs=Fe({opType:j.SQUARED_DIFFERENCE}),Qs={kernelName:i.SquaredDifference,backendName:"webgpu",kernelFunc:Zs};const Js={kernelName:i.Step,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function({inputs:t,attrs:e,backend:n}){const{x:r}=t,i=new De(r.shape,yt.STEP,"stepAlpha : f32,"),o=[{type:"float32",data:[e.alpha]}];return n.runWebGPUProgram(i,[r],r.dtype,o)}};
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class tu{constructor(t){this.variableNames=["x"],this.workPerThread=1,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.workPerThread,1,1]);const e=v(this.outputShape.length);this.uniforms=`begin : ${e},  strides : ${e}, `,this.shaderKey="stridedSlice"}getUserCode(){let t="";if(1===this.outputShape.length)t="coords * uniforms.strides + uniforms.begin";else{let e=0;t=this.outputShape.map(((t,n)=>(e++,1===this.outputShape.length?`coords * uniforms.strides[${n}] + uniforms.begin[${n}]`:`coords[${e-1}] * uniforms.strides[${n}] + uniforms.begin[${n}]`))).join(",")}return`\n       ${b("index")} {\n         if (index < uniforms.size) {\n           let coords = getCoordsFromIndex(index);\n           setOutputAtIndex(index, getX(${t}));\n         }\n       }\n     `}}const eu={kernelName:i.StridedSlice,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{begin:a,end:s,strides:u,beginMask:l,endMask:c,ellipsisMask:h,newAxisMask:d,shrinkAxisMask:f}=r,{finalShapeSparse:p,finalShape:m,isIdentity:g,sliceDim0:v,isSimpleSlice:y,begin:b,end:x,strides:w}=i.slice_util.sliceInfo(o.shape,a,s,u,l,c,h,d,f);let _;if(g)_=Me({inputs:{x:o},backend:n,attrs:{shape:m}});else if(v||y){i.util.assert(o.shape.length>=1,(()=>`Input must have rank at least 1, got: ${o.shape.length}`));const t=i.slice_util.computeOutShape(b,x,w),e=yr({inputs:{x:o},backend:n,attrs:{begin:b,size:t}});_=Me({inputs:{x:e},backend:n,attrs:{shape:m}}),n.disposeData(e.dataId)}else{if(n.shouldExecuteOnCPU([o])){const t=n.readSync(o.dataId),e=(0,i.buffer)(o.shape,o.dtype,t),r=mn(p,e,w,b);_=n.makeTensorInfo(m,o.dtype,r.values)}else{const t=new tu(p),e=[{type:"int32",data:b},{type:"int32",data:w}],r=n.runWebGPUProgram(t,[o],o.dtype,e);_=Me({inputs:{x:r},backend:n,attrs:{shape:m}}),n.disposeData(r.dataId)}}return _}};const nu={kernelName:i.StringNGrams,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{separator:i,nGramWidths:o,leftPad:a,rightPad:s,padWidth:u,preserveShortSequences:l}=r,{data:c,dataSplits:h}=e,d=n.readSync(c.dataId),f=n.readSync(h.dataId),[p,m]=gn(d,f,i,o,a,s,u,l);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(h.shape,"int32",m)]}},ru=Fe({opType:j.SUB,cpuKernelImpl:vn,supportsComplex:!0}),iu={kernelName:i.Sub,backendName:"webgpu",kernelFunc:ru},ou=ze({opType:yt.TAN}),au={kernelName:i.Tan,backendName:"webgpu",kernelFunc:ou},su=ze({opType:yt.TANH}),uu={kernelName:i.Tanh,backendName:"webgpu",kernelFunc:su};const lu={kernelName:i.TensorScatterUpdate,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:o,indices:a,updates:s}=e,{}=r,{sliceRank:u,numUpdates:l,sliceSize:c,strides:h,outputSize:d}=i.backend_util.calculateShapes(s,a,o.shape),f=[d/c,c];if(0===d)return n.makeTensorInfo(o.shape,a.dtype);const p=[],m=Me({inputs:{x:a},backend:n,attrs:{shape:[l,u]}});p.push(m);const g=Me({inputs:{x:s},backend:n,attrs:{shape:[l,c]}});p.push(g);const v=Me({inputs:{x:o},backend:n,attrs:{shape:f}});p.push(v);const y=Gs({inputs:{x:v},backend:n,attrs:{reps:Array(f.length).fill(1)}}),b=new vs([l,c],u,m.shape.length,g.shape.length,h,f,o.dtype,!1),x=[{type:"int32",data:[u]},{type:"int32",data:h},{type:"int32",data:[i.util.sizeFromShape([l,c])]}],w=n.runWebGPUProgram(b,[g,m],v.dtype,x,y);p.push(w);const _=Me({inputs:{x:w},backend:n,attrs:{shape:o.shape}});return p.forEach((t=>n.disposeData(t.dataId))),_}};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class cu{constructor(t){this.variableNames=["x","indices"],this.workgroupSize=[256,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.uniforms="inputSize : i32, firstPass : i32, negativeInf : f32,\n        dir : i32, inc : i32,",this.shaderKey="swap"}getUserCode(){return`\n        ${b("index")} {\n          if (index < uniforms.size) {\n            let outC = getCoordsFromIndex(index);\n            let batch = outC[0];\n            let elemIdx = outC[1];\n            // We compare elements pair-wise within a group of size 2 * inc.\n            // The comparing rule for each group alternates between ascending\n            // and descending. Within each group, we compare each pair at\n            // positions i and i+inc. To decide whether an element at position i\n            // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n            // inc, it is in the first half of the group, we denote it as x0,\n            // otherwise we denote it as x1.\n            // For example, as shown in the Bitonic top K paper referenced\n            // above, Figure5(a) shows that element[1] is in the second half of\n            // the group when group size is 2, but it is in the first half of\n            // the group when group size is 4.\n            let isFirstInPair = elemIdx % (2 * uniforms.inc) < uniforms.inc;\n            var i = 0;\n            if (isFirstInPair) {\n              i = elemIdx;\n            } else {\n              i = elemIdx - uniforms.inc;\n            }\n\n            var i0 = 0;\n            if (uniforms.firstPass == 1) {\n              i0 = i;\n            } else {\n              i0 = i32(getIndices(batch, i));\n            }\n\n            var i1 = 0;\n            if (uniforms.firstPass == 1) {\n              i1 = i + uniforms.inc;\n            } else {\n              i1 = i32(getIndices(batch, i + uniforms.inc));\n            }\n\n            var x0 = f32(0.0);\n            var x1 = f32(0.0);\n            if (i0 < uniforms.inputSize) {\n              x0 = getX(batch, i0);\n            } else {\n              x0 = uniforms.negativeInf;\n            }\n            if (i1 < uniforms.inputSize) {\n              x1 = getX(batch, i1);\n            } else {\n              x1 = uniforms.negativeInf;\n            }\n\n            let reverse = elemIdx % (2 * uniforms.dir) >= uniforms.dir;\n            let isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n            if (reverse == isGreater) {\n              // Elements in opposite order of direction\n              let iTemp = i0;\n              i0 = i1;\n              i1 = iTemp;\n            }\n            if (isFirstInPair) {\n              setOutputAtIndex(index, f32(i0));\n            } else {\n              setOutputAtIndex(index, f32(i1));\n            }\n          }\n        }\n      `}}class hu{constructor(t){this.variableNames=["x","indices"],this.workgroupSize=[256,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.uniforms="inputSize : i32, firstPass : i32, k : i32,",this.shaderKey="merge"}getUserCode(){return`\n        ${b("index")} {\n          if (index < uniforms.size) {\n            let outC = getCoordsFromIndex(index);\n            let batch = outC[0];\n            let elemIdx = outC[1];\n            // The output size is half of the previous size.\n            // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _\n            // (k=4), we only need to output the indices at positions |, the\n            // indices at positions _ can be thrown away, see Figure5(b) After\n            // Phase 2 (Merge phase) in the Bitonic Top K paper referenced\n            // above.\n            // For example, the paper shows we only need to output the orange\n            // bars. The output sequence should look like this | | | | | | | |.\n            // Because the sequence is halved, to map the output index back to\n            // the previous sequence to find the corresponding value, we need\n            // to double the index. When we double the index, we basically\n            // interpolate a position, so 2i looks like\n            // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k\n            // position of each 2k positions by - elemIdx % k. E.g. for output\n            // at index 4,5,6,7, we want to get the corresponding element at\n            // original index 8,9,10,11, for output at index 8,9,10,11,\n            // we want to get the corresponding element at original index\n            // 16,17,18,19, so on and so forth.\n\n            var i = 0;\n            if (elemIdx < uniforms.k) {\n              i = elemIdx;\n            } else {\n              i = elemIdx * 2 - elemIdx % uniforms.k;\n            }\n            var i0 = 0;\n            if (uniforms.firstPass == 1) {\n              i0 = i;\n            } else {\n              i0 = i32(getIndices(batch, i));\n            }\n            var i1 = 0;\n            if (uniforms.firstPass == 1) {\n              i1 = i + uniforms.k;\n            } else {\n              i1 = i32(getIndices(batch, i + uniforms.k));\n            }\n\n            let x0 = getX(batch, i0);\n            var x1 = f32(0.0);\n            if (i1 < uniforms.inputSize) {\n              x1 = getX(batch, i1);\n            } else {\n              x1 = x0;\n            }\n\n            if (x0 >= x1) {\n              setOutputAtIndex(index, f32(i0));\n            } else {\n              setOutputAtIndex(index, f32(i1));\n            }\n          }\n        }\n      `}}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function du(t,e){null!==e&&t.disposeData(e.dataId)}function fu(t){let e=1;for(;e<t;)e*=2;return e}const pu={kernelName:i.TopK,backendName:"webgpu",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{k:a,sorted:s}=r,u=o.shape,l=u[u.length-1];if(n.shouldExecuteOnCPU([o])){const t=n.readSync(o.dataId),[e,r]=bn(t,u,o.dtype,a,s);return[n.makeTensorInfo(e.shape,e.dtype,e.values),n.makeTensorInfo(r.shape,r.dtype,r.values)]}if(0===a)return u[u.length-1]=0,[n.makeTensorInfo(u,o.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(1===l)return[o,Ee({attrs:{shape:u,dtype:"int32",value:0},backend:n})];const c=i.util.sizeFromShape(u)/l,h=Me({inputs:{x:o},attrs:{shape:[c,l]},backend:n}),d=fu(a),f=fu(l);let p=null;const m=()=>null===p?[h,h]:[h,p],g=(t,e,r)=>{const i=m(),o=new cu(r),a=[{type:"int32",data:[l]},{type:"int32",data:[null===p?1:0]},{type:"float32",data:[Number.NEGATIVE_INFINITY]},{type:"int32",data:[t]},{type:"int32",data:[e]}],s=p;p=n.runWebGPUProgram(o,i,"int32",a),du(n,s)};for(let t=1;t<d;t*=2){const e=2*t;for(let n=t;n>=1;n/=2)g(e,n,[c,f])}for(let t=f;t>d;t/=2){const e=m(),r=new hu([c,t/2]),i=[{type:"int32",data:[l]},{type:"int32",data:[null===p?1:0]},{type:"int32",data:[d]}],o=p;p=n.runWebGPUProgram(r,e,"int32",i),du(n,o);const a=d/2,s=2*a;for(let t=a;t>=1;t/=2)g(s,t,p.shape)}let v=p;p=yr({inputs:{x:p},backend:n,attrs:{begin:0,size:[c,a]}}),du(n,v);let y=Co({inputs:{x:h,indices:p},backend:n,attrs:{axis:1,batchDims:1}});du(n,h);const b=u.slice(0,-1);b.push(a),v=p,p=Me({inputs:{x:p},attrs:{shape:b},backend:n}),du(n,v);const x=y;return y=Me({inputs:{x:y},attrs:{shape:b},backend:n}),du(n,x),[y,p]}};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class mu{constructor(t){this.variableNames=["Image","Transforms"],this.uniforms="interpolationModeId : i32, fillModeId : i32, fillValue : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=L(this.outputShape),this.dispatch=I(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="transform"}getUserCode(){return`\n          fn mapCoord(outCoord : f32, len : f32) -> f32{\n            var inCoord = outCoord;\n            if(uniforms.fillModeId == 2) {\n              if (inCoord < 0.0) {\n                if (len <= 1.0) {\n                  inCoord = 0.0;\n                } else {\n                  let sz2 = 2.0 * len;\n                  if (inCoord < sz2) {\n                    inCoord = sz2 * f32(i32(f32(-inCoord / sz2))) +\n                    inCoord;\n                  }\n                  if (inCoord < -len) {\n                    inCoord = inCoord + sz2;\n                  } else {\n                    inCoord = -inCoord - 1.0;\n                  }\n                }\n              } else if (inCoord > len - 1.0) {\n                if (len <= 1.0) {\n                  inCoord = 0.0;\n                } else {\n                  let sz2 = 2.0 * len;\n                  inCoord = inCoord - sz2 * f32(i32(f32(inCoord / sz2)));\n                  if (inCoord >= len) {\n                    inCoord = sz2 - inCoord - 1.0;\n                  }\n                }\n              }\n              return clamp(inCoord, 0.0, len - 1.0);\n            } else if (uniforms.fillModeId == 3) {\n              if (inCoord < 0.0) {\n                if (len <= 1.0) {\n                  inCoord = 0.0;\n                } else {\n                  let sz = len - 1.0;\n                  inCoord = inCoord + len * (f32(i32(f32(-inCoord / sz))) + 1.0);\n                }\n              } else if (inCoord > len - 1.0) {\n                if (len <= 1.0) {\n                  inCoord = 0.0;\n                } else {\n                  let sz = len - 1.0;\n                  inCoord = inCoord - len * f32(i32(f32(inCoord / sz)));\n                }\n              }\n              return clamp(inCoord, 0.0, len - 1.0);\n            } else if (uniforms.fillModeId == 4) {\n              return clamp(outCoord, 0.0, len - 1.0);\n            }\n            return outCoord;\n          }\n          fn readWithFillValue(batch : i32, coordY : i32, coordX : i32,\n            channel : i32) -> f32 {\n            var outputValue : f32;\n            if (0 <= coordY && coordY < uniforms.imageShape[1] && 0 <= coordX && coordX < uniforms.imageShape[2]) {\n                outputValue = getImage(batch, coordY, coordX, channel);\n            } else {\n              outputValue = uniforms.fillValue;\n            }\n            return outputValue;\n          }\n\n          ${b("index")} {\n            if (index < uniforms.size) {\n              let coords = getCoordsFromIndex(index);\n              var outputValue : f32;\n              let batch = coords[0];\n              let x = coords[2];\n              let y = coords[1];\n              let channel = coords[3];\n              let xf = f32(x);\n              let yf = f32(y);\n              let a1 = getTransforms(batch, 0);\n              let a2 = getTransforms(batch, 1);\n              let a3 = getTransforms(batch, 2);\n              let b1 = getTransforms(batch, 3);\n              let b2 = getTransforms(batch, 4);\n              let b3 = getTransforms(batch, 5);\n              let c1 = getTransforms(batch, 6);\n              let c2 = getTransforms(batch, 7);\n              let projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = uniforms.fillValue;\n              } else {\n                let inX = (a1 * xf + a2 * yf + a3) / projection;\n                let inY = (b1 * xf + b2 * yf + b3) / projection;\n                let mapX = mapCoord(inX, f32(uniforms.imageShape[2]));\n                let mapY = mapCoord(inY, f32(uniforms.imageShape[1]));\n\n                if (uniforms.interpolationModeId == 1) {\n                  let coordY = i32(round(mapY));\n                  let coordX = i32(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  let yFloor = floor(mapY);\n                  let xFloor = floor(mapX);\n                  let yCeil = yFloor + 1.0;\n                  let xCeil = xFloor + 1.0;\n                  let valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, i32(yFloor), i32(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, i32(yFloor), i32(xCeil), channel);\n                  let valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, i32(yCeil), i32(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, i32(yCeil), i32(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutputAtIndex(index, outputValue);\n            }\n          }\n        `}}const gu={kernelName:i.Transform,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{image:i,transforms:o}=e,{interpolation:a,fillMode:s,fillValue:u,outputShape:l}=r,[c,h,d,f]=i.shape,[p,m]=null!=l?l:[h,d],g=new mu([c,p,m,f]),v="nearest"===a?1:2;let y;switch(s){case"constant":default:y=1;break;case"reflect":y=2;break;case"wrap":y=3;break;case"nearest":y=4}const b=[{type:"int32",data:[v]},{type:"int32",data:[y]},{type:"float32",data:[u]}];return n.runWebGPUProgram(g,[i,o],"float32",b)}};const vu={kernelName:i.Unpack,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{value:i}=e;let{axis:o}=r;o<0&&(o+=i.shape.length);const a=i,s=a.shape.length,u=i.shape[o],l=new Array(s-1);let c=0;for(let t=0;t<s;t++)t!==o&&(l[c++]=a.shape[t]);const h=[],d=new Array(s).fill(0),f=a.shape.slice();f[o]=1;const p=new Array(u);for(let t=0;t<p.length;t++){d[o]=t;const e=yr({inputs:{x:a},backend:n,attrs:{begin:d,size:f}}),r=Me({inputs:{x:e},backend:n,attrs:{shape:l}});p[t]=r,h.push(e)}return h.forEach((t=>n.disposeData(t.dataId))),p}};
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class yu{constructor(t,e,n){if(this.outputShape=[],this.variableNames=["x","segmentIds"],this.uniforms="numSegments : i32, xSize: i32,",this.workgroupSize=[64,1,1],this.atomic=!0,this.outputShape=e,this.dispatchLayout=L(t),this.dispatch=I(this.dispatchLayout,t,this.workgroupSize),"float32"!==n&&"int32"!==n)throw new Error(`UnsortedSegmentSum only supports float32 and int32\n              types, does not support ${n} type.`);this.type=n,this.shaderKey="unsortedSegmentSum"}getUserCode(){return`\n    ${b("index")} {\n      if (index < uniforms.xSize) {\n        let coords = getXCoordsFromIndex(index);\n        let b = coords[0];\n        let inCol = coords[1];\n\n        let segmentId = i32(getSegmentIds(inCol));\n        if (segmentId >= 0) {\n          let flatIndex = b * uniforms.numSegments + segmentId % uniforms.numSegments;\n          let value = getX(b, inCol);\n\n          ${f("&result[flatIndex]","value",this.type)}\n        }\n      }\n    }\n  `}}const bu=[ke,Sn,An,Cn,kn,Nn,Un,jn,Hn,Gn,Xn,qn,Kn,Qn,tr,lr,cr,fr,pr,mr,xr,Sr,Ar,Ir,Pr,Rr,Re,Fr,Gr,Kr,ei,ri,oi,ai,si,li,hi,fi,bi,xi,wi,Si,Ii,Ni,Ci,Oi,Ri,Fi,Bi,ji,Xi,qi,$i,Zi,Ji,eo,ro,oo,uo,Ae,co,vo,fo,mo,wo,_o,So,Ao,To,Io,Po,Oe,Oo,jr,Ro,zo,Bo,Uo,Vo,Go,Xo,Ko,qo,Qo,ta,na,aa,ua,or,ca,ha,ga,da,ma,va,sr,ya,xa,_a,Ea,ka,Hi,Ia,Na,Pa,Cr,La,za,Fa,ja,Ha,Ga,Wa,Xa,kr,qa,Ka,Qa,ts,Ce,ns,is,as,us,cs,ds,ps,gs,ys,xs,_s,Es,Ms,Ts,Is,Ps,br,Js,eu,nu,Ta,Ls,Ds,js,Vs,Xs,Ys,$s,Ks,Qs,iu,Wi,au,uu,lu,Ws,pu,gu,Dn,vu,{kernelName:i.UnsortedSegmentSum,backendName:"webgpu",kernelFunc:
/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,segmentIds:a}=e,{numSegments:s}=r,u=o.shape.length,l=[];let c=0;const h=i.backend_util.getAxesPermutation([c],u);let d=o;null!=h&&(d=Rn({inputs:{x:o},backend:n,attrs:{perm:h}}),l.push(d),c=i.backend_util.getInnerMostAxes(1,u)[0]);const f=i.backend_util.segment_util.computeOutShape(d.shape,c,s),p=i.util.sizeFromShape([d.shape[c]]),m=Me({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}});l.push(m);const g=o.dtype,v=[m.shape[0],s],y=Ee({backend:n,attrs:{shape:v,value:0,dtype:g}}),b=new yu(m.shape,v,g),x=[{type:"int32",data:[s]},{type:"int32",data:[i.util.sizeFromShape(m.shape)]}],w=n.runWebGPUProgram(b,[m,a],g,x,y),_=Me({inputs:{x:w},backend:n,attrs:{shape:f}});l.push(w);let S=_;if(null!=h){l.push(_);const t=i.backend_util.getUndoAxesPermutation(h);S=Rn({inputs:{x:S},backend:n,attrs:{perm:t}})}return l.forEach((t=>n.disposeData(t.dataId))),S}},Da];for(const t of bu)(0,i.registerKernel)(t)}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */,5805:(t,e,n)=>{"use strict";n.d(e,{ox:()=>Wt});var r={};n.r(r),n.d(r,{json:()=>R});var i={};n.r(i),n.d(i,{json:()=>D});var o={};n.r(o),n.d(o,{json:()=>z});var a={};n.r(a),n.d(a,{json:()=>F});var s={};n.r(s),n.d(s,{json:()=>B});var u={};n.r(u),n.d(u,{json:()=>U});var l={};n.r(l),n.d(l,{json:()=>j});var c={};n.r(c),n.d(c,{json:()=>V});var h={};n.r(h),n.d(h,{json:()=>H});var d={};n.r(d),n.d(d,{json:()=>G});var f={};n.r(f),n.d(f,{json:()=>W});var p={};n.r(p),n.d(p,{json:()=>X});var m={};n.r(m),n.d(m,{json:()=>Y});var g={};n.r(g),n.d(g,{json:()=>q});var v={};n.r(v),n.d(v,{json:()=>$});var y={};n.r(y),n.d(y,{json:()=>K});var b={};n.r(b),n.d(b,{json:()=>Z});var x={};n.r(x),n.d(x,{json:()=>Q});var w={};n.r(w),n.d(w,{json:()=>J});var _=n(86748);
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */
var S,E;(0,_.env)().registerFlag("KEEP_INTERMEDIATE_TENSORS",(()=>!1),(t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})),function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"}(S||(S={})),function(t){let e;!function(t){t[t.LEGACY=0]="LEGACY",t[t.V1=1]="V1",t[t.V2=2]="V2"}(e=t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))}(E||(E={}));
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const A={};function M(t){return A[t]}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function C(t,e,n,r,i){const o=e.inputParams[t];if(o&&void 0!==o.inputIndexStart){const t=o.inputIndexStart,a=0===o.inputIndexEnd?void 0:void 0===o.inputIndexEnd?t+1:o.inputIndexEnd,s=t<0?e.inputNames.length+t:t;if("tensor"===o.type)return T(e.inputNames[s],n,r,i);if("tensors"===o.type){const o=e.inputs.slice(t,a);return e.inputNames.slice(t,a).filter(((t,e)=>{var n;return"NoOp"!==(null===(n=o[e])||void 0===n?void 0:n.op)})).map((t=>T(t,n,r,i)))}const u=T(e.inputNames[s],n,r,i),l=u.dataSync();return"number"===o.type?l[0]:_.util.toNestedArray(u.shape,l)}const a=e.attrParams[t];return a&&a.value}function T(t,e,n,r){const[i,o]=P(t,n);if(null!=r){const t=r.getHashTableHandleByName(i);if(null!=t)return t}const a=n.currentContextIds.find((t=>!!e[N(i,t)]));return void 0!==a?e[N(i,a)][o]:void 0}function k(t,e,n){return e[N(t,n.currentContextId)]}function I(t,e){const[n,r,i]=P(t,e);return[N(n,e&&e.currentContextId),r,i]}function N(t,e){return e?`${t}-${e}`:t}function P(t,e){if(""===t)return["",0,void 0];const n=null!=e&&null!=e.parseNodeNameCache;if(n){const n=e.parseNodeNameCache.get(t);if(null!=n)return n}const r=t.split(":");let i;if(1===r.length)i=[t,0,void 0];else{const t=r[0],e=3===r.length?r[1]:void 0;i=[t,Number(r[r.length-1]),e]}return n&&e.parseNodeNameCache.set(t,i),i}function O(t,e,n){let r=C("pad",t,e,n);if("explicit"===r){r=C("explicitPaddings",t,e,n);const i=[[0,0],[0,0],[0,0],[0,0]];for(let t=0;t<4;t++)i[t][0]=r[2*t],i[t][1]=r[2*t+1];return i}return r}function L(t){return t.kept?t:(0,_.clone)(t)}
/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const R=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],D=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],z=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],F=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],B=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],U=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],j=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],V=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],H=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],G=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],W=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],X=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],Y=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],q=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],$=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],K=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],Z=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],Q=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],J=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}];
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class tt{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const t=[].concat(...[r,i,o,a,s,u,l,c,h,d,f,p,m,g,v,y,b,x,w].map((t=>t.json)));this.opMappers=t.reduce(((t,e)=>(t[e.tfOpName]=e,t)),{})}transformGraph(t,e={}){const n=t.node,r=[],i=[],o=[],a=n.reduce(((t,e)=>(t[e.name]=this.mapNode(e),e.op.startsWith("Placeholder")?r.push(t[e.name]):"Const"===e.op?i.push(t[e.name]):null!=e.input&&0!==e.input.length||o.push(t[e.name]),t)),{});let s=[];const u=[];let l={},c={};null!=e&&(l=this.mapSignatureEntries(e.inputs),c=this.mapSignatureEntries(e.outputs));const h=Object.keys(a);h.forEach((t=>{const e=a[t];e.inputNames.forEach(((t,n)=>{const[r,,i]=I(t),o=a[r];if(null!=o.outputs){const t=o.outputs.indexOf(i);if(-1!==t){const i=`${r}:${t}`;e.inputNames[n]=i}}e.inputs.push(o),o.children.push(e)}))})),0===Object.keys(c).length?h.forEach((t=>{const e=a[t];0===e.children.length&&u.push(e)})):Object.keys(c).forEach((t=>{const[e]=I(t),n=a[e];null!=n&&(n.signatureKey=c[t],u.push(n))})),Object.keys(l).length>0?Object.keys(l).forEach((t=>{const[e]=I(t),n=a[e];n&&(n.signatureKey=l[t],s.push(n))})):s=r;let d={};null!=t.library&&null!=t.library.function&&(d=t.library.function.reduce(((t,e)=>(t[e.signature.name]=this.mapFunction(e),t)),{}));const f={nodes:a,inputs:s,outputs:u,weights:i,placeholders:r,signature:e,functions:d};return o.length>0&&(f.initNodes=o),f}mapSignatureEntries(t){return Object.keys(t||{}).reduce(((e,n)=>(e[t[n].name]=n,e)),{})}mapNode(t){const e=M(t.op)||this.opMappers[t.op]||{};null==t.attr&&(t.attr={});const n={name:t.name,op:t.op,category:e.category,inputNames:(t.input||[]).map((t=>t.startsWith("^")?t.slice(1):t)),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:t.attr,outputs:e.outputs};return null!=e.inputs&&(n.inputParams=e.inputs.reduce(((t,e)=>(t[e.name]={type:e.type,inputIndexStart:e.start,inputIndexEnd:e.end},t)),{})),null!=e.attrs&&(n.attrParams=e.attrs.reduce(((e,n)=>{const r=n.type;let i;switch(n.type){case"string":i=nt(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=nt(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":i=dt(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=dt(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":i=it(t.attr,n.tfName,n.defaultValue||0),void 0===i&&n.tfDeprecatedName&&(i=it(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":i=ht(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=ht(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":i=rt(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=rt(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":i=pt(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=pt(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":i=ct(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=ct(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":i=ft(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=ft(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":i=st(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=st(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":i=ut(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=ut(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":i=at(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=at(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${n.type} for op: ${t.op}`)}return e[n.name]={value:i,type:r},e}),{})),n}mapFunction(t){const e=t.nodeDef,n=[];let r={};null!=e&&(r=e.reduce(((t,e)=>(t[e.name]=this.mapNode(e),"Const"===e.op&&n.push(t[e.name]),t)),{}));const i=[],o=[];t.signature.inputArg.forEach((t=>{const[e]=I(t.name),n={name:e,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:ot(t.type),type:"dtype"}},children:[]};n.signatureKey=t.name,i.push(n),r[e]=n}));Object.keys(r).forEach((t=>{const e=r[t];e.inputNames.forEach(((t,n)=>{const[i,,o]=I(t),a=r[i];if(null!=a.outputs){const t=a.outputs.indexOf(o);if(-1!==t){const r=`${i}:${t}`;e.inputNames[n]=r}}e.inputs.push(a),a.children.push(e)}))}));const a=t.ret;t.signature.outputArg.forEach((t=>{const[e,n]=I(a[t.name]),i=r[e];null!=i&&(i.defaultOutput=n,o.push(i))}));const s=this.mapArgsToSignature(t);return{nodes:r,inputs:i,outputs:o,weights:n,placeholders:[],signature:s}}mapArgsToSignature(t){return{methodName:t.signature.name,inputs:t.signature.inputArg.reduce(((t,e)=>(t[e.name]=this.mapArgToTensorInfo(e),t)),{}),outputs:t.signature.outputArg.reduce(((e,n)=>(e[n.name]=this.mapArgToTensorInfo(n,t.ret),e)),{})}}mapArgToTensorInfo(t,e){let n=t.name;return null!=e&&(n=e[n]),{name:n,dtype:t.type}}}function et(t,e){const n=Array.isArray(t)?String.fromCharCode.apply(null,t):function(t){const e=(0,_.env)().global;if(void 0!==e.atob)return e.atob(t);if("undefined"!=typeof Buffer)return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(t);return e?n:n.toLowerCase()}function nt(t,e,n,r=!1){const i=t[e];return null!=i?et(i.s,r):n}function rt(t,e,n){const r=t[e];return r?r.b:n}function it(t,e,n){const r=t[e]||{},i=null!=r.i?r.i:null!=r.f?r.f:n;return"number"==typeof i?i:parseInt(i,10)}function ot(t){switch("string"==typeof t&&(t=S[t]),t){case S.DT_FLOAT:case S.DT_HALF:return"float32";case S.DT_INT32:case S.DT_INT64:case S.DT_INT8:case S.DT_UINT8:return"int32";case S.DT_BOOL:return"bool";case S.DT_DOUBLE:return"float32";case S.DT_STRING:return"string";case S.DT_COMPLEX64:case S.DT_COMPLEX128:return"complex64";default:return null}}function at(t,e,n){const r=t[e];return r&&r.func?r.func.name:n}function st(t,e,n){const r=t[e];return r&&r.type?ot(r.type):n}function ut(t,e,n){const r=t[e];return r&&r.list&&r.list.type?r.list.type.map((t=>ot(t))):n}function lt(t){if(!t.unknownRank)return null!=t.dim?t.dim.map((t=>"number"==typeof t.size?t.size:parseInt(t.size,10))):[]}function ct(t,e,n){const r=t[e];return r&&r.shape?lt(r.shape):n}function ht(t,e,n){const r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((t=>"number"==typeof t?t:parseInt(t,10))):n}function dt(t,e,n,r=!1){const i=t[e];return i&&i.list&&i.list.s?i.list.s.map((t=>et(t,r))):n}function ft(t,e,n){const r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map((t=>lt(t))):n}function pt(t,e,n){const r=t[e];return r&&r.list&&r.list.b?r.list.b:n}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class mt{constructor(t,e,n){this.node=t,this.tensorMap=e,this.context=n,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map((t=>this.getInput(t))),null!=t.rawAttrs&&(this.attrs=Object.keys(t.rawAttrs).reduce(((t,e)=>(t[e]=this.getAttr(e),t)),{}))}getInput(t){return T(t,this.tensorMap,this.context)}getAttr(t,e){const n=this.node.rawAttrs[t];if(null!=n.tensor)return T(t,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return it(this.node.rawAttrs,t,e);if(null!=n.s)return nt(this.node.rawAttrs,t,e);if(null!=n.b)return rt(this.node.rawAttrs,t,e);if(null!=n.shape)return ct(this.node.rawAttrs,t,e);if(null!=n.type)return st(this.node.rawAttrs,t,e);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return ht(this.node.rawAttrs,t,e);if(null!=n.list.s)return dt(this.node.rawAttrs,t,e);if(null!=n.list.shape)return ft(this.node.rawAttrs,t,e);if(null!=n.list.b)return pt(this.node.rawAttrs,t,e);if(null!=n.list.type)return ut(this.node.rawAttrs,t,e)}return e}}var gt=n(9951);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function vt(t,e,n=""){if("number"!=typeof t&&"number"!=typeof e){_.util.assert(t.length===e.length,(()=>n+` Shapes ${t} and ${e} must match`));for(let r=0;r<t.length;r++){const i=t[r],o=e[r];_.util.assert(i<0||o<0||i===o,(()=>n+` Shapes ${t} and ${e} must match`))}}}function yt(t){return"number"!=typeof t&&!t.some((t=>t<0))}function bt(t,e,n){let r=xt(t,n);const i=!yt(r);if(i&&0===e.length)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(i&&e.forEach((t=>{r=xt(t.shape,r)})),!yt(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function xt(t,e){if("number"==typeof t)return e;if("number"==typeof e)return t;if(t.length!==e.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${e}`);const n=[];for(let r=0;r<t.length;++r){const i=t[r],o=e[r];if(i>=0&&o>=0&&i!==o)throw new Error(`Incompatible shape during merge: ${t} vs. ${e}`);n[r]=i>=0?i:o}return n}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class wt{constructor(t,e,n,r,i,o,a){this.name=t,this.dtype=e,this.maxSize=n,this.elementShape=r,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=a,this.tensors=[],this.closed_=!1,this.idTensor=(0,_.scalar)(0),(0,_.keep)(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(t){this.tensors.forEach((e=>{null!=t&&t.has(e.tensor.id)||e.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(t<0||t>=this.size())throw new Error(`Tried to read from index ${t}, but array size is: ${this.size()}`);const e=this.tensors[t];if(e.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${t} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(e.cleared=!0),e.read=!0,e.tensor}readMany(t){return t.map((t=>this.read(t)))}write(t,e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(t<0||!this.dynamicSize&&t>=this.maxSize)throw new Error(`Tried to write to index ${t}, but array is not resizeable and size is: ${this.maxSize}`);const n=this.tensors[t]||{};if(e.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t},\n          because the value dtype is ${e.dtype}, but TensorArray dtype is ${this.dtype}.`);if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=e.shape),vt(this.elementShape,e.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${t}.`),n.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t}, because it has already been read.`);if(n.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t}, because it has already been written.`);n.tensor=e,(0,_.keep)(e),n.written=!0,this.tensors[t]=n}writeMany(t,e){if(t.length!==e.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${t.length} is not the same as tensors size: ${e.length}.`);t.forEach(((t,n)=>this.write(t,e[n])))}gather(t,e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${e}`);if(t)t=t.slice(0,this.size());else{t=[];for(let e=0;e<this.size();e++)t.push(e)}if(0===t.length)return(0,_.tensor)([],[0].concat(this.elementShape));const n=this.readMany(t);return vt(this.elementShape,n[0].shape,"TensorArray shape mismatch: "),(0,_.stack)(n,0)}concat(t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${t}`);if(0===this.size())return(0,_.tensor)([],[0].concat(this.elementShape));const e=[];for(let t=0;t<this.size();t++)e.push(t);const n=this.readMany(e);return vt(this.elementShape,n[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${n[0].shape})`),(0,_.concat)(n,0)}scatter(t,e){if(e.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${e.dtype}`);if(t.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${e.shape[0]}`);const n=Math.max(...t);if(!this.dynamicSize&&n>=this.maxSize)throw new Error(`Max index must be < array size (${n}  vs. ${this.maxSize})`);this.writeMany(t,(0,_.unstack)(e,0))}split(t,e){if(e.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${e.dtype}`);let n=0;const r=t.map((t=>(n+=t,n)));if(n!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${n}, and tensor's shape is: ${e.shape}`);if(!this.dynamicSize&&t.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${t.length}), and the TensorArray is not marked as dynamically resizeable`);const i=0===n?0:e.size/n,o=[];(0,_.tidy)((()=>{e=(0,_.reshape)(e,[1,n,i]);for(let n=0;n<t.length;++n){const a=[0,0===n?0:r[n-1],0],s=[1,t[n],i];o[n]=(0,_.reshape)((0,_.slice)(e,a,s),this.elementShape)}return o}));const a=[];for(let e=0;e<t.length;e++)a[e]=e;this.writeMany(a,o)}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class _t{get id(){return this.idTensor.id}constructor(t,e,n,r=-1){this.tensors=t,this.elementShape=e,this.elementDtype=n,null!=t&&t.forEach((t=>{if(n!==t.dtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${t.dtype}`);vt(e,t.shape,"TensorList shape mismatch: "),(0,_.keep)(t)})),this.idTensor=(0,_.scalar)(0),this.maxNumElements=r,(0,_.keep)(this.idTensor)}copy(){return new _t([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(t){this.tensors.forEach((e=>{null!=t&&t.has(e.id)||e.dispose()})),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(t,e,n=-1){if(e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e}, but list elements ${this.elementDtype}`);if(-1!==n&&this.tensors.length!==n)throw new Error(`Operation expected a list with ${n} elements but got a list with ${this.tensors.length} elements.`);vt(t,this.elementShape,"TensorList shape mismatch: ");const r=bt(this.elementShape,this.tensors,t);return(0,_.tidy)((()=>{const t=this.tensors.map((t=>(0,_.reshape)(t,r)));return(0,_.stack)(t,0)}))}popBack(t,e){if(e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e}, but list elements ${this.elementDtype}`);if(0===this.size())throw new Error("Trying to pop from an empty list.");const n=bt(this.elementShape,this.tensors,t),r=this.tensors.pop();return r.kept=!1,vt(r.shape,t,"TensorList shape mismatch: "),(0,_.reshape)(r,n)}pushBack(t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(vt(t.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");(0,_.keep)(t),this.tensors.push(t)}resize(t){if(t<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${t}`);if(-1!==this.maxNumElements&&t>this.maxNumElements)throw new Error(`TensorListResize input size ${t} is greater maxNumElement ${this.maxNumElements}.`);const e=new _t([],this.elementShape,this.elementDtype,this.maxNumElements);e.tensors.length=t;for(let n=0;n<Math.min(this.tensors.length,t);++n)e.tensors[n]=this.tensors[n];return e}getItem(t,e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(t<0||t>this.tensors.length)throw new Error(`Trying to access element ${t} in a list with ${this.tensors.length} elements.`);if(null==this.tensors[t])throw new Error(`element at index ${t} is null.`);vt(this.tensors[t].shape,e,"TensorList shape mismatch: ");const r=bt(this.elementShape,this.tensors,e);return(0,_.reshape)(this.tensors[t],r)}setItem(t,e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(t<0||-1!==this.maxNumElements&&t>=this.maxNumElements)throw new Error(`Trying to set element ${t} in a list with max ${this.maxNumElements} elements.`);vt(this.elementShape,e.shape,"TensorList shape mismatch: "),(0,_.keep)(e),null!=this.tensors[t]&&(this.tensors[t].kept=!1),this.tensors[t]=e}gather(t,e,n){if(e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e}, but list elements ${this.elementDtype}`);vt(this.elementShape,n,"TensorList shape mismatch: "),t=t.slice(0,this.size());const r=bt(this.elementShape,this.tensors,n);return 0===t.length?(0,_.tensor)([],[0].concat(r)):(0,_.tidy)((()=>{const e=t.map((t=>(0,_.reshape)(this.tensors[t],r)));return(0,_.stack)(e,0)}))}concat(t,e){if(t&&t!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${t}`);vt(this.elementShape,e,"TensorList shape mismatch: ");const n=bt(this.elementShape,this.tensors,e);return 0===this.size()?(0,_.tensor)([],[0].concat(n)):(0,_.tidy)((()=>{const t=this.tensors.map((t=>(0,_.reshape)(t,n)));return(0,_.concat)(t,0)}))}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const St=async(t,e,n)=>{switch(t.op){case"If":case"StatelessIf":{const r=C("thenBranch",t,e,n),i=C("elseBranch",t,e,n),o=C("cond",t,e,n),a=C("args",t,e,n);return(await o.data())[0]?n.functionMap[r].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap):n.functionMap[i].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=C("body",t,e,n),i=C("cond",t,e,n),o=C("args",t,e,n),a=await n.functionMap[i].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap),s=o.map((t=>t.id));let u=await a[0].data();a.forEach((t=>{t.kept||-1!==s.indexOf(t.id)||t.dispose()}));let l=o;for(;u[0];){const t=l;l=await n.functionMap[r].executeFunctionAsync(l,n.tensorArrayMap,n.tensorListMap);const e=l.map((t=>t.id));t.forEach((t=>{t.kept||-1!==s.indexOf(t.id)||-1!==e.indexOf(t.id)||t.dispose()}));const o=await n.functionMap[i].executeFunctionAsync(l,n.tensorArrayMap,n.tensorListMap);u=await o[0].data(),o.forEach((t=>{t.kept||-1!==s.indexOf(t.id)||-1!==e.indexOf(t.id)||t.dispose()}))}return l}case"LoopCond":return[L(C("pred",t,e,n))];case"Switch":{const r=C("pred",t,e,n);let i=C("data",t,e,n);return i.kept||(i=L(i)),(await r.data())[0]?[void 0,i]:[i,void 0]}case"Merge":{const r=t.inputNames.find((t=>void 0!==T(t,e,n)));if(r){return[L(T(r,e,n))]}return}case"Enter":{const r=C("frameName",t,e,n),i=C("tensor",t,e,n);return n.enterFrame(r),[L(i)]}case"Exit":{const r=C("tensor",t,e,n);return n.exitFrame(),[L(r)]}case"NextIteration":{const r=C("tensor",t,e,n);return n.nextIteration(),[L(r)]}case"TensorArrayV3":{const r=C("size",t,e,n),i=C("dtype",t,e,n),o=C("elementShape",t,e,n),a=C("dynamicSize",t,e,n),s=C("clearAfterRead",t,e,n),u=C("identicalElementShapes",t,e,n),l=C("name",t,e,n),c=new wt(l,i,r,o,u,a,s);return n.addTensorArray(c),[c.idTensor,(0,_.scalar)(1)]}case"TensorArrayWriteV3":{const r=C("tensorArrayId",t,e,n),i=C("index",t,e,n),o=C("tensor",t,e,n),a=n.getTensorArray(r.id);return a.write(i,o),[a.idTensor]}case"TensorArrayReadV3":{const r=C("tensorArrayId",t,e,n),i=C("index",t,e,n);return[n.getTensorArray(r.id).read(i)]}case"TensorArrayGatherV3":{const r=C("tensorArrayId",t,e,n),i=C("indices",t,e,n),o=C("dtype",t,e,n);return[n.getTensorArray(r.id).gather(i,o)]}case"TensorArrayScatterV3":{const r=C("tensorArrayId",t,e,n),i=C("indices",t,e,n),o=C("tensor",t,e,n),a=n.getTensorArray(r.id);return a.scatter(i,o),[a.idTensor]}case"TensorArrayConcatV3":{const r=C("tensorArrayId",t,e,n),i=n.getTensorArray(r.id),o=C("dtype",t,e,n);return[i.concat(o)]}case"TensorArraySplitV3":{const r=C("tensorArrayId",t,e,n),i=C("tensor",t,e,n),o=C("lengths",t,e,n),a=n.getTensorArray(r.id);return a.split(o,i),[a.idTensor]}case"TensorArraySizeV3":{const r=C("tensorArrayId",t,e,n),i=n.getTensorArray(r.id);return[(0,_.scalar)(i.size(),"int32")]}case"TensorArrayCloseV3":{const r=C("tensorArrayId",t,e,n),i=n.getTensorArray(r.id);return i.clearAndClose(),[i.idTensor]}case"TensorListSetItem":{const r=C("tensorListId",t,e,n),i=C("index",t,e,n),o=C("tensor",t,e,n),a=n.getTensorList(r.id);return a.setItem(i,o),[a.idTensor]}case"TensorListGetItem":{const r=C("tensorListId",t,e,n),i=C("index",t,e,n),o=C("elementShape",t,e,n),a=C("elementDType",t,e,n);return[n.getTensorList(r.id).getItem(i,o,a)]}case"TensorListScatterV2":case"TensorListScatter":{const r=C("indices",t,e,n),i=function(t,e,n,r){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const i=Math.max(...e);if(null!=r&&-1!==r&&i>=r)throw new Error(`Max index must be < array size (${i}  vs. ${r})`);const o=new _t([],n,t.dtype,r),a=(0,_.unstack)(t,0);return e.forEach(((t,e)=>{o.setItem(t,a[e])})),o}(C("tensor",t,e,n),r,C("elementShape",t,e,n),C("numElements",t,e,n));return n.addTensorList(i),[i.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=C("elementShape",t,e,n),i=C("elementDType",t,e,n);let o;o="TensorListReserve"===t.op?"numElements":"maxNumElements";const a=C(o,t,e,n),s=function(t,e,n,r){return new _t([],t,e,r)}(r,i,0,"TensorListReserve"===t.op?-1:a);return n.addTensorList(s),[s.idTensor]}case"TensorListGather":{const r=C("tensorListId",t,e,n),i=C("indices",t,e,n),o=C("elementShape",t,e,n),a=C("elementDType",t,e,n);return[n.getTensorList(r.id).gather(i,a,o)]}case"TensorListStack":{const r=C("tensorListId",t,e,n),i=C("elementShape",t,e,n),o=C("elementDType",t,e,n),a=C("numElements",t,e,n);return[n.getTensorList(r.id).stack(i,o,a)]}case"TensorListFromTensor":{const r=function(t,e,n){const r=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);vt(t.shape.slice(1),e,"TensorList shape mismatch: ");const i=(0,_.unstack)(t);return new _t(i,e,r)}(C("tensor",t,e,n),C("elementShape",t,e,n),C("elementDType",t,e,n));return n.addTensorList(r),[r.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=C("tensorListId",t,e,n),i=n.getTensorList(r.id),o=C("dtype",t,e,n),a=C("elementShape",t,e,n);return[i.concat(o,a)]}case"TensorListPushBack":{const r=C("tensorListId",t,e,n),i=C("tensor",t,e,n),o=n.getTensorList(r.id);return o.pushBack(i),[o.idTensor]}case"TensorListPopBack":{const r=C("tensorListId",t,e,n),i=C("elementShape",t,e,n),o=C("elementDType",t,e,n);return[n.getTensorList(r.id).popBack(i,o)]}case"TensorListSplit":{const r=C("tensor",t,e,n),i=C("elementShape",t,e,n),o=function(t,e,n){let r=0;const i=e.map((t=>(r+=t,r)));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${r}, and tensor's shape is: ${t.shape}`);const o=xt(t.shape.slice(1),n),a=0===r?0:t.size/r,s=(0,_.tidy)((()=>{const n=[];t=(0,_.reshape)(t,[1,r,a]);for(let r=0;r<e.length;++r){const s=[0,0===r?0:i[r-1],0],u=[1,e[r],a];n[r]=(0,_.reshape)((0,_.slice)(t,s,u),o)}return t.dispose(),n})),u=new _t([],n,t.dtype,e.length);for(let t=0;t<s.length;t++)u.setItem(t,s[t]);return u}(r,C("lengths",t,e,n),i);return n.addTensorList(o),[o.idTensor]}case"TensorListLength":{const r=C("tensorListId",t,e,n),i=n.getTensorList(r.id);return[(0,_.scalar)(i.size(),"int32")]}case"TensorListResize":{const r=C("tensorListId",t,e,n),i=C("size",t,e,n),o=n.getTensorList(r.id).resize(i);return n.addTensorList(o),[o.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Et(t,e,n){const[r,i]=C("fusedOps",t,e,n),o="biasadd"===r,a=!o,s="prelu"===i,u="fusedbatchnorm"===r,l=C("numArgs",t,e,n);if(o){if(s&&2!==l)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&o&&1!==l)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(u)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const c=C("strides",t,e,n),h=O(t,e,n),d=C("dataFormat",t,e,n).toUpperCase(),f=C("dilations",t,e,n);let[p,m]=C("args",t,e,n);a&&(m=p,p=void 0);return{stride:c,pad:h,dataFormat:d,dilations:f,biasArg:p,preluArg:m,activationFunc:i,leakyreluAlpha:C("leakyreluAlpha",t,e,n)}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function At(t,e,n){return{boxes:C("boxes",t,e,n),scores:C("scores",t,e,n),maxOutputSize:C("maxOutputSize",t,e,n),iouThreshold:C("iouThreshold",t,e,n),scoreThreshold:C("scoreThreshold",t,e,n),softNmsSigma:C("softNmsSigma",t,e,n)}}var Mt=n(45702);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Ct{get id(){return this.handle.id}constructor(t,e){this.keyDType=t,this.valueDType=e,this.handle=(0,_.scalar)(0),this.tensorMap=new Map,(0,_.keep)(this.handle)}clearAndClose(){this.tensorMap.forEach((t=>t.dispose())),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Mt.d(this.size(),"int32")}async import(t,e){this.checkKeyAndValueTensor(t,e);const n=await t.data();return this.tensorMap.forEach((t=>t.dispose())),this.tensorMap.clear(),(0,_.tidy)((()=>{const t=(0,_.unstack)(e),r=n.length,i=t.length;_.util.assert(r===i,(()=>`The number of elements doesn't match, keys has ${r} elements, the values has ${i} elements.`));for(let e=0;e<r;e++){const r=n[e],i=t[e];(0,_.keep)(i),this.tensorMap.set(r,i)}return this.handle}))}async find(t,e){this.checkKeyAndValueTensor(t,e);const n=await t.data();return(0,_.tidy)((()=>{const t=[];for(let r=0;r<n.length;r++){const i=n[r],o=this.findWithDefault(i,e);t.push(o)}return(0,_.stack)(t)}))}findWithDefault(t,e){const n=this.tensorMap.get(t);return null!=n?n:e}checkKeyAndValueTensor(t,e){if(t.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${t.dtype}`);if(e.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${e.dtype}`)}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Tt(t,e,n,r,i=_.tidy){const o=((t,e,n)=>{switch(t.category){case"arithmetic":return i((()=>((t,e,n,r=gt)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(C("a",t,e,n),C("b",t,e,n))];case"AddN":return[r.addN(C("tensors",t,e,n))];case"FloorMod":case"Mod":return[r.mod(C("a",t,e,n),C("b",t,e,n))];case"Mul":return[r.mul(C("a",t,e,n),C("b",t,e,n))];case"RealDiv":case"Div":return[r.div(C("a",t,e,n),C("b",t,e,n))];case"DivNoNan":return[r.divNoNan(C("a",t,e,n),C("b",t,e,n))];case"FloorDiv":return[r.floorDiv(C("a",t,e,n),C("b",t,e,n))];case"Sub":return[r.sub(C("a",t,e,n),C("b",t,e,n))];case"Minimum":return[r.minimum(C("a",t,e,n),C("b",t,e,n))];case"Maximum":return[r.maximum(C("a",t,e,n),C("b",t,e,n))];case"Pow":return[r.pow(C("a",t,e,n),C("b",t,e,n))];case"SquaredDifference":return[r.squaredDifference(C("a",t,e,n),C("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(t,e,n)));case"basic_math":return i((()=>((t,e,n,r=gt)=>{switch(t.op){case"Abs":case"ComplexAbs":return[r.abs(C("x",t,e,n))];case"Acos":return[r.acos(C("x",t,e,n))];case"Acosh":return[r.acosh(C("x",t,e,n))];case"Asin":return[r.asin(C("x",t,e,n))];case"Asinh":return[r.asinh(C("x",t,e,n))];case"Atan":return[r.atan(C("x",t,e,n))];case"Atan2":return[r.atan2(C("x",t,e,n),C("y",t,e,n))];case"Atanh":return[r.atanh(C("x",t,e,n))];case"Ceil":return[r.ceil(C("x",t,e,n))];case"Complex":return[r.complex(C("real",t,e,n),C("imag",t,e,n))];case"Cos":return[r.cos(C("x",t,e,n))];case"Cosh":return[r.cosh(C("x",t,e,n))];case"Elu":return[r.elu(C("x",t,e,n))];case"Erf":return[r.erf(C("x",t,e,n))];case"Exp":return[r.exp(C("x",t,e,n))];case"Expm1":return[r.expm1(C("x",t,e,n))];case"Floor":return[r.floor(C("x",t,e,n))];case"Log":return[r.log(C("x",t,e,n))];case"Log1p":return[r.log1p(C("x",t,e,n))];case"Imag":return[r.imag(C("x",t,e,n))];case"Neg":return[r.neg(C("x",t,e,n))];case"Reciprocal":return[r.reciprocal(C("x",t,e,n))];case"Real":return[r.real(C("x",t,e,n))];case"Relu":return[r.relu(C("x",t,e,n))];case"Round":return[r.round(C("x",t,e,n))];case"Selu":return[r.selu(C("x",t,e,n))];case"Sigmoid":return[r.sigmoid(C("x",t,e,n))];case"Sin":return[r.sin(C("x",t,e,n))];case"Sign":return[r.sign(C("x",t,e,n))];case"Sinh":return[r.sinh(C("x",t,e,n))];case"Softplus":return[r.softplus(C("x",t,e,n))];case"Sqrt":return[r.sqrt(C("x",t,e,n))];case"Square":return[r.square(C("x",t,e,n))];case"Tanh":return[r.tanh(C("x",t,e,n))];case"Tan":return[r.tan(C("x",t,e,n))];case"ClipByValue":return[r.clipByValue(C("x",t,e,n),C("clipValueMin",t,e,n),C("clipValueMax",t,e,n))];case"Relu6":return[r.relu6(C("x",t,e,n))];case"Rsqrt":return[r.rsqrt(T(t.inputNames[0],e,n))];case"LeakyRelu":return[r.leakyRelu(C("x",t,e,n),C("alpha",t,e,n))];case"Prelu":return[r.prelu(C("x",t,e,n),C("alpha",t,e,n))];case"IsNan":return[r.isNaN(T(t.inputNames[0],e,n))];case"IsInf":return[r.isInf(T(t.inputNames[0],e,n))];case"IsFinite":return[r.isFinite(T(t.inputNames[0],e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(t,e,n)));case"control":return St(t,e,n);case"convolution":return i((()=>((t,e,n,r=gt)=>{switch(t.op){case"Conv1D":{const i=C("stride",t,e,n),o=C("pad",t,e,n),a=C("dataFormat",t,e,n).toUpperCase(),s=C("dilation",t,e,n);return[r.conv1d(C("x",t,e,n),C("filter",t,e,n),i,o,a,s)]}case"Conv2D":{const i=C("strides",t,e,n),o=O(t,e,n),a=C("dataFormat",t,e,n).toUpperCase(),s=C("dilations",t,e,n);return[r.conv2d(C("x",t,e,n),C("filter",t,e,n),[i[1],i[2]],o,a,[s[1],s[2]])]}case"_FusedConv2D":{const{stride:i,pad:o,dataFormat:a,dilations:s,biasArg:u,preluArg:l,activationFunc:c,leakyreluAlpha:h}=Et(t,e,n);return[r.fused.conv2d({x:C("x",t,e,n),filter:C("filter",t,e,n),strides:[i[1],i[2]],pad:o,dataFormat:a,dilations:[s[1],s[2]],bias:u,activation:c,preluActivationWeights:l,leakyreluAlpha:h})]}case"FusedDepthwiseConv2dNative":{const{stride:i,pad:o,dataFormat:a,dilations:s,biasArg:u,preluArg:l,activationFunc:c,leakyreluAlpha:h}=Et(t,e,n);return[r.fused.depthwiseConv2d({x:C("x",t,e,n),filter:C("filter",t,e,n),strides:[i[1],i[2]],pad:o,dataFormat:a,dilations:[s[1],s[2]],bias:u,activation:c,preluActivationWeights:l,leakyreluAlpha:h})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const i=C("outputShape",t,e,n),o=C("strides",t,e,n),a=O(t,e,n);return[r.conv2dTranspose(C("x",t,e,n),C("filter",t,e,n),i,[o[1],o[2]],a)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const i=C("strides",t,e,n),o=O(t,e,n),a=C("dilations",t,e,n),s=C("dataFormat",t,e,n).toUpperCase();return[r.depthwiseConv2d(C("input",t,e,n),C("filter",t,e,n),[i[1],i[2]],o,s,[a[1],a[2]])]}case"Conv3D":{const i=C("strides",t,e,n),o=C("pad",t,e,n),a=C("dataFormat",t,e,n).toUpperCase(),s=C("dilations",t,e,n);return[r.conv3d(C("x",t,e,n),C("filter",t,e,n),[i[1],i[2],i[3]],o,a,[s[1],s[2],s[3]])]}case"AvgPool":{const i=C("strides",t,e,n),o=C("pad",t,e,n),a=C("kernelSize",t,e,n);return[r.avgPool(C("x",t,e,n),[a[1],a[2]],[i[1],i[2]],o)]}case"MaxPool":{const i=C("strides",t,e,n),o=C("pad",t,e,n),a=C("kernelSize",t,e,n);return[r.maxPool(C("x",t,e,n),[a[1],a[2]],[i[1],i[2]],o)]}case"MaxPoolWithArgmax":{const i=C("strides",t,e,n),o=C("pad",t,e,n),a=C("kernelSize",t,e,n),s=C("includeBatchInIndex",t,e,n),{result:u,indexes:l}=r.maxPoolWithArgmax(C("x",t,e,n),[a[1],a[2]],[i[1],i[2]],o,s);return[u,l]}case"AvgPool3D":{const i=C("strides",t,e,n),o=C("pad",t,e,n),a=C("kernelSize",t,e,n);return[r.avgPool3d(C("x",t,e,n),[a[1],a[2],a[3]],[i[1],i[2],i[3]],o)]}case"MaxPool3D":{const i=C("strides",t,e,n),o=C("pad",t,e,n),a=C("kernelSize",t,e,n);return[r.maxPool3d(C("x",t,e,n),[a[1],a[2],a[3]],[i[1],i[2],i[3]],o)]}case"Dilation2D":{const i=C("strides",t,e,n),o=C("pad",t,e,n),a=C("dilations",t,e,n),s=i[1],u=i[2],l=a[1],c=a[2];return[r.dilation2d(C("x",t,e,n),C("filter",t,e,n),[s,u],o,[l,c],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}})(t,e,n)));case"creation":return i((()=>((t,e,n,r=gt)=>{switch(t.op){case"Fill":{const i=C("shape",t,e,n),o=C("dtype",t,e,n),a=C("value",t,e,n);return[r.fill(i,a,o)]}case"LinSpace":{const i=C("start",t,e,n),o=C("stop",t,e,n),a=C("num",t,e,n);return[r.linspace(i,o,a)]}case"Multinomial":{const i=C("logits",t,e,n),o=C("numSamples",t,e,n),a=C("seed",t,e,n);return[r.multinomial(i,o,a)]}case"OneHot":{const i=C("indices",t,e,n),o=C("depth",t,e,n),a=C("onValue",t,e,n),s=C("offValue",t,e,n),u=C("dtype",t,e,n);return[r.oneHot(i,o,a,s,u)]}case"Ones":return[r.ones(C("shape",t,e,n),C("dtype",t,e,n))];case"OnesLike":return[r.onesLike(C("x",t,e,n))];case"RandomStandardNormal":return[r.randomStandardNormal(C("shape",t,e,n),C("dtype",t,e,n),C("seed",t,e,n))];case"RandomUniform":return[r.randomUniform(C("shape",t,e,n),C("minval",t,e,n),C("maxval",t,e,n),C("dtype",t,e,n))];case"RandomUniformInt":return[r.randomUniformInt(C("shape",t,e,n),C("minval",t,e,n),C("maxval",t,e,n),C("seed",t,e,n))];case"Range":{const i=C("start",t,e,n),o=C("stop",t,e,n),a=C("step",t,e,n);return[r.range(i,o,a,C("dtype",t,e,n))]}case"TruncatedNormal":{const i=C("shape",t,e,n),o=C("mean",t,e,n),a=C("stdDev",t,e,n),s=C("seed",t,e,n);return[r.truncatedNormal(i,o,a,C("dtype",t,e,n),s)]}case"Zeros":return[r.zeros(C("shape",t,e,n),C("dtype",t,e,n))];case"ZerosLike":return[r.zerosLike(C("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(t,e,n)));case"dynamic":return(async(t,e,n,r,i=gt)=>{switch(t.op){case"NonMaxSuppressionV5":{const{boxes:r,scores:o,maxOutputSize:a,iouThreshold:s,scoreThreshold:u,softNmsSigma:l}=At(t,e,n),c=await i.image.nonMaxSuppressionWithScoreAsync(r,o,a,s,u,l);return[c.selectedIndices,c.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:r,scores:o,maxOutputSize:a,iouThreshold:s,scoreThreshold:u}=At(t,e,n),l=C("padToMaxOutputSize",t,e,n),c=await i.image.nonMaxSuppressionPaddedAsync(r,o,a,s,u,l);return[c.selectedIndices,c.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:r,scores:o,maxOutputSize:a,iouThreshold:s,scoreThreshold:u}=At(t,e,n);return[await i.image.nonMaxSuppressionAsync(r,o,a,s,u)]}case"Where":{const r=i.cast(C("condition",t,e,n),"bool"),o=[await i.whereAsync(r)];return r.dispose(),o}case"ListDiff":return i.setdiff1dAsync(C("x",t,e,n),C("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}})(t,e,n);case"evaluation":return i((()=>((t,e,n,r=gt)=>{switch(t.op){case"LowerBound":{const i=C("sortedSequence",t,e,n),o=C("values",t,e,n);return[r.lowerBound(i,o)]}case"TopKV2":{const i=C("x",t,e,n),o=C("k",t,e,n),a=C("sorted",t,e,n),s=r.topk(i,o,a);return[s.values,s.indices]}case"UpperBound":{const i=C("sortedSequence",t,e,n),o=C("values",t,e,n);return[r.upperBound(i,o)]}case"Unique":{const i=C("x",t,e,n),o=r.unique(i);return[o.values,o.indices]}case"UniqueV2":{const i=C("x",t,e,n),o=C("axis",t,e,n),a=r.unique(i,o);return[a.values,a.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}})(t,e,n)));case"image":return i((()=>((t,e,n,r=gt)=>{switch(t.op){case"ResizeBilinear":{const i=C("images",t,e,n),o=C("size",t,e,n),a=C("alignCorners",t,e,n),s=C("halfPixelCenters",t,e,n);return[r.image.resizeBilinear(i,[o[0],o[1]],a,s)]}case"ResizeNearestNeighbor":{const i=C("images",t,e,n),o=C("size",t,e,n),a=C("alignCorners",t,e,n),s=C("halfPixelCenters",t,e,n);return[r.image.resizeNearestNeighbor(i,[o[0],o[1]],a,s)]}case"CropAndResize":{const i=C("image",t,e,n),o=C("boxes",t,e,n),a=C("boxInd",t,e,n),s=C("cropSize",t,e,n),u=C("method",t,e,n),l=C("extrapolationValue",t,e,n);return[r.image.cropAndResize(i,o,a,s,u,l)]}case"ImageProjectiveTransformV3":{const i=C("images",t,e,n),o=C("transforms",t,e,n),a=C("outputShape",t,e,n),s=C("fillValue",t,e,n),u=C("interpolation",t,e,n),l=C("fillMode",t,e,n);return[r.image.transform(i,o,u.toLowerCase(),l.toLowerCase(),s,a)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}})(t,e,n)));case"graph":return i((()=>((t,e,n,r=gt)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":const i=C("default",t,e,n);return[T(t.name,e,n)||i];case"Placeholder":return[T(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":case"Snapshot":return[L(C("x",t,e,n))];case"IdentityN":return C("x",t,e,n).map((t=>L(t)));case"Shape":return[r.tensor1d(C("x",t,e,n).shape,"int32")];case"ShapeN":return C("x",t,e,n).map((t=>r.tensor1d(t.shape)));case"Size":return[r.scalar(C("x",t,e,n).size,"int32")];case"Rank":return[r.scalar(C("x",t,e,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const o=C("x",t,e,n),a=C("data",t,e,n),s=C("message",t,e,n),u=C("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(s);for(let t=0;t<a.length;t++)console.log(Array.prototype.slice.call(a[t].dataSync()).slice(0,u));return[o];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(t,e,n)));case"logical":return i((()=>((t,e,n,r=gt)=>{switch(t.op){case"Equal":return[r.equal(C("a",t,e,n),C("b",t,e,n))];case"NotEqual":return[r.notEqual(C("a",t,e,n),C("b",t,e,n))];case"Greater":return[r.greater(C("a",t,e,n),C("b",t,e,n))];case"GreaterEqual":return[r.greaterEqual(C("a",t,e,n),C("b",t,e,n))];case"Less":return[r.less(C("a",t,e,n),C("b",t,e,n))];case"LessEqual":return[r.lessEqual(C("a",t,e,n),C("b",t,e,n))];case"LogicalAnd":return[r.logicalAnd(C("a",t,e,n),C("b",t,e,n))];case"LogicalNot":return[r.logicalNot(C("a",t,e,n))];case"LogicalOr":return[r.logicalOr(C("a",t,e,n),C("b",t,e,n))];case"Select":case"SelectV2":return[r.where(C("condition",t,e,n),C("a",t,e,n),C("b",t,e,n))];case"BitwiseAnd":return[r.bitwiseAnd(C("a",t,e,n),C("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(t,e,n)));case"matrices":return i((()=>((t,e,n,r=gt)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(C("a",t,e,n),C("b",t,e,n),C("transposeA",t,e,n),C("transposeB",t,e,n))];case"Einsum":return[r.einsum(C("equation",t,e,n),...C("tensors",t,e,n))];case"Transpose":return[r.transpose(C("x",t,e,n),C("perm",t,e,n))];case"_FusedMatMul":const[i,o]=C("fusedOps",t,e,n),a="biasadd"===i,s="prelu"===o,u=C("numArgs",t,e,n),l=C("leakyreluAlpha",t,e,n);if(a){if(s&&2!==u)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&1!==u)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[c,h]=C("args",t,e,n);return[r.fused.matMul({a:C("a",t,e,n),b:C("b",t,e,n),transposeA:C("transposeA",t,e,n),transposeB:C("transposeB",t,e,n),bias:c,activation:o,preluActivationWeights:h,leakyreluAlpha:l})];case"MatrixBandPart":return[r.linalg.bandPart(C("a",t,e,n),C("numLower",t,e,n),C("numUpper",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(t,e,n)));case"normalization":return i((()=>((t,e,n,r=gt)=>{switch(t.op){case"EuclideanNorm":return[r.euclideanNorm(C("x",t,e,n),C("axis",t,e,n),C("keepDims",t,e,n))];case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[r.batchNorm(C("x",t,e,n),C("mean",t,e,n),C("variance",t,e,n),C("offset",t,e,n),C("scale",t,e,n),C("epsilon",t,e,n))];case"LRN":return[r.localResponseNormalization(C("x",t,e,n),C("radius",t,e,n),C("bias",t,e,n),C("alpha",t,e,n),C("beta",t,e,n))];case"Softmax":return[r.softmax(C("x",t,e,n))];case"LogSoftmax":return[r.logSoftmax(C("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(t,e,n)));case"ragged":return i((()=>((t,e,n,r=gt)=>{switch(t.op){case"RaggedGather":{const{outputNestedSplits:i,outputDenseValues:o}=r.raggedGather(C("paramsNestedSplits",t,e,n),C("paramsDenseValues",t,e,n),C("indices",t,e,n),C("outputRaggedRank",t,e,n));return i.concat(o)}case"RaggedRange":{const{rtNestedSplits:i,rtDenseValues:o}=r.raggedRange(C("starts",t,e,n),C("limits",t,e,n),C("splits",t,e,n));return[i,o]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(C("shape",t,e,n),C("values",t,e,n),C("defaultValue",t,e,n),C("rowPartitionTensors",t,e,n),C("rowPartitionTypes",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(t,e,n)));case"reduction":return i((()=>((t,e,n,r=gt)=>{switch(t.op){case"Max":{const i=C("axis",t,e,n),o=C("keepDims",t,e,n);return[r.max(C("x",t,e,n),i,o)]}case"Mean":{const i=C("axis",t,e,n),o=C("keepDims",t,e,n);return[r.mean(C("x",t,e,n),i,o)]}case"Min":{const i=C("axis",t,e,n),o=C("keepDims",t,e,n);return[r.min(C("x",t,e,n),i,o)]}case"Sum":{const i=C("axis",t,e,n),o=C("keepDims",t,e,n);return[r.sum(C("x",t,e,n),i,o)]}case"All":{const i=C("axis",t,e,n),o=C("keepDims",t,e,n);return[r.all(C("x",t,e,n),i,o)]}case"Any":{const i=C("axis",t,e,n),o=C("keepDims",t,e,n);return[r.any(C("x",t,e,n),i,o)]}case"ArgMax":{const i=C("axis",t,e,n);return[r.argMax(C("x",t,e,n),i)]}case"ArgMin":{const i=C("axis",t,e,n);return[r.argMin(C("x",t,e,n),i)]}case"Prod":{const i=C("axis",t,e,n),o=C("keepDims",t,e,n);return[r.prod(C("x",t,e,n),i,o)]}case"Cumprod":{const i=C("axis",t,e,n),o=C("exclusive",t,e,n),a=C("reverse",t,e,n);return[r.cumprod(C("x",t,e,n),i,o,a)]}case"Cumsum":{const i=C("axis",t,e,n),o=C("exclusive",t,e,n),a=C("reverse",t,e,n);return[r.cumsum(C("x",t,e,n),i,o,a)]}case"Bincount":const i=C("x",t,e,n),o=C("weights",t,e,n),a=C("size",t,e,n);return[r.bincount(i,o,a)];case"DenseBincount":{const i=C("x",t,e,n),o=C("weights",t,e,n),a=C("size",t,e,n),s=C("binaryOutput",t,e,n);return[r.denseBincount(i,o,a,s)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}})(t,e,n)));case"slice_join":return i((()=>((t,e,n,r=gt)=>{switch(t.op){case"ConcatV2":case"Concat":{const i=C("n",t,e,n),o=C("axis",t,e,n);let a=C("tensors",t,e,n);return a=a.slice(0,i),[r.concat(a,o)]}case"Gather":{const i=C("x",t,e,n),o=C("indices",t,e,n);return[r.gather(i,r.cast(o,"int32"),0)]}case"GatherV2":{const i=C("axis",t,e,n),o=C("batchDims",t,e,n),a=C("x",t,e,n),s=C("indices",t,e,n);return[r.gather(a,r.cast(s,"int32"),i,o)]}case"Reverse":{const i=C("dims",t,e,n),o=[];for(let t=0;t<i.length;t++)i[t]&&o.push(t);const a=C("x",t,e,n);return[r.reverse(a,o)]}case"ReverseV2":{const i=C("axis",t,e,n),o=C("x",t,e,n);return[r.reverse(o,i)]}case"Slice":{const i=C("begin",t,e,n),o=C("size",t,e,n);return[r.slice(C("x",t,e,n),i,o)]}case"StridedSlice":{const i=C("begin",t,e,n),o=C("end",t,e,n),a=C("strides",t,e,n),s=C("beginMask",t,e,n),u=C("endMask",t,e,n),l=C("ellipsisMask",t,e,n),c=C("newAxisMask",t,e,n),h=C("shrinkAxisMask",t,e,n),d=C("x",t,e,n);return[r.stridedSlice(d,i,o,a,s,u,l,c,h)]}case"Pack":return(0,_.tidy)((()=>{const i=C("axis",t,e,n),o=C("tensors",t,e,n),a=o[0].shape,s=r.squeeze(o[0]).shape,u=o.map((t=>{const e=_.util.arraysEqual(t.shape,a);if(!e&&!_.util.arraysEqual(r.squeeze(t).shape,s))throw new Error("the input tensors shape does not match");return e?t:r.reshape(t,a)}));return[r.stack(u,i)]}));case"Unpack":{const i=C("axis",t,e,n),o=C("tensor",t,e,n);return r.unstack(o,i)}case"Tile":{const i=C("reps",t,e,n);return[r.tile(C("x",t,e,n),i)]}case"Split":case"SplitV":{const i=C("axis",t,e,n),o=C("numOrSizeSplits",t,e,n),a=C("x",t,e,n);return r.split(a,o,i)}case"ScatterNd":{const i=C("indices",t,e,n),o=C("values",t,e,n),a=C("shape",t,e,n);return[r.scatterND(i,o,a)]}case"GatherNd":{const i=C("x",t,e,n),o=C("indices",t,e,n);return[r.gatherND(i,o)]}case"SparseToDense":{const i=C("sparseIndices",t,e,n),o=C("outputShape",t,e,n),a=C("sparseValues",t,e,n),s=C("defaultValue",t,e,n);return[r.sparseToDense(i,a,o,a.dtype===s.dtype?s:r.cast(s,a.dtype))]}case"TensorScatterUpdate":{const i=C("indices",t,e,n),o=C("values",t,e,n),a=C("tensor",t,e,n);return[r.tensorScatterUpdate(a,i,o)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}})(t,e,n)));case"sparse":return i((()=>((t,e,n,r=gt)=>{switch(t.op){case"SparseFillEmptyRows":{const{outputIndices:i,outputValues:o,emptyRowIndicator:a,reverseIndexMap:s}=r.sparse.sparseFillEmptyRows(C("indices",t,e,n),C("values",t,e,n),C("denseShape",t,e,n),C("defaultValue",t,e,n));return[i,o,a,s]}case"SparseReshape":{const{outputIndices:i,outputShape:o}=r.sparse.sparseReshape(C("inputIndices",t,e,n),C("inputShape",t,e,n),C("newShape",t,e,n));return[i,o]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(C("data",t,e,n),C("indices",t,e,n),C("segmentIds",t,e,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(C("data",t,e,n),C("indices",t,e,n),C("segmentIds",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(t,e,n)));case"spectral":return i((()=>((t,e,n,r=gt)=>{switch(t.op){case"FFT":return[r.fft(C("x",t,e,n))];case"IFFT":return[r.ifft(C("x",t,e,n))];case"RFFT":return[r.rfft(C("x",t,e,n))];case"IRFFT":return[r.irfft(C("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(t,e,n)));case"string":return i((()=>((t,e,n,r=gt)=>{switch(t.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(C("input",t,e,n),C("pattern",t,e,n),C("rewrite",t,e,n),C("replaceGlobal",t,e,n))];case"StringNGrams":{const{nGrams:i,nGramsSplits:o}=r.string.stringNGrams(C("data",t,e,n),C("dataSplits",t,e,n),C("separator",t,e,n),C("nGramWidths",t,e,n),C("leftPad",t,e,n),C("rightPad",t,e,n),C("padWidth",t,e,n),C("preserveShortSequences",t,e,n));return[i,o]}case"StringSplit":{const{indices:i,values:o,shape:a}=r.string.stringSplit(C("input",t,e,n),C("delimiter",t,e,n),C("skipEmpty",t,e,n));return[i,o,a]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(C("input",t,e,n),C("numBuckets",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(t,e,n)));case"transformation":return i((()=>((t,e,n,r=gt)=>{switch(t.op){case"Cast":return[r.cast(C("x",t,e,n),C("dtype",t,e,n))];case"ExpandDims":{const i=C("axis",t,e,n);return[r.expandDims(C("x",t,e,n),i)]}case"Squeeze":{const i=C("axis",t,e,n);return[r.squeeze(C("x",t,e,n),i)]}case"Reshape":return[r.reshape(C("x",t,e,n),C("shape",t,e,n))];case"EnsureShape":return[r.ensureShape(C("x",t,e,n),C("shape",t,e,n))];case"MirrorPad":return[r.mirrorPad(C("x",t,e,n),C("padding",t,e,n),C("mode",t,e,n))];case"PadV2":case"Pad":return[r.pad(C("x",t,e,n),C("padding",t,e,n),C("constantValue",t,e,n))];case"SpaceToBatchND":{const i=C("blockShape",t,e,n),o=C("paddings",t,e,n);return[r.spaceToBatchND(C("x",t,e,n),i,o)]}case"BatchToSpaceND":{const i=C("blockShape",t,e,n),o=C("crops",t,e,n);return[r.batchToSpaceND(C("x",t,e,n),i,o)]}case"DepthToSpace":{const i=C("blockSize",t,e,n),o=C("dataFormat",t,e,n).toUpperCase();return[r.depthToSpace(C("x",t,e,n),i,o)]}case"BroadcastTo":return[r.broadcastTo(C("x",t,e,n),C("shape",t,e,n))];case"BroadcastArgs":return[r.broadcastArgs(C("s0",t,e,n),C("s1",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(t,e,n)));case"hash_table":return(async(t,e,n,r)=>{switch(t.op){case"HashTable":case"HashTableV2":{const i=r.getHashTableHandleByName(t.name);if(null!=i)return[i];{const i=C("keyDType",t,e,n),o=C("valueDType",t,e,n),a=new Ct(i,o);return r.addHashTable(t.name,a),[a.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const i=C("tableHandle",t,e,n,r),o=C("keys",t,e,n),a=C("values",t,e,n),s=r.getHashTableById(i.id);return[await s.import(o,a)]}case"LookupTableFind":case"LookupTableFindV2":{const i=C("tableHandle",t,e,n,r),o=C("keys",t,e,n),a=C("defaultValue",t,e,n),s=r.getHashTableById(i.id);return[await s.find(o,a)]}case"LookupTableSize":case"LookupTableSizeV2":{const i=C("tableHandle",t,e,n,r);return[r.getHashTableById(i.id).tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}})(t,e,n,r);case"custom":const o=M(t.op);if(o&&o.customExecutor)return o.customExecutor(new mt(t,e,n));throw TypeError(`Custom op ${t.op} is not registered.`);default:throw TypeError(`Unknown op '${t.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return _.util.isPromise(o)?o.then((t=>[].concat(t))):[].concat(o)}class kt{constructor(t={},e={},n={},r={},i){this.weightMap=t,this.tensorArrayMap=e,this.tensorListMap=n,this.functionMap=r,this.parseNodeNameCache=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(t,e){return{id:t,frameName:e,iterationId:0}}set currentContext(t){this.contexts!==t&&(this.contexts=t,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const t=[];for(let e=0;e<this.contexts.length-1;e++){const n=this.contexts.slice(0,this.contexts.length-e);t.push(this.contextIdforContexts(n))}t.push(""),this._currentContextIds=t}contextIdforContexts(t){return t?t.map((t=>0===t.id&&0===t.iterationId?"":`${t.frameName}-${t.iterationId}`)).join("/"):""}enterFrame(t){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,t)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}nextIteration(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");{this.contexts=this.contexts.slice(),this.lastId++;const t=Object.assign({},this.contexts[this.contexts.length-1]);t.iterationId+=1,t.id=this.lastId,this.contexts.splice(-1,1,t),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}}getWeight(t){return this.weightMap[t]}addTensorArray(t){this.tensorArrayMap[t.id]=t}getTensorArray(t){return this.tensorArrayMap[t]}addTensorList(t){this.tensorListMap[t.id]=t}getTensorList(t){return this.tensorListMap[t]}dispose(t){for(const e in this.tensorArrayMap)this.tensorArrayMap[e].clearAndClose(t);for(const e in this.tensorListMap)this.tensorListMap[e].clearAndClose(t)}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function It(t,e,n,r){const i=new Set,o=[];let a=null,s=null;const u=new Set,l=new Set(Object.keys(t).map((t=>P(t)[0])));r=r||[];const c=new Set(r.map((t=>P(t.name)[0]))),h=[...e];for(;h.length>0;){const t=h.pop();(Dt(t)||zt(t)||Ft(t))&&null==a&&(a=t,s=a.children.map((t=>t.name)).filter((t=>i.has(t)))),i.add(t.name),null==n[t.name]&&(l.has(t.name)||c.has(t.name)||(0!==t.inputs.length?t.inputs.forEach((t=>{u.has(t.name)||(u.add(t.name),h.push(t))})):o.push(t.name)))}return{inputs:t,outputs:e,usedNodes:i,missingInputs:o,dynamicNode:a,syncInputs:s}}function Nt(t,e){const{usedNodes:n,inputs:r}=e,i=Object.keys(r).map((t=>P(t)[0])).map((e=>t.nodes[e])),o=t.initNodes||[],a=t=>n.has("string"==typeof t?t:t.name);function s(t){return[...new Map(t.map((t=>[t.name,t]))).values()]}const u=s([...i,...t.weights,...o]).filter(a),l=s([...u,...Object.values(t.nodes)]).filter(a),c=new Map(l.map((t=>[t.name,t]))),h={};for(const t of l){h[t.name]=h[t.name]||0;for(const e of t.children)a(e)||(h[e.name]=Number.POSITIVE_INFINITY),h[e.name]=(h[e.name]||0)+1}const d=Object.entries(h).filter((([,t])=>0===t)).map((([t])=>t)),f=[...d];for(;d.length>0;){const t=d.pop(),e=c.get(t);for(const t of e.children.filter(a))0==--h[t.name]&&(f.push(t.name),d.push(t.name))}const p=function(t,e){const n=new Map(t.map((t=>[t.name,t]))),r=e.map((t=>t.name)),i=new Set(r);for(;r.length>0;){const t=r.pop(),e=n.get(t);for(const t of e.children)n.has(t.name)&&!i.has(t.name)&&(i.add(t.name),r.push(t.name))}const o=t.filter((t=>i.has(t.name)));return o}(f.map((t=>c.get(t))),u);return function(t,e){const n=new Map(t.map(((t,e)=>[t.name,e]))),r=new Set(e.map((t=>t.name))),i=t=>r.has("string"==typeof t?t:t.name),o=new Set(t.map((t=>t.name))),a=t=>o.has("string"==typeof t?t:t.name);for(const e of t){for(const t of e.children.filter(a)){if(!n.has(t.name))throw new Pt(`Child ${t.name} of node ${e.name} is unreachable.`);if(n.get(e.name)>n.get(t.name))throw new Pt(`Node ${e.name} is scheduled to run after its child ${t.name}.`)}if(!i(e))for(const t of e.inputs){if(!n.has(t.name))throw new Pt(`Input ${t.name} of node ${e.name} is unreachable.`);if(n.get(t.name)>n.get(e.name))throw new Pt(`Node ${e.name} is scheduled to run before its input ${t.name}.`)}}}(p,u),p}class Pt extends Error{constructor(t){super(`NodesExecutionOrderError: ${t}`)}}const Ot=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),Lt=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),Rt=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function Dt(t){return Ot.has(t.op)}function zt(t){return Lt.has(t.op)}function Ft(t){return Rt.has(t.op)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Bt{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(t){const e=Object.keys(t).map((e=>t[e].map((t=>t.id))));this._weightIds=[].concat(...e),this._weightMap=t}set resourceManager(t){this._resourceManager=t}get inputs(){return this._inputs.map((t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0})))}get outputs(){return this._outputs.map((t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0})))}get inputNodes(){return this._inputs.map((t=>t.signatureKey||t.name))}get outputNodes(){return this._outputs.map((t=>{const e=t.signatureKey||t.name;return t.defaultOutput?`${e}:${t.defaultOutput}`:e}))}get functions(){return Object.keys(this._functions).reduce(((t,e)=>(t[e]=this._functions[e].signature,t)),{})}constructor(t,e){this.graph=t,this.parent=e,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,null!=t.functions&&Object.keys(t.functions).forEach((e=>{this._functionExecutorMap[e]=new Bt(t.functions[e],this)}))}getCompilationKey(t,e){const n=t.map((t=>t.name)).sort(),r=e.map((t=>t.name)).sort();return n.join(this.SEPARATOR)+"--"+r.join(this.SEPARATOR)}compile(t,e){const n=It(t,e,this.weightMap,this._initNodes),{missingInputs:r,dynamicNode:i,syncInputs:o}=n;if(null!=i)throw new Error(`This execution contains the node '${i.name}', which has the dynamic op '${i.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${o}]`);if(r.length>0){const n=e.map((t=>t.name)),i=Object.keys(t);throw new Error(`Cannot compute the outputs [${n}] from the provided inputs [${i}]. Missing the following inputs: [${r}]`)}const a=Nt(this.graph,n),s=function(t){const e=new Map(t.map(((t,e)=>[t.name,e]))),n=Number.MAX_SAFE_INTEGER,r=t.map(((t,e)=>Dt(t)?n:e)),i=t=>{const n=r[e.get(t.name)];return null==n?-1:n},o=t.map(((t,e)=>t.children.map(i).reduce(((t,e)=>Math.max(t,e)),r[e]))),a=new Map;for(let e=0;e<t.length;++e){const r=o[e];if(r===n)continue;const i=t[e],s=t[r];a.has(s.name)||a.set(s.name,[]),a.get(s.name).push(i)}return a}(a);return{orderedNodes:a,nodeLiveUntilMap:s}}cloneAndKeepTensor(t){if(null==t)return null;const e=t.clone();return(0,_.keep)(e),e}cloneTensorList(t){if(!t)return null;return t.map((t=>this.cloneAndKeepTensor(t)))}cloneTensorMap(t){return Object.fromEntries(Object.entries(t).map((([t,e])=>[t,this.cloneTensorList(e)])))}execute(t,e){this.disposeIntermediateTensors(),t=this.mapInputs(t);const n=Object.keys(t).sort();this.checkInputs(t),this.checkInputShapeAndType(t),e=this.mapOutputs(e),this.checkOutputs(e);const r=n.map((t=>this.graph.nodes[P(t)[0]])),i=e.map((t=>P(t)[0])),o=new Set(i);let a=i.map((t=>this.graph.nodes[t]));0===a.length&&(a=this._outputs);const s=this.getCompilationKey(r,a);let u=this.compiledMap.get(s);null==u&&(u=this.compile(t,a),this.compiledMap.set(s,u));try{this.keepIntermediateTensors=(0,_.env)().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(t){this.keepIntermediateTensors=!1,console.warn(t.message)}const l={},c={};return(0,_.tidy)((()=>{const n=new kt(this.weightMap,l,c,this.functionExecutorMap,this.parseNodeNameCache),r=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(t).forEach((e=>{const[i,o]=P(e,n),a=[];a[o]=t[e],r[i]=a,this.keepIntermediateTensors&&(this.clonedTensorsMap[i]=this.cloneTensorList(a))}));const i=this.getFrozenTensorIds(r),{orderedNodes:a,nodeLiveUntilMap:s}=u;for(const t of a){if(r[t.name])continue;const e=Tt(t,r,n,this._resourceManager);if(_.util.isPromise(e))throw new Error(`The execution of the op '${t.op}' returned a promise. Please use model.executeAsync() instead.`);r[t.name]=e,this.keepIntermediateTensors&&(this.clonedTensorsMap[t.name]=this.cloneTensorList(e)),this.checkTensorForDisposalWithNodeLiveUntilInfo(t,r,n,i,o,s.get(t.name))}return null==this.parent&&n.dispose(i),e.map((t=>T(t,r,n)))}))}getFrozenTensorIds(t){const e=[].concat.apply([],Object.keys(t).map((e=>t[e])).map((t=>t.map((t=>t.id)))));return new Set(e)}checkTensorForDisposal(t,e,n,r,i,o,a){if(!Dt(e)&&!o.has(t)){for(const r of n[t])null!=r&&(a[r.id]=(a[r.id]||0)+e.children.length);for(const t of e.inputs){if(Dt(t))continue;const e=k(t.name,n,r);if(null!=e)for(const t of e){if(!t||t.kept||i.has(t.id))continue;const e=a[t.id];1===e?(t.dispose(),delete a[t.id]):null!=e&&a[t.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(t,e,n,r,i,o){function a(t){return Dt(t)||i.has(t.name)}if(!Dt(t)&&null!=o)for(const t of o){if(a(t))continue;const i=k(t.name,e,n);for(const t of i)!t||t.kept||r.has(t.id)||t.dispose()}}async executeAsync(t,e){return this._executeAsync(t,e)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach((t=>{for(const e of t)e&&!e.isDisposed&&e.dispose()})),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(t,e,n=!1,r={},i={}){this.disposeIntermediateTensors(),n||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),e=this.mapOutputs(e),this.checkOutputs(e));try{this.keepIntermediateTensors=(0,_.env)().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(t){this.keepIntermediateTensors=!1,console.warn(t.message)}const o=new kt(this.weightMap,r,i,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const a=await this.executeWithControlFlow(t,o,e,n),s=e.map((t=>T(t,a,o))),u=s.map((t=>t.id)),l=Object.keys(t).map((e=>t[e].id)),c=new Set([...u,...l,...this.weightIds]);return Object.values(a).forEach((t=>{t.forEach((t=>{!t||t.isDisposed||c.has(t.id)||t.dispose()}))})),null==this.parent&&o.dispose(c),s}async executeFunctionAsync(t,e,n){const r=t.reduce(((t,e,n)=>(t[this.inputs[n].name]=e,t)),{});return this._executeAsync(r,this.outputNodes,!0,e,n)}async executeWithControlFlow(t,e,n,r){const i=Object.keys(t),o=i.map((t=>this.graph.nodes[P(t)[0]])),a=n.map((t=>P(t)[0])),s=new Set(a);let u=a.map((t=>this.graph.nodes[t]));0===u.length&&(u=this._outputs);const{usedNodes:l,missingInputs:c,dynamicNode:h,syncInputs:d}=It(t,u,this.weightMap,this._initNodes),f=[...o,...this.graph.weights,...this._initNodes||[]].map((t=>({node:t,contexts:e.currentContext}))),p=Object.assign({},this.weightMap);Object.keys(t).forEach((e=>{const[n,r]=P(e),i=[];i[r]=t[e],p[n]=i}));const m={},g=this.getFrozenTensorIds(p),v={};for(;f.length>0;){const t=this.processStack(o,f,e,p,v,g,s,m,l);await Promise.all(t)}null!=h||r||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const y=u.filter((t=>!Dt(t)&&!T(t.name,p,e))).map((t=>t.name));if(y.length>0){let t="";throw null!=h&&(t=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${d}]`),new Error(`Cannot compute the outputs [${y}] from the provided inputs [${i}]. Consider providing the following inputs: [${c}]. ${t}`)}return p}processStack(t,e,n,r,i,o,a,s,u){const l=[];for(;e.length>0;){const t=e.pop();n.currentContext=t.contexts;let c="";if("Enter"===t.node.op&&C("isConstant",t.node,r,n)&&([c]=I(t.node.name,n)),null==r[t.node.name]){const h=Tt(t.node,r,n,this._resourceManager);c||([c]=I(t.node.name,n));const d=n.currentContext;_.util.isPromise(h)?l.push(h.then((l=>(r[c]=l,this.keepIntermediateTensors&&(this.clonedTensorsMap[c]=this.cloneTensorList(l)),n.currentContext=d,this.checkTensorForDisposal(c,t.node,r,n,o,a,s),this.processChildNodes(t.node,e,n,r,i,u),l)))):(r[c]=h,this.keepIntermediateTensors&&(this.clonedTensorsMap[c]=this.cloneTensorList(h)),this.checkTensorForDisposal(c,t.node,r,n,o,a,s),this.processChildNodes(t.node,e,n,r,i,u))}else this.processChildNodes(t.node,e,n,r,i,u)}return l}processChildNodes(t,e,n,r,i,o){t.children.forEach((t=>{const[a]=I(t.name,n);!i[a]&&o.has(t.name)&&("Merge"===t.op?t.inputNames.some((t=>!!T(t,r,n)))&&(i[a]=!0,e.push({contexts:n.currentContext,node:t})):t.inputNames.every((t=>!!T(t,r,n)))&&(i[a]=!0,e.push({contexts:n.currentContext,node:t})))}))}dispose(){Object.keys(this.weightMap).forEach((t=>this.weightMap[t].forEach((t=>t.dispose()))))}checkInputShapeAndType(t){Object.keys(t).forEach((e=>{const n=t[e],[r]=P(e),i=this.graph.nodes[r];if(i.attrParams.shape&&i.attrParams.shape.value){const t=i.attrParams.shape.value,e=t.length===n.shape.length&&n.shape.every(((e,n)=>-1===t[n]||t[n]===e));_.util.assert(e,(()=>`The shape of dict['${i.name}'] provided in model.execute(dict) must be [${t}], but was [${n.shape}]`))}i.attrParams.dtype&&i.attrParams.dtype.value&&_.util.assert(n.dtype===i.attrParams.dtype.value,(()=>`The dtype of dict['${i.name}'] provided in model.execute(dict) must be ${i.attrParams.dtype.value}, but was ${n.dtype}`))}))}mapInputs(t){var e,n;const r={};for(const i in t){const o=null===(n=null===(e=this._signature)||void 0===e?void 0:e.inputs)||void 0===n?void 0:n[i];null!=o?r[o.name]=t[i]:r[i]=t[i]}return r}checkInputs(t){const e=Object.keys(t).filter((t=>{const[e]=P(t);return null==this.graph.nodes[e]}));if(e.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${e}] that are not part of graph`)}mapOutputs(t){return t.map((t=>{var e,n;const r=null===(n=null===(e=this._signature)||void 0===e?void 0:e.outputs)||void 0===n?void 0:n[t];return null!=r?r.name:t}),{})}checkOutputs(t){t.forEach((t=>{const[e]=P(t);if(!this.graph.nodes[e])throw new Error(`The output '${t}' is not found in the graph`)}))}}class Ut{constructor(t={},e={}){this.hashTableNameToHandle=t,this.hashTableMap=e}addHashTable(t,e){this.hashTableNameToHandle[t]=e.handle,this.hashTableMap[e.id]=e}getHashTableHandleByName(t){return this.hashTableNameToHandle[t]}getHashTableById(t){return this.hashTableMap[t]}dispose(){for(const t in this.hashTableMap)this.hashTableMap[t].clearAndClose(),delete this.hashTableMap[t];for(const t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]}}var jt=n(77084);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Vt="?tfjs-format=file",Ht="model.json";class Gt{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(t,e={},n=_.io){this.modelUrl=t,this.loadOptions=e,this.version="n/a",this.io=n,null==e&&(this.loadOptions={}),this.resourceManager=new Ut}findIOHandler(){const t=this.modelUrl;if(null!=t.load)this.handler=t;else if(null!=this.loadOptions.requestInit)this.handler=this.io.browserHTTPRequest(t,this.loadOptions);else{const e=this.io.getLoadHandlers(t,this.loadOptions);if(0===e.length)e.push(this.io.browserHTTPRequest(t,this.loadOptions));else if(e.length>1)throw new Error(`Found more than one (${e.length}) load handlers for URL '${[t]}'`);this.handler=e[0]}}load(){if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const t=this.handler.load();return _.util.isPromise(t)?t.then((t=>null==t.getWeightStream?this.loadSync(t):this.loadStreaming(t))):this.loadSync(t)}loadSync(t){const e=this.io.decodeWeights(t.weightData,t.weightSpecs);return this.loadWithWeightMap(t,e)}async loadStreaming(t){if(null==t.getWeightStream)throw new Error("Model artifacts missing streamWeights function");const e=await(0,jt.s5)(t.getWeightStream(),t.weightSpecs);return this.loadWithWeightMap(t,e)}loadWithWeightMap(t,e){this.artifacts=t;const n=this.artifacts.modelTopology;let r=this.artifacts.signature;if(null!=this.artifacts.userDefinedMetadata){const t=this.artifacts.userDefinedMetadata;null!=t.signature&&(r=t.signature),null!=t.structuredOutputKeys&&(this.structuredOutputKeys=t.structuredOutputKeys)}if(this.signature=r,this.version=`${n.versions.producer}.${n.versions.minConsumer}`,this.executor=new Bt(tt.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(e),this.executor.resourceManager=this.resourceManager,null!=t.modelInitializer&&null!=t.modelInitializer.node){const e=tt.Instance.transformGraph(t.modelInitializer);this.initializer=new Bt(e),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=t.initializerSignature}return!0}async save(t,e){if("string"==typeof t){const e=this.io.getSaveHandlers(t);if(0===e.length)throw new Error(`Cannot find any save handlers for URL '${t}'`);if(e.length>1)throw new Error(`Found more than one (${e.length}) save handlers for URL '${t}'`);t=e[0]}if(null==t.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return t.save(this.artifacts)}addStructuredOutputNames(t){if(this.structuredOutputKeys){const e=t instanceof _.Tensor?[t]:t,n={};return e.forEach(((t,e)=>n[this.structuredOutputKeys[e]]=t)),n}return t}predict(t,e){const n=this.execute(t,this.outputNodes);return this.addStructuredOutputNames(n)}async predictAsync(t,e){const n=await this.executeAsync(t,this.outputNodes);return this.addStructuredOutputNames(n)}normalizeInputs(t){var e;if(!(t instanceof _.Tensor||Array.isArray(t))){const n=null===(e=this.signature)||void 0===e?void 0:e.inputs;if(null!=n)for(const e in n){const r=n[e];null!=r.resourceId&&(t[e]=this.resourceIdToCapturedInput[r.resourceId])}return t}t=Array.isArray(t)?t:[t];const n=Object.keys(this.resourceIdToCapturedInput).length;if(t.length+n!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-n} non-resource placeholders, while there are ${t.length} input tensors provided.`);let r=0;return this.inputNodes.reduce(((e,n)=>{var i,o,a;const s=null===(a=null===(o=null===(i=this.signature)||void 0===i?void 0:i.inputs)||void 0===o?void 0:o[n])||void 0===a?void 0:a.resourceId;return e[n]=null!=s?this.resourceIdToCapturedInput[s]:t[r++],e}),{})}normalizeOutputs(t){return t=t||this.outputNodes,Array.isArray(t)?t:[t]}executeInitializerGraph(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(t){if(this.resourceIdToCapturedInput={},this.initializerSignature){const e=this.initializerSignature.outputs,n=Object.keys(e);for(let r=0;r<n.length;r++){const i=e[n[r]];this.resourceIdToCapturedInput[i.resourceId]=t[r]}}}execute(t,e){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),t=this.normalizeInputs(t),e=this.normalizeOutputs(e);const n=this.executor.execute(t,e);return n.length>1?n:n[0]}async executeAsync(t,e){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),t=this.normalizeInputs(t),e=this.normalizeOutputs(e);const n=await this.executor.executeAsync(t,e);return n.length>1?n:n[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(t){return Object.keys(t).reduce(((e,n)=>(e[n]=[t[n]],e)),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&(0,_.dispose)(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function Wt(t,e={},n=_.io){if(null==t)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==e&&(e={}),e.fromTFHub&&"string"==typeof t&&(t=function(t){t.endsWith("/")||(t+="/");return`${t}${Ht}${Vt}`}(t));const r=new Gt(t,e,n);return await r.load(),r}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */,79045:(t,e,n)=>{"use strict";n.d(e,{A:()=>l});var r=n(31635),i=n(38221),o=n.n(i),a=n(96540);const s=function(t){var e=(0,a.useRef)(t);return e.current=t,e};const u=function(t){var e=s(t);(0,a.useEffect)((function(){return function(){e.current()}}),[])};const l=function(t,e){var n,i=s(t),l=null!==(n=null==e?void 0:e.wait)&&void 0!==n?n:1e3,c=(0,a.useMemo)((function(){return o()((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i.current.apply(i,(0,r.__spreadArray)([],(0,r.__read)(t),!1))}),l,e)}),[]);return u((function(){c.cancel()})),{run:c,cancel:c.cancel,flush:c.flush}}},64236:(t,e,n)=>{"use strict";n.d(e,{HK:()=>dr,Zc:()=>ce,az:()=>A,eB:()=>o,nB:()=>L});class r{constructor(t){void 0===t&&(t=[0,0,0,0,0,0,0,0,0]),this.elements=t}identity(){const t=this.elements;t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1}setZero(){const t=this.elements;t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0}setTrace(t){const e=this.elements;e[0]=t.x,e[4]=t.y,e[8]=t.z}getTrace(t){void 0===t&&(t=new o);const e=this.elements;return t.x=e[0],t.y=e[4],t.z=e[8],t}vmult(t,e){void 0===e&&(e=new o);const n=this.elements,r=t.x,i=t.y,a=t.z;return e.x=n[0]*r+n[1]*i+n[2]*a,e.y=n[3]*r+n[4]*i+n[5]*a,e.z=n[6]*r+n[7]*i+n[8]*a,e}smult(t){for(let e=0;e<this.elements.length;e++)this.elements[e]*=t}mmult(t,e){void 0===e&&(e=new r);const n=this.elements,i=t.elements,o=e.elements,a=n[0],s=n[1],u=n[2],l=n[3],c=n[4],h=n[5],d=n[6],f=n[7],p=n[8],m=i[0],g=i[1],v=i[2],y=i[3],b=i[4],x=i[5],w=i[6],_=i[7],S=i[8];return o[0]=a*m+s*y+u*w,o[1]=a*g+s*b+u*_,o[2]=a*v+s*x+u*S,o[3]=l*m+c*y+h*w,o[4]=l*g+c*b+h*_,o[5]=l*v+c*x+h*S,o[6]=d*m+f*y+p*w,o[7]=d*g+f*b+p*_,o[8]=d*v+f*x+p*S,e}scale(t,e){void 0===e&&(e=new r);const n=this.elements,i=e.elements;for(let e=0;3!==e;e++)i[3*e+0]=t.x*n[3*e+0],i[3*e+1]=t.y*n[3*e+1],i[3*e+2]=t.z*n[3*e+2];return e}solve(t,e){void 0===e&&(e=new o);const n=[];let r,i;for(r=0;r<12;r++)n.push(0);for(r=0;r<3;r++)for(i=0;i<3;i++)n[r+4*i]=this.elements[r+3*i];n[3]=t.x,n[7]=t.y,n[11]=t.z;let a=3;const s=a;let u;let l;do{if(r=s-a,0===n[r+4*r])for(i=r+1;i<s;i++)if(0!==n[r+4*i]){u=4;do{l=4-u,n[l+4*r]+=n[l+4*i]}while(--u);break}if(0!==n[r+4*r])for(i=r+1;i<s;i++){const t=n[r+4*i]/n[r+4*r];u=4;do{l=4-u,n[l+4*i]=l<=r?0:n[l+4*i]-n[l+4*r]*t}while(--u)}}while(--a);if(e.z=n[11]/n[10],e.y=(n[7]-n[6]*e.z)/n[5],e.x=(n[3]-n[2]*e.z-n[1]*e.y)/n[0],isNaN(e.x)||isNaN(e.y)||isNaN(e.z)||e.x===1/0||e.y===1/0||e.z===1/0)throw`Could not solve equation! Got x=[${e.toString()}], b=[${t.toString()}], A=[${this.toString()}]`;return e}e(t,e,n){if(void 0===n)return this.elements[e+3*t];this.elements[e+3*t]=n}copy(t){for(let e=0;e<t.elements.length;e++)this.elements[e]=t.elements[e];return this}toString(){let t="";for(let e=0;e<9;e++)t+=this.elements[e]+",";return t}reverse(t){void 0===t&&(t=new r);const e=i;let n,o;for(n=0;n<3;n++)for(o=0;o<3;o++)e[n+6*o]=this.elements[n+3*o];e[3]=1,e[9]=0,e[15]=0,e[4]=0,e[10]=1,e[16]=0,e[5]=0,e[11]=0,e[17]=1;let a=3;const s=a;let u;let l;do{if(n=s-a,0===e[n+6*n])for(o=n+1;o<s;o++)if(0!==e[n+6*o]){u=6;do{l=6-u,e[l+6*n]+=e[l+6*o]}while(--u);break}if(0!==e[n+6*n])for(o=n+1;o<s;o++){const t=e[n+6*o]/e[n+6*n];u=6;do{l=6-u,e[l+6*o]=l<=n?0:e[l+6*o]-e[l+6*n]*t}while(--u)}}while(--a);n=2;do{o=n-1;do{const t=e[n+6*o]/e[n+6*n];u=6;do{l=6-u,e[l+6*o]=e[l+6*o]-e[l+6*n]*t}while(--u)}while(o--)}while(--n);n=2;do{const t=1/e[n+6*n];u=6;do{l=6-u,e[l+6*n]=e[l+6*n]*t}while(--u)}while(n--);n=2;do{o=2;do{if(l=e[3+o+6*n],isNaN(l)||l===1/0)throw`Could not reverse! A=[${this.toString()}]`;t.e(n,o,l)}while(o--)}while(n--);return t}setRotationFromQuaternion(t){const e=t.x,n=t.y,r=t.z,i=t.w,o=e+e,a=n+n,s=r+r,u=e*o,l=e*a,c=e*s,h=n*a,d=n*s,f=r*s,p=i*o,m=i*a,g=i*s,v=this.elements;return v[0]=1-(h+f),v[1]=l-g,v[2]=c+m,v[3]=l+g,v[4]=1-(u+f),v[5]=d-p,v[6]=c-m,v[7]=d+p,v[8]=1-(u+h),this}transpose(t){void 0===t&&(t=new r);const e=this.elements,n=t.elements;let i;return n[0]=e[0],n[4]=e[4],n[8]=e[8],i=e[1],n[1]=e[3],n[3]=i,i=e[2],n[2]=e[6],n[6]=i,i=e[5],n[5]=e[7],n[7]=i,t}}const i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class o{constructor(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=t,this.y=e,this.z=n}cross(t,e){void 0===e&&(e=new o);const n=t.x,r=t.y,i=t.z,a=this.x,s=this.y,u=this.z;return e.x=s*i-u*r,e.y=u*n-a*i,e.z=a*r-s*n,e}set(t,e,n){return this.x=t,this.y=e,this.z=n,this}setZero(){this.x=this.y=this.z=0}vadd(t,e){if(!e)return new o(this.x+t.x,this.y+t.y,this.z+t.z);e.x=t.x+this.x,e.y=t.y+this.y,e.z=t.z+this.z}vsub(t,e){if(!e)return new o(this.x-t.x,this.y-t.y,this.z-t.z);e.x=this.x-t.x,e.y=this.y-t.y,e.z=this.z-t.z}crossmat(){return new r([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const t=this.x,e=this.y,n=this.z,r=Math.sqrt(t*t+e*e+n*n);if(r>0){const t=1/r;this.x*=t,this.y*=t,this.z*=t}else this.x=0,this.y=0,this.z=0;return r}unit(t){void 0===t&&(t=new o);const e=this.x,n=this.y,r=this.z;let i=Math.sqrt(e*e+n*n+r*r);return i>0?(i=1/i,t.x=e*i,t.y=n*i,t.z=r*i):(t.x=1,t.y=0,t.z=0),t}length(){const t=this.x,e=this.y,n=this.z;return Math.sqrt(t*t+e*e+n*n)}lengthSquared(){return this.dot(this)}distanceTo(t){const e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,a=t.z;return Math.sqrt((i-e)*(i-e)+(o-n)*(o-n)+(a-r)*(a-r))}distanceSquared(t){const e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,a=t.z;return(i-e)*(i-e)+(o-n)*(o-n)+(a-r)*(a-r)}scale(t,e){void 0===e&&(e=new o);const n=this.x,r=this.y,i=this.z;return e.x=t*n,e.y=t*r,e.z=t*i,e}vmul(t,e){return void 0===e&&(e=new o),e.x=t.x*this.x,e.y=t.y*this.y,e.z=t.z*this.z,e}addScaledVector(t,e,n){return void 0===n&&(n=new o),n.x=this.x+t*e.x,n.y=this.y+t*e.y,n.z=this.z+t*e.z,n}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}isZero(){return 0===this.x&&0===this.y&&0===this.z}negate(t){return void 0===t&&(t=new o),t.x=-this.x,t.y=-this.y,t.z=-this.z,t}tangents(t,e){const n=this.length();if(n>0){const r=a,i=1/n;r.set(this.x*i,this.y*i,this.z*i);const o=s;Math.abs(r.x)<.9?(o.set(1,0,0),r.cross(o,t)):(o.set(0,1,0),r.cross(o,t)),r.cross(t,e)}else t.set(1,0,0),e.set(0,1,0)}toString(){return`${this.x},${this.y},${this.z}`}toArray(){return[this.x,this.y,this.z]}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}lerp(t,e,n){const r=this.x,i=this.y,o=this.z;n.x=r+(t.x-r)*e,n.y=i+(t.y-i)*e,n.z=o+(t.z-o)*e}almostEquals(t,e){return void 0===e&&(e=1e-6),!(Math.abs(this.x-t.x)>e||Math.abs(this.y-t.y)>e||Math.abs(this.z-t.z)>e)}almostZero(t){return void 0===t&&(t=1e-6),!(Math.abs(this.x)>t||Math.abs(this.y)>t||Math.abs(this.z)>t)}isAntiparallelTo(t,e){return this.negate(u),u.almostEquals(t,e)}clone(){return new o(this.x,this.y,this.z)}}o.ZERO=new o(0,0,0),o.UNIT_X=new o(1,0,0),o.UNIT_Y=new o(0,1,0),o.UNIT_Z=new o(0,0,1);const a=new o,s=new o,u=new o;class l{constructor(t){void 0===t&&(t={}),this.lowerBound=new o,this.upperBound=new o,t.lowerBound&&this.lowerBound.copy(t.lowerBound),t.upperBound&&this.upperBound.copy(t.upperBound)}setFromPoints(t,e,n,r){const i=this.lowerBound,o=this.upperBound,a=n;i.copy(t[0]),a&&a.vmult(i,i),o.copy(i);for(let e=1;e<t.length;e++){let n=t[e];a&&(a.vmult(n,c),n=c),n.x>o.x&&(o.x=n.x),n.x<i.x&&(i.x=n.x),n.y>o.y&&(o.y=n.y),n.y<i.y&&(i.y=n.y),n.z>o.z&&(o.z=n.z),n.z<i.z&&(i.z=n.z)}return e&&(e.vadd(i,i),e.vadd(o,o)),r&&(i.x-=r,i.y-=r,i.z-=r,o.x+=r,o.y+=r,o.z+=r),this}copy(t){return this.lowerBound.copy(t.lowerBound),this.upperBound.copy(t.upperBound),this}clone(){return(new l).copy(this)}extend(t){this.lowerBound.x=Math.min(this.lowerBound.x,t.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,t.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,t.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,t.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,t.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,t.upperBound.z)}overlaps(t){const e=this.lowerBound,n=this.upperBound,r=t.lowerBound,i=t.upperBound,o=r.x<=n.x&&n.x<=i.x||e.x<=i.x&&i.x<=n.x,a=r.y<=n.y&&n.y<=i.y||e.y<=i.y&&i.y<=n.y,s=r.z<=n.z&&n.z<=i.z||e.z<=i.z&&i.z<=n.z;return o&&a&&s}volume(){const t=this.lowerBound,e=this.upperBound;return(e.x-t.x)*(e.y-t.y)*(e.z-t.z)}contains(t){const e=this.lowerBound,n=this.upperBound,r=t.lowerBound,i=t.upperBound;return e.x<=r.x&&n.x>=i.x&&e.y<=r.y&&n.y>=i.y&&e.z<=r.z&&n.z>=i.z}getCorners(t,e,n,r,i,o,a,s){const u=this.lowerBound,l=this.upperBound;t.copy(u),e.set(l.x,u.y,u.z),n.set(l.x,l.y,u.z),r.set(u.x,l.y,l.z),i.set(l.x,u.y,l.z),o.set(u.x,l.y,u.z),a.set(u.x,u.y,l.z),s.copy(l)}toLocalFrame(t,e){const n=h,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],l=n[6],c=n[7];this.getCorners(r,i,o,a,s,u,l,c);for(let e=0;8!==e;e++){const r=n[e];t.pointToLocal(r,r)}return e.setFromPoints(n)}toWorldFrame(t,e){const n=h,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],l=n[6],c=n[7];this.getCorners(r,i,o,a,s,u,l,c);for(let e=0;8!==e;e++){const r=n[e];t.pointToWorld(r,r)}return e.setFromPoints(n)}overlapsRay(t){const{direction:e,from:n}=t,r=1/e.x,i=1/e.y,o=1/e.z,a=(this.lowerBound.x-n.x)*r,s=(this.upperBound.x-n.x)*r,u=(this.lowerBound.y-n.y)*i,l=(this.upperBound.y-n.y)*i,c=(this.lowerBound.z-n.z)*o,h=(this.upperBound.z-n.z)*o,d=Math.max(Math.max(Math.min(a,s),Math.min(u,l)),Math.min(c,h)),f=Math.min(Math.min(Math.max(a,s),Math.max(u,l)),Math.max(c,h));return!(f<0)&&!(d>f)}}const c=new o,h=[new o,new o,new o,new o,new o,new o,new o,new o];class d{constructor(){this.matrix=[]}get(t,e){let{index:n}=t,{index:r}=e;if(r>n){const t=r;r=n,n=t}return this.matrix[(n*(n+1)>>1)+r-1]}set(t,e,n){let{index:r}=t,{index:i}=e;if(i>r){const t=i;i=r,r=t}this.matrix[(r*(r+1)>>1)+i-1]=n?1:0}reset(){for(let t=0,e=this.matrix.length;t!==e;t++)this.matrix[t]=0}setNumObjects(t){this.matrix.length=t*(t-1)>>1}}class f{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;return void 0===n[t]&&(n[t]=[]),n[t].includes(e)||n[t].push(e),this}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return!(void 0===n[t]||!n[t].includes(e))}hasAnyEventListener(t){if(void 0===this._listeners)return!1;return void 0!==this._listeners[t]}removeEventListener(t,e){if(void 0===this._listeners)return this;const n=this._listeners;if(void 0===n[t])return this;const r=n[t].indexOf(e);return-1!==r&&n[t].splice(r,1),this}dispatchEvent(t){if(void 0===this._listeners)return this;const e=this._listeners[t.type];if(void 0!==e){t.target=this;for(let n=0,r=e.length;n<r;n++)e[n].call(this,t)}return this}}class p{constructor(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),this.x=t,this.y=e,this.z=n,this.w=r}set(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}toString(){return`${this.x},${this.y},${this.z},${this.w}`}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(t,e){const n=Math.sin(.5*e);return this.x=t.x*n,this.y=t.y*n,this.z=t.z*n,this.w=Math.cos(.5*e),this}toAxisAngle(t){void 0===t&&(t=new o),this.normalize();const e=2*Math.acos(this.w),n=Math.sqrt(1-this.w*this.w);return n<.001?(t.x=this.x,t.y=this.y,t.z=this.z):(t.x=this.x/n,t.y=this.y/n,t.z=this.z/n),[t,e]}setFromVectors(t,e){if(t.isAntiparallelTo(e)){const e=m,n=g;t.tangents(e,n),this.setFromAxisAngle(e,Math.PI)}else{const n=t.cross(e);this.x=n.x,this.y=n.y,this.z=n.z,this.w=Math.sqrt(t.length()**2*e.length()**2)+t.dot(e),this.normalize()}return this}mult(t,e){void 0===e&&(e=new p);const n=this.x,r=this.y,i=this.z,o=this.w,a=t.x,s=t.y,u=t.z,l=t.w;return e.x=n*l+o*a+r*u-i*s,e.y=r*l+o*s+i*a-n*u,e.z=i*l+o*u+n*s-r*a,e.w=o*l-n*a-r*s-i*u,e}inverse(t){void 0===t&&(t=new p);const e=this.x,n=this.y,r=this.z,i=this.w;this.conjugate(t);const o=1/(e*e+n*n+r*r+i*i);return t.x*=o,t.y*=o,t.z*=o,t.w*=o,t}conjugate(t){return void 0===t&&(t=new p),t.x=-this.x,t.y=-this.y,t.z=-this.z,t.w=this.w,t}normalize(){let t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=0):(t=1/t,this.x*=t,this.y*=t,this.z*=t,this.w*=t),this}normalizeFast(){const t=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return 0===t?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=t,this.y*=t,this.z*=t,this.w*=t),this}vmult(t,e){void 0===e&&(e=new o);const n=t.x,r=t.y,i=t.z,a=this.x,s=this.y,u=this.z,l=this.w,c=l*n+s*i-u*r,h=l*r+u*n-a*i,d=l*i+a*r-s*n,f=-a*n-s*r-u*i;return e.x=c*l+f*-a+h*-u-d*-s,e.y=h*l+f*-s+d*-a-c*-u,e.z=d*l+f*-u+c*-s-h*-a,e}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}toEuler(t,e){let n,r,i;void 0===e&&(e="YZX");const o=this.x,a=this.y,s=this.z,u=this.w;if("YZX"!==e)throw new Error(`Euler order ${e} not supported yet.`);{const t=o*a+s*u;if(t>.499&&(n=2*Math.atan2(o,u),r=Math.PI/2,i=0),t<-.499&&(n=-2*Math.atan2(o,u),r=-Math.PI/2,i=0),void 0===n){const e=o*o,l=a*a,c=s*s;n=Math.atan2(2*a*u-2*o*s,1-2*l-2*c),r=Math.asin(2*t),i=Math.atan2(2*o*u-2*a*s,1-2*e-2*c)}}t.y=n,t.z=r,t.x=i}setFromEuler(t,e,n,r){void 0===r&&(r="XYZ");const i=Math.cos(t/2),o=Math.cos(e/2),a=Math.cos(n/2),s=Math.sin(t/2),u=Math.sin(e/2),l=Math.sin(n/2);return"XYZ"===r?(this.x=s*o*a+i*u*l,this.y=i*u*a-s*o*l,this.z=i*o*l+s*u*a,this.w=i*o*a-s*u*l):"YXZ"===r?(this.x=s*o*a+i*u*l,this.y=i*u*a-s*o*l,this.z=i*o*l-s*u*a,this.w=i*o*a+s*u*l):"ZXY"===r?(this.x=s*o*a-i*u*l,this.y=i*u*a+s*o*l,this.z=i*o*l+s*u*a,this.w=i*o*a-s*u*l):"ZYX"===r?(this.x=s*o*a-i*u*l,this.y=i*u*a+s*o*l,this.z=i*o*l-s*u*a,this.w=i*o*a+s*u*l):"YZX"===r?(this.x=s*o*a+i*u*l,this.y=i*u*a+s*o*l,this.z=i*o*l-s*u*a,this.w=i*o*a-s*u*l):"XZY"===r&&(this.x=s*o*a-i*u*l,this.y=i*u*a-s*o*l,this.z=i*o*l+s*u*a,this.w=i*o*a+s*u*l),this}clone(){return new p(this.x,this.y,this.z,this.w)}slerp(t,e,n){void 0===n&&(n=new p);const r=this.x,i=this.y,o=this.z,a=this.w;let s,u,l,c,h,d=t.x,f=t.y,m=t.z,g=t.w;return u=r*d+i*f+o*m+a*g,u<0&&(u=-u,d=-d,f=-f,m=-m,g=-g),1-u>1e-6?(s=Math.acos(u),l=Math.sin(s),c=Math.sin((1-e)*s)/l,h=Math.sin(e*s)/l):(c=1-e,h=e),n.x=c*r+h*d,n.y=c*i+h*f,n.z=c*o+h*m,n.w=c*a+h*g,n}integrate(t,e,n,r){void 0===r&&(r=new p);const i=t.x*n.x,o=t.y*n.y,a=t.z*n.z,s=this.x,u=this.y,l=this.z,c=this.w,h=.5*e;return r.x+=h*(i*c+o*l-a*u),r.y+=h*(o*c+a*s-i*l),r.z+=h*(a*c+i*u-o*s),r.w+=h*(-i*s-o*u-a*l),r}}const m=new o,g=new o;class v{constructor(t){void 0===t&&(t={}),this.id=v.idCounter++,this.type=t.type||0,this.boundingSphereRadius=0,this.collisionResponse=!t.collisionResponse||t.collisionResponse,this.collisionFilterGroup=void 0!==t.collisionFilterGroup?t.collisionFilterGroup:1,this.collisionFilterMask=void 0!==t.collisionFilterMask?t.collisionFilterMask:-1,this.material=t.material?t.material:null,this.body=null}updateBoundingSphereRadius(){throw`computeBoundingSphereRadius() not implemented for shape type ${this.type}`}volume(){throw`volume() not implemented for shape type ${this.type}`}calculateLocalInertia(t,e){throw`calculateLocalInertia() not implemented for shape type ${this.type}`}calculateWorldAABB(t,e,n,r){throw`calculateWorldAABB() not implemented for shape type ${this.type}`}}v.idCounter=0,v.types={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};class y{constructor(t){void 0===t&&(t={}),this.position=new o,this.quaternion=new p,t.position&&this.position.copy(t.position),t.quaternion&&this.quaternion.copy(t.quaternion)}pointToLocal(t,e){return y.pointToLocalFrame(this.position,this.quaternion,t,e)}pointToWorld(t,e){return y.pointToWorldFrame(this.position,this.quaternion,t,e)}vectorToWorldFrame(t,e){return void 0===e&&(e=new o),this.quaternion.vmult(t,e),e}static pointToLocalFrame(t,e,n,r){return void 0===r&&(r=new o),n.vsub(t,r),e.conjugate(b),b.vmult(r,r),r}static pointToWorldFrame(t,e,n,r){return void 0===r&&(r=new o),e.vmult(n,r),r.vadd(t,r),r}static vectorToWorldFrame(t,e,n){return void 0===n&&(n=new o),t.vmult(e,n),n}static vectorToLocalFrame(t,e,n,r){return void 0===r&&(r=new o),e.w*=-1,e.vmult(n,r),e.w*=-1,r}}const b=new p;class x extends v{constructor(t){void 0===t&&(t={});const{vertices:e=[],faces:n=[],normals:r=[],axes:i,boundingSphereRadius:o}=t;super({type:v.types.CONVEXPOLYHEDRON}),this.vertices=e,this.faces=n,this.faceNormals=r,0===this.faceNormals.length&&this.computeNormals(),o?this.boundingSphereRadius=o:this.updateBoundingSphereRadius(),this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.worldFaceNormals=[],this.worldFaceNormalsNeedsUpdate=!0,this.uniqueAxes=i?i.slice():null,this.uniqueEdges=[],this.computeEdges()}computeEdges(){const t=this.faces,e=this.vertices,n=this.uniqueEdges;n.length=0;const r=new o;for(let i=0;i!==t.length;i++){const o=t[i],a=o.length;for(let t=0;t!==a;t++){const i=(t+1)%a;e[o[t]].vsub(e[o[i]],r),r.normalize();let s=!1;for(let t=0;t!==n.length;t++)if(n[t].almostEquals(r)||n[t].almostEquals(r)){s=!0;break}s||n.push(r.clone())}}}computeNormals(){this.faceNormals.length=this.faces.length;for(let t=0;t<this.faces.length;t++){for(let e=0;e<this.faces[t].length;e++)if(!this.vertices[this.faces[t][e]])throw new Error(`Vertex ${this.faces[t][e]} not found!`);const e=this.faceNormals[t]||new o;this.getFaceNormal(t,e),e.negate(e),this.faceNormals[t]=e;const n=this.vertices[this.faces[t][0]];if(e.dot(n)<0){console.error(`.faceNormals[${t}] = Vec3(${e.toString()}) looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.`);for(let e=0;e<this.faces[t].length;e++)console.warn(`.vertices[${this.faces[t][e]}] = Vec3(${this.vertices[this.faces[t][e]].toString()})`)}}}getFaceNormal(t,e){const n=this.faces[t],r=this.vertices[n[0]],i=this.vertices[n[1]],o=this.vertices[n[2]];x.computeNormal(r,i,o,e)}static computeNormal(t,e,n,r){const i=new o,a=new o;e.vsub(t,a),n.vsub(e,i),i.cross(a,r),r.isZero()||r.normalize()}clipAgainstHull(t,e,n,r,i,a,s,u,l){const c=new o;let h=-1,d=-Number.MAX_VALUE;for(let t=0;t<n.faces.length;t++){c.copy(n.faceNormals[t]),i.vmult(c,c);const e=c.dot(a);e>d&&(d=e,h=t)}const f=[];for(let t=0;t<n.faces[h].length;t++){const e=n.vertices[n.faces[h][t]],a=new o;a.copy(e),i.vmult(a,a),r.vadd(a,a),f.push(a)}h>=0&&this.clipFaceAgainstHull(a,t,e,f,s,u,l)}findSeparatingAxis(t,e,n,r,i,a,s,u){const l=new o,c=new o,h=new o,d=new o,f=new o,p=new o;let m=Number.MAX_VALUE;const g=this;if(g.uniqueAxes)for(let o=0;o!==g.uniqueAxes.length;o++){n.vmult(g.uniqueAxes[o],l);const s=g.testSepAxis(l,t,e,n,r,i);if(!1===s)return!1;s<m&&(m=s,a.copy(l))}else{const o=s?s.length:g.faces.length;for(let u=0;u<o;u++){const o=s?s[u]:u;l.copy(g.faceNormals[o]),n.vmult(l,l);const c=g.testSepAxis(l,t,e,n,r,i);if(!1===c)return!1;c<m&&(m=c,a.copy(l))}}if(t.uniqueAxes)for(let o=0;o!==t.uniqueAxes.length;o++){i.vmult(t.uniqueAxes[o],c);const s=g.testSepAxis(c,t,e,n,r,i);if(!1===s)return!1;s<m&&(m=s,a.copy(c))}else{const o=u?u.length:t.faces.length;for(let s=0;s<o;s++){const o=u?u[s]:s;c.copy(t.faceNormals[o]),i.vmult(c,c);const l=g.testSepAxis(c,t,e,n,r,i);if(!1===l)return!1;l<m&&(m=l,a.copy(c))}}for(let o=0;o!==g.uniqueEdges.length;o++){n.vmult(g.uniqueEdges[o],d);for(let o=0;o!==t.uniqueEdges.length;o++)if(i.vmult(t.uniqueEdges[o],f),d.cross(f,p),!p.almostZero()){p.normalize();const o=g.testSepAxis(p,t,e,n,r,i);if(!1===o)return!1;o<m&&(m=o,a.copy(p))}}return r.vsub(e,h),h.dot(a)>0&&a.negate(a),!0}testSepAxis(t,e,n,r,i,o){x.project(this,t,n,r,w),x.project(e,t,i,o,_);const a=w[0],s=w[1],u=_[0],l=_[1];if(a<l||u<s)return!1;const c=a-l,h=u-s;return c<h?c:h}calculateLocalInertia(t,e){const n=new o,r=new o;this.computeLocalAABB(r,n);const i=n.x-r.x,a=n.y-r.y,s=n.z-r.z;e.x=1/12*t*(2*a*2*a+2*s*2*s),e.y=1/12*t*(2*i*2*i+2*s*2*s),e.z=1/12*t*(2*a*2*a+2*i*2*i)}getPlaneConstantOfFace(t){const e=this.faces[t],n=this.faceNormals[t],r=this.vertices[e[0]];return-n.dot(r)}clipFaceAgainstHull(t,e,n,r,i,a,s){const u=new o,l=new o,c=new o,h=new o,d=new o,f=new o,p=new o,m=new o,g=this,v=r,y=[];let b=-1,x=Number.MAX_VALUE;for(let e=0;e<g.faces.length;e++){u.copy(g.faceNormals[e]),n.vmult(u,u);const r=u.dot(t);r<x&&(x=r,b=e)}if(b<0)return;const w=g.faces[b];w.connectedFaces=[];for(let t=0;t<g.faces.length;t++)for(let e=0;e<g.faces[t].length;e++)-1!==w.indexOf(g.faces[t][e])&&t!==b&&-1===w.connectedFaces.indexOf(t)&&w.connectedFaces.push(t);const _=w.length;for(let t=0;t<_;t++){const r=g.vertices[w[t]],i=g.vertices[w[(t+1)%_]];r.vsub(i,l),c.copy(l),n.vmult(c,c),e.vadd(c,c),h.copy(this.faceNormals[b]),n.vmult(h,h),e.vadd(h,h),c.cross(h,d),d.negate(d),f.copy(r),n.vmult(f,f),e.vadd(f,f);const o=w.connectedFaces[t];p.copy(this.faceNormals[o]);const a=this.getPlaneConstantOfFace(o);m.copy(p),n.vmult(m,m);const s=a-m.dot(e);for(this.clipFaceAgainstPlane(v,y,m,s);v.length;)v.shift();for(;y.length;)v.push(y.shift())}p.copy(this.faceNormals[b]);const S=this.getPlaneConstantOfFace(b);m.copy(p),n.vmult(m,m);const E=S-m.dot(e);for(let t=0;t<v.length;t++){let e=m.dot(v[t])+E;if(e<=i&&(console.log(`clamped: depth=${e} to minDist=${i}`),e=i),e<=a){const n=v[t];if(e<=1e-6){const t={point:n,normal:m,depth:e};s.push(t)}}}}clipFaceAgainstPlane(t,e,n,r){let i,a;const s=t.length;if(s<2)return e;let u=t[t.length-1],l=t[0];i=n.dot(u)+r;for(let c=0;c<s;c++){if(l=t[c],a=n.dot(l)+r,i<0)if(a<0){const t=new o;t.copy(l),e.push(t)}else{const t=new o;u.lerp(l,i/(i-a),t),e.push(t)}else if(a<0){const t=new o;u.lerp(l,i/(i-a),t),e.push(t),e.push(l)}u=l,i=a}return e}computeWorldVertices(t,e){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new o);const n=this.vertices,r=this.worldVertices;for(let i=0;i!==this.vertices.length;i++)e.vmult(n[i],r[i]),t.vadd(r[i],r[i]);this.worldVerticesNeedsUpdate=!1}computeLocalAABB(t,e){const n=this.vertices;t.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),e.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let r=0;r<this.vertices.length;r++){const i=n[r];i.x<t.x?t.x=i.x:i.x>e.x&&(e.x=i.x),i.y<t.y?t.y=i.y:i.y>e.y&&(e.y=i.y),i.z<t.z?t.z=i.z:i.z>e.z&&(e.z=i.z)}}computeWorldFaceNormals(t){const e=this.faceNormals.length;for(;this.worldFaceNormals.length<e;)this.worldFaceNormals.push(new o);const n=this.faceNormals,r=this.worldFaceNormals;for(let i=0;i!==e;i++)t.vmult(n[i],r[i]);this.worldFaceNormalsNeedsUpdate=!1}updateBoundingSphereRadius(){let t=0;const e=this.vertices;for(let n=0;n!==e.length;n++){const r=e[n].lengthSquared();r>t&&(t=r)}this.boundingSphereRadius=Math.sqrt(t)}calculateWorldAABB(t,e,n,r){const i=this.vertices;let a,s,u,l,c,h,d=new o;for(let n=0;n<i.length;n++){d.copy(i[n]),e.vmult(d,d),t.vadd(d,d);const r=d;(void 0===a||r.x<a)&&(a=r.x),(void 0===l||r.x>l)&&(l=r.x),(void 0===s||r.y<s)&&(s=r.y),(void 0===c||r.y>c)&&(c=r.y),(void 0===u||r.z<u)&&(u=r.z),(void 0===h||r.z>h)&&(h=r.z)}n.set(a,s,u),r.set(l,c,h)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}getAveragePointLocal(t){void 0===t&&(t=new o);const e=this.vertices;for(let n=0;n<e.length;n++)t.vadd(e[n],t);return t.scale(1/e.length,t),t}transformAllPoints(t,e){const n=this.vertices.length,r=this.vertices;if(e){for(let t=0;t<n;t++){const n=r[t];e.vmult(n,n)}for(let t=0;t<this.faceNormals.length;t++){const n=this.faceNormals[t];e.vmult(n,n)}}if(t)for(let e=0;e<n;e++){const n=r[e];n.vadd(t,n)}}pointIsInside(t){const e=this.vertices,n=this.faces,r=this.faceNormals,i=new o;this.getAveragePointLocal(i);for(let a=0;a<this.faces.length;a++){let s=r[a];const u=e[n[a][0]],l=new o;t.vsub(u,l);const c=s.dot(l),h=new o;i.vsub(u,h);const d=s.dot(h);if(c<0&&d>0||c>0&&d<0)return!1}return-1}static project(t,e,n,r,i){const o=t.vertices.length,a=S;let s=0,u=0;const l=E,c=t.vertices;l.setZero(),y.vectorToLocalFrame(n,r,e,a),y.pointToLocalFrame(n,r,l,l);const h=l.dot(a);u=s=c[0].dot(a);for(let t=1;t<o;t++){const e=c[t].dot(a);e>s&&(s=e),e<u&&(u=e)}if(u-=h,s-=h,u>s){const t=u;u=s,s=t}i[0]=s,i[1]=u}}const w=[],_=[],S=(new o,new o),E=new o;class A extends v{constructor(t){super({type:v.types.BOX}),this.halfExtents=t,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}updateConvexPolyhedronRepresentation(){const t=this.halfExtents.x,e=this.halfExtents.y,n=this.halfExtents.z,r=o,i=[new r(-t,-e,-n),new r(t,-e,-n),new r(t,e,-n),new r(-t,e,-n),new r(-t,-e,n),new r(t,-e,n),new r(t,e,n),new r(-t,e,n)],a=[new r(0,0,1),new r(0,1,0),new r(1,0,0)],s=new x({vertices:i,faces:[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],axes:a});this.convexPolyhedronRepresentation=s,s.material=this.material}calculateLocalInertia(t,e){return void 0===e&&(e=new o),A.calculateInertia(this.halfExtents,t,e),e}static calculateInertia(t,e,n){const r=t;n.x=1/12*e*(2*r.y*2*r.y+2*r.z*2*r.z),n.y=1/12*e*(2*r.x*2*r.x+2*r.z*2*r.z),n.z=1/12*e*(2*r.y*2*r.y+2*r.x*2*r.x)}getSideNormals(t,e){const n=t,r=this.halfExtents;if(n[0].set(r.x,0,0),n[1].set(0,r.y,0),n[2].set(0,0,r.z),n[3].set(-r.x,0,0),n[4].set(0,-r.y,0),n[5].set(0,0,-r.z),void 0!==e)for(let t=0;t!==n.length;t++)e.vmult(n[t],n[t]);return n}volume(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}updateBoundingSphereRadius(){this.boundingSphereRadius=this.halfExtents.length()}forEachWorldCorner(t,e,n){const r=this.halfExtents,i=[[r.x,r.y,r.z],[-r.x,r.y,r.z],[-r.x,-r.y,r.z],[-r.x,-r.y,-r.z],[r.x,-r.y,-r.z],[r.x,r.y,-r.z],[-r.x,r.y,-r.z],[r.x,-r.y,r.z]];for(let r=0;r<i.length;r++)M.set(i[r][0],i[r][1],i[r][2]),e.vmult(M,M),t.vadd(M,M),n(M.x,M.y,M.z)}calculateWorldAABB(t,e,n,r){const i=this.halfExtents;C[0].set(i.x,i.y,i.z),C[1].set(-i.x,i.y,i.z),C[2].set(-i.x,-i.y,i.z),C[3].set(-i.x,-i.y,-i.z),C[4].set(i.x,-i.y,-i.z),C[5].set(i.x,i.y,-i.z),C[6].set(-i.x,i.y,-i.z),C[7].set(i.x,-i.y,i.z);const o=C[0];e.vmult(o,o),t.vadd(o,o),r.copy(o),n.copy(o);for(let i=1;i<8;i++){const o=C[i];e.vmult(o,o),t.vadd(o,o);const a=o.x,s=o.y,u=o.z;a>r.x&&(r.x=a),s>r.y&&(r.y=s),u>r.z&&(r.z=u),a<n.x&&(n.x=a),s<n.y&&(n.y=s),u<n.z&&(n.z=u)}}}const M=new o,C=[new o,new o,new o,new o,new o,new o,new o,new o],T=1,k=2,I=4,N=0,P=1,O=2;class L extends f{constructor(t){void 0===t&&(t={}),super(),this.id=L.idCounter++,this.index=-1,this.world=null,this.vlambda=new o,this.collisionFilterGroup="number"==typeof t.collisionFilterGroup?t.collisionFilterGroup:1,this.collisionFilterMask="number"==typeof t.collisionFilterMask?t.collisionFilterMask:-1,this.collisionResponse="boolean"!=typeof t.collisionResponse||t.collisionResponse,this.position=new o,this.previousPosition=new o,this.interpolatedPosition=new o,this.initPosition=new o,t.position&&(this.position.copy(t.position),this.previousPosition.copy(t.position),this.interpolatedPosition.copy(t.position),this.initPosition.copy(t.position)),this.velocity=new o,t.velocity&&this.velocity.copy(t.velocity),this.initVelocity=new o,this.force=new o;const e="number"==typeof t.mass?t.mass:0;this.mass=e,this.invMass=e>0?1/e:0,this.material=t.material||null,this.linearDamping="number"==typeof t.linearDamping?t.linearDamping:.01,this.type=e<=0?L.STATIC:L.DYNAMIC,typeof t.type==typeof L.STATIC&&(this.type=t.type),this.allowSleep=void 0===t.allowSleep||t.allowSleep,this.sleepState=L.AWAKE,this.sleepSpeedLimit=void 0!==t.sleepSpeedLimit?t.sleepSpeedLimit:.1,this.sleepTimeLimit=void 0!==t.sleepTimeLimit?t.sleepTimeLimit:1,this.timeLastSleepy=0,this.wakeUpAfterNarrowphase=!1,this.torque=new o,this.quaternion=new p,this.initQuaternion=new p,this.previousQuaternion=new p,this.interpolatedQuaternion=new p,t.quaternion&&(this.quaternion.copy(t.quaternion),this.initQuaternion.copy(t.quaternion),this.previousQuaternion.copy(t.quaternion),this.interpolatedQuaternion.copy(t.quaternion)),this.angularVelocity=new o,t.angularVelocity&&this.angularVelocity.copy(t.angularVelocity),this.initAngularVelocity=new o,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new o,this.invInertia=new o,this.invInertiaWorld=new r,this.invMassSolve=0,this.invInertiaSolve=new o,this.invInertiaWorldSolve=new r,this.fixedRotation=void 0!==t.fixedRotation&&t.fixedRotation,this.angularDamping=void 0!==t.angularDamping?t.angularDamping:.01,this.linearFactor=new o(1,1,1),t.linearFactor&&this.linearFactor.copy(t.linearFactor),this.angularFactor=new o(1,1,1),t.angularFactor&&this.angularFactor.copy(t.angularFactor),this.aabb=new l,this.aabbNeedsUpdate=!0,this.boundingRadius=0,this.wlambda=new o,this.isTrigger=Boolean(t.isTrigger),t.shape&&this.addShape(t.shape),this.updateMassProperties()}wakeUp(){const t=this.sleepState;this.sleepState=L.AWAKE,this.wakeUpAfterNarrowphase=!1,t===L.SLEEPING&&this.dispatchEvent(L.wakeupEvent)}sleep(){this.sleepState=L.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}sleepTick(t){if(this.allowSleep){const e=this.sleepState,n=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),r=this.sleepSpeedLimit**2;e===L.AWAKE&&n<r?(this.sleepState=L.SLEEPY,this.timeLastSleepy=t,this.dispatchEvent(L.sleepyEvent)):e===L.SLEEPY&&n>r?this.wakeUp():e===L.SLEEPY&&t-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(L.sleepEvent))}}updateSolveMassProperties(){this.sleepState===L.SLEEPING||this.type===L.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}pointToLocalFrame(t,e){return void 0===e&&(e=new o),t.vsub(this.position,e),this.quaternion.conjugate().vmult(e,e),e}vectorToLocalFrame(t,e){return void 0===e&&(e=new o),this.quaternion.conjugate().vmult(t,e),e}pointToWorldFrame(t,e){return void 0===e&&(e=new o),this.quaternion.vmult(t,e),e.vadd(this.position,e),e}vectorToWorldFrame(t,e){return void 0===e&&(e=new o),this.quaternion.vmult(t,e),e}addShape(t,e,n){const r=new o,i=new p;return e&&r.copy(e),n&&i.copy(n),this.shapes.push(t),this.shapeOffsets.push(r),this.shapeOrientations.push(i),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,t.body=this,this}removeShape(t){const e=this.shapes.indexOf(t);return-1===e?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(e,1),this.shapeOffsets.splice(e,1),this.shapeOrientations.splice(e,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,t.body=null,this)}updateBoundingRadius(){const t=this.shapes,e=this.shapeOffsets,n=t.length;let r=0;for(let i=0;i!==n;i++){const n=t[i];n.updateBoundingSphereRadius();const o=e[i].length(),a=n.boundingSphereRadius;o+a>r&&(r=o+a)}this.boundingRadius=r}updateAABB(){const t=this.shapes,e=this.shapeOffsets,n=this.shapeOrientations,r=t.length,i=R,o=D,a=this.quaternion,s=this.aabb,u=z;for(let l=0;l!==r;l++){const r=t[l];a.vmult(e[l],i),i.vadd(this.position,i),a.mult(n[l],o),r.calculateWorldAABB(i,o,u.lowerBound,u.upperBound),0===l?s.copy(u):s.extend(u)}this.aabbNeedsUpdate=!1}updateInertiaWorld(t){const e=this.invInertia;if(e.x!==e.y||e.y!==e.z||t){const t=F,n=B;t.setRotationFromQuaternion(this.quaternion),t.transpose(n),t.scale(e,t),t.mmult(n,this.invInertiaWorld)}else;}applyForce(t,e){if(void 0===e&&(e=new o),this.type!==L.DYNAMIC)return;this.sleepState===L.SLEEPING&&this.wakeUp();const n=U;e.cross(t,n),this.force.vadd(t,this.force),this.torque.vadd(n,this.torque)}applyLocalForce(t,e){if(void 0===e&&(e=new o),this.type!==L.DYNAMIC)return;const n=j,r=V;this.vectorToWorldFrame(t,n),this.vectorToWorldFrame(e,r),this.applyForce(n,r)}applyTorque(t){this.type===L.DYNAMIC&&(this.sleepState===L.SLEEPING&&this.wakeUp(),this.torque.vadd(t,this.torque))}applyImpulse(t,e){if(void 0===e&&(e=new o),this.type!==L.DYNAMIC)return;this.sleepState===L.SLEEPING&&this.wakeUp();const n=e,r=H;r.copy(t),r.scale(this.invMass,r),this.velocity.vadd(r,this.velocity);const i=G;n.cross(t,i),this.invInertiaWorld.vmult(i,i),this.angularVelocity.vadd(i,this.angularVelocity)}applyLocalImpulse(t,e){if(void 0===e&&(e=new o),this.type!==L.DYNAMIC)return;const n=W,r=X;this.vectorToWorldFrame(t,n),this.vectorToWorldFrame(e,r),this.applyImpulse(n,r)}updateMassProperties(){const t=Y;this.invMass=this.mass>0?1/this.mass:0;const e=this.inertia,n=this.fixedRotation;this.updateAABB(),t.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),A.calculateInertia(t,this.mass,e),this.invInertia.set(e.x>0&&!n?1/e.x:0,e.y>0&&!n?1/e.y:0,e.z>0&&!n?1/e.z:0),this.updateInertiaWorld(!0)}getVelocityAtWorldPoint(t,e){const n=new o;return t.vsub(this.position,n),this.angularVelocity.cross(n,e),this.velocity.vadd(e,e),e}integrate(t,e,n){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),this.type!==L.DYNAMIC&&this.type!==L.KINEMATIC||this.sleepState===L.SLEEPING)return;const r=this.velocity,i=this.angularVelocity,o=this.position,a=this.force,s=this.torque,u=this.quaternion,l=this.invMass,c=this.invInertiaWorld,h=this.linearFactor,d=l*t;r.x+=a.x*d*h.x,r.y+=a.y*d*h.y,r.z+=a.z*d*h.z;const f=c.elements,p=this.angularFactor,m=s.x*p.x,g=s.y*p.y,v=s.z*p.z;i.x+=t*(f[0]*m+f[1]*g+f[2]*v),i.y+=t*(f[3]*m+f[4]*g+f[5]*v),i.z+=t*(f[6]*m+f[7]*g+f[8]*v),o.x+=r.x*t,o.y+=r.y*t,o.z+=r.z*t,u.integrate(this.angularVelocity,t,this.angularFactor,u),e&&(n?u.normalizeFast():u.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}L.idCounter=0,L.COLLIDE_EVENT_NAME="collide",L.DYNAMIC=T,L.STATIC=k,L.KINEMATIC=I,L.AWAKE=N,L.SLEEPY=P,L.SLEEPING=O,L.wakeupEvent={type:"wakeup"},L.sleepyEvent={type:"sleepy"},L.sleepEvent={type:"sleep"};const R=new o,D=new p,z=new l,F=new r,B=new r,U=(new r,new o),j=new o,V=new o,H=new o,G=new o,W=new o,X=new o,Y=new o;class q{constructor(){this.world=null,this.useBoundingBoxes=!1,this.dirty=!0}collisionPairs(t,e,n){throw new Error("collisionPairs not implemented for this BroadPhase class!")}needBroadphaseCollision(t,e){return!!(t.collisionFilterGroup&e.collisionFilterMask&&e.collisionFilterGroup&t.collisionFilterMask)&&(!(t.type&L.STATIC||t.sleepState===L.SLEEPING)||!(e.type&L.STATIC||e.sleepState===L.SLEEPING))}intersectionTest(t,e,n,r){this.useBoundingBoxes?this.doBoundingBoxBroadphase(t,e,n,r):this.doBoundingSphereBroadphase(t,e,n,r)}doBoundingSphereBroadphase(t,e,n,r){const i=$;e.position.vsub(t.position,i);const o=(t.boundingRadius+e.boundingRadius)**2;i.lengthSquared()<o&&(n.push(t),r.push(e))}doBoundingBoxBroadphase(t,e,n,r){t.aabbNeedsUpdate&&t.updateAABB(),e.aabbNeedsUpdate&&e.updateAABB(),t.aabb.overlaps(e.aabb)&&(n.push(t),r.push(e))}makePairsUnique(t,e){const n=K,r=Z,i=Q,o=t.length;for(let n=0;n!==o;n++)r[n]=t[n],i[n]=e[n];t.length=0,e.length=0;for(let t=0;t!==o;t++){const e=r[t].id,o=i[t].id,a=e<o?`${e},${o}`:`${o},${e}`;n[a]=t,n.keys.push(a)}for(let o=0;o!==n.keys.length;o++){const o=n.keys.pop(),a=n[o];t.push(r[a]),e.push(i[a]),delete n[o]}}setWorld(t){}static boundingSphereCheck(t,e){const n=new o;t.position.vsub(e.position,n);const r=t.shapes[0],i=e.shapes[0];return Math.pow(r.boundingSphereRadius+i.boundingSphereRadius,2)>n.lengthSquared()}aabbQuery(t,e,n){return console.warn(".aabbQuery is not implemented in this Broadphase subclass."),[]}}const $=new o;new o,new p,new o;const K={keys:[]},Z=[],Q=[];new o;new o;new o;class J extends q{constructor(){super()}collisionPairs(t,e,n){const r=t.bodies,i=r.length;let o,a;for(let t=0;t!==i;t++)for(let i=0;i!==t;i++)o=r[t],a=r[i],this.needBroadphaseCollision(o,a)&&this.intersectionTest(o,a,e,n)}aabbQuery(t,e,n){void 0===n&&(n=[]);for(let r=0;r<t.bodies.length;r++){const i=t.bodies[r];i.aabbNeedsUpdate&&i.updateAABB(),i.aabb.overlaps(e)&&n.push(i)}return n}}class tt{constructor(){this.rayFromWorld=new o,this.rayToWorld=new o,this.hitNormalWorld=new o,this.hitPointWorld=new o,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(t,e,n,r,i,o,a){this.rayFromWorld.copy(t),this.rayToWorld.copy(e),this.hitNormalWorld.copy(n),this.hitPointWorld.copy(r),this.shape=i,this.body=o,this.distance=a}}let et,nt,rt,it,ot,at,st;const ut=1,lt=2,ct=4;et=v.types.SPHERE,nt=v.types.PLANE,rt=v.types.BOX,it=v.types.CYLINDER,ot=v.types.CONVEXPOLYHEDRON,at=v.types.HEIGHTFIELD,st=v.types.TRIMESH;class ht{get[et](){return this._intersectSphere}get[nt](){return this._intersectPlane}get[rt](){return this._intersectBox}get[it](){return this._intersectConvex}get[ot](){return this._intersectConvex}get[at](){return this._intersectHeightfield}get[st](){return this._intersectTrimesh}constructor(t,e){void 0===t&&(t=new o),void 0===e&&(e=new o),this.from=t.clone(),this.to=e.clone(),this.direction=new o,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=ht.ANY,this.result=new tt,this.hasHit=!1,this.callback=t=>{}}intersectWorld(t,e){return this.mode=e.mode||ht.ANY,this.result=e.result||new tt,this.skipBackfaces=!!e.skipBackfaces,this.collisionFilterMask=void 0!==e.collisionFilterMask?e.collisionFilterMask:-1,this.collisionFilterGroup=void 0!==e.collisionFilterGroup?e.collisionFilterGroup:-1,this.checkCollisionResponse=void 0===e.checkCollisionResponse||e.checkCollisionResponse,e.from&&this.from.copy(e.from),e.to&&this.to.copy(e.to),this.callback=e.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(dt),ft.length=0,t.broadphase.aabbQuery(t,dt,ft),this.intersectBodies(ft),this.hasHit}intersectBody(t,e){e&&(this.result=e,this.updateDirection());const n=this.checkCollisionResponse;if(n&&!t.collisionResponse)return;if(!(this.collisionFilterGroup&t.collisionFilterMask&&t.collisionFilterGroup&this.collisionFilterMask))return;const r=gt,i=vt;for(let e=0,o=t.shapes.length;e<o;e++){const o=t.shapes[e];if((!n||o.collisionResponse)&&(t.quaternion.mult(t.shapeOrientations[e],i),t.quaternion.vmult(t.shapeOffsets[e],r),r.vadd(t.position,r),this.intersectShape(o,i,r,t),this.result.shouldStop))break}}intersectBodies(t,e){e&&(this.result=e,this.updateDirection());for(let e=0,n=t.length;!this.result.shouldStop&&e<n;e++)this.intersectBody(t[e])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(t,e,n,r){const i=function(t,e,n){n.vsub(t,Ft);const r=Ft.dot(e);e.scale(r,Bt),Bt.vadd(t,Bt);const i=n.distanceTo(Bt);return i}(this.from,this.direction,n);if(i>t.boundingSphereRadius)return;const o=this[t.type];o&&o.call(this,t,e,n,r,t)}_intersectBox(t,e,n,r,i){return this._intersectConvex(t.convexPolyhedronRepresentation,e,n,r,i)}_intersectPlane(t,e,n,r,i){const a=this.from,s=this.to,u=this.direction,l=new o(0,0,1);e.vmult(l,l);const c=new o;a.vsub(n,c);const h=c.dot(l);s.vsub(n,c);if(h*c.dot(l)>0)return;if(a.distanceTo(s)<h)return;const d=l.dot(u);if(Math.abs(d)<this.precision)return;const f=new o,p=new o,m=new o;a.vsub(n,f);const g=-l.dot(f)/d;u.scale(g,p),a.vadd(p,m),this.reportIntersection(l,m,i,r,-1)}getAABB(t){const{lowerBound:e,upperBound:n}=t,r=this.to,i=this.from;e.x=Math.min(r.x,i.x),e.y=Math.min(r.y,i.y),e.z=Math.min(r.z,i.z),n.x=Math.max(r.x,i.x),n.y=Math.max(r.y,i.y),n.z=Math.max(r.z,i.z)}_intersectHeightfield(t,e,n,r,i){t.data,t.elementSize;const o=Et;o.from.copy(this.from),o.to.copy(this.to),y.pointToLocalFrame(n,e,o.from,o.from),y.pointToLocalFrame(n,e,o.to,o.to),o.updateDirection();const a=At;let s,u,c,h;s=u=0,c=h=t.data.length-1;const d=new l;o.getAABB(d),t.getIndexOfPosition(d.lowerBound.x,d.lowerBound.y,a,!0),s=Math.max(s,a[0]),u=Math.max(u,a[1]),t.getIndexOfPosition(d.upperBound.x,d.upperBound.y,a,!0),c=Math.min(c,a[0]+1),h=Math.min(h,a[1]+1);for(let a=s;a<c;a++)for(let s=u;s<h;s++){if(this.result.shouldStop)return;if(t.getAabbAtIndex(a,s,d),d.overlapsRay(o)){if(t.getConvexTrianglePillar(a,s,!1),y.pointToWorldFrame(n,e,t.pillarOffset,St),this._intersectConvex(t.pillarConvex,e,St,r,i,_t),this.result.shouldStop)return;t.getConvexTrianglePillar(a,s,!0),y.pointToWorldFrame(n,e,t.pillarOffset,St),this._intersectConvex(t.pillarConvex,e,St,r,i,_t)}}}_intersectSphere(t,e,n,r,i){const o=this.from,a=this.to,s=t.radius,u=(a.x-o.x)**2+(a.y-o.y)**2+(a.z-o.z)**2,l=2*((a.x-o.x)*(o.x-n.x)+(a.y-o.y)*(o.y-n.y)+(a.z-o.z)*(o.z-n.z)),c=l**2-4*u*((o.x-n.x)**2+(o.y-n.y)**2+(o.z-n.z)**2-s**2),h=Mt,d=Ct;if(!(c<0))if(0===c)o.lerp(a,c,h),h.vsub(n,d),d.normalize(),this.reportIntersection(d,h,i,r,-1);else{const t=(-l-Math.sqrt(c))/(2*u),e=(-l+Math.sqrt(c))/(2*u);if(t>=0&&t<=1&&(o.lerp(a,t,h),h.vsub(n,d),d.normalize(),this.reportIntersection(d,h,i,r,-1)),this.result.shouldStop)return;e>=0&&e<=1&&(o.lerp(a,e,h),h.vsub(n,d),d.normalize(),this.reportIntersection(d,h,i,r,-1))}}_intersectConvex(t,e,n,r,i,o){const a=Tt,s=kt,u=o&&o.faceList||null,l=t.faces,c=t.vertices,h=t.faceNormals,d=this.direction,f=this.from,p=this.to,m=f.distanceTo(p),g=u?u.length:l.length,v=this.result;for(let t=0;!v.shouldStop&&t<g;t++){const o=u?u[t]:t,p=l[o],g=h[o],y=e,b=n;s.copy(c[p[0]]),y.vmult(s,s),s.vadd(b,s),s.vsub(f,s),y.vmult(g,a);const x=d.dot(a);if(Math.abs(x)<this.precision)continue;const w=a.dot(s)/x;if(!(w<0)){d.scale(w,yt),yt.vadd(f,yt),bt.copy(c[p[0]]),y.vmult(bt,bt),b.vadd(bt,bt);for(let t=1;!v.shouldStop&&t<p.length-1;t++){xt.copy(c[p[t]]),wt.copy(c[p[t+1]]),y.vmult(xt,xt),y.vmult(wt,wt),b.vadd(xt,xt),b.vadd(wt,wt);const e=yt.distanceTo(f);!ht.pointInTriangle(yt,bt,xt,wt)&&!ht.pointInTriangle(yt,xt,bt,wt)||e>m||this.reportIntersection(a,yt,i,r,o)}}}}_intersectTrimesh(t,e,n,r,i,o){const a=It,s=Dt,u=zt,l=kt,c=Nt,h=Pt,d=Ot,f=Rt,p=Lt,m=t.indices;t.vertices;const g=this.from,v=this.to,b=this.direction;u.position.copy(n),u.quaternion.copy(e),y.vectorToLocalFrame(n,e,b,c),y.pointToLocalFrame(n,e,g,h),y.pointToLocalFrame(n,e,v,d),d.x*=t.scale.x,d.y*=t.scale.y,d.z*=t.scale.z,h.x*=t.scale.x,h.y*=t.scale.y,h.z*=t.scale.z,d.vsub(h,c),c.normalize();const x=h.distanceSquared(d);t.tree.rayQuery(this,u,s);for(let o=0,u=s.length;!this.result.shouldStop&&o!==u;o++){const u=s[o];t.getNormal(u,a),t.getVertex(m[3*u],bt),bt.vsub(h,l);const d=c.dot(a),g=a.dot(l)/d;if(g<0)continue;c.scale(g,yt),yt.vadd(h,yt),t.getVertex(m[3*u+1],xt),t.getVertex(m[3*u+2],wt);const v=yt.distanceSquared(h);!ht.pointInTriangle(yt,xt,bt,wt)&&!ht.pointInTriangle(yt,bt,xt,wt)||v>x||(y.vectorToWorldFrame(e,a,p),y.pointToWorldFrame(n,e,yt,f),this.reportIntersection(p,f,i,r,u))}s.length=0}reportIntersection(t,e,n,r,i){const o=this.from,a=this.to,s=o.distanceTo(e),u=this.result;if(!(this.skipBackfaces&&t.dot(this.direction)>0))switch(u.hitFaceIndex=void 0!==i?i:-1,this.mode){case ht.ALL:this.hasHit=!0,u.set(o,a,t,e,n,r,s),u.hasHit=!0,this.callback(u);break;case ht.CLOSEST:(s<u.distance||!u.hasHit)&&(this.hasHit=!0,u.hasHit=!0,u.set(o,a,t,e,n,r,s));break;case ht.ANY:this.hasHit=!0,u.hasHit=!0,u.set(o,a,t,e,n,r,s),u.shouldStop=!0}}static pointInTriangle(t,e,n,r){r.vsub(e,Ft),n.vsub(e,pt),t.vsub(e,mt);const i=Ft.dot(Ft),o=Ft.dot(pt),a=Ft.dot(mt),s=pt.dot(pt),u=pt.dot(mt);let l,c;return(l=s*a-o*u)>=0&&(c=i*u-o*a)>=0&&l+c<i*s-o*o}}ht.CLOSEST=ut,ht.ANY=lt,ht.ALL=ct;const dt=new l,ft=[],pt=new o,mt=new o,gt=new o,vt=new p,yt=new o,bt=new o,xt=new o,wt=new o;new o,new tt;const _t={faceList:[0]},St=new o,Et=new ht,At=[],Mt=new o,Ct=new o,Tt=new o,kt=(new o,new o,new o),It=new o,Nt=new o,Pt=new o,Ot=new o,Lt=new o,Rt=new o;new l;const Dt=[],zt=new y,Ft=new o,Bt=new o;class Ut{static defaults(t,e){void 0===t&&(t={});for(let n in e)n in t||(t[n]=e[n]);return t}}class jt{constructor(t,e,n){void 0===n&&(n={}),n=Ut.defaults(n,{collideConnected:!0,wakeUpBodies:!0}),this.equations=[],this.bodyA=t,this.bodyB=e,this.id=jt.idCounter++,this.collideConnected=n.collideConnected,n.wakeUpBodies&&(t&&t.wakeUp(),e&&e.wakeUp())}update(){throw new Error("method update() not implmemented in this Constraint subclass!")}enable(){const t=this.equations;for(let e=0;e<t.length;e++)t[e].enabled=!0}disable(){const t=this.equations;for(let e=0;e<t.length;e++)t[e].enabled=!1}}jt.idCounter=0;class Vt{constructor(){this.spatial=new o,this.rotational=new o}multiplyElement(t){return t.spatial.dot(this.spatial)+t.rotational.dot(this.rotational)}multiplyVectors(t,e){return t.dot(this.spatial)+e.dot(this.rotational)}}class Ht{constructor(t,e,n,r){void 0===n&&(n=-1e6),void 0===r&&(r=1e6),this.id=Ht.idCounter++,this.minForce=n,this.maxForce=r,this.bi=t,this.bj=e,this.a=0,this.b=0,this.eps=0,this.jacobianElementA=new Vt,this.jacobianElementB=new Vt,this.enabled=!0,this.multiplier=0,this.setSpookParams(1e7,4,1/60)}setSpookParams(t,e,n){const r=e,i=t,o=n;this.a=4/(o*(1+4*r)),this.b=4*r/(1+4*r),this.eps=4/(o*o*i*(1+4*r))}computeB(t,e,n){const r=this.computeGW();return-this.computeGq()*t-r*e-this.computeGiMf()*n}computeGq(){const t=this.jacobianElementA,e=this.jacobianElementB,n=this.bi,r=this.bj,i=n.position,o=r.position;return t.spatial.dot(i)+e.spatial.dot(o)}computeGW(){const t=this.jacobianElementA,e=this.jacobianElementB,n=this.bi,r=this.bj,i=n.velocity,o=r.velocity,a=n.angularVelocity,s=r.angularVelocity;return t.multiplyVectors(i,a)+e.multiplyVectors(o,s)}computeGWlambda(){const t=this.jacobianElementA,e=this.jacobianElementB,n=this.bi,r=this.bj,i=n.vlambda,o=r.vlambda,a=n.wlambda,s=r.wlambda;return t.multiplyVectors(i,a)+e.multiplyVectors(o,s)}computeGiMf(){const t=this.jacobianElementA,e=this.jacobianElementB,n=this.bi,r=this.bj,i=n.force,o=n.torque,a=r.force,s=r.torque,u=n.invMassSolve,l=r.invMassSolve;return i.scale(u,Gt),a.scale(l,Wt),n.invInertiaWorldSolve.vmult(o,Xt),r.invInertiaWorldSolve.vmult(s,Yt),t.multiplyVectors(Gt,Xt)+e.multiplyVectors(Wt,Yt)}computeGiMGt(){const t=this.jacobianElementA,e=this.jacobianElementB,n=this.bi,r=this.bj,i=n.invMassSolve,o=r.invMassSolve,a=n.invInertiaWorldSolve,s=r.invInertiaWorldSolve;let u=i+o;return a.vmult(t.rotational,qt),u+=qt.dot(t.rotational),s.vmult(e.rotational,qt),u+=qt.dot(e.rotational),u}addToWlambda(t){const e=this.jacobianElementA,n=this.jacobianElementB,r=this.bi,i=this.bj,o=$t;r.vlambda.addScaledVector(r.invMassSolve*t,e.spatial,r.vlambda),i.vlambda.addScaledVector(i.invMassSolve*t,n.spatial,i.vlambda),r.invInertiaWorldSolve.vmult(e.rotational,o),r.wlambda.addScaledVector(t,o,r.wlambda),i.invInertiaWorldSolve.vmult(n.rotational,o),i.wlambda.addScaledVector(t,o,i.wlambda)}computeC(){return this.computeGiMGt()+this.eps}}Ht.idCounter=0;const Gt=new o,Wt=new o,Xt=new o,Yt=new o,qt=new o,$t=new o;class Kt extends Ht{constructor(t,e,n){void 0===n&&(n=1e6),super(t,e,0,n),this.restitution=0,this.ri=new o,this.rj=new o,this.ni=new o}computeB(t){const e=this.a,n=this.b,r=this.bi,i=this.bj,o=this.ri,a=this.rj,s=Zt,u=Qt,l=r.velocity,c=r.angularVelocity;r.force,r.torque;const h=i.velocity,d=i.angularVelocity;i.force,i.torque;const f=Jt,p=this.jacobianElementA,m=this.jacobianElementB,g=this.ni;o.cross(g,s),a.cross(g,u),g.negate(p.spatial),s.negate(p.rotational),m.spatial.copy(g),m.rotational.copy(u),f.copy(i.position),f.vadd(a,f),f.vsub(r.position,f),f.vsub(o,f);const v=g.dot(f),y=this.restitution+1;return-v*e-(y*h.dot(g)-y*l.dot(g)+d.dot(u)-c.dot(s))*n-t*this.computeGiMf()}getImpactVelocityAlongNormal(){const t=te,e=ee,n=ne,r=re,i=ie;return this.bi.position.vadd(this.ri,n),this.bj.position.vadd(this.rj,r),this.bi.getVelocityAtWorldPoint(n,t),this.bj.getVelocityAtWorldPoint(r,e),t.vsub(e,i),this.ni.dot(i)}}const Zt=new o,Qt=new o,Jt=new o,te=new o,ee=new o,ne=new o,re=new o,ie=new o;new o,new o;new o,new o;new o,new o;new o,new o;new o,new o;class oe extends Ht{constructor(t,e,n){super(t,e,-n,n),this.ri=new o,this.rj=new o,this.t=new o}computeB(t){this.a;const e=this.b;this.bi,this.bj;const n=this.ri,r=this.rj,i=ae,o=se,a=this.t;n.cross(a,i),r.cross(a,o);const s=this.jacobianElementA,u=this.jacobianElementB;a.negate(s.spatial),i.negate(s.rotational),u.spatial.copy(a),u.rotational.copy(o);return-this.computeGW()*e-t*this.computeGiMf()}}const ae=new o,se=new o;class ue{constructor(t,e,n){n=Ut.defaults(n,{friction:.3,restitution:.3,contactEquationStiffness:1e7,contactEquationRelaxation:3,frictionEquationStiffness:1e7,frictionEquationRelaxation:3}),this.id=ue.idCounter++,this.materials=[t,e],this.friction=n.friction,this.restitution=n.restitution,this.contactEquationStiffness=n.contactEquationStiffness,this.contactEquationRelaxation=n.contactEquationRelaxation,this.frictionEquationStiffness=n.frictionEquationStiffness,this.frictionEquationRelaxation=n.frictionEquationRelaxation}}ue.idCounter=0;class le{constructor(t){void 0===t&&(t={});let e="";"string"==typeof t&&(e=t,t={}),this.name=e,this.id=le.idCounter++,this.friction=void 0!==t.friction?t.friction:-1,this.restitution=void 0!==t.restitution?t.restitution:-1}}le.idCounter=0;new o,new o,new o,new o,new o,new o,new o,new o,new o,new o,new o;new o,new o;new o,new o,new o;new o,new o,new o;new ht,new o;new o,new o,new o(1,0,0),new o(0,1,0),new o(0,0,1),new o,new o,new o,new o;new o,new o,new o,new o;new o,new o,new o;new o,new o;new o,new o,new o,new o,new o,new o,new o;class ce extends v{constructor(){super({type:v.types.PLANE}),this.worldNormal=new o,this.worldNormalNeedsUpdate=!0,this.boundingSphereRadius=Number.MAX_VALUE}computeWorldNormal(t){const e=this.worldNormal;e.set(0,0,1),t.vmult(e,e),this.worldNormalNeedsUpdate=!1}calculateLocalInertia(t,e){return void 0===e&&(e=new o),e}volume(){return Number.MAX_VALUE}calculateWorldAABB(t,e,n,r){he.set(0,0,1),e.vmult(he,he);const i=Number.MAX_VALUE;n.set(-i,-i,-i),r.set(i,i,i),1===he.x?r.x=t.x:-1===he.x&&(n.x=t.x),1===he.y?r.y=t.y:-1===he.y&&(n.y=t.y),1===he.z?r.z=t.z:-1===he.z&&(n.z=t.z)}updateBoundingSphereRadius(){this.boundingSphereRadius=Number.MAX_VALUE}}const he=new o;new o,new o,new o,new o,new o,new o,new o,new o,new o;new o,new l;new o,new l,new o,new o,new o,new o,new o,new o,new o,new l,new o,new y,new l;class de{constructor(){this.equations=[]}solve(t,e){return 0}addEquation(t){!t.enabled||t.bi.isTrigger||t.bj.isTrigger||this.equations.push(t)}removeEquation(t){const e=this.equations,n=e.indexOf(t);-1!==n&&e.splice(n,1)}removeAllEquations(){this.equations.length=0}}class fe extends de{constructor(){super(),this.iterations=10,this.tolerance=1e-7}solve(t,e){let n=0;const r=this.iterations,i=this.tolerance*this.tolerance,o=this.equations,a=o.length,s=e.bodies,u=s.length,l=t;let c,h,d,f,p,m;if(0!==a)for(let t=0;t!==u;t++)s[t].updateSolveMassProperties();const g=me,v=ge,y=pe;g.length=a,v.length=a,y.length=a;for(let t=0;t!==a;t++){const e=o[t];y[t]=0,v[t]=e.computeB(l),g[t]=1/e.computeC()}if(0!==a){for(let t=0;t!==u;t++){const e=s[t],n=e.vlambda,r=e.wlambda;n.set(0,0,0),r.set(0,0,0)}for(n=0;n!==r;n++){f=0;for(let t=0;t!==a;t++){const e=o[t];c=v[t],h=g[t],m=y[t],p=e.computeGWlambda(),d=h*(c-p-e.eps*m),m+d<e.minForce?d=e.minForce-m:m+d>e.maxForce&&(d=e.maxForce-m),y[t]+=d,f+=d>0?d:-d,e.addToWlambda(d)}if(f*f<i)break}for(let t=0;t!==u;t++){const e=s[t],n=e.velocity,r=e.angularVelocity;e.vlambda.vmul(e.linearFactor,e.vlambda),n.vadd(e.vlambda,n),e.wlambda.vmul(e.angularFactor,e.wlambda),r.vadd(e.wlambda,r)}let t=o.length;const e=1/l;for(;t--;)o[t].multiplier=y[t]*e}return n}}const pe=[],me=[],ge=[];L.STATIC;class ve{constructor(){this.objects=[],this.type=Object}release(){const t=arguments.length;for(let e=0;e!==t;e++)this.objects.push(e<0||arguments.length<=e?void 0:arguments[e]);return this}get(){return 0===this.objects.length?this.constructObject():this.objects.pop()}constructObject(){throw new Error("constructObject() not implemented in this Pool subclass yet!")}resize(t){const e=this.objects;for(;e.length>t;)e.pop();for(;e.length<t;)e.push(this.constructObject());return this}}class ye extends ve{constructor(){super(...arguments),this.type=o}constructObject(){return new o}}const be=v.types.SPHERE,xe=v.types.SPHERE|v.types.PLANE,we=v.types.BOX|v.types.BOX,_e=v.types.SPHERE|v.types.BOX,Se=v.types.PLANE|v.types.BOX,Ee=v.types.CONVEXPOLYHEDRON,Ae=v.types.SPHERE|v.types.CONVEXPOLYHEDRON,Me=v.types.PLANE|v.types.CONVEXPOLYHEDRON,Ce=v.types.BOX|v.types.CONVEXPOLYHEDRON,Te=v.types.SPHERE|v.types.HEIGHTFIELD,ke=v.types.BOX|v.types.HEIGHTFIELD,Ie=v.types.CONVEXPOLYHEDRON|v.types.HEIGHTFIELD,Ne=v.types.PARTICLE|v.types.SPHERE,Pe=v.types.PLANE|v.types.PARTICLE,Oe=v.types.BOX|v.types.PARTICLE,Le=v.types.PARTICLE|v.types.CONVEXPOLYHEDRON,Re=v.types.CYLINDER,De=v.types.SPHERE|v.types.CYLINDER,ze=v.types.PLANE|v.types.CYLINDER,Fe=v.types.BOX|v.types.CYLINDER,Be=v.types.CONVEXPOLYHEDRON|v.types.CYLINDER,Ue=v.types.HEIGHTFIELD|v.types.CYLINDER,je=v.types.PARTICLE|v.types.CYLINDER,Ve=v.types.SPHERE|v.types.TRIMESH,He=v.types.PLANE|v.types.TRIMESH;class Ge{get[be](){return this.sphereSphere}get[xe](){return this.spherePlane}get[we](){return this.boxBox}get[_e](){return this.sphereBox}get[Se](){return this.planeBox}get[Ee](){return this.convexConvex}get[Ae](){return this.sphereConvex}get[Me](){return this.planeConvex}get[Ce](){return this.boxConvex}get[Te](){return this.sphereHeightfield}get[ke](){return this.boxHeightfield}get[Ie](){return this.convexHeightfield}get[Ne](){return this.sphereParticle}get[Pe](){return this.planeParticle}get[Oe](){return this.boxParticle}get[Le](){return this.convexParticle}get[Re](){return this.convexConvex}get[De](){return this.sphereConvex}get[ze](){return this.planeConvex}get[Fe](){return this.boxConvex}get[Be](){return this.convexConvex}get[Ue](){return this.heightfieldCylinder}get[je](){return this.particleCylinder}get[Ve](){return this.sphereTrimesh}get[He](){return this.planeTrimesh}constructor(t){this.contactPointPool=[],this.frictionEquationPool=[],this.result=[],this.frictionResult=[],this.v3pool=new ye,this.world=t,this.currentContactMaterial=t.defaultContactMaterial,this.enableFrictionReduction=!1}createContactEquation(t,e,n,r,i,o){let a;this.contactPointPool.length?(a=this.contactPointPool.pop(),a.bi=t,a.bj=e):a=new Kt(t,e),a.enabled=t.collisionResponse&&e.collisionResponse&&n.collisionResponse&&r.collisionResponse;const s=this.currentContactMaterial;a.restitution=s.restitution,a.setSpookParams(s.contactEquationStiffness,s.contactEquationRelaxation,this.world.dt);const u=n.material||t.material,l=r.material||e.material;return u&&l&&u.restitution>=0&&l.restitution>=0&&(a.restitution=u.restitution*l.restitution),a.si=i||n,a.sj=o||r,a}createFrictionEquationsFromContact(t,e){const n=t.bi,r=t.bj,i=t.si,o=t.sj,a=this.world,s=this.currentContactMaterial;let u=s.friction;const l=i.material||n.material,c=o.material||r.material;if(l&&c&&l.friction>=0&&c.friction>=0&&(u=l.friction*c.friction),u>0){const i=u*(a.frictionGravity||a.gravity).length();let o=n.invMass+r.invMass;o>0&&(o=1/o);const l=this.frictionEquationPool,c=l.length?l.pop():new oe(n,r,i*o),h=l.length?l.pop():new oe(n,r,i*o);return c.bi=h.bi=n,c.bj=h.bj=r,c.minForce=h.minForce=-i*o,c.maxForce=h.maxForce=i*o,c.ri.copy(t.ri),c.rj.copy(t.rj),h.ri.copy(t.ri),h.rj.copy(t.rj),t.ni.tangents(c.t,h.t),c.setSpookParams(s.frictionEquationStiffness,s.frictionEquationRelaxation,a.dt),h.setSpookParams(s.frictionEquationStiffness,s.frictionEquationRelaxation,a.dt),c.enabled=h.enabled=t.enabled,e.push(c,h),!0}return!1}createFrictionFromAverage(t){let e=this.result[this.result.length-1];if(!this.createFrictionEquationsFromContact(e,this.frictionResult)||1===t)return;const n=this.frictionResult[this.frictionResult.length-2],r=this.frictionResult[this.frictionResult.length-1];We.setZero(),Xe.setZero(),Ye.setZero();const i=e.bi;e.bj;for(let n=0;n!==t;n++)e=this.result[this.result.length-1-n],e.bi!==i?(We.vadd(e.ni,We),Xe.vadd(e.ri,Xe),Ye.vadd(e.rj,Ye)):(We.vsub(e.ni,We),Xe.vadd(e.rj,Xe),Ye.vadd(e.ri,Ye));const o=1/t;Xe.scale(o,n.ri),Ye.scale(o,n.rj),r.ri.copy(n.ri),r.rj.copy(n.rj),We.normalize(),We.tangents(n.t,r.t)}getContacts(t,e,n,r,i,o,a){this.contactPointPool=i,this.frictionEquationPool=a,this.result=r,this.frictionResult=o;const s=Ke,u=Ze,l=qe,c=$e;for(let r=0,i=t.length;r!==i;r++){const i=t[r],o=e[r];let a=null;i.material&&o.material&&(a=n.getContactMaterial(i.material,o.material)||null);const h=i.type&L.KINEMATIC&&o.type&L.STATIC||i.type&L.STATIC&&o.type&L.KINEMATIC||i.type&L.KINEMATIC&&o.type&L.KINEMATIC;for(let t=0;t<i.shapes.length;t++){i.quaternion.mult(i.shapeOrientations[t],s),i.quaternion.vmult(i.shapeOffsets[t],l),l.vadd(i.position,l);const e=i.shapes[t];for(let t=0;t<o.shapes.length;t++){o.quaternion.mult(o.shapeOrientations[t],u),o.quaternion.vmult(o.shapeOffsets[t],c),c.vadd(o.position,c);const r=o.shapes[t];if(!(e.collisionFilterMask&r.collisionFilterGroup&&r.collisionFilterMask&e.collisionFilterGroup))continue;if(l.distanceTo(c)>e.boundingSphereRadius+r.boundingSphereRadius)continue;let d=null;e.material&&r.material&&(d=n.getContactMaterial(e.material,r.material)||null),this.currentContactMaterial=d||a||n.defaultContactMaterial;const f=this[e.type|r.type];if(f){let t=!1;t=e.type<r.type?f.call(this,e,r,l,c,s,u,i,o,e,r,h):f.call(this,r,e,c,l,u,s,o,i,e,r,h),t&&h&&(n.shapeOverlapKeeper.set(e.id,r.id),n.bodyOverlapKeeper.set(i.id,o.id))}}}}}sphereSphere(t,e,n,r,i,o,a,s,u,l,c){if(c)return n.distanceSquared(r)<(t.radius+e.radius)**2;const h=this.createContactEquation(a,s,t,e,u,l);r.vsub(n,h.ni),h.ni.normalize(),h.ri.copy(h.ni),h.rj.copy(h.ni),h.ri.scale(t.radius,h.ri),h.rj.scale(-e.radius,h.rj),h.ri.vadd(n,h.ri),h.ri.vsub(a.position,h.ri),h.rj.vadd(r,h.rj),h.rj.vsub(s.position,h.rj),this.result.push(h),this.createFrictionEquationsFromContact(h,this.frictionResult)}spherePlane(t,e,n,r,i,o,a,s,u,l,c){const h=this.createContactEquation(a,s,t,e,u,l);if(h.ni.set(0,0,1),o.vmult(h.ni,h.ni),h.ni.negate(h.ni),h.ni.normalize(),h.ni.scale(t.radius,h.ri),n.vsub(r,vn),h.ni.scale(h.ni.dot(vn),yn),vn.vsub(yn,h.rj),-vn.dot(h.ni)<=t.radius){if(c)return!0;const t=h.ri,e=h.rj;t.vadd(n,t),t.vsub(a.position,t),e.vadd(r,e),e.vsub(s.position,e),this.result.push(h),this.createFrictionEquationsFromContact(h,this.frictionResult)}}boxBox(t,e,n,r,i,o,a,s,u,l,c){return t.convexPolyhedronRepresentation.material=t.material,e.convexPolyhedronRepresentation.material=e.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,this.convexConvex(t.convexPolyhedronRepresentation,e.convexPolyhedronRepresentation,n,r,i,o,a,s,t,e,c)}sphereBox(t,e,n,r,i,o,a,s,u,l,c){const h=this.v3pool,d=Cn;n.vsub(r,Sn),e.getSideNormals(d,o);const f=t.radius;let p=!1;const m=kn,g=In,v=Nn;let y=null,b=0,x=0,w=0,_=null;for(let t=0,e=d.length;t!==e&&!1===p;t++){const e=En;e.copy(d[t]);const n=e.length();e.normalize();const r=Sn.dot(e);if(r<n+f&&r>0){const i=An,o=Mn;i.copy(d[(t+1)%3]),o.copy(d[(t+2)%3]);const a=i.length(),s=o.length();i.normalize(),o.normalize();const u=Sn.dot(i),l=Sn.dot(o);if(u<a&&u>-a&&l<s&&l>-s){const t=Math.abs(r-n-f);if((null===_||t<_)&&(_=t,x=u,w=l,y=n,m.copy(e),g.copy(i),v.copy(o),b++,c))return!0}}}if(b){p=!0;const i=this.createContactEquation(a,s,t,e,u,l);m.scale(-f,i.ri),i.ni.copy(m),i.ni.negate(i.ni),m.scale(y,m),g.scale(x,g),m.vadd(g,m),v.scale(w,v),m.vadd(v,i.rj),i.ri.vadd(n,i.ri),i.ri.vsub(a.position,i.ri),i.rj.vadd(r,i.rj),i.rj.vsub(s.position,i.rj),this.result.push(i),this.createFrictionEquationsFromContact(i,this.frictionResult)}let S=h.get();const E=Tn;for(let i=0;2!==i&&!p;i++)for(let o=0;2!==o&&!p;o++)for(let h=0;2!==h&&!p;h++)if(S.set(0,0,0),i?S.vadd(d[0],S):S.vsub(d[0],S),o?S.vadd(d[1],S):S.vsub(d[1],S),h?S.vadd(d[2],S):S.vsub(d[2],S),r.vadd(S,E),E.vsub(n,E),E.lengthSquared()<f*f){if(c)return!0;p=!0;const i=this.createContactEquation(a,s,t,e,u,l);i.ri.copy(E),i.ri.normalize(),i.ni.copy(i.ri),i.ri.scale(f,i.ri),i.rj.copy(S),i.ri.vadd(n,i.ri),i.ri.vsub(a.position,i.ri),i.rj.vadd(r,i.rj),i.rj.vsub(s.position,i.rj),this.result.push(i),this.createFrictionEquationsFromContact(i,this.frictionResult)}h.release(S),S=null;const A=h.get(),M=h.get(),C=h.get(),T=h.get(),k=h.get(),I=d.length;for(let i=0;i!==I&&!p;i++)for(let o=0;o!==I&&!p;o++)if(i%3!=o%3){d[o].cross(d[i],A),A.normalize(),d[i].vadd(d[o],M),C.copy(n),C.vsub(M,C),C.vsub(r,C);const h=C.dot(A);A.scale(h,T);let m=0;for(;m===i%3||m===o%3;)m++;k.copy(n),k.vsub(T,k),k.vsub(M,k),k.vsub(r,k);const g=Math.abs(h),v=k.length();if(g<d[m].length()&&v<f){if(c)return!0;p=!0;const i=this.createContactEquation(a,s,t,e,u,l);M.vadd(T,i.rj),i.rj.copy(i.rj),k.negate(i.ni),i.ni.normalize(),i.ri.copy(i.rj),i.ri.vadd(r,i.ri),i.ri.vsub(n,i.ri),i.ri.normalize(),i.ri.scale(f,i.ri),i.ri.vadd(n,i.ri),i.ri.vsub(a.position,i.ri),i.rj.vadd(r,i.rj),i.rj.vsub(s.position,i.rj),this.result.push(i),this.createFrictionEquationsFromContact(i,this.frictionResult)}}h.release(A,M,C,T,k)}planeBox(t,e,n,r,i,o,a,s,u,l,c){return e.convexPolyhedronRepresentation.material=e.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,e.convexPolyhedronRepresentation.id=e.id,this.planeConvex(t,e.convexPolyhedronRepresentation,n,r,i,o,a,s,t,e,c)}convexConvex(t,e,n,r,i,o,a,s,u,l,c,h,d){const f=Xn;if(!(n.distanceTo(r)>t.boundingSphereRadius+e.boundingSphereRadius)&&t.findSeparatingAxis(e,n,i,r,o,f,h,d)){const h=[],d=Yn;t.clipAgainstHull(n,i,e,r,o,f,-100,100,h);let p=0;for(let i=0;i!==h.length;i++){if(c)return!0;const o=this.createContactEquation(a,s,t,e,u,l),m=o.ri,g=o.rj;f.negate(o.ni),h[i].normal.negate(d),d.scale(h[i].depth,d),h[i].point.vadd(d,m),g.copy(h[i].point),m.vsub(n,m),g.vsub(r,g),m.vadd(n,m),m.vsub(a.position,m),g.vadd(r,g),g.vsub(s.position,g),this.result.push(o),p++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(o,this.frictionResult)}this.enableFrictionReduction&&p&&this.createFrictionFromAverage(p)}}sphereConvex(t,e,n,r,i,o,a,s,u,l,c){const h=this.v3pool;n.vsub(r,Pn);const d=e.faceNormals,f=e.faces,p=e.vertices,m=t.radius;let g=!1;for(let i=0;i!==p.length;i++){const h=p[i],d=Dn;o.vmult(h,d),r.vadd(d,d);const f=Rn;if(d.vsub(n,f),f.lengthSquared()<m*m){if(c)return!0;g=!0;const i=this.createContactEquation(a,s,t,e,u,l);return i.ri.copy(f),i.ri.normalize(),i.ni.copy(i.ri),i.ri.scale(m,i.ri),d.vsub(r,i.rj),i.ri.vadd(n,i.ri),i.ri.vsub(a.position,i.ri),i.rj.vadd(r,i.rj),i.rj.vsub(s.position,i.rj),this.result.push(i),void this.createFrictionEquationsFromContact(i,this.frictionResult)}}for(let i=0,v=f.length;i!==v&&!1===g;i++){const v=d[i],y=f[i],b=zn;o.vmult(v,b);const x=Fn;o.vmult(p[y[0]],x),x.vadd(r,x);const w=Bn;b.scale(-m,w),n.vadd(w,w);const _=Un;w.vsub(x,_);const S=_.dot(b),E=jn;if(n.vsub(x,E),S<0&&E.dot(b)>0){const i=[];for(let t=0,e=y.length;t!==e;t++){const e=h.get();o.vmult(p[y[t]],e),r.vadd(e,e),i.push(e)}if(_n(i,b,n)){if(c)return!0;g=!0;const o=this.createContactEquation(a,s,t,e,u,l);b.scale(-m,o.ri),b.negate(o.ni);const d=h.get();b.scale(-S,d);const f=h.get();b.scale(-m,f),n.vsub(r,o.rj),o.rj.vadd(f,o.rj),o.rj.vadd(d,o.rj),o.rj.vadd(r,o.rj),o.rj.vsub(s.position,o.rj),o.ri.vadd(n,o.ri),o.ri.vsub(a.position,o.ri),h.release(d),h.release(f),this.result.push(o),this.createFrictionEquationsFromContact(o,this.frictionResult);for(let t=0,e=i.length;t!==e;t++)h.release(i[t]);return}for(let d=0;d!==y.length;d++){const f=h.get(),g=h.get();o.vmult(p[y[(d+1)%y.length]],f),o.vmult(p[y[(d+2)%y.length]],g),r.vadd(f,f),r.vadd(g,g);const v=On;g.vsub(f,v);const b=Ln;v.unit(b);const x=h.get(),w=h.get();n.vsub(f,w);const _=w.dot(b);b.scale(_,x),x.vadd(f,x);const S=h.get();if(x.vsub(n,S),_>0&&_*_<v.lengthSquared()&&S.lengthSquared()<m*m){if(c)return!0;const o=this.createContactEquation(a,s,t,e,u,l);x.vsub(r,o.rj),x.vsub(n,o.ni),o.ni.normalize(),o.ni.scale(m,o.ri),o.rj.vadd(r,o.rj),o.rj.vsub(s.position,o.rj),o.ri.vadd(n,o.ri),o.ri.vsub(a.position,o.ri),this.result.push(o),this.createFrictionEquationsFromContact(o,this.frictionResult);for(let t=0,e=i.length;t!==e;t++)h.release(i[t]);return h.release(f),h.release(g),h.release(x),h.release(S),void h.release(w)}h.release(f),h.release(g),h.release(x),h.release(S),h.release(w)}for(let t=0,e=i.length;t!==e;t++)h.release(i[t])}}}planeConvex(t,e,n,r,i,o,a,s,u,l,c){const h=Vn,d=Hn;d.set(0,0,1),i.vmult(d,d);let f=0;const p=Gn;for(let i=0;i!==e.vertices.length;i++){h.copy(e.vertices[i]),o.vmult(h,h),r.vadd(h,h),h.vsub(n,p);if(d.dot(p)<=0){if(c)return!0;const i=this.createContactEquation(a,s,t,e,u,l),o=Wn;d.scale(d.dot(p),o),h.vsub(o,o),o.vsub(n,i.ri),i.ni.copy(d),h.vsub(r,i.rj),i.ri.vadd(n,i.ri),i.ri.vsub(a.position,i.ri),i.rj.vadd(r,i.rj),i.rj.vsub(s.position,i.rj),this.result.push(i),f++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(i,this.frictionResult)}}this.enableFrictionReduction&&f&&this.createFrictionFromAverage(f)}boxConvex(t,e,n,r,i,o,a,s,u,l,c){return t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexConvex(t.convexPolyhedronRepresentation,e,n,r,i,o,a,s,t,e,c)}sphereHeightfield(t,e,n,r,i,o,a,s,u,l,c){const h=e.data,d=t.radius,f=e.elementSize,p=sr,m=ar;y.pointToLocalFrame(r,o,n,m);let g=Math.floor((m.x-d)/f)-1,v=Math.ceil((m.x+d)/f)+1,b=Math.floor((m.y-d)/f)-1,x=Math.ceil((m.y+d)/f)+1;if(v<0||x<0||g>h.length||b>h[0].length)return;g<0&&(g=0),v<0&&(v=0),b<0&&(b=0),x<0&&(x=0),g>=h.length&&(g=h.length-1),v>=h.length&&(v=h.length-1),x>=h[0].length&&(x=h[0].length-1),b>=h[0].length&&(b=h[0].length-1);const w=[];e.getRectMinMax(g,b,v,x,w);const _=w[0],S=w[1];if(m.z-d>S||m.z+d<_)return;const E=this.result;for(let u=g;u<v;u++)for(let l=b;l<x;l++){const h=E.length;let d=!1;if(e.getConvexTrianglePillar(u,l,!1),y.pointToWorldFrame(r,o,e.pillarOffset,p),n.distanceTo(p)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(d=this.sphereConvex(t,e.pillarConvex,n,p,i,o,a,s,t,e,c)),c&&d)return!0;if(e.getConvexTrianglePillar(u,l,!0),y.pointToWorldFrame(r,o,e.pillarOffset,p),n.distanceTo(p)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(d=this.sphereConvex(t,e.pillarConvex,n,p,i,o,a,s,t,e,c)),c&&d)return!0;if(E.length-h>2)return}}boxHeightfield(t,e,n,r,i,o,a,s,u,l,c){return t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexHeightfield(t.convexPolyhedronRepresentation,e,n,r,i,o,a,s,t,e,c)}convexHeightfield(t,e,n,r,i,o,a,s,u,l,c){const h=e.data,d=e.elementSize,f=t.boundingSphereRadius,p=ir,m=or,g=rr;y.pointToLocalFrame(r,o,n,g);let v=Math.floor((g.x-f)/d)-1,b=Math.ceil((g.x+f)/d)+1,x=Math.floor((g.y-f)/d)-1,w=Math.ceil((g.y+f)/d)+1;if(b<0||w<0||v>h.length||x>h[0].length)return;v<0&&(v=0),b<0&&(b=0),x<0&&(x=0),w<0&&(w=0),v>=h.length&&(v=h.length-1),b>=h.length&&(b=h.length-1),w>=h[0].length&&(w=h[0].length-1),x>=h[0].length&&(x=h[0].length-1);const _=[];e.getRectMinMax(v,x,b,w,_);const S=_[0],E=_[1];if(!(g.z-f>E||g.z+f<S))for(let u=v;u<b;u++)for(let l=x;l<w;l++){let h=!1;if(e.getConvexTrianglePillar(u,l,!1),y.pointToWorldFrame(r,o,e.pillarOffset,p),n.distanceTo(p)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(h=this.convexConvex(t,e.pillarConvex,n,p,i,o,a,s,null,null,c,m,null)),c&&h)return!0;if(e.getConvexTrianglePillar(u,l,!0),y.pointToWorldFrame(r,o,e.pillarOffset,p),n.distanceTo(p)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(h=this.convexConvex(t,e.pillarConvex,n,p,i,o,a,s,null,null,c,m,null)),c&&h)return!0}}sphereParticle(t,e,n,r,i,o,a,s,u,l,c){const h=Zn;h.set(0,0,1),r.vsub(n,h);if(h.lengthSquared()<=t.radius*t.radius){if(c)return!0;const n=this.createContactEquation(s,a,e,t,u,l);h.normalize(),n.rj.copy(h),n.rj.scale(t.radius,n.rj),n.ni.copy(h),n.ni.negate(n.ni),n.ri.set(0,0,0),this.result.push(n),this.createFrictionEquationsFromContact(n,this.frictionResult)}}planeParticle(t,e,n,r,i,o,a,s,u,l,c){const h=qn;h.set(0,0,1),a.quaternion.vmult(h,h);const d=$n;r.vsub(a.position,d);if(h.dot(d)<=0){if(c)return!0;const n=this.createContactEquation(s,a,e,t,u,l);n.ni.copy(h),n.ni.negate(n.ni),n.ri.set(0,0,0);const i=Kn;h.scale(h.dot(r),i),r.vsub(i,i),n.rj.copy(i),this.result.push(n),this.createFrictionEquationsFromContact(n,this.frictionResult)}}boxParticle(t,e,n,r,i,o,a,s,u,l,c){return t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexParticle(t.convexPolyhedronRepresentation,e,n,r,i,o,a,s,t,e,c)}convexParticle(t,e,n,r,i,o,a,s,u,l,c){let h=-1;const d=tr,f=nr;let p=null;const m=Jn;if(m.copy(r),m.vsub(n,m),i.conjugate(Qn),Qn.vmult(m,m),t.pointIsInside(m)){t.worldVerticesNeedsUpdate&&t.computeWorldVertices(n,i),t.worldFaceNormalsNeedsUpdate&&t.computeWorldFaceNormals(i);for(let e=0,n=t.faces.length;e!==n;e++){const n=[t.worldVertices[t.faces[e][0]]],i=t.worldFaceNormals[e];r.vsub(n[0],er);const o=-i.dot(er);if(null===p||Math.abs(o)<Math.abs(p)){if(c)return!0;p=o,h=e,d.copy(i)}}if(-1!==h){const i=this.createContactEquation(s,a,e,t,u,l);d.scale(p,f),f.vadd(r,f),f.vsub(n,f),i.rj.copy(f),d.negate(i.ni),i.ri.set(0,0,0);const o=i.ri,c=i.rj;o.vadd(r,o),o.vsub(s.position,o),c.vadd(n,c),c.vsub(a.position,c),this.result.push(i),this.createFrictionEquationsFromContact(i,this.frictionResult)}else console.warn("Point found inside convex, but did not find penetrating face!")}}heightfieldCylinder(t,e,n,r,i,o,a,s,u,l,c){return this.convexHeightfield(e,t,r,n,o,i,s,a,u,l,c)}particleCylinder(t,e,n,r,i,o,a,s,u,l,c){return this.convexParticle(e,t,r,n,o,i,s,a,u,l,c)}sphereTrimesh(t,e,n,r,i,o,a,s,u,l,c){const h=an,d=sn,f=un,p=ln,m=cn,g=hn,v=mn,b=on,x=nn,w=gn;y.pointToLocalFrame(r,o,n,m);const _=t.radius;v.lowerBound.set(m.x-_,m.y-_,m.z-_),v.upperBound.set(m.x+_,m.y+_,m.z+_),e.getTrianglesInAABB(v,w);const S=rn,E=t.radius*t.radius;for(let i=0;i<w.length;i++)for(let h=0;h<3;h++)if(e.getVertex(e.indices[3*w[i]+h],S),S.vsub(m,x),x.lengthSquared()<=E){if(b.copy(S),y.pointToWorldFrame(r,o,b,S),S.vsub(n,x),c)return!0;let i=this.createContactEquation(a,s,t,e,u,l);i.ni.copy(x),i.ni.normalize(),i.ri.copy(i.ni),i.ri.scale(t.radius,i.ri),i.ri.vadd(n,i.ri),i.ri.vsub(a.position,i.ri),i.rj.copy(S),i.rj.vsub(s.position,i.rj),this.result.push(i),this.createFrictionEquationsFromContact(i,this.frictionResult)}for(let i=0;i<w.length;i++)for(let v=0;v<3;v++){e.getVertex(e.indices[3*w[i]+v],h),e.getVertex(e.indices[3*w[i]+(v+1)%3],d),d.vsub(h,f),m.vsub(d,g);const b=g.dot(f);m.vsub(h,g);let x=g.dot(f);if(x>0&&b<0){m.vsub(h,g),p.copy(f),p.normalize(),x=g.dot(p),p.scale(x,g),g.vadd(h,g);if(g.distanceTo(m)<t.radius){if(c)return!0;const i=this.createContactEquation(a,s,t,e,u,l);g.vsub(m,i.ni),i.ni.normalize(),i.ni.scale(t.radius,i.ri),i.ri.vadd(n,i.ri),i.ri.vsub(a.position,i.ri),y.pointToWorldFrame(r,o,g,g),g.vsub(s.position,i.rj),y.vectorToWorldFrame(o,i.ni,i.ni),y.vectorToWorldFrame(o,i.ri,i.ri),this.result.push(i),this.createFrictionEquationsFromContact(i,this.frictionResult)}}}const A=dn,M=fn,C=pn,T=en;for(let i=0,h=w.length;i!==h;i++){e.getTriangleVertices(w[i],A,M,C),e.getNormal(w[i],T),m.vsub(A,g);let h=g.dot(T);if(T.scale(h,g),m.vsub(g,g),h=g.distanceTo(m),ht.pointInTriangle(g,A,M,C)&&h<t.radius){if(c)return!0;let i=this.createContactEquation(a,s,t,e,u,l);g.vsub(m,i.ni),i.ni.normalize(),i.ni.scale(t.radius,i.ri),i.ri.vadd(n,i.ri),i.ri.vsub(a.position,i.ri),y.pointToWorldFrame(r,o,g,g),g.vsub(s.position,i.rj),y.vectorToWorldFrame(o,i.ni,i.ni),y.vectorToWorldFrame(o,i.ri,i.ri),this.result.push(i),this.createFrictionEquationsFromContact(i,this.frictionResult)}}w.length=0}planeTrimesh(t,e,n,r,i,a,s,u,l,c,h){const d=new o,f=Qe;f.set(0,0,1),i.vmult(f,f);for(let i=0;i<e.vertices.length/3;i++){e.getVertex(i,d);const p=new o;p.copy(d),y.pointToWorldFrame(r,a,p,d);const m=Je;d.vsub(n,m);if(f.dot(m)<=0){if(h)return!0;const n=this.createContactEquation(s,u,t,e,l,c);n.ni.copy(f);const r=tn;f.scale(m.dot(f),r),d.vsub(r,r),n.ri.copy(r),n.ri.vsub(s.position,n.ri),n.rj.copy(d),n.rj.vsub(u.position,n.rj),this.result.push(n),this.createFrictionEquationsFromContact(n,this.frictionResult)}}}}const We=new o,Xe=new o,Ye=new o,qe=new o,$e=new o,Ke=new p,Ze=new p,Qe=new o,Je=new o,tn=new o,en=new o,nn=new o;new o;const rn=new o,on=new o,an=new o,sn=new o,un=new o,ln=new o,cn=new o,hn=new o,dn=new o,fn=new o,pn=new o,mn=new l,gn=[],vn=new o,yn=new o,bn=new o,xn=new o,wn=new o;function _n(t,e,n){let r=null;const i=t.length;for(let o=0;o!==i;o++){const a=t[o],s=bn;t[(o+1)%i].vsub(a,s);const u=xn;s.cross(e,u);const l=wn;n.vsub(a,l);const c=u.dot(l);if(!(null===r||c>0&&!0===r||c<=0&&!1===r))return!1;null===r&&(r=c>0)}return!0}const Sn=new o,En=new o,An=new o,Mn=new o,Cn=[new o,new o,new o,new o,new o,new o],Tn=new o,kn=new o,In=new o,Nn=new o,Pn=new o,On=new o,Ln=new o,Rn=new o,Dn=new o,zn=new o,Fn=new o,Bn=new o,Un=new o,jn=new o;new o,new o;const Vn=new o,Hn=new o,Gn=new o,Wn=new o,Xn=new o,Yn=new o,qn=new o,$n=new o,Kn=new o,Zn=new o,Qn=new p,Jn=new o;new o;const tr=new o,er=new o,nr=new o,rr=new o,ir=new o,or=[0],ar=new o,sr=new o;class ur{constructor(){this.current=[],this.previous=[]}getKey(t,e){if(e<t){const n=e;e=t,t=n}return t<<16|e}set(t,e){const n=this.getKey(t,e),r=this.current;let i=0;for(;n>r[i];)i++;if(n!==r[i]){for(let t=r.length-1;t>=i;t--)r[t+1]=r[t];r[i]=n}}tick(){const t=this.current;this.current=this.previous,this.previous=t,this.current.length=0}getDiff(t,e){const n=this.current,r=this.previous,i=n.length,o=r.length;let a=0;for(let e=0;e<i;e++){let i=!1;const o=n[e];for(;o>r[a];)a++;i=o===r[a],i||lr(t,o)}a=0;for(let t=0;t<o;t++){let i=!1;const o=r[t];for(;o>n[a];)a++;i=n[a]===o,i||lr(e,o)}}}function lr(t,e){t.push((4294901760&e)>>16,65535&e)}const cr=(t,e)=>t<e?`${t}-${e}`:`${e}-${t}`;class hr{constructor(){this.data={keys:[]}}get(t,e){const n=cr(t,e);return this.data[n]}set(t,e,n){const r=cr(t,e);this.get(t,e)||this.data.keys.push(r),this.data[r]=n}delete(t,e){const n=cr(t,e),r=this.data.keys.indexOf(n);-1!==r&&this.data.keys.splice(r,1),delete this.data[n]}reset(){const t=this.data,e=t.keys;for(;e.length>0;){delete t[e.pop()]}}}class dr extends f{constructor(t){void 0===t&&(t={}),super(),this.dt=-1,this.allowSleep=!!t.allowSleep,this.contacts=[],this.frictionEquations=[],this.quatNormalizeSkip=void 0!==t.quatNormalizeSkip?t.quatNormalizeSkip:0,this.quatNormalizeFast=void 0!==t.quatNormalizeFast&&t.quatNormalizeFast,this.time=0,this.stepnumber=0,this.default_dt=1/60,this.nextId=0,this.gravity=new o,t.gravity&&this.gravity.copy(t.gravity),t.frictionGravity&&(this.frictionGravity=new o,this.frictionGravity.copy(t.frictionGravity)),this.broadphase=void 0!==t.broadphase?t.broadphase:new J,this.bodies=[],this.hasActiveBodies=!1,this.solver=void 0!==t.solver?t.solver:new fe,this.constraints=[],this.narrowphase=new Ge(this),this.collisionMatrix=new d,this.collisionMatrixPrevious=new d,this.bodyOverlapKeeper=new ur,this.shapeOverlapKeeper=new ur,this.contactmaterials=[],this.contactMaterialTable=new hr,this.defaultMaterial=new le("default"),this.defaultContactMaterial=new ue(this.defaultMaterial,this.defaultMaterial,{friction:.3,restitution:0}),this.doProfiling=!1,this.profile={solve:0,makeContactConstraints:0,broadphase:0,integrate:0,narrowphase:0},this.accumulator=0,this.subsystems=[],this.addBodyEvent={type:"addBody",body:null},this.removeBodyEvent={type:"removeBody",body:null},this.idToBodyMap={},this.broadphase.setWorld(this)}getContactMaterial(t,e){return this.contactMaterialTable.get(t.id,e.id)}collisionMatrixTick(){const t=this.collisionMatrixPrevious;this.collisionMatrixPrevious=this.collisionMatrix,this.collisionMatrix=t,this.collisionMatrix.reset(),this.bodyOverlapKeeper.tick(),this.shapeOverlapKeeper.tick()}addConstraint(t){this.constraints.push(t)}removeConstraint(t){const e=this.constraints.indexOf(t);-1!==e&&this.constraints.splice(e,1)}rayTest(t,e,n){n instanceof tt?this.raycastClosest(t,e,{skipBackfaces:!0},n):this.raycastAll(t,e,{skipBackfaces:!0},n)}raycastAll(t,e,n,r){return void 0===n&&(n={}),n.mode=ht.ALL,n.from=t,n.to=e,n.callback=r,fr.intersectWorld(this,n)}raycastAny(t,e,n,r){return void 0===n&&(n={}),n.mode=ht.ANY,n.from=t,n.to=e,n.result=r,fr.intersectWorld(this,n)}raycastClosest(t,e,n,r){return void 0===n&&(n={}),n.mode=ht.CLOSEST,n.from=t,n.to=e,n.result=r,fr.intersectWorld(this,n)}addBody(t){this.bodies.includes(t)||(t.index=this.bodies.length,this.bodies.push(t),t.world=this,t.initPosition.copy(t.position),t.initVelocity.copy(t.velocity),t.timeLastSleepy=this.time,t instanceof L&&(t.initAngularVelocity.copy(t.angularVelocity),t.initQuaternion.copy(t.quaternion)),this.collisionMatrix.setNumObjects(this.bodies.length),this.addBodyEvent.body=t,this.idToBodyMap[t.id]=t,this.dispatchEvent(this.addBodyEvent))}removeBody(t){t.world=null;const e=this.bodies.length-1,n=this.bodies,r=n.indexOf(t);if(-1!==r){n.splice(r,1);for(let t=0;t!==n.length;t++)n[t].index=t;this.collisionMatrix.setNumObjects(e),this.removeBodyEvent.body=t,delete this.idToBodyMap[t.id],this.dispatchEvent(this.removeBodyEvent)}}getBodyById(t){return this.idToBodyMap[t]}getShapeById(t){const e=this.bodies;for(let n=0;n<e.length;n++){const r=e[n].shapes;for(let e=0;e<r.length;e++){const n=r[e];if(n.id===t)return n}}return null}addContactMaterial(t){this.contactmaterials.push(t),this.contactMaterialTable.set(t.materials[0].id,t.materials[1].id,t)}removeContactMaterial(t){const e=this.contactmaterials.indexOf(t);-1!==e&&(this.contactmaterials.splice(e,1),this.contactMaterialTable.delete(t.materials[0].id,t.materials[1].id))}fixedStep(t,e){void 0===t&&(t=1/60),void 0===e&&(e=10);const n=pr.now()/1e3;if(this.lastCallTime){const r=n-this.lastCallTime;this.step(t,r,e)}else this.step(t,void 0,e);this.lastCallTime=n}step(t,e,n){if(void 0===n&&(n=10),void 0===e)this.internalStep(t),this.time+=t;else{this.accumulator+=e;const r=pr.now();let i=0;for(;this.accumulator>=t&&i<n&&(this.internalStep(t),this.accumulator-=t,i++,!(pr.now()-r>1e3*t)););this.accumulator=this.accumulator%t;const o=this.accumulator/t;for(let t=0;t!==this.bodies.length;t++){const e=this.bodies[t];e.previousPosition.lerp(e.position,o,e.interpolatedPosition),e.previousQuaternion.slerp(e.quaternion,o,e.interpolatedQuaternion),e.previousQuaternion.normalize()}this.time+=e}}internalStep(t){this.dt=t;const e=this.contacts,n=xr,r=wr,i=this.bodies.length,o=this.bodies,a=this.solver,s=this.gravity,u=this.doProfiling,l=this.profile,c=L.DYNAMIC;let h=-1/0;const d=this.constraints,f=br;s.length();const p=s.x,m=s.y,g=s.z;let v=0;for(u&&(h=pr.now()),v=0;v!==i;v++){const t=o[v];if(t.type===c){const e=t.force,n=t.mass;e.x+=n*p,e.y+=n*m,e.z+=n*g}}for(let t=0,e=this.subsystems.length;t!==e;t++)this.subsystems[t].update();u&&(h=pr.now()),n.length=0,r.length=0,this.broadphase.collisionPairs(this,n,r),u&&(l.broadphase=pr.now()-h);let y=d.length;for(v=0;v!==y;v++){const t=d[v];if(!t.collideConnected)for(let e=n.length-1;e>=0;e-=1)(t.bodyA===n[e]&&t.bodyB===r[e]||t.bodyB===n[e]&&t.bodyA===r[e])&&(n.splice(e,1),r.splice(e,1))}this.collisionMatrixTick(),u&&(h=pr.now());const b=yr,x=e.length;for(v=0;v!==x;v++)b.push(e[v]);e.length=0;const w=this.frictionEquations.length;for(v=0;v!==w;v++)f.push(this.frictionEquations[v]);for(this.frictionEquations.length=0,this.narrowphase.getContacts(n,r,this,e,b,this.frictionEquations,f),u&&(l.narrowphase=pr.now()-h),u&&(h=pr.now()),v=0;v<this.frictionEquations.length;v++)a.addEquation(this.frictionEquations[v]);const _=e.length;for(let t=0;t!==_;t++){const n=e[t],r=n.bi,i=n.bj,o=n.si,s=n.sj;let u;if(u=r.material&&i.material&&this.getContactMaterial(r.material,i.material)||this.defaultContactMaterial,u.friction,r.material&&i.material&&(r.material.friction>=0&&i.material.friction>=0&&(r.material.friction,i.material.friction),r.material.restitution>=0&&i.material.restitution>=0&&(n.restitution=r.material.restitution*i.material.restitution)),a.addEquation(n),r.allowSleep&&r.type===L.DYNAMIC&&r.sleepState===L.SLEEPING&&i.sleepState===L.AWAKE&&i.type!==L.STATIC){i.velocity.lengthSquared()+i.angularVelocity.lengthSquared()>=2*i.sleepSpeedLimit**2&&(r.wakeUpAfterNarrowphase=!0)}if(i.allowSleep&&i.type===L.DYNAMIC&&i.sleepState===L.SLEEPING&&r.sleepState===L.AWAKE&&r.type!==L.STATIC){r.velocity.lengthSquared()+r.angularVelocity.lengthSquared()>=2*r.sleepSpeedLimit**2&&(i.wakeUpAfterNarrowphase=!0)}this.collisionMatrix.set(r,i,!0),this.collisionMatrixPrevious.get(r,i)||(vr.body=i,vr.contact=n,r.dispatchEvent(vr),vr.body=r,i.dispatchEvent(vr)),this.bodyOverlapKeeper.set(r.id,i.id),this.shapeOverlapKeeper.set(o.id,s.id)}for(this.emitContactEvents(),u&&(l.makeContactConstraints=pr.now()-h,h=pr.now()),v=0;v!==i;v++){const t=o[v];t.wakeUpAfterNarrowphase&&(t.wakeUp(),t.wakeUpAfterNarrowphase=!1)}for(y=d.length,v=0;v!==y;v++){const t=d[v];t.update();for(let e=0,n=t.equations.length;e!==n;e++){const n=t.equations[e];a.addEquation(n)}}a.solve(t,this),u&&(l.solve=pr.now()-h),a.removeAllEquations();const S=Math.pow;for(v=0;v!==i;v++){const e=o[v];if(e.type&c){const n=S(1-e.linearDamping,t),r=e.velocity;r.scale(n,r);const i=e.angularVelocity;if(i){const n=S(1-e.angularDamping,t);i.scale(n,i)}}}this.dispatchEvent(gr),u&&(h=pr.now());const E=this.stepnumber%(this.quatNormalizeSkip+1)==0,A=this.quatNormalizeFast;for(v=0;v!==i;v++)o[v].integrate(t,E,A);this.clearForces(),this.broadphase.dirty=!0,u&&(l.integrate=pr.now()-h),this.stepnumber+=1,this.dispatchEvent(mr);let M=!0;if(this.allowSleep)for(M=!1,v=0;v!==i;v++){const t=o[v];t.sleepTick(this.time),t.sleepState!==L.SLEEPING&&(M=!0)}this.hasActiveBodies=M}emitContactEvents(){const t=this.hasAnyEventListener("beginContact"),e=this.hasAnyEventListener("endContact");if((t||e)&&this.bodyOverlapKeeper.getDiff(_r,Sr),t){for(let t=0,e=_r.length;t<e;t+=2)Er.bodyA=this.getBodyById(_r[t]),Er.bodyB=this.getBodyById(_r[t+1]),this.dispatchEvent(Er);Er.bodyA=Er.bodyB=null}if(e){for(let t=0,e=Sr.length;t<e;t+=2)Ar.bodyA=this.getBodyById(Sr[t]),Ar.bodyB=this.getBodyById(Sr[t+1]),this.dispatchEvent(Ar);Ar.bodyA=Ar.bodyB=null}_r.length=Sr.length=0;const n=this.hasAnyEventListener("beginShapeContact"),r=this.hasAnyEventListener("endShapeContact");if((n||r)&&this.shapeOverlapKeeper.getDiff(_r,Sr),n){for(let t=0,e=_r.length;t<e;t+=2){const e=this.getShapeById(_r[t]),n=this.getShapeById(_r[t+1]);Mr.shapeA=e,Mr.shapeB=n,e&&(Mr.bodyA=e.body),n&&(Mr.bodyB=n.body),this.dispatchEvent(Mr)}Mr.bodyA=Mr.bodyB=Mr.shapeA=Mr.shapeB=null}if(r){for(let t=0,e=Sr.length;t<e;t+=2){const e=this.getShapeById(Sr[t]),n=this.getShapeById(Sr[t+1]);Cr.shapeA=e,Cr.shapeB=n,e&&(Cr.bodyA=e.body),n&&(Cr.bodyB=n.body),this.dispatchEvent(Cr)}Cr.bodyA=Cr.bodyB=Cr.shapeA=Cr.shapeB=null}}clearForces(){const t=this.bodies,e=t.length;for(let n=0;n!==e;n++){const e=t[n];e.force,e.torque,e.force.set(0,0,0),e.torque.set(0,0,0)}}}new l;const fr=new ht,pr=globalThis.performance||{};if(!pr.now){let t=Date.now();pr.timing&&pr.timing.navigationStart&&(t=pr.timing.navigationStart),pr.now=()=>Date.now()-t}new o;const mr={type:"postStep"},gr={type:"preStep"},vr={type:L.COLLIDE_EVENT_NAME,body:null,contact:null},yr=[],br=[],xr=[],wr=[],_r=[],Sr=[],Er={type:"beginContact",bodyA:null,bodyB:null},Ar={type:"endContact",bodyA:null,bodyB:null},Mr={type:"beginShapeContact",bodyA:null,bodyB:null,shapeA:null,shapeB:null},Cr={type:"endShapeContact",bodyA:null,bodyB:null,shapeA:null,shapeB:null}},15659:(t,e,n)=>{var r=n(51031),i={};for(var o in r)r.hasOwnProperty(o)&&(i[r[o]]=o);var a=t.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var s in a)if(a.hasOwnProperty(s)){if(!("channels"in a[s]))throw new Error("missing channels property: "+s);if(!("labels"in a[s]))throw new Error("missing channel labels property: "+s);if(a[s].labels.length!==a[s].channels)throw new Error("channel and label counts mismatch: "+s);var u=a[s].channels,l=a[s].labels;delete a[s].channels,delete a[s].labels,Object.defineProperty(a[s],"channels",{value:u}),Object.defineProperty(a[s],"labels",{value:l})}a.rgb.hsl=function(t){var e,n,r=t[0]/255,i=t[1]/255,o=t[2]/255,a=Math.min(r,i,o),s=Math.max(r,i,o),u=s-a;return s===a?e=0:r===s?e=(i-o)/u:i===s?e=2+(o-r)/u:o===s&&(e=4+(r-i)/u),(e=Math.min(60*e,360))<0&&(e+=360),n=(a+s)/2,[e,100*(s===a?0:n<=.5?u/(s+a):u/(2-s-a)),100*n]},a.rgb.hsv=function(t){var e,n,r,i,o,a=t[0]/255,s=t[1]/255,u=t[2]/255,l=Math.max(a,s,u),c=l-Math.min(a,s,u),h=function(t){return(l-t)/6/c+.5};return 0===c?i=o=0:(o=c/l,e=h(a),n=h(s),r=h(u),a===l?i=r-n:s===l?i=1/3+e-r:u===l&&(i=2/3+n-e),i<0?i+=1:i>1&&(i-=1)),[360*i,100*o,100*l]},a.rgb.hwb=function(t){var e=t[0],n=t[1],r=t[2];return[a.rgb.hsl(t)[0],100*(1/255*Math.min(e,Math.min(n,r))),100*(r=1-1/255*Math.max(e,Math.max(n,r)))]},a.rgb.cmyk=function(t){var e,n=t[0]/255,r=t[1]/255,i=t[2]/255;return[100*((1-n-(e=Math.min(1-n,1-r,1-i)))/(1-e)||0),100*((1-r-e)/(1-e)||0),100*((1-i-e)/(1-e)||0),100*e]},a.rgb.keyword=function(t){var e=i[t];if(e)return e;var n,o,a,s=1/0;for(var u in r)if(r.hasOwnProperty(u)){var l=r[u],c=(o=t,a=l,Math.pow(o[0]-a[0],2)+Math.pow(o[1]-a[1],2)+Math.pow(o[2]-a[2],2));c<s&&(s=c,n=u)}return n},a.keyword.rgb=function(t){return r[t]},a.rgb.xyz=function(t){var e=t[0]/255,n=t[1]/255,r=t[2]/255;return[100*(.4124*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)),100*(.2126*e+.7152*n+.0722*r),100*(.0193*e+.1192*n+.9505*r)]},a.rgb.lab=function(t){var e=a.rgb.xyz(t),n=e[0],r=e[1],i=e[2];return r/=100,i/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(n-r),200*(r-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))]},a.hsl.rgb=function(t){var e,n,r,i,o,a=t[0]/360,s=t[1]/100,u=t[2]/100;if(0===s)return[o=255*u,o,o];e=2*u-(n=u<.5?u*(1+s):u+s-u*s),i=[0,0,0];for(var l=0;l<3;l++)(r=a+1/3*-(l-1))<0&&r++,r>1&&r--,o=6*r<1?e+6*(n-e)*r:2*r<1?n:3*r<2?e+(n-e)*(2/3-r)*6:e,i[l]=255*o;return i},a.hsl.hsv=function(t){var e=t[0],n=t[1]/100,r=t[2]/100,i=n,o=Math.max(r,.01);return n*=(r*=2)<=1?r:2-r,i*=o<=1?o:2-o,[e,100*(0===r?2*i/(o+i):2*n/(r+n)),100*((r+n)/2)]},a.hsv.rgb=function(t){var e=t[0]/60,n=t[1]/100,r=t[2]/100,i=Math.floor(e)%6,o=e-Math.floor(e),a=255*r*(1-n),s=255*r*(1-n*o),u=255*r*(1-n*(1-o));switch(r*=255,i){case 0:return[r,u,a];case 1:return[s,r,a];case 2:return[a,r,u];case 3:return[a,s,r];case 4:return[u,a,r];case 5:return[r,a,s]}},a.hsv.hsl=function(t){var e,n,r,i=t[0],o=t[1]/100,a=t[2]/100,s=Math.max(a,.01);return r=(2-o)*a,n=o*s,[i,100*(n=(n/=(e=(2-o)*s)<=1?e:2-e)||0),100*(r/=2)]},a.hwb.rgb=function(t){var e,n,r,i,o,a,s,u=t[0]/360,l=t[1]/100,c=t[2]/100,h=l+c;switch(h>1&&(l/=h,c/=h),r=6*u-(e=Math.floor(6*u)),1&e&&(r=1-r),i=l+r*((n=1-c)-l),e){default:case 6:case 0:o=n,a=i,s=l;break;case 1:o=i,a=n,s=l;break;case 2:o=l,a=n,s=i;break;case 3:o=l,a=i,s=n;break;case 4:o=i,a=l,s=n;break;case 5:o=n,a=l,s=i}return[255*o,255*a,255*s]},a.cmyk.rgb=function(t){var e=t[0]/100,n=t[1]/100,r=t[2]/100,i=t[3]/100;return[255*(1-Math.min(1,e*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i))]},a.xyz.rgb=function(t){var e,n,r,i=t[0]/100,o=t[1]/100,a=t[2]/100;return n=-.9689*i+1.8758*o+.0415*a,r=.0557*i+-.204*o+1.057*a,e=(e=3.2406*i+-1.5372*o+-.4986*a)>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,[255*(e=Math.min(Math.max(0,e),1)),255*(n=Math.min(Math.max(0,n),1)),255*(r=Math.min(Math.max(0,r),1))]},a.xyz.lab=function(t){var e=t[0],n=t[1],r=t[2];return n/=100,r/=108.883,e=(e/=95.047)>.008856?Math.pow(e,1/3):7.787*e+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(e-n),200*(n-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]},a.lab.xyz=function(t){var e,n,r,i=t[0];e=t[1]/500+(n=(i+16)/116),r=n-t[2]/200;var o=Math.pow(n,3),a=Math.pow(e,3),s=Math.pow(r,3);return n=o>.008856?o:(n-16/116)/7.787,e=a>.008856?a:(e-16/116)/7.787,r=s>.008856?s:(r-16/116)/7.787,[e*=95.047,n*=100,r*=108.883]},a.lab.lch=function(t){var e,n=t[0],r=t[1],i=t[2];return(e=360*Math.atan2(i,r)/2/Math.PI)<0&&(e+=360),[n,Math.sqrt(r*r+i*i),e]},a.lch.lab=function(t){var e,n=t[0],r=t[1];return e=t[2]/360*2*Math.PI,[n,r*Math.cos(e),r*Math.sin(e)]},a.rgb.ansi16=function(t){var e=t[0],n=t[1],r=t[2],i=1 in arguments?arguments[1]:a.rgb.hsv(t)[2];if(0===(i=Math.round(i/50)))return 30;var o=30+(Math.round(r/255)<<2|Math.round(n/255)<<1|Math.round(e/255));return 2===i&&(o+=60),o},a.hsv.ansi16=function(t){return a.rgb.ansi16(a.hsv.rgb(t),t[2])},a.rgb.ansi256=function(t){var e=t[0],n=t[1],r=t[2];return e===n&&n===r?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},a.ansi16.rgb=function(t){var e=t%10;if(0===e||7===e)return t>50&&(e+=3.5),[e=e/10.5*255,e,e];var n=.5*(1+~~(t>50));return[(1&e)*n*255,(e>>1&1)*n*255,(e>>2&1)*n*255]},a.ansi256.rgb=function(t){if(t>=232){var e=10*(t-232)+8;return[e,e,e]}var n;return t-=16,[Math.floor(t/36)/5*255,Math.floor((n=t%36)/6)/5*255,n%6/5*255]},a.rgb.hex=function(t){var e=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},a.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var n=e[0];3===e[0].length&&(n=n.split("").map((function(t){return t+t})).join(""));var r=parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},a.rgb.hcg=function(t){var e,n=t[0]/255,r=t[1]/255,i=t[2]/255,o=Math.max(Math.max(n,r),i),a=Math.min(Math.min(n,r),i),s=o-a;return e=s<=0?0:o===n?(r-i)/s%6:o===r?2+(i-n)/s:4+(n-r)/s+4,e/=6,[360*(e%=1),100*s,100*(s<1?a/(1-s):0)]},a.hsl.hcg=function(t){var e=t[1]/100,n=t[2]/100,r=1,i=0;return(r=n<.5?2*e*n:2*e*(1-n))<1&&(i=(n-.5*r)/(1-r)),[t[0],100*r,100*i]},a.hsv.hcg=function(t){var e=t[1]/100,n=t[2]/100,r=e*n,i=0;return r<1&&(i=(n-r)/(1-r)),[t[0],100*r,100*i]},a.hcg.rgb=function(t){var e=t[0]/360,n=t[1]/100,r=t[2]/100;if(0===n)return[255*r,255*r,255*r];var i,o=[0,0,0],a=e%1*6,s=a%1,u=1-s;switch(Math.floor(a)){case 0:o[0]=1,o[1]=s,o[2]=0;break;case 1:o[0]=u,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=s;break;case 3:o[0]=0,o[1]=u,o[2]=1;break;case 4:o[0]=s,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=u}return i=(1-n)*r,[255*(n*o[0]+i),255*(n*o[1]+i),255*(n*o[2]+i)]},a.hcg.hsv=function(t){var e=t[1]/100,n=e+t[2]/100*(1-e),r=0;return n>0&&(r=e/n),[t[0],100*r,100*n]},a.hcg.hsl=function(t){var e=t[1]/100,n=t[2]/100*(1-e)+.5*e,r=0;return n>0&&n<.5?r=e/(2*n):n>=.5&&n<1&&(r=e/(2*(1-n))),[t[0],100*r,100*n]},a.hcg.hwb=function(t){var e=t[1]/100,n=e+t[2]/100*(1-e);return[t[0],100*(n-e),100*(1-n)]},a.hwb.hcg=function(t){var e=t[1]/100,n=1-t[2]/100,r=n-e,i=0;return r<1&&(i=(n-r)/(1-r)),[t[0],100*r,100*i]},a.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},a.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},a.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},a.gray.hsl=a.gray.hsv=function(t){return[0,0,t[0]]},a.gray.hwb=function(t){return[0,100,t[0]]},a.gray.cmyk=function(t){return[0,0,0,t[0]]},a.gray.lab=function(t){return[t[0],0,0]},a.gray.hex=function(t){var e=255&Math.round(t[0]/100*255),n=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(n.length)+n},a.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}},10734:(t,e,n)=>{var r=n(15659),i=n(8507),o={};Object.keys(r).forEach((function(t){o[t]={},Object.defineProperty(o[t],"channels",{value:r[t].channels}),Object.defineProperty(o[t],"labels",{value:r[t].labels});var e=i(t);Object.keys(e).forEach((function(n){var r=e[n];o[t][n]=function(t){var e=function(e){if(null==e)return e;arguments.length>1&&(e=Array.prototype.slice.call(arguments));var n=t(e);if("object"==typeof n)for(var r=n.length,i=0;i<r;i++)n[i]=Math.round(n[i]);return n};return"conversion"in t&&(e.conversion=t.conversion),e}(r),o[t][n].raw=function(t){var e=function(e){return null==e?e:(arguments.length>1&&(e=Array.prototype.slice.call(arguments)),t(e))};return"conversion"in t&&(e.conversion=t.conversion),e}(r)}))})),t.exports=o},51031:t=>{"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},8507:(t,e,n)=>{var r=n(15659);function i(t){var e=function(){for(var t={},e=Object.keys(r),n=e.length,i=0;i<n;i++)t[e[i]]={distance:-1,parent:null};return t}(),n=[t];for(e[t].distance=0;n.length;)for(var i=n.pop(),o=Object.keys(r[i]),a=o.length,s=0;s<a;s++){var u=o[s],l=e[u];-1===l.distance&&(l.distance=e[i].distance+1,l.parent=i,n.unshift(u))}return e}function o(t,e){return function(n){return e(t(n))}}function a(t,e){for(var n=[e[t].parent,t],i=r[e[t].parent][t],a=e[t].parent;e[a].parent;)n.unshift(e[a].parent),i=o(r[e[a].parent][a],i),a=e[a].parent;return i.conversion=n,i}t.exports=function(t){for(var e=i(t),n={},r=Object.keys(e),o=r.length,s=0;s<o;s++){var u=r[s];null!==e[u].parent&&(n[u]=a(u,e))}return n}},8156:t=>{"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},28854:(t,e,n)=>{var r=n(8156),i=n(19872),o=Object.hasOwnProperty,a=Object.create(null);for(var s in r)o.call(r,s)&&(a[r[s]]=s);var u=t.exports={to:{},get:{}};function l(t,e,n){return Math.min(Math.max(e,t),n)}function c(t){var e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}u.get=function(t){var e,n;switch(t.substring(0,3).toLowerCase()){case"hsl":e=u.get.hsl(t),n="hsl";break;case"hwb":e=u.get.hwb(t),n="hwb";break;default:e=u.get.rgb(t),n="rgb"}return e?{model:n,value:e}:null},u.get.rgb=function(t){if(!t)return null;var e,n,i,a=[0,0,0,1];if(e=t.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(i=e[2],e=e[1],n=0;n<3;n++){var s=2*n;a[n]=parseInt(e.slice(s,s+2),16)}i&&(a[3]=parseInt(i,16)/255)}else if(e=t.match(/^#([a-f0-9]{3,4})$/i)){for(i=(e=e[1])[3],n=0;n<3;n++)a[n]=parseInt(e[n]+e[n],16);i&&(a[3]=parseInt(i+i,16)/255)}else if(e=t.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(n=0;n<3;n++)a[n]=parseInt(e[n+1],0);e[4]&&(e[5]?a[3]=.01*parseFloat(e[4]):a[3]=parseFloat(e[4]))}else{if(!(e=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(e=t.match(/^(\w+)$/))?"transparent"===e[1]?[0,0,0,0]:o.call(r,e[1])?((a=r[e[1]])[3]=1,a):null:null;for(n=0;n<3;n++)a[n]=Math.round(2.55*parseFloat(e[n+1]));e[4]&&(e[5]?a[3]=.01*parseFloat(e[4]):a[3]=parseFloat(e[4]))}for(n=0;n<3;n++)a[n]=l(a[n],0,255);return a[3]=l(a[3],0,1),a},u.get.hsl=function(t){if(!t)return null;var e=t.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(e){var n=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,l(parseFloat(e[2]),0,100),l(parseFloat(e[3]),0,100),l(isNaN(n)?1:n,0,1)]}return null},u.get.hwb=function(t){if(!t)return null;var e=t.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(e){var n=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,l(parseFloat(e[2]),0,100),l(parseFloat(e[3]),0,100),l(isNaN(n)?1:n,0,1)]}return null},u.to.hex=function(){var t=i(arguments);return"#"+c(t[0])+c(t[1])+c(t[2])+(t[3]<1?c(Math.round(255*t[3])):"")},u.to.rgb=function(){var t=i(arguments);return t.length<4||1===t[3]?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"},u.to.rgb.percent=function(){var t=i(arguments),e=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),r=Math.round(t[2]/255*100);return t.length<4||1===t[3]?"rgb("+e+"%, "+n+"%, "+r+"%)":"rgba("+e+"%, "+n+"%, "+r+"%, "+t[3]+")"},u.to.hsl=function(){var t=i(arguments);return t.length<4||1===t[3]?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"},u.to.hwb=function(){var t=i(arguments),e="";return t.length>=4&&1!==t[3]&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"},u.to.keyword=function(t){return a[t.slice(0,3)]}},2520:(t,e,n)=>{"use strict";var r=n(28854),i=n(10734),o=[].slice,a=["keyword","gray","hex"],s={};Object.keys(i).forEach((function(t){s[o.call(i[t].labels).sort().join("")]=t}));var u={};function l(t,e){if(!(this instanceof l))return new l(t,e);if(e&&e in a&&(e=null),e&&!(e in i))throw new Error("Unknown model: "+e);var n,c;if(null==t)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof l)this.model=t.model,this.color=t.color.slice(),this.valpha=t.valpha;else if("string"==typeof t){var h=r.get(t);if(null===h)throw new Error("Unable to parse color from string: "+t);this.model=h.model,c=i[this.model].channels,this.color=h.value.slice(0,c),this.valpha="number"==typeof h.value[c]?h.value[c]:1}else if(t.length){this.model=e||"rgb",c=i[this.model].channels;var f=o.call(t,0,c);this.color=d(f,c),this.valpha="number"==typeof t[c]?t[c]:1}else if("number"==typeof t)t&=16777215,this.model="rgb",this.color=[t>>16&255,t>>8&255,255&t],this.valpha=1;else{this.valpha=1;var p=Object.keys(t);"alpha"in t&&(p.splice(p.indexOf("alpha"),1),this.valpha="number"==typeof t.alpha?t.alpha:0);var m=p.sort().join("");if(!(m in s))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=s[m];var g=i[this.model].labels,v=[];for(n=0;n<g.length;n++)v.push(t[g[n]]);this.color=d(v)}if(u[this.model])for(c=i[this.model].channels,n=0;n<c;n++){var y=u[this.model][n];y&&(this.color[n]=y(this.color[n]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function c(t,e,n){return(t=Array.isArray(t)?t:[t]).forEach((function(t){(u[t]||(u[t]=[]))[e]=n})),t=t[0],function(r){var i;return arguments.length?(n&&(r=n(r)),(i=this[t]()).color[e]=r,i):(i=this[t]().color[e],n&&(i=n(i)),i)}}function h(t){return function(e){return Math.max(0,Math.min(t,e))}}function d(t,e){for(var n=0;n<e;n++)"number"!=typeof t[n]&&(t[n]=0);return t}l.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(t){var e=this.model in r.to?this:this.rgb(),n=1===(e=e.round("number"==typeof t?t:1)).valpha?e.color:e.color.concat(this.valpha);return r.to[e.model](n)},percentString:function(t){var e=this.rgb().round("number"==typeof t?t:1),n=1===e.valpha?e.color:e.color.concat(this.valpha);return r.to.rgb.percent(n)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var t={},e=i[this.model].channels,n=i[this.model].labels,r=0;r<e;r++)t[n[r]]=this.color[r];return 1!==this.valpha&&(t.alpha=this.valpha),t},unitArray:function(){var t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,1!==this.valpha&&t.push(this.valpha),t},unitObject:function(){var t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,1!==this.valpha&&(t.alpha=this.valpha),t},round:function(t){return t=Math.max(t||0,0),new l(this.color.map(function(t){return function(e){return function(t,e){return Number(t.toFixed(e))}(e,t)}}(t)).concat(this.valpha),this.model)},alpha:function(t){return arguments.length?new l(this.color.concat(Math.max(0,Math.min(1,t))),this.model):this.valpha},red:c("rgb",0,h(255)),green:c("rgb",1,h(255)),blue:c("rgb",2,h(255)),hue:c(["hsl","hsv","hsl","hwb","hcg"],0,(function(t){return(t%360+360)%360})),saturationl:c("hsl",1,h(100)),lightness:c("hsl",2,h(100)),saturationv:c("hsv",1,h(100)),value:c("hsv",2,h(100)),chroma:c("hcg",1,h(100)),gray:c("hcg",2,h(100)),white:c("hwb",1,h(100)),wblack:c("hwb",2,h(100)),cyan:c("cmyk",0,h(100)),magenta:c("cmyk",1,h(100)),yellow:c("cmyk",2,h(100)),black:c("cmyk",3,h(100)),x:c("xyz",0,h(100)),y:c("xyz",1,h(100)),z:c("xyz",2,h(100)),l:c("lab",0,h(100)),a:c("lab",1),b:c("lab",2),keyword:function(t){return arguments.length?new l(t):i[this.model].keyword(this.color)},hex:function(t){return arguments.length?new l(t):r.to.hex(this.rgb().round().color)},rgbNumber:function(){var t=this.rgb().color;return(255&t[0])<<16|(255&t[1])<<8|255&t[2]},luminosity:function(){for(var t=this.rgb().color,e=[],n=0;n<t.length;n++){var r=t[n]/255;e[n]=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),n=t.luminosity();return e>n?(e+.05)/(n+.05):(n+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},isDark:function(){var t=this.rgb().color;return(299*t[0]+587*t[1]+114*t[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var t=this.rgb(),e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten:function(t){var e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken:function(t){var e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate:function(t){var e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate:function(t){var e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten:function(t){var e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken:function(t){var e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale:function(){var t=this.rgb().color,e=.3*t[0]+.59*t[1]+.11*t[2];return l.rgb(e,e,e)},fade:function(t){return this.alpha(this.valpha-this.valpha*t)},opaquer:function(t){return this.alpha(this.valpha+this.valpha*t)},rotate:function(t){var e=this.hsl(),n=e.color[0];return n=(n=(n+t)%360)<0?360+n:n,e.color[0]=n,e},mix:function(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);var n=t.rgb(),r=this.rgb(),i=void 0===e?.5:e,o=2*i-1,a=n.alpha()-r.alpha(),s=((o*a==-1?o:(o+a)/(1+o*a))+1)/2,u=1-s;return l.rgb(s*n.red()+u*r.red(),s*n.green()+u*r.green(),s*n.blue()+u*r.blue(),n.alpha()*i+r.alpha()*(1-i))}},Object.keys(i).forEach((function(t){if(-1===a.indexOf(t)){var e=i[t].channels;l.prototype[t]=function(){if(this.model===t)return new l(this);if(arguments.length)return new l(arguments,t);var n,r="number"==typeof arguments[e]?e:this.valpha;return new l((n=i[this.model][t].raw(this.color),Array.isArray(n)?n:[n]).concat(r),t)},l[t]=function(n){return"number"==typeof n&&(n=d(o.call(arguments),e)),new l(n,t)}}})),t.exports=l},99877:(t,e,n)=>{"use strict";function r(t,e){var n,r=1;function i(){var i,o,a=n.length,s=0,u=0;for(i=0;i<a;++i)s+=(o=n[i]).x,u+=o.y;for(s=(s/a-t)*r,u=(u/a-e)*r,i=0;i<a;++i)(o=n[i]).x-=s,o.y-=u}return null==t&&(t=0),null==e&&(e=0),i.initialize=function(t){n=t},i.x=function(e){return arguments.length?(t=+e,i):t},i.y=function(t){return arguments.length?(e=+t,i):e},i.strength=function(t){return arguments.length?(r=+t,i):r},i}n.r(e),n.d(e,{forceCenter:()=>r,forceCollide:()=>l,forceLink:()=>d,forceManyBody:()=>W,forceRadial:()=>X,forceSimulation:()=>G,forceX:()=>Y,forceY:()=>q});var i=n(2847);function o(t){return function(){return t}}function a(t){return 1e-6*(t()-.5)}function s(t){return t.x+t.vx}function u(t){return t.y+t.vy}function l(t){var e,n,r,l=1,c=1;function h(){for(var t,o,h,f,p,m,g,v=e.length,y=0;y<c;++y)for(o=(0,i.A)(e,s,u).visitAfter(d),t=0;t<v;++t)h=e[t],m=n[h.index],g=m*m,f=h.x+h.vx,p=h.y+h.vy,o.visit(b);function b(t,e,n,i,o){var s=t.data,u=t.r,c=m+u;if(!s)return e>f+c||i<f-c||n>p+c||o<p-c;if(s.index>h.index){var d=f-s.x-s.vx,v=p-s.y-s.vy,y=d*d+v*v;y<c*c&&(0===d&&(y+=(d=a(r))*d),0===v&&(y+=(v=a(r))*v),y=(c-(y=Math.sqrt(y)))/y*l,h.vx+=(d*=y)*(c=(u*=u)/(g+u)),h.vy+=(v*=y)*c,s.vx-=d*(c=1-c),s.vy-=v*c)}}}function d(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function f(){if(e){var r,i,o=e.length;for(n=new Array(o),r=0;r<o;++r)i=e[r],n[i.index]=+t(i,r,e)}}return"function"!=typeof t&&(t=o(null==t?1:+t)),h.initialize=function(t,n){e=t,r=n,f()},h.iterations=function(t){return arguments.length?(c=+t,h):c},h.strength=function(t){return arguments.length?(l=+t,h):l},h.radius=function(e){return arguments.length?(t="function"==typeof e?e:o(+e),f(),h):t},h}function c(t){return t.index}function h(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function d(t){var e,n,r,i,s,u,l=c,d=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},f=o(30),p=1;function m(r){for(var i=0,o=t.length;i<p;++i)for(var l,c,h,d,f,m,g,v=0;v<o;++v)c=(l=t[v]).source,d=(h=l.target).x+h.vx-c.x-c.vx||a(u),f=h.y+h.vy-c.y-c.vy||a(u),d*=m=((m=Math.sqrt(d*d+f*f))-n[v])/m*r*e[v],f*=m,h.vx-=d*(g=s[v]),h.vy-=f*g,c.vx+=d*(g=1-g),c.vy+=f*g}function g(){if(r){var o,a,u=r.length,c=t.length,d=new Map(r.map(((t,e)=>[l(t,e,r),t])));for(o=0,i=new Array(u);o<c;++o)(a=t[o]).index=o,"object"!=typeof a.source&&(a.source=h(d,a.source)),"object"!=typeof a.target&&(a.target=h(d,a.target)),i[a.source.index]=(i[a.source.index]||0)+1,i[a.target.index]=(i[a.target.index]||0)+1;for(o=0,s=new Array(c);o<c;++o)a=t[o],s[o]=i[a.source.index]/(i[a.source.index]+i[a.target.index]);e=new Array(c),v(),n=new Array(c),y()}}function v(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+d(t[n],n,t)}function y(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+f(t[e],e,t)}return null==t&&(t=[]),m.initialize=function(t,e){r=t,u=e,g()},m.links=function(e){return arguments.length?(t=e,g(),m):t},m.id=function(t){return arguments.length?(l=t,m):l},m.iterations=function(t){return arguments.length?(p=+t,m):p},m.strength=function(t){return arguments.length?(d="function"==typeof t?t:o(+t),v(),m):d},m.distance=function(t){return arguments.length?(f="function"==typeof t?t:o(+t),y(),m):f},m}var f={value:()=>{}};function p(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new m(r)}function m(t){this._=t}function g(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function v(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=f,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}m.prototype=p.prototype={constructor:m,on:function(t,e){var n,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),a=-1,s=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<s;)if(n=(t=o[a]).type)i[n]=v(i[n],t.name,e);else if(null==e)for(n in i)i[n]=v(i[n],t.name,null);return this}for(;++a<s;)if((n=(t=o[a]).type)&&(n=g(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new m(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};const y=p;var b,x,w=0,_=0,S=0,E=1e3,A=0,M=0,C=0,T="object"==typeof performance&&performance.now?performance:Date,k="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function I(){return M||(k(N),M=T.now()+C)}function N(){M=0}function P(){this._call=this._time=this._next=null}function O(t,e,n){var r=new P;return r.restart(t,e,n),r}function L(){M=(A=T.now())+C,w=_=0;try{!function(){I(),++w;for(var t,e=b;e;)(t=M-e._time)>=0&&e._call.call(null,t),e=e._next;--w}()}finally{w=0,function(){var t,e,n=b,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:b=e);x=t,D(r)}(),M=0}}function R(){var t=T.now(),e=t-A;e>E&&(C-=e,A=t)}function D(t){w||(_&&(_=clearTimeout(_)),t-M>24?(t<1/0&&(_=setTimeout(L,t-T.now()-C)),S&&(S=clearInterval(S))):(S||(A=T.now(),S=setInterval(R,E)),w=1,k(L)))}P.prototype=O.prototype={constructor:P,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?I():+n)+(null==e?0:+e),this._next||x===this||(x?x._next=this:b=this,x=this),this._call=t,this._time=n,D()},stop:function(){this._call&&(this._call=null,this._time=1/0,D())}};const z=1664525,F=1013904223,B=4294967296;function U(t){return t.x}function j(t){return t.y}var V=10,H=Math.PI*(3-Math.sqrt(5));function G(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,u=O(h),l=y("tick","end"),c=function(){let t=1;return()=>(t=(z*t+F)%B)/B}();function h(){d(),l.call("tick",e),n<r&&(u.stop(),l.call("end",e))}function d(r){var u,l,c=t.length;void 0===r&&(r=1);for(var h=0;h<r;++h)for(n+=(o-n)*i,s.forEach((function(t){t(n)})),u=0;u<c;++u)null==(l=t[u]).fx?l.x+=l.vx*=a:(l.x=l.fx,l.vx=0),null==l.fy?l.y+=l.vy*=a:(l.y=l.fy,l.vy=0);return e}function f(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=V*Math.sqrt(.5+n),o=n*H;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function p(e){return e.initialize&&e.initialize(t,c),e}return null==t&&(t=[]),f(),e={tick:d,restart:function(){return u.restart(h),e},stop:function(){return u.stop(),e},nodes:function(n){return arguments.length?(t=n,f(),s.forEach(p),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(a=1-t,e):1-a},randomSource:function(t){return arguments.length?(c=t,s.forEach(p),e):c},force:function(t,n){return arguments.length>1?(null==n?s.delete(t):s.set(t,p(n)),e):s.get(t)},find:function(e,n,r){var i,o,a,s,u,l=0,c=t.length;for(null==r?r=1/0:r*=r,l=0;l<c;++l)(a=(i=e-(s=t[l]).x)*i+(o=n-s.y)*o)<r&&(u=s,r=a);return u},on:function(t,n){return arguments.length>1?(l.on(t,n),e):l.on(t)}}}function W(){var t,e,n,r,s,u=o(-30),l=1,c=1/0,h=.81;function d(n){var o,a=t.length,s=(0,i.A)(t,U,j).visitAfter(p);for(r=n,o=0;o<a;++o)e=t[o],s.visit(m)}function f(){if(t){var e,n,r=t.length;for(s=new Array(r),e=0;e<r;++e)n=t[e],s[n.index]=+u(n,e,t)}}function p(t){var e,n,r,i,o,a=0,u=0;if(t.length){for(r=i=o=0;o<4;++o)(e=t[o])&&(n=Math.abs(e.value))&&(a+=e.value,u+=n,r+=n*e.x,i+=n*e.y);t.x=r/u,t.y=i/u}else{(e=t).x=e.data.x,e.y=e.data.y;do{a+=s[e.data.index]}while(e=e.next)}t.value=a}function m(t,i,o,u){if(!t.value)return!0;var d=t.x-e.x,f=t.y-e.y,p=u-i,m=d*d+f*f;if(p*p/h<m)return m<c&&(0===d&&(m+=(d=a(n))*d),0===f&&(m+=(f=a(n))*f),m<l&&(m=Math.sqrt(l*m)),e.vx+=d*t.value*r/m,e.vy+=f*t.value*r/m),!0;if(!(t.length||m>=c)){(t.data!==e||t.next)&&(0===d&&(m+=(d=a(n))*d),0===f&&(m+=(f=a(n))*f),m<l&&(m=Math.sqrt(l*m)));do{t.data!==e&&(p=s[t.data.index]*r/m,e.vx+=d*p,e.vy+=f*p)}while(t=t.next)}}return d.initialize=function(e,r){t=e,n=r,f()},d.strength=function(t){return arguments.length?(u="function"==typeof t?t:o(+t),f(),d):u},d.distanceMin=function(t){return arguments.length?(l=t*t,d):Math.sqrt(l)},d.distanceMax=function(t){return arguments.length?(c=t*t,d):Math.sqrt(c)},d.theta=function(t){return arguments.length?(h=t*t,d):Math.sqrt(h)},d}function X(t,e,n){var r,i,a,s=o(.1);function u(t){for(var o=0,s=r.length;o<s;++o){var u=r[o],l=u.x-e||1e-6,c=u.y-n||1e-6,h=Math.sqrt(l*l+c*c),d=(a[o]-h)*i[o]*t/h;u.vx+=l*d,u.vy+=c*d}}function l(){if(r){var e,n=r.length;for(i=new Array(n),a=new Array(n),e=0;e<n;++e)a[e]=+t(r[e],e,r),i[e]=isNaN(a[e])?0:+s(r[e],e,r)}}return"function"!=typeof t&&(t=o(+t)),null==e&&(e=0),null==n&&(n=0),u.initialize=function(t){r=t,l()},u.strength=function(t){return arguments.length?(s="function"==typeof t?t:o(+t),l(),u):s},u.radius=function(e){return arguments.length?(t="function"==typeof e?e:o(+e),l(),u):t},u.x=function(t){return arguments.length?(e=+t,u):e},u.y=function(t){return arguments.length?(n=+t,u):n},u}function Y(t){var e,n,r,i=o(.1);function a(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vx+=(r[o]-i.x)*n[o]*t}function s(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=o(null==t?0:+t)),a.initialize=function(t){e=t,s()},a.strength=function(t){return arguments.length?(i="function"==typeof t?t:o(+t),s(),a):i},a.x=function(e){return arguments.length?(t="function"==typeof e?e:o(+e),s(),a):t},a}function q(t){var e,n,r,i=o(.1);function a(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vy+=(r[o]-i.y)*n[o]*t}function s(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=o(null==t?0:+t)),a.initialize=function(t){e=t,s()},a.strength=function(t){return arguments.length?(i="function"==typeof t?t:o(+t),s(),a):i},a.y=function(e){return arguments.length?(t="function"==typeof e?e:o(+e),s(),a):t},a}},30617:(t,e,n)=>{"use strict";n.r(e),n.d(e,{quadtree:()=>r.A});var r=n(2847)},2847:(t,e,n)=>{"use strict";function r(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,a,s,u,l,c,h,d,f=t._root,p={data:r},m=t._x0,g=t._y0,v=t._x1,y=t._y1;if(!f)return t._root=p,t;for(;f.length;)if((l=e>=(o=(m+v)/2))?m=o:v=o,(c=n>=(a=(g+y)/2))?g=a:y=a,i=f,!(f=f[h=c<<1|l]))return i[h]=p,t;if(s=+t._x.call(null,f.data),u=+t._y.call(null,f.data),e===s&&n===u)return p.next=f,i?i[h]=p:t._root=p,t;do{i=i?i[h]=new Array(4):t._root=new Array(4),(l=e>=(o=(m+v)/2))?m=o:v=o,(c=n>=(a=(g+y)/2))?g=a:y=a}while((h=c<<1|l)==(d=(u>=a)<<1|s>=o));return i[d]=f,i[h]=p,t}function i(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function o(t){return t[0]}function a(t){return t[1]}function s(t,e,n){var r=new u(null==e?o:e,null==n?a:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function u(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function l(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}n.d(e,{A:()=>s});var c=s.prototype=u.prototype;c.copy=function(){var t,e,n=new u(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=l(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=l(e));return n},c.add=function(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return r(this.cover(e,n),e,n,t)},c.addAll=function(t){var e,n,i,o,a=t.length,s=new Array(a),u=new Array(a),l=1/0,c=1/0,h=-1/0,d=-1/0;for(n=0;n<a;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(s[n]=i,u[n]=o,i<l&&(l=i),i>h&&(h=i),o<c&&(c=o),o>d&&(d=o));if(l>h||c>d)return this;for(this.cover(l,c).cover(h,d),n=0;n<a;++n)r(this,s[n],u[n],t[n]);return this},c.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var a,s,u=i-n||1,l=this._root;n>t||t>=i||r>e||e>=o;)switch(s=(e<r)<<1|t<n,(a=new Array(4))[s]=l,l=a,u*=2,s){case 0:i=n+u,o=r+u;break;case 1:n=i-u,o=r+u;break;case 2:i=n+u,r=o-u;break;case 3:n=i-u,r=o-u}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},c.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},c.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},c.find=function(t,e,n){var r,o,a,s,u,l,c,h=this._x0,d=this._y0,f=this._x1,p=this._y1,m=[],g=this._root;for(g&&m.push(new i(g,h,d,f,p)),null==n?n=1/0:(h=t-n,d=e-n,f=t+n,p=e+n,n*=n);l=m.pop();)if(!(!(g=l.node)||(o=l.x0)>f||(a=l.y0)>p||(s=l.x1)<h||(u=l.y1)<d))if(g.length){var v=(o+s)/2,y=(a+u)/2;m.push(new i(g[3],v,y,s,u),new i(g[2],o,y,v,u),new i(g[1],v,a,s,y),new i(g[0],o,a,v,y)),(c=(e>=y)<<1|t>=v)&&(l=m[m.length-1],m[m.length-1]=m[m.length-1-c],m[m.length-1-c]=l)}else{var b=t-+this._x.call(null,g.data),x=e-+this._y.call(null,g.data),w=b*b+x*x;if(w<n){var _=Math.sqrt(n=w);h=t-_,d=e-_,f=t+_,p=e+_,r=g.data}}return r},c.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,i,o,a,s,u,l,c,h,d,f=this._root,p=this._x0,m=this._y0,g=this._x1,v=this._y1;if(!f)return this;if(f.length)for(;;){if((l=o>=(s=(p+g)/2))?p=s:g=s,(c=a>=(u=(m+v)/2))?m=u:v=u,e=f,!(f=f[h=c<<1|l]))return this;if(!f.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,d=h)}for(;f.data!==t;)if(r=f,!(f=f.next))return this;return(i=f.next)&&delete f.next,r?(i?r.next=i:delete r.next,this):e?(i?e[h]=i:delete e[h],(f=e[0]||e[1]||e[2]||e[3])&&f===(e[3]||e[2]||e[1]||e[0])&&!f.length&&(n?n[d]=f:this._root=f),this):(this._root=i,this)},c.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},c.root=function(){return this._root},c.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},c.visit=function(t){var e,n,r,o,a,s,u=[],l=this._root;for(l&&u.push(new i(l,this._x0,this._y0,this._x1,this._y1));e=u.pop();)if(!t(l=e.node,r=e.x0,o=e.y0,a=e.x1,s=e.y1)&&l.length){var c=(r+a)/2,h=(o+s)/2;(n=l[3])&&u.push(new i(n,c,h,a,s)),(n=l[2])&&u.push(new i(n,r,h,c,s)),(n=l[1])&&u.push(new i(n,c,o,a,h)),(n=l[0])&&u.push(new i(n,r,o,c,h))}return this},c.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new i(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var o=e.node;if(o.length){var a,s=e.x0,u=e.y0,l=e.x1,c=e.y1,h=(s+l)/2,d=(u+c)/2;(a=o[0])&&n.push(new i(a,s,u,h,d)),(a=o[1])&&n.push(new i(a,h,u,l,d)),(a=o[2])&&n.push(new i(a,s,d,h,c)),(a=o[3])&&n.push(new i(a,h,d,l,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},c.x=function(t){return arguments.length?(this._x=t,this):this._x},c.y=function(t){return arguments.length?(this._y=t,this):this._y}},89861:(t,e,n)=>{"use strict";n.r(e),n.d(e,{BRIDGE_GRAPH_NAME:()=>s,GraphType:()=>c,HierarchyNodeType:()=>h,InclusionType:()=>l,LAYOUT_CONFIG:()=>r,NodeType:()=>u,ROOT_NAME:()=>a,buildGraph:()=>da,flatGraph:()=>fa,getEdges:()=>pa,mergeConfig:()=>i});const r={graph:{meta:{rankDir:"TB",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function i(t={},e=r){var n,i,o,a;const s=JSON.parse(JSON.stringify(e)),u=(null===(n=null==t?void 0:t.graph)||void 0===n?void 0:n.meta)||{},l=(null===(i=null==t?void 0:t.subScene)||void 0===i?void 0:i.meta)||{},c=(null===(o=null==t?void 0:t.nodeSize)||void 0===o?void 0:o.meta)||{},h=(null===(a=null==t?void 0:t.nodeSize)||void 0===a?void 0:a.node)||{},d=s.nodeSize.bridge;return{graph:{meta:Object.assign(s.graph.meta,u)},subScene:{meta:Object.assign(s.subScene.meta,l)},nodeSize:{meta:Object.assign(s.nodeSize.meta,c),node:Object.assign(s.nodeSize.node,h),bridge:d}}}function o(t){return`${t}`}const a=o("ROOT"),s=o("BRIDGE_GRAPH");var u,l,c,h;!function(t){t[t.META=0]="META",t[t.NODE=1]="NODE",t[t.BRIDGE=2]="BRIDGE"}(u||(u={})),function(t){t[t.INCLUDE=0]="INCLUDE",t[t.EXCLUDE=1]="EXCLUDE",t[t.UNSPECIFIED=2]="UNSPECIFIED"}(l||(l={})),function(t){t[t.META=0]="META",t[t.CORE=1]="CORE",t[t.BRIDGE=2]="BRIDGE"}(c||(c={})),function(t){t[t.META=0]="META",t[t.OP=1]="OP",t[t.SERIES=2]="SERIES"}(h||(h={}));var d="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{};function f(t,e){return t(e={exports:{}},e.exports),e.exports}var p=function(t,e){return t===e||t!=t&&e!=e},m=function(t,e){for(var n=t.length;n--;)if(p(t[n][0],e))return n;return-1},g=Array.prototype.splice;function v(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}v.prototype.clear=function(){this.__data__=[],this.size=0},v.prototype.delete=function(t){var e=this.__data__,n=m(e,t);return!(n<0||(n==e.length-1?e.pop():g.call(e,n,1),--this.size,0))},v.prototype.get=function(t){var e=this.__data__,n=m(e,t);return n<0?void 0:e[n][1]},v.prototype.has=function(t){return m(this.__data__,t)>-1},v.prototype.set=function(t,e){var n=this.__data__,r=m(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};var y,b=v,x="object"==typeof d&&d&&d.Object===Object&&d,w="object"==typeof self&&self&&self.Object===Object&&self,_=x||w||Function("return this")(),S=_.Symbol,E=Object.prototype,A=E.hasOwnProperty,M=E.toString,C=S?S.toStringTag:void 0,T=Object.prototype.toString,k=S?S.toStringTag:void 0,I=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":k&&k in Object(t)?function(t){var e=A.call(t,C),n=t[C];try{t[C]=void 0;var r=!0}catch(t){}var i=M.call(t);return r&&(e?t[C]=n:delete t[C]),i}(t):function(t){return T.call(t)}(t)},N=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},P=function(t){if(!N(t))return!1;var e=I(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},O=_["__core-js_shared__"],L=(y=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||""))?"Symbol(src)_1."+y:"",R=Function.prototype.toString,D=function(t){if(null!=t){try{return R.call(t)}catch(t){}try{return t+""}catch(t){}}return""},z=/^\[object .+?Constructor\]$/,F=Function.prototype,B=Object.prototype,U=F.toString,j=B.hasOwnProperty,V=RegExp("^"+U.call(j).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),H=function(t){return!(!N(t)||function(t){return!!L&&L in t}(t))&&(P(t)?V:z).test(D(t))},G=function(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return H(n)?n:void 0},W=G(_,"Map"),X=G(Object,"create"),Y=Object.prototype.hasOwnProperty,q=Object.prototype.hasOwnProperty;function $(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}$.prototype.clear=function(){this.__data__=X?X(null):{},this.size=0},$.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},$.prototype.get=function(t){var e=this.__data__;if(X){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return Y.call(e,t)?e[t]:void 0},$.prototype.has=function(t){var e=this.__data__;return X?void 0!==e[t]:q.call(e,t)},$.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=X&&void 0===e?"__lodash_hash_undefined__":e,this};var K=$,Z=function(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map};function Q(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Q.prototype.clear=function(){this.size=0,this.__data__={hash:new K,map:new(W||b),string:new K}},Q.prototype.delete=function(t){var e=Z(this,t).delete(t);return this.size-=e?1:0,e},Q.prototype.get=function(t){return Z(this,t).get(t)},Q.prototype.has=function(t){return Z(this,t).has(t)},Q.prototype.set=function(t,e){var n=Z(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};var J=Q;function tt(t){var e=this.__data__=new b(t);this.size=e.size}tt.prototype.clear=function(){this.__data__=new b,this.size=0},tt.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},tt.prototype.get=function(t){return this.__data__.get(t)},tt.prototype.has=function(t){return this.__data__.has(t)},tt.prototype.set=function(t,e){var n=this.__data__;if(n instanceof b){var r=n.__data__;if(!W||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new J(r)}return n.set(t,e),this.size=n.size,this};var et=tt,nt=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t},rt=function(){try{var t=G(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),it=function(t,e,n){"__proto__"==e&&rt?rt(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},ot=Object.prototype.hasOwnProperty,at=function(t,e,n){var r=t[e];ot.call(t,e)&&p(r,n)&&(void 0!==n||e in t)||it(t,e,n)},st=function(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],u=r?r(n[s],t[s],s,n,t):void 0;void 0===u&&(u=t[s]),i?it(n,s,u):at(n,s,u)}return n},ut=function(t){return null!=t&&"object"==typeof t},lt=function(t){return ut(t)&&"[object Arguments]"==I(t)},ct=Object.prototype,ht=ct.hasOwnProperty,dt=ct.propertyIsEnumerable,ft=lt(function(){return arguments}())?lt:function(t){return ut(t)&&ht.call(t,"callee")&&!dt.call(t,"callee")},pt=Array.isArray,mt=function(){return!1},gt=f((function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,i=r&&r.exports===n?_.Buffer:void 0,o=(i?i.isBuffer:void 0)||mt;t.exports=o})),vt=/^(?:0|[1-9]\d*)$/,yt=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&vt.test(t))&&t>-1&&t%1==0&&t<e},bt=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},xt={};xt["[object Float32Array]"]=xt["[object Float64Array]"]=xt["[object Int8Array]"]=xt["[object Int16Array]"]=xt["[object Int32Array]"]=xt["[object Uint8Array]"]=xt["[object Uint8ClampedArray]"]=xt["[object Uint16Array]"]=xt["[object Uint32Array]"]=!0,xt["[object Arguments]"]=xt["[object Array]"]=xt["[object ArrayBuffer]"]=xt["[object Boolean]"]=xt["[object DataView]"]=xt["[object Date]"]=xt["[object Error]"]=xt["[object Function]"]=xt["[object Map]"]=xt["[object Number]"]=xt["[object Object]"]=xt["[object RegExp]"]=xt["[object Set]"]=xt["[object String]"]=xt["[object WeakMap]"]=!1;var wt=function(t){return function(e){return t(e)}},_t=f((function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,i=r&&r.exports===n&&x.process,o=function(){try{return r&&r.require&&r.require("util").types||i&&i.binding&&i.binding("util")}catch(t){}}();t.exports=o})),St=_t&&_t.isTypedArray,Et=St?wt(St):function(t){return ut(t)&&bt(t.length)&&!!xt[I(t)]},At=Object.prototype.hasOwnProperty,Mt=function(t,e){var n=pt(t),r=!n&&ft(t),i=!n&&!r&&gt(t),o=!n&&!r&&!i&&Et(t),a=n||r||i||o,s=a?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],u=s.length;for(var l in t)!e&&!At.call(t,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||yt(l,u))||s.push(l);return s},Ct=Object.prototype,Tt=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ct)},kt=function(t,e){return function(n){return t(e(n))}},It=kt(Object.keys,Object),Nt=Object.prototype.hasOwnProperty,Pt=function(t){if(!Tt(t))return It(t);var e=[];for(var n in Object(t))Nt.call(t,n)&&"constructor"!=n&&e.push(n);return e},Ot=function(t){return null!=t&&bt(t.length)&&!P(t)},Lt=function(t){return Ot(t)?Mt(t):Pt(t)},Rt=Object.prototype.hasOwnProperty,Dt=function(t){if(!N(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=Tt(t),n=[];for(var r in t)("constructor"!=r||!e&&Rt.call(t,r))&&n.push(r);return n},zt=function(t){return Ot(t)?Mt(t,!0):Dt(t)},Ft=f((function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,i=r&&r.exports===n?_.Buffer:void 0,o=i?i.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=o?o(n):new t.constructor(n);return t.copy(r),r}})),Bt=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e},Ut=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o},jt=function(){return[]},Vt=Object.prototype.propertyIsEnumerable,Ht=Object.getOwnPropertySymbols,Gt=Ht?function(t){return null==t?[]:(t=Object(t),Ut(Ht(t),(function(e){return Vt.call(t,e)})))}:jt,Wt=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t},Xt=kt(Object.getPrototypeOf,Object),Yt=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Wt(e,Gt(t)),t=Xt(t);return e}:jt,qt=function(t,e,n){var r=e(t);return pt(t)?r:Wt(r,n(t))},$t=function(t){return qt(t,Lt,Gt)},Kt=function(t){return qt(t,zt,Yt)},Zt=G(_,"DataView"),Qt=G(_,"Promise"),Jt=G(_,"Set"),te=G(_,"WeakMap"),ee=D(Zt),ne=D(W),re=D(Qt),ie=D(Jt),oe=D(te),ae=I;(Zt&&"[object DataView]"!=ae(new Zt(new ArrayBuffer(1)))||W&&"[object Map]"!=ae(new W)||Qt&&"[object Promise]"!=ae(Qt.resolve())||Jt&&"[object Set]"!=ae(new Jt)||te&&"[object WeakMap]"!=ae(new te))&&(ae=function(t){var e=I(t),n="[object Object]"==e?t.constructor:void 0,r=n?D(n):"";if(r)switch(r){case ee:return"[object DataView]";case ne:return"[object Map]";case re:return"[object Promise]";case ie:return"[object Set]";case oe:return"[object WeakMap]"}return e});var se=ae,ue=Object.prototype.hasOwnProperty,le=_.Uint8Array,ce=function(t){var e=new t.constructor(t.byteLength);return new le(e).set(new le(t)),e},he=/\w*$/,de=S?S.prototype:void 0,fe=de?de.valueOf:void 0,pe=function(t,e){var n=e?ce(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)},me=function(t,e,n){var r=t.constructor;switch(e){case"[object ArrayBuffer]":return ce(t);case"[object Boolean]":case"[object Date]":return new r(+t);case"[object DataView]":return function(t,e){var n=e?ce(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return pe(t,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(t);case"[object RegExp]":return function(t){var e=new t.constructor(t.source,he.exec(t));return e.lastIndex=t.lastIndex,e}(t);case"[object Symbol]":return function(t){return fe?Object(fe.call(t)):{}}(t)}},ge=Object.create,ve=function(){function t(){}return function(e){if(!N(e))return{};if(ge)return ge(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),ye=function(t){return"function"!=typeof t.constructor||Tt(t)?{}:ve(Xt(t))},be=_t&&_t.isMap,xe=be?wt(be):function(t){return ut(t)&&"[object Map]"==se(t)},we=_t&&_t.isSet,_e=we?wt(we):function(t){return ut(t)&&"[object Set]"==se(t)},Se={};Se["[object Arguments]"]=Se["[object Array]"]=Se["[object ArrayBuffer]"]=Se["[object DataView]"]=Se["[object Boolean]"]=Se["[object Date]"]=Se["[object Float32Array]"]=Se["[object Float64Array]"]=Se["[object Int8Array]"]=Se["[object Int16Array]"]=Se["[object Int32Array]"]=Se["[object Map]"]=Se["[object Number]"]=Se["[object Object]"]=Se["[object RegExp]"]=Se["[object Set]"]=Se["[object String]"]=Se["[object Symbol]"]=Se["[object Uint8Array]"]=Se["[object Uint8ClampedArray]"]=Se["[object Uint16Array]"]=Se["[object Uint32Array]"]=!0,Se["[object Error]"]=Se["[object Function]"]=Se["[object WeakMap]"]=!1;var Ee=function t(e,n,r,i,o,a){var s,u=1&n,l=2&n,c=4&n;if(r&&(s=o?r(e,i,o,a):r(e)),void 0!==s)return s;if(!N(e))return e;var h=pt(e);if(h){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&ue.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(e),!u)return Bt(e,s)}else{var d=se(e),f="[object Function]"==d||"[object GeneratorFunction]"==d;if(gt(e))return Ft(e,u);if("[object Object]"==d||"[object Arguments]"==d||f&&!o){if(s=l||f?{}:ye(e),!u)return l?function(t,e){return st(t,Yt(t),e)}(e,function(t,e){return t&&st(e,zt(e),t)}(s,e)):function(t,e){return st(t,Gt(t),e)}(e,function(t,e){return t&&st(e,Lt(e),t)}(s,e))}else{if(!Se[d])return o?e:{};s=me(e,d,u)}}a||(a=new et);var p=a.get(e);if(p)return p;a.set(e,s),_e(e)?e.forEach((function(i){s.add(t(i,n,r,i,e,a))})):xe(e)&&e.forEach((function(i,o){s.set(o,t(i,n,r,o,e,a))}));var m=h?void 0:(c?l?Kt:$t:l?zt:Lt)(e);return nt(m||e,(function(i,o){m&&(i=e[o=i]),at(s,o,t(i,n,r,o,e,a))})),s},Ae=function(t){return function(){return t}},Me=function(t,e,n){for(var r=-1,i=Object(t),o=n(t),a=o.length;a--;){var s=o[++r];if(!1===e(i[s],s,i))break}return t},Ce=function(t,e){return t&&Me(t,e,Lt)},Te=function(t,e){return function(e,n){if(null==e)return e;if(!Ot(e))return t(e,n);for(var r=e.length,i=-1,o=Object(e);++i<r&&!1!==n(o[i],i,o););return e}}(Ce),ke=function(t){return t},Ie=function(t){return"function"==typeof t?t:ke},Ne=function(t,e){return(pt(t)?nt:Te)(t,Ie(e))},Pe=Ne,Oe=function(t,e){var n=[];return Te(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n};function Le(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new J;++e<n;)this.add(t[e])}Le.prototype.add=Le.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Le.prototype.has=function(t){return this.__data__.has(t)};var Re=Le,De=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1},ze=function(t,e){return t.has(e)},Fe=function(t,e,n,r,i,o){var a=1&n,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var l=o.get(t),c=o.get(e);if(l&&c)return l==e&&c==t;var h=-1,d=!0,f=2&n?new Re:void 0;for(o.set(t,e),o.set(e,t);++h<s;){var p=t[h],m=e[h];if(r)var g=a?r(m,p,h,e,t,o):r(p,m,h,t,e,o);if(void 0!==g){if(g)continue;d=!1;break}if(f){if(!De(e,(function(t,e){if(!ze(f,e)&&(p===t||i(p,t,n,r,o)))return f.push(e)}))){d=!1;break}}else if(p!==m&&!i(p,m,n,r,o)){d=!1;break}}return o.delete(t),o.delete(e),d},Be=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n},Ue=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n},je=S?S.prototype:void 0,Ve=je?je.valueOf:void 0,He=function(t,e,n,r,i,o,a){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new le(t),new le(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return p(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=Be;case"[object Set]":var u=1&r;if(s||(s=Ue),t.size!=e.size&&!u)return!1;var l=a.get(t);if(l)return l==e;r|=2,a.set(t,e);var c=Fe(s(t),s(e),r,i,o,a);return a.delete(t),c;case"[object Symbol]":if(Ve)return Ve.call(t)==Ve.call(e)}return!1},Ge=Object.prototype.hasOwnProperty,We=Object.prototype.hasOwnProperty,Xe=function(t,e,n,r,i,o){var a=pt(t),s=pt(e),u=a?"[object Array]":se(t),l=s?"[object Array]":se(e),c="[object Object]"==(u="[object Arguments]"==u?"[object Object]":u),h="[object Object]"==(l="[object Arguments]"==l?"[object Object]":l),d=u==l;if(d&&gt(t)){if(!gt(e))return!1;a=!0,c=!1}if(d&&!c)return o||(o=new et),a||Et(t)?Fe(t,e,n,r,i,o):He(t,e,u,n,r,i,o);if(!(1&n)){var f=c&&We.call(t,"__wrapped__"),p=h&&We.call(e,"__wrapped__");if(f||p){var m=f?t.value():t,g=p?e.value():e;return o||(o=new et),i(m,g,n,r,o)}}return!!d&&(o||(o=new et),function(t,e,n,r,i,o){var a=1&n,s=$t(t),u=s.length;if(u!=$t(e).length&&!a)return!1;for(var l=u;l--;){var c=s[l];if(!(a?c in e:Ge.call(e,c)))return!1}var h=o.get(t),d=o.get(e);if(h&&d)return h==e&&d==t;var f=!0;o.set(t,e),o.set(e,t);for(var p=a;++l<u;){var m=t[c=s[l]],g=e[c];if(r)var v=a?r(g,m,c,e,t,o):r(m,g,c,t,e,o);if(!(void 0===v?m===g||i(m,g,n,r,o):v)){f=!1;break}p||(p="constructor"==c)}if(f&&!p){var y=t.constructor,b=e.constructor;y==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(f=!1)}return o.delete(t),o.delete(e),f}(t,e,n,r,i,o))},Ye=function t(e,n,r,i,o){return e===n||(null==e||null==n||!ut(e)&&!ut(n)?e!=e&&n!=n:Xe(e,n,r,i,t,o))},qe=function(t){return t==t&&!N(t)},$e=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}},Ke=function(t){var e=function(t){for(var e=Lt(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,qe(i)]}return e}(t);return 1==e.length&&e[0][2]?$e(e[0][0],e[0][1]):function(n){return n===t||function(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=Object(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){var u=(s=n[i])[0],l=t[u],c=s[1];if(a&&s[2]){if(void 0===l&&!(u in t))return!1}else{var h=new et;if(r)var d=r(l,c,u,t,e,h);if(!(void 0===d?Ye(c,l,3,r,h):d))return!1}}return!0}(n,t,e)}},Ze=function(t){return"symbol"==typeof t||ut(t)&&"[object Symbol]"==I(t)},Qe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Je=/^\w*$/,tn=function(t,e){if(pt(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Ze(t))||Je.test(t)||!Qe.test(t)||null!=e&&t in Object(e)};function en(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(en.Cache||J),n}en.Cache=J;var nn,rn=en,on=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,an=/\\(\\)?/g,sn=function(t){var e=rn((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(on,(function(t,n,r,i){e.push(r?i.replace(an,"$1"):n||t)})),e}),(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}(),un=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i},ln=S?S.prototype:void 0,cn=ln?ln.toString:void 0,hn=function t(e){if("string"==typeof e)return e;if(pt(e))return un(e,t)+"";if(Ze(e))return cn?cn.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n},dn=function(t){return null==t?"":hn(t)},fn=function(t,e){return pt(t)?t:tn(t,e)?[t]:sn(dn(t))},pn=function(t){if("string"==typeof t||Ze(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e},mn=function(t,e){for(var n=0,r=(e=fn(e,t)).length;null!=t&&n<r;)t=t[pn(e[n++])];return n&&n==r?t:void 0},gn=function(t,e){return null!=t&&e in Object(t)},vn=function(t,e,n){for(var r=-1,i=(e=fn(e,t)).length,o=!1;++r<i;){var a=pn(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&bt(i)&&yt(a,i)&&(pt(t)||ft(t))},yn=function(t,e){return null!=t&&vn(t,e,gn)},bn=function(t,e){return tn(t)&&qe(e)?$e(pn(t),e):function(n){var r=function(t,e,n){var r=null==t?void 0:mn(t,e);return void 0===r?n:r}(n,t);return void 0===r&&r===e?yn(n,t):Ye(e,r,3)}},xn=function(t){return function(e){return null==e?void 0:e[t]}},wn=function(t){return tn(t)?xn(pn(t)):function(t){return function(e){return mn(e,t)}}(t)},_n=function(t){return"function"==typeof t?t:null==t?ke:"object"==typeof t?pt(t)?bn(t[0],t[1]):Ke(t):wn(t)},Sn=function(t,e){return(pt(t)?Ut:Oe)(t,_n(e))},En=Object.prototype.hasOwnProperty,An=function(t,e){return null!=t&&En.call(t,e)},Mn=function(t,e){return null!=t&&vn(t,e,An)},Cn=Object.prototype.hasOwnProperty,Tn=function(t){return void 0===t},kn=function(t,e){var n=-1,r=Ot(t)?Array(t.length):[];return Te(t,(function(t,i,o){r[++n]=e(t,i,o)})),r},In=function(t,e){return(pt(t)?un:kn)(t,_n(e))},Nn=function(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n},Pn=function(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n},On=function(t,e,n){var r=pt(t)?Nn:Pn,i=arguments.length<3;return r(t,_n(e),n,i,Te)},Ln=xn("length"),Rn=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Dn="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",zn="\\ud83c[\\udffb-\\udfff]",Fn="[^\\ud800-\\udfff]",Bn="(?:\\ud83c[\\udde6-\\uddff]){2}",Un="[\\ud800-\\udbff][\\udc00-\\udfff]",jn="(?:"+Dn+"|"+zn+")?",Vn="[\\ufe0e\\ufe0f]?"+jn+"(?:\\u200d(?:"+[Fn,Bn,Un].join("|")+")[\\ufe0e\\ufe0f]?"+jn+")*",Hn="(?:"+[Fn+Dn+"?",Dn,Bn,Un,"[\\ud800-\\udfff]"].join("|")+")",Gn=RegExp(zn+"(?="+zn+")|"+Hn+Vn,"g"),Wn=function(t){return function(t){return Rn.test(t)}(t)?function(t){for(var e=Gn.lastIndex=0;Gn.test(t);)++e;return e}(t):Ln(t)},Xn=S?S.isConcatSpreadable:void 0,Yn=function(t){return pt(t)||ft(t)||!!(Xn&&t&&t[Xn])},qn=function t(e,n,r,i,o){var a=-1,s=e.length;for(r||(r=Yn),o||(o=[]);++a<s;){var u=e[a];n>0&&r(u)?n>1?t(u,n-1,r,i,o):Wt(o,u):i||(o[o.length]=u)}return o},$n=Math.max,Kn=function(t,e,n){return e=$n(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=$n(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}(t,this,s)}},Zn=rt?function(t,e){return rt(t,"toString",{configurable:!0,enumerable:!1,value:Ae(e),writable:!0})}:ke,Qn=Date.now,Jn=function(t){var e=0,n=0;return function(){var r=Qn(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(Zn),tr=function(t,e){return Jn(Kn(t,e,ke),t+"")},er=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1},nr=function(t){return t!=t},rr=function(t,e){return!(null==t||!t.length)&&function(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):er(t,nr,n)}(t,e,0)>-1},ir=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1},or=Jt&&1/Ue(new Jt([,-0]))[1]==1/0?function(t){return new Jt(t)}:function(){},ar=function(t){return ut(t)&&Ot(t)},sr=tr((function(t){return function(t,e,n){var r=-1,i=rr,o=t.length,a=!0,s=[],u=s;if(n)a=!1,i=ir;else if(o>=200){var l=e?null:or(t);if(l)return Ue(l);a=!1,i=ze,u=new Re}else u=e?[]:s;t:for(;++r<o;){var c=t[r],h=e?e(c):c;if(c=n||0!==c?c:0,a&&h==h){for(var d=u.length;d--;)if(u[d]===h)continue t;e&&u.push(h),s.push(c)}else i(u,h,n)||(u!==s&&u.push(h),s.push(c))}return s}(qn(t,1,ar,!0))})),ur=function(t){return null==t?[]:function(t,e){return un(e,(function(e){return t[e]}))}(t,Lt(t))};try{nn={clone:function(t){return Ee(t,4)},constant:Ae,each:Pe,filter:Sn,has:Mn,isArray:pt,isEmpty:function(t){if(null==t)return!0;if(Ot(t)&&(pt(t)||"string"==typeof t||"function"==typeof t.splice||gt(t)||Et(t)||ft(t)))return!t.length;var e=se(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(Tt(t))return!Pt(t).length;for(var n in t)if(Cn.call(t,n))return!1;return!0},isFunction:P,isUndefined:Tn,keys:Lt,map:In,reduce:On,size:function(t){if(null==t)return 0;if(Ot(t))return function(t){return"string"==typeof t||!pt(t)&&ut(t)&&"[object String]"==I(t)}(t)?Wn(t):t.length;var e=se(t);return"[object Map]"==e||"[object Set]"==e?t.size:Pt(t).length},transform:function(t,e,n){var r=pt(t),i=r||gt(t)||Et(t);if(e=_n(e),null==n){var o=t&&t.constructor;n=i?r?new o:[]:N(t)&&P(o)?ve(Xt(t)):{}}return(i?nt:Ce)(t,(function(t,r,i){return e(n,t,r,i)})),n},union:sr,values:ur}}catch(r){}nn||(nn=window._);var lr=nn,cr=hr;function hr(t){this._isDirected=!lr.has(t,"directed")||t.directed,this._isMultigraph=!!lr.has(t,"multigraph")&&t.multigraph,this._isCompound=!!lr.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=lr.constant(void 0),this._defaultEdgeLabelFn=lr.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function dr(t,e){t[e]?t[e]++:t[e]=1}function fr(t,e){--t[e]||delete t[e]}function pr(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var a=i;i=o,o=a}return i+""+o+""+(lr.isUndefined(r)?"\0":r)}function mr(t,e){return pr(t,e.v,e.w,e.name)}hr.prototype._nodeCount=0,hr.prototype._edgeCount=0,hr.prototype.isDirected=function(){return this._isDirected},hr.prototype.isMultigraph=function(){return this._isMultigraph},hr.prototype.isCompound=function(){return this._isCompound},hr.prototype.setGraph=function(t){return this._label=t,this},hr.prototype.graph=function(){return this._label},hr.prototype.setDefaultNodeLabel=function(t){return lr.isFunction(t)||(t=lr.constant(t)),this._defaultNodeLabelFn=t,this},hr.prototype.nodeCount=function(){return this._nodeCount},hr.prototype.nodes=function(){return lr.keys(this._nodes)},hr.prototype.sources=function(){var t=this;return lr.filter(this.nodes(),(function(e){return lr.isEmpty(t._in[e])}))},hr.prototype.sinks=function(){var t=this;return lr.filter(this.nodes(),(function(e){return lr.isEmpty(t._out[e])}))},hr.prototype.setNodes=function(t,e){var n=arguments,r=this;return lr.each(t,(function(t){n.length>1?r.setNode(t,e):r.setNode(t)})),this},hr.prototype.setNode=function(t,e){return lr.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]="\0",this._children[t]={},this._children["\0"][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},hr.prototype.node=function(t){return this._nodes[t]},hr.prototype.hasNode=function(t){return lr.has(this._nodes,t)},hr.prototype.removeNode=function(t){var e=this;if(lr.has(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],lr.each(this.children(t),(function(t){e.setParent(t)})),delete this._children[t]),lr.each(lr.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],lr.each(lr.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},hr.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(lr.isUndefined(e))e="\0";else{for(var n=e+="";!lr.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},hr.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},hr.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if("\0"!==e)return e}},hr.prototype.children=function(t){if(lr.isUndefined(t)&&(t="\0"),this._isCompound){var e=this._children[t];if(e)return lr.keys(e)}else{if("\0"===t)return this.nodes();if(this.hasNode(t))return[]}},hr.prototype.predecessors=function(t){var e=this._preds[t];if(e)return lr.keys(e)},hr.prototype.successors=function(t){var e=this._sucs[t];if(e)return lr.keys(e)},hr.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return lr.union(e,this.successors(t))},hr.prototype.isLeaf=function(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length},hr.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var n=this;lr.each(this._nodes,(function(n,r){t(r)&&e.setNode(r,n)})),lr.each(this._edgeObjs,(function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,n.edge(t))}));var r={};function i(t){var o=n.parent(t);return void 0===o||e.hasNode(o)?(r[t]=o,o):o in r?r[o]:i(o)}return this._isCompound&&lr.each(e.nodes(),(function(t){e.setParent(t,i(t))})),e},hr.prototype.setDefaultEdgeLabel=function(t){return lr.isFunction(t)||(t=lr.constant(t)),this._defaultEdgeLabelFn=t,this},hr.prototype.edgeCount=function(){return this._edgeCount},hr.prototype.edges=function(){return lr.values(this._edgeObjs)},hr.prototype.setPath=function(t,e){var n=this,r=arguments;return lr.reduce(t,(function(t,i){return r.length>1?n.setEdge(t,i,e):n.setEdge(t,i),i})),this},hr.prototype.setEdge=function(){var t,e,n,r,i=!1,o=arguments[0];"object"==typeof o&&null!==o&&"v"in o?(t=o.v,e=o.w,n=o.name,2===arguments.length&&(r=arguments[1],i=!0)):(t=o,e=arguments[1],n=arguments[3],arguments.length>2&&(r=arguments[2],i=!0)),t=""+t,e=""+e,lr.isUndefined(n)||(n=""+n);var a=pr(this._isDirected,t,e,n);if(lr.has(this._edgeLabels,a))return i&&(this._edgeLabels[a]=r),this;if(!lr.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[a]=i?r:this._defaultEdgeLabelFn(t,e,n);var s=function(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var a=i;i=o,o=a}var s={v:i,w:o};return r&&(s.name=r),s}(this._isDirected,t,e,n);return t=s.v,e=s.w,Object.freeze(s),this._edgeObjs[a]=s,dr(this._preds[e],t),dr(this._sucs[t],e),this._in[e][a]=s,this._out[t][a]=s,this._edgeCount++,this},hr.prototype.edge=function(t,e,n){var r=1===arguments.length?mr(this._isDirected,arguments[0]):pr(this._isDirected,t,e,n);return this._edgeLabels[r]},hr.prototype.hasEdge=function(t,e,n){var r=1===arguments.length?mr(this._isDirected,arguments[0]):pr(this._isDirected,t,e,n);return lr.has(this._edgeLabels,r)},hr.prototype.removeEdge=function(t,e,n){var r=1===arguments.length?mr(this._isDirected,arguments[0]):pr(this._isDirected,t,e,n),i=this._edgeObjs[r];return i&&(t=i.v,e=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],fr(this._preds[e],t),fr(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this},hr.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var r=lr.values(n);return e?lr.filter(r,(function(t){return t.v===e})):r}},hr.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var r=lr.values(n);return e?lr.filter(r,(function(t){return t.w===e})):r}},hr.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))};var gr={Graph:cr,version:"2.1.8"},vr={write:function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:yr(t),edges:br(t)};return lr.isUndefined(t.graph())||(e.value=lr.clone(t.graph())),e},read:function(t){var e=new cr(t.options).setGraph(t.value);return lr.each(t.nodes,(function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)})),lr.each(t.edges,(function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)})),e}};function yr(t){return lr.map(t.nodes(),(function(e){var n=t.node(e),r=t.parent(e),i={v:e};return lr.isUndefined(n)||(i.value=n),lr.isUndefined(r)||(i.parent=r),i}))}function br(t){return lr.map(t.edges(),(function(e){var n=t.edge(e),r={v:e.v,w:e.w};return lr.isUndefined(e.name)||(r.name=e.name),lr.isUndefined(n)||(r.value=n),r}))}var xr=wr;function wr(){this._arr=[],this._keyIndices={}}wr.prototype.size=function(){return this._arr.length},wr.prototype.keys=function(){return this._arr.map((function(t){return t.key}))},wr.prototype.has=function(t){return lr.has(this._keyIndices,t)},wr.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},wr.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},wr.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),!lr.has(n,t)){var r=this._arr,i=r.length;return n[t]=i,r.push({key:t,priority:e}),this._decrease(i),!0}return!1},wr.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},wr.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)},wr.prototype._heapify=function(t){var e=this._arr,n=2*t,r=n+1,i=t;n<e.length&&(i=e[n].priority<e[i].priority?n:i,r<e.length&&(i=e[r].priority<e[i].priority?r:i),i!==t&&(this._swap(t,i),this._heapify(i)))},wr.prototype._decrease=function(t){for(var e,n=this._arr,r=n[t].priority;0!==t&&!(n[e=t>>1].priority<r);)this._swap(t,e),t=e},wr.prototype._swap=function(t,e){var n=this._arr,r=this._keyIndices,i=n[t],o=n[e];n[t]=o,n[e]=i,r[o.key]=t,r[i.key]=e};var _r=function(t,e,n,r){return function(t,e,n,r){var i,o,a={},s=new xr,u=function(t){var e=t.v!==i?t.v:t.w,r=a[e],u=n(t),l=o.distance+u;if(u<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+u);l<r.distance&&(r.distance=l,r.predecessor=i,s.decrease(e,l))};for(t.nodes().forEach((function(t){var n=t===e?0:Number.POSITIVE_INFINITY;a[t]={distance:n},s.add(t,n)}));s.size()>0&&(i=s.removeMin(),(o=a[i]).distance!==Number.POSITIVE_INFINITY);)r(i).forEach(u);return a}(t,String(e),n||Sr,r||function(e){return t.outEdges(e)})},Sr=lr.constant(1),Er=function(t){var e=0,n=[],r={},i=[];function o(a){var s=r[a]={onStack:!0,lowlink:e,index:e++};if(n.push(a),t.successors(a).forEach((function(t){lr.has(r,t)?r[t].onStack&&(s.lowlink=Math.min(s.lowlink,r[t].index)):(o(t),s.lowlink=Math.min(s.lowlink,r[t].lowlink))})),s.lowlink===s.index){var u,l=[];do{u=n.pop(),r[u].onStack=!1,l.push(u)}while(a!==u);i.push(l)}}return t.nodes().forEach((function(t){lr.has(r,t)||o(t)})),i},Ar=lr.constant(1),Mr=Cr;function Cr(t){var e={},n={},r=[];if(lr.each(t.sinks(),(function i(o){if(lr.has(n,o))throw new Tr;lr.has(e,o)||(n[o]=!0,e[o]=!0,lr.each(t.predecessors(o),i),delete n[o],r.push(o))})),lr.size(e)!==t.nodeCount())throw new Tr;return r}function Tr(){}Cr.CycleException=Tr,Tr.prototype=new Error;var kr=function(t,e,n){lr.isArray(e)||(e=[e]);var r=(t.isDirected()?t.successors:t.neighbors).bind(t),i=[],o={};return lr.each(e,(function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);Ir(t,e,"post"===n,o,r,i)})),i};function Ir(t,e,n,r,i,o){lr.has(r,e)||(r[e]=!0,n||o.push(e),lr.each(i(e),(function(e){Ir(t,e,n,r,i,o)})),n&&o.push(e))}var Nr,Pr={Graph:gr.Graph,json:vr,alg:{components:function(t){var e,n={},r=[];function i(r){lr.has(n,r)||(n[r]=!0,e.push(r),lr.each(t.successors(r),i),lr.each(t.predecessors(r),i))}return lr.each(t.nodes(),(function(t){e=[],i(t),e.length&&r.push(e)})),r},dijkstra:_r,dijkstraAll:function(t,e,n){return lr.transform(t.nodes(),(function(r,i){r[i]=_r(t,i,e,n)}),{})},findCycles:function(t){return lr.filter(Er(t),(function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])}))},floydWarshall:function(t,e,n){return function(t,e,n){var r={},i=t.nodes();return i.forEach((function(t){r[t]={},r[t][t]={distance:0},i.forEach((function(e){t!==e&&(r[t][e]={distance:Number.POSITIVE_INFINITY})})),n(t).forEach((function(n){var i=n.v===t?n.w:n.v,o=e(n);r[t][i]={distance:o,predecessor:t}}))})),i.forEach((function(t){var e=r[t];i.forEach((function(n){var o=r[n];i.forEach((function(n){var r=o[t],i=e[n],a=o[n],s=r.distance+i.distance;s<a.distance&&(a.distance=s,a.predecessor=i.predecessor)}))}))})),r}(t,e||Ar,n||function(e){return t.outEdges(e)})},isAcyclic:function(t){try{Mr(t)}catch(t){if(t instanceof Mr.CycleException)return!1;throw t}return!0},postorder:function(t,e){return kr(t,e,"post")},preorder:function(t,e){return kr(t,e,"pre")},prim:function(t,e){var n,r=new cr,i={},o=new xr;function a(t){var r=t.v===n?t.w:t.v,a=o.priority(r);if(void 0!==a){var s=e(t);s<a&&(i[r]=n,o.decrease(r,s))}}if(0===t.nodeCount())return r;lr.each(t.nodes(),(function(t){o.add(t,Number.POSITIVE_INFINITY),r.setNode(t)})),o.decrease(t.nodes()[0],0);for(var s=!1;o.size()>0;){if(n=o.removeMin(),lr.has(i,n))r.setEdge(n,i[n]);else{if(s)throw new Error("Input graph is not connected: "+t);s=!0}t.nodeEdges(n).forEach(a)}return r},tarjan:Er,topsort:Mr},version:gr.version};try{Nr=Pr}catch(r){}Nr||(Nr=window.graphlib);var Or,Lr=Nr,Rr=function(t,e,n){if(!N(n))return!1;var r=typeof e;return!!("number"==r?Ot(n)&&yt(e,n.length):"string"==r&&e in n)&&p(n[e],t)},Dr=Object.prototype,zr=Dr.hasOwnProperty,Fr=tr((function(t,e){t=Object(t);var n=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&Rr(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],a=zt(o),s=-1,u=a.length;++s<u;){var l=a[s],c=t[l];(void 0===c||p(c,Dr[l])&&!zr.call(t,l))&&(t[l]=o[l])}return t})),Br=/^\s+|\s+$/g,Ur=/^[-+]0x[0-9a-f]+$/i,jr=/^0b[01]+$/i,Vr=/^0o[0-7]+$/i,Hr=parseInt,Gr=function(t){return t?1/0===(t=function(t){if("number"==typeof t)return t;if(Ze(t))return NaN;if(N(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=N(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Br,"");var n=jr.test(t);return n||Vr.test(t)?Hr(t.slice(2),n?2:8):Ur.test(t)?NaN:+t}(t))||-1/0===t?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0},Wr=Math.max,Xr=function(t){return function(e,n,r){var i=Object(e);if(!Ot(e)){var o=_n(n);e=Lt(e),n=function(t){return o(i[t],t,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:void 0}}((function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:function(t){var e=Gr(t),n=e%1;return e==e?n?e-n:e:0}(n);return i<0&&(i=Wr(r+i,0)),er(t,_n(e),i)})),Yr=function(t){return null!=t&&t.length?qn(t,1):[]},qr=function(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(void 0===s?a==a&&!Ze(a):n(a,s)))var s=a,u=o}return u},$r=function(t,e){return t>e},Kr=function(t,e,n){(void 0!==n&&!p(t[e],n)||void 0===n&&!(e in t))&&it(t,e,n)},Zr=Function.prototype,Qr=Object.prototype,Jr=Zr.toString,ti=Qr.hasOwnProperty,ei=Jr.call(Object),ni=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]},ri=function(t,e,n,r,i,o,a){var s=ni(t,n),u=ni(e,n),l=a.get(u);if(l)Kr(t,n,l);else{var c=o?o(s,u,n+"",t,e,a):void 0,h=void 0===c;if(h){var d=pt(u),f=!d&&gt(u),p=!d&&!f&&Et(u);c=u,d||f||p?pt(s)?c=s:ar(s)?c=Bt(s):f?(h=!1,c=Ft(u,!0)):p?(h=!1,c=pe(u,!0)):c=[]:function(t){if(!ut(t)||"[object Object]"!=I(t))return!1;var e=Xt(t);if(null===e)return!0;var n=ti.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Jr.call(n)==ei}(u)||ft(u)?(c=s,ft(s)?c=function(t){return st(t,zt(t))}(s):N(s)&&!P(s)||(c=ye(u))):h=!1}h&&(a.set(u,c),i(c,u,r,o,a),a.delete(u)),Kr(t,n,c)}},ii=function t(e,n,r,i,o){e!==n&&Me(n,(function(a,s){if(o||(o=new et),N(a))ri(e,n,s,r,t,i,o);else{var u=i?i(ni(e,s),a,s+"",e,n,o):void 0;void 0===u&&(u=a),Kr(e,s,u)}}),zt)},oi=function(t){return tr((function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,a&&Rr(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var s=n[r];s&&t(e,s,r)}return e}))}((function(t,e,n){ii(t,e,n)})),ai=function(t,e){return t<e},si=function(t,e,n,r){if(!N(t))return t;for(var i=-1,o=(e=fn(e,t)).length,a=o-1,s=t;null!=s&&++i<o;){var u=pn(e[i]),l=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(i!=a){var c=s[u];void 0===(l=r?r(c,u,s):void 0)&&(l=N(c)?c:yt(e[i+1])?[]:{})}at(s,u,l),s=s[u]}return t},ui=function(t,e){return function(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=mn(t,a);n(s,a)&&si(o,fn(a,t),s)}return o}(t,e,(function(e,n){return yn(t,n)}))},li=function(t){return Jn(Kn(t,void 0,Yr),t+"")}((function(t,e){return null==t?{}:ui(t,e)})),ci=Math.ceil,hi=Math.max,di=function(t,e,n){return n&&"number"!=typeof n&&Rr(t,e,n)&&(e=n=void 0),t=Gr(t),void 0===e?(e=t,t=0):e=Gr(e),function(t,e,n,r){for(var i=-1,o=hi(ci((e-t)/(n||1)),0),a=Array(o);o--;)a[r?o:++i]=t,t+=n;return a}(t,e,n=void 0===n?t<e?1:-1:Gr(n),void 0)},fi=function(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t==t,o=Ze(t),a=void 0!==e,s=null===e,u=e==e,l=Ze(e);if(!s&&!l&&!o&&t>e||o&&a&&u&&!s&&!l||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!l&&t<e||l&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0},pi=function(t,e,n){e=e.length?un(e,(function(t){return pt(t)?function(e){return mn(e,1===t.length?t[0]:t)}:t})):[ke];var r=-1;e=un(e,wt(_n));var i=kn(t,(function(t,n,i){return{criteria:un(e,(function(e){return e(t)})),index:++r,value:t}}));return function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(i,(function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var u=fi(i[r],o[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}))},mi=tr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&Rr(t,e[0],e[1])?e=[]:n>2&&Rr(e[0],e[1],e[2])&&(e=[e[0]]),pi(t,qn(e,1),[])})),gi=0;try{Or={cloneDeep:function(t){return Ee(t,5)},constant:Ae,defaults:Fr,each:Pe,filter:Sn,find:Xr,flatten:Yr,forEach:Ne,forIn:function(t,e){return null==t?t:Me(t,Ie(e),zt)},has:Mn,isUndefined:Tn,last:function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0},map:In,mapValues:function(t,e){var n={};return e=_n(e),Ce(t,(function(t,r,i){it(n,r,e(t,r,i))})),n},max:function(t){return t&&t.length?qr(t,ke,$r):void 0},merge:oi,min:function(t){return t&&t.length?qr(t,ke,ai):void 0},minBy:function(t,e){return t&&t.length?qr(t,_n(e),ai):void 0},now:function(){return _.Date.now()},pick:li,range:di,reduce:On,sortBy:mi,uniqueId:function(t){var e=++gi;return dn(t)+e},values:ur,zipObject:function(t,e){return function(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;){var s=r<o?e[r]:void 0;n(a,t[r],s)}return a}(t||[],e||[],at)}}}catch(r){}Or||(Or=window._);var vi=Or,yi=bi;function bi(){var t={};t._next=t._prev=t,this._sentinel=t}function xi(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function wi(t,e){if("_next"!==t&&"_prev"!==t)return e}bi.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return xi(e),e},bi.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&xi(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},bi.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,wi)),n=n._prev;return"["+t.join(", ")+"]"};var _i=Lr.Graph,Si=vi.constant(1);function Ei(t,e,n,r,i){var o=i?[]:void 0;return vi.forEach(t.inEdges(r.v),(function(r){var a=t.edge(r),s=t.node(r.v);i&&o.push({v:r.v,w:r.w}),s.out-=a,Ai(e,n,s)})),vi.forEach(t.outEdges(r.v),(function(r){var i=t.edge(r),o=r.w,a=t.node(o);a.in-=i,Ai(e,n,a)})),t.removeNode(r.v),o}function Ai(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}var Mi=function(t){var e="greedy"===t.graph().acyclicer?function(t,e){if(t.nodeCount()<=1)return[];var n=function(t,e){var n=new _i,r=0,i=0;vi.forEach(t.nodes(),(function(t){n.setNode(t,{v:t,in:0,out:0})})),vi.forEach(t.edges(),(function(t){var o=n.edge(t.v,t.w)||0,a=e(t),s=o+a;n.setEdge(t.v,t.w,s),i=Math.max(i,n.node(t.v).out+=a),r=Math.max(r,n.node(t.w).in+=a)}));var o=vi.range(i+r+3).map((function(){return new yi})),a=r+1;return vi.forEach(n.nodes(),(function(t){Ai(o,a,n.node(t))})),{graph:n,buckets:o,zeroIdx:a}}(t,e||Si),r=function(t,e,n){for(var r,i=[],o=e[e.length-1],a=e[0];t.nodeCount();){for(;r=a.dequeue();)Ei(t,e,n,r);for(;r=o.dequeue();)Ei(t,e,n,r);if(t.nodeCount())for(var s=e.length-2;s>0;--s)if(r=e[s].dequeue()){i=i.concat(Ei(t,e,n,r,!0));break}}return i}(n.graph,n.buckets,n.zeroIdx);return vi.flatten(vi.map(r,(function(e){return t.outEdges(e.v,e.w)})),!0)}(t,function(t){return function(e){return t.edge(e).weight}}(t)):function(t){var e=[],n={},r={};return vi.forEach(t.nodes(),(function i(o){vi.has(r,o)||(r[o]=!0,n[o]=!0,vi.forEach(t.outEdges(o),(function(t){vi.has(n,t.w)?e.push(t):i(t.w)})),delete n[o])})),e}(t);vi.forEach(e,(function(e){var n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,vi.uniqueId("rev"))}))},Ci=function(t){vi.forEach(t.edges(),(function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}}))},Ti=Lr.Graph,ki={addDummyNode:Ii,simplify:function(t){var e=(new Ti).setGraph(t.graph());return vi.forEach(t.nodes(),(function(n){e.setNode(n,t.node(n))})),vi.forEach(t.edges(),(function(n){var r=e.edge(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})})),e},asNonCompoundGraph:function(t){var e=new Ti({multigraph:t.isMultigraph()}).setGraph(t.graph());return vi.forEach(t.nodes(),(function(n){t.children(n).length||e.setNode(n,t.node(n))})),vi.forEach(t.edges(),(function(n){e.setEdge(n,t.edge(n))})),e},successorWeights:function(t){var e=vi.map(t.nodes(),(function(e){var n={};return vi.forEach(t.outEdges(e),(function(e){n[e.w]=(n[e.w]||0)+t.edge(e).weight})),n}));return vi.zipObject(t.nodes(),e)},predecessorWeights:function(t){var e=vi.map(t.nodes(),(function(e){var n={};return vi.forEach(t.inEdges(e),(function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight})),n}));return vi.zipObject(t.nodes(),e)},intersectRect:function(t,e){var n,r,i=t.x,o=t.y,a=e.x-i,s=e.y-o,u=t.width/2,l=t.height/2;if(!a&&!s)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(s)*u>Math.abs(a)*l?(s<0&&(l=-l),n=l*a/s,r=l):(a<0&&(u=-u),n=u,r=u*s/a),{x:i+n,y:o+r}},buildLayerMatrix:function(t){var e=vi.map(vi.range(Ni(t)+1),(function(){return[]}));return vi.forEach(t.nodes(),(function(n){var r=t.node(n),i=r.rank;vi.isUndefined(i)||(e[i][r.order]=n)})),e},normalizeRanks:function(t){var e=vi.min(vi.map(t.nodes(),(function(e){return t.node(e).rank})));vi.forEach(t.nodes(),(function(n){var r=t.node(n);vi.has(r,"rank")&&(r.rank-=e)}))},removeEmptyRanks:function(t){var e=vi.min(vi.map(t.nodes(),(function(e){return t.node(e).rank}))),n=[];vi.forEach(t.nodes(),(function(r){var i=t.node(r).rank-e;n[i]||(n[i]=[]),n[i].push(r)}));var r=0,i=t.graph().nodeRankFactor;vi.forEach(n,(function(e,n){vi.isUndefined(e)&&n%i!=0?--r:r&&vi.forEach(e,(function(e){t.node(e).rank+=r}))}))},addBorderNode:function(t,e,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),Ii(t,"border",i,e)},maxRank:Ni,partition:function(t,e){var n={lhs:[],rhs:[]};return vi.forEach(t,(function(t){e(t)?n.lhs.push(t):n.rhs.push(t)})),n},time:function(t,e){var n=vi.now();try{return e()}finally{console.log(t+" time: "+(vi.now()-n)+"ms")}},notime:function(t,e){return e()}};function Ii(t,e,n,r){var i;do{i=vi.uniqueId(r)}while(t.hasNode(i));return n.dummy=e,t.setNode(i,n),i}function Ni(t){return vi.max(vi.map(t.nodes(),(function(e){var n=t.node(e).rank;if(!vi.isUndefined(n))return n})))}var Pi=function(t){t.graph().dummyChains=[],vi.forEach(t.edges(),(function(e){!function(t,e){var n,r,i,o=e.v,a=t.node(o).rank,s=e.w,u=t.node(s).rank,l=e.name,c=t.edge(e),h=c.labelRank;if(u!==a+1){for(t.removeEdge(e),i=0,++a;a<u;++i,++a)c.points=[],r={width:0,height:0,edgeLabel:c,edgeObj:e,rank:a},n=ki.addDummyNode(t,"edge",r,"_d"),a===h&&(r.width=c.width,r.height=c.height,r.dummy="edge-label",r.labelpos=c.labelpos),t.setEdge(o,n,{weight:c.weight},l),0===i&&t.graph().dummyChains.push(n),o=n;t.setEdge(o,s,{weight:c.weight},l)}}(t,e)}))},Oi=function(t){vi.forEach(t.graph().dummyChains,(function(e){var n,r=t.node(e),i=r.edgeLabel;for(t.setEdge(r.edgeObj,i);r.dummy;)n=t.successors(e)[0],t.removeNode(e),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),e=n,r=t.node(e)}))},Li=function(t){var e={};vi.forEach(t.sources(),(function n(r){var i=t.node(r);if(vi.has(e,r))return i.rank;e[r]=!0;var o=vi.min(vi.map(t.outEdges(r),(function(e){return n(e.w)-t.edge(e).minlen})));return o!==Number.POSITIVE_INFINITY&&null!=o||(o=0),i.rank=o}))},Ri=function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen},Di=Lr.Graph,zi=Ri,Fi=function(t){var e,n,r=new Di({directed:!1}),i=t.nodes()[0],o=t.nodeCount();for(r.setNode(i,{});Bi(r,t)<o;)e=Ui(r,t),n=r.hasNode(e.v)?zi(t,e):-zi(t,e),ji(r,t,n);return r};function Bi(t,e){return vi.forEach(t.nodes(),(function n(r){vi.forEach(e.nodeEdges(r),(function(i){var o=i.v,a=r===o?i.w:o;t.hasNode(a)||zi(e,i)||(t.setNode(a,{}),t.setEdge(r,a,{}),n(a))}))})),t.nodeCount()}function Ui(t,e){return vi.minBy(e.edges(),(function(n){if(t.hasNode(n.v)!==t.hasNode(n.w))return zi(e,n)}))}function ji(t,e,n){vi.forEach(t.nodes(),(function(t){e.node(t).rank+=n}))}var Vi=Ri,Hi=Li,Gi=Lr.alg.preorder,Wi=Lr.alg.postorder,Xi=ki.simplify,Yi=qi;function qi(t){t=Xi(t),Hi(t);var e,n=Fi(t);for(Zi(n),$i(n,t);e=Ji(n);)eo(n,t,e,to(n,t,e))}function $i(t,e){var n=Wi(t,t.nodes());n=n.slice(0,n.length-1),vi.forEach(n,(function(n){!function(t,e,n){var r=t.node(n).parent;t.edge(n,r).cutvalue=Ki(t,e,n)}(t,e,n)}))}function Ki(t,e,n){var r=t.node(n).parent,i=!0,o=e.edge(n,r),a=0;return o||(i=!1,o=e.edge(r,n)),a=o.weight,vi.forEach(e.nodeEdges(n),(function(o){var s,u,l=o.v===n,c=l?o.w:o.v;if(c!==r){var h=l===i,d=e.edge(o).weight;if(a+=h?d:-d,s=n,u=c,t.hasEdge(s,u)){var f=t.edge(n,c).cutvalue;a+=h?-f:f}}})),a}function Zi(t,e){arguments.length<2&&(e=t.nodes()[0]),Qi(t,{},1,e)}function Qi(t,e,n,r,i){var o=n,a=t.node(r);return e[r]=!0,vi.forEach(t.neighbors(r),(function(i){vi.has(e,i)||(n=Qi(t,e,n,i,r))})),a.low=o,a.lim=n++,i?a.parent=i:delete a.parent,n}function Ji(t){return vi.find(t.edges(),(function(e){return t.edge(e).cutvalue<0}))}function to(t,e,n){var r=n.v,i=n.w;e.hasEdge(r,i)||(r=n.w,i=n.v);var o=t.node(r),a=t.node(i),s=o,u=!1;o.lim>a.lim&&(s=a,u=!0);var l=vi.filter(e.edges(),(function(e){return u===no(t,t.node(e.v),s)&&u!==no(t,t.node(e.w),s)}));return vi.minBy(l,(function(t){return Vi(e,t)}))}function eo(t,e,n,r){var i=n.v,o=n.w;t.removeEdge(i,o),t.setEdge(r.v,r.w,{}),Zi(t),$i(t,e),function(t,e){var n=vi.find(t.nodes(),(function(t){return!e.node(t).parent})),r=Gi(t,n);r=r.slice(1),vi.forEach(r,(function(n){var r=t.node(n).parent,i=e.edge(n,r),o=!1;i||(i=e.edge(r,n),o=!0),e.node(n).rank=e.node(r).rank+(o?i.minlen:-i.minlen)}))}(t,e)}function no(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}qi.initLowLimValues=Zi,qi.initCutValues=$i,qi.calcCutValue=Ki,qi.leaveEdge=Ji,qi.enterEdge=to,qi.exchangeEdges=eo;var ro=Li,io=ro;function oo(t){Yi(t)}var ao=function(t){var e=ki.addDummyNode(t,"root",{},"_root"),n=function(t){var e={};function n(r,i){var o=t.children(r);o&&o.length&&vi.forEach(o,(function(t){n(t,i+1)})),e[r]=i}return vi.forEach(t.children(),(function(t){n(t,1)})),e}(t),r=vi.max(vi.values(n))-1,i=2*r+1;t.graph().nestingRoot=e,vi.forEach(t.edges(),(function(e){t.edge(e).minlen*=i}));var o=function(t){return vi.reduce(t.edges(),(function(e,n){return e+t.edge(n).weight}),0)}(t)+1;vi.forEach(t.children(),(function(a){uo(t,e,i,o,r,n,a)})),t.graph().nodeRankFactor=i},so=function(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,vi.forEach(t.edges(),(function(e){t.edge(e).nestingEdge&&t.removeEdge(e)}))};function uo(t,e,n,r,i,o,a){var s=t.children(a);if(s.length){var u=ki.addBorderNode(t,"_bt"),l=ki.addBorderNode(t,"_bb"),c=t.node(a);t.setParent(u,a),c.borderTop=u,t.setParent(l,a),c.borderBottom=l,vi.forEach(s,(function(s){uo(t,e,n,r,i,o,s);var c=t.node(s),h=c.borderTop?c.borderTop:s,d=c.borderBottom?c.borderBottom:s,f=c.borderTop?r:2*r,p=h!==d?1:i-o[a]+1;t.setEdge(u,h,{weight:f,minlen:p,nestingEdge:!0}),t.setEdge(d,l,{weight:f,minlen:p,nestingEdge:!0})})),t.parent(a)||t.setEdge(e,u,{weight:0,minlen:i+o[a]})}else a!==e&&t.setEdge(e,a,{weight:0,minlen:n})}function lo(t,e,n,r,i,o){var a={width:0,height:0,rank:o,borderType:e},s=i[e][o-1],u=ki.addDummyNode(t,"border",a,n);i[e][o]=u,t.setParent(u,r),s&&t.setEdge(s,u,{weight:1})}var co=function(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||fo(t)},ho=function(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||function(t){vi.forEach(t.nodes(),(function(e){mo(t.node(e))})),vi.forEach(t.edges(),(function(e){var n=t.edge(e);vi.forEach(n.points,mo),vi.has(n,"y")&&mo(n)}))}(t),"lr"!==e&&"rl"!==e||(function(t){vi.forEach(t.nodes(),(function(e){go(t.node(e))})),vi.forEach(t.edges(),(function(e){var n=t.edge(e);vi.forEach(n.points,go),vi.has(n,"x")&&go(n)}))}(t),fo(t))};function fo(t){vi.forEach(t.nodes(),(function(e){po(t.node(e))})),vi.forEach(t.edges(),(function(e){po(t.edge(e))}))}function po(t){var e=t.width;t.width=t.height,t.height=e}function mo(t){t.y=-t.y}function go(t){var e=t.x;t.x=t.y,t.y=e}var vo=function(t,e){for(var n=0,r=1;r<e.length;++r)n+=yo(t,e[r-1],e[r]);return n};function yo(t,e,n){for(var r=vi.zipObject(n,vi.map(n,(function(t,e){return e}))),i=vi.flatten(vi.map(e,(function(e){return vi.sortBy(vi.map(t.outEdges(e),(function(e){return{pos:r[e.w],weight:t.edge(e).weight}})),"pos")})),!0),o=1;o<n.length;)o<<=1;var a=2*o-1;o-=1;var s=vi.map(new Array(a),(function(){return 0})),u=0;return vi.forEach(i.forEach((function(t){var e=t.pos+o;s[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=s[e+1]),s[e=e-1>>1]+=t.weight;u+=t.weight*n}))),u}function bo(t,e,n){for(var r;e.length&&(r=vi.last(e)).i<=n;)e.pop(),t.push(r.vs),n++;return n}var xo=function t(e,n,r,i){var o=e.children(n),a=e.node(n),s=a?a.borderLeft:void 0,u=a?a.borderRight:void 0,l={};s&&(o=vi.filter(o,(function(t){return t!==s&&t!==u})));var c=function(t,e){return vi.map(e,(function(e){var n=t.inEdges(e);if(n.length){var r=vi.reduce(n,(function(e,n){var r=t.edge(n),i=t.node(n.v);return{sum:e.sum+r.weight*i.order,weight:e.weight+r.weight}}),{sum:0,weight:0});return{v:e,barycenter:r.sum/r.weight,weight:r.weight}}return{v:e}}))}(e,o);vi.forEach(c,(function(n){if(e.children(n.v).length){var o=t(e,n.v,r,i);l[n.v]=o,vi.has(o,"barycenter")&&(a=n,s=o,vi.isUndefined(a.barycenter)?(a.barycenter=s.barycenter,a.weight=s.weight):(a.barycenter=(a.barycenter*a.weight+s.barycenter*s.weight)/(a.weight+s.weight),a.weight+=s.weight))}var a,s}));var h=function(t,e){var n={};return vi.forEach(t,(function(t,e){var r=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};vi.isUndefined(t.barycenter)||(r.barycenter=t.barycenter,r.weight=t.weight)})),vi.forEach(e.edges(),(function(t){var e=n[t.v],r=n[t.w];vi.isUndefined(e)||vi.isUndefined(r)||(r.indegree++,e.out.push(n[t.w]))})),function(t){var e=[];function n(t){return function(e){e.merged||(vi.isUndefined(e.barycenter)||vi.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&function(t,e){var n=0,r=0;t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.vs=e.vs.concat(t.vs),t.barycenter=n/r,t.weight=r,t.i=Math.min(e.i,t.i),e.merged=!0}(t,e)}}function r(e){return function(n){n.in.push(e),0==--n.indegree&&t.push(n)}}for(;t.length;){var i=t.pop();e.push(i),vi.forEach(i.in.reverse(),n(i)),vi.forEach(i.out,r(i))}return vi.map(vi.filter(e,(function(t){return!t.merged})),(function(t){return vi.pick(t,["vs","i","barycenter","weight"])}))}(vi.filter(n,(function(t){return!t.indegree})))}(c,r);!function(t,e){vi.forEach(t,(function(t){t.vs=vi.flatten(t.vs.map((function(t){return e[t]?e[t].vs:t})),!0)}))}(h,l);var d=function(t,e){var n,r=ki.partition(t,(function(t){return vi.has(t,"barycenter")})),i=r.lhs,o=vi.sortBy(r.rhs,(function(t){return-t.i})),a=[],s=0,u=0,l=0;i.sort((n=!!e,function(t,e){return t.barycenter<e.barycenter?-1:t.barycenter>e.barycenter?1:n?e.i-t.i:t.i-e.i})),l=bo(a,o,l),vi.forEach(i,(function(t){l+=t.vs.length,a.push(t.vs),s+=t.barycenter*t.weight,u+=t.weight,l=bo(a,o,l)}));var c={vs:vi.flatten(a,!0)};return u&&(c.barycenter=s/u,c.weight=u),c}(h,i);if(s&&(d.vs=vi.flatten([s,d.vs,u],!0),e.predecessors(s).length)){var f=e.node(e.predecessors(s)[0]),p=e.node(e.predecessors(u)[0]);vi.has(d,"barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+f.order+p.order)/(d.weight+2),d.weight+=2}return d},wo=Lr.Graph,_o=Lr.Graph,So=function(t){var e=ki.maxRank(t),n=Eo(t,vi.range(1,e+1),"inEdges"),r=Eo(t,vi.range(e-1,-1,-1),"outEdges"),i=function(t){var e={},n=vi.filter(t.nodes(),(function(e){return!t.children(e).length})),r=vi.max(vi.map(n,(function(e){return t.node(e).rank}))),i=vi.map(vi.range(r+1),(function(){return[]})),o=vi.sortBy(n,(function(e){return t.node(e).rank}));return vi.forEach(o,(function n(r){if(!vi.has(e,r)){e[r]=!0;var o=t.node(r);i[o.rank].push(r),vi.forEach(t.successors(r),n)}})),i}(t);Mo(t,i);for(var o,a=Number.POSITIVE_INFINITY,s=0,u=0;u<4;++s,++u){Ao(s%2?n:r,s%4>=2),i=ki.buildLayerMatrix(t);var l=vo(t,i);l<a&&(u=0,o=vi.cloneDeep(i),a=l)}Mo(t,o)};function Eo(t,e,n){return vi.map(e,(function(e){return function(t,e,n){var r=function(t){for(var e;t.hasNode(e=vi.uniqueId("_root")););return e}(t),i=new wo({compound:!0}).setGraph({root:r}).setDefaultNodeLabel((function(e){return t.node(e)}));return vi.forEach(t.nodes(),(function(o){var a=t.node(o),s=t.parent(o);(a.rank===e||a.minRank<=e&&e<=a.maxRank)&&(i.setNode(o),i.setParent(o,s||r),vi.forEach(t[n](o),(function(e){var n=e.v===o?e.w:e.v,r=i.edge(n,o),a=vi.isUndefined(r)?0:r.weight;i.setEdge(n,o,{weight:t.edge(e).weight+a})})),vi.has(a,"minRank")&&i.setNode(o,{borderLeft:a.borderLeft[e],borderRight:a.borderRight[e]}))})),i}(t,e,n)}))}function Ao(t,e){var n=new _o;vi.forEach(t,(function(t){var r=t.graph().root,i=xo(t,r,n,e);vi.forEach(i.vs,(function(e,n){t.node(e).order=n})),function(t,e,n){var r,i={};vi.forEach(n,(function(n){for(var o,a,s=t.parent(n);s;){if((o=t.parent(s))?(a=i[o],i[o]=s):(a=r,r=s),a&&a!==s)return void e.setEdge(a,s);s=o}}))}(t,n,i.vs)}))}function Mo(t,e){vi.forEach(e,(function(e){vi.forEach(e,(function(e,n){t.node(e).order=n}))}))}var Co=Lr.Graph;function To(t,e,n){if(e>n){var r=e;e=n,n=r}var i=t[e];i||(t[e]=i={}),i[n]=!0}function ko(t,e,n){if(e>n){var r=e;e=n,n=r}return vi.has(t[e],n)}var Io=function(t){var e,n=ki.buildLayerMatrix(t),r=vi.merge(function(t,e){var n={};return vi.reduce(e,(function(e,r){var i=0,o=0,a=e.length,s=vi.last(r);return vi.forEach(r,(function(e,u){var l=function(t,e){if(t.node(e).dummy)return vi.find(t.predecessors(e),(function(e){return t.node(e).dummy}))}(t,e),c=l?t.node(l).order:a;(l||e===s)&&(vi.forEach(r.slice(o,u+1),(function(e){vi.forEach(t.predecessors(e),(function(r){var o=t.node(r),a=o.order;!(a<i||c<a)||o.dummy&&t.node(e).dummy||To(n,r,e)}))})),o=u+1,i=c)})),r})),n}(t,n),function(t,e){var n={};function r(e,r,i,o,a){var s;vi.forEach(vi.range(r,i),(function(r){s=e[r],t.node(s).dummy&&vi.forEach(t.predecessors(s),(function(e){var r=t.node(e);r.dummy&&(r.order<o||r.order>a)&&To(n,e,s)}))}))}return vi.reduce(e,(function(e,n){var i,o=-1,a=0;return vi.forEach(n,(function(s,u){if("border"===t.node(s).dummy){var l=t.predecessors(s);l.length&&(i=t.node(l[0]).order,r(n,a,u,o,i),a=u,o=i)}r(n,a,n.length,i,e.length)})),n})),n}(t,n)),i={};vi.forEach(["u","d"],(function(o){e="u"===o?n:vi.values(n).reverse(),vi.forEach(["l","r"],(function(n){"r"===n&&(e=vi.map(e,(function(t){return vi.values(t).reverse()})));var a=("u"===o?t.predecessors:t.successors).bind(t),s=function(t,e,n,r){var i={},o={},a={};return vi.forEach(e,(function(t){vi.forEach(t,(function(t,e){i[t]=t,o[t]=t,a[t]=e}))})),vi.forEach(e,(function(t){var e=-1;vi.forEach(t,(function(t){var s=r(t);if(s.length)for(var u=((s=vi.sortBy(s,(function(t){return a[t]}))).length-1)/2,l=Math.floor(u),c=Math.ceil(u);l<=c;++l){var h=s[l];o[t]===t&&e<a[h]&&!ko(n,t,h)&&(o[h]=t,o[t]=i[t]=i[h],e=a[h])}}))})),{root:i,align:o}}(0,e,r,a),u=function(t,e,n,r,i){var o={},a=function(t,e,n,r){var i=new Co,o=t.graph(),a=function(t,e,n){return function(r,i,o){var a,s=r.node(i),u=r.node(o),l=0;if(l+=s.width/2,vi.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":a=-s.width/2;break;case"r":a=s.width/2}if(a&&(l+=n?a:-a),a=0,l+=(s.dummy?e:t)/2,l+=(u.dummy?e:t)/2,l+=u.width/2,vi.has(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":a=u.width/2;break;case"r":a=-u.width/2}return a&&(l+=n?a:-a),a=0,l}}(o.nodesep,o.edgesep,r);return vi.forEach(e,(function(e){var r;vi.forEach(e,(function(e){var o=n[e];if(i.setNode(o),r){var s=n[r],u=i.edge(s,o);i.setEdge(s,o,Math.max(a(t,e,r),u||0))}r=e}))})),i}(t,e,n,i),s=i?"borderLeft":"borderRight";function u(t,e){for(var n=a.nodes(),r=n.pop(),i={};r;)i[r]?t(r):(i[r]=!0,n.push(r),n=n.concat(e(r))),r=n.pop()}return u((function(t){o[t]=a.inEdges(t).reduce((function(t,e){return Math.max(t,o[e.v]+a.edge(e))}),0)}),a.predecessors.bind(a)),u((function(e){var n=a.outEdges(e).reduce((function(t,e){return Math.min(t,o[e.w]-a.edge(e))}),Number.POSITIVE_INFINITY),r=t.node(e);n!==Number.POSITIVE_INFINITY&&r.borderType!==s&&(o[e]=Math.max(o[e],n))}),a.successors.bind(a)),vi.forEach(r,(function(t){o[t]=o[n[t]]})),o}(t,e,s.root,s.align,"r"===n);"r"===n&&(u=vi.mapValues(u,(function(t){return-t}))),i[o+n]=u}))}));var o=function(t,e){return vi.minBy(vi.values(e),(function(e){var n=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;return vi.forIn(e,(function(e,i){var o=function(t,e){return t.node(e).width}(t,i)/2;n=Math.max(e+o,n),r=Math.min(e-o,r)})),n-r}))}(t,i);return function(t,e){var n=vi.values(e),r=vi.min(n),i=vi.max(n);vi.forEach(["u","d"],(function(n){vi.forEach(["l","r"],(function(o){var a,s=n+o,u=t[s];if(u!==e){var l=vi.values(u);(a="l"===o?r-vi.min(l):i-vi.max(l))&&(t[s]=vi.mapValues(u,(function(t){return t+a})))}}))}))}(i,o),function(t,e){return vi.mapValues(t.ul,(function(n,r){if(e)return t[e.toLowerCase()][r];var i=vi.sortBy(vi.map(t,r));return(i[1]+i[2])/2}))}(i,t.graph().align)},No=ki.normalizeRanks,Po=ki.removeEmptyRanks,Oo=ki,Lo=Lr.Graph,Ro=["nodesep","edgesep","ranksep","marginx","marginy"],Do={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},zo=["acyclicer","ranker","rankdir","align"],Fo=["width","height"],Bo={width:0,height:0},Uo=["minlen","weight","width","height","labeloffset"],jo={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Vo=["labelpos"];function Ho(t,e){return vi.mapValues(vi.pick(t,e),Number)}function Go(t){var e={};return vi.forEach(t,(function(t,n){e[n.toLowerCase()]=t})),e}var Wo=Lr.Graph,Xo={graphlib:Lr,layout:function(t,e){var n=e&&e.debugTiming?Oo.time:Oo.notime;n("layout",(function(){var e=n("  buildLayoutGraph",(function(){return function(t){var e=new Lo({multigraph:!0,compound:!0}),n=Go(t.graph());return e.setGraph(vi.merge({},Do,Ho(n,Ro),vi.pick(n,zo))),vi.forEach(t.nodes(),(function(n){var r=Go(t.node(n));e.setNode(n,vi.defaults(Ho(r,Fo),Bo)),e.setParent(n,t.parent(n))})),vi.forEach(t.edges(),(function(n){var r=Go(t.edge(n));e.setEdge(n,vi.merge({},jo,Ho(r,Uo),vi.pick(r,Vo)))})),e}(t)}));n("  runLayout",(function(){!function(t,e){e("    makeSpaceForEdgeLabels",(function(){!function(t){var e=t.graph();e.ranksep/=2,vi.forEach(t.edges(),(function(n){var r=t.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)}))}(t)})),e("    removeSelfEdges",(function(){!function(t){vi.forEach(t.edges(),(function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e,label:t.edge(e)}),t.removeEdge(e)}}))}(t)})),e("    acyclic",(function(){Mi(t)})),e("    nestingGraph.run",(function(){ao(t)})),e("    rank",(function(){!function(t){switch(t.graph().ranker){case"network-simplex":default:oo(t);break;case"tight-tree":!function(t){ro(t),Fi(t)}(t);break;case"longest-path":io(t)}}(Oo.asNonCompoundGraph(t))})),e("    injectEdgeLabelProxies",(function(){!function(t){vi.forEach(t.edges(),(function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),i={rank:(t.node(e.w).rank-r.rank)/2+r.rank,e};Oo.addDummyNode(t,"edge-proxy",i,"_ep")}}))}(t)})),e("    removeEmptyRanks",(function(){Po(t)})),e("    nestingGraph.cleanup",(function(){so(t)})),e("    normalizeRanks",(function(){No(t)})),e("    assignRankMinMax",(function(){!function(t){var e=0;vi.forEach(t.nodes(),(function(n){var r=t.node(n);r.borderTop&&(r.minRank=t.node(r.borderTop).rank,r.maxRank=t.node(r.borderBottom).rank,e=vi.max(e,r.maxRank))})),t.graph().maxRank=e}(t)})),e("    removeEdgeLabelProxies",(function(){!function(t){vi.forEach(t.nodes(),(function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))}))}(t)})),e("    normalize.run",(function(){Pi(t)})),e("    parentDummyChains",(function(){!function(t){var e=function(t){var e={},n=0;return vi.forEach(t.children(),(function r(i){var o=n;vi.forEach(t.children(i),r),e[i]={low:o,lim:n++}})),e}(t);vi.forEach(t.graph().dummyChains,(function(n){for(var r=t.node(n),i=r.edgeObj,o=function(t,e,n,r){var i,o,a=[],s=[],u=Math.min(e[n].low,e[r].low),l=Math.max(e[n].lim,e[r].lim);i=n;do{i=t.parent(i),a.push(i)}while(i&&(e[i].low>u||l>e[i].lim));for(o=i,i=r;(i=t.parent(i))!==o;)s.push(i);return{path:a.concat(s.reverse()),lca:o}}(t,e,i.v,i.w),a=o.path,s=o.lca,u=0,l=a[u],c=!0;n!==i.w;){if(r=t.node(n),c){for(;(l=a[u])!==s&&t.node(l).maxRank<r.rank;)u++;l===s&&(c=!1)}if(!c){for(;u<a.length-1&&t.node(l=a[u+1]).minRank<=r.rank;)u++;l=a[u]}t.setParent(n,l),n=t.successors(n)[0]}}))}(t)})),e("    addBorderSegments",(function(){!function(t){vi.forEach(t.children(),(function e(n){var r=t.children(n),i=t.node(n);if(r.length&&vi.forEach(r,e),vi.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var o=i.minRank,a=i.maxRank+1;o<a;++o)lo(t,"borderLeft","_bl",n,i,o),lo(t,"borderRight","_br",n,i,o)}}))}(t)})),e("    order",(function(){So(t)})),e("    insertSelfEdges",(function(){!function(t){var e=Oo.buildLayerMatrix(t);vi.forEach(e,(function(e){var n=0;vi.forEach(e,(function(e,r){var i=t.node(e);i.order=r+n,vi.forEach(i.selfEdges,(function(e){Oo.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:i.rank,order:r+ ++n,e:e.e,label:e.label},"_se")})),delete i.selfEdges}))}))}(t)})),e("    adjustCoordinateSystem",(function(){co(t)})),e("    position",(function(){!function(t){(function(t){var e=ki.buildLayerMatrix(t),n=t.graph().ranksep,r=0;vi.forEach(e,(function(e){var i=vi.max(vi.map(e,(function(e){return t.node(e).height})));vi.forEach(e,(function(e){t.node(e).y=r+i/2})),r+=i+n}))})(t=ki.asNonCompoundGraph(t)),vi.forEach(Io(t),(function(e,n){t.node(n).x=e}))}(t)})),e("    positionSelfEdges",(function(){!function(t){vi.forEach(t.nodes(),(function(e){var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),i=r.x+r.width/2,o=r.y,a=n.x-i,s=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*a/3,y:o-s},{x:i+5*a/6,y:o-s},{x:i+a,y:o},{x:i+5*a/6,y:o+s},{x:i+2*a/3,y:o+s}],n.label.x=n.x,n.label.y=n.y}}))}(t)})),e("    removeBorderNodes",(function(){!function(t){vi.forEach(t.nodes(),(function(e){if(t.children(e).length){var n=t.node(e),r=t.node(n.borderTop),i=t.node(n.borderBottom),o=t.node(vi.last(n.borderLeft)),a=t.node(vi.last(n.borderRight));n.width=Math.abs(a.x-o.x),n.height=Math.abs(i.y-r.y),n.x=o.x+n.width/2,n.y=r.y+n.height/2}})),vi.forEach(t.nodes(),(function(e){"border"===t.node(e).dummy&&t.removeNode(e)}))}(t)})),e("    normalize.undo",(function(){Oi(t)})),e("    fixupEdgeLabelCoords",(function(){!function(t){vi.forEach(t.edges(),(function(e){var n=t.edge(e);if(vi.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}}))}(t)})),e("    undoCoordinateSystem",(function(){ho(t)})),e("    translateGraph",(function(){!function(t){var e=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,i=0,o=t.graph(),a=o.marginx||0,s=o.marginy||0;function u(t){var o=t.x,a=t.y,s=t.width,u=t.height;e=Math.min(e,o-s/2),n=Math.max(n,o+s/2),r=Math.min(r,a-u/2),i=Math.max(i,a+u/2)}vi.forEach(t.nodes(),(function(e){u(t.node(e))})),vi.forEach(t.edges(),(function(e){var n=t.edge(e);vi.has(n,"x")&&u(n)})),e-=a,r-=s,vi.forEach(t.nodes(),(function(n){var i=t.node(n);i.x-=e,i.y-=r})),vi.forEach(t.edges(),(function(n){var i=t.edge(n);vi.forEach(i.points,(function(t){t.x-=e,t.y-=r})),vi.has(i,"x")&&(i.x-=e),vi.has(i,"y")&&(i.y-=r)})),o.width=n-e+a,o.height=i-r+s}(t)})),e("    assignNodeIntersects",(function(){!function(t){vi.forEach(t.edges(),(function(e){var n,r,i=t.edge(e),o=t.node(e.v),a=t.node(e.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=a,r=o),i.points.unshift(Oo.intersectRect(o,n)),i.points.push(Oo.intersectRect(a,r))}))}(t)})),e("    reversePoints",(function(){!function(t){vi.forEach(t.edges(),(function(e){var n=t.edge(e);n.reversed&&n.points.reverse()}))}(t)})),e("    acyclic.undo",(function(){Ci(t)}))}(e,n)})),n("  updateInputGraph",(function(){!function(t,e){vi.forEach(t.nodes(),(function(n){var r=t.node(n),i=e.node(n);r&&(r.x=i.x,r.y=i.y,e.children(n).length&&(r.width=i.width,r.height=i.height))})),vi.forEach(t.edges(),(function(n){var r=t.edge(n),i=e.edge(n);r.points=i.points,vi.has(i,"x")&&(r.x=i.x,r.y=i.y)})),t.graph().width=e.graph().width,t.graph().height=e.graph().height}(t,e)}))}))},debug:{debugOrdering:function(t){var e=ki.buildLayerMatrix(t),n=new Wo({compound:!0,multigraph:!0}).setGraph({});return vi.forEach(t.nodes(),(function(e){n.setNode(e,{label:e}),n.setParent(e,"layer"+t.node(e).rank)})),vi.forEach(t.edges(),(function(t){n.setEdge(t.v,t.w,{},t.name)})),vi.forEach(e,(function(t,e){var r="layer"+e;n.setNode(r,{rank:"same"}),vi.reduce(t,(function(t,e){return n.setEdge(t,e,{style:"invis"}),e}))})),n}},util:{time:ki.time,notime:ki.notime},version:"0.8.5"},Yo=Xo.graphlib,qo=Xo.layout;class $o{constructor(t){this.cardinality=1,this.include=l.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=u.NODE,this.name=t.name,this.attr=t.attr||{},this.inputs=t.inputs,this.path=t.path||[],this.width=t.width,this.height=t.height}}class Ko{constructor(){this.nodes={},this.edges=[],this.nodes={},this.edges=[]}}class Zo{constructor(t,e={}){this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=l.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=u.META,this.path=[],this.name=t,this.metaGraph=ea(t,c.META,e)}getFirstChild(){return this.metaGraph.node(this.metaGraph.nodes()[0])}getChildren(){return this.metaGraph.nodes().map((t=>this.metaGraph.node(t)))}leaves(){let t,e=[],n=[this];for(;n.length;){let r=n.shift();r.isGroupNode?(t=r.metaGraph,t.nodes().forEach((e=>n.push(t.node(e))))):e.push(r.name)}return e}}class Qo{constructor(t,e){this.v=t,this.w=e,this.baseEdgeList=[],this.inbound=null,this.name=null}addBaseEdge(t,e){this.baseEdgeList.push(t)}}function Jo(t,e={}){return new Zo(t,e)}function ta(t,e){return new Qo(t,e)}function ea(t,e,n){const r=n||{},i=new Yo.Graph(r);return i.setGraph({name:t,rankdir:r.rankdir,type:e,align:r.align}),i}class na{constructor(t={}){this.graphOptions=t,this.index={},this.graphOptions.compound=!0,this.root=Jo(a,this.graphOptions),this.index[a]=this.root}getNodeMap(){return this.index}node(t){return this.index[t]}setNode(t,e){this.index[t]=e}getBridgeGraph(t){const e=this.index[t];if(!e)throw Error("Could not find node in hierarchy: "+t);if(!("metaGraph"in e))return null;const n=e;if(n.bridgeGraph)return n.bridgeGraph;const r=ea(s,c.BRIDGE,this.graphOptions);if(n.bridgeGraph=r,!e.parentNode||!("metaGraph"in e.parentNode))return r;const i=e.parentNode;return[i.metaGraph,this.getBridgeGraph(i.name)].forEach((e=>{e.edges().filter((e=>e.v===t||e.w===t)).forEach((n=>{const i=n.w===t;e.edge(n).baseEdgeList.forEach((e=>{const[o,a]=i?[e.w,n.v]:[e.v,n.w],s=this.getChildName(t,o),u={v:i?a:s,w:i?s:a};let l=r.edge(u);l||(l=ta(u.v,u.w),l.inbound=i,r.setEdge(u.v,u.w,l)),l.addBaseEdge(e,this)}))}))})),r}getChildName(t,e){let n=this.index[e];for(;n;){if(n.parentNode&&n.parentNode.name===t)return n.name;n=n.parentNode}throw Error("Could not find immediate child for descendant: "+e)}getPredecessors(t){const e=this.index[t];if(!e)throw Error("Could not find node with name: "+t);return this.getOneWayEdges(e,!0)}getSuccessors(t){const e=this.index[t];if(!e)throw Error("Could not find node with name: "+t);return this.getOneWayEdges(e,!1)}getOneWayEdges(t,e){const n=[];if(!t.parentNode||!t.parentNode.isGroupNode)return n;const r=t.parentNode,i=r.metaGraph,o=this.getBridgeGraph(r.name);return ra(i,t,e,n),ra(o,t,e,n),n}}function ra(t,e,n,r){(n?t.inEdges(e.name):t.outEdges(e.name)).forEach((e=>{const n=t.edge(e);r.push(n)}))}class ia{constructor(t){this.hierarchy=t,this.index={},this.hasSubHierarchy={},this.root=new sa(this.hierarchy.root,this.hierarchy.graphOptions),this.index[t.root.name]=this.root,this.buildSubHierarchy(t.root.name),this.root.expanded=!0}getRenderInfoNodes(){return Object.values(this.index)}getSubHierarchy(){return this.hasSubHierarchy}buildSubHierarchy(t){if(t in this.hasSubHierarchy)return;this.hasSubHierarchy[t]=!0;const e=this.index[t];if(e.node.type!==u.META)return;const n=e,r=n.node.metaGraph,i=n.coreGraph;r.nodes().forEach((t=>{const e=this.getOrCreateRenderNodeByName(t);i.setNode(t,e)})),r.edges().forEach((t=>{const e=r.edge(t),n=new aa(e);i.setEdge(t.v,t.w,n)}));const o=n.node.parentNode;if(!o)return;const a=this.getRenderNodeByName(o.name),s=(t,...e)=>e.concat([t?"IN":"OUT"]).join("~~"),c=this.hierarchy.getBridgeGraph(t);c.edges().forEach((e=>{const n=c.edge(e),h=!!r.node(e.w),[d,f]=h?[e.w,e.v]:[e.v,e.w],p=e=>{const n=h?{v:e,w:t}:{v:t,w:e};return a.coreGraph.edge(n)};let m=p(f);m||(m=p(s(h,f,o.name)));const g=s(h,t),v=s(h,f,t);let y=i.node(v);if(!y){let t=i.node(g);if(!t){const e={name:g,type:u.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:l.UNSPECIFIED,inbound:h,attr:{}};t=new oa(e),this.index[g]=t,i.setNode(g,t)}const e={name:v,type:u.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:l.UNSPECIFIED,inbound:h,attr:{}};y=new oa(e),this.index[v]=y,i.setNode(v,y),i.setParent(v,g),t.node.cardinality++}const b=new aa(n);b.adjoiningMetaEdge=m,h?i.setEdge(v,d,b):i.setEdge(d,v,b)}))}getOrCreateRenderNodeByName(t){if(!t)return null;if(t in this.index)return this.index[t];const e=this.getNodeByName(t);return e?(this.index[t]=e.isGroupNode?new sa(e,this.hierarchy.graphOptions):new oa(e),this.index[t]):null}getRenderNodeByName(t){return this.index[t]}getNodeByName(t){return this.hierarchy.node(t)}}class oa{constructor(t){this.node=t,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=t.width||0,this.height=t.height||0,this.displayName=t.name,this.attr=t.attr}}class aa{constructor(t){this.metaEdge=t,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}}class sa extends oa{constructor(t,e){super(t);const n=t.metaGraph.graph();e.compound=!0,this.coreGraph=ea(n.name,c.CORE,e)}}function ua(t,e){t.node.isGroupNode&&function(t,e){const n=i(e);t.coreGraph.nodes().map((e=>t.coreGraph.node(e))).forEach((t=>{var r,i,o,a,s,l;const{height:c,width:h}=t;switch(t.node.type){case u.NODE:Object.assign(t,n.nodeSize.node),t.height=c||n.nodeSize.node.height,t.width=h||n.nodeSize.node.width;break;case u.BRIDGE:Object.assign(t,n.nodeSize.bridge);break;case u.META:t.expanded?ua(t,e):(Object.assign(t,n.nodeSize.meta),t.height=n.nodeSize.meta.height,t.width=n.nodeSize.meta.width);break;default:throw Error("Unrecognized node type: "+t.node.type)}if(!t.expanded){const n=t.attr;!function(t,e=!1){if(t.coreBox.width=t.width,t.coreBox.height=t.height,!e){const e=`${t.displayName}`.length,n=3;t.width=Math.max(t.coreBox.width,e*n)}}(t,e&&(0===t.node.type&&!!(null===(i=null===(r=null==e?void 0:e.nodeSize)||void 0===r?void 0:r.meta)||void 0===i?void 0:i.width)||1===t.node.type&&(!!(null===(a=null===(o=null==e?void 0:e.nodeSize)||void 0===o?void 0:o.node)||void 0===a?void 0:a.width)||!!n.width)||2===t.node.type&&!!(null===(l=null===(s=null==e?void 0:e.nodeSize)||void 0===s?void 0:s.bridge)||void 0===l?void 0:l.width)))}}))}(t,e),t.node.type===u.META&&function(t,e){const n=i(e),r=n.subScene.meta;Object.assign(t,r);const{nodeSep:o,rankSep:a,edgeSep:s,align:l}=n.graph.meta,c={nodesep:o,ranksep:a,edgesep:s,align:l};Object.assign(t.coreBox,function(t,e){const{ranksep:n,nodesep:r,edgesep:i,align:o}=e;Object.assign(t.graph(),{ranksep:n,nodesep:r,edgesep:i,align:o});const a=[];if(t.nodes().forEach((e=>{t.node(e).node.type!==u.BRIDGE&&a.push(e)})),!a.length)return{width:0,height:0};qo(t);let s=1/0,l=1/0,c=-1/0,h=-1/0;return a.forEach((e=>{const n=t.node(e),r=.5*n.width,i=n.x-r,o=n.x+r;s=i<s?i:s,c=o>c?o:c;const a=.5*n.height,u=n.y-a,d=n.y+a;l=u<l?u:l,h=d>h?d:h})),t.edges().forEach((e=>{const n=t.edge(e),r=t.node(n.metaEdge.v),i=t.node(n.metaEdge.w);if(3===n.points.length&&function(t){let e=la(t[0],t[1]);for(let n=1;n<t.length-1;n++){const r=la(t[n],t[n+1]);if(Math.abs(r-e)>1)return!1;e=r}return!0}(n.points)){if(null!=r){const t=r.expanded?r.x:ca(r);n.points[0].x=t}if(null!=i){const t=i.expanded?i.x:ca(i);n.points[2].x=t}n.points=[n.points[0],n.points[1]]}const o=n.points[n.points.length-2];null!=i&&(n.points[n.points.length-1]=ha(o,i));const a=n.points[1];null!=r&&(n.points[0]=ha(a,r)),n.points.forEach((t=>{s=t.x<s?t.x:s,c=t.x>c?t.x:c,l=t.y<l?t.y:l,h=t.y>h?t.y:h}))})),t.nodes().forEach((e=>{const n=t.node(e);n.x-=s,n.y-=l})),t.edges().forEach((e=>{t.edge(e).points.forEach((t=>{t.x-=s,t.y-=l}))})),{width:c-s,height:h-l}}(t.coreGraph,c));let h=0;t.coreGraph.nodeCount()>0&&h++;const d=h<=1?0:h;t.coreBox.width+=d+d,t.coreBox.height=r.labelHeight+t.coreBox.height,t.width=t.coreBox.width+r.paddingLeft+r.paddingRight,t.height=t.paddingTop+t.coreBox.height+t.paddingBottom}(t,e)}function la(t,e){const n=e.x-t.x,r=e.y-t.y;return 180*Math.atan(r/n)/Math.PI}function ca(t){return t.expanded?t.x:t.x-t.width/2+0+t.coreBox.width/2}function ha(t,e){const n=e.expanded?e.x:ca(e),r=e.y,i=t.x-n,o=t.y-r;let a,s,u=e.expanded?e.width:e.coreBox.width,l=e.expanded?e.height:e.coreBox.height;return Math.abs(o)*u/2>Math.abs(i)*l/2?(o<0&&(l=-l),a=0===o?0:l/2*i/o,s=l/2):(i<0&&(u=-u),a=u/2,s=0===i?0:u/2*o/i),{x:n+a,y:r+s}}function da(t,e,n){var i,o,a,s;const u=t.nodes.filter(((t,e,n)=>n.findIndex((e=>e.id===t.id))!==e)).map((t=>t.id));if(u.length)throw new Error(`Duplicated ids found: ${u.join(", ")}`);const l=function(t){const e={nodes:[]},n=t.compound,r=Object.keys(n||{}),i=new Map,o=(t,e=[])=>{if(i.has(t))return i.get(t);for(let i=0;i<r.length;i++){let a=r[i];if(n&&-1!==n[a].indexOf(t))return e.unshift(a),o(a,e)}return 0===e.length&&i.set(t,e),e},a=e=>t.edges.filter((t=>t.w===e)).map((t=>({name:t.v})));return t.nodes.forEach((t=>{const n=t.id,r=[...o(n),n];let i=a(n);e.nodes.push({name:n,path:r,inputs:i,width:t.width,height:t.height,attr:Object.assign({},t)})})),e}(t),c=function(t,e){const n=(t,e)=>{for(let n of e.values())if(n.includes(t))return!0;return!1},r=(t,e=[])=>{if(0===Object.keys(t).length)return[...new Set(e)];const i=new Map(Object.keys(t).map((e=>[e,t[e]]))),o={};for(let[t,r]of i)n(t,i)?o[t]=r:e=e.concat(t,r);return r(o,e)};return r(t).filter((t=>e.includes(t)))}(t.compound||{},(null==e?void 0:e.expanded)||[]),h=function(t,e){return function(t){return new ia(t)}(function(t,e){const{rankDirection:n,align:r}=e,i=new na({rankdir:n,align:r});return function(t,e){Object.keys(e.nodes).forEach((n=>{const r=e.nodes[n],i=r.path;let o=t.root;o.depth=Math.max(i.length,o.depth);for(let e=0;e<i.length&&(o.depth=Math.max(o.depth,i.length-e),o.cardinality+=r.cardinality,e!==i.length-1);e++){const n=i[e];let a=t.node(n);a||(a=Jo(n,t.graphOptions),a.path=r.path.slice(0,e+1),a.parentNode=o,t.setNode(n,a),o.metaGraph.setNode(n,a)),o=a}t.setNode(r.name,r),r.parentNode=o,o.metaGraph.setNode(r.name,r)}))}(i,t),function(t,e){const n=t.getNodeMap();let r=[],i=[];const o=(t,e)=>{let n=0;for(;t;)e[n++]=t.name,t=t.parentNode;return n-1};e.edges.forEach((a=>{r=[],i=[];let s=o(e.nodes[a.v],r),u=o(e.nodes[a.w],i);for(;r[s]===i[u];)if(s--,u--,s<0||u<0)throw Error("No difference found between ancestor paths.");const l=n[r[s+1]],c=r[s],h=i[u];let d=l.metaGraph.edge(c,h);d||(d=ta(c,h),l.metaGraph.setEdge(c,h,d)),d.addBaseEdge(a,t)}))}(i,t),i}(function(t){const e=new Ko;return t.nodes.map((t=>new $o(t))).forEach((t=>{e.nodes[t.name]=t,t.inputs.forEach((n=>{!function(t,e,n){n.name!==e.name&&t.edges.push(Object.assign(Object.assign({},n.attr),{v:n.name,w:e.name}))}(e,t,n)}))})),e}(t),e))}(l,{rankDirection:(null===(o=null===(i=null==n?void 0:n.graph)||void 0===i?void 0:i.meta)||void 0===o?void 0:o.rankDir)||(null==e?void 0:e.rankDirection)||r.graph.meta.rankDir,align:(null===(s=null===(a=null==n?void 0:n.graph)||void 0===a?void 0:a.meta)||void 0===s?void 0:s.align)||r.graph.meta.align});return function(t,e){e.forEach((e=>{const n=t.getRenderInfoNodes().find((t=>t.displayName===e));let r=n&&n.node&&n.node.name||"";const i=t.getRenderNodeByName(r);if(!i)throw new Error(`No nodes found: ${r}`);i.expanded=!0,t.buildSubHierarchy(r)}))}(h,c),ua(h.root,n),ma(h.root)}function fa(t,e=!1){const n=JSON.parse(JSON.stringify(t)),r={nodes:[n],edges:[...n.edges]};return n.nodes.forEach((function t(e){(0===e.type||1===e.type)&&r.nodes.push(e),0===e.type&&(r.edges=r.edges.concat(e.edges)),Array.isArray(e.nodes)&&e.nodes.forEach(t)})),e&&r.nodes.forEach((t=>{const e=r.nodes.find((e=>e.id===t.parentNodeName));if(e){const n=e.x-e.width/2+e.paddingLeft,r=e.y-e.height/2+e.labelHeight+e.paddingTop;e.id!==a&&(t.x+=n,t.y+=r),0===t.type&&t.edges.forEach((e=>{e.points.forEach((e=>{e.x+=t.x-t.width/2+t.paddingLeft,e.y+=t.y-t.height/2+t.labelHeight+t.paddingTop}))}))}})),r}function pa(t,e,n,r){var i,o;let s=[];const u=(null===(i=n.find((e=>e.id===t)))||void 0===i?void 0:i.path)||[],l=(null===(o=n.find((t=>t.id===e)))||void 0===o?void 0:o.path)||[],c=[a,...u].slice(0,u.length).reverse(),h=[a,...l].slice(0,l.length);return c.forEach((i=>{const o=n.find((t=>t.id===i));s=s.concat(o.edges.filter((n=>n.baseEdgeList.some((n=>n.v===((null==r?void 0:r.v)||t)&&n.w===((null==r?void 0:r.w)||e))))))})),h.filter((t=>!c.includes(t))).forEach((i=>{const o=n.find((t=>t.id===i));s=s.concat(o.edges.filter((n=>n.baseEdgeList.some((n=>n.v===((null==r?void 0:r.v)||t)&&n.w===((null==r?void 0:r.w)||e))))))})),s}function ma(t){const e=t.coreGraph.nodes().map((e=>t.coreGraph.node(e)));return Object.assign(Object.assign({},ga(t)),{expanded:t.expanded,nodes:t.expanded?(n=e,n.map((t=>t.node.type===u.META?ma(t):ga(t)))):[],edges:t.expanded?va(t):[]});var n}function ga(t){return{id:t.node.name,name:t.node.name,type:t.node.type,cardinality:t.node.cardinality,attr:t.attr,parentNodeName:t.node.parentNode?t.node.parentNode.name:null,coreBox:Object.assign({},t.coreBox),x:t.x,y:t.y,width:t.width,height:t.height,radius:t.radius,labelHeight:t.labelHeight,labelOffset:t.labelOffset,outboxWidth:t.outboxWidth,paddingLeft:t.paddingLeft,paddingTop:t.paddingTop,paddingRight:t.paddingRight,paddingBottom:t.paddingBottom,path:t.node.path}}function va(t){return t.coreGraph.edges().map((e=>({renderInfoEdge:t.coreGraph.edge(e),edge:e}))).filter((({renderInfoEdge:t})=>t.metaEdge)).map((({edge:e,renderInfoEdge:n})=>{const r=function(t,e){const n=e.points.map((t=>Object.assign({},t)));if(e.adjoiningMetaEdge){const r=e.adjoiningMetaEdge.points,i=e.metaEdge.inbound,o=i?r[r.length-1]:r[0],a=n[i?0:n.length-1],s=t.x-t.width/2,u=t.y-t.height/2,l=o.x-s,c=o.y-u,h=-t.paddingLeft,d=-(t.paddingTop+t.labelHeight);a.x=l+h,a.y=c+d}return n}(t,n);return{adjoiningEdge:n.adjoiningMetaEdge?{w:n.adjoiningMetaEdge.metaEdge.w,v:n.adjoiningMetaEdge.metaEdge.v}:null,inbound:n.metaEdge.inbound,w:e.w,v:e.v,points:r,weight:n.weight,baseEdgeList:n.metaEdge.baseEdgeList,parentNodeName:t.node.name}}))}},70551:(t,e,n)=>{"use strict";function r(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}n.d(e,{A:()=>r})},94188:(t,e,n)=>{"use strict";function r(t){if(null===t||!0===t||!1===t)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}n.d(e,{A:()=>r})},21524:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var r=n(94188),i=n(7767),o=n(70551),a=36e5;function s(t,e){(0,o.A)(2,arguments);var n=(0,r.A)(e);return(0,i.A)(t,n*a)}},7767:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var r=n(94188),i=n(10123),o=n(70551);function a(t,e){(0,o.A)(2,arguments);var n=(0,i.A)(t).getTime(),a=(0,r.A)(e);return new Date(n+a)}},70653:(t,e,n)=>{"use strict";n.d(e,{A:()=>Z});var r=n(82284),i=n(70551);var o=n(10123);function a(t){if((0,i.A)(1,arguments),!function(t){return(0,i.A)(1,arguments),t instanceof Date||"object"===(0,r.A)(t)&&"[object Date]"===Object.prototype.toString.call(t)}(t)&&"number"!=typeof t)return!1;var e=(0,o.A)(t);return!isNaN(Number(e))}var s=n(7767),u=n(94188);function l(t){(0,i.A)(1,arguments);var e=(0,o.A)(t),n=e.getUTCDay(),r=(n<1?7:0)+n-1;return e.setUTCDate(e.getUTCDate()-r),e.setUTCHours(0,0,0,0),e}function c(t){(0,i.A)(1,arguments);var e=(0,o.A)(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var a=l(r),s=new Date(0);s.setUTCFullYear(n,0,4),s.setUTCHours(0,0,0,0);var u=l(s);return e.getTime()>=a.getTime()?n+1:e.getTime()>=u.getTime()?n:n-1}function h(t){(0,i.A)(1,arguments);var e=(0,o.A)(t),n=l(e).getTime()-function(t){(0,i.A)(1,arguments);var e=c(t),n=new Date(0);return n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0),l(n)}(e).getTime();return Math.round(n/6048e5)+1}var d={};function f(){return d}function p(t,e){var n,r,a,s,l,c,h,d;(0,i.A)(1,arguments);var p=f(),m=(0,u.A)(null!==(n=null!==(r=null!==(a=null!==(s=null==e?void 0:e.weekStartsOn)&&void 0!==s?s:null==e||null===(l=e.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==a?a:p.weekStartsOn)&&void 0!==r?r:null===(h=p.locale)||void 0===h||null===(d=h.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==n?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=(0,o.A)(t),v=g.getUTCDay(),y=(v<m?7:0)+v-m;return g.setUTCDate(g.getUTCDate()-y),g.setUTCHours(0,0,0,0),g}function m(t,e){var n,r,a,s,l,c,h,d;(0,i.A)(1,arguments);var m=(0,o.A)(t),g=m.getUTCFullYear(),v=f(),y=(0,u.A)(null!==(n=null!==(r=null!==(a=null!==(s=null==e?void 0:e.firstWeekContainsDate)&&void 0!==s?s:null==e||null===(l=e.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==a?a:v.firstWeekContainsDate)&&void 0!==r?r:null===(h=v.locale)||void 0===h||null===(d=h.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==n?n:1);if(!(y>=1&&y<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var b=new Date(0);b.setUTCFullYear(g+1,0,y),b.setUTCHours(0,0,0,0);var x=p(b,e),w=new Date(0);w.setUTCFullYear(g,0,y),w.setUTCHours(0,0,0,0);var _=p(w,e);return m.getTime()>=x.getTime()?g+1:m.getTime()>=_.getTime()?g:g-1}function g(t,e){(0,i.A)(1,arguments);var n=(0,o.A)(t),r=p(n,e).getTime()-function(t,e){var n,r,o,a,s,l,c,h;(0,i.A)(1,arguments);var d=f(),g=(0,u.A)(null!==(n=null!==(r=null!==(o=null!==(a=null==e?void 0:e.firstWeekContainsDate)&&void 0!==a?a:null==e||null===(s=e.locale)||void 0===s||null===(l=s.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==o?o:d.firstWeekContainsDate)&&void 0!==r?r:null===(c=d.locale)||void 0===c||null===(h=c.options)||void 0===h?void 0:h.firstWeekContainsDate)&&void 0!==n?n:1),v=m(t,e),y=new Date(0);return y.setUTCFullYear(v,0,g),y.setUTCHours(0,0,0,0),p(y,e)}(n,e).getTime();return Math.round(r/6048e5)+1}function v(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}const y={y:function(t,e){var n=t.getUTCFullYear(),r=n>0?n:1-n;return v("yy"===e?r%100:r,e.length)},M:function(t,e){var n=t.getUTCMonth();return"M"===e?String(n+1):v(n+1,2)},d:function(t,e){return v(t.getUTCDate(),e.length)},a:function(t,e){var n=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:function(t,e){return v(t.getUTCHours()%12||12,e.length)},H:function(t,e){return v(t.getUTCHours(),e.length)},m:function(t,e){return v(t.getUTCMinutes(),e.length)},s:function(t,e){return v(t.getUTCSeconds(),e.length)},S:function(t,e){var n=e.length,r=t.getUTCMilliseconds();return v(Math.floor(r*Math.pow(10,n-3)),e.length)}};var b="midnight",x="noon",w="morning",_="afternoon",S="evening",E="night",A={G:function(t,e,n){var r=t.getUTCFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if("yo"===e){var r=t.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return y.y(t,e)},Y:function(t,e,n,r){var i=m(t,r),o=i>0?i:1-i;return"YY"===e?v(o%100,2):"Yo"===e?n.ordinalNumber(o,{unit:"year"}):v(o,e.length)},R:function(t,e){return v(c(t),e.length)},u:function(t,e){return v(t.getUTCFullYear(),e.length)},Q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return v(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return v(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){var r=t.getUTCMonth();switch(e){case"M":case"MM":return y.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){var r=t.getUTCMonth();switch(e){case"L":return String(r+1);case"LL":return v(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){var i=g(t,r);return"wo"===e?n.ordinalNumber(i,{unit:"week"}):v(i,e.length)},I:function(t,e,n){var r=h(t);return"Io"===e?n.ordinalNumber(r,{unit:"week"}):v(r,e.length)},d:function(t,e,n){return"do"===e?n.ordinalNumber(t.getUTCDate(),{unit:"date"}):y.d(t,e)},D:function(t,e,n){var r=function(t){(0,i.A)(1,arguments);var e=(0,o.A)(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=n-e.getTime();return Math.floor(r/864e5)+1}(t);return"Do"===e?n.ordinalNumber(r,{unit:"dayOfYear"}):v(r,e.length)},E:function(t,e,n){var r=t.getUTCDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){var i=t.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return v(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){var i=t.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return v(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){var r=t.getUTCDay(),i=0===r?7:r;switch(e){case"i":return String(i);case"ii":return v(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){var r=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,n){var r,i=t.getUTCHours();switch(r=12===i?x:0===i?b:i/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,e,n){var r,i=t.getUTCHours();switch(r=i>=17?S:i>=12?_:i>=4?w:E,e){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,e,n){if("ho"===e){var r=t.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return y.h(t,e)},H:function(t,e,n){return"Ho"===e?n.ordinalNumber(t.getUTCHours(),{unit:"hour"}):y.H(t,e)},K:function(t,e,n){var r=t.getUTCHours()%12;return"Ko"===e?n.ordinalNumber(r,{unit:"hour"}):v(r,e.length)},k:function(t,e,n){var r=t.getUTCHours();return 0===r&&(r=24),"ko"===e?n.ordinalNumber(r,{unit:"hour"}):v(r,e.length)},m:function(t,e,n){return"mo"===e?n.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):y.m(t,e)},s:function(t,e,n){return"so"===e?n.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):y.s(t,e)},S:function(t,e){return y.S(t,e)},X:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();if(0===i)return"Z";switch(e){case"X":return C(i);case"XXXX":case"XX":return T(i);default:return T(i,":")}},x:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();switch(e){case"x":return C(i);case"xxxx":case"xx":return T(i);default:return T(i,":")}},O:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+M(i,":");default:return"GMT"+T(i,":")}},z:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+M(i,":");default:return"GMT"+T(i,":")}},t:function(t,e,n,r){var i=r._originalDate||t;return v(Math.floor(i.getTime()/1e3),e.length)},T:function(t,e,n,r){return v((r._originalDate||t).getTime(),e.length)}};function M(t,e){var n=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),o=r%60;if(0===o)return n+String(i);var a=e||"";return n+String(i)+a+v(o,2)}function C(t,e){return t%60==0?(t>0?"-":"+")+v(Math.abs(t)/60,2):T(t,e)}function T(t,e){var n=e||"",r=t>0?"-":"+",i=Math.abs(t);return r+v(Math.floor(i/60),2)+n+v(i%60,2)}const k=A;var I=function(t,e){switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}},N=function(t,e){switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}},P={p:N,P:function(t,e){var n,r=t.match(/(P+)(p+)?/)||[],i=r[1],o=r[2];if(!o)return I(t,e);switch(i){case"P":n=e.dateTime({width:"short"});break;case"PP":n=e.dateTime({width:"medium"});break;case"PPP":n=e.dateTime({width:"long"});break;default:n=e.dateTime({width:"full"})}return n.replace("{{date}}",I(i,e)).replace("{{time}}",N(o,e))}};const O=P;var L=["D","DD"],R=["YY","YYYY"];function D(t,e,n){if("YYYY"===t)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===t)throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===t)throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===t)throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var z={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};const F=function(t,e,n){var r,i=z[t];return r="string"==typeof i?i:1===e?i.one:i.other.replace("{{count}}",e.toString()),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function B(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}var U={date:B({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:B({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:B({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};var j={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function V(t){return function(e,n){var r;if("formatting"===(null!=n&&n.context?String(n.context):"standalone")&&t.formattingValues){var i=t.defaultFormattingWidth||t.defaultWidth,o=null!=n&&n.width?String(n.width):i;r=t.formattingValues[o]||t.formattingValues[i]}else{var a=t.defaultWidth,s=null!=n&&n.width?String(n.width):t.defaultWidth;r=t.values[s]||t.values[a]}return r[t.argumentCallback?t.argumentCallback(e):e]}}function H(t){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],o=e.match(i);if(!o)return null;var a,s=o[0],u=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(u)?function(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n;return}(u,(function(t){return t.test(s)})):function(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n;return}(u,(function(t){return t.test(s)}));return a=t.valueCallback?t.valueCallback(l):l,{value:a=n.valueCallback?n.valueCallback(a):a,rest:e.slice(s.length)}}}var G;const W={code:"en-US",formatDistance:F,formatLong:U,formatRelative:function(t,e,n,r){return j[t]},localize:{ordinalNumber:function(t,e){var n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:V({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:V({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:V({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:V({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:V({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(G={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(t){return parseInt(t,10)}},function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.match(G.matchPattern);if(!n)return null;var r=n[0],i=t.match(G.parsePattern);if(!i)return null;var o=G.valueCallback?G.valueCallback(i[0]):i[0];return{value:o=e.valueCallback?e.valueCallback(o):o,rest:t.slice(r.length)}}),era:H({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:H({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:H({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:H({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:H({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};var X=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Y=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,q=/^'([^]*?)'?$/,$=/''/g,K=/[a-zA-Z]/;function Z(t,e,n){var r,l,c,h,d,p,m,g,v,y,b,x,w,_,S,E,A,M;(0,i.A)(2,arguments);var C=String(e),T=f(),I=null!==(r=null!==(l=null==n?void 0:n.locale)&&void 0!==l?l:T.locale)&&void 0!==r?r:W,N=(0,u.A)(null!==(c=null!==(h=null!==(d=null!==(p=null==n?void 0:n.firstWeekContainsDate)&&void 0!==p?p:null==n||null===(m=n.locale)||void 0===m||null===(g=m.options)||void 0===g?void 0:g.firstWeekContainsDate)&&void 0!==d?d:T.firstWeekContainsDate)&&void 0!==h?h:null===(v=T.locale)||void 0===v||null===(y=v.options)||void 0===y?void 0:y.firstWeekContainsDate)&&void 0!==c?c:1);if(!(N>=1&&N<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var P=(0,u.A)(null!==(b=null!==(x=null!==(w=null!==(_=null==n?void 0:n.weekStartsOn)&&void 0!==_?_:null==n||null===(S=n.locale)||void 0===S||null===(E=S.options)||void 0===E?void 0:E.weekStartsOn)&&void 0!==w?w:T.weekStartsOn)&&void 0!==x?x:null===(A=T.locale)||void 0===A||null===(M=A.options)||void 0===M?void 0:M.weekStartsOn)&&void 0!==b?b:0);if(!(P>=0&&P<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!I.localize)throw new RangeError("locale must contain localize property");if(!I.formatLong)throw new RangeError("locale must contain formatLong property");var z=(0,o.A)(t);if(!a(z))throw new RangeError("Invalid time value");var F=function(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}(z),B=function(t,e){(0,i.A)(2,arguments);var n=(0,u.A)(e);return(0,s.A)(t,-n)}(z,F),U={firstWeekContainsDate:N,weekStartsOn:P,locale:I,_originalDate:z};return C.match(Y).map((function(t){var e=t[0];return"p"===e||"P"===e?(0,O[e])(t,I.formatLong):t})).join("").match(X).map((function(r){if("''"===r)return"'";var i=r[0];if("'"===i)return function(t){var e=t.match(q);if(!e)return t;return e[1].replace($,"'")}(r);var o,a=k[i];if(a)return null!=n&&n.useAdditionalWeekYearTokens||(o=r,-1===R.indexOf(o))||D(r,e,String(t)),null!=n&&n.useAdditionalDayOfYearTokens||!function(t){return-1!==L.indexOf(t)}(r)||D(r,e,String(t)),a(B,r,I.localize,U);if(i.match(K))throw new RangeError("Format string contains an unescaped latin alphabet character `"+i+"`");return r})).join("")}},35938:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var r=n(94188),i=n(10123),o=n(70551);function a(t,e){return(0,o.A)(2,arguments),function(t,e){(0,o.A)(2,arguments);var n=(0,i.A)(t),a=(0,r.A)(e);return isNaN(a)?new Date(NaN):a?(n.setDate(n.getDate()+a),n):n}(t,-(0,r.A)(e))}},10123:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var r=n(82284),i=n(70551);function o(t){(0,i.A)(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||"object"===(0,r.A)(t)&&"[object Date]"===e?new Date(t.getTime()):"number"==typeof t||"[object Number]"===e?new Date(t):("string"!=typeof t&&"[object String]"!==e||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}},17823:(t,e,n)=>{"use strict";n.r(e),n.d(e,{ARRAY_TYPE:()=>i,EPSILON:()=>r,RANDOM:()=>o,equals:()=>l,setMatrixArrayType:()=>a,toRadian:()=>u});var r=1e-6,i="undefined"!=typeof Float32Array?Float32Array:Array,o=Math.random;function a(t){i=t}var s=Math.PI/180;function u(t){return t*s}function l(t,e){return Math.abs(t-e)<=r*Math.max(1,Math.abs(t),Math.abs(e))}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)})},38274:(t,e,n)=>{"use strict";n.r(e),n.d(e,{glMatrix:()=>l,mat2:()=>r,mat2d:()=>i,mat3:()=>st,mat4:()=>o,quat:()=>s,quat2:()=>u,vec2:()=>Ar,vec3:()=>oe,vec4:()=>a});var r={};n.r(r),n.d(r,{LDU:()=>C,add:()=>T,adjoint:()=>y,clone:()=>h,copy:()=>d,create:()=>c,determinant:()=>b,equals:()=>N,exactEquals:()=>I,frob:()=>M,fromRotation:()=>S,fromScaling:()=>E,fromValues:()=>p,identity:()=>f,invert:()=>v,mul:()=>L,multiply:()=>x,multiplyScalar:()=>P,multiplyScalarAndAdd:()=>O,rotate:()=>w,scale:()=>_,set:()=>m,str:()=>A,sub:()=>R,subtract:()=>k,transpose:()=>g});var i={};n.r(i),n.d(i,{add:()=>J,clone:()=>z,copy:()=>F,create:()=>D,determinant:()=>H,equals:()=>it,exactEquals:()=>rt,frob:()=>Q,fromRotation:()=>q,fromScaling:()=>$,fromTranslation:()=>K,fromValues:()=>U,identity:()=>B,invert:()=>V,mul:()=>ot,multiply:()=>G,multiplyScalar:()=>et,multiplyScalarAndAdd:()=>nt,rotate:()=>W,scale:()=>X,set:()=>j,str:()=>Z,sub:()=>at,subtract:()=>tt,translate:()=>Y});var o={};n.r(o),n.d(o,{add:()=>Zt,adjoint:()=>gt,clone:()=>lt,copy:()=>ct,create:()=>ut,determinant:()=>vt,equals:()=>ne,exactEquals:()=>ee,frob:()=>Kt,fromQuat:()=>Ft,fromQuat2:()=>Pt,fromRotation:()=>Ct,fromRotationTranslation:()=>Nt,fromRotationTranslationScale:()=>Dt,fromRotationTranslationScaleOrigin:()=>zt,fromScaling:()=>Mt,fromTranslation:()=>At,fromValues:()=>ht,fromXRotation:()=>Tt,fromYRotation:()=>kt,fromZRotation:()=>It,frustum:()=>Bt,getRotation:()=>Rt,getScaling:()=>Lt,getTranslation:()=>Ot,identity:()=>ft,invert:()=>mt,lookAt:()=>Yt,mul:()=>re,multiply:()=>yt,multiplyScalar:()=>Jt,multiplyScalarAndAdd:()=>te,ortho:()=>Wt,orthoNO:()=>Gt,orthoZO:()=>Xt,perspective:()=>jt,perspectiveFromFieldOfView:()=>Ht,perspectiveNO:()=>Ut,perspectiveZO:()=>Vt,rotate:()=>wt,rotateX:()=>_t,rotateY:()=>St,rotateZ:()=>Et,scale:()=>xt,set:()=>dt,str:()=>$t,sub:()=>ie,subtract:()=>Qt,targetTo:()=>qt,translate:()=>bt,transpose:()=>pt});var a={};n.r(a),n.d(a,{add:()=>he,ceil:()=>me,clone:()=>se,copy:()=>le,create:()=>ae,cross:()=>Ie,dist:()=>He,distance:()=>_e,div:()=>Ve,divide:()=>pe,dot:()=>ke,equals:()=>Fe,exactEquals:()=>ze,floor:()=>ge,forEach:()=>Ye,fromValues:()=>ue,inverse:()=>Ce,len:()=>We,length:()=>Ee,lerp:()=>Ne,max:()=>ye,min:()=>ve,mul:()=>je,multiply:()=>fe,negate:()=>Me,normalize:()=>Te,random:()=>Pe,round:()=>be,scale:()=>xe,scaleAndAdd:()=>we,set:()=>ce,sqrDist:()=>Ge,sqrLen:()=>Xe,squaredDistance:()=>Se,squaredLength:()=>Ae,str:()=>De,sub:()=>Ue,subtract:()=>de,transformMat4:()=>Oe,transformQuat:()=>Le,zero:()=>Re});var s={};n.r(s),n.d(s,{add:()=>An,calculateW:()=>rn,clone:()=>wn,conjugate:()=>hn,copy:()=>Sn,create:()=>qe,dot:()=>Tn,equals:()=>Dn,exactEquals:()=>Rn,exp:()=>on,fromEuler:()=>fn,fromMat3:()=>dn,fromValues:()=>_n,getAngle:()=>Qe,getAxisAngle:()=>Ze,identity:()=>$e,invert:()=>cn,len:()=>Nn,length:()=>In,lerp:()=>kn,ln:()=>an,mul:()=>Mn,multiply:()=>Je,normalize:()=>Ln,pow:()=>sn,random:()=>ln,rotateX:()=>tn,rotateY:()=>en,rotateZ:()=>nn,rotationTo:()=>zn,scale:()=>Cn,set:()=>En,setAxes:()=>Bn,setAxisAngle:()=>Ke,slerp:()=>un,sqlerp:()=>Fn,sqrLen:()=>On,squaredLength:()=>Pn,str:()=>pn});var u={};n.r(u),n.d(u,{add:()=>lr,clone:()=>jn,conjugate:()=>gr,copy:()=>qn,create:()=>Un,dot:()=>fr,equals:()=>Er,exactEquals:()=>Sr,fromMat4:()=>Yn,fromRotation:()=>Xn,fromRotationTranslation:()=>Gn,fromRotationTranslationValues:()=>Hn,fromTranslation:()=>Wn,fromValues:()=>Vn,getDual:()=>Qn,getReal:()=>Zn,getTranslation:()=>er,identity:()=>$n,invert:()=>mr,len:()=>yr,length:()=>vr,lerp:()=>pr,mul:()=>hr,multiply:()=>cr,normalize:()=>wr,rotateAroundAxis:()=>ur,rotateByQuatAppend:()=>ar,rotateByQuatPrepend:()=>sr,rotateX:()=>rr,rotateY:()=>ir,rotateZ:()=>or,scale:()=>dr,set:()=>Kn,setDual:()=>tr,setReal:()=>Jn,sqrLen:()=>xr,squaredLength:()=>br,str:()=>_r,translate:()=>nr});var l=n(17823);function c(){var t=new l.ARRAY_TYPE(4);return l.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function h(t){var e=new l.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function d(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function f(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function p(t,e,n,r){var i=new l.ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function m(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function g(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function v(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*o-i*r;return a?(a=1/a,t[0]=o*a,t[1]=-r*a,t[2]=-i*a,t[3]=n*a,t):null}function y(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t}function b(t){return t[0]*t[3]-t[2]*t[1]}function x(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],l=n[2],c=n[3];return t[0]=r*s+o*u,t[1]=i*s+a*u,t[2]=r*l+o*c,t[3]=i*l+a*c,t}function w(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=i*u+a*s,t[2]=r*-s+o*u,t[3]=i*-s+a*u,t}function _(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1];return t[0]=r*s,t[1]=i*s,t[2]=o*u,t[3]=a*u,t}function S(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t}function E(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function A(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function M(t){return Math.hypot(t[0],t[1],t[2],t[3])}function C(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]}function T(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function k(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function I(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function N(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=e[0],s=e[1],u=e[2],c=e[3];return Math.abs(n-a)<=l.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=l.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-u)<=l.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-c)<=l.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))}function P(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function O(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}var L=x,R=k;function D(){var t=new l.ARRAY_TYPE(6);return l.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function z(t){var e=new l.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function F(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function B(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function U(t,e,n,r,i,o){var a=new l.ARRAY_TYPE(6);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a[4]=i,a[5]=o,a}function j(t,e,n,r,i,o,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t}function V(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=n*o-r*i;return u?(u=1/u,t[0]=o*u,t[1]=-r*u,t[2]=-i*u,t[3]=n*u,t[4]=(i*s-o*a)*u,t[5]=(r*a-n*s)*u,t):null}function H(t){return t[0]*t[3]-t[1]*t[2]}function G(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=n[0],c=n[1],h=n[2],d=n[3],f=n[4],p=n[5];return t[0]=r*l+o*c,t[1]=i*l+a*c,t[2]=r*h+o*d,t[3]=i*h+a*d,t[4]=r*f+o*p+s,t[5]=i*f+a*p+u,t}function W(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=Math.sin(n),c=Math.cos(n);return t[0]=r*c+o*l,t[1]=i*c+a*l,t[2]=r*-l+o*c,t[3]=i*-l+a*c,t[4]=s,t[5]=u,t}function X(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=n[0],c=n[1];return t[0]=r*l,t[1]=i*l,t[2]=o*c,t[3]=a*c,t[4]=s,t[5]=u,t}function Y(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=n[0],c=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=r*l+o*c+s,t[5]=i*l+a*c+u,t}function q(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t}function $(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function K(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function Z(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function Q(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function J(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t}function tt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}function et(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t}function nt(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t}function rt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function it(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=e[0],c=e[1],h=e[2],d=e[3],f=e[4],p=e[5];return Math.abs(n-u)<=l.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-c)<=l.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(i-h)<=l.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(o-d)<=l.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(a-f)<=l.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(s-p)<=l.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))}var ot=G,at=tt,st=n(91409);function ut(){var t=new l.ARRAY_TYPE(16);return l.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function lt(t){var e=new l.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function ct(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ht(t,e,n,r,i,o,a,s,u,c,h,d,f,p,m,g){var v=new l.ARRAY_TYPE(16);return v[0]=t,v[1]=e,v[2]=n,v[3]=r,v[4]=i,v[5]=o,v[6]=a,v[7]=s,v[8]=u,v[9]=c,v[10]=h,v[11]=d,v[12]=f,v[13]=p,v[14]=m,v[15]=g,v}function dt(t,e,n,r,i,o,a,s,u,l,c,h,d,f,p,m,g){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=l,t[9]=c,t[10]=h,t[11]=d,t[12]=f,t[13]=p,t[14]=m,t[15]=g,t}function ft(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function pt(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function mt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=e[9],d=e[10],f=e[11],p=e[12],m=e[13],g=e[14],v=e[15],y=n*s-r*a,b=n*u-i*a,x=n*l-o*a,w=r*u-i*s,_=r*l-o*s,S=i*l-o*u,E=c*m-h*p,A=c*g-d*p,M=c*v-f*p,C=h*g-d*m,T=h*v-f*m,k=d*v-f*g,I=y*k-b*T+x*C+w*M-_*A+S*E;return I?(I=1/I,t[0]=(s*k-u*T+l*C)*I,t[1]=(i*T-r*k-o*C)*I,t[2]=(m*S-g*_+v*w)*I,t[3]=(d*_-h*S-f*w)*I,t[4]=(u*M-a*k-l*A)*I,t[5]=(n*k-i*M+o*A)*I,t[6]=(g*x-p*S-v*b)*I,t[7]=(c*S-d*x+f*b)*I,t[8]=(a*T-s*M+l*E)*I,t[9]=(r*M-n*T-o*E)*I,t[10]=(p*_-m*x+v*y)*I,t[11]=(h*x-c*_-f*y)*I,t[12]=(s*A-a*C-u*E)*I,t[13]=(n*C-r*A+i*E)*I,t[14]=(m*b-p*w-g*y)*I,t[15]=(c*w-h*b+d*y)*I,t):null}function gt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=e[9],d=e[10],f=e[11],p=e[12],m=e[13],g=e[14],v=e[15];return t[0]=s*(d*v-f*g)-h*(u*v-l*g)+m*(u*f-l*d),t[1]=-(r*(d*v-f*g)-h*(i*v-o*g)+m*(i*f-o*d)),t[2]=r*(u*v-l*g)-s*(i*v-o*g)+m*(i*l-o*u),t[3]=-(r*(u*f-l*d)-s*(i*f-o*d)+h*(i*l-o*u)),t[4]=-(a*(d*v-f*g)-c*(u*v-l*g)+p*(u*f-l*d)),t[5]=n*(d*v-f*g)-c*(i*v-o*g)+p*(i*f-o*d),t[6]=-(n*(u*v-l*g)-a*(i*v-o*g)+p*(i*l-o*u)),t[7]=n*(u*f-l*d)-a*(i*f-o*d)+c*(i*l-o*u),t[8]=a*(h*v-f*m)-c*(s*v-l*m)+p*(s*f-l*h),t[9]=-(n*(h*v-f*m)-c*(r*v-o*m)+p*(r*f-o*h)),t[10]=n*(s*v-l*m)-a*(r*v-o*m)+p*(r*l-o*s),t[11]=-(n*(s*f-l*h)-a*(r*f-o*h)+c*(r*l-o*s)),t[12]=-(a*(h*g-d*m)-c*(s*g-u*m)+p*(s*d-u*h)),t[13]=n*(h*g-d*m)-c*(r*g-i*m)+p*(r*d-i*h),t[14]=-(n*(s*g-u*m)-a*(r*g-i*m)+p*(r*u-i*s)),t[15]=n*(s*d-u*h)-a*(r*d-i*h)+c*(r*u-i*s),t}function vt(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],l=t[8],c=t[9],h=t[10],d=t[11],f=t[12],p=t[13],m=t[14],g=t[15];return(e*a-n*o)*(h*g-d*m)-(e*s-r*o)*(c*g-d*p)+(e*u-i*o)*(c*m-h*p)+(n*s-r*a)*(l*g-d*f)-(n*u-i*a)*(l*m-h*f)+(r*u-i*s)*(l*p-c*f)}function yt(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],d=e[9],f=e[10],p=e[11],m=e[12],g=e[13],v=e[14],y=e[15],b=n[0],x=n[1],w=n[2],_=n[3];return t[0]=b*r+x*s+w*h+_*m,t[1]=b*i+x*u+w*d+_*g,t[2]=b*o+x*l+w*f+_*v,t[3]=b*a+x*c+w*p+_*y,b=n[4],x=n[5],w=n[6],_=n[7],t[4]=b*r+x*s+w*h+_*m,t[5]=b*i+x*u+w*d+_*g,t[6]=b*o+x*l+w*f+_*v,t[7]=b*a+x*c+w*p+_*y,b=n[8],x=n[9],w=n[10],_=n[11],t[8]=b*r+x*s+w*h+_*m,t[9]=b*i+x*u+w*d+_*g,t[10]=b*o+x*l+w*f+_*v,t[11]=b*a+x*c+w*p+_*y,b=n[12],x=n[13],w=n[14],_=n[15],t[12]=b*r+x*s+w*h+_*m,t[13]=b*i+x*u+w*d+_*g,t[14]=b*o+x*l+w*f+_*v,t[15]=b*a+x*c+w*p+_*y,t}function bt(t,e,n){var r,i,o,a,s,u,l,c,h,d,f,p,m=n[0],g=n[1],v=n[2];return e===t?(t[12]=e[0]*m+e[4]*g+e[8]*v+e[12],t[13]=e[1]*m+e[5]*g+e[9]*v+e[13],t[14]=e[2]*m+e[6]*g+e[10]*v+e[14],t[15]=e[3]*m+e[7]*g+e[11]*v+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],d=e[9],f=e[10],p=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=l,t[7]=c,t[8]=h,t[9]=d,t[10]=f,t[11]=p,t[12]=r*m+s*g+h*v+e[12],t[13]=i*m+u*g+d*v+e[13],t[14]=o*m+l*g+f*v+e[14],t[15]=a*m+c*g+p*v+e[15]),t}function xt(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function wt(t,e,n,r){var i,o,a,s,u,c,h,d,f,p,m,g,v,y,b,x,w,_,S,E,A,M,C,T,k=r[0],I=r[1],N=r[2],P=Math.hypot(k,I,N);return P<l.EPSILON?null:(k*=P=1/P,I*=P,N*=P,i=Math.sin(n),a=1-(o=Math.cos(n)),s=e[0],u=e[1],c=e[2],h=e[3],d=e[4],f=e[5],p=e[6],m=e[7],g=e[8],v=e[9],y=e[10],b=e[11],x=k*k*a+o,w=I*k*a+N*i,_=N*k*a-I*i,S=k*I*a-N*i,E=I*I*a+o,A=N*I*a+k*i,M=k*N*a+I*i,C=I*N*a-k*i,T=N*N*a+o,t[0]=s*x+d*w+g*_,t[1]=u*x+f*w+v*_,t[2]=c*x+p*w+y*_,t[3]=h*x+m*w+b*_,t[4]=s*S+d*E+g*A,t[5]=u*S+f*E+v*A,t[6]=c*S+p*E+y*A,t[7]=h*S+m*E+b*A,t[8]=s*M+d*C+g*T,t[9]=u*M+f*C+v*T,t[10]=c*M+p*C+y*T,t[11]=h*M+m*C+b*T,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function _t(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],h=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+l*r,t[5]=a*i+c*r,t[6]=s*i+h*r,t[7]=u*i+d*r,t[8]=l*i-o*r,t[9]=c*i-a*r,t[10]=h*i-s*r,t[11]=d*i-u*r,t}function St(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],l=e[8],c=e[9],h=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-l*r,t[1]=a*i-c*r,t[2]=s*i-h*r,t[3]=u*i-d*r,t[8]=o*r+l*i,t[9]=a*r+c*i,t[10]=s*r+h*i,t[11]=u*r+d*i,t}function Et(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],l=e[4],c=e[5],h=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+l*r,t[1]=a*i+c*r,t[2]=s*i+h*r,t[3]=u*i+d*r,t[4]=l*i-o*r,t[5]=c*i-a*r,t[6]=h*i-s*r,t[7]=d*i-u*r,t}function At(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function Mt(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ct(t,e,n){var r,i,o,a=n[0],s=n[1],u=n[2],c=Math.hypot(a,s,u);return c<l.EPSILON?null:(a*=c=1/c,s*=c,u*=c,r=Math.sin(e),o=1-(i=Math.cos(e)),t[0]=a*a*o+i,t[1]=s*a*o+u*r,t[2]=u*a*o-s*r,t[3]=0,t[4]=a*s*o-u*r,t[5]=s*s*o+i,t[6]=u*s*o+a*r,t[7]=0,t[8]=a*u*o+s*r,t[9]=s*u*o-a*r,t[10]=u*u*o+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function Tt(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function kt(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function It(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Nt(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=r+r,u=i+i,l=o+o,c=r*s,h=r*u,d=r*l,f=i*u,p=i*l,m=o*l,g=a*s,v=a*u,y=a*l;return t[0]=1-(f+m),t[1]=h+y,t[2]=d-v,t[3]=0,t[4]=h-y,t[5]=1-(c+m),t[6]=p+g,t[7]=0,t[8]=d+v,t[9]=p-g,t[10]=1-(c+f),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Pt(t,e){var n=new l.ARRAY_TYPE(3),r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],h=e[7],d=r*r+i*i+o*o+a*a;return d>0?(n[0]=2*(s*a+h*r+u*o-c*i)/d,n[1]=2*(u*a+h*i+c*r-s*o)/d,n[2]=2*(c*a+h*o+s*i-u*r)/d):(n[0]=2*(s*a+h*r+u*o-c*i),n[1]=2*(u*a+h*i+c*r-s*o),n[2]=2*(c*a+h*o+s*i-u*r)),Nt(t,e,n),t}function Ot(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Lt(t,e){var n=e[0],r=e[1],i=e[2],o=e[4],a=e[5],s=e[6],u=e[8],l=e[9],c=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(o,a,s),t[2]=Math.hypot(u,l,c),t}function Rt(t,e){var n=new l.ARRAY_TYPE(3);Lt(n,e);var r=1/n[0],i=1/n[1],o=1/n[2],a=e[0]*r,s=e[1]*i,u=e[2]*o,c=e[4]*r,h=e[5]*i,d=e[6]*o,f=e[8]*r,p=e[9]*i,m=e[10]*o,g=a+h+m,v=0;return g>0?(v=2*Math.sqrt(g+1),t[3]=.25*v,t[0]=(d-p)/v,t[1]=(f-u)/v,t[2]=(s-c)/v):a>h&&a>m?(v=2*Math.sqrt(1+a-h-m),t[3]=(d-p)/v,t[0]=.25*v,t[1]=(s+c)/v,t[2]=(f+u)/v):h>m?(v=2*Math.sqrt(1+h-a-m),t[3]=(f-u)/v,t[0]=(s+c)/v,t[1]=.25*v,t[2]=(d+p)/v):(v=2*Math.sqrt(1+m-a-h),t[3]=(s-c)/v,t[0]=(f+u)/v,t[1]=(d+p)/v,t[2]=.25*v),t}function Dt(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3],u=i+i,l=o+o,c=a+a,h=i*u,d=i*l,f=i*c,p=o*l,m=o*c,g=a*c,v=s*u,y=s*l,b=s*c,x=r[0],w=r[1],_=r[2];return t[0]=(1-(p+g))*x,t[1]=(d+b)*x,t[2]=(f-y)*x,t[3]=0,t[4]=(d-b)*w,t[5]=(1-(h+g))*w,t[6]=(m+v)*w,t[7]=0,t[8]=(f+y)*_,t[9]=(m-v)*_,t[10]=(1-(h+p))*_,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function zt(t,e,n,r,i){var o=e[0],a=e[1],s=e[2],u=e[3],l=o+o,c=a+a,h=s+s,d=o*l,f=o*c,p=o*h,m=a*c,g=a*h,v=s*h,y=u*l,b=u*c,x=u*h,w=r[0],_=r[1],S=r[2],E=i[0],A=i[1],M=i[2],C=(1-(m+v))*w,T=(f+x)*w,k=(p-b)*w,I=(f-x)*_,N=(1-(d+v))*_,P=(g+y)*_,O=(p+b)*S,L=(g-y)*S,R=(1-(d+m))*S;return t[0]=C,t[1]=T,t[2]=k,t[3]=0,t[4]=I,t[5]=N,t[6]=P,t[7]=0,t[8]=O,t[9]=L,t[10]=R,t[11]=0,t[12]=n[0]+E-(C*E+I*A+O*M),t[13]=n[1]+A-(T*E+N*A+L*M),t[14]=n[2]+M-(k*E+P*A+R*M),t[15]=1,t}function Ft(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,l=n*a,c=r*a,h=r*s,d=i*a,f=i*s,p=i*u,m=o*a,g=o*s,v=o*u;return t[0]=1-h-p,t[1]=c+v,t[2]=d-g,t[3]=0,t[4]=c-v,t[5]=1-l-p,t[6]=f+m,t[7]=0,t[8]=d+g,t[9]=f-m,t[10]=1-l-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Bt(t,e,n,r,i,o,a){var s=1/(n-e),u=1/(i-r),l=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*u,t[10]=(a+o)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*l,t[15]=0,t}function Ut(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}var jt=Ut;function Vt(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=i*o,t[14]=i*r*o):(t[10]=-1,t[14]=-r),t}function Ht(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+s),l=2/(i+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(a-s)*u*.5,t[9]=(i-o)*l*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function Gt(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),l=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*l,t[15]=1,t}var Wt=Gt;function Xt(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),l=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=l,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=o*l,t[15]=1,t}function Yt(t,e,n,r){var i,o,a,s,u,c,h,d,f,p,m=e[0],g=e[1],v=e[2],y=r[0],b=r[1],x=r[2],w=n[0],_=n[1],S=n[2];return Math.abs(m-w)<l.EPSILON&&Math.abs(g-_)<l.EPSILON&&Math.abs(v-S)<l.EPSILON?ft(t):(h=m-w,d=g-_,f=v-S,i=b*(f*=p=1/Math.hypot(h,d,f))-x*(d*=p),o=x*(h*=p)-y*f,a=y*d-b*h,(p=Math.hypot(i,o,a))?(i*=p=1/p,o*=p,a*=p):(i=0,o=0,a=0),s=d*a-f*o,u=f*i-h*a,c=h*o-d*i,(p=Math.hypot(s,u,c))?(s*=p=1/p,u*=p,c*=p):(s=0,u=0,c=0),t[0]=i,t[1]=s,t[2]=h,t[3]=0,t[4]=o,t[5]=u,t[6]=d,t[7]=0,t[8]=a,t[9]=c,t[10]=f,t[11]=0,t[12]=-(i*m+o*g+a*v),t[13]=-(s*m+u*g+c*v),t[14]=-(h*m+d*g+f*v),t[15]=1,t)}function qt(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=r[0],u=r[1],l=r[2],c=i-n[0],h=o-n[1],d=a-n[2],f=c*c+h*h+d*d;f>0&&(c*=f=1/Math.sqrt(f),h*=f,d*=f);var p=u*d-l*h,m=l*c-s*d,g=s*h-u*c;return(f=p*p+m*m+g*g)>0&&(p*=f=1/Math.sqrt(f),m*=f,g*=f),t[0]=p,t[1]=m,t[2]=g,t[3]=0,t[4]=h*g-d*m,t[5]=d*p-c*g,t[6]=c*m-h*p,t[7]=0,t[8]=c,t[9]=h,t[10]=d,t[11]=0,t[12]=i,t[13]=o,t[14]=a,t[15]=1,t}function $t(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Kt(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function Zt(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function Qt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function Jt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function te(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function ee(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function ne(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],h=t[8],d=t[9],f=t[10],p=t[11],m=t[12],g=t[13],v=t[14],y=t[15],b=e[0],x=e[1],w=e[2],_=e[3],S=e[4],E=e[5],A=e[6],M=e[7],C=e[8],T=e[9],k=e[10],I=e[11],N=e[12],P=e[13],O=e[14],L=e[15];return Math.abs(n-b)<=l.EPSILON*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(r-x)<=l.EPSILON*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(i-w)<=l.EPSILON*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(o-_)<=l.EPSILON*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(a-S)<=l.EPSILON*Math.max(1,Math.abs(a),Math.abs(S))&&Math.abs(s-E)<=l.EPSILON*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(u-A)<=l.EPSILON*Math.max(1,Math.abs(u),Math.abs(A))&&Math.abs(c-M)<=l.EPSILON*Math.max(1,Math.abs(c),Math.abs(M))&&Math.abs(h-C)<=l.EPSILON*Math.max(1,Math.abs(h),Math.abs(C))&&Math.abs(d-T)<=l.EPSILON*Math.max(1,Math.abs(d),Math.abs(T))&&Math.abs(f-k)<=l.EPSILON*Math.max(1,Math.abs(f),Math.abs(k))&&Math.abs(p-I)<=l.EPSILON*Math.max(1,Math.abs(p),Math.abs(I))&&Math.abs(m-N)<=l.EPSILON*Math.max(1,Math.abs(m),Math.abs(N))&&Math.abs(g-P)<=l.EPSILON*Math.max(1,Math.abs(g),Math.abs(P))&&Math.abs(v-O)<=l.EPSILON*Math.max(1,Math.abs(v),Math.abs(O))&&Math.abs(y-L)<=l.EPSILON*Math.max(1,Math.abs(y),Math.abs(L))}var re=yt,ie=Qt,oe=n(30329);function ae(){var t=new l.ARRAY_TYPE(4);return l.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function se(t){var e=new l.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function ue(t,e,n,r){var i=new l.ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function le(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function ce(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function he(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function de(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function fe(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function pe(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function me(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function ge(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function ve(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function ye(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function be(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function xe(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function we(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function _e(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.hypot(n,r,i,o)}function Se(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+i*i+o*o}function Ee(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.hypot(e,n,r,i)}function Ae(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function Me(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function Ce(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function Te(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a,t}function ke(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Ie(t,e,n,r){var i=n[0]*r[1]-n[1]*r[0],o=n[0]*r[2]-n[2]*r[0],a=n[0]*r[3]-n[3]*r[0],s=n[1]*r[2]-n[2]*r[1],u=n[1]*r[3]-n[3]*r[1],l=n[2]*r[3]-n[3]*r[2],c=e[0],h=e[1],d=e[2],f=e[3];return t[0]=h*l-d*u+f*s,t[1]=-c*l+d*a-f*o,t[2]=c*u-h*a+f*i,t[3]=-c*s+h*o-d*i,t}function Ne(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t[3]=s+r*(n[3]-s),t}function Pe(t,e){var n,r,i,o,a,s;e=e||1;do{a=(n=2*l.RANDOM()-1)*n+(r=2*l.RANDOM()-1)*r}while(a>=1);do{s=(i=2*l.RANDOM()-1)*i+(o=2*l.RANDOM()-1)*o}while(s>=1);var u=Math.sqrt((1-a)/s);return t[0]=e*n,t[1]=e*r,t[2]=e*i*u,t[3]=e*o*u,t}function Oe(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}function Le(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2],l=n[3],c=l*r+s*o-u*i,h=l*i+u*r-a*o,d=l*o+a*i-s*r,f=-a*r-s*i-u*o;return t[0]=c*l+f*-a+h*-u-d*-s,t[1]=h*l+f*-s+d*-a-c*-u,t[2]=d*l+f*-u+c*-s-h*-a,t[3]=e[3],t}function Re(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function De(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function ze(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function Fe(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=e[0],s=e[1],u=e[2],c=e[3];return Math.abs(n-a)<=l.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=l.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-u)<=l.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-c)<=l.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))}var Be,Ue=de,je=fe,Ve=pe,He=_e,Ge=Se,We=Ee,Xe=Ae,Ye=(Be=ae(),function(t,e,n,r,i,o){var a,s;for(e||(e=4),n||(n=0),s=r?Math.min(r*e+n,t.length):t.length,a=n;a<s;a+=e)Be[0]=t[a],Be[1]=t[a+1],Be[2]=t[a+2],Be[3]=t[a+3],i(Be,Be,o),t[a]=Be[0],t[a+1]=Be[1],t[a+2]=Be[2],t[a+3]=Be[3];return t});function qe(){var t=new l.ARRAY_TYPE(4);return l.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function $e(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Ke(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function Ze(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return r>l.EPSILON?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function Qe(t,e){var n=Tn(t,e);return Math.acos(2*n*n-1)}function Je(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],l=n[2],c=n[3];return t[0]=r*c+a*s+i*l-o*u,t[1]=i*c+a*u+o*s-r*l,t[2]=o*c+a*l+r*u-i*s,t[3]=a*c-r*s-i*u-o*l,t}function tn(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+a*s,t[1]=i*u+o*s,t[2]=o*u-i*s,t[3]=a*u-r*s,t}function en(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u-o*s,t[1]=i*u+a*s,t[2]=o*u+r*s,t[3]=a*u-i*s,t}function nn(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+i*s,t[1]=i*u-r*s,t[2]=o*u+a*s,t[3]=a*u-o*s,t}function rn(t,e){var n=e[0],r=e[1],i=e[2];return t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),t}function on(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=Math.sqrt(n*n+r*r+i*i),s=Math.exp(o),u=a>0?s*Math.sin(a)/a:0;return t[0]=n*u,t[1]=r*u,t[2]=i*u,t[3]=s*Math.cos(a),t}function an(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=Math.sqrt(n*n+r*r+i*i),s=a>0?Math.atan2(a,o)/a:0;return t[0]=n*s,t[1]=r*s,t[2]=i*s,t[3]=.5*Math.log(n*n+r*r+i*i+o*o),t}function sn(t,e,n){return an(t,e),Cn(t,t,n),on(t,t),t}function un(t,e,n,r){var i,o,a,s,u,c=e[0],h=e[1],d=e[2],f=e[3],p=n[0],m=n[1],g=n[2],v=n[3];return(o=c*p+h*m+d*g+f*v)<0&&(o=-o,p=-p,m=-m,g=-g,v=-v),1-o>l.EPSILON?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-r)*i)/a,u=Math.sin(r*i)/a):(s=1-r,u=r),t[0]=s*c+u*p,t[1]=s*h+u*m,t[2]=s*d+u*g,t[3]=s*f+u*v,t}function ln(t){var e=l.RANDOM(),n=l.RANDOM(),r=l.RANDOM(),i=Math.sqrt(1-e),o=Math.sqrt(e);return t[0]=i*Math.sin(2*Math.PI*n),t[1]=i*Math.cos(2*Math.PI*n),t[2]=o*Math.sin(2*Math.PI*r),t[3]=o*Math.cos(2*Math.PI*r),t}function cn(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o,s=a?1/a:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-i*s,t[3]=o*s,t}function hn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function dn(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;n=Math.sqrt(e[3*i+i]-e[3*o+o]-e[3*a+a]+1),t[i]=.5*n,n=.5/n,t[3]=(e[3*o+a]-e[3*a+o])*n,t[o]=(e[3*o+i]+e[3*i+o])*n,t[a]=(e[3*a+i]+e[3*i+a])*n}return t}function fn(t,e,n,r){var i=.5*Math.PI/180;e*=i,n*=i,r*=i;var o=Math.sin(e),a=Math.cos(e),s=Math.sin(n),u=Math.cos(n),l=Math.sin(r),c=Math.cos(r);return t[0]=o*u*c-a*s*l,t[1]=a*s*c+o*u*l,t[2]=a*u*l-o*s*c,t[3]=a*u*c+o*s*l,t}function pn(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var mn,gn,vn,yn,bn,xn,wn=se,_n=ue,Sn=le,En=ce,An=he,Mn=Je,Cn=xe,Tn=ke,kn=Ne,In=Ee,Nn=In,Pn=Ae,On=Pn,Ln=Te,Rn=ze,Dn=Fe,zn=(mn=oe.create(),gn=oe.fromValues(1,0,0),vn=oe.fromValues(0,1,0),function(t,e,n){var r=oe.dot(e,n);return r<-.999999?(oe.cross(mn,gn,e),oe.len(mn)<1e-6&&oe.cross(mn,vn,e),oe.normalize(mn,mn),Ke(t,mn,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(oe.cross(mn,e,n),t[0]=mn[0],t[1]=mn[1],t[2]=mn[2],t[3]=1+r,Ln(t,t))}),Fn=(yn=qe(),bn=qe(),function(t,e,n,r,i,o){return un(yn,e,i,o),un(bn,n,r,o),un(t,yn,bn,2*o*(1-o)),t}),Bn=(xn=st.create(),function(t,e,n,r){return xn[0]=n[0],xn[3]=n[1],xn[6]=n[2],xn[1]=r[0],xn[4]=r[1],xn[7]=r[2],xn[2]=-e[0],xn[5]=-e[1],xn[8]=-e[2],Ln(t,dn(t,xn))});function Un(){var t=new l.ARRAY_TYPE(8);return l.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function jn(t){var e=new l.ARRAY_TYPE(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function Vn(t,e,n,r,i,o,a,s){var u=new l.ARRAY_TYPE(8);return u[0]=t,u[1]=e,u[2]=n,u[3]=r,u[4]=i,u[5]=o,u[6]=a,u[7]=s,u}function Hn(t,e,n,r,i,o,a){var s=new l.ARRAY_TYPE(8);s[0]=t,s[1]=e,s[2]=n,s[3]=r;var u=.5*i,c=.5*o,h=.5*a;return s[4]=u*r+c*n-h*e,s[5]=c*r+h*t-u*n,s[6]=h*r+u*e-c*t,s[7]=-u*t-c*e-h*n,s}function Gn(t,e,n){var r=.5*n[0],i=.5*n[1],o=.5*n[2],a=e[0],s=e[1],u=e[2],l=e[3];return t[0]=a,t[1]=s,t[2]=u,t[3]=l,t[4]=r*l+i*u-o*s,t[5]=i*l+o*a-r*u,t[6]=o*l+r*s-i*a,t[7]=-r*a-i*s-o*u,t}function Wn(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function Xn(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Yn(t,e){var n=qe();Rt(n,e);var r=new l.ARRAY_TYPE(3);return Ot(r,e),Gn(t,n,r),t}function qn(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function $n(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Kn(t,e,n,r,i,o,a,s,u){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t}var Zn=Sn;function Qn(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var Jn=Sn;function tr(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function er(t,e){var n=e[4],r=e[5],i=e[6],o=e[7],a=-e[0],s=-e[1],u=-e[2],l=e[3];return t[0]=2*(n*l+o*a+r*u-i*s),t[1]=2*(r*l+o*s+i*a-n*u),t[2]=2*(i*l+o*u+n*s-r*a),t}function nr(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=.5*n[0],u=.5*n[1],l=.5*n[2],c=e[4],h=e[5],d=e[6],f=e[7];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=a*s+i*l-o*u+c,t[5]=a*u+o*s-r*l+h,t[6]=a*l+r*u-i*s+d,t[7]=-r*s-i*u-o*l+f,t}function rr(t,e,n){var r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=s*a+c*r+u*o-l*i,d=u*a+c*i+l*r-s*o,f=l*a+c*o+s*i-u*r,p=c*a-s*r-u*i-l*o;return tn(t,e,n),r=t[0],i=t[1],o=t[2],a=t[3],t[4]=h*a+p*r+d*o-f*i,t[5]=d*a+p*i+f*r-h*o,t[6]=f*a+p*o+h*i-d*r,t[7]=p*a-h*r-d*i-f*o,t}function ir(t,e,n){var r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=s*a+c*r+u*o-l*i,d=u*a+c*i+l*r-s*o,f=l*a+c*o+s*i-u*r,p=c*a-s*r-u*i-l*o;return en(t,e,n),r=t[0],i=t[1],o=t[2],a=t[3],t[4]=h*a+p*r+d*o-f*i,t[5]=d*a+p*i+f*r-h*o,t[6]=f*a+p*o+h*i-d*r,t[7]=p*a-h*r-d*i-f*o,t}function or(t,e,n){var r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=s*a+c*r+u*o-l*i,d=u*a+c*i+l*r-s*o,f=l*a+c*o+s*i-u*r,p=c*a-s*r-u*i-l*o;return nn(t,e,n),r=t[0],i=t[1],o=t[2],a=t[3],t[4]=h*a+p*r+d*o-f*i,t[5]=d*a+p*i+f*r-h*o,t[6]=f*a+p*o+h*i-d*r,t[7]=p*a-h*r-d*i-f*o,t}function ar(t,e,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],u=e[1],l=e[2],c=e[3];return t[0]=s*a+c*r+u*o-l*i,t[1]=u*a+c*i+l*r-s*o,t[2]=l*a+c*o+s*i-u*r,t[3]=c*a-s*r-u*i-l*o,s=e[4],u=e[5],l=e[6],c=e[7],t[4]=s*a+c*r+u*o-l*i,t[5]=u*a+c*i+l*r-s*o,t[6]=l*a+c*o+s*i-u*r,t[7]=c*a-s*r-u*i-l*o,t}function sr(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],l=n[2],c=n[3];return t[0]=r*c+a*s+i*l-o*u,t[1]=i*c+a*u+o*s-r*l,t[2]=o*c+a*l+r*u-i*s,t[3]=a*c-r*s-i*u-o*l,s=n[4],u=n[5],l=n[6],c=n[7],t[4]=r*c+a*s+i*l-o*u,t[5]=i*c+a*u+o*s-r*l,t[6]=o*c+a*l+r*u-i*s,t[7]=a*c-r*s-i*u-o*l,t}function ur(t,e,n,r){if(Math.abs(r)<l.EPSILON)return qn(t,e);var i=Math.hypot(n[0],n[1],n[2]);r*=.5;var o=Math.sin(r),a=o*n[0]/i,s=o*n[1]/i,u=o*n[2]/i,c=Math.cos(r),h=e[0],d=e[1],f=e[2],p=e[3];t[0]=h*c+p*a+d*u-f*s,t[1]=d*c+p*s+f*a-h*u,t[2]=f*c+p*u+h*s-d*a,t[3]=p*c-h*a-d*s-f*u;var m=e[4],g=e[5],v=e[6],y=e[7];return t[4]=m*c+y*a+g*u-v*s,t[5]=g*c+y*s+v*a-m*u,t[6]=v*c+y*u+m*s-g*a,t[7]=y*c-m*a-g*s-v*u,t}function lr(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t}function cr(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[4],u=n[5],l=n[6],c=n[7],h=e[4],d=e[5],f=e[6],p=e[7],m=n[0],g=n[1],v=n[2],y=n[3];return t[0]=r*y+a*m+i*v-o*g,t[1]=i*y+a*g+o*m-r*v,t[2]=o*y+a*v+r*g-i*m,t[3]=a*y-r*m-i*g-o*v,t[4]=r*c+a*s+i*l-o*u+h*y+p*m+d*v-f*g,t[5]=i*c+a*u+o*s-r*l+d*y+p*g+f*m-h*v,t[6]=o*c+a*l+r*u-i*s+f*y+p*v+h*g-d*m,t[7]=a*c-r*s-i*u-o*l+p*y-h*m-d*g-f*v,t}var hr=cr;function dr(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t}var fr=Tn;function pr(t,e,n,r){var i=1-r;return fr(e,n)<0&&(r=-r),t[0]=e[0]*i+n[0]*r,t[1]=e[1]*i+n[1]*r,t[2]=e[2]*i+n[2]*r,t[3]=e[3]*i+n[3]*r,t[4]=e[4]*i+n[4]*r,t[5]=e[5]*i+n[5]*r,t[6]=e[6]*i+n[6]*r,t[7]=e[7]*i+n[7]*r,t}function mr(t,e){var n=br(e);return t[0]=-e[0]/n,t[1]=-e[1]/n,t[2]=-e[2]/n,t[3]=e[3]/n,t[4]=-e[4]/n,t[5]=-e[5]/n,t[6]=-e[6]/n,t[7]=e[7]/n,t}function gr(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var vr=In,yr=vr,br=Pn,xr=br;function wr(t,e){var n=br(e);if(n>0){n=Math.sqrt(n);var r=e[0]/n,i=e[1]/n,o=e[2]/n,a=e[3]/n,s=e[4],u=e[5],l=e[6],c=e[7],h=r*s+i*u+o*l+a*c;t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=(s-r*h)/n,t[5]=(u-i*h)/n,t[6]=(l-o*h)/n,t[7]=(c-a*h)/n}return t}function _r(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function Sr(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function Er(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],h=e[0],d=e[1],f=e[2],p=e[3],m=e[4],g=e[5],v=e[6],y=e[7];return Math.abs(n-h)<=l.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(r-d)<=l.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(i-f)<=l.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(o-p)<=l.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-m)<=l.EPSILON*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(s-g)<=l.EPSILON*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(u-v)<=l.EPSILON*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(c-y)<=l.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))}var Ar=n(40842)},91409:(t,e,n)=>{"use strict";n.r(e),n.d(e,{add:()=>T,adjoint:()=>f,clone:()=>a,copy:()=>s,create:()=>i,determinant:()=>p,equals:()=>O,exactEquals:()=>P,frob:()=>C,fromMat2d:()=>_,fromMat4:()=>o,fromQuat:()=>S,fromRotation:()=>x,fromScaling:()=>w,fromTranslation:()=>b,fromValues:()=>u,identity:()=>c,invert:()=>d,mul:()=>L,multiply:()=>m,multiplyScalar:()=>I,multiplyScalarAndAdd:()=>N,normalFromMat4:()=>E,projection:()=>A,rotate:()=>v,scale:()=>y,set:()=>l,str:()=>M,sub:()=>R,subtract:()=>k,translate:()=>g,transpose:()=>h});var r=n(17823);function i(){var t=new r.ARRAY_TYPE(9);return r.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function a(t){var e=new r.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function s(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function u(t,e,n,i,o,a,s,u,l){var c=new r.ARRAY_TYPE(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=i,c[4]=o,c[5]=a,c[6]=s,c[7]=u,c[8]=l,c}function l(t,e,n,r,i,o,a,s,u,l){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=l,t}function c(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function h(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function d(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=c*a-s*l,d=-c*o+s*u,f=l*o-a*u,p=n*h+r*d+i*f;return p?(p=1/p,t[0]=h*p,t[1]=(-c*r+i*l)*p,t[2]=(s*r-i*a)*p,t[3]=d*p,t[4]=(c*n-i*u)*p,t[5]=(-s*n+i*o)*p,t[6]=f*p,t[7]=(-l*n+r*u)*p,t[8]=(a*n-r*o)*p,t):null}function f(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8];return t[0]=a*c-s*l,t[1]=i*l-r*c,t[2]=r*s-i*a,t[3]=s*u-o*c,t[4]=n*c-i*u,t[5]=i*o-n*s,t[6]=o*l-a*u,t[7]=r*u-n*l,t[8]=n*a-r*o,t}function p(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],l=t[8];return e*(l*o-a*u)+n*(-l*i+a*s)+r*(u*i-o*s)}function m(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],d=n[0],f=n[1],p=n[2],m=n[3],g=n[4],v=n[5],y=n[6],b=n[7],x=n[8];return t[0]=d*r+f*a+p*l,t[1]=d*i+f*s+p*c,t[2]=d*o+f*u+p*h,t[3]=m*r+g*a+v*l,t[4]=m*i+g*s+v*c,t[5]=m*o+g*u+v*h,t[6]=y*r+b*a+x*l,t[7]=y*i+b*s+x*c,t[8]=y*o+b*u+x*h,t}function g(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],d=n[0],f=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=d*r+f*a+l,t[7]=d*i+f*s+c,t[8]=d*o+f*u+h,t}function v(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],d=Math.sin(n),f=Math.cos(n);return t[0]=f*r+d*a,t[1]=f*i+d*s,t[2]=f*o+d*u,t[3]=f*a-d*r,t[4]=f*s-d*i,t[5]=f*u-d*o,t[6]=l,t[7]=c,t[8]=h,t}function y(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function b(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function x(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function w(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function _(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function S(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,l=n*a,c=r*a,h=r*s,d=i*a,f=i*s,p=i*u,m=o*a,g=o*s,v=o*u;return t[0]=1-h-p,t[3]=c-v,t[6]=d+g,t[1]=c+v,t[4]=1-l-p,t[7]=f-m,t[2]=d-g,t[5]=f+m,t[8]=1-l-h,t}function E(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=e[9],d=e[10],f=e[11],p=e[12],m=e[13],g=e[14],v=e[15],y=n*s-r*a,b=n*u-i*a,x=n*l-o*a,w=r*u-i*s,_=r*l-o*s,S=i*l-o*u,E=c*m-h*p,A=c*g-d*p,M=c*v-f*p,C=h*g-d*m,T=h*v-f*m,k=d*v-f*g,I=y*k-b*T+x*C+w*M-_*A+S*E;return I?(I=1/I,t[0]=(s*k-u*T+l*C)*I,t[1]=(u*M-a*k-l*A)*I,t[2]=(a*T-s*M+l*E)*I,t[3]=(i*T-r*k-o*C)*I,t[4]=(n*k-i*M+o*A)*I,t[5]=(r*M-n*T-o*E)*I,t[6]=(m*S-g*_+v*w)*I,t[7]=(g*x-p*S-v*b)*I,t[8]=(p*_-m*x+v*y)*I,t):null}function A(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function M(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function C(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function T(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function k(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function I(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function N(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function P(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function O(t,e){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],h=t[8],d=e[0],f=e[1],p=e[2],m=e[3],g=e[4],v=e[5],y=e[6],b=e[7],x=e[8];return Math.abs(n-d)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(i-f)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(o-p)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-m)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(s-g)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(u-v)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(l-y)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(c-b)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(h-x)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(x))}var L=m,R=k},40842:(t,e,n)=>{"use strict";n.r(e),n.d(e,{add:()=>l,angle:()=>D,ceil:()=>f,clone:()=>o,copy:()=>s,create:()=>i,cross:()=>T,dist:()=>X,distance:()=>x,div:()=>W,divide:()=>d,dot:()=>C,equals:()=>U,exactEquals:()=>B,floor:()=>p,forEach:()=>$,fromValues:()=>a,inverse:()=>A,len:()=>V,length:()=>_,lerp:()=>k,max:()=>g,min:()=>m,mul:()=>G,multiply:()=>h,negate:()=>E,normalize:()=>M,random:()=>I,rotate:()=>R,round:()=>v,scale:()=>y,scaleAndAdd:()=>b,set:()=>u,sqrDist:()=>Y,sqrLen:()=>q,squaredDistance:()=>w,squaredLength:()=>S,str:()=>F,sub:()=>H,subtract:()=>c,transformMat2:()=>N,transformMat2d:()=>P,transformMat3:()=>O,transformMat4:()=>L,zero:()=>z});var r=n(17823);function i(){var t=new r.ARRAY_TYPE(2);return r.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t}function o(t){var e=new r.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e}function a(t,e){var n=new r.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n}function s(t,e){return t[0]=e[0],t[1]=e[1],t}function u(t,e,n){return t[0]=e,t[1]=n,t}function l(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function c(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function h(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function d(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function f(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function p(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function m(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function g(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function v(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function y(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function b(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function x(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.hypot(n,r)}function w(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function _(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function S(t){var e=t[0],n=t[1];return e*e+n*n}function E(t,e){return t[0]=-e[0],t[1]=-e[1],t}function A(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function M(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}function C(t,e){return t[0]*e[0]+t[1]*e[1]}function T(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function k(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t}function I(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function N(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t}function P(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function O(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function L(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}function R(t,e,n,r){var i=e[0]-n[0],o=e[1]-n[1],a=Math.sin(r),s=Math.cos(r);return t[0]=i*s-o*a+n[0],t[1]=i*a+o*s+n[1],t}function D(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=Math.sqrt(n*n+r*r)*Math.sqrt(i*i+o*o),s=a&&(n*i+r*o)/a;return Math.acos(Math.min(Math.max(s,-1),1))}function z(t){return t[0]=0,t[1]=0,t}function F(t){return"vec2("+t[0]+", "+t[1]+")"}function B(t,e){return t[0]===e[0]&&t[1]===e[1]}function U(t,e){var n=t[0],i=t[1],o=e[0],a=e[1];return Math.abs(n-o)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-a)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(a))}var j,V=_,H=c,G=h,W=d,X=x,Y=w,q=S,$=(j=i(),function(t,e,n,r,i,o){var a,s;for(e||(e=2),n||(n=0),s=r?Math.min(r*e+n,t.length):t.length,a=n;a<s;a+=e)j[0]=t[a],j[1]=t[a+1],i(j,j,o),t[a]=j[0],t[a+1]=j[1];return t})},30329:(t,e,n)=>{"use strict";n.r(e),n.d(e,{add:()=>c,angle:()=>B,bezier:()=>N,ceil:()=>p,clone:()=>o,copy:()=>u,create:()=>i,cross:()=>T,dist:()=>q,distance:()=>w,div:()=>Y,divide:()=>f,dot:()=>C,equals:()=>H,exactEquals:()=>V,floor:()=>m,forEach:()=>Q,fromValues:()=>s,hermite:()=>I,inverse:()=>A,len:()=>K,length:()=>a,lerp:()=>k,max:()=>v,min:()=>g,mul:()=>X,multiply:()=>d,negate:()=>E,normalize:()=>M,random:()=>P,rotateX:()=>D,rotateY:()=>z,rotateZ:()=>F,round:()=>y,scale:()=>b,scaleAndAdd:()=>x,set:()=>l,sqrDist:()=>$,sqrLen:()=>Z,squaredDistance:()=>_,squaredLength:()=>S,str:()=>j,sub:()=>W,subtract:()=>h,transformMat3:()=>L,transformMat4:()=>O,transformQuat:()=>R,zero:()=>U});var r=n(17823);function i(){var t=new r.ARRAY_TYPE(3);return r.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function o(t){var e=new r.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function a(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function s(t,e,n){var i=new r.ARRAY_TYPE(3);return i[0]=t,i[1]=e,i[2]=n,i}function u(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function l(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function c(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function h(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function d(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function f(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function p(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function m(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function g(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function v(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function y(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function b(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function x(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function w(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.hypot(n,r,i)}function _(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function S(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function E(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function A(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function M(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function C(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function T(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t}function k(t,e,n,r){var i=e[0],o=e[1],a=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t}function I(t,e,n,r,i,o){var a=o*o,s=a*(2*o-3)+1,u=a*(o-2)+o,l=a*(o-1),c=a*(3-2*o);return t[0]=e[0]*s+n[0]*u+r[0]*l+i[0]*c,t[1]=e[1]*s+n[1]*u+r[1]*l+i[1]*c,t[2]=e[2]*s+n[2]*u+r[2]*l+i[2]*c,t}function N(t,e,n,r,i,o){var a=1-o,s=a*a,u=o*o,l=s*a,c=3*o*s,h=3*u*a,d=u*o;return t[0]=e[0]*l+n[0]*c+r[0]*h+i[0]*d,t[1]=e[1]*l+n[1]*c+r[1]*h+i[1]*d,t[2]=e[2]*l+n[2]*c+r[2]*h+i[2]*d,t}function P(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI,i=2*r.RANDOM()-1,o=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(n)*o,t[1]=Math.sin(n)*o,t[2]=i*e,t}function O(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}function L(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}function R(t,e,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],u=e[1],l=e[2],c=i*l-o*u,h=o*s-r*l,d=r*u-i*s,f=i*d-o*h,p=o*c-r*d,m=r*h-i*c,g=2*a;return c*=g,h*=g,d*=g,f*=2,p*=2,m*=2,t[0]=s+c+f,t[1]=u+h+p,t[2]=l+d+m,t}function D(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function z(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function F(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function B(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],s=e[2],u=Math.sqrt(n*n+r*r+i*i)*Math.sqrt(o*o+a*a+s*s),l=u&&C(t,e)/u;return Math.acos(Math.min(Math.max(l,-1),1))}function U(t){return t[0]=0,t[1]=0,t[2]=0,t}function j(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function V(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function H(t,e){var n=t[0],i=t[1],o=t[2],a=e[0],s=e[1],u=e[2];return Math.abs(n-a)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-s)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-u)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))}var G,W=h,X=d,Y=f,q=w,$=_,K=a,Z=S,Q=(G=i(),function(t,e,n,r,i,o){var a,s;for(e||(e=3),n||(n=0),s=r?Math.min(r*e+n,t.length):t.length,a=n;a<s;a+=e)G[0]=t[a],G[1]=t[a+1],G[2]=t[a+2],i(G,G,o),t[a]=G[0],t[a+1]=G[1],t[a+2]=G[2];return t})},85880:(t,e,n)=>{"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}
/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/n.d(e,{Ay:()=>Kr,os:()=>Kr});var o,a,s,u,l,c,h,d,f,p,m,g,v,y,b,x,w,_={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},S={duration:.5,overwrite:!1,delay:0},E=1e8,A=1e-8,M=2*Math.PI,C=M/4,T=0,k=Math.sqrt,I=Math.cos,N=Math.sin,P=function(t){return"string"==typeof t},O=function(t){return"function"==typeof t},L=function(t){return"number"==typeof t},R=function(t){return void 0===t},D=function(t){return"object"==typeof t},z=function(t){return!1!==t},F=function(){return"undefined"!=typeof window},B=function(t){return O(t)||P(t)},U="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},j=Array.isArray,V=/(?:-?\.?\d|\.)+/gi,H=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,G=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,W=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,X=/[+-]=-?[.\d]+/,Y=/[^,'"\[\]\s]+/gi,q=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,$={},K={},Z=function(t){return(K=Mt(t,$))&&Tn},Q=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},J=function(t,e){return!e&&console.warn(t)},tt=function(t,e){return t&&($[t]=e)&&K&&(K[t]=e)||$},et=function(){return 0},nt={suppressEvents:!0,isStart:!0,kill:!1},rt={suppressEvents:!0,kill:!1},it={suppressEvents:!0},ot={},at=[],st={},ut={},lt={},ct=30,ht=[],dt="",ft=function(t){var e,n,r=t[0];if(D(r)||O(r)||(t=[t]),!(e=(r._gsap||{}).harness)){for(n=ht.length;n--&&!ht[n].targetTest(r););e=ht[n]}for(n=t.length;n--;)t[n]&&(t[n]._gsap||(t[n]._gsap=new je(t[n],e)))||t.splice(n,1);return t},pt=function(t){return t._gsap||ft(ie(t))[0]._gsap},mt=function(t,e,n){return(n=t[e])&&O(n)?t[e]():R(n)&&t.getAttribute&&t.getAttribute(e)||n},gt=function(t,e){return(t=t.split(",")).forEach(e)||t},vt=function(t){return Math.round(1e5*t)/1e5||0},yt=function(t){return Math.round(1e7*t)/1e7||0},bt=function(t,e){var n=e.charAt(0),r=parseFloat(e.substr(2));return t=parseFloat(t),"+"===n?t+r:"-"===n?t-r:"*"===n?t*r:t/r},xt=function(t,e){for(var n=e.length,r=0;t.indexOf(e[r])<0&&++r<n;);return r<n},wt=function(){var t,e,n=at.length,r=at.slice(0);for(st={},at.length=0,t=0;t<n;t++)(e=r[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)},_t=function(t,e,n,r){at.length&&!a&&wt(),t.render(e,n,r||a&&e<0&&(t._initted||t._startAt)),at.length&&!a&&wt()},St=function(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(Y).length<2?e:P(t)?t.trim():t},Et=function(t){return t},At=function(t,e){for(var n in e)n in t||(t[n]=e[n]);return t},Mt=function(t,e){for(var n in e)t[n]=e[n];return t},Ct=function t(e,n){for(var r in n)"__proto__"!==r&&"constructor"!==r&&"prototype"!==r&&(e[r]=D(n[r])?t(e[r]||(e[r]={}),n[r]):n[r]);return e},Tt=function(t,e){var n,r={};for(n in t)n in e||(r[n]=t[n]);return r},kt=function(t){var e,n=t.parent||u,r=t.keyframes?(e=j(t.keyframes),function(t,n){for(var r in n)r in t||"duration"===r&&e||"ease"===r||(t[r]=n[r])}):At;if(z(t.inherit))for(;n;)r(t,n.vars.defaults),n=n.parent||n._dp;return t},It=function(t,e,n,r,i){void 0===n&&(n="_first"),void 0===r&&(r="_last");var o,a=t[r];if(i)for(o=e[i];a&&a[i]>o;)a=a._prev;return a?(e._next=a._next,a._next=e):(e._next=t[n],t[n]=e),e._next?e._next._prev=e:t[r]=e,e._prev=a,e.parent=e._dp=t,e},Nt=function(t,e,n,r){void 0===n&&(n="_first"),void 0===r&&(r="_last");var i=e._prev,o=e._next;i?i._next=o:t[n]===e&&(t[n]=o),o?o._prev=i:t[r]===e&&(t[r]=i),e._next=e._prev=e.parent=null},Pt=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},Ot=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var n=t;n;)n._dirty=1,n=n.parent;return t},Lt=function(t,e,n,r){return t._startAt&&(a?t._startAt.revert(rt):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,r))},Rt=function t(e){return!e||e._ts&&t(e.parent)},Dt=function(t){return t._repeat?zt(t._tTime,t=t.duration()+t._rDelay)*t:0},zt=function(t,e){var n=Math.floor(t/=e);return t&&n===t?n-1:n},Ft=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Bt=function(t){return t._end=yt(t._start+(t._tDur/Math.abs(t._ts||t._rts||A)||0))},Ut=function(t,e){var n=t._dp;return n&&n.smoothChildTiming&&t._ts&&(t._start=yt(n._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),Bt(t),n._dirty||Ot(n,t)),t},jt=function(t,e){var n;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(n=Ft(t.rawTime(),e),(!e._dur||Jt(0,e.totalDuration(),n)-e._tTime>A)&&e.render(n,!0)),Ot(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(n=t;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;t._zTime=-1e-8}},Vt=function(t,e,n,r){return e.parent&&Pt(e),e._start=yt((L(n)?n:n||t!==u?Kt(t,n,e):t._time)+e._delay),e._end=yt(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),It(t,e,"_first","_last",t._sort?"_start":0),Xt(e)||(t._recent=e),r||jt(t,e),t._ts<0&&Ut(t,t._tTime),t},Ht=function(t,e){return($.ScrollTrigger||Q("scrollTrigger",e))&&$.ScrollTrigger.create(e,t)},Gt=function(t,e,n,r,i){return $e(t,e,i),t._initted?!n&&t._pt&&!a&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&f!==Te.frame?(at.push(t),t._lazy=[i,r],1):void 0:1},Wt=function t(e){var n=e.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||t(n))},Xt=function(t){var e=t.data;return"isFromStart"===e||"isStart"===e},Yt=function(t,e,n,r){var i=t._repeat,o=yt(e)||0,a=t._tTime/t._tDur;return a&&!r&&(t._time*=o/t._dur),t._dur=o,t._tDur=i?i<0?1e10:yt(o*(i+1)+t._rDelay*i):o,a>0&&!r&&Ut(t,t._tTime=t._tDur*a),t.parent&&Bt(t),n||Ot(t.parent,t),t},qt=function(t){return t instanceof He?Ot(t):Yt(t,t._dur)},$t={_start:0,endTime:et,totalDuration:et},Kt=function t(e,n,r){var i,o,a,s=e.labels,u=e._recent||$t,l=e.duration()>=E?u.endTime(!1):e._dur;return P(n)&&(isNaN(n)||n in s)?(o=n.charAt(0),a="%"===n.substr(-1),i=n.indexOf("="),"<"===o||">"===o?(i>=0&&(n=n.replace(/=/,"")),("<"===o?u._start:u.endTime(u._repeat>=0))+(parseFloat(n.substr(1))||0)*(a?(i<0?u:r).totalDuration()/100:1)):i<0?(n in s||(s[n]=l),s[n]):(o=parseFloat(n.charAt(i-1)+n.substr(i+1)),a&&r&&(o=o/100*(j(r)?r[0]:r).totalDuration()),i>1?t(e,n.substr(0,i-1),r)+o:l+o)):null==n?l:+n},Zt=function(t,e,n){var r,i,o=L(e[1]),a=(o?2:1)+(t<2?0:1),s=e[a];if(o&&(s.duration=e[1]),s.parent=n,t){for(r=s,i=n;i&&!("immediateRender"in r);)r=i.vars.defaults||{},i=z(i.vars.inherit)&&i.parent;s.immediateRender=z(r.immediateRender),t<2?s.runBackwards=1:s.startAt=e[a-1]}return new tn(e[0],s,e[a+1])},Qt=function(t,e){return t||0===t?e(t):e},Jt=function(t,e,n){return n<t?t:n>e?e:n},te=function(t,e){return P(t)&&(e=q.exec(t))?e[1]:""},ee=[].slice,ne=function(t,e){return t&&D(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&D(t[0]))&&!t.nodeType&&t!==l},re=function(t,e,n){return void 0===n&&(n=[]),t.forEach((function(t){var r;return P(t)&&!e||ne(t,1)?(r=n).push.apply(r,ie(t)):n.push(t)}))||n},ie=function(t,e,n){return s&&!e&&s.selector?s.selector(t):!P(t)||n||!c&&ke()?j(t)?re(t,n):ne(t)?ee.call(t,0):t?[t]:[]:ee.call((e||h).querySelectorAll(t),0)},oe=function(t){return t=ie(t)[0]||J("Invalid scope")||{},function(e){var n=t.current||t.nativeElement||t;return ie(e,n.querySelectorAll?n:n===t?J("Invalid scope")||h.createElement("div"):t)}},ae=function(t){return t.sort((function(){return.5-Math.random()}))},se=function(t){if(O(t))return t;var e=D(t)?t:{each:t},n=De(e.ease),r=e.from||0,i=parseFloat(e.base)||0,o={},a=r>0&&r<1,s=isNaN(r)||a,u=e.axis,l=r,c=r;return P(r)?l=c={center:.5,edges:.5,end:1}[r]||0:!a&&s&&(l=r[0],c=r[1]),function(t,a,h){var d,f,p,m,g,v,y,b,x,w=(h||e).length,_=o[w];if(!_){if(!(x="auto"===e.grid?0:(e.grid||[1,E])[1])){for(y=-E;y<(y=h[x++].getBoundingClientRect().left)&&x<w;);x<w&&x--}for(_=o[w]=[],d=s?Math.min(x,w)*l-.5:r%x,f=x===E?0:s?w*c/x-.5:r/x|0,y=0,b=E,v=0;v<w;v++)p=v%x-d,m=f-(v/x|0),_[v]=g=u?Math.abs("y"===u?m:p):k(p*p+m*m),g>y&&(y=g),g<b&&(b=g);"random"===r&&ae(_),_.max=y-b,_.min=b,_.v=w=(parseFloat(e.amount)||parseFloat(e.each)*(x>w?w-1:u?"y"===u?w/x:x:Math.max(x,w/x))||0)*("edges"===r?-1:1),_.b=w<0?i-w:i,_.u=te(e.amount||e.each)||0,n=n&&w<0?Le(n):n}return w=(_[t]-_.min)/_.max||0,yt(_.b+(n?n(w):w)*_.v)+_.u}},ue=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(n){var r=yt(Math.round(parseFloat(n)/t)*t*e);return(r-r%1)/e+(L(n)?0:te(n))}},le=function(t,e){var n,r,i=j(t);return!i&&D(t)&&(n=i=t.radius||E,t.values?(t=ie(t.values),(r=!L(t[0]))&&(n*=n)):t=ue(t.increment)),Qt(e,i?O(t)?function(e){return r=t(e),Math.abs(r-e)<=n?r:e}:function(e){for(var i,o,a=parseFloat(r?e.x:e),s=parseFloat(r?e.y:0),u=E,l=0,c=t.length;c--;)(i=r?(i=t[c].x-a)*i+(o=t[c].y-s)*o:Math.abs(t[c]-a))<u&&(u=i,l=c);return l=!n||u<=n?t[l]:e,r||l===e||L(e)?l:l+te(e)}:ue(t))},ce=function(t,e,n,r){return Qt(j(t)?!e:!0===n?!!(n=0):!r,(function(){return j(t)?t[~~(Math.random()*t.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((t-n/2+Math.random()*(e-t+.99*n))/n)*n*r)/r}))},he=function(t,e,n){return Qt(n,(function(n){return t[~~e(n)]}))},de=function(t){for(var e,n,r,i,o=0,a="";~(e=t.indexOf("random(",o));)r=t.indexOf(")",e),i="["===t.charAt(e+7),n=t.substr(e+7,r-e-7).match(i?Y:V),a+=t.substr(o,e-o)+ce(i?n:+n[0],i?0:+n[1],+n[2]||1e-5),o=r+1;return a+t.substr(o,t.length-o)},fe=function(t,e,n,r,i){var o=e-t,a=r-n;return Qt(i,(function(e){return n+((e-t)/o*a||0)}))},pe=function(t,e,n){var r,i,o,a=t.labels,s=E;for(r in a)(i=a[r]-e)<0==!!n&&i&&s>(i=Math.abs(i))&&(o=r,s=i);return o},me=function(t,e,n){var r,i,o,a=t.vars,u=a[e],l=s,c=t._ctx;if(u)return r=a[e+"Params"],i=a.callbackScope||t,n&&at.length&&wt(),c&&(s=c),o=r?u.apply(i,r):u.call(i),s=l,o},ge=function(t){return Pt(t),t.scrollTrigger&&t.scrollTrigger.kill(!!a),t.progress()<1&&me(t,"onInterrupt"),t},ve=[],ye=function(t){if(t)if(t=!t.name&&t.default||t,F()||t.headless){var e=t.name,n=O(t),r=e&&!n&&t.init?function(){this._props=[]}:t,i={init:et,render:cn,add:Ye,kill:dn,modifier:hn,rawVars:0},o={targetTest:0,get:0,getSetter:an,aliases:{},register:0};if(ke(),t!==r){if(ut[e])return;At(r,At(Tt(t,i),o)),Mt(r.prototype,Mt(i,Tt(t,o))),ut[r.prop=e]=r,t.targetTest&&(ht.push(r),ot[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}tt(e,r),t.register&&t.register(Tn,r,mn)}else ve.push(t)},be=255,xe={aqua:[0,be,be],lime:[0,be,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,be],navy:[0,0,128],white:[be,be,be],olive:[128,128,0],yellow:[be,be,0],orange:[be,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[be,0,0],pink:[be,192,203],cyan:[0,be,be],transparent:[be,be,be,0]},we=function(t,e,n){return(6*(t+=t<0?1:t>1?-1:0)<1?e+(n-e)*t*6:t<.5?n:3*t<2?e+(n-e)*(2/3-t)*6:e)*be+.5|0},_e=function(t,e,n){var r,i,o,a,s,u,l,c,h,d,f=t?L(t)?[t>>16,t>>8&be,t&be]:0:xe.black;if(!f){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),xe[t])f=xe[t];else if("#"===t.charAt(0)){if(t.length<6&&(r=t.charAt(1),i=t.charAt(2),o=t.charAt(3),t="#"+r+r+i+i+o+o+(5===t.length?t.charAt(4)+t.charAt(4):"")),9===t.length)return[(f=parseInt(t.substr(1,6),16))>>16,f>>8&be,f&be,parseInt(t.substr(7),16)/255];f=[(t=parseInt(t.substr(1),16))>>16,t>>8&be,t&be]}else if("hsl"===t.substr(0,3))if(f=d=t.match(V),e){if(~t.indexOf("="))return f=t.match(H),n&&f.length<4&&(f[3]=1),f}else a=+f[0]%360/360,s=+f[1]/100,r=2*(u=+f[2]/100)-(i=u<=.5?u*(s+1):u+s-u*s),f.length>3&&(f[3]*=1),f[0]=we(a+1/3,r,i),f[1]=we(a,r,i),f[2]=we(a-1/3,r,i);else f=t.match(V)||xe.transparent;f=f.map(Number)}return e&&!d&&(r=f[0]/be,i=f[1]/be,o=f[2]/be,u=((l=Math.max(r,i,o))+(c=Math.min(r,i,o)))/2,l===c?a=s=0:(h=l-c,s=u>.5?h/(2-l-c):h/(l+c),a=l===r?(i-o)/h+(i<o?6:0):l===i?(o-r)/h+2:(r-i)/h+4,a*=60),f[0]=~~(a+.5),f[1]=~~(100*s+.5),f[2]=~~(100*u+.5)),n&&f.length<4&&(f[3]=1),f},Se=function(t){var e=[],n=[],r=-1;return t.split(Ae).forEach((function(t){var i=t.match(G)||[];e.push.apply(e,i),n.push(r+=i.length+1)})),e.c=n,e},Ee=function(t,e,n){var r,i,o,a,s="",u=(t+s).match(Ae),l=e?"hsla(":"rgba(",c=0;if(!u)return t;if(u=u.map((function(t){return(t=_e(t,e,1))&&l+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"})),n&&(o=Se(t),(r=n.c).join(s)!==o.c.join(s)))for(a=(i=t.replace(Ae,"1").split(G)).length-1;c<a;c++)s+=i[c]+(~r.indexOf(c)?u.shift()||l+"0,0,0,0)":(o.length?o:u.length?u:n).shift());if(!i)for(a=(i=t.split(Ae)).length-1;c<a;c++)s+=i[c]+u[c];return s+i[a]},Ae=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(t in xe)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),Me=/hsl[a]?\(/,Ce=function(t){var e,n=t.join(" ");if(Ae.lastIndex=0,Ae.test(n))return e=Me.test(n),t[1]=Ee(t[1],e),t[0]=Ee(t[0],e,Se(t[1])),!0},Te=function(){var t,e,n,r,i,o,a=Date.now,s=500,u=33,f=a(),p=f,g=1e3/240,v=g,y=[],b=function n(l){var c,h,d,m,b=a()-p,x=!0===l;if((b>s||b<0)&&(f+=b-u),((c=(d=(p+=b)-f)-v)>0||x)&&(m=++r.frame,i=d-1e3*r.time,r.time=d/=1e3,v+=c+(c>=g?4:g-c),h=1),x||(t=e(n)),h)for(o=0;o<y.length;o++)y[o](d,i,m,l)};return r={time:0,frame:0,tick:function(){b(!0)},deltaRatio:function(t){return i/(1e3/(t||60))},wake:function(){d&&(!c&&F()&&(l=c=window,h=l.document||{},$.gsap=Tn,(l.gsapVersions||(l.gsapVersions=[])).push(Tn.version),Z(K||l.GreenSockGlobals||!l.gsap&&l||{}),ve.forEach(ye)),n="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame,t&&r.sleep(),e=n||function(t){return setTimeout(t,v-1e3*r.time+1|0)},m=1,b(2))},sleep:function(){(n?cancelAnimationFrame:clearTimeout)(t),m=0,e=et},lagSmoothing:function(t,e){s=t||1/0,u=Math.min(e||33,s)},fps:function(t){g=1e3/(t||240),v=1e3*r.time+g},add:function(t,e,n){var i=e?function(e,n,o,a){t(e,n,o,a),r.remove(i)}:t;return r.remove(t),y[n?"unshift":"push"](i),ke(),i},remove:function(t,e){~(e=y.indexOf(t))&&y.splice(e,1)&&o>=e&&o--},_listeners:y}}(),ke=function(){return!m&&Te.wake()},Ie={},Ne=/^[\d.\-M][\d.\-,\s]/,Pe=/["']/g,Oe=function(t){for(var e,n,r,i={},o=t.substr(1,t.length-3).split(":"),a=o[0],s=1,u=o.length;s<u;s++)n=o[s],e=s!==u-1?n.lastIndexOf(","):n.length,r=n.substr(0,e),i[a]=isNaN(r)?r.replace(Pe,"").trim():+r,a=n.substr(e+1).trim();return i},Le=function(t){return function(e){return 1-t(1-e)}},Re=function t(e,n){for(var r,i=e._first;i;)i instanceof He?t(i,n):!i.vars.yoyoEase||i._yoyo&&i._repeat||i._yoyo===n||(i.timeline?t(i.timeline,n):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=n)),i=i._next},De=function(t,e){return t&&(O(t)?t:Ie[t]||function(t){var e,n,r,i,o=(t+"").split("("),a=Ie[o[0]];return a&&o.length>1&&a.config?a.config.apply(null,~t.indexOf("{")?[Oe(o[1])]:(e=t,n=e.indexOf("(")+1,r=e.indexOf(")"),i=e.indexOf("(",n),e.substring(n,~i&&i<r?e.indexOf(")",r+1):r)).split(",").map(St)):Ie._CE&&Ne.test(t)?Ie._CE("",t):a}(t))||e},ze=function(t,e,n,r){void 0===n&&(n=function(t){return 1-e(1-t)}),void 0===r&&(r=function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var i,o={easeIn:e,easeOut:n,easeInOut:r};return gt(t,(function(t){for(var e in Ie[t]=$[t]=o,Ie[i=t.toLowerCase()]=n,o)Ie[i+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=Ie[t+"."+e]=o[e]})),o},Fe=function(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}},Be=function t(e,n,r){var i=n>=1?n:1,o=(r||(e?.3:.45))/(n<1?n:1),a=o/M*(Math.asin(1/i)||0),s=function(t){return 1===t?1:i*Math.pow(2,-10*t)*N((t-a)*o)+1},u="out"===e?s:"in"===e?function(t){return 1-s(1-t)}:Fe(s);return o=M/o,u.config=function(n,r){return t(e,n,r)},u},Ue=function t(e,n){void 0===n&&(n=1.70158);var r=function(t){return t?--t*t*((n+1)*t+n)+1:0},i="out"===e?r:"in"===e?function(t){return 1-r(1-t)}:Fe(r);return i.config=function(n){return t(e,n)},i};gt("Linear,Quad,Cubic,Quart,Quint,Strong",(function(t,e){var n=e<5?e+1:e;ze(t+",Power"+(n-1),e?function(t){return Math.pow(t,n)}:function(t){return t},(function(t){return 1-Math.pow(1-t,n)}),(function(t){return t<.5?Math.pow(2*t,n)/2:1-Math.pow(2*(1-t),n)/2}))})),Ie.Linear.easeNone=Ie.none=Ie.Linear.easeIn,ze("Elastic",Be("in"),Be("out"),Be()),g=7.5625,b=2*(y=1/(v=2.75)),x=2.5*y,ze("Bounce",(function(t){return 1-w(1-t)}),w=function(t){return t<y?g*t*t:t<b?g*Math.pow(t-1.5/v,2)+.75:t<x?g*(t-=2.25/v)*t+.9375:g*Math.pow(t-2.625/v,2)+.984375}),ze("Expo",(function(t){return t?Math.pow(2,10*(t-1)):0})),ze("Circ",(function(t){return-(k(1-t*t)-1)})),ze("Sine",(function(t){return 1===t?1:1-I(t*C)})),ze("Back",Ue("in"),Ue("out"),Ue()),Ie.SteppedEase=Ie.steps=$.SteppedEase={config:function(t,e){void 0===t&&(t=1);var n=1/t,r=t+(e?0:1),i=e?1:0;return function(t){return((r*Jt(0,.99999999,t)|0)+i)*n}}},S.ease=Ie["quad.out"],gt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(t){return dt+=t+","+t+"Params,"}));var je=function(t,e){this.id=T++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:mt,this.set=e?e.getSetter:an},Ve=function(){function t(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Yt(this,+t.duration,1,1),this.data=t.data,s&&(this._ctx=s,s.data.push(this)),m||Te.wake()}var e=t.prototype;return e.delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},e.duration=function(t){return arguments.length?this.totalDuration(this._repeat>0?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},e.totalDuration=function(t){return arguments.length?(this._dirty=0,Yt(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(t,e){if(ke(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(Ut(this,t),!n._dp||n.parent||jt(n,this);n&&n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&t<this._tDur||this._ts<0&&t>0||!this._tDur&&!t)&&Vt(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&Math.abs(this._zTime)===A||!t&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=t),_t(this,t,e)),this},e.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+Dt(this))%(this._dur+this._rDelay)||(t?this._dur:0),e):this._time},e.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},e.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+Dt(this),e):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(t,e){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*n,e):this._repeat?zt(this._tTime,n)+1:1},e.timeScale=function(t,e){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===t)return this;var n=this.parent&&this._ts?Ft(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||-1e-8===t?0:this._rts,this.totalTime(Jt(-Math.abs(this._delay),this._tDur,n),!1!==e),Bt(this),function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t}(this)},e.paused=function(t){return arguments.length?(this._ps!==t&&(this._ps=t,t?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(ke(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==A&&(this._tTime-=A)))),this):this._ps},e.startTime=function(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return e&&(e._sort||!this.parent)&&Vt(e,this,t-this._delay),this}return this._start},e.endTime=function(t){return this._start+(z(t)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Ft(e.rawTime(t),this):this._tTime:this._tTime},e.revert=function(t){void 0===t&&(t=it);var e=a;return a=t,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(t),this.totalTime(-.01,t.suppressEvents)),"nested"!==this.data&&!1!==t.kill&&this.kill(),a=e,this},e.globalTime=function(t){for(var e=this,n=arguments.length?t:e.rawTime();e;)n=e._start+n/(Math.abs(e._ts)||1),e=e._dp;return!this.parent&&this._sat?this._sat.globalTime(t):n},e.repeat=function(t){return arguments.length?(this._repeat=t===1/0?-2:t,qt(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(t){if(arguments.length){var e=this._time;return this._rDelay=t,qt(this),e?this.time(e):this}return this._rDelay},e.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},e.seek=function(t,e){return this.totalTime(Kt(this,t),z(e))},e.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,z(e))},e.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},e.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},e.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var t,e=this.parent||this._dp,n=this._start;return!(e&&!(this._ts&&this._initted&&e.isActive()&&(t=e.rawTime(!0))>=n&&t<this.endTime(!0)-A))},e.eventCallback=function(t,e,n){var r=this.vars;return arguments.length>1?(e?(r[t]=e,n&&(r[t+"Params"]=n),"onUpdate"===t&&(this._onUpdate=e)):delete r[t],this):r[t]},e.then=function(t){var e=this;return new Promise((function(n){var r=O(t)?t:Et,i=function(){var t=e.then;e.then=null,O(r)&&(r=r(e))&&(r.then||r===e)&&(e.then=t),n(r),e.then=t};e._initted&&1===e.totalProgress()&&e._ts>=0||!e._tTime&&e._ts<0?i():e._prom=i}))},e.kill=function(){ge(this)},t}();At(Ve.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var He=function(t){function e(e,n){var i;return void 0===e&&(e={}),(i=t.call(this,e)||this).labels={},i.smoothChildTiming=!!e.smoothChildTiming,i.autoRemoveChildren=!!e.autoRemoveChildren,i._sort=z(e.sortChildren),u&&Vt(e.parent||u,r(i),n),e.reversed&&i.reverse(),e.paused&&i.paused(!0),e.scrollTrigger&&Ht(r(i),e.scrollTrigger),i}i(e,t);var n=e.prototype;return n.to=function(t,e,n){return Zt(0,arguments,this),this},n.from=function(t,e,n){return Zt(1,arguments,this),this},n.fromTo=function(t,e,n,r){return Zt(2,arguments,this),this},n.set=function(t,e,n){return e.duration=0,e.parent=this,kt(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new tn(t,e,Kt(this,n),1),this},n.call=function(t,e,n){return Vt(this,tn.delayedCall(0,t,e),n)},n.staggerTo=function(t,e,n,r,i,o,a){return n.duration=e,n.stagger=n.stagger||r,n.onComplete=o,n.onCompleteParams=a,n.parent=this,new tn(t,n,Kt(this,i)),this},n.staggerFrom=function(t,e,n,r,i,o,a){return n.runBackwards=1,kt(n).immediateRender=z(n.immediateRender),this.staggerTo(t,e,n,r,i,o,a)},n.staggerFromTo=function(t,e,n,r,i,o,a,s){return r.startAt=n,kt(r).immediateRender=z(r.immediateRender),this.staggerTo(t,e,r,i,o,a,s)},n.render=function(t,e,n){var r,i,o,s,l,c,h,d,f,p,m,g,v=this._time,y=this._dirty?this.totalDuration():this._tDur,b=this._dur,x=t<=0?0:yt(t),w=this._zTime<0!=t<0&&(this._initted||!b);if(this!==u&&x>y&&t>=0&&(x=y),x!==this._tTime||n||w){if(v!==this._time&&b&&(x+=this._time-v,t+=this._time-v),r=x,f=this._start,c=!(d=this._ts),w&&(b||(v=this._zTime),(t||!e)&&(this._zTime=t)),this._repeat){if(m=this._yoyo,l=b+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*l+t,e,n);if(r=yt(x%l),x===y?(s=this._repeat,r=b):((s=~~(x/l))&&s===x/l&&(r=b,s--),r>b&&(r=b)),p=zt(this._tTime,l),!v&&this._tTime&&p!==s&&this._tTime-p*l-this._dur<=0&&(p=s),m&&1&s&&(r=b-r,g=1),s!==p&&!this._lock){var _=m&&1&p,S=_===(m&&1&s);if(s<p&&(_=!_),v=_?0:x%b?b:x,this._lock=1,this.render(v||(g?0:yt(s*l)),e,!b)._lock=0,this._tTime=x,!e&&this.parent&&me(this,"onRepeat"),this.vars.repeatRefresh&&!g&&(this.invalidate()._lock=1),v&&v!==this._time||c!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(b=this._dur,y=this._tDur,S&&(this._lock=2,v=_?b:-1e-4,this.render(v,!0),this.vars.repeatRefresh&&!g&&this.invalidate()),this._lock=0,!this._ts&&!c)return this;Re(this,g)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(h=function(t,e,n){var r;if(n>e)for(r=t._first;r&&r._start<=n;){if("isPause"===r.data&&r._start>e)return r;r=r._next}else for(r=t._last;r&&r._start>=n;){if("isPause"===r.data&&r._start<e)return r;r=r._prev}}(this,yt(v),yt(r)),h&&(x-=r-(r=h._start))),this._tTime=x,this._time=r,this._act=!d,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t,v=0),!v&&r&&!e&&!s&&(me(this,"onStart"),this._tTime!==x))return this;if(r>=v&&t>=0)for(i=this._first;i;){if(o=i._next,(i._act||r>=i._start)&&i._ts&&h!==i){if(i.parent!==this)return this.render(t,e,n);if(i.render(i._ts>0?(r-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(r-i._start)*i._ts,e,n),r!==this._time||!this._ts&&!c){h=0,o&&(x+=this._zTime=-1e-8);break}}i=o}else{i=this._last;for(var E=t<0?t:r;i;){if(o=i._prev,(i._act||E<=i._end)&&i._ts&&h!==i){if(i.parent!==this)return this.render(t,e,n);if(i.render(i._ts>0?(E-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(E-i._start)*i._ts,e,n||a&&(i._initted||i._startAt)),r!==this._time||!this._ts&&!c){h=0,o&&(x+=this._zTime=E?-1e-8:A);break}}i=o}}if(h&&!e&&(this.pause(),h.render(r>=v?0:-1e-8)._zTime=r>=v?1:-1,this._ts))return this._start=f,Bt(this),this.render(t,e,n);this._onUpdate&&!e&&me(this,"onUpdate",!0),(x===y&&this._tTime>=this.totalDuration()||!x&&v)&&(f!==this._start&&Math.abs(d)===Math.abs(this._ts)||this._lock||((t||!b)&&(x===y&&this._ts>0||!x&&this._ts<0)&&Pt(this,1),e||t<0&&!v||!x&&!v&&y||(me(this,x===y&&t>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(x<y&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(t,e){var n=this;if(L(e)||(e=Kt(this,e,t)),!(t instanceof Ve)){if(j(t))return t.forEach((function(t){return n.add(t,e)})),this;if(P(t))return this.addLabel(t,e);if(!O(t))return this;t=tn.delayedCall(0,t)}return this!==t?Vt(this,t,e):this},n.getChildren=function(t,e,n,r){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===n&&(n=!0),void 0===r&&(r=-E);for(var i=[],o=this._first;o;)o._start>=r&&(o instanceof tn?e&&i.push(o):(n&&i.push(o),t&&i.push.apply(i,o.getChildren(!0,e,n)))),o=o._next;return i},n.getById=function(t){for(var e=this.getChildren(1,1,1),n=e.length;n--;)if(e[n].vars.id===t)return e[n]},n.remove=function(t){return P(t)?this.removeLabel(t):O(t)?this.killTweensOf(t):(Nt(this,t),t===this._recent&&(this._recent=this._last),Ot(this))},n.totalTime=function(e,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=yt(Te.time-(this._ts>0?e/this._ts:(this.totalDuration()-e)/-this._ts))),t.prototype.totalTime.call(this,e,n),this._forcing=0,this):this._tTime},n.addLabel=function(t,e){return this.labels[t]=Kt(this,e),this},n.removeLabel=function(t){return delete this.labels[t],this},n.addPause=function(t,e,n){var r=tn.delayedCall(0,e||et,n);return r.data="isPause",this._hasPause=1,Vt(this,r,Kt(this,t))},n.removePause=function(t){var e=this._first;for(t=Kt(this,t);e;)e._start===t&&"isPause"===e.data&&Pt(e),e=e._next},n.killTweensOf=function(t,e,n){for(var r=this.getTweensOf(t,n),i=r.length;i--;)Ge!==r[i]&&r[i].kill(t,e);return this},n.getTweensOf=function(t,e){for(var n,r=[],i=ie(t),o=this._first,a=L(e);o;)o instanceof tn?xt(o._targets,i)&&(a?(!Ge||o._initted&&o._ts)&&o.globalTime(0)<=e&&o.globalTime(o.totalDuration())>e:!e||o.isActive())&&r.push(o):(n=o.getTweensOf(i,e)).length&&r.push.apply(r,n),o=o._next;return r},n.tweenTo=function(t,e){e=e||{};var n,r=this,i=Kt(r,t),o=e,a=o.startAt,s=o.onStart,u=o.onStartParams,l=o.immediateRender,c=tn.to(r,At({ease:e.ease||"none",lazy:!1,immediateRender:!1,time:i,overwrite:"auto",duration:e.duration||Math.abs((i-(a&&"time"in a?a.time:r._time))/r.timeScale())||A,onStart:function(){if(r.pause(),!n){var t=e.duration||Math.abs((i-(a&&"time"in a?a.time:r._time))/r.timeScale());c._dur!==t&&Yt(c,t,0,1).render(c._time,!0,!0),n=1}s&&s.apply(c,u||[])}},e));return l?c.render(0):c},n.tweenFromTo=function(t,e,n){return this.tweenTo(e,At({startAt:{time:Kt(this,t)}},n))},n.recent=function(){return this._recent},n.nextLabel=function(t){return void 0===t&&(t=this._time),pe(this,Kt(this,t))},n.previousLabel=function(t){return void 0===t&&(t=this._time),pe(this,Kt(this,t),1)},n.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+A)},n.shiftChildren=function(t,e,n){void 0===n&&(n=0);for(var r,i=this._first,o=this.labels;i;)i._start>=n&&(i._start+=t,i._end+=t),i=i._next;if(e)for(r in o)o[r]>=n&&(o[r]+=t);return Ot(this)},n.invalidate=function(e){var n=this._first;for(this._lock=0;n;)n.invalidate(e),n=n._next;return t.prototype.invalidate.call(this,e)},n.clear=function(t){void 0===t&&(t=!0);for(var e,n=this._first;n;)e=n._next,this.remove(n),n=e;return this._dp&&(this._time=this._tTime=this._pTime=0),t&&(this.labels={}),Ot(this)},n.totalDuration=function(t){var e,n,r,i=0,o=this,a=o._last,s=E;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-t:t));if(o._dirty){for(r=o.parent;a;)e=a._prev,a._dirty&&a.totalDuration(),(n=a._start)>s&&o._sort&&a._ts&&!o._lock?(o._lock=1,Vt(o,a,n-a._delay,1)._lock=0):s=n,n<0&&a._ts&&(i-=n,(!r&&!o._dp||r&&r.smoothChildTiming)&&(o._start+=n/o._ts,o._time-=n,o._tTime-=n),o.shiftChildren(-n,!1,-Infinity),s=0),a._end>i&&a._ts&&(i=a._end),a=e;Yt(o,o===u&&o._time>i?o._time:i,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(t){if(u._ts&&(_t(u,Ft(t,u)),f=Te.frame),Te.frame>=ct){ct+=_.autoSleep||120;var e=u._first;if((!e||!e._ts)&&_.autoSleep&&Te._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||Te.sleep()}}},e}(Ve);At(He.prototype,{_lock:0,_hasPause:0,_forcing:0});var Ge,We,Xe=function(t,e,n,r,i,o,a){var s,u,l,c,h,d,f,p,m=new mn(this._pt,t,e,0,1,ln,null,i),g=0,v=0;for(m.b=n,m.e=r,n+="",(f=~(r+="").indexOf("random("))&&(r=de(r)),o&&(o(p=[n,r],t,e),n=p[0],r=p[1]),u=n.match(W)||[];s=W.exec(r);)c=s[0],h=r.substring(g,s.index),l?l=(l+1)%5:"rgba("===h.substr(-5)&&(l=1),c!==u[v++]&&(d=parseFloat(u[v-1])||0,m._pt={_next:m._pt,p:h||1===v?h:",",s:d,c:"="===c.charAt(1)?bt(d,c)-d:parseFloat(c)-d,m:l&&l<4?Math.round:0},g=W.lastIndex);return m.c=g<r.length?r.substring(g,r.length):"",m.fp=a,(X.test(r)||f)&&(m.e=0),this._pt=m,m},Ye=function(t,e,n,r,i,o,a,s,u,l){O(r)&&(r=r(i||0,t,o));var c,h=t[e],d="get"!==n?n:O(h)?u?t[e.indexOf("set")||!O(t["get"+e.substr(3)])?e:"get"+e.substr(3)](u):t[e]():h,f=O(h)?u?rn:nn:en;if(P(r)&&(~r.indexOf("random(")&&(r=de(r)),"="===r.charAt(1)&&((c=bt(d,r)+(te(d)||0))||0===c)&&(r=c)),!l||d!==r||We)return isNaN(d*r)||""===r?(!h&&!(e in t)&&Q(e,r),Xe.call(this,t,e,d,r,f,s||_.stringFilter,u)):(c=new mn(this._pt,t,e,+d||0,r-(d||0),"boolean"==typeof h?un:sn,0,f),u&&(c.fp=u),a&&c.modifier(a,this,t),this._pt=c)},qe=function(t,e,n,r,i,o){var a,s,u,l;if(ut[t]&&!1!==(a=new ut[t]).init(i,a.rawVars?e[t]:function(t,e,n,r,i){if(O(t)&&(t=Ze(t,i,e,n,r)),!D(t)||t.style&&t.nodeType||j(t)||U(t))return P(t)?Ze(t,i,e,n,r):t;var o,a={};for(o in t)a[o]=Ze(t[o],i,e,n,r);return a}(e[t],r,i,o,n),n,r,o)&&(n._pt=s=new mn(n._pt,i,t,0,1,a.render,a,0,a.priority),n!==p))for(u=n._ptLookup[n._targets.indexOf(i)],l=a._props.length;l--;)u[a._props[l]]=s;return a},$e=function t(e,n,r){var i,s,l,c,h,d,f,p,m,g,v,y,b,x=e.vars,w=x.ease,_=x.startAt,M=x.immediateRender,C=x.lazy,T=x.onUpdate,k=x.runBackwards,I=x.yoyoEase,N=x.keyframes,P=x.autoRevert,O=e._dur,L=e._startAt,R=e._targets,D=e.parent,F=D&&"nested"===D.data?D.vars.targets:R,B="auto"===e._overwrite&&!o,U=e.timeline;if(U&&(!N||!w)&&(w="none"),e._ease=De(w,S.ease),e._yEase=I?Le(De(!0===I?w:I,S.ease)):0,I&&e._yoyo&&!e._repeat&&(I=e._yEase,e._yEase=e._ease,e._ease=I),e._from=!U&&!!x.runBackwards,!U||N&&!x.stagger){if(y=(p=R[0]?pt(R[0]).harness:0)&&x[p.prop],i=Tt(x,ot),L&&(L._zTime<0&&L.progress(1),n<0&&k&&M&&!P?L.render(-1,!0):L.revert(k&&O?rt:nt),L._lazy=0),_){if(Pt(e._startAt=tn.set(R,At({data:"isStart",overwrite:!1,parent:D,immediateRender:!0,lazy:!L&&z(C),startAt:null,delay:0,onUpdate:T&&function(){return me(e,"onUpdate")},stagger:0},_))),e._startAt._dp=0,e._startAt._sat=e,n<0&&(a||!M&&!P)&&e._startAt.revert(rt),M&&O&&n<=0&&r<=0)return void(n&&(e._zTime=n))}else if(k&&O&&!L)if(n&&(M=!1),l=At({overwrite:!1,data:"isFromStart",lazy:M&&!L&&z(C),immediateRender:M,stagger:0,parent:D},i),y&&(l[p.prop]=y),Pt(e._startAt=tn.set(R,l)),e._startAt._dp=0,e._startAt._sat=e,n<0&&(a?e._startAt.revert(rt):e._startAt.render(-1,!0)),e._zTime=n,M){if(!n)return}else t(e._startAt,A,A);for(e._pt=e._ptCache=0,C=O&&z(C)||C&&!O,s=0;s<R.length;s++){if(f=(h=R[s])._gsap||ft(R)[s]._gsap,e._ptLookup[s]=g={},st[f.id]&&at.length&&wt(),v=F===R?s:F.indexOf(h),p&&!1!==(m=new p).init(h,y||i,e,v,F)&&(e._pt=c=new mn(e._pt,h,m.name,0,1,m.render,m,0,m.priority),m._props.forEach((function(t){g[t]=c})),m.priority&&(d=1)),!p||y)for(l in i)ut[l]&&(m=qe(l,i,e,v,h,F))?m.priority&&(d=1):g[l]=c=Ye.call(e,h,l,"get",i[l],v,F,0,x.stringFilter);e._op&&e._op[s]&&e.kill(h,e._op[s]),B&&e._pt&&(Ge=e,u.killTweensOf(h,g,e.globalTime(n)),b=!e.parent,Ge=0),e._pt&&C&&(st[f.id]=1)}d&&pn(e),e._onInit&&e._onInit(e)}e._onUpdate=T,e._initted=(!e._op||e._pt)&&!b,N&&n<=0&&U.render(E,!0,!0)},Ke=function(t,e,n,r){var i,o,a=e.ease||r||"power1.inOut";if(j(e))o=n[t]||(n[t]=[]),e.forEach((function(t,n){return o.push({t:n/(e.length-1)*100,v:t,e:a})}));else for(i in e)o=n[i]||(n[i]=[]),"ease"===i||o.push({t:parseFloat(t),v:e[i],e:a})},Ze=function(t,e,n,r,i){return O(t)?t.call(e,n,r,i):P(t)&&~t.indexOf("random(")?de(t):t},Qe=dt+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Je={};gt(Qe+",id,stagger,delay,duration,paused,scrollTrigger",(function(t){return Je[t]=1}));var tn=function(t){function e(e,n,i,a){var s;"number"==typeof n&&(i.duration=n,n=i,i=null);var l,c,h,d,f,p,m,g,v=(s=t.call(this,a?n:kt(n))||this).vars,y=v.duration,b=v.delay,x=v.immediateRender,w=v.stagger,S=v.overwrite,E=v.keyframes,A=v.defaults,M=v.scrollTrigger,C=v.yoyoEase,T=n.parent||u,k=(j(e)||U(e)?L(e[0]):"length"in n)?[e]:ie(e);if(s._targets=k.length?ft(k):J("GSAP target "+e+" not found. https://gsap.com",!_.nullTargetWarn)||[],s._ptLookup=[],s._overwrite=S,E||w||B(y)||B(b)){if(n=s.vars,(l=s.timeline=new He({data:"nested",defaults:A||{},targets:T&&"nested"===T.data?T.vars.targets:k})).kill(),l.parent=l._dp=r(s),l._start=0,w||B(y)||B(b)){if(d=k.length,m=w&&se(w),D(w))for(f in w)~Qe.indexOf(f)&&(g||(g={}),g[f]=w[f]);for(c=0;c<d;c++)(h=Tt(n,Je)).stagger=0,C&&(h.yoyoEase=C),g&&Mt(h,g),p=k[c],h.duration=+Ze(y,r(s),c,p,k),h.delay=(+Ze(b,r(s),c,p,k)||0)-s._delay,!w&&1===d&&h.delay&&(s._delay=b=h.delay,s._start+=b,h.delay=0),l.to(p,h,m?m(c,p,k):0),l._ease=Ie.none;l.duration()?y=b=0:s.timeline=0}else if(E){kt(At(l.vars.defaults,{ease:"none"})),l._ease=De(E.ease||n.ease||"none");var I,N,P,O=0;if(j(E))E.forEach((function(t){return l.to(k,t,">")})),l.duration();else{for(f in h={},E)"ease"===f||"easeEach"===f||Ke(f,E[f],h,E.easeEach);for(f in h)for(I=h[f].sort((function(t,e){return t.t-e.t})),O=0,c=0;c<I.length;c++)(P={ease:(N=I[c]).e,duration:(N.t-(c?I[c-1].t:0))/100*y})[f]=N.v,l.to(k,P,O),O+=P.duration;l.duration()<y&&l.to({},{duration:y-l.duration()})}}y||s.duration(y=l.duration())}else s.timeline=0;return!0!==S||o||(Ge=r(s),u.killTweensOf(k),Ge=0),Vt(T,r(s),i),n.reversed&&s.reverse(),n.paused&&s.paused(!0),(x||!y&&!E&&s._start===yt(T._time)&&z(x)&&Rt(r(s))&&"nested"!==T.data)&&(s._tTime=-1e-8,s.render(Math.max(0,-b)||0)),M&&Ht(r(s),M),s}i(e,t);var n=e.prototype;return n.render=function(t,e,n){var r,i,o,s,u,l,c,h,d,f=this._time,p=this._tDur,m=this._dur,g=t<0,v=t>p-A&&!g?p:t<A?0:t;if(m){if(v!==this._tTime||!t||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==g){if(r=v,h=this.timeline,this._repeat){if(s=m+this._rDelay,this._repeat<-1&&g)return this.totalTime(100*s+t,e,n);if(r=yt(v%s),v===p?(o=this._repeat,r=m):((o=~~(v/s))&&o===yt(v/s)&&(r=m,o--),r>m&&(r=m)),(l=this._yoyo&&1&o)&&(d=this._yEase,r=m-r),u=zt(this._tTime,s),r===f&&!n&&this._initted&&o===u)return this._tTime=v,this;o!==u&&(h&&this._yEase&&Re(h,l),this.vars.repeatRefresh&&!l&&!this._lock&&this._time!==s&&this._initted&&(this._lock=n=1,this.render(yt(s*o),!0).invalidate()._lock=0))}if(!this._initted){if(Gt(this,g?t:r,n,e,v))return this._tTime=0,this;if(!(f===this._time||n&&this.vars.repeatRefresh&&o!==u))return this;if(m!==this._dur)return this.render(t,e,n)}if(this._tTime=v,this._time=r,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=c=(d||this._ease)(r/m),this._from&&(this.ratio=c=1-c),r&&!f&&!e&&!o&&(me(this,"onStart"),this._tTime!==v))return this;for(i=this._pt;i;)i.r(c,i.d),i=i._next;h&&h.render(t<0?t:h._dur*h._ease(r/this._dur),e,n)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(g&&Lt(this,t,0,n),me(this,"onUpdate")),this._repeat&&o!==u&&this.vars.onRepeat&&!e&&this.parent&&me(this,"onRepeat"),v!==this._tDur&&v||this._tTime!==v||(g&&!this._onUpdate&&Lt(this,t,0,!0),(t||!m)&&(v===this._tDur&&this._ts>0||!v&&this._ts<0)&&Pt(this,1),e||g&&!f||!(v||f||l)||(me(this,v===p?"onComplete":"onReverseComplete",!0),this._prom&&!(v<p&&this.timeScale()>0)&&this._prom()))}}else!function(t,e,n,r){var i,o,s,u=t.ratio,l=e<0||!e&&(!t._start&&Wt(t)&&(t._initted||!Xt(t))||(t._ts<0||t._dp._ts<0)&&!Xt(t))?0:1,c=t._rDelay,h=0;if(c&&t._repeat&&(h=Jt(0,t._tDur,e),o=zt(h,c),t._yoyo&&1&o&&(l=1-l),o!==zt(t._tTime,c)&&(u=1-l,t.vars.repeatRefresh&&t._initted&&t.invalidate())),l!==u||a||r||t._zTime===A||!e&&t._zTime){if(!t._initted&&Gt(t,e,r,n,h))return;for(s=t._zTime,t._zTime=e||(n?A:0),n||(n=e&&!s),t.ratio=l,t._from&&(l=1-l),t._time=0,t._tTime=h,i=t._pt;i;)i.r(l,i.d),i=i._next;e<0&&Lt(t,e,0,!0),t._onUpdate&&!n&&me(t,"onUpdate"),h&&t._repeat&&!n&&t.parent&&me(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===l&&(l&&Pt(t,1),n||a||(me(t,l?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)}(this,t,e,n);return this},n.targets=function(){return this._targets},n.invalidate=function(e){return(!e||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(e),t.prototype.invalidate.call(this,e)},n.resetTo=function(t,e,n,r,i){m||Te.wake(),this._ts||this.play();var o=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||$e(this,o),function(t,e,n,r,i,o,a,s){var u,l,c,h,d=(t._pt&&t._ptCache||(t._ptCache={}))[e];if(!d)for(d=t._ptCache[e]=[],c=t._ptLookup,h=t._targets.length;h--;){if((u=c[h][e])&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==e&&u.fp!==e;)u=u._next;if(!u)return We=1,t.vars[e]="+=0",$e(t,a),We=0,s?J(e+" not eligible for reset"):1;d.push(u)}for(h=d.length;h--;)(u=(l=d[h])._pt||l).s=!r&&0!==r||i?u.s+(r||0)+o*u.c:r,u.c=n-u.s,l.e&&(l.e=vt(n)+te(l.e)),l.b&&(l.b=u.s+te(l.b))}(this,t,e,n,r,this._ease(o/this._dur),o,i)?this.resetTo(t,e,n,r,1):(Ut(this,0),this.parent||It(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e))return this._lazy=this._pt=0,this.parent?ge(this):this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(t,e,Ge&&!0!==Ge.vars.overwrite)._first||ge(this),this.parent&&n!==this.timeline.totalDuration()&&Yt(this,this._dur*this.timeline._tDur/n,0,1),this}var r,i,o,a,s,u,l,c=this._targets,h=t?ie(t):c,d=this._ptLookup,f=this._pt;if((!e||"all"===e)&&function(t,e){for(var n=t.length,r=n===e.length;r&&n--&&t[n]===e[n];);return n<0}(c,h))return"all"===e&&(this._pt=0),ge(this);for(r=this._op=this._op||[],"all"!==e&&(P(e)&&(s={},gt(e,(function(t){return s[t]=1})),e=s),e=function(t,e){var n,r,i,o,a=t[0]?pt(t[0]).harness:0,s=a&&a.aliases;if(!s)return e;for(r in n=Mt({},e),s)if(r in n)for(i=(o=s[r].split(",")).length;i--;)n[o[i]]=n[r];return n}(c,e)),l=c.length;l--;)if(~h.indexOf(c[l]))for(s in i=d[l],"all"===e?(r[l]=e,a=i,o={}):(o=r[l]=r[l]||{},a=e),a)(u=i&&i[s])&&("kill"in u.d&&!0!==u.d.kill(s)||Nt(this,u,"_pt"),delete i[s]),"all"!==o&&(o[s]=1);return this._initted&&!this._pt&&f&&ge(this),this},e.to=function(t,n){return new e(t,n,arguments[2])},e.from=function(t,e){return Zt(1,arguments)},e.delayedCall=function(t,n,r,i){return new e(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:n,onReverseComplete:n,onCompleteParams:r,onReverseCompleteParams:r,callbackScope:i})},e.fromTo=function(t,e,n){return Zt(2,arguments)},e.set=function(t,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new e(t,n)},e.killTweensOf=function(t,e,n){return u.killTweensOf(t,e,n)},e}(Ve);At(tn.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),gt("staggerTo,staggerFrom,staggerFromTo",(function(t){tn[t]=function(){var e=new He,n=ee.call(arguments,0);return n.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,n)}}));var en=function(t,e,n){return t[e]=n},nn=function(t,e,n){return t[e](n)},rn=function(t,e,n,r){return t[e](r.fp,n)},on=function(t,e,n){return t.setAttribute(e,n)},an=function(t,e){return O(t[e])?nn:R(t[e])&&t.setAttribute?on:en},sn=function(t,e){return e.set(e.t,e.p,Math.round(1e6*(e.s+e.c*t))/1e6,e)},un=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},ln=function(t,e){var n=e._pt,r="";if(!t&&e.b)r=e.b;else if(1===t&&e.e)r=e.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*t):Math.round(1e4*(n.s+n.c*t))/1e4)+r,n=n._next;r+=e.c}e.set(e.t,e.p,r,e)},cn=function(t,e){for(var n=e._pt;n;)n.r(t,n.d),n=n._next},hn=function(t,e,n,r){for(var i,o=this._pt;o;)i=o._next,o.p===r&&o.modifier(t,e,n),o=i},dn=function(t){for(var e,n,r=this._pt;r;)n=r._next,r.p===t&&!r.op||r.op===t?Nt(this,r,"_pt"):r.dep||(e=1),r=n;return!e},fn=function(t,e,n,r){r.mSet(t,e,r.m.call(r.tween,n,r.mt),r)},pn=function(t){for(var e,n,r,i,o=t._pt;o;){for(e=o._next,n=r;n&&n.pr>o.pr;)n=n._next;(o._prev=n?n._prev:i)?o._prev._next=o:r=o,(o._next=n)?n._prev=o:i=o,o=e}t._pt=r},mn=function(){function t(t,e,n,r,i,o,a,s,u){this.t=e,this.s=r,this.c=i,this.p=n,this.r=o||sn,this.d=a||this,this.set=s||en,this.pr=u||0,this._next=t,t&&(t._prev=this)}return t.prototype.modifier=function(t,e,n){this.mSet=this.mSet||this.set,this.set=fn,this.m=t,this.mt=n,this.tween=e},t}();gt(dt+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(t){return ot[t]=1})),$.TweenMax=$.TweenLite=tn,$.TimelineLite=$.TimelineMax=He,u=new He({sortChildren:!1,defaults:S,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),_.stringFilter=Ce;var gn=[],vn={},yn=[],bn=0,xn=0,wn=function(t){return(vn[t]||yn).map((function(t){return t()}))},_n=function(){var t=Date.now(),e=[];t-bn>2&&(wn("matchMediaInit"),gn.forEach((function(t){var n,r,i,o,a=t.queries,s=t.conditions;for(r in a)(n=l.matchMedia(a[r]).matches)&&(i=1),n!==s[r]&&(s[r]=n,o=1);o&&(t.revert(),i&&e.push(t))})),wn("matchMediaRevert"),e.forEach((function(t){return t.onMatch(t,(function(e){return t.add(null,e)}))})),bn=t,wn("matchMedia"))},Sn=function(){function t(t,e){this.selector=e&&oe(e),this.data=[],this._r=[],this.isReverted=!1,this.id=xn++,t&&this.add(t)}var e=t.prototype;return e.add=function(t,e,n){O(t)&&(n=e,e=t,t=O);var r=this,i=function(){var t,i=s,o=r.selector;return i&&i!==r&&i.data.push(r),n&&(r.selector=oe(n)),s=r,t=e.apply(r,arguments),O(t)&&r._r.push(t),s=i,r.selector=o,r.isReverted=!1,t};return r.last=i,t===O?i(r,(function(t){return r.add(null,t)})):t?r[t]=i:i},e.ignore=function(t){var e=s;s=null,t(this),s=e},e.getTweens=function(){var e=[];return this.data.forEach((function(n){return n instanceof t?e.push.apply(e,n.getTweens()):n instanceof tn&&!(n.parent&&"nested"===n.parent.data)&&e.push(n)})),e},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(t,e){var n=this;if(t?function(){for(var e,r=n.getTweens(),i=n.data.length;i--;)"isFlip"===(e=n.data[i]).data&&(e.revert(),e.getChildren(!0,!0,!1).forEach((function(t){return r.splice(r.indexOf(t),1)})));for(r.map((function(t){return{g:t._dur||t._delay||t._sat&&!t._sat.vars.immediateRender?t.globalTime(0):-1/0,t}})).sort((function(t,e){return e.g-t.g||-1/0})).forEach((function(e){return e.t.revert(t)})),i=n.data.length;i--;)(e=n.data[i])instanceof He?"nested"!==e.data&&(e.scrollTrigger&&e.scrollTrigger.revert(),e.kill()):!(e instanceof tn)&&e.revert&&e.revert(t);n._r.forEach((function(e){return e(t,n)})),n.isReverted=!0}():this.data.forEach((function(t){return t.kill&&t.kill()})),this.clear(),e)for(var r=gn.length;r--;)gn[r].id===this.id&&gn.splice(r,1)},e.revert=function(t){this.kill(t||{})},t}(),En=function(){function t(t){this.contexts=[],this.scope=t,s&&s.data.push(this)}var e=t.prototype;return e.add=function(t,e,n){D(t)||(t={matches:t});var r,i,o,a=new Sn(0,n||this.scope),u=a.conditions={};for(i in s&&!a.selector&&(a.selector=s.selector),this.contexts.push(a),e=a.add("onMatch",e),a.queries=t,t)"all"===i?o=1:(r=l.matchMedia(t[i]))&&(gn.indexOf(a)<0&&gn.push(a),(u[i]=r.matches)&&(o=1),r.addListener?r.addListener(_n):r.addEventListener("change",_n));return o&&e(a,(function(t){return a.add(null,t)})),this},e.revert=function(t){this.kill(t||{})},e.kill=function(t){this.contexts.forEach((function(e){return e.kill(t,!0)}))},t}(),An={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach((function(t){return ye(t)}))},timeline:function(t){return new He(t)},getTweensOf:function(t,e){return u.getTweensOf(t,e)},getProperty:function(t,e,n,r){P(t)&&(t=ie(t)[0]);var i=pt(t||{}).get,o=n?Et:St;return"native"===n&&(n=""),t?e?o((ut[e]&&ut[e].get||i)(t,e,n,r)):function(e,n,r){return o((ut[e]&&ut[e].get||i)(t,e,n,r))}:t},quickSetter:function(t,e,n){if((t=ie(t)).length>1){var r=t.map((function(t){return Tn.quickSetter(t,e,n)})),i=r.length;return function(t){for(var e=i;e--;)r[e](t)}}t=t[0]||{};var o=ut[e],a=pt(t),s=a.harness&&(a.harness.aliases||{})[e]||e,u=o?function(e){var r=new o;p._pt=0,r.init(t,n?e+n:e,p,0,[t]),r.render(1,r),p._pt&&cn(1,p)}:a.set(t,s);return o?u:function(e){return u(t,s,n?e+n:e,a,1)}},quickTo:function(t,e,n){var r,i=Tn.to(t,Mt(((r={})[e]="+=0.1",r.paused=!0,r),n||{})),o=function(t,n,r){return i.resetTo(e,t,n,r)};return o.tween=i,o},isTweening:function(t){return u.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=De(t.ease,S.ease)),Ct(S,t||{})},config:function(t){return Ct(_,t||{})},registerEffect:function(t){var e=t.name,n=t.effect,r=t.plugins,i=t.defaults,o=t.extendTimeline;(r||"").split(",").forEach((function(t){return t&&!ut[t]&&!$[t]&&J(e+" effect requires "+t+" plugin.")})),lt[e]=function(t,e,r){return n(ie(t),At(e||{},i),r)},o&&(He.prototype[e]=function(t,n,r){return this.add(lt[e](t,D(n)?n:(r=n)&&{},this),r)})},registerEase:function(t,e){Ie[t]=De(e)},parseEase:function(t,e){return arguments.length?De(t,e):Ie},getById:function(t){return u.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var n,r,i=new He(t);for(i.smoothChildTiming=z(t.smoothChildTiming),u.remove(i),i._dp=0,i._time=i._tTime=u._time,n=u._first;n;)r=n._next,!e&&!n._dur&&n instanceof tn&&n.vars.onComplete===n._targets[0]||Vt(i,n,n._start-n._delay),n=r;return Vt(u,i,0),i},context:function(t,e){return t?new Sn(t,e):s},matchMedia:function(t){return new En(t)},matchMediaRefresh:function(){return gn.forEach((function(t){var e,n,r=t.conditions;for(n in r)r[n]&&(r[n]=!1,e=1);e&&t.revert()}))||_n()},addEventListener:function(t,e){var n=vn[t]||(vn[t]=[]);~n.indexOf(e)||n.push(e)},removeEventListener:function(t,e){var n=vn[t],r=n&&n.indexOf(e);r>=0&&n.splice(r,1)},utils:{wrap:function t(e,n,r){var i=n-e;return j(e)?he(e,t(0,e.length),n):Qt(r,(function(t){return(i+(t-e)%i)%i+e}))},wrapYoyo:function t(e,n,r){var i=n-e,o=2*i;return j(e)?he(e,t(0,e.length-1),n):Qt(r,(function(t){return e+((t=(o+(t-e)%o)%o||0)>i?o-t:t)}))},distribute:se,random:ce,snap:le,normalize:function(t,e,n){return fe(t,e,0,1,n)},getUnit:te,clamp:function(t,e,n){return Qt(n,(function(n){return Jt(t,e,n)}))},splitColor:_e,toArray:ie,selector:oe,mapRange:fe,pipe:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduce((function(t,e){return e(t)}),t)}},unitize:function(t,e){return function(n){return t(parseFloat(n))+(e||te(n))}},interpolate:function t(e,n,r,i){var o=isNaN(e+n)?0:function(t){return(1-t)*e+t*n};if(!o){var a,s,u,l,c,h=P(e),d={};if(!0===r&&(i=1)&&(r=null),h)e={p:e},n={p:n};else if(j(e)&&!j(n)){for(u=[],l=e.length,c=l-2,s=1;s<l;s++)u.push(t(e[s-1],e[s]));l--,o=function(t){t*=l;var e=Math.min(c,~~t);return u[e](t-e)},r=n}else i||(e=Mt(j(e)?[]:{},e));if(!u){for(a in n)Ye.call(d,e,a,"get",n[a]);o=function(t){return cn(t,d)||(h?e.p:e)}}}return Qt(r,o)},shuffle:ae},install:Z,effects:lt,ticker:Te,updateRoot:He.updateRoot,plugins:ut,globalTimeline:u,core:{PropTween:mn,globals:tt,Tween:tn,Timeline:He,Animation:Ve,getCache:pt,_removeLinkedListItem:Nt,reverting:function(){return a},context:function(t){return t&&s&&(s.data.push(t),t._ctx=s),s},suppressOverwrites:function(t){return o=t}}};gt("to,from,fromTo,delayedCall,set,killTweensOf",(function(t){return An[t]=tn[t]})),Te.add(He.updateRoot),p=An.to({},{duration:0});var Mn=function(t,e){for(var n=t._pt;n&&n.p!==e&&n.op!==e&&n.fp!==e;)n=n._next;return n},Cn=function(t,e){return{name:t,rawVars:1,init:function(t,n,r){r._onInit=function(t){var r,i;if(P(n)&&(r={},gt(n,(function(t){return r[t]=1})),n=r),e){for(i in r={},n)r[i]=e(n[i]);n=r}!function(t,e){var n,r,i,o=t._targets;for(n in e)for(r=o.length;r--;)(i=t._ptLookup[r][n])&&(i=i.d)&&(i._pt&&(i=Mn(i,n)),i&&i.modifier&&i.modifier(e[n],t,o[r],n))}(t,n)}}}},Tn=An.registerPlugin({name:"attr",init:function(t,e,n,r,i){var o,a,s;for(o in this.tween=n,e)s=t.getAttribute(o)||"",(a=this.add(t,"setAttribute",(s||0)+"",e[o],r,i,0,0,o)).op=o,a.b=s,this._props.push(o)},render:function(t,e){for(var n=e._pt;n;)a?n.set(n.t,n.p,n.b,n):n.r(t,n.d),n=n._next}},{name:"endArray",init:function(t,e){for(var n=e.length;n--;)this.add(t,n,t[n]||0,e[n],0,0,0,0,0,1)}},Cn("roundProps",ue),Cn("modifiers"),Cn("snap",le))||An;tn.version=He.version=Tn.version="3.12.5",d=1,F()&&ke();Ie.Power0,Ie.Power1,Ie.Power2,Ie.Power3,Ie.Power4,Ie.Linear,Ie.Quad,Ie.Cubic,Ie.Quart,Ie.Quint,Ie.Strong,Ie.Elastic,Ie.Back,Ie.SteppedEase,Ie.Bounce,Ie.Sine,Ie.Expo,Ie.Circ;var kn,In,Nn,Pn,On,Ln,Rn,Dn,zn={},Fn=180/Math.PI,Bn=Math.PI/180,Un=Math.atan2,jn=/([A-Z])/g,Vn=/(left|right|width|margin|padding|x)/i,Hn=/[\s,\(]\S/,Gn={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Wn=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},Xn=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},Yn=function(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)},qn=function(t,e){var n=e.s+e.c*t;e.set(e.t,e.p,~~(n+(n<0?-.5:.5))+e.u,e)},$n=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},Kn=function(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)},Zn=function(t,e,n){return t.style[e]=n},Qn=function(t,e,n){return t.style.setProperty(e,n)},Jn=function(t,e,n){return t._gsap[e]=n},tr=function(t,e,n){return t._gsap.scaleX=t._gsap.scaleY=n},er=function(t,e,n,r,i){var o=t._gsap;o.scaleX=o.scaleY=n,o.renderTransform(i,o)},nr=function(t,e,n,r,i){var o=t._gsap;o[e]=n,o.renderTransform(i,o)},rr="transform",ir=rr+"Origin",or=function t(e,n){var r=this,i=this.target,o=i.style,a=i._gsap;if(e in zn&&o){if(this.tfm=this.tfm||{},"transform"===e)return Gn.transform.split(",").forEach((function(e){return t.call(r,e,n)}));if(~(e=Gn[e]||e).indexOf(",")?e.split(",").forEach((function(t){return r.tfm[t]=Sr(i,t)})):this.tfm[e]=a.x?a[e]:Sr(i,e),e===ir&&(this.tfm.zOrigin=a.zOrigin),this.props.indexOf(rr)>=0)return;a.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(ir,n,"")),e=rr}(o||n)&&this.props.push(e,n,o[e])},ar=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},sr=function(){var t,e,n=this.props,r=this.target,i=r.style,o=r._gsap;for(t=0;t<n.length;t+=3)n[t+1]?r[n[t]]=n[t+2]:n[t+2]?i[n[t]]=n[t+2]:i.removeProperty("--"===n[t].substr(0,2)?n[t]:n[t].replace(jn,"-$1").toLowerCase());if(this.tfm){for(e in this.tfm)o[e]=this.tfm[e];o.svg&&(o.renderTransform(),r.setAttribute("data-svg-origin",this.svgo||"")),(t=Rn())&&t.isStart||i[rr]||(ar(i),o.zOrigin&&i[ir]&&(i[ir]+=" "+o.zOrigin+"px",o.zOrigin=0,o.renderTransform()),o.uncache=1)}},ur=function(t,e){var n={target:t,props:[],revert:sr,save:or};return t._gsap||Tn.core.getCache(t),e&&e.split(",").forEach((function(t){return n.save(t)})),n},lr=function(t,e){var n=In.createElementNS?In.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):In.createElement(t);return n&&n.style?n:In.createElement(t)},cr=function t(e,n,r){var i=getComputedStyle(e);return i[n]||i.getPropertyValue(n.replace(jn,"-$1").toLowerCase())||i.getPropertyValue(n)||!r&&t(e,dr(n)||n,1)||""},hr="O,Moz,ms,Ms,Webkit".split(","),dr=function(t,e,n){var r=(e||On).style,i=5;if(t in r&&!n)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);i--&&!(hr[i]+t in r););return i<0?null:(3===i?"ms":i>=0?hr[i]:"")+t},fr=function(){"undefined"!=typeof window&&window.document&&(kn=window,In=kn.document,Nn=In.documentElement,On=lr("div")||{style:{}},lr("div"),rr=dr(rr),ir=rr+"Origin",On.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Dn=!!dr("perspective"),Rn=Tn.core.reverting,Pn=1)},pr=function t(e){var n,r=lr("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,o=this.nextSibling,a=this.style.cssText;if(Nn.appendChild(r),r.appendChild(this),this.style.display="block",e)try{n=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=t}catch(t){}else this._gsapBBox&&(n=this._gsapBBox());return i&&(o?i.insertBefore(this,o):i.appendChild(this)),Nn.removeChild(r),this.style.cssText=a,n},mr=function(t,e){for(var n=e.length;n--;)if(t.hasAttribute(e[n]))return t.getAttribute(e[n])},gr=function(t){var e;try{e=t.getBBox()}catch(n){e=pr.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===pr||(e=pr.call(t,!0)),!e||e.width||e.x||e.y?e:{x:+mr(t,["x","cx","x1"])||0,y:+mr(t,["y","cy","y1"])||0,width:0,height:0}},vr=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!gr(t))},yr=function(t,e){if(e){var n,r=t.style;e in zn&&e!==ir&&(e=rr),r.removeProperty?("ms"!==(n=e.substr(0,2))&&"webkit"!==e.substr(0,6)||(e="-"+e),r.removeProperty("--"===n?e:e.replace(jn,"-$1").toLowerCase())):r.removeAttribute(e)}},br=function(t,e,n,r,i,o){var a=new mn(t._pt,e,n,0,1,o?Kn:$n);return t._pt=a,a.b=r,a.e=i,t._props.push(n),a},xr={deg:1,rad:1,turn:1},wr={grid:1,flex:1},_r=function t(e,n,r,i){var o,a,s,u,l=parseFloat(r)||0,c=(r+"").trim().substr((l+"").length)||"px",h=On.style,d=Vn.test(n),f="svg"===e.tagName.toLowerCase(),p=(f?"client":"offset")+(d?"Width":"Height"),m=100,g="px"===i,v="%"===i;if(i===c||!l||xr[i]||xr[c])return l;if("px"!==c&&!g&&(l=t(e,n,r,"px")),u=e.getCTM&&vr(e),(v||"%"===c)&&(zn[n]||~n.indexOf("adius")))return o=u?e.getBBox()[d?"width":"height"]:e[p],vt(v?l/o*m:l/100*o);if(h[d?"width":"height"]=m+(g?c:i),a=~n.indexOf("adius")||"em"===i&&e.appendChild&&!f?e:e.parentNode,u&&(a=(e.ownerSVGElement||{}).parentNode),a&&a!==In&&a.appendChild||(a=In.body),(s=a._gsap)&&v&&s.width&&d&&s.time===Te.time&&!s.uncache)return vt(l/s.width*m);if(!v||"height"!==n&&"width"!==n)(v||"%"===c)&&!wr[cr(a,"display")]&&(h.position=cr(e,"position")),a===e&&(h.position="static"),a.appendChild(On),o=On[p],a.removeChild(On),h.position="absolute";else{var y=e.style[n];e.style[n]=m+i,o=e[p],y?e.style[n]=y:yr(e,n)}return d&&v&&((s=pt(a)).time=Te.time,s.width=a[p]),vt(g?o*l/m:o&&l?m/o*l:0)},Sr=function(t,e,n,r){var i;return Pn||fr(),e in Gn&&"transform"!==e&&~(e=Gn[e]).indexOf(",")&&(e=e.split(",")[0]),zn[e]&&"transform"!==e?(i=Lr(t,r),i="transformOrigin"!==e?i[e]:i.svg?i.origin:Rr(cr(t,ir))+" "+i.zOrigin+"px"):(!(i=t.style[e])||"auto"===i||r||~(i+"").indexOf("calc("))&&(i=Cr[e]&&Cr[e](t,e,n)||cr(t,e)||mt(t,e)||("opacity"===e?1:0)),n&&!~(i+"").trim().indexOf(" ")?_r(t,e,i,n)+n:i},Er=function(t,e,n,r){if(!n||"none"===n){var i=dr(e,t,1),o=i&&cr(t,i,1);o&&o!==n?(e=i,n=o):"borderColor"===e&&(n=cr(t,"borderTopColor"))}var a,s,u,l,c,h,d,f,p,m,g,v=new mn(this._pt,t.style,e,0,1,ln),y=0,b=0;if(v.b=n,v.e=r,n+="","auto"===(r+="")&&(h=t.style[e],t.style[e]=r,r=cr(t,e)||r,h?t.style[e]=h:yr(t,e)),Ce(a=[n,r]),r=a[1],u=(n=a[0]).match(G)||[],(r.match(G)||[]).length){for(;s=G.exec(r);)d=s[0],p=r.substring(y,s.index),c?c=(c+1)%5:"rgba("!==p.substr(-5)&&"hsla("!==p.substr(-5)||(c=1),d!==(h=u[b++]||"")&&(l=parseFloat(h)||0,g=h.substr((l+"").length),"="===d.charAt(1)&&(d=bt(l,d)+g),f=parseFloat(d),m=d.substr((f+"").length),y=G.lastIndex-m.length,m||(m=m||_.units[e]||g,y===r.length&&(r+=m,v.e+=m)),g!==m&&(l=_r(t,e,h,m)||0),v._pt={_next:v._pt,p:p||1===b?p:",",s:l,c:f-l,m:c&&c<4||"zIndex"===e?Math.round:0});v.c=y<r.length?r.substring(y,r.length):""}else v.r="display"===e&&"none"===r?Kn:$n;return X.test(r)&&(v.e=0),this._pt=v,v},Ar={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Mr=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var n,r,i,o=e.t,a=o.style,s=e.u,u=o._gsap;if("all"===s||!0===s)a.cssText="",r=1;else for(i=(s=s.split(",")).length;--i>-1;)n=s[i],zn[n]&&(r=1,n="transformOrigin"===n?ir:rr),yr(o,n);r&&(yr(o,rr),u&&(u.svg&&o.removeAttribute("transform"),Lr(o,1),u.uncache=1,ar(a)))}},Cr={clearProps:function(t,e,n,r,i){if("isFromStart"!==i.data){var o=t._pt=new mn(t._pt,e,n,0,0,Mr);return o.u=r,o.pr=-10,o.tween=i,t._props.push(n),1}}},Tr=[1,0,0,1,0,0],kr={},Ir=function(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t},Nr=function(t){var e=cr(t,rr);return Ir(e)?Tr:e.substr(7).match(H).map(vt)},Pr=function(t,e){var n,r,i,o,a=t._gsap||pt(t),s=t.style,u=Nr(t);return a.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(u=[(i=t.transform.baseVal.consolidate().matrix).a,i.b,i.c,i.d,i.e,i.f]).join(",")?Tr:u:(u!==Tr||t.offsetParent||t===Nn||a.svg||(i=s.display,s.display="block",(n=t.parentNode)&&t.offsetParent||(o=1,r=t.nextElementSibling,Nn.appendChild(t)),u=Nr(t),i?s.display=i:yr(t,"display"),o&&(r?n.insertBefore(t,r):n?n.appendChild(t):Nn.removeChild(t))),e&&u.length>6?[u[0],u[1],u[4],u[5],u[12],u[13]]:u)},Or=function(t,e,n,r,i,o){var a,s,u,l=t._gsap,c=i||Pr(t,!0),h=l.xOrigin||0,d=l.yOrigin||0,f=l.xOffset||0,p=l.yOffset||0,m=c[0],g=c[1],v=c[2],y=c[3],b=c[4],x=c[5],w=e.split(" "),_=parseFloat(w[0])||0,S=parseFloat(w[1])||0;n?c!==Tr&&(s=m*y-g*v)&&(u=_*(-g/s)+S*(m/s)-(m*x-g*b)/s,_=_*(y/s)+S*(-v/s)+(v*x-y*b)/s,S=u):(_=(a=gr(t)).x+(~w[0].indexOf("%")?_/100*a.width:_),S=a.y+(~(w[1]||w[0]).indexOf("%")?S/100*a.height:S)),r||!1!==r&&l.smooth?(b=_-h,x=S-d,l.xOffset=f+(b*m+x*v)-b,l.yOffset=p+(b*g+x*y)-x):l.xOffset=l.yOffset=0,l.xOrigin=_,l.yOrigin=S,l.smooth=!!r,l.origin=e,l.originIsAbsolute=!!n,t.style[ir]="0px 0px",o&&(br(o,l,"xOrigin",h,_),br(o,l,"yOrigin",d,S),br(o,l,"xOffset",f,l.xOffset),br(o,l,"yOffset",p,l.yOffset)),t.setAttribute("data-svg-origin",_+" "+S)},Lr=function(t,e){var n=t._gsap||new je(t);if("x"in n&&!e&&!n.uncache)return n;var r,i,o,a,s,u,l,c,h,d,f,p,m,g,v,y,b,x,w,S,E,A,M,C,T,k,I,N,P,O,L,R,D=t.style,z=n.scaleX<0,F="px",B="deg",U=getComputedStyle(t),j=cr(t,ir)||"0";return r=i=o=u=l=c=h=d=f=0,a=s=1,n.svg=!(!t.getCTM||!vr(t)),U.translate&&("none"===U.translate&&"none"===U.scale&&"none"===U.rotate||(D[rr]=("none"!==U.translate?"translate3d("+(U.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==U.rotate?"rotate("+U.rotate+") ":"")+("none"!==U.scale?"scale("+U.scale.split(" ").join(",")+") ":"")+("none"!==U[rr]?U[rr]:"")),D.scale=D.rotate=D.translate="none"),g=Pr(t,n.svg),n.svg&&(n.uncache?(T=t.getBBox(),j=n.xOrigin-T.x+"px "+(n.yOrigin-T.y)+"px",C=""):C=!e&&t.getAttribute("data-svg-origin"),Or(t,C||j,!!C||n.originIsAbsolute,!1!==n.smooth,g)),p=n.xOrigin||0,m=n.yOrigin||0,g!==Tr&&(x=g[0],w=g[1],S=g[2],E=g[3],r=A=g[4],i=M=g[5],6===g.length?(a=Math.sqrt(x*x+w*w),s=Math.sqrt(E*E+S*S),u=x||w?Un(w,x)*Fn:0,(h=S||E?Un(S,E)*Fn+u:0)&&(s*=Math.abs(Math.cos(h*Bn))),n.svg&&(r-=p-(p*x+m*S),i-=m-(p*w+m*E))):(R=g[6],O=g[7],I=g[8],N=g[9],P=g[10],L=g[11],r=g[12],i=g[13],o=g[14],l=(v=Un(R,P))*Fn,v&&(C=A*(y=Math.cos(-v))+I*(b=Math.sin(-v)),T=M*y+N*b,k=R*y+P*b,I=A*-b+I*y,N=M*-b+N*y,P=R*-b+P*y,L=O*-b+L*y,A=C,M=T,R=k),c=(v=Un(-S,P))*Fn,v&&(y=Math.cos(-v),L=E*(b=Math.sin(-v))+L*y,x=C=x*y-I*b,w=T=w*y-N*b,S=k=S*y-P*b),u=(v=Un(w,x))*Fn,v&&(C=x*(y=Math.cos(v))+w*(b=Math.sin(v)),T=A*y+M*b,w=w*y-x*b,M=M*y-A*b,x=C,A=T),l&&Math.abs(l)+Math.abs(u)>359.9&&(l=u=0,c=180-c),a=vt(Math.sqrt(x*x+w*w+S*S)),s=vt(Math.sqrt(M*M+R*R)),v=Un(A,M),h=Math.abs(v)>2e-4?v*Fn:0,f=L?1/(L<0?-L:L):0),n.svg&&(C=t.getAttribute("transform"),n.forceCSS=t.setAttribute("transform","")||!Ir(cr(t,rr)),C&&t.setAttribute("transform",C))),Math.abs(h)>90&&Math.abs(h)<270&&(z?(a*=-1,h+=u<=0?180:-180,u+=u<=0?180:-180):(s*=-1,h+=h<=0?180:-180)),e=e||n.uncache,n.x=r-((n.xPercent=r&&(!e&&n.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-r)?-50:0)))?t.offsetWidth*n.xPercent/100:0)+F,n.y=i-((n.yPercent=i&&(!e&&n.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-i)?-50:0)))?t.offsetHeight*n.yPercent/100:0)+F,n.z=o+F,n.scaleX=vt(a),n.scaleY=vt(s),n.rotation=vt(u)+B,n.rotationX=vt(l)+B,n.rotationY=vt(c)+B,n.skewX=h+B,n.skewY=d+B,n.transformPerspective=f+F,(n.zOrigin=parseFloat(j.split(" ")[2])||!e&&n.zOrigin||0)&&(D[ir]=Rr(j)),n.xOffset=n.yOffset=0,n.force3D=_.force3D,n.renderTransform=n.svg?Vr:Dn?jr:zr,n.uncache=0,n},Rr=function(t){return(t=t.split(" "))[0]+" "+t[1]},Dr=function(t,e,n){var r=te(e);return vt(parseFloat(e)+parseFloat(_r(t,"x",n+"px",r)))+r},zr=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,jr(t,e)},Fr="0deg",Br="0px",Ur=") ",jr=function(t,e){var n=e||this,r=n.xPercent,i=n.yPercent,o=n.x,a=n.y,s=n.z,u=n.rotation,l=n.rotationY,c=n.rotationX,h=n.skewX,d=n.skewY,f=n.scaleX,p=n.scaleY,m=n.transformPerspective,g=n.force3D,v=n.target,y=n.zOrigin,b="",x="auto"===g&&t&&1!==t||!0===g;if(y&&(c!==Fr||l!==Fr)){var w,_=parseFloat(l)*Bn,S=Math.sin(_),E=Math.cos(_);_=parseFloat(c)*Bn,w=Math.cos(_),o=Dr(v,o,S*w*-y),a=Dr(v,a,-Math.sin(_)*-y),s=Dr(v,s,E*w*-y+y)}m!==Br&&(b+="perspective("+m+Ur),(r||i)&&(b+="translate("+r+"%, "+i+"%) "),(x||o!==Br||a!==Br||s!==Br)&&(b+=s!==Br||x?"translate3d("+o+", "+a+", "+s+") ":"translate("+o+", "+a+Ur),u!==Fr&&(b+="rotate("+u+Ur),l!==Fr&&(b+="rotateY("+l+Ur),c!==Fr&&(b+="rotateX("+c+Ur),h===Fr&&d===Fr||(b+="skew("+h+", "+d+Ur),1===f&&1===p||(b+="scale("+f+", "+p+Ur),v.style[rr]=b||"translate(0, 0)"},Vr=function(t,e){var n,r,i,o,a,s=e||this,u=s.xPercent,l=s.yPercent,c=s.x,h=s.y,d=s.rotation,f=s.skewX,p=s.skewY,m=s.scaleX,g=s.scaleY,v=s.target,y=s.xOrigin,b=s.yOrigin,x=s.xOffset,w=s.yOffset,_=s.forceCSS,S=parseFloat(c),E=parseFloat(h);d=parseFloat(d),f=parseFloat(f),(p=parseFloat(p))&&(f+=p=parseFloat(p),d+=p),d||f?(d*=Bn,f*=Bn,n=Math.cos(d)*m,r=Math.sin(d)*m,i=Math.sin(d-f)*-g,o=Math.cos(d-f)*g,f&&(p*=Bn,a=Math.tan(f-p),i*=a=Math.sqrt(1+a*a),o*=a,p&&(a=Math.tan(p),n*=a=Math.sqrt(1+a*a),r*=a)),n=vt(n),r=vt(r),i=vt(i),o=vt(o)):(n=m,o=g,r=i=0),(S&&!~(c+"").indexOf("px")||E&&!~(h+"").indexOf("px"))&&(S=_r(v,"x",c,"px"),E=_r(v,"y",h,"px")),(y||b||x||w)&&(S=vt(S+y-(y*n+b*i)+x),E=vt(E+b-(y*r+b*o)+w)),(u||l)&&(a=v.getBBox(),S=vt(S+u/100*a.width),E=vt(E+l/100*a.height)),a="matrix("+n+","+r+","+i+","+o+","+S+","+E+")",v.setAttribute("transform",a),_&&(v.style[rr]=a)},Hr=function(t,e,n,r,i){var o,a,s=360,u=P(i),l=parseFloat(i)*(u&&~i.indexOf("rad")?Fn:1)-r,c=r+l+"deg";return u&&("short"===(o=i.split("_")[1])&&(l%=s)!==l%180&&(l+=l<0?s:-360),"cw"===o&&l<0?l=(l+36e9)%s-~~(l/s)*s:"ccw"===o&&l>0&&(l=(l-36e9)%s-~~(l/s)*s)),t._pt=a=new mn(t._pt,e,n,r,l,Xn),a.e=c,a.u="deg",t._props.push(n),a},Gr=function(t,e){for(var n in e)t[n]=e[n];return t},Wr=function(t,e,n){var r,i,o,a,s,u,l,c=Gr({},n._gsap),h=n.style;for(i in c.svg?(o=n.getAttribute("transform"),n.setAttribute("transform",""),h[rr]=e,r=Lr(n,1),yr(n,rr),n.setAttribute("transform",o)):(o=getComputedStyle(n)[rr],h[rr]=e,r=Lr(n,1),h[rr]=o),zn)(o=c[i])!==(a=r[i])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(i)<0&&(s=te(o)!==(l=te(a))?_r(n,i,o,l):parseFloat(o),u=parseFloat(a),t._pt=new mn(t._pt,r,i,s,u-s,Wn),t._pt.u=l||0,t._props.push(i));Gr(r,c)};gt("padding,margin,Width,Radius",(function(t,e){var n="Top",r="Right",i="Bottom",o="Left",a=(e<3?[n,r,i,o]:[n+o,n+r,i+r,i+o]).map((function(n){return e<2?t+n:"border"+n+t}));Cr[e>1?"border"+t:t]=function(t,e,n,r,i){var o,s;if(arguments.length<4)return o=a.map((function(e){return Sr(t,e,n)})),5===(s=o.join(" ")).split(o[0]).length?o[0]:s;o=(r+"").split(" "),s={},a.forEach((function(t,e){return s[t]=o[e]=o[e]||o[(e-1)/2|0]})),t.init(e,s,i)}}));var Xr,Yr,qr,$r={name:"css",register:fr,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,n,r,i){var o,a,s,u,l,c,h,d,f,p,m,g,v,y,b,x,w,S,E,A,M=this._props,C=t.style,T=n.vars.startAt;for(h in Pn||fr(),this.styles=this.styles||ur(t),x=this.styles.props,this.tween=n,e)if("autoRound"!==h&&(a=e[h],!ut[h]||!qe(h,e,n,r,t,i)))if(l=typeof a,c=Cr[h],"function"===l&&(l=typeof(a=a.call(n,r,t,i))),"string"===l&&~a.indexOf("random(")&&(a=de(a)),c)c(this,t,h,a,n)&&(b=1);else if("--"===h.substr(0,2))o=(getComputedStyle(t).getPropertyValue(h)+"").trim(),a+="",Ae.lastIndex=0,Ae.test(o)||(d=te(o),f=te(a)),f?d!==f&&(o=_r(t,h,o,f)+f):d&&(a+=d),this.add(C,"setProperty",o,a,r,i,0,0,h),M.push(h),x.push(h,0,C[h]);else if("undefined"!==l){if(T&&h in T?(o="function"==typeof T[h]?T[h].call(n,r,t,i):T[h],P(o)&&~o.indexOf("random(")&&(o=de(o)),te(o+"")||"auto"===o||(o+=_.units[h]||te(Sr(t,h))||""),"="===(o+"").charAt(1)&&(o=Sr(t,h))):o=Sr(t,h),u=parseFloat(o),(p="string"===l&&"="===a.charAt(1)&&a.substr(0,2))&&(a=a.substr(2)),s=parseFloat(a),h in Gn&&("autoAlpha"===h&&(1===u&&"hidden"===Sr(t,"visibility")&&s&&(u=0),x.push("visibility",0,C.visibility),br(this,C,"visibility",u?"inherit":"hidden",s?"inherit":"hidden",!s)),"scale"!==h&&"transform"!==h&&~(h=Gn[h]).indexOf(",")&&(h=h.split(",")[0])),m=h in zn)if(this.styles.save(h),g||((v=t._gsap).renderTransform&&!e.parseTransform||Lr(t,e.parseTransform),y=!1!==e.smoothOrigin&&v.smooth,(g=this._pt=new mn(this._pt,C,rr,0,1,v.renderTransform,v,0,-1)).dep=1),"scale"===h)this._pt=new mn(this._pt,v,"scaleY",v.scaleY,(p?bt(v.scaleY,p+s):s)-v.scaleY||0,Wn),this._pt.u=0,M.push("scaleY",h),h+="X";else{if("transformOrigin"===h){x.push(ir,0,C[ir]),S=void 0,E=void 0,A=void 0,S=(w=a).split(" "),E=S[0],A=S[1]||"50%","top"!==E&&"bottom"!==E&&"left"!==A&&"right"!==A||(w=E,E=A,A=w),S[0]=Ar[E]||E,S[1]=Ar[A]||A,a=S.join(" "),v.svg?Or(t,a,0,y,0,this):((f=parseFloat(a.split(" ")[2])||0)!==v.zOrigin&&br(this,v,"zOrigin",v.zOrigin,f),br(this,C,h,Rr(o),Rr(a)));continue}if("svgOrigin"===h){Or(t,a,1,y,0,this);continue}if(h in kr){Hr(this,v,h,u,p?bt(u,p+a):a);continue}if("smoothOrigin"===h){br(this,v,"smooth",v.smooth,a);continue}if("force3D"===h){v[h]=a;continue}if("transform"===h){Wr(this,a,t);continue}}else h in C||(h=dr(h)||h);if(m||(s||0===s)&&(u||0===u)&&!Hn.test(a)&&h in C)s||(s=0),(d=(o+"").substr((u+"").length))!==(f=te(a)||(h in _.units?_.units[h]:d))&&(u=_r(t,h,o,f)),this._pt=new mn(this._pt,m?v:C,h,u,(p?bt(u,p+s):s)-u,m||"px"!==f&&"zIndex"!==h||!1===e.autoRound?Wn:qn),this._pt.u=f||0,d!==f&&"%"!==f&&(this._pt.b=o,this._pt.r=Yn);else if(h in C)Er.call(this,t,h,o,p?p+a:a);else if(h in t)this.add(t,h,o||t[h],p?p+a:a,r,i);else if("parseTransform"!==h){Q(h,a);continue}m||(h in C?x.push(h,0,C[h]):x.push(h,1,o||t[h])),M.push(h)}b&&pn(this)},render:function(t,e){if(e.tween._time||!Rn())for(var n=e._pt;n;)n.r(t,n.d),n=n._next;else e.styles.revert()},get:Sr,aliases:Gn,getSetter:function(t,e,n){var r=Gn[e];return r&&r.indexOf(",")<0&&(e=r),e in zn&&e!==ir&&(t._gsap.x||Sr(t,"x"))?n&&Ln===n?"scale"===e?tr:Jn:(Ln=n||{})&&("scale"===e?er:nr):t.style&&!R(t.style[e])?Zn:~e.indexOf("-")?Qn:an(t,e)},core:{_removeProperty:yr,_getMatrix:Pr}};Tn.utils.checkPrefix=dr,Tn.core.getStyleSaver=ur,qr=gt((Xr="x,y,z,scale,scaleX,scaleY,xPercent,yPercent")+","+(Yr="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(t){zn[t]=1})),gt(Yr,(function(t){_.units[t]="deg",kr[t]=1})),Gn[qr[13]]=Xr+","+Yr,gt("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(t){var e=t.split(":");Gn[e[1]]=qr[e[0]]})),gt("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(t){_.units[t]="px"})),Tn.registerPlugin($r);var Kr=Tn.registerPlugin($r)||Tn;Kr.core.Tween},4146:(t,e,n)=>{"use strict";var r=n(44363),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(t){return r.isMemo(t)?a:s[t.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var l=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;t.exports=function t(e,n,r){if("string"!=typeof n){if(p){var i=f(n);i&&i!==p&&t(e,i,r)}var a=c(n);h&&(a=a.concat(h(n)));for(var s=u(e),m=u(n),g=0;g<a.length;++g){var v=a[g];if(!(o[v]||r&&r[v]||m&&m[v]||s&&s[v])){var y=d(n,v);try{l(e,v,y)}catch(t){}}}}return e}},79238:t=>{var e=[],n=[];function r(t,r){if(r=r||{},void 0===t)throw new Error("insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).");var i,o=!0===r.prepend?"prepend":"append",a=void 0!==r.container?r.container:document.querySelector("head"),s=e.indexOf(a);return-1===s&&(s=e.push(a)-1,n[s]={}),void 0!==n[s]&&void 0!==n[s][o]?i=n[s][o]:(i=n[s][o]=function(){var t=document.createElement("style");return t.setAttribute("type","text/css"),t}(),"prepend"===o?a.insertBefore(i,a.childNodes[0]):a.appendChild(i)),65279===t.charCodeAt(0)&&(t=t.substr(1,t.length)),i.styleSheet?i.styleSheet.cssText+=t:i.textContent+=t,i}t.exports=r,t.exports.insertCss=r},62587:(t,e,n)=>{"use strict";n.d(e,{S:()=>l});var r=n(31635),i=n(78786),o=n(54819),a=n(31071);function s(t,e){return e?Object.keys(t).reduce((function(n,i){var o,a;return n[i]=(o=t[i],(a=e[i])?(0,r.__assign)((0,r.__assign)((0,r.__assign)({},o||{}),a||{}),Object.keys(o).reduce((function(t,e){return t[e]=(0,r.__assign)((0,r.__assign)({},o[e]),a[e]||{}),t}),{})):o),n}),(0,r.__assign)({},t)):t}function u(t){return{create:function(){return{get:function(e){return t[e]},set:function(e,n){t[e]=n}}}}}var l=function(){function t(e,n,i,l){var c,h=this;if(void 0===n&&(n=t.defaultLocale),this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(t){var e=h.formatToParts(t);if(1===e.length)return e[0].value;var n=e.reduce((function(t,e){return t.length&&e.type===a.TT.literal&&"string"==typeof t[t.length-1]?t[t.length-1]+=e.value:t.push(e.value),t}),[]);return n.length<=1?n[0]||"":n},this.formatToParts=function(t){return(0,a.hN)(h.ast,h.locales,h.formatters,h.formats,t,void 0,h.message)},this.resolvedOptions=function(){var t;return{locale:(null===(t=h.resolvedLocale)||void 0===t?void 0:t.toString())||Intl.NumberFormat.supportedLocalesOf(h.locales)[0]}},this.getAst=function(){return h.ast},this.locales=n,this.resolvedLocale=t.resolveLocale(n),"string"==typeof e){if(this.message=e,!t.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");var d=l||{},f=(d.formatters,(0,r.__rest)(d,["formatters"]));this.ast=t.__parse(e,(0,r.__assign)((0,r.__assign)({},f),{locale:this.resolvedLocale}))}else this.ast=e;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=s(t.formats,i),this.formatters=l&&l.formatters||(void 0===(c=this.formatterCache)&&(c={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:(0,o.B)((function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new((t=Intl.NumberFormat).bind.apply(t,(0,r.__spreadArray)([void 0],e,!1)))}),{cache:u(c.number),strategy:o.W.variadic}),getDateTimeFormat:(0,o.B)((function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new((t=Intl.DateTimeFormat).bind.apply(t,(0,r.__spreadArray)([void 0],e,!1)))}),{cache:u(c.dateTime),strategy:o.W.variadic}),getPluralRules:(0,o.B)((function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new((t=Intl.PluralRules).bind.apply(t,(0,r.__spreadArray)([void 0],e,!1)))}),{cache:u(c.pluralRules),strategy:o.W.variadic})})}return Object.defineProperty(t,"defaultLocale",{get:function(){return t.memoizedDefaultLocale||(t.memoizedDefaultLocale=(new Intl.NumberFormat).resolvedOptions().locale),t.memoizedDefaultLocale},enumerable:!1,configurable:!0}),t.memoizedDefaultLocale=null,t.resolveLocale=function(t){if(void 0!==Intl.Locale){var e=Intl.NumberFormat.supportedLocalesOf(t);return e.length>0?new Intl.Locale(e[0]):new Intl.Locale("string"==typeof t?t:t[0])}},t.__parse=i.qg,t.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},t}()},11732:(t,e,n)=>{"use strict";n.d(e,{$x:()=>a,Ei:()=>u,IF:()=>o,O4:()=>r,Zo:()=>s});var r,i=n(31635);!function(t){t.MISSING_VALUE="MISSING_VALUE",t.INVALID_VALUE="INVALID_VALUE",t.MISSING_INTL_API="MISSING_INTL_API"}(r||(r={}));var o=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.code=n,i.originalMessage=r,i}return(0,i.__extends)(e,t),e.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},e}(Error),a=function(t){function e(e,n,i,o){return t.call(this,'Invalid values for "'.concat(e,'": "').concat(n,'". Options are "').concat(Object.keys(i).join('", "'),'"'),r.INVALID_VALUE,o)||this}return(0,i.__extends)(e,t),e}(o),s=function(t){function e(e,n,i){return t.call(this,'Value for "'.concat(e,'" must be of type ').concat(n),r.INVALID_VALUE,i)||this}return(0,i.__extends)(e,t),e}(o),u=function(t){function e(e,n){return t.call(this,'The intl string context variable "'.concat(e,'" was not provided to the string "').concat(n,'"'),r.MISSING_VALUE,n)||this}return(0,i.__extends)(e,t),e}(o)},31071:(t,e,n)=>{"use strict";n.d(e,{RK:()=>a,TT:()=>r,hN:()=>s});var r,i=n(78786),o=n(11732);function a(t){return"function"==typeof t}function s(t,e,n,u,l,c,h){if(1===t.length&&(0,i.eW)(t[0]))return[{type:r.literal,value:t[0].value}];for(var d=[],f=0,p=t;f<p.length;f++){var m=p[f];if((0,i.eW)(m))d.push({type:r.literal,value:m.value});else if((0,i.jA)(m))"number"==typeof c&&d.push({type:r.literal,value:n.getNumberFormat(e).format(c)});else{var g=m.value;if(!l||!(g in l))throw new o.Ei(g,h);var v=l[g];if((0,i.Im)(m))v&&"string"!=typeof v&&"number"!=typeof v||(v="string"==typeof v||"number"==typeof v?String(v):""),d.push({type:"string"==typeof v?r.literal:r.object,value:v});else if((0,i.tv)(m)){var y="string"==typeof m.style?u.date[m.style]:(0,i.Tu)(m.style)?m.style.parsedOptions:void 0;d.push({type:r.literal,value:n.getDateTimeFormat(e,y).format(v)})}else if((0,i.Qh)(m)){y="string"==typeof m.style?u.time[m.style]:(0,i.Tu)(m.style)?m.style.parsedOptions:u.time.medium;d.push({type:r.literal,value:n.getDateTimeFormat(e,y).format(v)})}else if((0,i.oF)(m)){(y="string"==typeof m.style?u.number[m.style]:(0,i.N1)(m.style)?m.style.parsedOptions:void 0)&&y.scale&&(v*=y.scale||1),d.push({type:r.literal,value:n.getNumberFormat(e,y).format(v)})}else{if((0,i.xm)(m)){var b=m.children,x=m.value,w=l[x];if(!a(w))throw new o.Zo(x,"function",h);var _=w(s(b,e,n,u,l,c).map((function(t){return t.value})));Array.isArray(_)||(_=[_]),d.push.apply(d,_.map((function(t){return{type:"string"==typeof t?r.literal:r.object,value:t}})))}if((0,i.Jp)(m)){if(!(S=m.options[v]||m.options.other))throw new o.$x(m.value,v,Object.keys(m.options),h);d.push.apply(d,s(S.value,e,n,u,l))}else if((0,i.N6)(m)){var S;if(!(S=m.options["=".concat(v)])){if(!Intl.PluralRules)throw new o.IF('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n',o.O4.MISSING_INTL_API,h);var E=n.getPluralRules(e,{type:m.pluralType}).select(v-(m.offset||0));S=m.options[E]||m.options.other}if(!S)throw new o.$x(m.value,v,Object.keys(m.options),h);d.push.apply(d,s(S.value,e,n,u,l,v-(m.offset||0)))}else;}}}return function(t){return t.length<2?t:t.reduce((function(t,e){var n=t[t.length-1];return n&&n.type===r.literal&&e.type===r.literal?n.value+=e.value:t.push(e),t}),[])}(d)}!function(t){t[t.literal=0]="literal",t[t.object=1]="object"}(r||(r={}))},51873:(t,e,n)=>{var r=n(9325).Symbol;t.exports=r},72552:(t,e,n)=>{var r=n(51873),i=n(659),o=n(59350),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?i(t):o(t)}},4901:(t,e,n)=>{var r=n(72552),i=n(30294),o=n(40346),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&i(t.length)&&!!a[r(t)]}},54128:(t,e,n)=>{var r=n(31800),i=/^\s+/;t.exports=function(t){return t?t.slice(0,r(t)+1).replace(i,""):t}},27301:t=>{t.exports=function(t){return function(e){return t(e)}}},34840:(t,e,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=r},28879:(t,e,n)=>{var r=n(74335)(Object.getPrototypeOf,Object);t.exports=r},659:(t,e,n)=>{var r=n(51873),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(t){}var i=a.call(t);return r&&(e?t[s]=n:delete t[s]),i}},86009:(t,e,n)=>{t=n.nmd(t);var r=n(34840),i=e&&!e.nodeType&&e,o=i&&t&&!t.nodeType&&t,a=o&&o.exports===i&&r.process,s=function(){try{var t=o&&o.require&&o.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=s},59350:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},74335:t=>{t.exports=function(t,e){return function(n){return t(e(n))}}},9325:(t,e,n)=>{var r=n(34840),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},31800:t=>{var e=/\s/;t.exports=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}},38221:(t,e,n)=>{var r=n(23805),i=n(10124),o=n(99374),a=Math.max,s=Math.min;t.exports=function(t,e,n){var u,l,c,h,d,f,p=0,m=!1,g=!1,v=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function y(e){var n=u,r=l;return u=l=void 0,p=e,h=t.apply(r,n)}function b(t){var n=t-f;return void 0===f||n>=e||n<0||g&&t-p>=c}function x(){var t=i();if(b(t))return w(t);d=setTimeout(x,function(t){var n=e-(t-f);return g?s(n,c-(t-p)):n}(t))}function w(t){return d=void 0,v&&u?y(t):(u=l=void 0,h)}function _(){var t=i(),n=b(t);if(u=arguments,l=this,f=t,n){if(void 0===d)return function(t){return p=t,d=setTimeout(x,e),m?y(t):h}(f);if(g)return clearTimeout(d),d=setTimeout(x,e),y(f)}return void 0===d&&(d=setTimeout(x,e)),h}return e=o(e)||0,r(n)&&(m=!!n.leading,c=(g="maxWait"in n)?a(o(n.maxWait)||0,e):c,v="trailing"in n?!!n.trailing:v),_.cancel=function(){void 0!==d&&clearTimeout(d),p=0,u=f=l=d=void 0},_.flush=function(){return void 0===d?h:w(i())},_}},56449:t=>{var e=Array.isArray;t.exports=e},30294:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},98023:(t,e,n)=>{var r=n(72552),i=n(40346);t.exports=function(t){return"number"==typeof t||i(t)&&"[object Number]"==r(t)}},23805:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},40346:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},11331:(t,e,n)=>{var r=n(72552),i=n(28879),o=n(40346),a=Function.prototype,s=Object.prototype,u=a.toString,l=s.hasOwnProperty,c=u.call(Object);t.exports=function(t){if(!o(t)||"[object Object]"!=r(t))return!1;var e=i(t);if(null===e)return!0;var n=l.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==c}},44394:(t,e,n)=>{var r=n(72552),i=n(40346);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},37167:(t,e,n)=>{var r=n(4901),i=n(27301),o=n(86009),a=o&&o.isTypedArray,s=a?i(a):r;t.exports=s},10124:(t,e,n)=>{var r=n(9325);t.exports=function(){return r.Date.now()}},99374:(t,e,n)=>{var r=n(54128),i=n(23805),o=n(44394),a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=r(t);var n=s.test(t);return n||u.test(t)?l(t.slice(2),n?2:8):a.test(t)?NaN:+t}},28570:t=>{t.exports=n;var e=null;try{e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(t){}function n(t,e,n){this.low=0|t,this.high=0|e,this.unsigned=!!n}function r(t){return!0===(t&&t.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var i={},o={};function a(t,e){var n,r,a;return e?(a=0<=(t>>>=0)&&t<256)&&(r=o[t])?r:(n=u(t,(0|t)<0?-1:0,!0),a&&(o[t]=n),n):(a=-128<=(t|=0)&&t<128)&&(r=i[t])?r:(n=u(t,t<0?-1:0,!1),a&&(i[t]=n),n)}function s(t,e){if(isNaN(t))return e?v:g;if(e){if(t<0)return v;if(t>=f)return _}else{if(t<=-p)return S;if(t+1>=p)return w}return t<0?s(-t,e).neg():u(t%d|0,t/d|0,e)}function u(t,e,r){return new n(t,e,r)}n.fromInt=a,n.fromNumber=s,n.fromBits=u;var l=Math.pow;function c(t,e,n){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return g;if("number"==typeof e?(n=e,e=!1):e=!!e,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return c(t.substring(1),e,n).neg();for(var i=s(l(n,8)),o=g,a=0;a<t.length;a+=8){var u=Math.min(8,t.length-a),h=parseInt(t.substring(a,a+u),n);if(u<8){var d=s(l(n,u));o=o.mul(d).add(s(h))}else o=(o=o.mul(i)).add(s(h))}return o.unsigned=e,o}function h(t,e){return"number"==typeof t?s(t,e):"string"==typeof t?c(t,e):u(t.low,t.high,"boolean"==typeof e?e:t.unsigned)}n.fromString=c,n.fromValue=h;var d=4294967296,f=d*d,p=f/2,m=a(1<<24),g=a(0);n.ZERO=g;var v=a(0,!0);n.UZERO=v;var y=a(1);n.ONE=y;var b=a(1,!0);n.UONE=b;var x=a(-1);n.NEG_ONE=x;var w=u(-1,2147483647,!1);n.MAX_VALUE=w;var _=u(-1,-1,!0);n.MAX_UNSIGNED_VALUE=_;var S=u(0,-2147483648,!1);n.MIN_VALUE=S;var E=n.prototype;E.toInt=function(){return this.unsigned?this.low>>>0:this.low},E.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},E.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var e=s(t),n=this.div(e),r=n.mul(e).sub(this);return n.toString(t)+r.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var i=s(l(t,6),this.unsigned),o=this,a="";;){var u=o.div(i),c=(o.sub(u.mul(i)).toInt()>>>0).toString(t);if((o=u).isZero())return c+a;for(;c.length<6;)c="0"+c;a=""+c+a}},E.getHighBits=function(){return this.high},E.getHighBitsUnsigned=function(){return this.high>>>0},E.getLowBits=function(){return this.low},E.getLowBitsUnsigned=function(){return this.low>>>0},E.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&!(t&1<<e);e--);return 0!=this.high?e+33:e+1},E.isZero=function(){return 0===this.high&&0===this.low},E.eqz=E.isZero,E.isNegative=function(){return!this.unsigned&&this.high<0},E.isPositive=function(){return this.unsigned||this.high>=0},E.isOdd=function(){return!(1&~this.low)},E.isEven=function(){return!(1&this.low)},E.equals=function(t){return r(t)||(t=h(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&(this.high===t.high&&this.low===t.low)},E.eq=E.equals,E.notEquals=function(t){return!this.eq(t)},E.neq=E.notEquals,E.ne=E.notEquals,E.lessThan=function(t){return this.comp(t)<0},E.lt=E.lessThan,E.lessThanOrEqual=function(t){return this.comp(t)<=0},E.lte=E.lessThanOrEqual,E.le=E.lessThanOrEqual,E.greaterThan=function(t){return this.comp(t)>0},E.gt=E.greaterThan,E.greaterThanOrEqual=function(t){return this.comp(t)>=0},E.gte=E.greaterThanOrEqual,E.ge=E.greaterThanOrEqual,E.compare=function(t){if(r(t)||(t=h(t)),this.eq(t))return 0;var e=this.isNegative(),n=t.isNegative();return e&&!n?-1:!e&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},E.comp=E.compare,E.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(y)},E.neg=E.negate,E.add=function(t){r(t)||(t=h(t));var e=this.high>>>16,n=65535&this.high,i=this.low>>>16,o=65535&this.low,a=t.high>>>16,s=65535&t.high,l=t.low>>>16,c=0,d=0,f=0,p=0;return f+=(p+=o+(65535&t.low))>>>16,d+=(f+=i+l)>>>16,c+=(d+=n+s)>>>16,c+=e+a,u((f&=65535)<<16|(p&=65535),(c&=65535)<<16|(d&=65535),this.unsigned)},E.subtract=function(t){return r(t)||(t=h(t)),this.add(t.neg())},E.sub=E.subtract,E.multiply=function(t){if(this.isZero())return g;if(r(t)||(t=h(t)),e)return u(e.mul(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned);if(t.isZero())return g;if(this.eq(S))return t.isOdd()?S:g;if(t.eq(S))return this.isOdd()?S:g;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(m)&&t.lt(m))return s(this.toNumber()*t.toNumber(),this.unsigned);var n=this.high>>>16,i=65535&this.high,o=this.low>>>16,a=65535&this.low,l=t.high>>>16,c=65535&t.high,d=t.low>>>16,f=65535&t.low,p=0,v=0,y=0,b=0;return y+=(b+=a*f)>>>16,v+=(y+=o*f)>>>16,y&=65535,v+=(y+=a*d)>>>16,p+=(v+=i*f)>>>16,v&=65535,p+=(v+=o*d)>>>16,v&=65535,p+=(v+=a*c)>>>16,p+=n*f+i*d+o*c+a*l,u((y&=65535)<<16|(b&=65535),(p&=65535)<<16|(v&=65535),this.unsigned)},E.mul=E.multiply,E.divide=function(t){if(r(t)||(t=h(t)),t.isZero())throw Error("division by zero");var n,i,o;if(e)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?u((this.unsigned?e.div_u:e.div_s)(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?v:g;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return v;if(t.gt(this.shru(1)))return b;o=v}else{if(this.eq(S))return t.eq(y)||t.eq(x)?S:t.eq(S)?y:(n=this.shr(1).div(t).shl(1)).eq(g)?t.isNegative()?y:x:(i=this.sub(t.mul(n)),o=n.add(i.div(t)));if(t.eq(S))return this.unsigned?v:g;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();o=g}for(i=this;i.gte(t);){n=Math.max(1,Math.floor(i.toNumber()/t.toNumber()));for(var a=Math.ceil(Math.log(n)/Math.LN2),c=a<=48?1:l(2,a-48),d=s(n),f=d.mul(t);f.isNegative()||f.gt(i);)f=(d=s(n-=c,this.unsigned)).mul(t);d.isZero()&&(d=y),o=o.add(d),i=i.sub(f)}return o},E.div=E.divide,E.modulo=function(t){return r(t)||(t=h(t)),e?u((this.unsigned?e.rem_u:e.rem_s)(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},E.mod=E.modulo,E.rem=E.modulo,E.not=function(){return u(~this.low,~this.high,this.unsigned)},E.and=function(t){return r(t)||(t=h(t)),u(this.low&t.low,this.high&t.high,this.unsigned)},E.or=function(t){return r(t)||(t=h(t)),u(this.low|t.low,this.high|t.high,this.unsigned)},E.xor=function(t){return r(t)||(t=h(t)),u(this.low^t.low,this.high^t.high,this.unsigned)},E.shiftLeft=function(t){return r(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?u(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):u(0,this.low<<t-32,this.unsigned)},E.shl=E.shiftLeft,E.shiftRight=function(t){return r(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?u(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):u(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},E.shr=E.shiftRight,E.shiftRightUnsigned=function(t){if(r(t)&&(t=t.toInt()),0===(t&=63))return this;var e=this.high;return t<32?u(this.low>>>t|e<<32-t,e>>>t,this.unsigned):u(32===t?e:e>>>t-32,0,this.unsigned)},E.shru=E.shiftRightUnsigned,E.shr_u=E.shiftRightUnsigned,E.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},E.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},E.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},E.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},E.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},n.fromBytes=function(t,e,r){return r?n.fromBytesLE(t,e):n.fromBytesBE(t,e)},n.fromBytesLE=function(t,e){return new n(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},n.fromBytesBE=function(t,e){return new n(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)}},55346:()=>{var t=function(t,r){var i=document.querySelector("#"+t+" > .particles-js-canvas-el");this.pJS={canvas:{el:i,w:i.offsetWidth,h:i.offsetHeight},particles:{number:{value:400,density:{enable:!0,value_area:800}},color:{value:"#fff"},shape:{type:"circle",stroke:{width:0,color:"#ff0000"},polygon:{nb_sides:5},image:{src:"",width:100,height:100}},opacity:{value:1,random:!1,anim:{enable:!1,speed:2,opacity_min:0,sync:!1}},size:{value:20,random:!1,anim:{enable:!1,speed:20,size_min:0,sync:!1}},line_linked:{enable:!0,distance:100,color:"#fff",opacity:1,width:1},move:{enable:!0,speed:2,direction:"none",random:!1,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:3e3,rotateY:3e3}},array:[]},interactivity:{detect_on:"canvas",events:{onhover:{enable:!0,mode:"grab"},onclick:{enable:!0,mode:"push"},resize:!0},modes:{grab:{distance:100,line_linked:{opacity:1}},bubble:{distance:200,size:80,duration:.4},repulse:{distance:200,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}},mouse:{}},retina_detect:!1,fn:{interact:{},modes:{},vendors:{}},tmp:{}};var o=this.pJS;r&&Object.deepExtend(o,r),o.tmp.obj={size_value:o.particles.size.value,size_anim_speed:o.particles.size.anim.speed,move_speed:o.particles.move.speed,line_linked_distance:o.particles.line_linked.distance,line_linked_width:o.particles.line_linked.width,mode_grab_distance:o.interactivity.modes.grab.distance,mode_bubble_distance:o.interactivity.modes.bubble.distance,mode_bubble_size:o.interactivity.modes.bubble.size,mode_repulse_distance:o.interactivity.modes.repulse.distance},o.fn.retinaInit=function(){o.retina_detect&&window.devicePixelRatio>1?(o.canvas.pxratio=window.devicePixelRatio,o.tmp.retina=!0):(o.canvas.pxratio=1,o.tmp.retina=!1),o.canvas.w=o.canvas.el.offsetWidth*o.canvas.pxratio,o.canvas.h=o.canvas.el.offsetHeight*o.canvas.pxratio,o.particles.size.value=o.tmp.obj.size_value*o.canvas.pxratio,o.particles.size.anim.speed=o.tmp.obj.size_anim_speed*o.canvas.pxratio,o.particles.move.speed=o.tmp.obj.move_speed*o.canvas.pxratio,o.particles.line_linked.distance=o.tmp.obj.line_linked_distance*o.canvas.pxratio,o.interactivity.modes.grab.distance=o.tmp.obj.mode_grab_distance*o.canvas.pxratio,o.interactivity.modes.bubble.distance=o.tmp.obj.mode_bubble_distance*o.canvas.pxratio,o.particles.line_linked.width=o.tmp.obj.line_linked_width*o.canvas.pxratio,o.interactivity.modes.bubble.size=o.tmp.obj.mode_bubble_size*o.canvas.pxratio,o.interactivity.modes.repulse.distance=o.tmp.obj.mode_repulse_distance*o.canvas.pxratio},o.fn.canvasInit=function(){o.canvas.ctx=o.canvas.el.getContext("2d")},o.fn.canvasSize=function(){o.canvas.el.width=o.canvas.w,o.canvas.el.height=o.canvas.h,o&&o.interactivity.events.resize&&window.addEventListener("resize",(function(){o.canvas.w=o.canvas.el.offsetWidth,o.canvas.h=o.canvas.el.offsetHeight,o.tmp.retina&&(o.canvas.w*=o.canvas.pxratio,o.canvas.h*=o.canvas.pxratio),o.canvas.el.width=o.canvas.w,o.canvas.el.height=o.canvas.h,o.particles.move.enable||(o.fn.particlesEmpty(),o.fn.particlesCreate(),o.fn.particlesDraw(),o.fn.vendors.densityAutoParticles()),o.fn.vendors.densityAutoParticles()}))},o.fn.canvasPaint=function(){o.canvas.ctx.fillRect(0,0,o.canvas.w,o.canvas.h)},o.fn.canvasClear=function(){o.canvas.ctx.clearRect(0,0,o.canvas.w,o.canvas.h)},o.fn.particle=function(t,n,r){if(this.radius=(o.particles.size.random?Math.random():1)*o.particles.size.value,o.particles.size.anim.enable&&(this.size_status=!1,this.vs=o.particles.size.anim.speed/100,o.particles.size.anim.sync||(this.vs=this.vs*Math.random())),this.x=r?r.x:Math.random()*o.canvas.w,this.y=r?r.y:Math.random()*o.canvas.h,this.x>o.canvas.w-2*this.radius?this.x=this.x-this.radius:this.x<2*this.radius&&(this.x=this.x+this.radius),this.y>o.canvas.h-2*this.radius?this.y=this.y-this.radius:this.y<2*this.radius&&(this.y=this.y+this.radius),o.particles.move.bounce&&o.fn.vendors.checkOverlap(this,r),this.color={},"object"==typeof t.value)if(t.value instanceof Array){var i=t.value[Math.floor(Math.random()*o.particles.color.value.length)];this.color.rgb=e(i)}else null!=t.value.r&&null!=t.value.g&&null!=t.value.b&&(this.color.rgb={r:t.value.r,g:t.value.g,b:t.value.b}),null!=t.value.h&&null!=t.value.s&&null!=t.value.l&&(this.color.hsl={h:t.value.h,s:t.value.s,l:t.value.l});else"random"==t.value?this.color.rgb={r:Math.floor(256*Math.random())+0,g:Math.floor(256*Math.random())+0,b:Math.floor(256*Math.random())+0}:"string"==typeof t.value&&(this.color=t,this.color.rgb=e(this.color.value));this.opacity=(o.particles.opacity.random?Math.random():1)*o.particles.opacity.value,o.particles.opacity.anim.enable&&(this.opacity_status=!1,this.vo=o.particles.opacity.anim.speed/100,o.particles.opacity.anim.sync||(this.vo=this.vo*Math.random()));var a={};switch(o.particles.move.direction){case"top":a={x:0,y:-1};break;case"top-right":a={x:.5,y:-.5};break;case"right":a={x:1,y:-0};break;case"bottom-right":a={x:.5,y:.5};break;case"bottom":a={x:0,y:1};break;case"bottom-left":a={x:-.5,y:1};break;case"left":a={x:-1,y:0};break;case"top-left":a={x:-.5,y:-.5};break;default:a={x:0,y:0}}o.particles.move.straight?(this.vx=a.x,this.vy=a.y,o.particles.move.random&&(this.vx=this.vx*Math.random(),this.vy=this.vy*Math.random())):(this.vx=a.x+Math.random()-.5,this.vy=a.y+Math.random()-.5),this.vx_i=this.vx,this.vy_i=this.vy;var s=o.particles.shape.type;if("object"==typeof s){if(s instanceof Array){var u=s[Math.floor(Math.random()*s.length)];this.shape=u}}else this.shape=s;if("image"==this.shape){var l=o.particles.shape;this.img={src:l.image.src,ratio:l.image.width/l.image.height},this.img.ratio||(this.img.ratio=1),"svg"==o.tmp.img_type&&null!=o.tmp.source_svg&&(o.fn.vendors.createSvgImg(this),o.tmp.pushing&&(this.img.loaded=!1))}},o.fn.particle.prototype.draw=function(){var t=this;if(null!=t.radius_bubble)var e=t.radius_bubble;else e=t.radius;if(null!=t.opacity_bubble)var n=t.opacity_bubble;else n=t.opacity;if(t.color.rgb)var r="rgba("+t.color.rgb.r+","+t.color.rgb.g+","+t.color.rgb.b+","+n+")";else r="hsla("+t.color.hsl.h+","+t.color.hsl.s+"%,"+t.color.hsl.l+"%,"+n+")";switch(o.canvas.ctx.fillStyle=r,o.canvas.ctx.beginPath(),t.shape){case"circle":o.canvas.ctx.arc(t.x,t.y,e,0,2*Math.PI,!1);break;case"edge":o.canvas.ctx.rect(t.x-e,t.y-e,2*e,2*e);break;case"triangle":o.fn.vendors.drawShape(o.canvas.ctx,t.x-e,t.y+e/1.66,2*e,3,2);break;case"polygon":o.fn.vendors.drawShape(o.canvas.ctx,t.x-e/(o.particles.shape.polygon.nb_sides/3.5),t.y-e/.76,2.66*e/(o.particles.shape.polygon.nb_sides/3),o.particles.shape.polygon.nb_sides,1);break;case"star":o.fn.vendors.drawShape(o.canvas.ctx,t.x-2*e/(o.particles.shape.polygon.nb_sides/4),t.y-e/1.52,2*e*2.66/(o.particles.shape.polygon.nb_sides/3),o.particles.shape.polygon.nb_sides,2);break;case"image":if("svg"==o.tmp.img_type)var i=t.img.obj;else i=o.tmp.img_obj;i&&o.canvas.ctx.drawImage(i,t.x-e,t.y-e,2*e,2*e/t.img.ratio)}o.canvas.ctx.closePath(),o.particles.shape.stroke.width>0&&(o.canvas.ctx.strokeStyle=o.particles.shape.stroke.color,o.canvas.ctx.lineWidth=o.particles.shape.stroke.width,o.canvas.ctx.stroke()),o.canvas.ctx.fill()},o.fn.particlesCreate=function(){for(var t=0;t<o.particles.number.value;t++)o.particles.array.push(new o.fn.particle(o.particles.color,o.particles.opacity.value))},o.fn.particlesUpdate=function(){for(var t=0;t<o.particles.array.length;t++){var e=o.particles.array[t];if(o.particles.move.enable){var r=o.particles.move.speed/2;e.x+=e.vx*r,e.y+=e.vy*r}if(o.particles.opacity.anim.enable&&(1==e.opacity_status?(e.opacity>=o.particles.opacity.value&&(e.opacity_status=!1),e.opacity+=e.vo):(e.opacity<=o.particles.opacity.anim.opacity_min&&(e.opacity_status=!0),e.opacity-=e.vo),e.opacity<0&&(e.opacity=0)),o.particles.size.anim.enable&&(1==e.size_status?(e.radius>=o.particles.size.value&&(e.size_status=!1),e.radius+=e.vs):(e.radius<=o.particles.size.anim.size_min&&(e.size_status=!0),e.radius-=e.vs),e.radius<0&&(e.radius=0)),"bounce"==o.particles.move.out_mode)var i={x_left:e.radius,x_right:o.canvas.w,y_top:e.radius,y_bottom:o.canvas.h};else i={x_left:-e.radius,x_right:o.canvas.w+e.radius,y_top:-e.radius,y_bottom:o.canvas.h+e.radius};if(e.x-e.radius>o.canvas.w?(e.x=i.x_left,e.y=Math.random()*o.canvas.h):e.x+e.radius<0&&(e.x=i.x_right,e.y=Math.random()*o.canvas.h),e.y-e.radius>o.canvas.h?(e.y=i.y_top,e.x=Math.random()*o.canvas.w):e.y+e.radius<0&&(e.y=i.y_bottom,e.x=Math.random()*o.canvas.w),"bounce"===o.particles.move.out_mode)(e.x+e.radius>o.canvas.w||e.x-e.radius<0)&&(e.vx=-e.vx),(e.y+e.radius>o.canvas.h||e.y-e.radius<0)&&(e.vy=-e.vy);if(n("grab",o.interactivity.events.onhover.mode)&&o.fn.modes.grabParticle(e),(n("bubble",o.interactivity.events.onhover.mode)||n("bubble",o.interactivity.events.onclick.mode))&&o.fn.modes.bubbleParticle(e),(n("repulse",o.interactivity.events.onhover.mode)||n("repulse",o.interactivity.events.onclick.mode))&&o.fn.modes.repulseParticle(e),o.particles.line_linked.enable||o.particles.move.attract.enable)for(var a=t+1;a<o.particles.array.length;a++){var s=o.particles.array[a];o.particles.line_linked.enable&&o.fn.interact.linkParticles(e,s),o.particles.move.attract.enable&&o.fn.interact.attractParticles(e,s),o.particles.move.bounce&&o.fn.interact.bounceParticles(e,s)}}},o.fn.particlesDraw=function(){o.canvas.ctx.clearRect(0,0,o.canvas.w,o.canvas.h),o.fn.particlesUpdate();for(var t=0;t<o.particles.array.length;t++){o.particles.array[t].draw()}},o.fn.particlesEmpty=function(){o.particles.array=[]},o.fn.particlesRefresh=function(){cancelRequestAnimFrame(o.fn.checkAnimFrame),cancelRequestAnimFrame(o.fn.drawAnimFrame),o.tmp.source_svg=void 0,o.tmp.img_obj=void 0,o.tmp.count_svg=0,o.fn.particlesEmpty(),o.fn.canvasClear(),o.fn.vendors.start()},o.fn.interact.linkParticles=function(t,e){var n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r);if(i<=o.particles.line_linked.distance){var a=o.particles.line_linked.opacity-i/(1/o.particles.line_linked.opacity)/o.particles.line_linked.distance;if(a>0){var s=o.particles.line_linked.color_rgb_line;o.canvas.ctx.strokeStyle="rgba("+s.r+","+s.g+","+s.b+","+a+")",o.canvas.ctx.lineWidth=o.particles.line_linked.width,o.canvas.ctx.beginPath(),o.canvas.ctx.moveTo(t.x,t.y),o.canvas.ctx.lineTo(e.x,e.y),o.canvas.ctx.stroke(),o.canvas.ctx.closePath()}}},o.fn.interact.attractParticles=function(t,e){var n=t.x-e.x,r=t.y-e.y;if(Math.sqrt(n*n+r*r)<=o.particles.line_linked.distance){var i=n/(1e3*o.particles.move.attract.rotateX),a=r/(1e3*o.particles.move.attract.rotateY);t.vx-=i,t.vy-=a,e.vx+=i,e.vy+=a}},o.fn.interact.bounceParticles=function(t,e){var n=t.x-e.x,r=t.y-e.y;Math.sqrt(n*n+r*r)<=t.radius+e.radius&&(t.vx=-t.vx,t.vy=-t.vy,e.vx=-e.vx,e.vy=-e.vy)},o.fn.modes.pushParticles=function(t,e){o.tmp.pushing=!0;for(var n=0;n<t;n++)o.particles.array.push(new o.fn.particle(o.particles.color,o.particles.opacity.value,{x:e?e.pos_x:Math.random()*o.canvas.w,y:e?e.pos_y:Math.random()*o.canvas.h})),n==t-1&&(o.particles.move.enable||o.fn.particlesDraw(),o.tmp.pushing=!1)},o.fn.modes.removeParticles=function(t){o.particles.array.splice(0,t),o.particles.move.enable||o.fn.particlesDraw()},o.fn.modes.bubbleParticle=function(t){if(o.interactivity.events.onhover.enable&&n("bubble",o.interactivity.events.onhover.mode)){var e=t.x-o.interactivity.mouse.pos_x,r=t.y-o.interactivity.mouse.pos_y,i=1-(c=Math.sqrt(e*e+r*r))/o.interactivity.modes.bubble.distance;function a(){t.opacity_bubble=t.opacity,t.radius_bubble=t.radius}if(c<=o.interactivity.modes.bubble.distance){if(i>=0&&"mousemove"==o.interactivity.status){if(o.interactivity.modes.bubble.size!=o.particles.size.value)if(o.interactivity.modes.bubble.size>o.particles.size.value){(u=t.radius+o.interactivity.modes.bubble.size*i)>=0&&(t.radius_bubble=u)}else{var s=t.radius-o.interactivity.modes.bubble.size,u=t.radius-s*i;t.radius_bubble=u>0?u:0}var l;if(o.interactivity.modes.bubble.opacity!=o.particles.opacity.value)if(o.interactivity.modes.bubble.opacity>o.particles.opacity.value)(l=o.interactivity.modes.bubble.opacity*i)>t.opacity&&l<=o.interactivity.modes.bubble.opacity&&(t.opacity_bubble=l);else(l=t.opacity-(o.particles.opacity.value-o.interactivity.modes.bubble.opacity)*i)<t.opacity&&l>=o.interactivity.modes.bubble.opacity&&(t.opacity_bubble=l)}}else a();"mouseleave"==o.interactivity.status&&a()}else if(o.interactivity.events.onclick.enable&&n("bubble",o.interactivity.events.onclick.mode)){if(o.tmp.bubble_clicking){e=t.x-o.interactivity.mouse.click_pos_x,r=t.y-o.interactivity.mouse.click_pos_y;var c=Math.sqrt(e*e+r*r),h=((new Date).getTime()-o.interactivity.mouse.click_time)/1e3;h>o.interactivity.modes.bubble.duration&&(o.tmp.bubble_duration_end=!0),h>2*o.interactivity.modes.bubble.duration&&(o.tmp.bubble_clicking=!1,o.tmp.bubble_duration_end=!1)}function d(e,n,r,i,a){if(e!=n)if(o.tmp.bubble_duration_end)null!=r&&(u=e+(e-(i-h*(i-e)/o.interactivity.modes.bubble.duration)),"size"==a&&(t.radius_bubble=u),"opacity"==a&&(t.opacity_bubble=u));else if(c<=o.interactivity.modes.bubble.distance){if(null!=r)var s=r;else s=i;if(s!=e){var u=i-h*(i-e)/o.interactivity.modes.bubble.duration;"size"==a&&(t.radius_bubble=u),"opacity"==a&&(t.opacity_bubble=u)}}else"size"==a&&(t.radius_bubble=void 0),"opacity"==a&&(t.opacity_bubble=void 0)}o.tmp.bubble_clicking&&(d(o.interactivity.modes.bubble.size,o.particles.size.value,t.radius_bubble,t.radius,"size"),d(o.interactivity.modes.bubble.opacity,o.particles.opacity.value,t.opacity_bubble,t.opacity,"opacity"))}},o.fn.modes.repulseParticle=function(t){if(o.interactivity.events.onhover.enable&&n("repulse",o.interactivity.events.onhover.mode)&&"mousemove"==o.interactivity.status){var e=t.x-o.interactivity.mouse.pos_x,r=t.y-o.interactivity.mouse.pos_y,i=Math.sqrt(e*e+r*r),a={x:e/i,y:r/i},s=o.interactivity.modes.repulse.distance,u=(p=1/s*(-1*Math.pow(i/s,2)+1)*s*100,m=0,g=50,Math.min(Math.max(p,m),g)),l={x:t.x+a.x*u,y:t.y+a.y*u};"bounce"==o.particles.move.out_mode?(l.x-t.radius>0&&l.x+t.radius<o.canvas.w&&(t.x=l.x),l.y-t.radius>0&&l.y+t.radius<o.canvas.h&&(t.y=l.y)):(t.x=l.x,t.y=l.y)}else if(o.interactivity.events.onclick.enable&&n("repulse",o.interactivity.events.onclick.mode))if(o.tmp.repulse_finish||(o.tmp.repulse_count++,o.tmp.repulse_count==o.particles.array.length&&(o.tmp.repulse_finish=!0)),o.tmp.repulse_clicking){s=Math.pow(o.interactivity.modes.repulse.distance/6,3);var c=o.interactivity.mouse.click_pos_x-t.x,h=o.interactivity.mouse.click_pos_y-t.y,d=c*c+h*h,f=-s/d*1;d<=s&&function(){var e=Math.atan2(h,c);if(t.vx=f*Math.cos(e),t.vy=f*Math.sin(e),"bounce"==o.particles.move.out_mode){var n={x:t.x+t.vx,y:t.y+t.vy};(n.x+t.radius>o.canvas.w||n.x-t.radius<0)&&(t.vx=-t.vx),(n.y+t.radius>o.canvas.h||n.y-t.radius<0)&&(t.vy=-t.vy)}}()}else 0==o.tmp.repulse_clicking&&(t.vx=t.vx_i,t.vy=t.vy_i);var p,m,g},o.fn.modes.grabParticle=function(t){if(o.interactivity.events.onhover.enable&&"mousemove"==o.interactivity.status){var e=t.x-o.interactivity.mouse.pos_x,n=t.y-o.interactivity.mouse.pos_y,r=Math.sqrt(e*e+n*n);if(r<=o.interactivity.modes.grab.distance){var i=o.interactivity.modes.grab.line_linked.opacity-r/(1/o.interactivity.modes.grab.line_linked.opacity)/o.interactivity.modes.grab.distance;if(i>0){var a=o.particles.line_linked.color_rgb_line;o.canvas.ctx.strokeStyle="rgba("+a.r+","+a.g+","+a.b+","+i+")",o.canvas.ctx.lineWidth=o.particles.line_linked.width,o.canvas.ctx.beginPath(),o.canvas.ctx.moveTo(t.x,t.y),o.canvas.ctx.lineTo(o.interactivity.mouse.pos_x,o.interactivity.mouse.pos_y),o.canvas.ctx.stroke(),o.canvas.ctx.closePath()}}}},o.fn.vendors.eventsListeners=function(){"window"==o.interactivity.detect_on?o.interactivity.el=window:o.interactivity.el=o.canvas.el,(o.interactivity.events.onhover.enable||o.interactivity.events.onclick.enable)&&(o.interactivity.el.addEventListener("mousemove",(function(t){if(o.interactivity.el==window)var e=t.clientX,n=t.clientY;else e=t.offsetX||t.clientX,n=t.offsetY||t.clientY;o.interactivity.mouse.pos_x=e,o.interactivity.mouse.pos_y=n,o.tmp.retina&&(o.interactivity.mouse.pos_x*=o.canvas.pxratio,o.interactivity.mouse.pos_y*=o.canvas.pxratio),o.interactivity.status="mousemove"})),o.interactivity.el.addEventListener("mouseleave",(function(t){o.interactivity.mouse.pos_x=null,o.interactivity.mouse.pos_y=null,o.interactivity.status="mouseleave"}))),o.interactivity.events.onclick.enable&&o.interactivity.el.addEventListener("click",(function(){if(o.interactivity.mouse.click_pos_x=o.interactivity.mouse.pos_x,o.interactivity.mouse.click_pos_y=o.interactivity.mouse.pos_y,o.interactivity.mouse.click_time=(new Date).getTime(),o.interactivity.events.onclick.enable)switch(o.interactivity.events.onclick.mode){case"push":o.particles.move.enable||1==o.interactivity.modes.push.particles_nb?o.fn.modes.pushParticles(o.interactivity.modes.push.particles_nb,o.interactivity.mouse):o.interactivity.modes.push.particles_nb>1&&o.fn.modes.pushParticles(o.interactivity.modes.push.particles_nb);break;case"remove":o.fn.modes.removeParticles(o.interactivity.modes.remove.particles_nb);break;case"bubble":o.tmp.bubble_clicking=!0;break;case"repulse":o.tmp.repulse_clicking=!0,o.tmp.repulse_count=0,o.tmp.repulse_finish=!1,setTimeout((function(){o.tmp.repulse_clicking=!1}),1e3*o.interactivity.modes.repulse.duration)}}))},o.fn.vendors.densityAutoParticles=function(){if(o.particles.number.density.enable){var t=o.canvas.el.width*o.canvas.el.height/1e3;o.tmp.retina&&(t/=2*o.canvas.pxratio);var e=t*o.particles.number.value/o.particles.number.density.value_area,n=o.particles.array.length-e;n<0?o.fn.modes.pushParticles(Math.abs(n)):o.fn.modes.removeParticles(n)}},o.fn.vendors.checkOverlap=function(t,e){for(var n=0;n<o.particles.array.length;n++){var r=o.particles.array[n],i=t.x-r.x,a=t.y-r.y;Math.sqrt(i*i+a*a)<=t.radius+r.radius&&(t.x=e?e.x:Math.random()*o.canvas.w,t.y=e?e.y:Math.random()*o.canvas.h,o.fn.vendors.checkOverlap(t))}},o.fn.vendors.createSvgImg=function(t){var e=o.tmp.source_svg.replace(/#([0-9A-F]{3,6})/gi,(function(e,n,r,i){if(t.color.rgb)var o="rgba("+t.color.rgb.r+","+t.color.rgb.g+","+t.color.rgb.b+","+t.opacity+")";else o="hsla("+t.color.hsl.h+","+t.color.hsl.s+"%,"+t.color.hsl.l+"%,"+t.opacity+")";return o})),n=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),r=window.URL||window.webkitURL||window,i=r.createObjectURL(n),a=new Image;a.addEventListener("load",(function(){t.img.obj=a,t.img.loaded=!0,r.revokeObjectURL(i),o.tmp.count_svg++})),a.src=i},o.fn.vendors.destroypJS=function(){cancelAnimationFrame(o.fn.drawAnimFrame),i.remove(),pJSDom=null},o.fn.vendors.drawShape=function(t,e,n,r,i,o){var a=i*o,s=i/o,u=180*(s-2)/s,l=Math.PI-Math.PI*u/180;t.save(),t.beginPath(),t.translate(e,n),t.moveTo(0,0);for(var c=0;c<a;c++)t.lineTo(r,0),t.translate(r,0),t.rotate(l);t.fill(),t.restore()},o.fn.vendors.exportImg=function(){window.open(o.canvas.el.toDataURL("image/png"),"_blank")},o.fn.vendors.loadImg=function(t){if(o.tmp.img_error=void 0,""!=o.particles.shape.image.src)if("svg"==t){var e=new XMLHttpRequest;e.open("GET",o.particles.shape.image.src),e.onreadystatechange=function(t){4==e.readyState&&(200==e.status?(o.tmp.source_svg=t.currentTarget.response,o.fn.vendors.checkBeforeDraw()):(console.log("Error pJS - Image not found"),o.tmp.img_error=!0))},e.send()}else{var n=new Image;n.addEventListener("load",(function(){o.tmp.img_obj=n,o.fn.vendors.checkBeforeDraw()})),n.src=o.particles.shape.image.src}else console.log("Error pJS - No image.src"),o.tmp.img_error=!0},o.fn.vendors.draw=function(){"image"==o.particles.shape.type?"svg"==o.tmp.img_type?o.tmp.count_svg>=o.particles.number.value?(o.fn.particlesDraw(),o.particles.move.enable?o.fn.drawAnimFrame=requestAnimFrame(o.fn.vendors.draw):cancelRequestAnimFrame(o.fn.drawAnimFrame)):o.tmp.img_error||(o.fn.drawAnimFrame=requestAnimFrame(o.fn.vendors.draw)):null!=o.tmp.img_obj?(o.fn.particlesDraw(),o.particles.move.enable?o.fn.drawAnimFrame=requestAnimFrame(o.fn.vendors.draw):cancelRequestAnimFrame(o.fn.drawAnimFrame)):o.tmp.img_error||(o.fn.drawAnimFrame=requestAnimFrame(o.fn.vendors.draw)):(o.fn.particlesDraw(),o.particles.move.enable?o.fn.drawAnimFrame=requestAnimFrame(o.fn.vendors.draw):cancelRequestAnimFrame(o.fn.drawAnimFrame))},o.fn.vendors.checkBeforeDraw=function(){"image"==o.particles.shape.type?"svg"==o.tmp.img_type&&null==o.tmp.source_svg?o.tmp.checkAnimFrame=requestAnimFrame(check):(cancelRequestAnimFrame(o.tmp.checkAnimFrame),o.tmp.img_error||(o.fn.vendors.init(),o.fn.vendors.draw())):(o.fn.vendors.init(),o.fn.vendors.draw())},o.fn.vendors.init=function(){o.fn.retinaInit(),o.fn.canvasInit(),o.fn.canvasSize(),o.fn.canvasPaint(),o.fn.particlesCreate(),o.fn.vendors.densityAutoParticles(),o.particles.line_linked.color_rgb_line=e(o.particles.line_linked.color)},o.fn.vendors.start=function(){n("image",o.particles.shape.type)?(o.tmp.img_type=o.particles.shape.image.src.substr(o.particles.shape.image.src.length-3),o.fn.vendors.loadImg(o.tmp.img_type)):o.fn.vendors.checkBeforeDraw()},o.fn.vendors.eventsListeners(),o.fn.vendors.start()};function e(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,n,r){return e+e+n+n+r+r}));var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function n(t,e){return e.indexOf(t)>-1}Object.deepExtend=function(t,e){for(var n in e)e[n]&&e[n].constructor&&e[n].constructor===Object?(t[n]=t[n]||{},arguments.callee(t[n],e[n])):t[n]=e[n];return t},window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},window.cancelRequestAnimFrame=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout,window.pJSDom=[],window.particlesJS=function(e,n){"string"!=typeof e&&(n=e,e="particles-js"),e||(e="particles-js");var r=document.getElementById(e),i="particles-js-canvas-el",o=r.getElementsByClassName(i);if(o.length)for(;o.length>0;)r.removeChild(o[0]);var a=document.createElement("canvas");a.className=i,a.style.width="100%",a.style.height="100%",null!=document.getElementById(e).appendChild(a)&&pJSDom.push(new t(e,n))},window.particlesJS.load=function(t,e,n){var r=new XMLHttpRequest;r.open("GET",e),r.onreadystatechange=function(e){if(4==r.readyState)if(200==r.status){var i=JSON.parse(e.currentTarget.response);window.particlesJS(t,i),n&&n()}else console.log("Error pJS - XMLHttpRequest status: "+r.status),console.log("Error pJS - File config not found")},r.send()}},83117:(t,e,n)=>{"use strict";function r(t){const e=function(t){if(null===t)return"Null";if(void 0===t)return"Undefined";if(Number.isNaN(t))return"NaN";const e=Object.prototype.toString.call(t).slice(8,-1);return"AsyncFunction"===e?"Promise":e}(t);return!["Undefined","NaN","Number","Null"].includes(e)&&(!t||("Object"===e?0===Object.keys(t).length:"Array"===e&&0===t.length))}n.d(e,{I:()=>r})},62306:(t,e,n)=>{"use strict";function r(t){return null==t}n.d(e,{g:()=>r})},38873:(t,e,n)=>{"use strict";n.d(e,{A:()=>f});var r=n(58168),i=n(89379),o=n(64467),a=n(5544),s=n(53986),u=n(46942),l=n.n(u),c=n(12533),h=n(96540),d=["prefixCls","className","style","checked","disabled","defaultChecked","type","title","onChange"];const f=(0,h.forwardRef)((function(t,e){var n=t.prefixCls,u=void 0===n?"rc-checkbox":n,f=t.className,p=t.style,m=t.checked,g=t.disabled,v=t.defaultChecked,y=void 0!==v&&v,b=t.type,x=void 0===b?"checkbox":b,w=t.title,_=t.onChange,S=(0,s.A)(t,d),E=(0,h.useRef)(null),A=(0,c.A)(y,{value:m}),M=(0,a.A)(A,2),C=M[0],T=M[1];(0,h.useImperativeHandle)(e,(function(){return{focus:function(t){var e;null===(e=E.current)||void 0===e||e.focus(t)},blur:function(){var t;null===(t=E.current)||void 0===t||t.blur()},input:E.current}}));var k=l()(u,f,(0,o.A)((0,o.A)({},"".concat(u,"-checked"),C),"".concat(u,"-disabled"),g));return h.createElement("span",{className:k,title:w,style:p},h.createElement("input",(0,r.A)({},S,{className:"".concat(u,"-input"),ref:E,onChange:function(e){g||("checked"in t||T(e.target.checked),null==_||_({target:(0,i.A)((0,i.A)({},t),{},{type:x,checked:e.target.checked}),stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},nativeEvent:e.nativeEvent}))},disabled:g,checked:!!C,type:x})),h.createElement("span",{className:"".concat(u,"-inner")}))}))},71057:(t,e,n)=>{"use strict";n.d(e,{A:()=>C});var r=n(58168),i=n(60436),o=n(5544),a=n(82284),s=n(46942),u=n.n(s),l=n(12533),c=n(68210),h=n(96540),d=n(53986),f=n(82546),p=n(64467),m=n(57557),g=n(16928),v=h.forwardRef((function(t,e){var n=t.prefixCls,r=t.forceRender,i=t.className,a=t.style,s=t.children,l=t.isActive,c=t.role,d=h.useState(l||r),f=(0,o.A)(d,2),m=f[0],g=f[1];return h.useEffect((function(){(r||l)&&g(!0)}),[r,l]),m?h.createElement("div",{ref:e,className:u()("".concat(n,"-content"),(0,p.A)((0,p.A)({},"".concat(n,"-content-active"),l),"".concat(n,"-content-inactive"),!l),i),style:a,role:c},h.createElement("div",{className:"".concat(n,"-content-box")},s)):null}));v.displayName="PanelContent";const y=v;var b=["showArrow","headerClass","isActive","onItemClick","forceRender","className","prefixCls","collapsible","accordion","panelKey","extra","header","expandIcon","openMotion","destroyInactivePanel","children"];const x=h.forwardRef((function(t,e){var n=t.showArrow,i=void 0===n||n,o=t.headerClass,a=t.isActive,s=t.onItemClick,l=t.forceRender,c=t.className,f=t.prefixCls,v=t.collapsible,x=t.accordion,w=t.panelKey,_=t.extra,S=t.header,E=t.expandIcon,A=t.openMotion,M=t.destroyInactivePanel,C=t.children,T=(0,d.A)(t,b),k="disabled"===v,I="header"===v,N="icon"===v,P=null!=_&&"boolean"!=typeof _,O=function(){null==s||s(w)},L="function"==typeof E?E(t):h.createElement("i",{className:"arrow"});L&&(L=h.createElement("div",{className:"".concat(f,"-expand-icon"),onClick:["header","icon"].includes(v)?O:void 0},L));var R=u()((0,p.A)((0,p.A)((0,p.A)({},"".concat(f,"-item"),!0),"".concat(f,"-item-active"),a),"".concat(f,"-item-disabled"),k),c),D={className:u()(o,(0,p.A)((0,p.A)((0,p.A)({},"".concat(f,"-header"),!0),"".concat(f,"-header-collapsible-only"),I),"".concat(f,"-icon-collapsible-only"),N)),"aria-expanded":a,"aria-disabled":k,onKeyDown:function(t){"Enter"!==t.key&&t.keyCode!==g.A.ENTER&&t.which!==g.A.ENTER||O()}};return I||N||(D.onClick=O,D.role=x?"tab":"button",D.tabIndex=k?-1:0),h.createElement("div",(0,r.A)({},T,{ref:e,className:R}),h.createElement("div",D,i&&L,h.createElement("span",{className:"".concat(f,"-header-text"),onClick:"header"===v?O:void 0},S),P&&h.createElement("div",{className:"".concat(f,"-extra")},_)),h.createElement(m.Ay,(0,r.A)({visible:a,leavedClassName:"".concat(f,"-content-hidden")},A,{forceRender:l,removeOnLeave:M}),(function(t,e){var n=t.className,r=t.style;return h.createElement(y,{ref:e,prefixCls:f,className:n,style:r,isActive:a,forceRender:l,role:x?"tabpanel":void 0},C)})))}));var w=["children","label","key","collapsible","onItemClick","destroyInactivePanel"];const _=function(t,e,n){return Array.isArray(t)?function(t,e){var n=e.prefixCls,i=e.accordion,o=e.collapsible,a=e.destroyInactivePanel,s=e.onItemClick,u=e.activeKey,l=e.openMotion,c=e.expandIcon;return t.map((function(t,e){var f=t.children,p=t.label,m=t.key,g=t.collapsible,v=t.onItemClick,y=t.destroyInactivePanel,b=(0,d.A)(t,w),_=String(null!=m?m:e),S=null!=g?g:o,E=null!=y?y:a,A=!1;return A=i?u[0]===_:u.indexOf(_)>-1,h.createElement(x,(0,r.A)({},b,{prefixCls:n,key:_,panelKey:_,isActive:A,accordion:i,openMotion:l,expandIcon:c,header:p,collapsible:S,onItemClick:function(t){"disabled"!==S&&(s(t),null==v||v(t))},destroyInactivePanel:E}),f)}))}(t,n):(0,f.A)(e).map((function(t,e){return function(t,e,n){if(!t)return null;var r=n.prefixCls,i=n.accordion,o=n.collapsible,a=n.destroyInactivePanel,s=n.onItemClick,u=n.activeKey,l=n.openMotion,c=n.expandIcon,d=t.key||String(e),f=t.props,p=f.header,m=f.headerClass,g=f.destroyInactivePanel,v=f.collapsible,y=f.onItemClick,b=!1;b=i?u[0]===d:u.indexOf(d)>-1;var x=null!=v?v:o,w={key:d,panelKey:d,header:p,headerClass:m,isActive:b,prefixCls:r,destroyInactivePanel:null!=g?g:a,openMotion:l,accordion:i,children:t.props.children,onItemClick:function(t){"disabled"!==x&&(s(t),null==y||y(t))},expandIcon:c,collapsible:x};return"string"==typeof t.type?t:(Object.keys(w).forEach((function(t){void 0===w[t]&&delete w[t]})),h.cloneElement(t,w))}(t,e,n)}))};var S=n(72065);function E(t){var e=t;if(!Array.isArray(e)){var n=(0,a.A)(e);e="number"===n||"string"===n?[e]:[]}return e.map((function(t){return String(t)}))}var A=h.forwardRef((function(t,e){var n=t.prefixCls,a=void 0===n?"rc-collapse":n,s=t.destroyInactivePanel,d=void 0!==s&&s,f=t.style,p=t.accordion,m=t.className,g=t.children,v=t.collapsible,y=t.openMotion,b=t.expandIcon,x=t.activeKey,w=t.defaultActiveKey,A=t.onChange,M=t.items,C=u()(a,m),T=(0,l.A)([],{value:x,onChange:function(t){return null==A?void 0:A(t)},defaultValue:w,postState:E}),k=(0,o.A)(T,2),I=k[0],N=k[1];(0,c.Ay)(!g,"[rc-collapse] `children` will be removed in next major version. Please use `items` instead.");var P=_(M,g,{prefixCls:a,accordion:p,openMotion:y,expandIcon:b,collapsible:v,destroyInactivePanel:d,onItemClick:function(t){return N((function(){return p?I[0]===t?[]:[t]:I.indexOf(t)>-1?I.filter((function(e){return e!==t})):[].concat((0,i.A)(I),[t])}))},activeKey:I});return h.createElement("div",(0,r.A)({ref:e,className:C,style:f,role:p?"tablist":void 0},(0,S.A)(t,{aria:!0,data:!0})),P)}));const M=Object.assign(A,{Panel:x}),C=M;M.Panel},33766:(t,e,n)=>{"use strict";n.d(e,{Z:()=>S,A:()=>k});var r=n(58168),i=n(5544),o=n(72595),a=n(96540),s=a.createContext({}),u=n(89379),l=n(46942),c=n.n(l),h=n(54808),d=n(56855),f=n(16928),p=n(72065);function m(t,e,n){var r=e;return!r&&n&&(r="".concat(t,"-").concat(n)),r}function g(t,e){var n=t["page".concat(e?"Y":"X","Offset")],r="scroll".concat(e?"Top":"Left");if("number"!=typeof n){var i=t.document;"number"!=typeof(n=i.documentElement[r])&&(n=i.body[r])}return n}var v=n(57557),y=n(82284),b=n(8719);const x=a.memo((function(t){return t.children}),(function(t,e){return!e.shouldUpdate}));var w={width:0,height:0,overflow:"hidden",outline:"none"},_={outline:"none"};const S=a.forwardRef((function(t,e){var n=t.prefixCls,i=t.className,o=t.style,l=t.title,h=t.ariaId,d=t.footer,f=t.closable,m=t.closeIcon,g=t.onClose,v=t.children,S=t.bodyStyle,E=t.bodyProps,A=t.modalRender,M=t.onMouseDown,C=t.onMouseUp,T=t.holderRef,k=t.visible,I=t.forceRender,N=t.width,P=t.height,O=t.classNames,L=t.styles,R=a.useContext(s).panel,D=(0,b.xK)(T,R),z=(0,a.useRef)(),F=(0,a.useRef)(),B=(0,a.useRef)();a.useImperativeHandle(e,(function(){return{focus:function(){var t;null===(t=B.current)||void 0===t||t.focus()},changeActive:function(t){var e=document.activeElement;t&&e===F.current?z.current.focus():t||e!==z.current||F.current.focus()}}}));var U,j,V={};void 0!==N&&(V.width=N),void 0!==P&&(V.height=P),d&&(U=a.createElement("div",{className:c()("".concat(n,"-footer"),null==O?void 0:O.footer),style:(0,u.A)({},null==L?void 0:L.footer)},d)),l&&(j=a.createElement("div",{className:c()("".concat(n,"-header"),null==O?void 0:O.header),style:(0,u.A)({},null==L?void 0:L.header)},a.createElement("div",{className:"".concat(n,"-title"),id:h},l)));var H,G=(0,a.useMemo)((function(){return"object"===(0,y.A)(f)&&null!==f?f:f?{closeIcon:null!=m?m:a.createElement("span",{className:"".concat(n,"-close-x")})}:{}}),[f,m]),W=(0,p.A)(G,!0);f&&(H=a.createElement("button",(0,r.A)({type:"button",onClick:g,"aria-label":"Close"},W,{className:"".concat(n,"-close")}),G.closeIcon));var X=a.createElement("div",{className:c()("".concat(n,"-content"),null==O?void 0:O.content),style:null==L?void 0:L.content},H,j,a.createElement("div",(0,r.A)({className:c()("".concat(n,"-body"),null==O?void 0:O.body),style:(0,u.A)((0,u.A)({},S),null==L?void 0:L.body)},E),v),U);return a.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":l?h:null,"aria-modal":"true",ref:D,style:(0,u.A)((0,u.A)({},o),V),className:c()(n,i),onMouseDown:M,onMouseUp:C},a.createElement("div",{tabIndex:0,ref:z,style:w,"aria-hidden":"true"}),a.createElement("div",{ref:B,tabIndex:-1,style:_},a.createElement(x,{shouldUpdate:k||I},A?A(X):X)),a.createElement("div",{tabIndex:0,ref:F,style:w,"aria-hidden":"true"}))}));var E=a.forwardRef((function(t,e){var n=t.prefixCls,o=t.title,s=t.style,l=t.className,h=t.visible,d=t.forceRender,f=t.destroyOnClose,p=t.motionName,m=t.ariaId,y=t.onVisibleChanged,b=t.mousePosition,x=(0,a.useRef)(),w=a.useState(),_=(0,i.A)(w,2),E=_[0],A=_[1],M={};function C(){var t,e,n,r,i,o=(t=x.current,e=t.getBoundingClientRect(),n={left:e.left,top:e.top},r=t.ownerDocument,i=r.defaultView||r.parentWindow,n.left+=g(i),n.top+=g(i,!0),n);A(b?"".concat(b.x-o.left,"px ").concat(b.y-o.top,"px"):"")}return E&&(M.transformOrigin=E),a.createElement(v.Ay,{visible:h,onVisibleChanged:y,onAppearPrepare:C,onEnterPrepare:C,forceRender:d,motionName:p,removeOnLeave:f,ref:x},(function(i,h){var d=i.className,f=i.style;return a.createElement(S,(0,r.A)({},t,{ref:e,title:o,ariaId:m,prefixCls:n,holderRef:h,style:(0,u.A)((0,u.A)((0,u.A)({},f),s),M),className:c()(l,d)}))}))}));E.displayName="Content";const A=E;function M(t){var e=t.prefixCls,n=t.style,i=t.visible,o=t.maskProps,s=t.motionName,l=t.className;return a.createElement(v.Ay,{key:"mask",visible:i,motionName:s,leavedClassName:"".concat(e,"-mask-hidden")},(function(t,i){var s=t.className,h=t.style;return a.createElement("div",(0,r.A)({ref:i,style:(0,u.A)((0,u.A)({},h),n),className:c()("".concat(e,"-mask"),s,l)},o))}))}n(68210);function C(t){var e=t.prefixCls,n=void 0===e?"rc-dialog":e,o=t.zIndex,s=t.visible,l=void 0!==s&&s,g=t.keyboard,v=void 0===g||g,y=t.focusTriggerAfterClose,b=void 0===y||y,x=t.wrapStyle,w=t.wrapClassName,_=t.wrapProps,S=t.onClose,E=t.afterOpenChange,C=t.afterClose,T=t.transitionName,k=t.animation,I=t.closable,N=void 0===I||I,P=t.mask,O=void 0===P||P,L=t.maskTransitionName,R=t.maskAnimation,D=t.maskClosable,z=void 0===D||D,F=t.maskStyle,B=t.maskProps,U=t.rootClassName,j=t.classNames,V=t.styles;var H=(0,a.useRef)(),G=(0,a.useRef)(),W=(0,a.useRef)(),X=a.useState(l),Y=(0,i.A)(X,2),q=Y[0],$=Y[1],K=(0,d.A)();function Z(t){null==S||S(t)}var Q=(0,a.useRef)(!1),J=(0,a.useRef)(),tt=null;return z&&(tt=function(t){Q.current?Q.current=!1:G.current===t.target&&Z(t)}),(0,a.useEffect)((function(){l&&($(!0),(0,h.A)(G.current,document.activeElement)||(H.current=document.activeElement))}),[l]),(0,a.useEffect)((function(){return function(){clearTimeout(J.current)}}),[]),a.createElement("div",(0,r.A)({className:c()("".concat(n,"-root"),U)},(0,p.A)(t,{data:!0})),a.createElement(M,{prefixCls:n,visible:O&&l,motionName:m(n,L,R),style:(0,u.A)((0,u.A)({zIndex:o},F),null==V?void 0:V.mask),maskProps:B,className:null==j?void 0:j.mask}),a.createElement("div",(0,r.A)({tabIndex:-1,onKeyDown:function(t){if(v&&t.keyCode===f.A.ESC)return t.stopPropagation(),void Z(t);l&&t.keyCode===f.A.TAB&&W.current.changeActive(!t.shiftKey)},className:c()("".concat(n,"-wrap"),w,null==j?void 0:j.wrapper),ref:G,onClick:tt,style:(0,u.A)((0,u.A)((0,u.A)({zIndex:o},x),null==V?void 0:V.wrapper),{},{display:q?null:"none"})},_),a.createElement(A,(0,r.A)({},t,{onMouseDown:function(){clearTimeout(J.current),Q.current=!0},onMouseUp:function(){J.current=setTimeout((function(){Q.current=!1}))},ref:W,closable:N,ariaId:K,prefixCls:n,visible:l&&q,onClose:Z,onVisibleChanged:function(t){if(t)(0,h.A)(G.current,document.activeElement)||null===(e=W.current)||void 0===e||e.focus();else{if($(!1),O&&H.current&&b){try{H.current.focus({preventScroll:!0})}catch(t){}H.current=null}q&&(null==C||C())}var e;null==E||E(t)},motionName:m(n,T,k)}))))}var T=function(t){var e=t.visible,n=t.getContainer,u=t.forceRender,l=t.destroyOnClose,c=void 0!==l&&l,h=t.afterClose,d=t.panelRef,f=a.useState(e),p=(0,i.A)(f,2),m=p[0],g=p[1],v=a.useMemo((function(){return{panel:d}}),[d]);return a.useEffect((function(){e&&g(!0)}),[e]),u||!c||m?a.createElement(s.Provider,{value:v},a.createElement(o.A,{open:e||u||m,autoDestroy:!1,getContainer:n,autoLock:e||m},a.createElement(C,(0,r.A)({},t,{destroyOnClose:c,afterClose:function(){null==h||h(),g(!1)}})))):null};T.displayName="Dialog";const k=T},42013:(t,e,n)=>{"use strict";var r=n(96540),i=n(58168),o=n(53986),a=n(90675),s=n(10467),u=n(89379),l=n(60436),c=n(23029),h=n(92901),d=n(9417),f=n(15361),p=n(29426),m=n(64467),g=n(82546),v=n(43210),y=n(68210),b="RC_FORM_INTERNAL_HOOKS",x=function(){(0,y.Ay)(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")};const w=r.createContext({getFieldValue:x,getFieldsValue:x,getFieldError:x,getFieldWarning:x,getFieldsError:x,isFieldsTouched:x,isFieldTouched:x,isFieldValidating:x,isFieldsValidating:x,resetFields:x,setFields:x,setFieldValue:x,setFieldsValue:x,validateFields:x,submit:x,getInternalHooks:function(){return x(),{dispatch:x,initEntityValue:x,registerField:x,useSubscribe:x,setInitialValues:x,destroyForm:x,setCallbacks:x,registerWatch:x,getFields:x,setValidateMessages:x,setPreserve:x,getInitialValue:x}}});const _=r.createContext(null);function S(t){return null==t?[]:Array.isArray(t)?t:[t]}function E(){return E=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},E.apply(this,arguments)}function A(t){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},A(t)}function M(t,e){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},M(t,e)}function C(t,e,n){return C=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&M(i,n.prototype),i},C.apply(null,arguments)}function T(t){var e="function"==typeof Map?new Map:void 0;return T=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return C(t,arguments,A(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),M(r,t)},T(t)}var k=/%[sdj%]/g;function I(t){if(!t||!t.length)return null;var e={};return t.forEach((function(t){var n=t.field;e[n]=e[n]||[],e[n].push(t)})),e}function N(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=0,o=n.length;return"function"==typeof t?t.apply(null,n):"string"==typeof t?t.replace(k,(function(t){if("%%"===t)return"%";if(i>=o)return t;switch(t){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch(t){return"[Circular]"}break;default:return t}})):t}function P(t,e){return null==t||(!("array"!==e||!Array.isArray(t)||t.length)||!(!function(t){return"string"===t||"url"===t||"hex"===t||"email"===t||"date"===t||"pattern"===t}(e)||"string"!=typeof t||t))}function O(t,e,n){var r=0,i=t.length;!function o(a){if(a&&a.length)n(a);else{var s=r;r+=1,s<i?e(t[s],o):n([])}}([])}"undefined"!=typeof process&&process.env;var L=function(t){var e,n;function r(e,n){var r;return(r=t.call(this,"Async Validation Error")||this).errors=e,r.fields=n,r}return n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,M(e,n),r}(T(Error));function R(t,e,n,r,i){if(e.first){var o=new Promise((function(e,o){var a=function(t){var e=[];return Object.keys(t).forEach((function(n){e.push.apply(e,t[n]||[])})),e}(t);O(a,n,(function(t){return r(t),t.length?o(new L(t,I(t))):e(i)}))}));return o.catch((function(t){return t})),o}var a=!0===e.firstFields?Object.keys(t):e.firstFields||[],s=Object.keys(t),u=s.length,l=0,c=[],h=new Promise((function(e,o){var h=function(t){if(c.push.apply(c,t),++l===u)return r(c),c.length?o(new L(c,I(c))):e(i)};s.length||(r(c),e(i)),s.forEach((function(e){var r=t[e];-1!==a.indexOf(e)?O(r,n,h):function(t,e,n){var r=[],i=0,o=t.length;function a(t){r.push.apply(r,t||[]),++i===o&&n(r)}t.forEach((function(t){e(t,a)}))}(r,n,h)}))}));return h.catch((function(t){return t})),h}function D(t,e){return function(n){var r,i;return r=t.fullFields?function(t,e){for(var n=t,r=0;r<e.length;r++){if(null==n)return n;n=n[e[r]]}return n}(e,t.fullFields):e[n.field||t.fullField],(i=n)&&void 0!==i.message?(n.field=n.field||t.fullField,n.fieldValue=r,n):{message:"function"==typeof n?n():n,fieldValue:r,field:n.field||t.fullField}}}function z(t,e){if(e)for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];"object"==typeof r&&"object"==typeof t[n]?t[n]=E({},t[n],r):t[n]=r}return t}var F,B=function(t,e,n,r,i,o){!t.required||n.hasOwnProperty(t.field)&&!P(e,o||t.type)||r.push(N(i.messages.required,t.fullField))},U=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,j=/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i,V={integer:function(t){return V.number(t)&&parseInt(t,10)===t},float:function(t){return V.number(t)&&!V.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch(t){return!1}},date:function(t){return"function"==typeof t.getTime&&"function"==typeof t.getMonth&&"function"==typeof t.getYear&&!isNaN(t.getTime())},number:function(t){return!isNaN(t)&&"number"==typeof t},object:function(t){return"object"==typeof t&&!V.array(t)},method:function(t){return"function"==typeof t},email:function(t){return"string"==typeof t&&t.length<=320&&!!t.match(U)},url:function(t){return"string"==typeof t&&t.length<=2048&&!!t.match(function(){if(F)return F;var t="[a-fA-F\\d:]",e=function(e){return e&&e.includeBoundaries?"(?:(?<=\\s|^)(?="+t+")|(?<="+t+")(?=\\s|$))":""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",r="[a-fA-F\\d]{1,4}",i=("\n(?:\n(?:"+r+":){7}(?:"+r+"|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:"+r+":){6}(?:"+n+"|:"+r+"|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:"+r+":){5}(?::"+n+"|(?::"+r+"){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:"+r+":){4}(?:(?::"+r+"){0,1}:"+n+"|(?::"+r+"){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:"+r+":){3}(?:(?::"+r+"){0,2}:"+n+"|(?::"+r+"){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:"+r+":){2}(?:(?::"+r+"){0,3}:"+n+"|(?::"+r+"){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:"+r+":){1}(?:(?::"+r+"){0,4}:"+n+"|(?::"+r+"){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::(?:(?::"+r+"){0,5}:"+n+"|(?::"+r+"){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\n").replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),o=new RegExp("(?:^"+n+"$)|(?:^"+i+"$)"),a=new RegExp("^"+n+"$"),s=new RegExp("^"+i+"$"),u=function(t){return t&&t.exact?o:new RegExp("(?:"+e(t)+n+e(t)+")|(?:"+e(t)+i+e(t)+")","g")};u.v4=function(t){return t&&t.exact?a:new RegExp(""+e(t)+n+e(t),"g")},u.v6=function(t){return t&&t.exact?s:new RegExp(""+e(t)+i+e(t),"g")};var l=u.v4().source,c=u.v6().source;return F=new RegExp("(?:^(?:(?:(?:[a-z]+:)?//)|www\\.)(?:\\S+(?::\\S*)?@)?(?:localhost|"+l+"|"+c+'|(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:[/?#][^\\s"]*)?$)',"i")}())},hex:function(t){return"string"==typeof t&&!!t.match(j)}},H="enum",G={required:B,whitespace:function(t,e,n,r,i){(/^\s+$/.test(e)||""===e)&&r.push(N(i.messages.whitespace,t.fullField))},type:function(t,e,n,r,i){if(t.required&&void 0===e)B(t,e,n,r,i);else{var o=t.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(o)>-1?V[o](e)||r.push(N(i.messages.types[o],t.fullField,t.type)):o&&typeof e!==t.type&&r.push(N(i.messages.types[o],t.fullField,t.type))}},range:function(t,e,n,r,i){var o="number"==typeof t.len,a="number"==typeof t.min,s="number"==typeof t.max,u=e,l=null,c="number"==typeof e,h="string"==typeof e,d=Array.isArray(e);if(c?l="number":h?l="string":d&&(l="array"),!l)return!1;d&&(u=e.length),h&&(u=e.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),o?u!==t.len&&r.push(N(i.messages[l].len,t.fullField,t.len)):a&&!s&&u<t.min?r.push(N(i.messages[l].min,t.fullField,t.min)):s&&!a&&u>t.max?r.push(N(i.messages[l].max,t.fullField,t.max)):a&&s&&(u<t.min||u>t.max)&&r.push(N(i.messages[l].range,t.fullField,t.min,t.max))},enum:function(t,e,n,r,i){t[H]=Array.isArray(t[H])?t[H]:[],-1===t[H].indexOf(e)&&r.push(N(i.messages[H],t.fullField,t[H].join(", ")))},pattern:function(t,e,n,r,i){if(t.pattern)if(t.pattern instanceof RegExp)t.pattern.lastIndex=0,t.pattern.test(e)||r.push(N(i.messages.pattern.mismatch,t.fullField,e,t.pattern));else if("string"==typeof t.pattern){new RegExp(t.pattern).test(e)||r.push(N(i.messages.pattern.mismatch,t.fullField,e,t.pattern))}}},W=function(t,e,n,r,i){var o=t.type,a=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(P(e,o)&&!t.required)return n();G.required(t,e,r,a,i,o),P(e,o)||G.type(t,e,r,a,i)}n(a)},X={string:function(t,e,n,r,i){var o=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(P(e,"string")&&!t.required)return n();G.required(t,e,r,o,i,"string"),P(e,"string")||(G.type(t,e,r,o,i),G.range(t,e,r,o,i),G.pattern(t,e,r,o,i),!0===t.whitespace&&G.whitespace(t,e,r,o,i))}n(o)},method:function(t,e,n,r,i){var o=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(P(e)&&!t.required)return n();G.required(t,e,r,o,i),void 0!==e&&G.type(t,e,r,o,i)}n(o)},number:function(t,e,n,r,i){var o=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(""===e&&(e=void 0),P(e)&&!t.required)return n();G.required(t,e,r,o,i),void 0!==e&&(G.type(t,e,r,o,i),G.range(t,e,r,o,i))}n(o)},boolean:function(t,e,n,r,i){var o=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(P(e)&&!t.required)return n();G.required(t,e,r,o,i),void 0!==e&&G.type(t,e,r,o,i)}n(o)},regexp:function(t,e,n,r,i){var o=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(P(e)&&!t.required)return n();G.required(t,e,r,o,i),P(e)||G.type(t,e,r,o,i)}n(o)},integer:function(t,e,n,r,i){var o=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(P(e)&&!t.required)return n();G.required(t,e,r,o,i),void 0!==e&&(G.type(t,e,r,o,i),G.range(t,e,r,o,i))}n(o)},float:function(t,e,n,r,i){var o=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(P(e)&&!t.required)return n();G.required(t,e,r,o,i),void 0!==e&&(G.type(t,e,r,o,i),G.range(t,e,r,o,i))}n(o)},array:function(t,e,n,r,i){var o=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(null==e&&!t.required)return n();G.required(t,e,r,o,i,"array"),null!=e&&(G.type(t,e,r,o,i),G.range(t,e,r,o,i))}n(o)},object:function(t,e,n,r,i){var o=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(P(e)&&!t.required)return n();G.required(t,e,r,o,i),void 0!==e&&G.type(t,e,r,o,i)}n(o)},enum:function(t,e,n,r,i){var o=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(P(e)&&!t.required)return n();G.required(t,e,r,o,i),void 0!==e&&G.enum(t,e,r,o,i)}n(o)},pattern:function(t,e,n,r,i){var o=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(P(e,"string")&&!t.required)return n();G.required(t,e,r,o,i),P(e,"string")||G.pattern(t,e,r,o,i)}n(o)},date:function(t,e,n,r,i){var o=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(P(e,"date")&&!t.required)return n();var a;if(G.required(t,e,r,o,i),!P(e,"date"))a=e instanceof Date?e:new Date(e),G.type(t,a,r,o,i),a&&G.range(t,a.getTime(),r,o,i)}n(o)},url:W,hex:W,email:W,required:function(t,e,n,r,i){var o=[],a=Array.isArray(e)?"array":typeof e;G.required(t,e,r,o,i,a),n(o)},any:function(t,e,n,r,i){var o=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(P(e)&&!t.required)return n();G.required(t,e,r,o,i)}n(o)}};function Y(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var q=Y(),$=function(){function t(t){this.rules=null,this._messages=q,this.define(t)}var e=t.prototype;return e.define=function(t){var e=this;if(!t)throw new Error("Cannot configure a schema with no rules");if("object"!=typeof t||Array.isArray(t))throw new Error("Rules must be an object");this.rules={},Object.keys(t).forEach((function(n){var r=t[n];e.rules[n]=Array.isArray(r)?r:[r]}))},e.messages=function(t){return t&&(this._messages=z(Y(),t)),this._messages},e.validate=function(e,n,r){var i=this;void 0===n&&(n={}),void 0===r&&(r=function(){});var o=e,a=n,s=r;if("function"==typeof a&&(s=a,a={}),!this.rules||0===Object.keys(this.rules).length)return s&&s(null,o),Promise.resolve(o);if(a.messages){var u=this.messages();u===q&&(u=Y()),z(u,a.messages),a.messages=u}else a.messages=this.messages();var l={};(a.keys||Object.keys(this.rules)).forEach((function(t){var n=i.rules[t],r=o[t];n.forEach((function(n){var a=n;"function"==typeof a.transform&&(o===e&&(o=E({},o)),r=o[t]=a.transform(r)),(a="function"==typeof a?{validator:a}:E({},a)).validator=i.getValidationMethod(a),a.validator&&(a.field=t,a.fullField=a.fullField||t,a.type=i.getType(a),l[t]=l[t]||[],l[t].push({rule:a,value:r,source:o,field:t}))}))}));var c={};return R(l,a,(function(e,n){var r,i=e.rule,s=!("object"!==i.type&&"array"!==i.type||"object"!=typeof i.fields&&"object"!=typeof i.defaultField);function u(t,e){return E({},e,{fullField:i.fullField+"."+t,fullFields:i.fullFields?[].concat(i.fullFields,[t]):[t]})}function l(r){void 0===r&&(r=[]);var l=Array.isArray(r)?r:[r];!a.suppressWarning&&l.length&&t.warning("async-validator:",l),l.length&&void 0!==i.message&&(l=[].concat(i.message));var h=l.map(D(i,o));if(a.first&&h.length)return c[i.field]=1,n(h);if(s){if(i.required&&!e.value)return void 0!==i.message?h=[].concat(i.message).map(D(i,o)):a.error&&(h=[a.error(i,N(a.messages.required,i.field))]),n(h);var d={};i.defaultField&&Object.keys(e.value).map((function(t){d[t]=i.defaultField})),d=E({},d,e.rule.fields);var f={};Object.keys(d).forEach((function(t){var e=d[t],n=Array.isArray(e)?e:[e];f[t]=n.map(u.bind(null,t))}));var p=new t(f);p.messages(a.messages),e.rule.options&&(e.rule.options.messages=a.messages,e.rule.options.error=a.error),p.validate(e.value,e.rule.options||a,(function(t){var e=[];h&&h.length&&e.push.apply(e,h),t&&t.length&&e.push.apply(e,t),n(e.length?e:null)}))}else n(h)}if(s=s&&(i.required||!i.required&&e.value),i.field=e.field,i.asyncValidator)r=i.asyncValidator(i,e.value,l,e.source,a);else if(i.validator){try{r=i.validator(i,e.value,l,e.source,a)}catch(t){null==console.error||console.error(t),a.suppressValidatorError||setTimeout((function(){throw t}),0),l(t.message)}!0===r?l():!1===r?l("function"==typeof i.message?i.message(i.fullField||i.field):i.message||(i.fullField||i.field)+" fails"):r instanceof Array?l(r):r instanceof Error&&l(r.message)}r&&r.then&&r.then((function(){return l()}),(function(t){return l(t)}))}),(function(t){!function(t){for(var e,n,r=[],i={},a=0;a<t.length;a++)e=t[a],n=void 0,Array.isArray(e)?r=(n=r).concat.apply(n,e):r.push(e);r.length?(i=I(r),s(r,i)):s(null,o)}(t)}),o)},e.getType=function(t){if(void 0===t.type&&t.pattern instanceof RegExp&&(t.type="pattern"),"function"!=typeof t.validator&&t.type&&!X.hasOwnProperty(t.type))throw new Error(N("Unknown rule type %s",t.type));return t.type||"string"},e.getValidationMethod=function(t){if("function"==typeof t.validator)return t.validator;var e=Object.keys(t),n=e.indexOf("message");return-1!==n&&e.splice(n,1),1===e.length&&"required"===e[0]?X.required:X[this.getType(t)]||void 0},t}();$.register=function(t,e){if("function"!=typeof e)throw new Error("Cannot register a validator by type, validator is not a function");X[t]=e},$.warning=function(){},$.messages=q,$.validators=X;var K="'${name}' is not a valid ${type}",Z={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:K,method:K,array:K,object:K,number:K,date:K,boolean:K,integer:K,float:K,regexp:K,email:K,url:K,hex:K},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},Q=n(20488),J=$;function tt(t,e){return t.replace(/\$\{\w+\}/g,(function(t){var n=t.slice(2,-1);return e[n]}))}var et="CODE_LOGIC_ERROR";function nt(t,e,n,r,i){return rt.apply(this,arguments)}function rt(){return rt=(0,s.A)((0,a.A)().mark((function t(e,n,i,o,s){var c,h,d,f,p,g,v,y,b;return(0,a.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return delete(c=(0,u.A)({},i)).ruleIndex,J.warning=function(){},c.validator&&(h=c.validator,c.validator=function(){try{return h.apply(void 0,arguments)}catch(t){return console.error(t),Promise.reject(et)}}),d=null,c&&"array"===c.type&&c.defaultField&&(d=c.defaultField,delete c.defaultField),f=new J((0,m.A)({},e,[c])),p=(0,Q.h)(Z,o.validateMessages),f.messages(p),g=[],t.prev=10,t.next=13,Promise.resolve(f.validate((0,m.A)({},e,n),(0,u.A)({},o)));case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(10),t.t0.errors&&(g=t.t0.errors.map((function(t,e){var n=t.message,i=n===et?p.default:n;return r.isValidElement(i)?r.cloneElement(i,{key:"error_".concat(e)}):i})));case 18:if(g.length||!d){t.next=23;break}return t.next=21,Promise.all(n.map((function(t,n){return nt("".concat(e,".").concat(n),t,d,o,s)})));case 21:return v=t.sent,t.abrupt("return",v.reduce((function(t,e){return[].concat((0,l.A)(t),(0,l.A)(e))}),[]));case 23:return y=(0,u.A)((0,u.A)({},i),{},{name:e,enum:(i.enum||[]).join(", ")},s),b=g.map((function(t){return"string"==typeof t?tt(t,y):t})),t.abrupt("return",b);case 26:case"end":return t.stop()}}),t,null,[[10,15]])}))),rt.apply(this,arguments)}function it(t,e,n,r,i,o){var l,c=t.join("."),h=n.map((function(t,e){var n=t.validator,r=(0,u.A)((0,u.A)({},t),{},{ruleIndex:e});return n&&(r.validator=function(t,e,r){var i=!1,o=n(t,e,(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Promise.resolve().then((function(){(0,y.Ay)(!i,"Your validator function has already return a promise. `callback` will be ignored."),i||r.apply(void 0,e)}))}));i=o&&"function"==typeof o.then&&"function"==typeof o.catch,(0,y.Ay)(i,"`callback` is deprecated. Please return a promise instead."),i&&o.then((function(){r()})).catch((function(t){r(t||" ")}))}),r})).sort((function(t,e){var n=t.warningOnly,r=t.ruleIndex,i=e.warningOnly,o=e.ruleIndex;return!!n==!!i?r-o:n?1:-1}));if(!0===i)l=new Promise(function(){var t=(0,s.A)((0,a.A)().mark((function t(n,i){var s,u,l;return(0,a.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=0;case 1:if(!(s<h.length)){t.next=12;break}return u=h[s],t.next=5,nt(c,e,u,r,o);case 5:if(!(l=t.sent).length){t.next=9;break}return i([{errors:l,rule:u}]),t.abrupt("return");case 9:s+=1,t.next=1;break;case 12:n([]);case 13:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());else{var d=h.map((function(t){return nt(c,e,t,r,o).then((function(e){return{errors:e,rule:t}}))}));l=(i?function(t){return at.apply(this,arguments)}(d):function(t){return ot.apply(this,arguments)}(d)).then((function(t){return Promise.reject(t)}))}return l.catch((function(t){return t})),l}function ot(){return(ot=(0,s.A)((0,a.A)().mark((function t(e){return(0,a.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.all(e).then((function(t){var e;return(e=[]).concat.apply(e,(0,l.A)(t))})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function at(){return(at=(0,s.A)((0,a.A)().mark((function t(e){var n;return(0,a.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=0,t.abrupt("return",new Promise((function(t){e.forEach((function(r){r.then((function(r){r.errors.length&&t([r]),(n+=1)===e.length&&t([])}))}))})));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var st=n(82284),ut=n(16300);function lt(t){return S(t)}function ct(t,e){var n={};return e.forEach((function(e){var r=(0,ut.A)(t,e);n=(0,Q.A)(n,e,r)})),n}function ht(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t&&t.some((function(t){return dt(e,t,n)}))}function dt(t,e){return!(!t||!e)&&(!(!(arguments.length>2&&void 0!==arguments[2]&&arguments[2])&&t.length!==e.length)&&e.every((function(e,n){return t[n]===e})))}function ft(t){var e=arguments.length<=1?void 0:arguments[1];return e&&e.target&&"object"===(0,st.A)(e.target)&&t in e.target?e.target[t]:e}function pt(t,e,n){var r=t.length;if(e<0||e>=r||n<0||n>=r)return t;var i=t[e],o=e-n;return o>0?[].concat((0,l.A)(t.slice(0,n)),[i],(0,l.A)(t.slice(n,e)),(0,l.A)(t.slice(e+1,r))):o<0?[].concat((0,l.A)(t.slice(0,e)),(0,l.A)(t.slice(e+1,n+1)),[i],(0,l.A)(t.slice(n+1,r))):t}var mt=["name"],gt=[];function vt(t,e,n,r,i,o){return"function"==typeof t?t(e,n,"source"in o?{source:o.source}:{}):r!==i}var yt=function(t){(0,f.A)(n,t);var e=(0,p.A)(n);function n(t){var i;((0,c.A)(this,n),i=e.call(this,t),(0,m.A)((0,d.A)(i),"state",{resetCount:0}),(0,m.A)((0,d.A)(i),"cancelRegisterFunc",null),(0,m.A)((0,d.A)(i),"mounted",!1),(0,m.A)((0,d.A)(i),"touched",!1),(0,m.A)((0,d.A)(i),"dirty",!1),(0,m.A)((0,d.A)(i),"validatePromise",void 0),(0,m.A)((0,d.A)(i),"prevValidating",void 0),(0,m.A)((0,d.A)(i),"errors",gt),(0,m.A)((0,d.A)(i),"warnings",gt),(0,m.A)((0,d.A)(i),"cancelRegister",(function(){var t=i.props,e=t.preserve,n=t.isListField,r=t.name;i.cancelRegisterFunc&&i.cancelRegisterFunc(n,e,lt(r)),i.cancelRegisterFunc=null})),(0,m.A)((0,d.A)(i),"getNamePath",(function(){var t=i.props,e=t.name,n=t.fieldContext.prefixName,r=void 0===n?[]:n;return void 0!==e?[].concat((0,l.A)(r),(0,l.A)(e)):[]})),(0,m.A)((0,d.A)(i),"getRules",(function(){var t=i.props,e=t.rules,n=void 0===e?[]:e,r=t.fieldContext;return n.map((function(t){return"function"==typeof t?t(r):t}))})),(0,m.A)((0,d.A)(i),"refresh",(function(){i.mounted&&i.setState((function(t){return{resetCount:t.resetCount+1}}))})),(0,m.A)((0,d.A)(i),"metaCache",null),(0,m.A)((0,d.A)(i),"triggerMetaEvent",(function(t){var e=i.props.onMetaChange;if(e){var n=(0,u.A)((0,u.A)({},i.getMeta()),{},{destroy:t});(0,v.A)(i.metaCache,n)||e(n),i.metaCache=n}else i.metaCache=null})),(0,m.A)((0,d.A)(i),"onStoreChange",(function(t,e,n){var r=i.props,o=r.shouldUpdate,a=r.dependencies,s=void 0===a?[]:a,u=r.onReset,l=n.store,c=i.getNamePath(),h=i.getValue(t),d=i.getValue(l),f=e&&ht(e,c);switch("valueUpdate"!==n.type||"external"!==n.source||(0,v.A)(h,d)||(i.touched=!0,i.dirty=!0,i.validatePromise=null,i.errors=gt,i.warnings=gt,i.triggerMetaEvent()),n.type){case"reset":if(!e||f)return i.touched=!1,i.dirty=!1,i.validatePromise=void 0,i.errors=gt,i.warnings=gt,i.triggerMetaEvent(),null==u||u(),void i.refresh();break;case"remove":if(o)return void i.reRender();break;case"setField":var p=n.data;if(f)return"touched"in p&&(i.touched=p.touched),"validating"in p&&!("originRCField"in p)&&(i.validatePromise=p.validating?Promise.resolve([]):null),"errors"in p&&(i.errors=p.errors||gt),"warnings"in p&&(i.warnings=p.warnings||gt),i.dirty=!0,i.triggerMetaEvent(),void i.reRender();if("value"in p&&ht(e,c,!0))return void i.reRender();if(o&&!c.length&&vt(o,t,l,h,d,n))return void i.reRender();break;case"dependenciesUpdate":if(s.map(lt).some((function(t){return ht(n.relatedFields,t)})))return void i.reRender();break;default:if(f||(!s.length||c.length||o)&&vt(o,t,l,h,d,n))return void i.reRender()}!0===o&&i.reRender()})),(0,m.A)((0,d.A)(i),"validateRules",(function(t){var e=i.getNamePath(),n=i.getValue(),r=t||{},o=r.triggerName,u=r.validateOnly,c=void 0!==u&&u,h=Promise.resolve().then((0,s.A)((0,a.A)().mark((function r(){var s,u,c,d,f,p,m;return(0,a.A)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i.mounted){r.next=2;break}return r.abrupt("return",[]);case 2:if(s=i.props,u=s.validateFirst,c=void 0!==u&&u,d=s.messageVariables,f=s.validateDebounce,p=i.getRules(),o&&(p=p.filter((function(t){return t})).filter((function(t){var e=t.validateTrigger;return!e||S(e).includes(o)}))),!f||!o){r.next=10;break}return r.next=8,new Promise((function(t){setTimeout(t,f)}));case 8:if(i.validatePromise===h){r.next=10;break}return r.abrupt("return",[]);case 10:return(m=it(e,n,p,t,c,d)).catch((function(t){return t})).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt;if(i.validatePromise===h){var e;i.validatePromise=null;var n=[],r=[];null===(e=t.forEach)||void 0===e||e.call(t,(function(t){var e=t.rule.warningOnly,i=t.errors,o=void 0===i?gt:i;e?r.push.apply(r,(0,l.A)(o)):n.push.apply(n,(0,l.A)(o))})),i.errors=n,i.warnings=r,i.triggerMetaEvent(),i.reRender()}})),r.abrupt("return",m);case 13:case"end":return r.stop()}}),r)}))));return c||(i.validatePromise=h,i.dirty=!0,i.errors=gt,i.warnings=gt,i.triggerMetaEvent(),i.reRender()),h})),(0,m.A)((0,d.A)(i),"isFieldValidating",(function(){return!!i.validatePromise})),(0,m.A)((0,d.A)(i),"isFieldTouched",(function(){return i.touched})),(0,m.A)((0,d.A)(i),"isFieldDirty",(function(){return!(!i.dirty&&void 0===i.props.initialValue)||void 0!==(0,i.props.fieldContext.getInternalHooks(b).getInitialValue)(i.getNamePath())})),(0,m.A)((0,d.A)(i),"getErrors",(function(){return i.errors})),(0,m.A)((0,d.A)(i),"getWarnings",(function(){return i.warnings})),(0,m.A)((0,d.A)(i),"isListField",(function(){return i.props.isListField})),(0,m.A)((0,d.A)(i),"isList",(function(){return i.props.isList})),(0,m.A)((0,d.A)(i),"isPreserve",(function(){return i.props.preserve})),(0,m.A)((0,d.A)(i),"getMeta",(function(){return i.prevValidating=i.isFieldValidating(),{touched:i.isFieldTouched(),validating:i.prevValidating,errors:i.errors,warnings:i.warnings,name:i.getNamePath(),validated:null===i.validatePromise}})),(0,m.A)((0,d.A)(i),"getOnlyChild",(function(t){if("function"==typeof t){var e=i.getMeta();return(0,u.A)((0,u.A)({},i.getOnlyChild(t(i.getControlled(),e,i.props.fieldContext))),{},{isFunction:!0})}var n=(0,g.A)(t);return 1===n.length&&r.isValidElement(n[0])?{child:n[0],isFunction:!1}:{child:n,isFunction:!1}})),(0,m.A)((0,d.A)(i),"getValue",(function(t){var e=i.props.fieldContext.getFieldsValue,n=i.getNamePath();return(0,ut.A)(t||e(!0),n)})),(0,m.A)((0,d.A)(i),"getControlled",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=i.props,n=e.name,r=e.trigger,o=e.validateTrigger,a=e.getValueFromEvent,s=e.normalize,l=e.valuePropName,c=e.getValueProps,h=e.fieldContext,d=void 0!==o?o:h.validateTrigger,f=i.getNamePath(),p=h.getInternalHooks,g=h.getFieldsValue,v=p(b).dispatch,y=i.getValue(),x=c||function(t){return(0,m.A)({},l,t)},w=t[r],_=void 0!==n?x(y):{};var E=(0,u.A)((0,u.A)({},t),_);return E[r]=function(){var t;i.touched=!0,i.dirty=!0,i.triggerMetaEvent();for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t=a?a.apply(void 0,n):ft.apply(void 0,[l].concat(n)),s&&(t=s(t,y,g(!0))),v({type:"updateValue",namePath:f,value:t}),w&&w.apply(void 0,n)},S(d||[]).forEach((function(t){var e=E[t];E[t]=function(){e&&e.apply(void 0,arguments);var n=i.props.rules;n&&n.length&&v({type:"validateField",namePath:f,triggerName:t})}})),E})),t.fieldContext)&&(0,(0,t.fieldContext.getInternalHooks)(b).initEntityValue)((0,d.A)(i));return i}return(0,h.A)(n,[{key:"componentDidMount",value:function(){var t=this.props,e=t.shouldUpdate,n=t.fieldContext;if(this.mounted=!0,n){var r=(0,n.getInternalHooks)(b).registerField;this.cancelRegisterFunc=r(this)}!0===e&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var t,e=this.state.resetCount,n=this.props.children,i=this.getOnlyChild(n),o=i.child;return i.isFunction?t=o:r.isValidElement(o)?t=r.cloneElement(o,this.getControlled(o.props)):((0,y.Ay)(!o,"`children` of Field is not validate ReactElement."),t=o),r.createElement(r.Fragment,{key:e},t)}}]),n}(r.Component);(0,m.A)(yt,"contextType",w),(0,m.A)(yt,"defaultProps",{trigger:"onChange",valuePropName:"value"});const bt=function(t){var e=t.name,n=(0,o.A)(t,mt),a=r.useContext(w),s=r.useContext(_),u=void 0!==e?lt(e):void 0,l="keep";return n.isListField||(l="_".concat((u||[]).join("_"))),r.createElement(yt,(0,i.A)({key:l,name:u,isListField:!!s},n,{fieldContext:a}))};const xt=function(t){var e=t.name,n=t.initialValue,i=t.children,o=t.rules,a=t.validateTrigger,s=t.isListField,c=r.useContext(w),h=r.useContext(_),d=r.useRef({keys:[],id:0}).current,f=r.useMemo((function(){var t=lt(c.prefixName)||[];return[].concat((0,l.A)(t),(0,l.A)(lt(e)))}),[c.prefixName,e]),p=r.useMemo((function(){return(0,u.A)((0,u.A)({},c),{},{prefixName:f})}),[c,f]),m=r.useMemo((function(){return{getKey:function(t){var e=f.length,n=t[e];return[d.keys[n],t.slice(e+1)]}}}),[f]);return"function"!=typeof i?((0,y.Ay)(!1,"Form.List only accepts function as children."),null):r.createElement(_.Provider,{value:m},r.createElement(w.Provider,{value:p},r.createElement(bt,{name:[],shouldUpdate:function(t,e,n){return"internal"!==n.source&&t!==e},rules:o,validateTrigger:a,initialValue:n,isList:!0,isListField:null!=s?s:!!h},(function(t,e){var n=t.value,r=void 0===n?[]:n,o=t.onChange,a=c.getFieldValue,s=function(){return a(f||[])||[]},u={add:function(t,e){var n=s();e>=0&&e<=n.length?(d.keys=[].concat((0,l.A)(d.keys.slice(0,e)),[d.id],(0,l.A)(d.keys.slice(e))),o([].concat((0,l.A)(n.slice(0,e)),[t],(0,l.A)(n.slice(e))))):(d.keys=[].concat((0,l.A)(d.keys),[d.id]),o([].concat((0,l.A)(n),[t]))),d.id+=1},remove:function(t){var e=s(),n=new Set(Array.isArray(t)?t:[t]);n.size<=0||(d.keys=d.keys.filter((function(t,e){return!n.has(e)})),o(e.filter((function(t,e){return!n.has(e)}))))},move:function(t,e){if(t!==e){var n=s();t<0||t>=n.length||e<0||e>=n.length||(d.keys=pt(d.keys,t,e),o(pt(n,t,e)))}}},h=r||[];return Array.isArray(h)||(h=[]),i(h.map((function(t,e){var n=d.keys[e];return void 0===n&&(d.keys[e]=d.id,n=d.keys[e],d.id+=1),{name:e,key:n,isListField:!0}})),u,e)}))))};var wt=n(5544);var _t="__@field_split__";function St(t){return t.map((function(t){return"".concat((0,st.A)(t),":").concat(t)})).join(_t)}var Et=function(){function t(){(0,c.A)(this,t),(0,m.A)(this,"kvs",new Map)}return(0,h.A)(t,[{key:"set",value:function(t,e){this.kvs.set(St(t),e)}},{key:"get",value:function(t){return this.kvs.get(St(t))}},{key:"update",value:function(t,e){var n=e(this.get(t));n?this.set(t,n):this.delete(t)}},{key:"delete",value:function(t){this.kvs.delete(St(t))}},{key:"map",value:function(t){return(0,l.A)(this.kvs.entries()).map((function(e){var n=(0,wt.A)(e,2),r=n[0],i=n[1],o=r.split(_t);return t({key:o.map((function(t){var e=t.match(/^([^:]*):(.*)$/),n=(0,wt.A)(e,3),r=n[1],i=n[2];return"number"===r?Number(i):i})),value:i})}))}},{key:"toJSON",value:function(){var t={};return this.map((function(e){var n=e.key,r=e.value;return t[n.join(".")]=r,null})),t}}]),t}();const At=Et;var Mt=["name"],Ct=(0,h.A)((function t(e){var n=this;(0,c.A)(this,t),(0,m.A)(this,"formHooked",!1),(0,m.A)(this,"forceRootUpdate",void 0),(0,m.A)(this,"subscribable",!0),(0,m.A)(this,"store",{}),(0,m.A)(this,"fieldEntities",[]),(0,m.A)(this,"initialValues",{}),(0,m.A)(this,"callbacks",{}),(0,m.A)(this,"validateMessages",null),(0,m.A)(this,"preserve",null),(0,m.A)(this,"lastValidatePromise",null),(0,m.A)(this,"getForm",(function(){return{getFieldValue:n.getFieldValue,getFieldsValue:n.getFieldsValue,getFieldError:n.getFieldError,getFieldWarning:n.getFieldWarning,getFieldsError:n.getFieldsError,isFieldsTouched:n.isFieldsTouched,isFieldTouched:n.isFieldTouched,isFieldValidating:n.isFieldValidating,isFieldsValidating:n.isFieldsValidating,resetFields:n.resetFields,setFields:n.setFields,setFieldValue:n.setFieldValue,setFieldsValue:n.setFieldsValue,validateFields:n.validateFields,submit:n.submit,_init:!0,getInternalHooks:n.getInternalHooks}})),(0,m.A)(this,"getInternalHooks",(function(t){return t===b?(n.formHooked=!0,{dispatch:n.dispatch,initEntityValue:n.initEntityValue,registerField:n.registerField,useSubscribe:n.useSubscribe,setInitialValues:n.setInitialValues,destroyForm:n.destroyForm,setCallbacks:n.setCallbacks,setValidateMessages:n.setValidateMessages,getFields:n.getFields,setPreserve:n.setPreserve,getInitialValue:n.getInitialValue,registerWatch:n.registerWatch}):((0,y.Ay)(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)})),(0,m.A)(this,"useSubscribe",(function(t){n.subscribable=t})),(0,m.A)(this,"prevWithoutPreserves",null),(0,m.A)(this,"setInitialValues",(function(t,e){if(n.initialValues=t||{},e){var r,i=(0,Q.h)(t,n.store);null===(r=n.prevWithoutPreserves)||void 0===r||r.map((function(e){var n=e.key;i=(0,Q.A)(i,n,(0,ut.A)(t,n))})),n.prevWithoutPreserves=null,n.updateStore(i)}})),(0,m.A)(this,"destroyForm",(function(){var t=new At;n.getFieldEntities(!0).forEach((function(e){n.isMergedPreserve(e.isPreserve())||t.set(e.getNamePath(),!0)})),n.prevWithoutPreserves=t})),(0,m.A)(this,"getInitialValue",(function(t){var e=(0,ut.A)(n.initialValues,t);return t.length?(0,Q.h)(e):e})),(0,m.A)(this,"setCallbacks",(function(t){n.callbacks=t})),(0,m.A)(this,"setValidateMessages",(function(t){n.validateMessages=t})),(0,m.A)(this,"setPreserve",(function(t){n.preserve=t})),(0,m.A)(this,"watchList",[]),(0,m.A)(this,"registerWatch",(function(t){return n.watchList.push(t),function(){n.watchList=n.watchList.filter((function(e){return e!==t}))}})),(0,m.A)(this,"notifyWatch",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(n.watchList.length){var e=n.getFieldsValue(),r=n.getFieldsValue(!0);n.watchList.forEach((function(n){n(e,r,t)}))}})),(0,m.A)(this,"timeoutId",null),(0,m.A)(this,"warningUnhooked",(function(){0})),(0,m.A)(this,"updateStore",(function(t){n.store=t})),(0,m.A)(this,"getFieldEntities",(function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?n.fieldEntities.filter((function(t){return t.getNamePath().length})):n.fieldEntities})),(0,m.A)(this,"getFieldsMap",(function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=new At;return n.getFieldEntities(t).forEach((function(t){var n=t.getNamePath();e.set(n,t)})),e})),(0,m.A)(this,"getFieldEntitiesForNamePathList",(function(t){if(!t)return n.getFieldEntities(!0);var e=n.getFieldsMap(!0);return t.map((function(t){var n=lt(t);return e.get(n)||{INVALIDATE_NAME_PATH:lt(t)}}))})),(0,m.A)(this,"getFieldsValue",(function(t,e){var r,i,o;if(n.warningUnhooked(),!0===t||Array.isArray(t)?(r=t,i=e):t&&"object"===(0,st.A)(t)&&(o=t.strict,i=t.filter),!0===r&&!i)return n.store;var a=n.getFieldEntitiesForNamePathList(Array.isArray(r)?r:null),s=[];return a.forEach((function(t){var e,n,a,u,l="INVALIDATE_NAME_PATH"in t?t.INVALIDATE_NAME_PATH:t.getNamePath();if(o){if(null!==(a=(u=t).isList)&&void 0!==a&&a.call(u))return}else if(!r&&null!==(e=(n=t).isListField)&&void 0!==e&&e.call(n))return;if(i){var c="getMeta"in t?t.getMeta():null;i(c)&&s.push(l)}else s.push(l)})),ct(n.store,s.map(lt))})),(0,m.A)(this,"getFieldValue",(function(t){n.warningUnhooked();var e=lt(t);return(0,ut.A)(n.store,e)})),(0,m.A)(this,"getFieldsError",(function(t){return n.warningUnhooked(),n.getFieldEntitiesForNamePathList(t).map((function(e,n){return e&&!("INVALIDATE_NAME_PATH"in e)?{name:e.getNamePath(),errors:e.getErrors(),warnings:e.getWarnings()}:{name:lt(t[n]),errors:[],warnings:[]}}))})),(0,m.A)(this,"getFieldError",(function(t){n.warningUnhooked();var e=lt(t);return n.getFieldsError([e])[0].errors})),(0,m.A)(this,"getFieldWarning",(function(t){n.warningUnhooked();var e=lt(t);return n.getFieldsError([e])[0].warnings})),(0,m.A)(this,"isFieldsTouched",(function(){n.warningUnhooked();for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var i,o=e[0],a=e[1],s=!1;0===e.length?i=null:1===e.length?Array.isArray(o)?(i=o.map(lt),s=!1):(i=null,s=o):(i=o.map(lt),s=a);var u=n.getFieldEntities(!0),c=function(t){return t.isFieldTouched()};if(!i)return s?u.every((function(t){return c(t)||t.isList()})):u.some(c);var h=new At;i.forEach((function(t){h.set(t,[])})),u.forEach((function(t){var e=t.getNamePath();i.forEach((function(n){n.every((function(t,n){return e[n]===t}))&&h.update(n,(function(e){return[].concat((0,l.A)(e),[t])}))}))}));var d=function(t){return t.some(c)},f=h.map((function(t){return t.value}));return s?f.every(d):f.some(d)})),(0,m.A)(this,"isFieldTouched",(function(t){return n.warningUnhooked(),n.isFieldsTouched([t])})),(0,m.A)(this,"isFieldsValidating",(function(t){n.warningUnhooked();var e=n.getFieldEntities();if(!t)return e.some((function(t){return t.isFieldValidating()}));var r=t.map(lt);return e.some((function(t){var e=t.getNamePath();return ht(r,e)&&t.isFieldValidating()}))})),(0,m.A)(this,"isFieldValidating",(function(t){return n.warningUnhooked(),n.isFieldsValidating([t])})),(0,m.A)(this,"resetWithFieldInitialValue",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=new At,r=n.getFieldEntities(!0);r.forEach((function(t){var n=t.props.initialValue,r=t.getNamePath();if(void 0!==n){var i=e.get(r)||new Set;i.add({entity:t,value:n}),e.set(r,i)}}));var i;t.entities?i=t.entities:t.namePathList?(i=[],t.namePathList.forEach((function(t){var n,r=e.get(t);r&&(n=i).push.apply(n,(0,l.A)((0,l.A)(r).map((function(t){return t.entity}))))}))):i=r,i.forEach((function(r){if(void 0!==r.props.initialValue){var i=r.getNamePath();if(void 0!==n.getInitialValue(i))(0,y.Ay)(!1,"Form already set 'initialValues' with path '".concat(i.join("."),"'. Field can not overwrite it."));else{var o=e.get(i);if(o&&o.size>1)(0,y.Ay)(!1,"Multiple Field with path '".concat(i.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(o){var a=n.getFieldValue(i);r.isListField()||t.skipExist&&void 0!==a||n.updateStore((0,Q.A)(n.store,i,(0,l.A)(o)[0].value))}}}}))})),(0,m.A)(this,"resetFields",(function(t){n.warningUnhooked();var e=n.store;if(!t)return n.updateStore((0,Q.h)(n.initialValues)),n.resetWithFieldInitialValue(),n.notifyObservers(e,null,{type:"reset"}),void n.notifyWatch();var r=t.map(lt);r.forEach((function(t){var e=n.getInitialValue(t);n.updateStore((0,Q.A)(n.store,t,e))})),n.resetWithFieldInitialValue({namePathList:r}),n.notifyObservers(e,r,{type:"reset"}),n.notifyWatch(r)})),(0,m.A)(this,"setFields",(function(t){n.warningUnhooked();var e=n.store,r=[];t.forEach((function(t){var i=t.name,a=(0,o.A)(t,Mt),s=lt(i);r.push(s),"value"in a&&n.updateStore((0,Q.A)(n.store,s,a.value)),n.notifyObservers(e,[s],{type:"setField",data:t})})),n.notifyWatch(r)})),(0,m.A)(this,"getFields",(function(){return n.getFieldEntities(!0).map((function(t){var e=t.getNamePath(),r=t.getMeta(),i=(0,u.A)((0,u.A)({},r),{},{name:e,value:n.getFieldValue(e)});return Object.defineProperty(i,"originRCField",{value:!0}),i}))})),(0,m.A)(this,"initEntityValue",(function(t){var e=t.props.initialValue;if(void 0!==e){var r=t.getNamePath();void 0===(0,ut.A)(n.store,r)&&n.updateStore((0,Q.A)(n.store,r,e))}})),(0,m.A)(this,"isMergedPreserve",(function(t){var e=void 0!==t?t:n.preserve;return null==e||e})),(0,m.A)(this,"registerField",(function(t){n.fieldEntities.push(t);var e=t.getNamePath();if(n.notifyWatch([e]),void 0!==t.props.initialValue){var r=n.store;n.resetWithFieldInitialValue({entities:[t],skipExist:!0}),n.notifyObservers(r,[t.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(r,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(n.fieldEntities=n.fieldEntities.filter((function(e){return e!==t})),!n.isMergedPreserve(i)&&(!r||o.length>1)){var a=r?void 0:n.getInitialValue(e);if(e.length&&n.getFieldValue(e)!==a&&n.fieldEntities.every((function(t){return!dt(t.getNamePath(),e)}))){var s=n.store;n.updateStore((0,Q.A)(s,e,a,!0)),n.notifyObservers(s,[e],{type:"remove"}),n.triggerDependenciesUpdate(s,e)}}n.notifyWatch([e])}})),(0,m.A)(this,"dispatch",(function(t){switch(t.type){case"updateValue":var e=t.namePath,r=t.value;n.updateValue(e,r);break;case"validateField":var i=t.namePath,o=t.triggerName;n.validateFields([i],{triggerName:o})}})),(0,m.A)(this,"notifyObservers",(function(t,e,r){if(n.subscribable){var i=(0,u.A)((0,u.A)({},r),{},{store:n.getFieldsValue(!0)});n.getFieldEntities().forEach((function(n){(0,n.onStoreChange)(t,e,i)}))}else n.forceRootUpdate()})),(0,m.A)(this,"triggerDependenciesUpdate",(function(t,e){var r=n.getDependencyChildrenFields(e);return r.length&&n.validateFields(r),n.notifyObservers(t,r,{type:"dependenciesUpdate",relatedFields:[e].concat((0,l.A)(r))}),r})),(0,m.A)(this,"updateValue",(function(t,e){var r=lt(t),i=n.store;n.updateStore((0,Q.A)(n.store,r,e)),n.notifyObservers(i,[r],{type:"valueUpdate",source:"internal"}),n.notifyWatch([r]);var o=n.triggerDependenciesUpdate(i,r),a=n.callbacks.onValuesChange;a&&a(ct(n.store,[r]),n.getFieldsValue());n.triggerOnFieldsChange([r].concat((0,l.A)(o)))})),(0,m.A)(this,"setFieldsValue",(function(t){n.warningUnhooked();var e=n.store;if(t){var r=(0,Q.h)(n.store,t);n.updateStore(r)}n.notifyObservers(e,null,{type:"valueUpdate",source:"external"}),n.notifyWatch()})),(0,m.A)(this,"setFieldValue",(function(t,e){n.setFields([{name:t,value:e}])})),(0,m.A)(this,"getDependencyChildrenFields",(function(t){var e=new Set,r=[],i=new At;n.getFieldEntities().forEach((function(t){(t.props.dependencies||[]).forEach((function(e){var n=lt(e);i.update(n,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return e.add(t),e}))}))}));return function t(n){(i.get(n)||new Set).forEach((function(n){if(!e.has(n)){e.add(n);var i=n.getNamePath();n.isFieldDirty()&&i.length&&(r.push(i),t(i))}}))}(t),r})),(0,m.A)(this,"triggerOnFieldsChange",(function(t,e){var r=n.callbacks.onFieldsChange;if(r){var i=n.getFields();if(e){var o=new At;e.forEach((function(t){var e=t.name,n=t.errors;o.set(e,n)})),i.forEach((function(t){t.errors=o.get(t.name)||t.errors}))}var a=i.filter((function(e){var n=e.name;return ht(t,n)}));a.length&&r(a,i)}})),(0,m.A)(this,"validateFields",(function(t,e){var r,i;n.warningUnhooked(),Array.isArray(t)||"string"==typeof t||"string"==typeof e?(r=t,i=e):i=t;var o=!!r,a=o?r.map(lt):[],s=[],c=String(Date.now()),h=new Set,d=i||{},f=d.recursive,p=d.dirty;n.getFieldEntities(!0).forEach((function(t){if(o||a.push(t.getNamePath()),t.props.rules&&t.props.rules.length&&(!p||t.isFieldDirty())){var e=t.getNamePath();if(h.add(e.join(c)),!o||ht(a,e,f)){var r=t.validateRules((0,u.A)({validateMessages:(0,u.A)((0,u.A)({},Z),n.validateMessages)},i));s.push(r.then((function(){return{name:e,errors:[],warnings:[]}})).catch((function(t){var n,r=[],i=[];return null===(n=t.forEach)||void 0===n||n.call(t,(function(t){var e=t.rule.warningOnly,n=t.errors;e?i.push.apply(i,(0,l.A)(n)):r.push.apply(r,(0,l.A)(n))})),r.length?Promise.reject({name:e,errors:r,warnings:i}):{name:e,errors:r,warnings:i}})))}}}));var m=function(t){var e=!1,n=t.length,r=[];return t.length?new Promise((function(i,o){t.forEach((function(t,a){t.catch((function(t){return e=!0,t})).then((function(t){n-=1,r[a]=t,n>0||(e&&o(r),i(r))}))}))})):Promise.resolve([])}(s);n.lastValidatePromise=m,m.catch((function(t){return t})).then((function(t){var e=t.map((function(t){return t.name}));n.notifyObservers(n.store,e,{type:"validateFinish"}),n.triggerOnFieldsChange(e,t)}));var g=m.then((function(){return n.lastValidatePromise===m?Promise.resolve(n.getFieldsValue(a)):Promise.reject([])})).catch((function(t){var e=t.filter((function(t){return t&&t.errors.length}));return Promise.reject({values:n.getFieldsValue(a),errorFields:e,outOfDate:n.lastValidatePromise!==m})}));g.catch((function(t){return t}));var v=a.filter((function(t){return h.has(t.join(c))}));return n.triggerOnFieldsChange(v),g})),(0,m.A)(this,"submit",(function(){n.warningUnhooked(),n.validateFields().then((function(t){var e=n.callbacks.onFinish;if(e)try{e(t)}catch(t){console.error(t)}})).catch((function(t){var e=n.callbacks.onFinishFailed;e&&e(t)}))})),this.forceRootUpdate=e}));const Tt=function(t){var e=r.useRef(),n=r.useState({}),i=(0,wt.A)(n,2)[1];if(!e.current)if(t)e.current=t;else{var o=new Ct((function(){i({})}));e.current=o.getForm()}return[e.current]};var kt=r.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}});const It=kt;var Nt=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"];const Pt=function(t,e){var n=t.name,a=t.initialValues,s=t.fields,c=t.form,h=t.preserve,d=t.children,f=t.component,p=void 0===f?"form":f,m=t.validateMessages,g=t.validateTrigger,v=void 0===g?"onChange":g,y=t.onValuesChange,x=t.onFieldsChange,S=t.onFinish,E=t.onFinishFailed,A=(0,o.A)(t,Nt),M=r.useContext(It),C=Tt(c),T=(0,wt.A)(C,1)[0],k=T.getInternalHooks(b),I=k.useSubscribe,N=k.setInitialValues,P=k.setCallbacks,O=k.setValidateMessages,L=k.setPreserve,R=k.destroyForm;r.useImperativeHandle(e,(function(){return T})),r.useEffect((function(){return M.registerForm(n,T),function(){M.unregisterForm(n)}}),[M,T,n]),O((0,u.A)((0,u.A)({},M.validateMessages),m)),P({onValuesChange:y,onFieldsChange:function(t){if(M.triggerFormChange(n,t),x){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];x.apply(void 0,[t].concat(r))}},onFinish:function(t){M.triggerFormFinish(n,t),S&&S(t)},onFinishFailed:E}),L(h);var D,z=r.useRef(null);N(a,!z.current),z.current||(z.current=!0),r.useEffect((function(){return R}),[]);var F="function"==typeof d;F?D=d(T.getFieldsValue(!0),T):D=d;I(!F);var B=r.useRef();r.useEffect((function(){(function(t,e){if(t===e)return!0;if(!t&&e||t&&!e)return!1;if(!t||!e||"object"!==(0,st.A)(t)||"object"!==(0,st.A)(e))return!1;var n=Object.keys(t),r=Object.keys(e),i=new Set([].concat(n,r));return(0,l.A)(i).every((function(n){var r=t[n],i=e[n];return"function"==typeof r&&"function"==typeof i||r===i}))})(B.current||[],s||[])||T.setFields(s||[]),B.current=s}),[s,T]);var U=r.useMemo((function(){return(0,u.A)((0,u.A)({},T),{},{validateTrigger:v})}),[T,v]),j=r.createElement(_.Provider,{value:null},r.createElement(w.Provider,{value:U},D));return!1===p?j:r.createElement(p,(0,i.A)({},A,{onSubmit:function(t){t.preventDefault(),t.stopPropagation(),T.submit()},onReset:function(t){var e;t.preventDefault(),T.resetFields(),null===(e=A.onReset)||void 0===e||e.call(A,t)}}),j)};function Ot(t){try{return JSON.stringify(t)}catch(t){return Math.random()}}var Lt=function(){};const Rt=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e[0],o=e[1],a=void 0===o?{}:o,s=function(t){return t&&!!t._init}(a)?{form:a}:a,u=s.form,l=(0,r.useState)(),c=(0,wt.A)(l,2),h=c[0],d=c[1],f=(0,r.useMemo)((function(){return Ot(h)}),[h]),p=(0,r.useRef)(f);p.current=f;var m=(0,r.useContext)(w),g=u||m,v=g&&g._init,y=lt(i),x=(0,r.useRef)(y);return x.current=y,Lt(y),(0,r.useEffect)((function(){if(v){var t=g.getFieldsValue,e=(0,g.getInternalHooks)(b).registerWatch,n=function(t,e){var n=s.preserve?e:t;return"function"==typeof i?i(n):(0,ut.A)(n,x.current)},r=e((function(t,e){var r=n(t,e),i=Ot(r);p.current!==i&&(p.current=i,d(r))})),o=n(t(),t(!0));return h!==o&&d(o),r}}),[v]),h};var Dt=r.forwardRef(Pt);Dt.FormProvider=function(t){var e=t.validateMessages,n=t.onFormChange,i=t.onFormFinish,o=t.children,a=r.useContext(kt),s=r.useRef({});return r.createElement(kt.Provider,{value:(0,u.A)((0,u.A)({},a),{},{validateMessages:(0,u.A)((0,u.A)({},a.validateMessages),e),triggerFormChange:function(t,e){n&&n(t,{changedFields:e,forms:s.current}),a.triggerFormChange(t,e)},triggerFormFinish:function(t,e){i&&i(t,{values:e,forms:s.current}),a.triggerFormFinish(t,e)},registerForm:function(t,e){t&&(s.current=(0,u.A)((0,u.A)({},s.current),{},(0,m.A)({},t,e))),a.registerForm(t,e)},unregisterForm:function(t){var e=(0,u.A)({},s.current);delete e[t],s.current=e,a.unregisterForm(t)}})},o)},Dt.Field=bt,Dt.List=xt,Dt.useForm=Tt,Dt.useWatch=Rt},65829:(t,e,n)=>{"use strict";n.d(e,{A:()=>j});var r=n(58168),i=n(64467),o=n(82284),a=n(5544),s=n(53986),u=n(23029),l=n(92901);function c(){return"function"==typeof BigInt}function h(t){return!t&&0!==t&&!Number.isNaN(t)||!String(t).trim()}function d(t){var e=t.trim(),n=e.startsWith("-");n&&(e=e.slice(1)),(e=e.replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,"")).startsWith(".")&&(e="0".concat(e));var r=e||"0",i=r.split("."),o=i[0]||"0",a=i[1]||"0";"0"===o&&"0"===a&&(n=!1);var s=n?"-":"";return{negative:n,negativeStr:s,trimStr:r,integerStr:o,decimalStr:a,fullStr:"".concat(s).concat(r)}}function f(t){var e=String(t);return!Number.isNaN(Number(e))&&e.includes("e")}function p(t){var e=String(t);if(f(t)){var n=Number(e.slice(e.indexOf("e-")+2)),r=e.match(/\.(\d+)/);return null!=r&&r[1]&&(n+=r[1].length),n}return e.includes(".")&&g(e)?e.length-e.indexOf(".")-1:0}function m(t){var e=String(t);if(f(t)){if(t>Number.MAX_SAFE_INTEGER)return String(c()?BigInt(t).toString():Number.MAX_SAFE_INTEGER);if(t<Number.MIN_SAFE_INTEGER)return String(c()?BigInt(t).toString():Number.MIN_SAFE_INTEGER);e=t.toFixed(p(e))}return d(e).fullStr}function g(t){return"number"==typeof t?!Number.isNaN(t):!!t&&(/^\s*-?\d+(\.\d+)?\s*$/.test(t)||/^\s*-?\d+\.\s*$/.test(t)||/^\s*-?\.\d+\s*$/.test(t))}var v=function(){function t(e){if((0,u.A)(this,t),(0,i.A)(this,"origin",""),(0,i.A)(this,"negative",void 0),(0,i.A)(this,"integer",void 0),(0,i.A)(this,"decimal",void 0),(0,i.A)(this,"decimalLen",void 0),(0,i.A)(this,"empty",void 0),(0,i.A)(this,"nan",void 0),h(e))this.empty=!0;else if(this.origin=String(e),"-"===e||Number.isNaN(e))this.nan=!0;else{var n=e;if(f(n)&&(n=Number(n)),g(n="string"==typeof n?n:m(n))){var r=d(n);this.negative=r.negative;var o=r.trimStr.split(".");this.integer=BigInt(o[0]);var a=o[1]||"0";this.decimal=BigInt(a),this.decimalLen=a.length}else this.nan=!0}}return(0,l.A)(t,[{key:"getMark",value:function(){return this.negative?"-":""}},{key:"getIntegerStr",value:function(){return this.integer.toString()}},{key:"getDecimalStr",value:function(){return this.decimal.toString().padStart(this.decimalLen,"0")}},{key:"alignDecimal",value:function(t){var e="".concat(this.getMark()).concat(this.getIntegerStr()).concat(this.getDecimalStr().padEnd(t,"0"));return BigInt(e)}},{key:"negate",value:function(){var e=new t(this.toString());return e.negative=!e.negative,e}},{key:"cal",value:function(e,n,r){var i=Math.max(this.getDecimalStr().length,e.getDecimalStr().length),o=n(this.alignDecimal(i),e.alignDecimal(i)).toString(),a=r(i),s=d(o),u=s.negativeStr,l=s.trimStr,c="".concat(u).concat(l.padStart(a+1,"0"));return new t("".concat(c.slice(0,-a),".").concat(c.slice(-a)))}},{key:"add",value:function(e){if(this.isInvalidate())return new t(e);var n=new t(e);return n.isInvalidate()?this:this.cal(n,(function(t,e){return t+e}),(function(t){return t}))}},{key:"multi",value:function(e){var n=new t(e);return this.isInvalidate()||n.isInvalidate()?new t(NaN):this.cal(n,(function(t,e){return t*e}),(function(t){return 2*t}))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return this.nan}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(t){return this.toString()===(null==t?void 0:t.toString())}},{key:"lessEquals",value:function(t){return this.add(t.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.isNaN()?NaN:Number(this.toString())}},{key:"toString",value:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?this.isInvalidate()?"":d("".concat(this.getMark()).concat(this.getIntegerStr(),".").concat(this.getDecimalStr())).fullStr:this.origin}}]),t}(),y=function(){function t(e){(0,u.A)(this,t),(0,i.A)(this,"origin",""),(0,i.A)(this,"number",void 0),(0,i.A)(this,"empty",void 0),h(e)?this.empty=!0:(this.origin=String(e),this.number=Number(e))}return(0,l.A)(t,[{key:"negate",value:function(){return new t(-this.toNumber())}},{key:"add",value:function(e){if(this.isInvalidate())return new t(e);var n=Number(e);if(Number.isNaN(n))return this;var r=this.number+n;if(r>Number.MAX_SAFE_INTEGER)return new t(Number.MAX_SAFE_INTEGER);if(r<Number.MIN_SAFE_INTEGER)return new t(Number.MIN_SAFE_INTEGER);var i=Math.max(p(this.number),p(n));return new t(r.toFixed(i))}},{key:"multi",value:function(e){var n=Number(e);if(this.isInvalidate()||Number.isNaN(n))return new t(NaN);var r=this.number*n;if(r>Number.MAX_SAFE_INTEGER)return new t(Number.MAX_SAFE_INTEGER);if(r<Number.MIN_SAFE_INTEGER)return new t(Number.MIN_SAFE_INTEGER);var i=Math.max(p(this.number),p(n));return new t(r.toFixed(i))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return Number.isNaN(this.number)}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(t){return this.toNumber()===(null==t?void 0:t.toNumber())}},{key:"lessEquals",value:function(t){return this.add(t.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.number}},{key:"toString",value:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?this.isInvalidate()?"":m(this.number):this.origin}}]),t}();function b(t){return c()?new v(t):new y(t)}function x(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(""===t)return"";var i=d(t),o=i.negativeStr,a=i.integerStr,s=i.decimalStr,u="".concat(e).concat(s),l="".concat(o).concat(a);if(n>=0){var c=Number(s[n]);return c>=5&&!r?x(b(t).add("".concat(o,"0.").concat("0".repeat(n)).concat(10-c)).toString(),e,n,r):0===n?l:"".concat(l).concat(e).concat(s.padEnd(n,"0").slice(0,n))}return".0"===u?l:"".concat(l).concat(u)}const w=b;var _=n(46942),S=n.n(_),E=n(48491),A=n(30981),M=n(8719),C=n(96540),T=n(68210);var k=n(68430);const I=function(){var t=(0,C.useState)(!1),e=(0,a.A)(t,2),n=e[0],r=e[1];return(0,A.A)((function(){r((0,k.A)())}),[]),n};var N=n(25371);function P(t){var e=t.prefixCls,n=t.upNode,o=t.downNode,a=t.upDisabled,s=t.downDisabled,u=t.onStep,l=C.useRef(),c=C.useRef([]),h=C.useRef();h.current=u;var d=function(){clearTimeout(l.current)},f=function(t,e){t.preventDefault(),d(),h.current(e),l.current=setTimeout((function t(){h.current(e),l.current=setTimeout(t,200)}),600)};if(C.useEffect((function(){return function(){d(),c.current.forEach((function(t){return N.A.cancel(t)}))}}),[]),I())return null;var p="".concat(e,"-handler"),m=S()(p,"".concat(p,"-up"),(0,i.A)({},"".concat(p,"-up-disabled"),a)),g=S()(p,"".concat(p,"-down"),(0,i.A)({},"".concat(p,"-down-disabled"),s)),v=function(){return c.current.push((0,N.A)(d))},y={unselectable:"on",role:"button",onMouseUp:v,onMouseLeave:v};return C.createElement("div",{className:"".concat(p,"-wrap")},C.createElement("span",(0,r.A)({},y,{onMouseDown:function(t){f(t,!0)},"aria-label":"Increase Value","aria-disabled":a,className:m}),n||C.createElement("span",{unselectable:"on",className:"".concat(e,"-handler-up-inner")})),C.createElement("span",(0,r.A)({},y,{onMouseDown:function(t){f(t,!1)},"aria-label":"Decrease Value","aria-disabled":s,className:g}),o||C.createElement("span",{unselectable:"on",className:"".concat(e,"-handler-down-inner")})))}function O(t){var e="number"==typeof t?m(t):d(t).fullStr;return e.includes(".")?d(e.replace(/(\d)\.(\d)/g,"$1$2.")).fullStr:t+"0"}var L=n(11980);var R=["prefixCls","className","style","min","max","step","defaultValue","value","disabled","readOnly","upHandler","downHandler","keyboard","changeOnWheel","controls","classNames","stringMode","parser","formatter","precision","decimalSeparator","onChange","onInput","onPressEnter","onStep","changeOnBlur"],D=["disabled","style","prefixCls","value","prefix","suffix","addonBefore","addonAfter","className","classNames"],z=function(t,e){return t||e.isEmpty()?e.toString():e.toNumber()},F=function(t){var e=w(t);return e.isInvalidate()?null:e},B=C.forwardRef((function(t,e){var n,u=t.prefixCls,l=void 0===u?"rc-input-number":u,c=t.className,h=t.style,d=t.min,f=t.max,v=t.step,y=void 0===v?1:v,b=t.defaultValue,_=t.value,E=t.disabled,k=t.readOnly,I=t.upHandler,L=t.downHandler,D=t.keyboard,B=t.changeOnWheel,U=void 0!==B&&B,j=t.controls,V=void 0===j||j,H=(t.classNames,t.stringMode),G=t.parser,W=t.formatter,X=t.precision,Y=t.decimalSeparator,q=t.onChange,$=t.onInput,K=t.onPressEnter,Z=t.onStep,Q=t.changeOnBlur,J=void 0===Q||Q,tt=(0,s.A)(t,R),et="".concat(l,"-input"),nt=C.useRef(null),rt=C.useState(!1),it=(0,a.A)(rt,2),ot=it[0],at=it[1],st=C.useRef(!1),ut=C.useRef(!1),lt=C.useRef(!1),ct=C.useState((function(){return w(null!=_?_:b)})),ht=(0,a.A)(ct,2),dt=ht[0],ft=ht[1];var pt=C.useCallback((function(t,e){if(!e)return X>=0?X:Math.max(p(t),p(y))}),[X,y]),mt=C.useCallback((function(t){var e=String(t);if(G)return G(e);var n=e;return Y&&(n=n.replace(Y,".")),n.replace(/[^\w.-]+/g,"")}),[G,Y]),gt=C.useRef(""),vt=C.useCallback((function(t,e){if(W)return W(t,{userTyping:e,input:String(gt.current)});var n="number"==typeof t?m(t):t;if(!e){var r=pt(n,e);if(g(n)&&(Y||r>=0))n=x(n,Y||".",r)}return n}),[W,pt,Y]),yt=C.useState((function(){var t=null!=b?b:_;return dt.isInvalidate()&&["string","number"].includes((0,o.A)(t))?Number.isNaN(t)?"":t:vt(dt.toString(),!1)})),bt=(0,a.A)(yt,2),xt=bt[0],wt=bt[1];function _t(t,e){wt(vt(t.isInvalidate()?t.toString(!1):t.toString(!e),e))}gt.current=xt;var St,Et,At,Mt,Ct,Tt=C.useMemo((function(){return F(f)}),[f,X]),kt=C.useMemo((function(){return F(d)}),[d,X]),It=C.useMemo((function(){return!(!Tt||!dt||dt.isInvalidate())&&Tt.lessEquals(dt)}),[Tt,dt]),Nt=C.useMemo((function(){return!(!kt||!dt||dt.isInvalidate())&&dt.lessEquals(kt)}),[kt,dt]),Pt=(St=nt.current,Et=ot,At=(0,C.useRef)(null),[function(){try{var t=St.selectionStart,e=St.selectionEnd,n=St.value,r=n.substring(0,t),i=n.substring(e);At.current={start:t,end:e,value:n,beforeTxt:r,afterTxt:i}}catch(t){}},function(){if(St&&At.current&&Et)try{var t=St.value,e=At.current,n=e.beforeTxt,r=e.afterTxt,i=e.start,o=t.length;if(t.endsWith(r))o=t.length-At.current.afterTxt.length;else if(t.startsWith(n))o=n.length;else{var a=n[i-1],s=t.indexOf(a,i-1);-1!==s&&(o=s+1)}St.setSelectionRange(o,o)}catch(t){(0,T.Ay)(!1,"Something warning of cursor restore. Please fire issue about this: ".concat(t.message))}}]),Ot=(0,a.A)(Pt,2),Lt=Ot[0],Rt=Ot[1],Dt=function(t){return Tt&&!t.lessEquals(Tt)?Tt:kt&&!kt.lessEquals(t)?kt:null},zt=function(t){return!Dt(t)},Ft=function(t,e){var n,r=t,i=zt(r)||r.isEmpty();if(r.isEmpty()||e||(r=Dt(r)||r,i=!0),!k&&!E&&i){var o=r.toString(),a=pt(o,e);return a>=0&&(r=w(x(o,".",a)),zt(r)||(r=w(x(o,".",a,!0)))),r.equals(dt)||(n=r,void 0===_&&ft(n),null==q||q(r.isEmpty()?null:z(H,r)),void 0===_&&_t(r,e)),r}return dt},Bt=(Mt=(0,C.useRef)(0),Ct=function(){N.A.cancel(Mt.current)},(0,C.useEffect)((function(){return Ct}),[]),function(t){Ct(),Mt.current=(0,N.A)((function(){t()}))}),Ut=function t(e){if(Lt(),gt.current=e,wt(e),!ut.current){var n=mt(e),r=w(n);r.isNaN()||Ft(r,!0)}null==$||$(e),Bt((function(){var n=e;G||(n=e.replace(//g,".")),n!==e&&t(n)}))},jt=function(t){var e;if(!(t&&It||!t&&Nt)){st.current=!1;var n=w(lt.current?O(y):y);t||(n=n.negate());var r=(dt||w(0)).add(n.toString()),i=Ft(r,!1);null==Z||Z(z(H,i),{offset:lt.current?O(y):y,type:t?"up":"down"}),null===(e=nt.current)||void 0===e||e.focus()}},Vt=function(t){var e=w(mt(xt)),n=e;n=e.isNaN()?Ft(dt,t):Ft(e,t),void 0!==_?_t(dt,!1):n.isNaN()||_t(n,!1)};C.useEffect((function(){if(U&&ot){var t=function(t){jt(t.deltaY<0),t.preventDefault()},e=nt.current;if(e)return e.addEventListener("wheel",t,{passive:!1}),function(){return e.removeEventListener("wheel",t)}}}));return(0,A.o)((function(){dt.isInvalidate()||_t(dt,!1)}),[X,W]),(0,A.o)((function(){var t=w(_);ft(t);var e=w(mt(xt));t.equals(e)&&st.current&&!W||_t(t,st.current)}),[_]),(0,A.o)((function(){W&&Rt()}),[xt]),C.createElement("div",{className:S()(l,c,(n={},(0,i.A)(n,"".concat(l,"-focused"),ot),(0,i.A)(n,"".concat(l,"-disabled"),E),(0,i.A)(n,"".concat(l,"-readonly"),k),(0,i.A)(n,"".concat(l,"-not-a-number"),dt.isNaN()),(0,i.A)(n,"".concat(l,"-out-of-range"),!dt.isInvalidate()&&!zt(dt)),n)),style:h,onFocus:function(){at(!0)},onBlur:function(){J&&Vt(!1),at(!1),st.current=!1},onKeyDown:function(t){var e=t.key,n=t.shiftKey;st.current=!0,lt.current=n,"Enter"===e&&(ut.current||(st.current=!1),Vt(!1),null==K||K(t)),!1!==D&&!ut.current&&["Up","ArrowUp","Down","ArrowDown"].includes(e)&&(jt("Up"===e||"ArrowUp"===e),t.preventDefault())},onKeyUp:function(){st.current=!1,lt.current=!1},onCompositionStart:function(){ut.current=!0},onCompositionEnd:function(){ut.current=!1,Ut(nt.current.value)},onBeforeInput:function(){st.current=!0}},V&&C.createElement(P,{prefixCls:l,upNode:I,downNode:L,upDisabled:It,downDisabled:Nt,onStep:jt}),C.createElement("div",{className:"".concat(et,"-wrap")},C.createElement("input",(0,r.A)({autoComplete:"off",role:"spinbutton","aria-valuemin":d,"aria-valuemax":f,"aria-valuenow":dt.isInvalidate()?null:dt.toString(),step:y},tt,{ref:(0,M.K4)(nt,e),className:et,value:xt,onChange:function(t){Ut(t.target.value)},disabled:E,readOnly:k}))))})),U=C.forwardRef((function(t,e){var n=t.disabled,i=t.style,o=t.prefixCls,a=t.value,u=t.prefix,l=t.suffix,c=t.addonBefore,h=t.addonAfter,d=t.className,f=t.classNames,p=(0,s.A)(t,D),m=C.useRef(null);return C.createElement(E.a,{className:d,triggerFocus:function(t){m.current&&(0,L.F4)(m.current,t)},prefixCls:o,value:a,disabled:n,style:i,prefix:u,suffix:l,addonAfter:h,addonBefore:c,classNames:f,components:{affixWrapper:"div",groupWrapper:"div",wrapper:"div",groupAddon:"div"}},C.createElement(B,(0,r.A)({prefixCls:o,disabled:n,ref:(0,M.K4)(m,e),className:null==f?void 0:f.input},p)))}));U.displayName="InputNumber";const j=U},22489:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(53986),i=n(89379),o=n(82284),a=n(96540),s=["show"];function u(t,e){return a.useMemo((function(){var n={};e&&(n.show="object"===(0,o.A)(e)&&e.formatter?e.formatter:!!e);var a=n=(0,i.A)((0,i.A)({},n),t),u=a.show,l=(0,r.A)(a,s);return(0,i.A)((0,i.A)({},l),{},{show:!!u,showFormatter:"function"==typeof u?u:void 0,strategy:l.strategy||function(t){return t.length}})}),[t,e])}},48491:(t,e,n)=>{"use strict";n.d(e,{a:()=>h,A:()=>b});var r=n(89379),i=n(58168),o=n(64467),a=n(82284),s=n(46942),u=n.n(s),l=n(96540),c=n(11980);const h=function(t){var e,n,s=t.inputElement,h=t.children,d=t.prefixCls,f=t.prefix,p=t.suffix,m=t.addonBefore,g=t.addonAfter,v=t.className,y=t.style,b=t.disabled,x=t.readOnly,w=t.focused,_=t.triggerFocus,S=t.allowClear,E=t.value,A=t.handleReset,M=t.hidden,C=t.classes,T=t.classNames,k=t.dataAttrs,I=t.styles,N=t.components,P=null!=h?h:s,O=(null==N?void 0:N.affixWrapper)||"span",L=(null==N?void 0:N.groupWrapper)||"span",R=(null==N?void 0:N.wrapper)||"span",D=(null==N?void 0:N.groupAddon)||"span",z=(0,l.useRef)(null),F=(0,c.OL)(t),B=(0,l.cloneElement)(P,{value:E,className:u()(P.props.className,!F&&(null==T?void 0:T.variant))||null});if(F){var U,j=null;if(S){var V,H=!b&&!x&&E,G="".concat(d,"-clear-icon"),W="object"===(0,a.A)(S)&&null!=S&&S.clearIcon?S.clearIcon:"";j=l.createElement("span",{onClick:A,onMouseDown:function(t){return t.preventDefault()},className:u()(G,(V={},(0,o.A)(V,"".concat(G,"-hidden"),!H),(0,o.A)(V,"".concat(G,"-has-suffix"),!!p),V)),role:"button",tabIndex:-1},W)}var X="".concat(d,"-affix-wrapper"),Y=u()(X,(U={},(0,o.A)(U,"".concat(d,"-disabled"),b),(0,o.A)(U,"".concat(X,"-disabled"),b),(0,o.A)(U,"".concat(X,"-focused"),w),(0,o.A)(U,"".concat(X,"-readonly"),x),(0,o.A)(U,"".concat(X,"-input-with-clear-btn"),p&&S&&E),U),null==C?void 0:C.affixWrapper,null==T?void 0:T.affixWrapper,null==T?void 0:T.variant),q=(p||S)&&l.createElement("span",{className:u()("".concat(d,"-suffix"),null==T?void 0:T.suffix),style:null==I?void 0:I.suffix},j,p);B=l.createElement(O,(0,i.A)({className:Y,style:null==I?void 0:I.affixWrapper,onClick:function(t){var e;null!==(e=z.current)&&void 0!==e&&e.contains(t.target)&&(null==_||_())}},null==k?void 0:k.affixWrapper,{ref:z}),f&&l.createElement("span",{className:u()("".concat(d,"-prefix"),null==T?void 0:T.prefix),style:null==I?void 0:I.prefix},f),B,q)}if((0,c.bk)(t)){var $="".concat(d,"-group"),K="".concat($,"-addon"),Z="".concat($,"-wrapper"),Q=u()("".concat(d,"-wrapper"),$,null==C?void 0:C.wrapper,null==T?void 0:T.wrapper),J=u()(Z,(0,o.A)({},"".concat(Z,"-disabled"),b),null==C?void 0:C.group,null==T?void 0:T.groupWrapper);B=l.createElement(L,{className:J},l.createElement(R,{className:Q},m&&l.createElement(D,{className:K},m),B,g&&l.createElement(D,{className:K},g)))}return l.cloneElement(B,{className:u()(null===(e=B.props)||void 0===e?void 0:e.className,v)||null,style:(0,r.A)((0,r.A)({},null===(n=B.props)||void 0===n?void 0:n.style),y),hidden:M})};var d=n(60436),f=n(5544),p=n(53986),m=n(12533),g=n(19853),v=n(22489),y=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"];const b=(0,l.forwardRef)((function(t,e){var n=t.autoComplete,a=t.onChange,s=t.onFocus,b=t.onBlur,x=t.onPressEnter,w=t.onKeyDown,_=t.prefixCls,S=void 0===_?"rc-input":_,E=t.disabled,A=t.htmlSize,M=t.className,C=t.maxLength,T=t.suffix,k=t.showCount,I=t.count,N=t.type,P=void 0===N?"text":N,O=t.classes,L=t.classNames,R=t.styles,D=t.onCompositionStart,z=t.onCompositionEnd,F=(0,p.A)(t,y),B=(0,l.useState)(!1),U=(0,f.A)(B,2),j=U[0],V=U[1],H=(0,l.useRef)(!1),G=(0,l.useRef)(null),W=function(t){G.current&&(0,c.F4)(G.current,t)},X=(0,m.A)(t.defaultValue,{value:t.value}),Y=(0,f.A)(X,2),q=Y[0],$=Y[1],K=null==q?"":String(q),Z=(0,l.useState)(null),Q=(0,f.A)(Z,2),J=Q[0],tt=Q[1],et=(0,v.A)(I,k),nt=et.max||C,rt=et.strategy(K),it=!!nt&&rt>nt;(0,l.useImperativeHandle)(e,(function(){return{focus:W,blur:function(){var t;null===(t=G.current)||void 0===t||t.blur()},setSelectionRange:function(t,e,n){var r;null===(r=G.current)||void 0===r||r.setSelectionRange(t,e,n)},select:function(){var t;null===(t=G.current)||void 0===t||t.select()},input:G.current}})),(0,l.useEffect)((function(){V((function(t){return(!t||!E)&&t}))}),[E]);var ot=function(t,e,n){var r,i,o=e;if(!H.current&&et.exceedFormatter&&et.max&&et.strategy(e)>et.max)e!==(o=et.exceedFormatter(e,{max:et.max}))&&tt([(null===(r=G.current)||void 0===r?void 0:r.selectionStart)||0,(null===(i=G.current)||void 0===i?void 0:i.selectionEnd)||0]);else if("compositionEnd"===n.source)return;$(o),G.current&&(0,c.gS)(G.current,t,a,o)};(0,l.useEffect)((function(){var t;J&&(null===(t=G.current)||void 0===t||t.setSelectionRange.apply(t,(0,d.A)(J)))}),[J]);var at,st=function(t){ot(t,t.target.value,{source:"change"})},ut=function(t){H.current=!1,ot(t,t.currentTarget.value,{source:"compositionEnd"}),null==z||z(t)},lt=function(t){x&&"Enter"===t.key&&x(t),null==w||w(t)},ct=function(t){V(!0),null==s||s(t)},ht=function(t){V(!1),null==b||b(t)},dt=it&&"".concat(S,"-out-of-range");return l.createElement(h,(0,i.A)({},F,{prefixCls:S,className:u()(M,dt),handleReset:function(t){$(""),W(),G.current&&(0,c.gS)(G.current,t,a)},value:K,focused:j,triggerFocus:W,suffix:function(){var t=Number(nt)>0;if(T||et.show){var e=et.showFormatter?et.showFormatter({value:K,count:rt,maxLength:nt}):"".concat(rt).concat(t?" / ".concat(nt):"");return l.createElement(l.Fragment,null,et.show&&l.createElement("span",{className:u()("".concat(S,"-show-count-suffix"),(0,o.A)({},"".concat(S,"-show-count-has-suffix"),!!T),null==L?void 0:L.count),style:(0,r.A)({},null==R?void 0:R.count)},e),T)}return null}(),disabled:E,classes:O,classNames:L,styles:R}),(at=(0,g.A)(t,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames"]),l.createElement("input",(0,i.A)({autoComplete:n},at,{onChange:st,onFocus:ct,onBlur:ht,onKeyDown:lt,className:u()(S,(0,o.A)({},"".concat(S,"-disabled"),E),null==L?void 0:L.input),style:null==R?void 0:R.input,ref:G,size:A,type:P,onCompositionStart:function(t){H.current=!0,null==D||D(t)},onCompositionEnd:ut}))))}))},11980:(t,e,n)=>{"use strict";function r(t){return!(!t.addonBefore&&!t.addonAfter)}function i(t){return!!(t.prefix||t.suffix||t.allowClear)}function o(t,e,n){var r=e.cloneNode(!0),i=Object.create(t,{target:{value:r},currentTarget:{value:r}});return r.value=n,"number"==typeof e.selectionStart&&"number"==typeof e.selectionEnd&&(r.selectionStart=e.selectionStart,r.selectionEnd=e.selectionEnd),i}function a(t,e,n,r){if(n){var i=e;"click"!==e.type?"file"===t.type||void 0===r?n(i):n(i=o(e,t,r)):n(i=o(e,t,""))}}function s(t,e){if(t){t.focus(e);var n=(e||{}).cursor;if(n){var r=t.value.length;switch(n){case"start":t.setSelectionRange(0,0);break;case"end":t.setSelectionRange(r,r);break;default:t.setSelectionRange(0,r)}}}}n.d(e,{F4:()=>s,OL:()=>i,bk:()=>r,gS:()=>a})},48810:(t,e,n)=>{"use strict";n.d(e,{cG:()=>Gt,q7:()=>bt,te:()=>Ht,g8:()=>Ft,Ay:()=>Zt,Wj:()=>T});var r=n(58168),i=n(64467),o=n(89379),a=n(60436),s=n(5544),u=n(53986),l=n(46942),c=n.n(l),h=n(99591),d=n(12533),f=n(43210),p=n(68210),m=n(96540),g=n(40961),v=m.createContext(null);function y(t,e){return void 0===t?null:"".concat(t,"-").concat(e)}function b(t){return y(m.useContext(v),t)}var x=n(28104),w=["children","locked"],_=m.createContext(null);function S(t){var e=t.children,n=t.locked,r=(0,u.A)(t,w),i=m.useContext(_),a=(0,x.A)((function(){return t=i,e=r,n=(0,o.A)({},t),Object.keys(e).forEach((function(t){var r=e[t];void 0!==r&&(n[t]=r)})),n;var t,e,n}),[i,r],(function(t,e){return!(n||t[0]===e[0]&&(0,f.A)(t[1],e[1],!0))}));return m.createElement(_.Provider,{value:a},e)}var E=[],A=m.createContext(null);function M(){return m.useContext(A)}var C=m.createContext(E);function T(t){var e=m.useContext(C);return m.useMemo((function(){return void 0!==t?[].concat((0,a.A)(e),[t]):e}),[e,t])}var k=m.createContext(null);const I=m.createContext({});var N=n(42467);function P(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((0,N.A)(t)){var n=t.nodeName.toLowerCase(),r=["input","select","textarea","button"].includes(n)||t.isContentEditable||"a"===n&&!!t.getAttribute("href"),i=t.getAttribute("tabindex"),o=Number(i),a=null;return i&&!Number.isNaN(o)?a=o:r&&null===a&&(a=0),r&&t.disabled&&(a=null),null!==a&&(a>=0||e&&a<0)}return!1}function O(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,a.A)(t.querySelectorAll("*")).filter((function(t){return P(t,e)}));return P(t,e)&&n.unshift(t),n}var L=n(16928),R=n(25371),D=L.A.LEFT,z=L.A.RIGHT,F=L.A.UP,B=L.A.DOWN,U=L.A.ENTER,j=L.A.ESC,V=L.A.HOME,H=L.A.END,G=[F,B,D,z];function W(t,e){return O(t,!0).filter((function(t){return e.has(t)}))}function X(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!t)return null;var i=W(t,e),o=i.length,a=i.findIndex((function(t){return n===t}));return r<0?-1===a?a=o-1:a-=1:r>0&&(a+=1),i[a=(a+o)%o]}var Y=function(t,e){var n=new Set,r=new Map,i=new Map;return t.forEach((function(t){var o=document.querySelector("[data-menu-id='".concat(y(e,t),"']"));o&&(n.add(o),i.set(o,t),r.set(t,o))})),{elements:n,key2element:r,element2key:i}};function q(t,e,n,r,o,a,s,u,l,c){var h=m.useRef(),d=m.useRef();d.current=e;var f=function(){R.A.cancel(h.current)};return m.useEffect((function(){return function(){f()}}),[]),function(p){var m=p.which;if([].concat(G,[U,j,V,H]).includes(m)){var g=a(),v=Y(g,r),y=v,b=y.elements,x=y.key2element,w=y.element2key,_=function(t,e){for(var n=t||document.activeElement;n;){if(e.has(n))return n;n=n.parentElement}return null}(x.get(e),b),S=w.get(_),E=function(t,e,n,r){var o,a="prev",s="next",u="children",l="parent";if("inline"===t&&r===U)return{inlineTrigger:!0};var c=(0,i.A)((0,i.A)({},F,a),B,s),h=(0,i.A)((0,i.A)((0,i.A)((0,i.A)({},D,n?s:a),z,n?a:s),B,u),U,u),d=(0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)({},F,a),B,s),U,u),j,l),D,n?u:l),z,n?l:u);switch(null===(o={inline:c,horizontal:h,vertical:d,inlineSub:c,horizontalSub:d,verticalSub:d}["".concat(t).concat(e?"":"Sub")])||void 0===o?void 0:o[r]){case a:return{offset:-1,sibling:!0};case s:return{offset:1,sibling:!0};case l:return{offset:-1,sibling:!1};case u:return{offset:1,sibling:!1};default:return null}}(t,1===s(S,!0).length,n,m);if(!E&&m!==V&&m!==H)return;(G.includes(m)||[V,H].includes(m))&&p.preventDefault();var A=function(t){if(t){var e=t,n=t.querySelector("a");null!=n&&n.getAttribute("href")&&(e=n);var r=w.get(t);u(r),f(),h.current=(0,R.A)((function(){d.current===r&&e.focus()}))}};if([V,H].includes(m)||E.sibling||!_){var M,C,T=W(M=_&&"inline"!==t?function(t){for(var e=t;e;){if(e.getAttribute("data-menu-list"))return e;e=e.parentElement}return null}(_):o.current,b);C=m===V?T[0]:m===H?T[T.length-1]:X(M,b,_,E.offset),A(C)}else if(E.inlineTrigger)l(S);else if(E.offset>0)l(S,!0),f(),h.current=(0,R.A)((function(){v=Y(g,r);var t=_.getAttribute("aria-controls"),e=X(document.getElementById(t),v.elements);A(e)}),5);else if(E.offset<0){var k=s(S,!0),I=k[k.length-2],N=x.get(I);l(I,!1),A(N)}}null==c||c(p)}}var $="__RC_UTIL_PATH_SPLIT__",K=function(t){return t.join($)},Z="rc-menu-more";function Q(){var t=m.useState({}),e=(0,s.A)(t,2)[1],n=(0,m.useRef)(new Map),r=(0,m.useRef)(new Map),i=m.useState([]),o=(0,s.A)(i,2),u=o[0],l=o[1],c=(0,m.useRef)(0),h=(0,m.useRef)(!1),d=(0,m.useCallback)((function(t,i){var o=K(i);r.current.set(o,t),n.current.set(t,o),c.current+=1;var a,s=c.current;a=function(){s===c.current&&(h.current||e({}))},Promise.resolve().then(a)}),[]),f=(0,m.useCallback)((function(t,e){var i=K(e);r.current.delete(i),n.current.delete(t)}),[]),p=(0,m.useCallback)((function(t){l(t)}),[]),g=(0,m.useCallback)((function(t,e){var r=n.current.get(t)||"",i=r.split($);return e&&u.includes(i[0])&&i.unshift(Z),i}),[u]),v=(0,m.useCallback)((function(t,e){return t.some((function(t){return g(t,!0).includes(e)}))}),[g]),y=(0,m.useCallback)((function(t){var e="".concat(n.current.get(t)).concat($),i=new Set;return(0,a.A)(r.current.keys()).forEach((function(t){t.startsWith(e)&&i.add(r.current.get(t))})),i}),[]);return m.useEffect((function(){return function(){h.current=!0}}),[]),{registerPath:d,unregisterPath:f,refreshOverflowKeys:p,isSubPathKey:v,getKeyPath:g,getKeys:function(){var t=(0,a.A)(n.current.keys());return u.length&&t.push(Z),t},getSubPathKeys:y}}function J(t){var e=m.useRef(t);e.current=t;var n=m.useCallback((function(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return null===(t=e.current)||void 0===t?void 0:t.call.apply(t,[e].concat(r))}),[]);return t?n:void 0}var tt=Math.random().toFixed(5).toString().slice(2),et=0;var nt=n(23029),rt=n(92901),it=n(15361),ot=n(29426),at=n(19853),st=n(8719);function ut(t,e,n,r){var i=m.useContext(_),o=i.activeKey,a=i.onActive,s=i.onInactive,u={active:o===t};return e||(u.onMouseEnter=function(e){null==n||n({key:t,domEvent:e}),a(t)},u.onMouseLeave=function(e){null==r||r({key:t,domEvent:e}),s(t)}),u}function lt(t){var e=m.useContext(_),n=e.mode,r=e.rtl,i=e.inlineIndent;if("inline"!==n)return null;return r?{paddingRight:t*i}:{paddingLeft:t*i}}function ct(t){var e,n=t.icon,r=t.props,i=t.children;return null===n||!1===n?null:("function"==typeof n?e=m.createElement(n,(0,o.A)({},r)):"boolean"!=typeof n&&(e=n),e||i||null)}var ht=["item"];function dt(t){var e=t.item,n=(0,u.A)(t,ht);return Object.defineProperty(n,"item",{get:function(){return(0,p.Ay)(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),e}}),n}var ft=["title","attribute","elementRef"],pt=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],mt=["active"],gt=function(t){(0,it.A)(n,t);var e=(0,ot.A)(n);function n(){return(0,nt.A)(this,n),e.apply(this,arguments)}return(0,rt.A)(n,[{key:"render",value:function(){var t=this.props,e=t.title,n=t.attribute,i=t.elementRef,o=(0,u.A)(t,ft),a=(0,at.A)(o,["eventKey","popupClassName","popupOffset","onTitleClick"]);return(0,p.Ay)(!n,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),m.createElement(h.A.Item,(0,r.A)({},n,{title:"string"==typeof e?e:void 0},a,{ref:i}))}}]),n}(m.Component),vt=m.forwardRef((function(t,e){var n=t.style,s=t.className,l=t.eventKey,h=(t.warnKey,t.disabled),d=t.itemIcon,f=t.children,p=t.role,g=t.onMouseEnter,v=t.onMouseLeave,y=t.onClick,x=t.onKeyDown,w=t.onFocus,S=(0,u.A)(t,pt),E=b(l),A=m.useContext(_),M=A.prefixCls,C=A.onItemClick,k=A.disabled,N=A.overflowDisabled,P=A.itemIcon,O=A.selectedKeys,R=A.onActive,D=m.useContext(I)._internalRenderMenuItem,z="".concat(M,"-item"),F=m.useRef(),B=m.useRef(),U=k||h,j=(0,st.xK)(e,B),V=T(l);var H=function(t){return{key:l,keyPath:(0,a.A)(V).reverse(),item:F.current,domEvent:t}},G=d||P,W=ut(l,U,g,v),X=W.active,Y=(0,u.A)(W,mt),q=O.includes(l),$=lt(V.length),K={};"option"===t.role&&(K["aria-selected"]=q);var Z=m.createElement(gt,(0,r.A)({ref:F,elementRef:j,role:null===p?"none":p||"menuitem",tabIndex:h?null:-1,"data-menu-id":N&&E?null:E},S,Y,K,{component:"li","aria-disabled":h,style:(0,o.A)((0,o.A)({},$),n),className:c()(z,(0,i.A)((0,i.A)((0,i.A)({},"".concat(z,"-active"),X),"".concat(z,"-selected"),q),"".concat(z,"-disabled"),U),s),onClick:function(t){if(!U){var e=H(t);null==y||y(dt(e)),C(e)}},onKeyDown:function(t){if(null==x||x(t),t.which===L.A.ENTER){var e=H(t);null==y||y(dt(e)),C(e)}},onFocus:function(t){R(l),null==w||w(t)}}),f,m.createElement(ct,{props:(0,o.A)((0,o.A)({},t),{},{isSelected:q}),icon:G}));return D&&(Z=D(Z,t,{selected:q})),Z}));function yt(t,e){var n=t.eventKey,i=M(),o=T(n);return m.useEffect((function(){if(i)return i.registerPath(n,o),function(){i.unregisterPath(n,o)}}),[o]),i?null:m.createElement(vt,(0,r.A)({},t,{ref:e}))}const bt=m.forwardRef(yt);var xt=["className","children"],wt=function(t,e){var n=t.className,i=t.children,o=(0,u.A)(t,xt),a=m.useContext(_),s=a.prefixCls,l=a.mode,h=a.rtl;return m.createElement("ul",(0,r.A)({className:c()(s,h&&"".concat(s,"-rtl"),"".concat(s,"-sub"),"".concat(s,"-").concat("inline"===l?"inline":"vertical"),n),role:"menu"},o,{"data-menu-list":!0,ref:e}),i)},_t=m.forwardRef(wt);_t.displayName="SubMenuList";const St=_t;var Et=n(82546);function At(t,e){return(0,Et.A)(t).map((function(t,n){if(m.isValidElement(t)){var r,i,o=t.key,s=null!==(r=null===(i=t.props)||void 0===i?void 0:i.eventKey)&&void 0!==r?r:o;null==s&&(s="tmp_key-".concat([].concat((0,a.A)(e),[n]).join("-")));var u={key:s,eventKey:s};return m.cloneElement(t,u)}return t}))}var Mt=n(62427),Ct={adjustX:1,adjustY:1},Tt={topLeft:{points:["bl","tl"],overflow:Ct},topRight:{points:["br","tr"],overflow:Ct},bottomLeft:{points:["tl","bl"],overflow:Ct},bottomRight:{points:["tr","br"],overflow:Ct},leftTop:{points:["tr","tl"],overflow:Ct},leftBottom:{points:["br","bl"],overflow:Ct},rightTop:{points:["tl","tr"],overflow:Ct},rightBottom:{points:["bl","br"],overflow:Ct}},kt={topLeft:{points:["bl","tl"],overflow:Ct},topRight:{points:["br","tr"],overflow:Ct},bottomLeft:{points:["tl","bl"],overflow:Ct},bottomRight:{points:["tr","br"],overflow:Ct},rightTop:{points:["tr","tl"],overflow:Ct},rightBottom:{points:["br","bl"],overflow:Ct},leftTop:{points:["tl","tr"],overflow:Ct},leftBottom:{points:["bl","br"],overflow:Ct}};function It(t,e,n){return e||(n?n[t]||n.other:void 0)}var Nt={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function Pt(t){var e=t.prefixCls,n=t.visible,r=t.children,a=t.popup,u=t.popupStyle,l=t.popupClassName,h=t.popupOffset,d=t.disabled,f=t.mode,p=t.onVisibleChange,g=m.useContext(_),v=g.getPopupContainer,y=g.rtl,b=g.subMenuOpenDelay,x=g.subMenuCloseDelay,w=g.builtinPlacements,S=g.triggerSubMenuAction,E=g.forceSubMenuRender,A=g.rootClassName,M=g.motion,C=g.defaultMotions,T=m.useState(!1),k=(0,s.A)(T,2),I=k[0],N=k[1],P=y?(0,o.A)((0,o.A)({},kt),w):(0,o.A)((0,o.A)({},Tt),w),O=Nt[f],L=It(f,M,C),D=m.useRef(L);"inline"!==f&&(D.current=L);var z=(0,o.A)((0,o.A)({},D.current),{},{leavedClassName:"".concat(e,"-hidden"),removeOnLeave:!1,motionAppear:!0}),F=m.useRef();return m.useEffect((function(){return F.current=(0,R.A)((function(){N(n)})),function(){R.A.cancel(F.current)}}),[n]),m.createElement(Mt.A,{prefixCls:e,popupClassName:c()("".concat(e,"-popup"),(0,i.A)({},"".concat(e,"-rtl"),y),l,A),stretch:"horizontal"===f?"minWidth":null,getPopupContainer:v,builtinPlacements:P,popupPlacement:O,popupVisible:I,popup:a,popupStyle:u,popupAlign:h&&{offset:h},action:d?[]:[S],mouseEnterDelay:b,mouseLeaveDelay:x,onPopupVisibleChange:p,forceRender:E,popupMotion:z,fresh:!0},r)}var Ot=n(57557);function Lt(t){var e=t.id,n=t.open,i=t.keyPath,a=t.children,u="inline",l=m.useContext(_),c=l.prefixCls,h=l.forceSubMenuRender,d=l.motion,f=l.defaultMotions,p=l.mode,g=m.useRef(!1);g.current=p===u;var v=m.useState(!g.current),y=(0,s.A)(v,2),b=y[0],x=y[1],w=!!g.current&&n;m.useEffect((function(){g.current&&x(!1)}),[p]);var E=(0,o.A)({},It(u,d,f));i.length>1&&(E.motionAppear=!1);var A=E.onVisibleChanged;return E.onVisibleChanged=function(t){return g.current||t||x(!0),null==A?void 0:A(t)},b?null:m.createElement(S,{mode:u,locked:!g.current},m.createElement(Ot.Ay,(0,r.A)({visible:w},E,{forceRender:h,removeOnLeave:!1,leavedClassName:"".concat(c,"-hidden")}),(function(t){var n=t.className,r=t.style;return m.createElement(St,{id:e,className:n,style:r},a)})))}var Rt=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","popupStyle","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],Dt=["active"],zt=function(t){var e=t.style,n=t.className,a=t.title,l=t.eventKey,d=(t.warnKey,t.disabled),f=t.internalPopupClose,p=t.children,g=t.itemIcon,v=t.expandIcon,y=t.popupClassName,x=t.popupOffset,w=t.popupStyle,E=t.onClick,A=t.onMouseEnter,M=t.onMouseLeave,C=t.onTitleClick,N=t.onTitleMouseEnter,P=t.onTitleMouseLeave,O=(0,u.A)(t,Rt),L=b(l),R=m.useContext(_),D=R.prefixCls,z=R.mode,F=R.openKeys,B=R.disabled,U=R.overflowDisabled,j=R.activeKey,V=R.selectedKeys,H=R.itemIcon,G=R.expandIcon,W=R.onItemClick,X=R.onOpenChange,Y=R.onActive,q=m.useContext(I)._internalRenderSubMenuItem,$=m.useContext(k).isSubPathKey,K=T(),Z="".concat(D,"-submenu"),Q=B||d,tt=m.useRef(),et=m.useRef();var nt=null!=g?g:H,rt=null!=v?v:G,it=F.includes(l),ot=!U&&it,at=$(V,l),st=ut(l,Q,N,P),ht=st.active,ft=(0,u.A)(st,Dt),pt=m.useState(!1),mt=(0,s.A)(pt,2),gt=mt[0],vt=mt[1],yt=function(t){Q||vt(t)},bt=m.useMemo((function(){return ht||"inline"!==z&&(gt||$([j],l))}),[z,ht,j,gt,l,$]),xt=lt(K.length),wt=J((function(t){null==E||E(dt(t)),W(t)})),_t=L&&"".concat(L,"-popup"),Et=m.createElement("div",(0,r.A)({role:"menuitem",style:xt,className:"".concat(Z,"-title"),tabIndex:Q?null:-1,ref:tt,title:"string"==typeof a?a:null,"data-menu-id":U&&L?null:L,"aria-expanded":ot,"aria-haspopup":!0,"aria-controls":_t,"aria-disabled":Q,onClick:function(t){Q||(null==C||C({key:l,domEvent:t}),"inline"===z&&X(l,!it))},onFocus:function(){Y(l)}},ft),a,m.createElement(ct,{icon:"horizontal"!==z?rt:void 0,props:(0,o.A)((0,o.A)({},t),{},{isOpen:ot,isSubMenu:!0})},m.createElement("i",{className:"".concat(Z,"-arrow")}))),At=m.useRef(z);if("inline"!==z&&K.length>1?At.current="vertical":At.current=z,!U){var Mt=At.current;Et=m.createElement(Pt,{mode:Mt,prefixCls:Z,visible:!f&&ot&&"inline"!==z,popupClassName:y,popupOffset:x,popupStyle:w,popup:m.createElement(S,{mode:"horizontal"===Mt?"vertical":Mt},m.createElement(St,{id:_t,ref:et},p)),disabled:Q,onVisibleChange:function(t){"inline"!==z&&X(l,t)}},Et)}var Ct=m.createElement(h.A.Item,(0,r.A)({role:"none"},O,{component:"li",style:e,className:c()(Z,"".concat(Z,"-").concat(z),n,(0,i.A)((0,i.A)((0,i.A)((0,i.A)({},"".concat(Z,"-open"),ot),"".concat(Z,"-active"),bt),"".concat(Z,"-selected"),at),"".concat(Z,"-disabled"),Q)),onMouseEnter:function(t){yt(!0),null==A||A({key:l,domEvent:t})},onMouseLeave:function(t){yt(!1),null==M||M({key:l,domEvent:t})}}),Et,!U&&m.createElement(Lt,{id:_t,open:ot,keyPath:K},p));return q&&(Ct=q(Ct,t,{selected:at,active:bt,open:ot,disabled:Q})),m.createElement(S,{onItemClick:wt,mode:"horizontal"===z?"vertical":z,itemIcon:nt,expandIcon:rt},Ct)};function Ft(t){var e,n=t.eventKey,r=t.children,i=T(n),o=At(r,i),a=M();return m.useEffect((function(){if(a)return a.registerPath(n,i),function(){a.unregisterPath(n,i)}}),[i]),e=a?o:m.createElement(zt,t,o),m.createElement(C.Provider,{value:i},e)}var Bt=n(82284),Ut=["className","title","eventKey","children"],jt=["children"],Vt=function(t){var e=t.className,n=t.title,i=(t.eventKey,t.children),o=(0,u.A)(t,Ut),a=m.useContext(_).prefixCls,s="".concat(a,"-item-group");return m.createElement("li",(0,r.A)({role:"presentation"},o,{onClick:function(t){return t.stopPropagation()},className:c()(s,e)}),m.createElement("div",{role:"presentation",className:"".concat(s,"-title"),title:"string"==typeof n?n:void 0},n),m.createElement("ul",{role:"group",className:"".concat(s,"-list")},i))};function Ht(t){var e=t.children,n=(0,u.A)(t,jt),r=At(e,T(n.eventKey));return M()?r:m.createElement(Vt,(0,at.A)(n,["warnKey"]),r)}function Gt(t){var e=t.className,n=t.style,r=m.useContext(_).prefixCls;return M()?null:m.createElement("li",{role:"separator",className:c()("".concat(r,"-item-divider"),e),style:n})}var Wt=["label","children","key","type"];function Xt(t){return(t||[]).map((function(t,e){if(t&&"object"===(0,Bt.A)(t)){var n=t,i=n.label,o=n.children,a=n.key,s=n.type,l=(0,u.A)(n,Wt),c=null!=a?a:"tmp-".concat(e);return o||"group"===s?"group"===s?m.createElement(Ht,(0,r.A)({key:c},l,{title:i}),Xt(o)):m.createElement(Ft,(0,r.A)({key:c},l,{title:i}),Xt(o)):"divider"===s?m.createElement(Gt,(0,r.A)({key:c},l)):m.createElement(bt,(0,r.A)({key:c},l),i)}return null})).filter((function(t){return t}))}function Yt(t,e,n){var r=t;return e&&(r=Xt(e)),At(r,n)}var qt=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem"],$t=[];var Kt=m.forwardRef((function(t,e){var n,l=t,p=l.prefixCls,y=void 0===p?"rc-menu":p,b=l.rootClassName,x=l.style,w=l.className,_=l.tabIndex,E=void 0===_?0:_,M=l.items,C=l.children,T=l.direction,N=l.id,P=l.mode,O=void 0===P?"vertical":P,L=l.inlineCollapsed,R=l.disabled,D=l.disabledOverflow,z=l.subMenuOpenDelay,F=void 0===z?.1:z,B=l.subMenuCloseDelay,U=void 0===B?.1:B,j=l.forceSubMenuRender,V=l.defaultOpenKeys,H=l.openKeys,G=l.activeKey,X=l.defaultActiveFirst,$=l.selectable,K=void 0===$||$,nt=l.multiple,rt=void 0!==nt&&nt,it=l.defaultSelectedKeys,ot=l.selectedKeys,at=l.onSelect,st=l.onDeselect,ut=l.inlineIndent,lt=void 0===ut?24:ut,ct=l.motion,ht=l.defaultMotions,ft=l.triggerSubMenuAction,pt=void 0===ft?"hover":ft,mt=l.builtinPlacements,gt=l.itemIcon,vt=l.expandIcon,yt=l.overflowedIndicator,xt=void 0===yt?"...":yt,wt=l.overflowedIndicatorPopupClassName,_t=l.getPopupContainer,St=l.onClick,Et=l.onOpenChange,At=l.onKeyDown,Mt=(l.openAnimation,l.openTransitionName,l._internalRenderMenuItem),Ct=l._internalRenderSubMenuItem,Tt=(0,u.A)(l,qt),kt=m.useMemo((function(){return Yt(C,M,$t)}),[C,M]),It=m.useState(!1),Nt=(0,s.A)(It,2),Pt=Nt[0],Ot=Nt[1],Lt=m.useRef(),Rt=function(t){var e=(0,d.A)(t,{value:t}),n=(0,s.A)(e,2),r=n[0],i=n[1];return m.useEffect((function(){et+=1;var t="".concat(tt,"-").concat(et);i("rc-menu-uuid-".concat(t))}),[]),r}(N),Dt="rtl"===T;var zt=(0,d.A)(V,{value:H,postState:function(t){return t||$t}}),Bt=(0,s.A)(zt,2),Ut=Bt[0],jt=Bt[1],Vt=function(t){function e(){jt(t),null==Et||Et(t)}arguments.length>1&&void 0!==arguments[1]&&arguments[1]?(0,g.flushSync)(e):e()},Ht=m.useState(Ut),Gt=(0,s.A)(Ht,2),Wt=Gt[0],Xt=Gt[1],Kt=m.useRef(!1),Zt=m.useMemo((function(){return"inline"!==O&&"vertical"!==O||!L?[O,!1]:["vertical",L]}),[O,L]),Qt=(0,s.A)(Zt,2),Jt=Qt[0],te=Qt[1],ee="inline"===Jt,ne=m.useState(Jt),re=(0,s.A)(ne,2),ie=re[0],oe=re[1],ae=m.useState(te),se=(0,s.A)(ae,2),ue=se[0],le=se[1];m.useEffect((function(){oe(Jt),le(te),Kt.current&&(ee?jt(Wt):Vt($t))}),[Jt,te]);var ce=m.useState(0),he=(0,s.A)(ce,2),de=he[0],fe=he[1],pe=de>=kt.length-1||"horizontal"!==ie||D;m.useEffect((function(){ee&&Xt(Ut)}),[Ut]),m.useEffect((function(){return Kt.current=!0,function(){Kt.current=!1}}),[]);var me=Q(),ge=me.registerPath,ve=me.unregisterPath,ye=me.refreshOverflowKeys,be=me.isSubPathKey,xe=me.getKeyPath,we=me.getKeys,_e=me.getSubPathKeys,Se=m.useMemo((function(){return{registerPath:ge,unregisterPath:ve}}),[ge,ve]),Ee=m.useMemo((function(){return{isSubPathKey:be}}),[be]);m.useEffect((function(){ye(pe?$t:kt.slice(de+1).map((function(t){return t.key})))}),[de,pe]);var Ae=(0,d.A)(G||X&&(null===(n=kt[0])||void 0===n?void 0:n.key),{value:G}),Me=(0,s.A)(Ae,2),Ce=Me[0],Te=Me[1],ke=J((function(t){Te(t)})),Ie=J((function(){Te(void 0)}));(0,m.useImperativeHandle)(e,(function(){return{list:Lt.current,focus:function(t){var e,n,r=we(),i=Y(r,Rt),o=i.elements,a=i.key2element,s=i.element2key,u=W(Lt.current,o),l=null!=Ce?Ce:u[0]?s.get(u[0]):null===(e=kt.find((function(t){return!t.props.disabled})))||void 0===e?void 0:e.key,c=a.get(l);l&&c&&(null==c||null===(n=c.focus)||void 0===n||n.call(c,t))}}}));var Ne=(0,d.A)(it||[],{value:ot,postState:function(t){return Array.isArray(t)?t:null==t?$t:[t]}}),Pe=(0,s.A)(Ne,2),Oe=Pe[0],Le=Pe[1],Re=J((function(t){null==St||St(dt(t)),function(t){if(K){var e,n=t.key,r=Oe.includes(n);e=rt?r?Oe.filter((function(t){return t!==n})):[].concat((0,a.A)(Oe),[n]):[n],Le(e);var i=(0,o.A)((0,o.A)({},t),{},{selectedKeys:e});r?null==st||st(i):null==at||at(i)}!rt&&Ut.length&&"inline"!==ie&&Vt($t)}(t)})),De=J((function(t,e){var n=Ut.filter((function(e){return e!==t}));if(e)n.push(t);else if("inline"!==ie){var r=_e(t);n=n.filter((function(t){return!r.has(t)}))}(0,f.A)(Ut,n,!0)||Vt(n,!0)})),ze=q(ie,Ce,Dt,Rt,Lt,we,xe,Te,(function(t,e){var n=null!=e?e:!Ut.includes(t);De(t,n)}),At);m.useEffect((function(){Ot(!0)}),[]);var Fe=m.useMemo((function(){return{_internalRenderMenuItem:Mt,_internalRenderSubMenuItem:Ct}}),[Mt,Ct]),Be="horizontal"!==ie||D?kt:kt.map((function(t,e){return m.createElement(S,{key:t.key,overflowDisabled:e>de},t)})),Ue=m.createElement(h.A,(0,r.A)({id:N,ref:Lt,prefixCls:"".concat(y,"-overflow"),component:"ul",itemComponent:bt,className:c()(y,"".concat(y,"-root"),"".concat(y,"-").concat(ie),w,(0,i.A)((0,i.A)({},"".concat(y,"-inline-collapsed"),ue),"".concat(y,"-rtl"),Dt),b),dir:T,style:x,role:"menu",tabIndex:E,data:Be,renderRawItem:function(t){return t},renderRawRest:function(t){var e=t.length,n=e?kt.slice(-e):null;return m.createElement(Ft,{eventKey:Z,title:xt,disabled:pe,internalPopupClose:0===e,popupClassName:wt},n)},maxCount:"horizontal"!==ie||D?h.A.INVALIDATE:h.A.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(t){fe(t)},onKeyDown:ze},Tt));return m.createElement(I.Provider,{value:Fe},m.createElement(v.Provider,{value:Rt},m.createElement(S,{prefixCls:y,rootClassName:b,mode:ie,openKeys:Ut,rtl:Dt,disabled:R,motion:Pt?ct:null,defaultMotions:Pt?ht:null,activeKey:Ce,onActive:ke,onInactive:Ie,selectedKeys:Oe,inlineIndent:lt,subMenuOpenDelay:F,subMenuCloseDelay:U,forceSubMenuRender:j,builtinPlacements:mt,triggerSubMenuAction:pt,getPopupContainer:_t,itemIcon:gt,expandIcon:vt,onItemClick:Re,onOpenChange:De},m.createElement(k.Provider,{value:Ee},Ue),m.createElement("div",{style:{display:"none"},"aria-hidden":!0},m.createElement(A.Provider,{value:Se},kt)))))}));Kt.Item=bt,Kt.SubMenu=Ft,Kt.ItemGroup=Ht,Kt.Divider=Gt;const Zt=Kt},57557:(t,e,n)=>{"use strict";n.d(e,{aF:()=>mt,Kq:()=>m,Ay:()=>gt});var r=n(64467),i=n(89379),o=n(5544),a=n(82284),s=n(46942),u=n.n(s),l=n(66588),c=n(8719),h=n(96540),d=n(53986),f=["children"],p=h.createContext({});function m(t){var e=t.children,n=(0,d.A)(t,f);return h.createElement(p.Provider,{value:n},e)}var g=n(23029),v=n(92901),y=n(15361),b=n(29426);const x=function(t){(0,y.A)(n,t);var e=(0,b.A)(n);function n(){return(0,g.A)(this,n),e.apply(this,arguments)}return(0,v.A)(n,[{key:"render",value:function(){return this.props.children}}]),n}(h.Component);var w=n(1233),_="none",S="appear",E="enter",A="leave",M="none",C="prepare",T="start",k="active",I="end",N="prepared",P=n(20998);function O(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit".concat(t)]="webkit".concat(e),n["Moz".concat(t)]="moz".concat(e),n["ms".concat(t)]="MS".concat(e),n["O".concat(t)]="o".concat(e.toLowerCase()),n}var L,R,D,z=(L=(0,P.A)(),R="undefined"!=typeof window?window:{},D={animationend:O("Animation","AnimationEnd"),transitionend:O("Transition","TransitionEnd")},L&&("AnimationEvent"in R||delete D.animationend.animation,"TransitionEvent"in R||delete D.transitionend.transition),D),F={};if((0,P.A)()){var B=document.createElement("div");F=B.style}var U={};function j(t){if(U[t])return U[t];var e=z[t];if(e)for(var n=Object.keys(e),r=n.length,i=0;i<r;i+=1){var o=n[i];if(Object.prototype.hasOwnProperty.call(e,o)&&o in F)return U[t]=e[o],U[t]}return""}var V=j("animationend"),H=j("transitionend"),G=!(!V||!H),W=V||"animationend",X=H||"transitionend";function Y(t,e){return t?"object"===(0,a.A)(t)?t[e.replace(/-\w/g,(function(t){return t[1].toUpperCase()}))]:"".concat(t,"-").concat(e):null}const q=function(t){var e=(0,h.useRef)(),n=(0,h.useRef)(t);n.current=t;var r=h.useCallback((function(t){n.current(t)}),[]);function i(t){t&&(t.removeEventListener(X,r),t.removeEventListener(W,r))}return h.useEffect((function(){return function(){i(e.current)}}),[]),[function(t){e.current&&e.current!==t&&i(e.current),t&&t!==e.current&&(t.addEventListener(X,r),t.addEventListener(W,r),e.current=t)},i]};const $=(0,P.A)()?h.useLayoutEffect:h.useEffect;var K=n(25371);var Z=[C,T,k,I],Q=[C,N],J=!1,tt=!0;function et(t){return t===k||t===I}const nt=function(t,e,n){var r=(0,w.A)(M),i=(0,o.A)(r,2),a=i[0],s=i[1],u=function(){var t=h.useRef(null);function e(){K.A.cancel(t.current)}return h.useEffect((function(){return function(){e()}}),[]),[function n(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;e();var o=(0,K.A)((function(){i<=1?r({isCanceled:function(){return o!==t.current}}):n(r,i-1)}));t.current=o},e]}(),l=(0,o.A)(u,2),c=l[0],d=l[1];var f=e?Q:Z;return $((function(){if(a!==M&&a!==I){var t=f.indexOf(a),e=f[t+1],r=n(a);r===J?s(e,!0):e&&c((function(t){function n(){t.isCanceled()||s(e,!0)}!0===r?n():Promise.resolve(r).then(n)}))}}),[t,a]),h.useEffect((function(){return function(){d()}}),[]),[function(){s(C,!0)},a]};const rt=function(t){var e=t;"object"===(0,a.A)(t)&&(e=t.transitionSupport);var n=h.forwardRef((function(t,n){var a=t.visible,s=void 0===a||a,d=t.removeOnLeave,f=void 0===d||d,m=t.forceRender,g=t.children,v=t.motionName,y=t.leavedClassName,b=t.eventProps,M=function(t,n){return!(!t.motionName||!e||!1===n)}(t,h.useContext(p).motion),I=(0,h.useRef)(),P=(0,h.useRef)();var O=function(t,e,n,a){var s=a.motionEnter,u=void 0===s||s,l=a.motionAppear,c=void 0===l||l,d=a.motionLeave,f=void 0===d||d,p=a.motionDeadline,m=a.motionLeaveImmediately,g=a.onAppearPrepare,v=a.onEnterPrepare,y=a.onLeavePrepare,b=a.onAppearStart,x=a.onEnterStart,M=a.onLeaveStart,I=a.onAppearActive,P=a.onEnterActive,O=a.onLeaveActive,L=a.onAppearEnd,R=a.onEnterEnd,D=a.onLeaveEnd,z=a.onVisibleChanged,F=(0,w.A)(),B=(0,o.A)(F,2),U=B[0],j=B[1],V=(0,w.A)(_),H=(0,o.A)(V,2),G=H[0],W=H[1],X=(0,w.A)(null),Y=(0,o.A)(X,2),K=Y[0],Z=Y[1],Q=(0,h.useRef)(!1),rt=(0,h.useRef)(null);function it(){return n()}var ot=(0,h.useRef)(!1);function at(){W(_,!0),Z(null,!0)}function st(t){var e=it();if(!t||t.deadline||t.target===e){var n,r=ot.current;G===S&&r?n=null==L?void 0:L(e,t):G===E&&r?n=null==R?void 0:R(e,t):G===A&&r&&(n=null==D?void 0:D(e,t)),G!==_&&r&&!1!==n&&at()}}var ut=q(st),lt=(0,o.A)(ut,1)[0],ct=function(t){var e,n,i;switch(t){case S:return e={},(0,r.A)(e,C,g),(0,r.A)(e,T,b),(0,r.A)(e,k,I),e;case E:return n={},(0,r.A)(n,C,v),(0,r.A)(n,T,x),(0,r.A)(n,k,P),n;case A:return i={},(0,r.A)(i,C,y),(0,r.A)(i,T,M),(0,r.A)(i,k,O),i;default:return{}}},ht=h.useMemo((function(){return ct(G)}),[G]),dt=nt(G,!t,(function(t){if(t===C){var e=ht[C];return e?e(it()):J}var n;return mt in ht&&Z((null===(n=ht[mt])||void 0===n?void 0:n.call(ht,it(),null))||null),mt===k&&(lt(it()),p>0&&(clearTimeout(rt.current),rt.current=setTimeout((function(){st({deadline:!0})}),p))),mt===N&&at(),tt})),ft=(0,o.A)(dt,2),pt=ft[0],mt=ft[1],gt=et(mt);ot.current=gt,$((function(){j(e);var n,r=Q.current;Q.current=!0,!r&&e&&c&&(n=S),r&&e&&u&&(n=E),(r&&!e&&f||!r&&m&&!e&&f)&&(n=A);var i=ct(n);n&&(t||i[C])?(W(n),pt()):W(_)}),[e]),(0,h.useEffect)((function(){(G===S&&!c||G===E&&!u||G===A&&!f)&&W(_)}),[c,u,f]),(0,h.useEffect)((function(){return function(){Q.current=!1,clearTimeout(rt.current)}}),[]);var vt=h.useRef(!1);(0,h.useEffect)((function(){U&&(vt.current=!0),void 0!==U&&G===_&&((vt.current||U)&&(null==z||z(U)),vt.current=!0)}),[U,G]);var yt=K;return ht[C]&&mt===T&&(yt=(0,i.A)({transition:"none"},yt)),[G,mt,yt,null!=U?U:e]}(M,s,(function(){try{return I.current instanceof HTMLElement?I.current:(0,l.A)(P.current)}catch(t){return null}}),t),L=(0,o.A)(O,4),R=L[0],D=L[1],z=L[2],F=L[3],B=h.useRef(F);F&&(B.current=!0);var U,j=h.useCallback((function(t){I.current=t,(0,c.Xf)(n,t)}),[n]),V=(0,i.A)((0,i.A)({},b),{},{visible:s});if(g)if(R===_)U=F?g((0,i.A)({},V),j):!f&&B.current&&y?g((0,i.A)((0,i.A)({},V),{},{className:y}),j):m||!f&&!y?g((0,i.A)((0,i.A)({},V),{},{style:{display:"none"}}),j):null;else{var H,G;D===C?G="prepare":et(D)?G="active":D===T&&(G="start");var W=Y(v,"".concat(R,"-").concat(G));U=g((0,i.A)((0,i.A)({},V),{},{className:u()(Y(v,R),(H={},(0,r.A)(H,W,W&&G),(0,r.A)(H,v,"string"==typeof v),H)),style:z}),j)}else U=null;h.isValidElement(U)&&(0,c.f3)(U)&&(U.ref||(U=h.cloneElement(U,{ref:j})));return h.createElement(x,{ref:P},U)}));return n.displayName="CSSMotion",n}(G);var it=n(58168),ot=n(9417),at="add",st="keep",ut="remove",lt="removed";function ct(t){var e;return e=t&&"object"===(0,a.A)(t)&&"key"in t?t:{key:t},(0,i.A)((0,i.A)({},e),{},{key:String(e.key)})}function ht(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(ct)}var dt=["component","children","onVisibleChanged","onAllRemoved"],ft=["status"],pt=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];const mt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rt,n=function(t){(0,y.A)(o,t);var n=(0,b.A)(o);function o(){var t;(0,g.A)(this,o);for(var e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return t=n.call.apply(n,[this].concat(a)),(0,r.A)((0,ot.A)(t),"state",{keyEntities:[]}),(0,r.A)((0,ot.A)(t),"removeKey",(function(e){var n=t.state.keyEntities.map((function(t){return t.key!==e?t:(0,i.A)((0,i.A)({},t),{},{status:lt})}));return t.setState({keyEntities:n}),n.filter((function(t){return t.status!==lt})).length})),t}return(0,v.A)(o,[{key:"render",value:function(){var t=this,n=this.state.keyEntities,r=this.props,o=r.component,a=r.children,s=r.onVisibleChanged,u=r.onAllRemoved,l=(0,d.A)(r,dt),c=o||h.Fragment,f={};return pt.forEach((function(t){f[t]=l[t],delete l[t]})),delete l.keys,h.createElement(c,l,n.map((function(n,r){var o=n.status,l=(0,d.A)(n,ft),c=o===at||o===st;return h.createElement(e,(0,it.A)({},f,{key:l.key,visible:c,eventProps:l,onVisibleChanged:function(e){(null==s||s(e,{key:l.key}),e)||0===t.removeKey(l.key)&&u&&u()}}),(function(t,e){return a((0,i.A)((0,i.A)({},t),{},{index:r}),e)}))})))}}],[{key:"getDerivedStateFromProps",value:function(t,e){var n=t.keys,r=e.keyEntities,o=ht(n),a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=0,o=e.length,a=ht(t),s=ht(e);a.forEach((function(t){for(var e=!1,a=r;a<o;a+=1){var u=s[a];if(u.key===t.key){r<a&&(n=n.concat(s.slice(r,a).map((function(t){return(0,i.A)((0,i.A)({},t),{},{status:at})}))),r=a),n.push((0,i.A)((0,i.A)({},u),{},{status:st})),r+=1,e=!0;break}}e||n.push((0,i.A)((0,i.A)({},t),{},{status:ut}))})),r<o&&(n=n.concat(s.slice(r).map((function(t){return(0,i.A)((0,i.A)({},t),{},{status:at})}))));var u={};return n.forEach((function(t){var e=t.key;u[e]=(u[e]||0)+1})),Object.keys(u).filter((function(t){return u[t]>1})).forEach((function(t){(n=n.filter((function(e){var n=e.key,r=e.status;return n!==t||r!==ut}))).forEach((function(e){e.key===t&&(e.status=st)}))})),n}(r,o);return{keyEntities:a.filter((function(t){var e=r.find((function(e){var n=e.key;return t.key===n}));return!e||e.status!==lt||t.status!==ut}))}}}]),o}(h.Component);return(0,r.A)(n,"defaultProps",{component:"div"}),n}(G),gt=rt},22370:(t,e,n)=>{"use strict";n.d(e,{$T:()=>v,ph:()=>b,hN:()=>C});var r=n(60436),i=n(5544),o=n(53986),a=n(96540),s=n(89379),u=n(40961),l=n(58168),c=n(64467),h=n(46942),d=n.n(h),f=n(57557),p=n(82284),m=n(16928),g=n(72065);const v=a.forwardRef((function(t,e){var n=t.prefixCls,r=t.style,o=t.className,s=t.duration,u=void 0===s?4.5:s,h=t.eventKey,f=t.content,v=t.closable,y=t.closeIcon,b=void 0===y?"x":y,x=t.props,w=t.onClick,_=t.onNoticeClose,S=t.times,E=t.hovering,A=a.useState(!1),M=(0,i.A)(A,2),C=M[0],T=M[1],k=E||C,I=function(){_(h)};a.useEffect((function(){if(!k&&u>0){var t=setTimeout((function(){I()}),1e3*u);return function(){clearTimeout(t)}}}),[u,k,S]);var N=a.useMemo((function(){return"object"===(0,p.A)(v)&&null!==v?v:v?{closeIcon:b}:{}}),[v,b]),P=(0,g.A)(N,!0),O="".concat(n,"-notice");return a.createElement("div",(0,l.A)({},x,{ref:e,className:d()(O,o,(0,c.A)({},"".concat(O,"-closable"),v)),style:r,onMouseEnter:function(t){var e;T(!0),null==x||null===(e=x.onMouseEnter)||void 0===e||e.call(x,t)},onMouseLeave:function(t){var e;T(!1),null==x||null===(e=x.onMouseLeave)||void 0===e||e.call(x,t)},onClick:w}),a.createElement("div",{className:"".concat(O,"-content")},f),v&&a.createElement("a",(0,l.A)({tabIndex:0,className:"".concat(O,"-close"),onKeyDown:function(t){"Enter"!==t.key&&"Enter"!==t.code&&t.keyCode!==m.A.ENTER||I()},"aria-label":"Close"},P,{onClick:function(t){t.preventDefault(),t.stopPropagation(),I()}}),N.closeIcon))}));var y=a.createContext({});const b=function(t){var e=t.children,n=t.classNames;return a.createElement(y.Provider,{value:{classNames:n}},e)};const x=function(t){var e,n,r,i={offset:8,threshold:3,gap:16};t&&"object"===(0,p.A)(t)&&(i.offset=null!==(e=t.offset)&&void 0!==e?e:8,i.threshold=null!==(n=t.threshold)&&void 0!==n?n:3,i.gap=null!==(r=t.gap)&&void 0!==r?r:16);return[!!t,i]};var w=["className","style","classNames","styles"];const _=function(t){var e=t.configList,n=t.placement,u=t.prefixCls,h=t.className,p=t.style,m=t.motion,g=t.onAllNoticeRemoved,b=t.onNoticeClose,_=t.stack,S=(0,a.useContext)(y).classNames,E=(0,a.useRef)({}),A=(0,a.useState)(null),M=(0,i.A)(A,2),C=M[0],T=M[1],k=(0,a.useState)([]),I=(0,i.A)(k,2),N=I[0],P=I[1],O=e.map((function(t){return{config:t,key:String(t.key)}})),L=x(_),R=(0,i.A)(L,2),D=R[0],z=R[1],F=z.offset,B=z.threshold,U=z.gap,j=D&&(N.length>0||O.length<=B),V="function"==typeof m?m(n):m;return(0,a.useEffect)((function(){D&&N.length>1&&P((function(t){return t.filter((function(t){return O.some((function(e){var n=e.key;return t===n}))}))}))}),[N,O,D]),(0,a.useEffect)((function(){var t,e;D&&E.current[null===(t=O[O.length-1])||void 0===t?void 0:t.key]&&T(E.current[null===(e=O[O.length-1])||void 0===e?void 0:e.key])}),[O,D]),a.createElement(f.aF,(0,l.A)({key:n,className:d()(u,"".concat(u,"-").concat(n),null==S?void 0:S.list,h,(0,c.A)((0,c.A)({},"".concat(u,"-stack"),!!D),"".concat(u,"-stack-expanded"),j)),style:p,keys:O,motionAppear:!0},V,{onAllRemoved:function(){g(n)}}),(function(t,e){var i=t.config,c=t.className,h=t.style,f=t.index,p=i,m=p.key,g=p.times,y=String(m),x=i,_=x.className,A=x.style,M=x.classNames,T=x.styles,k=(0,o.A)(x,w),I=O.findIndex((function(t){return t.key===y})),L={};if(D){var R=O.length-1-(I>-1?I:f-1),z="top"===n||"bottom"===n?"-50%":"0";if(R>0){var B,V,H;L.height=j?null===(B=E.current[y])||void 0===B?void 0:B.offsetHeight:null==C?void 0:C.offsetHeight;for(var G=0,W=0;W<R;W++){var X;G+=(null===(X=E.current[O[O.length-1-W].key])||void 0===X?void 0:X.offsetHeight)+U}var Y=(j?G:R*F)*(n.startsWith("top")?1:-1),q=!j&&null!=C&&C.offsetWidth&&null!==(V=E.current[y])&&void 0!==V&&V.offsetWidth?((null==C?void 0:C.offsetWidth)-2*F*(R<3?R:3))/(null===(H=E.current[y])||void 0===H?void 0:H.offsetWidth):1;L.transform="translate3d(".concat(z,", ").concat(Y,"px, 0) scaleX(").concat(q,")")}else L.transform="translate3d(".concat(z,", 0, 0)")}return a.createElement("div",{ref:e,className:d()("".concat(u,"-notice-wrapper"),c,null==M?void 0:M.wrapper),style:(0,s.A)((0,s.A)((0,s.A)({},h),L),null==T?void 0:T.wrapper),onMouseEnter:function(){return P((function(t){return t.includes(y)?t:[].concat((0,r.A)(t),[y])}))},onMouseLeave:function(){return P((function(t){return t.filter((function(t){return t!==y}))}))}},a.createElement(v,(0,l.A)({},k,{ref:function(t){I>-1?E.current[y]=t:delete E.current[y]},prefixCls:u,classNames:M,styles:T,className:d()(_,null==S?void 0:S.notice),style:A,times:g,key:m,eventKey:m,onNoticeClose:b,hovering:D&&N.length>0})))}))};const S=a.forwardRef((function(t,e){var n=t.prefixCls,o=void 0===n?"rc-notification":n,l=t.container,c=t.motion,h=t.maxCount,d=t.className,f=t.style,p=t.onAllRemoved,m=t.stack,g=t.renderNotifications,v=a.useState([]),y=(0,i.A)(v,2),b=y[0],x=y[1],w=function(t){var e,n=b.find((function(e){return e.key===t}));null==n||null===(e=n.onClose)||void 0===e||e.call(n),x((function(e){return e.filter((function(e){return e.key!==t}))}))};a.useImperativeHandle(e,(function(){return{open:function(t){x((function(e){var n,i=(0,r.A)(e),o=i.findIndex((function(e){return e.key===t.key})),a=(0,s.A)({},t);o>=0?(a.times=((null===(n=e[o])||void 0===n?void 0:n.times)||0)+1,i[o]=a):(a.times=0,i.push(a));return h>0&&i.length>h&&(i=i.slice(-h)),i}))},close:function(t){w(t)},destroy:function(){x([])}}}));var S=a.useState({}),E=(0,i.A)(S,2),A=E[0],M=E[1];a.useEffect((function(){var t={};b.forEach((function(e){var n=e.placement,r=void 0===n?"topRight":n;r&&(t[r]=t[r]||[],t[r].push(e))})),Object.keys(A).forEach((function(e){t[e]=t[e]||[]})),M(t)}),[b]);var C=function(t){M((function(e){var n=(0,s.A)({},e);return(n[t]||[]).length||delete n[t],n}))},T=a.useRef(!1);if(a.useEffect((function(){Object.keys(A).length>0?T.current=!0:T.current&&(null==p||p(),T.current=!1)}),[A]),!l)return null;var k=Object.keys(A);return(0,u.createPortal)(a.createElement(a.Fragment,null,k.map((function(t){var e=A[t],n=a.createElement(_,{key:t,configList:e,placement:t,prefixCls:o,className:null==d?void 0:d(t),style:null==f?void 0:f(t),motion:c,onNoticeClose:w,onAllNoticeRemoved:C,stack:m});return g?g(n,{prefixCls:o,key:t}):n}))),l)}));var E=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],A=function(){return document.body},M=0;function C(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.getContainer,n=void 0===e?A:e,s=t.motion,u=t.prefixCls,l=t.maxCount,c=t.className,h=t.style,d=t.onAllRemoved,f=t.stack,p=t.renderNotifications,m=(0,o.A)(t,E),g=a.useState(),v=(0,i.A)(g,2),y=v[0],b=v[1],x=a.useRef(),w=a.createElement(S,{container:y,ref:x,prefixCls:u,motion:s,maxCount:l,className:c,style:h,onAllRemoved:d,stack:f,renderNotifications:p}),_=a.useState([]),C=(0,i.A)(_,2),T=C[0],k=C[1],I=a.useMemo((function(){return{open:function(t){var e=function(){for(var t={},e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.forEach((function(e){e&&Object.keys(e).forEach((function(n){var r=e[n];void 0!==r&&(t[n]=r)}))})),t}(m,t);null!==e.key&&void 0!==e.key||(e.key="rc-notification-".concat(M),M+=1),k((function(t){return[].concat((0,r.A)(t),[{type:"open",config:e}])}))},close:function(t){k((function(e){return[].concat((0,r.A)(e),[{type:"close",key:t}])}))},destroy:function(){k((function(t){return[].concat((0,r.A)(t),[{type:"destroy"}])}))}}}),[]);return a.useEffect((function(){b(n())})),a.useEffect((function(){x.current&&T.length&&(T.forEach((function(t){switch(t.type){case"open":x.current.open(t.config);break;case"close":x.current.close(t.key);break;case"destroy":x.current.destroy()}})),k((function(t){return t.filter((function(t){return!T.includes(t)}))})))}),[T]),[I,w]}},99591:(t,e,n)=>{"use strict";n.d(e,{A:()=>R});var r=n(58168),i=n(89379),o=n(5544),a=n(53986),s=n(96540),u=n(46942),l=n.n(u),c=n(18462),h=n(30981),d=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],f=void 0;function p(t,e){var n=t.prefixCls,o=t.invalidate,u=t.item,h=t.renderItem,p=t.responsive,m=t.responsiveDisabled,g=t.registerSize,v=t.itemKey,y=t.className,b=t.style,x=t.children,w=t.display,_=t.order,S=t.component,E=void 0===S?"div":S,A=(0,a.A)(t,d),M=p&&!w;function C(t){g(v,t)}s.useEffect((function(){return function(){C(null)}}),[]);var T,k=h&&u!==f?h(u):x;o||(T={opacity:M?0:1,height:M?0:f,overflowY:M?"hidden":f,order:p?_:f,pointerEvents:M?"none":f,position:M?"absolute":f});var I={};M&&(I["aria-hidden"]=!0);var N=s.createElement(E,(0,r.A)({className:l()(!o&&n,y),style:(0,i.A)((0,i.A)({},T),b)},I,A,{ref:e}),k);return p&&(N=s.createElement(c.A,{onResize:function(t){C(t.offsetWidth)},disabled:m},N)),N}var m=s.forwardRef(p);m.displayName="Item";const g=m;var v=n(26956),y=n(40961),b=n(25371);function x(){var t=s.useRef(null);return function(e){t.current||(t.current=[],function(t){if("undefined"==typeof MessageChannel)(0,b.A)(t);else{var e=new MessageChannel;e.port1.onmessage=function(){return t()},e.port2.postMessage(void 0)}}((function(){(0,y.unstable_batchedUpdates)((function(){t.current.forEach((function(t){t()})),t.current=null}))}))),t.current.push(e)}}function w(t,e){var n=s.useState(e),r=(0,o.A)(n,2),i=r[0],a=r[1];return[i,(0,v.A)((function(e){t((function(){a(e)}))}))]}var _=s.createContext(null),S=["component"],E=["className"],A=["className"],M=function(t,e){var n=s.useContext(_);if(!n){var i=t.component,o=void 0===i?"div":i,u=(0,a.A)(t,S);return s.createElement(o,(0,r.A)({},u,{ref:e}))}var c=n.className,h=(0,a.A)(n,E),d=t.className,f=(0,a.A)(t,A);return s.createElement(_.Provider,{value:null},s.createElement(g,(0,r.A)({ref:e,className:l()(c,d)},h,f)))},C=s.forwardRef(M);C.displayName="RawItem";const T=C;var k=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],I="responsive",N="invalidate";function P(t){return"+ ".concat(t.length," ...")}function O(t,e){var n=t.prefixCls,u=void 0===n?"rc-overflow":n,d=t.data,f=void 0===d?[]:d,p=t.renderItem,m=t.renderRawItem,v=t.itemKey,y=t.itemWidth,b=void 0===y?10:y,S=t.ssr,E=t.style,A=t.className,M=t.maxCount,C=t.renderRest,T=t.renderRawRest,O=t.suffix,L=t.component,R=void 0===L?"div":L,D=t.itemComponent,z=t.onVisibleChange,F=(0,a.A)(t,k),B="full"===S,U=x(),j=w(U,null),V=(0,o.A)(j,2),H=V[0],G=V[1],W=H||0,X=w(U,new Map),Y=(0,o.A)(X,2),q=Y[0],$=Y[1],K=w(U,0),Z=(0,o.A)(K,2),Q=Z[0],J=Z[1],tt=w(U,0),et=(0,o.A)(tt,2),nt=et[0],rt=et[1],it=w(U,0),ot=(0,o.A)(it,2),at=ot[0],st=ot[1],ut=(0,s.useState)(null),lt=(0,o.A)(ut,2),ct=lt[0],ht=lt[1],dt=(0,s.useState)(null),ft=(0,o.A)(dt,2),pt=ft[0],mt=ft[1],gt=s.useMemo((function(){return null===pt&&B?Number.MAX_SAFE_INTEGER:pt||0}),[pt,H]),vt=(0,s.useState)(!1),yt=(0,o.A)(vt,2),bt=yt[0],xt=yt[1],wt="".concat(u,"-item"),_t=Math.max(Q,nt),St=M===I,Et=f.length&&St,At=M===N,Mt=Et||"number"==typeof M&&f.length>M,Ct=(0,s.useMemo)((function(){var t=f;return Et?t=null===H&&B?f:f.slice(0,Math.min(f.length,W/b)):"number"==typeof M&&(t=f.slice(0,M)),t}),[f,b,H,M,Et]),Tt=(0,s.useMemo)((function(){return Et?f.slice(gt+1):f.slice(Ct.length)}),[f,Ct,Et,gt]),kt=(0,s.useCallback)((function(t,e){var n;return"function"==typeof v?v(t):null!==(n=v&&(null==t?void 0:t[v]))&&void 0!==n?n:e}),[v]),It=(0,s.useCallback)(p||function(t){return t},[p]);function Nt(t,e,n){(pt!==t||void 0!==e&&e!==ct)&&(mt(t),n||(xt(t<f.length-1),null==z||z(t)),void 0!==e&&ht(e))}function Pt(t,e){$((function(n){var r=new Map(n);return null===e?r.delete(t):r.set(t,e),r}))}function Ot(t){return q.get(kt(Ct[t],t))}(0,h.A)((function(){if(W&&"number"==typeof _t&&Ct){var t=at,e=Ct.length,n=e-1;if(!e)return void Nt(0,null);for(var r=0;r<e;r+=1){var i=Ot(r);if(B&&(i=i||0),void 0===i){Nt(r-1,void 0,!0);break}if(t+=i,0===n&&t<=W||r===n-1&&t+Ot(n)<=W){Nt(n,null);break}if(t+_t>W){Nt(r-1,t-i-at+nt);break}}O&&Ot(0)+at>W&&ht(null)}}),[W,q,nt,at,kt,Ct]);var Lt=bt&&!!Tt.length,Rt={};null!==ct&&Et&&(Rt={position:"absolute",left:ct,top:0});var Dt,zt={prefixCls:wt,responsive:Et,component:D,invalidate:At},Ft=m?function(t,e){var n=kt(t,e);return s.createElement(_.Provider,{key:n,value:(0,i.A)((0,i.A)({},zt),{},{order:e,item:t,itemKey:n,registerSize:Pt,display:e<=gt})},m(t,e))}:function(t,e){var n=kt(t,e);return s.createElement(g,(0,r.A)({},zt,{order:e,key:n,item:t,renderItem:It,itemKey:n,registerSize:Pt,display:e<=gt}))},Bt={order:Lt?gt:Number.MAX_SAFE_INTEGER,className:"".concat(wt,"-rest"),registerSize:function(t,e){rt(e),J(nt)},display:Lt};if(T)T&&(Dt=s.createElement(_.Provider,{value:(0,i.A)((0,i.A)({},zt),Bt)},T(Tt)));else{var Ut=C||P;Dt=s.createElement(g,(0,r.A)({},zt,Bt),"function"==typeof Ut?Ut(Tt):Ut)}var jt=s.createElement(R,(0,r.A)({className:l()(!At&&u,A),style:E,ref:e},F),Ct.map(Ft),Mt?Dt:null,O&&s.createElement(g,(0,r.A)({},zt,{responsive:St,responsiveDisabled:!Et,order:gt,className:"".concat(wt,"-suffix"),registerSize:function(t,e){st(e)},display:!0,style:Rt}),O));return St&&(jt=s.createElement(c.A,{onResize:function(t,e){G(e.clientWidth)},disabled:!Et},jt)),jt}var L=s.forwardRef(O);L.displayName="Overflow",L.Item=T,L.RESPONSIVE=I,L.INVALIDATE=N;const R=L},96069:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"}},64395:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"}},71559:(t,e,n)=>{"use strict";n.d(e,{jl:()=>E});var r=n(58168),i=n(89379),o=n(53986),a=n(96540),s=n(46942),u=n.n(s),l={percent:0,prefixCls:"rc-progress",strokeColor:"#2db7f5",strokeLinecap:"round",strokeWidth:1,trailColor:"#D9D9D9",trailWidth:1,gapPosition:"bottom"},c=function(){var t=(0,a.useRef)([]),e=(0,a.useRef)(null);return(0,a.useEffect)((function(){var n=Date.now(),r=!1;t.current.forEach((function(t){if(t){r=!0;var i=t.style;i.transitionDuration=".3s, .3s, .3s, .06s",e.current&&n-e.current<100&&(i.transitionDuration="0s, 0s")}})),r&&(e.current=Date.now())})),t.current};var h=n(82284),d=n(5544),f=n(20998),p=0,m=(0,f.A)();const g=function(t){var e=a.useState(),n=(0,d.A)(e,2),r=n[0],i=n[1];return a.useEffect((function(){var t;i("rc_progress_".concat((m?(t=p,p+=1):t="TEST_OR_SSR",t)))}),[]),t||r};var v=function(t){var e=t.bg,n=t.children;return a.createElement("div",{style:{width:"100%",height:"100%",background:e}},n)};function y(t,e){return Object.keys(t).map((function(n){var r=parseFloat(n),i="".concat(Math.floor(r*e),"%");return"".concat(t[n]," ").concat(i)}))}const b=a.forwardRef((function(t,e){var n=t.prefixCls,r=t.color,i=t.gradientId,o=t.radius,s=t.style,u=t.ptg,l=t.strokeLinecap,c=t.strokeWidth,d=t.size,f=t.gapDegree,p=r&&"object"===(0,h.A)(r),m=p?"#FFF":void 0,g=d/2,b=a.createElement("circle",{className:"".concat(n,"-circle-path"),r:o,cx:g,cy:g,stroke:m,strokeLinecap:l,strokeWidth:c,opacity:0===u?0:1,style:s,ref:e});if(!p)return b;var x="".concat(i,"-conic"),w=f?"".concat(180+f/2,"deg"):"0deg",_=y(r,(360-f)/360),S=y(r,1),E="conic-gradient(from ".concat(w,", ").concat(_.join(", "),")"),A="linear-gradient(to ".concat(f?"bottom":"top",", ").concat(S.join(", "),")");return a.createElement(a.Fragment,null,a.createElement("mask",{id:x},b),a.createElement("foreignObject",{x:0,y:0,width:d,height:d,mask:"url(#".concat(x,")")},a.createElement(v,{bg:A},a.createElement(v,{bg:E}))))}));var x=100,w=function(t,e,n,r,i,o,a,s,u,l){var c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,h=n/100*360*((360-o)/360),d=0===o?0:{bottom:0,top:180,left:90,right:-90}[a],f=(100-r)/100*e;"round"===u&&100!==r&&(f+=l/2)>=e&&(f=e-.01);return{stroke:"string"==typeof s?s:void 0,strokeDasharray:"".concat(e,"px ").concat(t),strokeDashoffset:f+c,transform:"rotate(".concat(i+h+d,"deg)"),transformOrigin:"".concat(50,"px ").concat(50,"px"),transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s, opacity .3s ease 0s",fillOpacity:0}},_=["id","prefixCls","steps","strokeWidth","trailWidth","gapDegree","gapPosition","trailColor","strokeLinecap","style","className","strokeColor","percent"];function S(t){var e=null!=t?t:[];return Array.isArray(e)?e:[e]}const E=function(t){var e,n,s,d=(0,i.A)((0,i.A)({},l),t),f=d.id,p=d.prefixCls,m=d.steps,v=d.strokeWidth,y=d.trailWidth,E=d.gapDegree,A=void 0===E?0:E,M=d.gapPosition,C=d.trailColor,T=d.strokeLinecap,k=d.style,I=d.className,N=d.strokeColor,P=d.percent,O=(0,o.A)(d,_),L=g(f),R="".concat(L,"-gradient"),D=50-v/2,z=2*Math.PI*D,F=A>0?90+A/2:-90,B=z*((360-A)/360),U="object"===(0,h.A)(m)?m:{count:m,gap:2},j=U.count,V=U.gap,H=S(P),G=S(N),W=G.find((function(t){return t&&"object"===(0,h.A)(t)})),X=W&&"object"===(0,h.A)(W)?"butt":T,Y=w(z,B,0,100,F,A,M,C,X,v),q=c();return a.createElement("svg",(0,r.A)({className:u()("".concat(p,"-circle"),I),viewBox:"0 0 ".concat(x," ").concat(x),style:k,id:f,role:"presentation"},O),!j&&a.createElement("circle",{className:"".concat(p,"-circle-trail"),r:D,cx:50,cy:50,stroke:C,strokeLinecap:X,strokeWidth:y||v,style:Y}),j?(e=Math.round(j*(H[0]/100)),n=100/j,s=0,new Array(j).fill(null).map((function(t,r){var i=r<=e-1?G[0]:C,o=i&&"object"===(0,h.A)(i)?"url(#".concat(R,")"):void 0,u=w(z,B,s,n,F,A,M,i,"butt",v,V);return s+=100*(B-u.strokeDashoffset+V)/B,a.createElement("circle",{key:r,className:"".concat(p,"-circle-path"),r:D,cx:50,cy:50,stroke:o,strokeWidth:v,opacity:1,style:u,ref:function(t){q[r]=t}})}))):function(){var t=0;return H.map((function(e,n){var r=G[n]||G[G.length-1],i=w(z,B,t,e,F,A,M,r,X,v);return t+=e,a.createElement(b,{key:n,color:r,ptg:e,radius:D,prefixCls:p,gradientId:R,style:i,strokeLinecap:X,strokeWidth:v,gapDegree:A,ref:function(t){q[n]=t},size:x})})).reverse()}())}},18462:(t,e,n)=>{"use strict";n.d(e,{A:()=>G});var r=n(58168),i=n(96540),o=n(82546),a=(n(68210),n(89379)),s=n(82284),u=n(66588),l=n(8719),c=i.createContext(null);var h=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var n=-1;return t.some((function(t,r){return t[0]===e&&(n=r,!0)})),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),r=this.__entries__[n];return r&&r[1]},e.prototype.set=function(e,n){var r=t(this.__entries__,e);~r?this.__entries__[r][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,r=t(n,e);~r&&n.splice(r,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];t.call(e,i[1],i[0])}},e}()}(),d="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,f=void 0!==n.g&&n.g.Math===Math?n.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),p="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(f):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)};var m=["top","right","bottom","left","width","height","size","weight"],g="undefined"!=typeof MutationObserver,v=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var n=!1,r=!1,i=0;function o(){n&&(n=!1,t()),r&&s()}function a(){p(o)}function s(){var t=Date.now();if(n){if(t-i<2)return;r=!0}else n=!0,r=!1,setTimeout(a,e);i=t}return s}(this.refresh.bind(this),20)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){d&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),g?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){d&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;m.some((function(t){return!!~n.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),y=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},b=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||f},x=M(0,0,0,0);function w(t){return parseFloat(t)||0}function _(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce((function(e,n){return e+w(t["border-"+n+"-width"])}),0)}function S(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return x;var r=b(t).getComputedStyle(t),i=function(t){for(var e={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],o=t["padding-"+i];e[i]=w(o)}return e}(r),o=i.left+i.right,a=i.top+i.bottom,s=w(r.width),u=w(r.height);if("border-box"===r.boxSizing&&(Math.round(s+o)!==e&&(s-=_(r,"left","right")+o),Math.round(u+a)!==n&&(u-=_(r,"top","bottom")+a)),!function(t){return t===b(t).document.documentElement}(t)){var l=Math.round(s+o)-e,c=Math.round(u+a)-n;1!==Math.abs(l)&&(s-=l),1!==Math.abs(c)&&(u-=c)}return M(i.left,i.top,s,u)}var E="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof b(t).SVGGraphicsElement}:function(t){return t instanceof b(t).SVGElement&&"function"==typeof t.getBBox};function A(t){return d?E(t)?function(t){var e=t.getBBox();return M(0,0,e.width,e.height)}(t):S(t):x}function M(t,e,n,r){return{x:t,y:e,width:n,height:r}}var C=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=M(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=A(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),T=function(t,e){var n,r,i,o,a,s,u,l=(r=(n=e).x,i=n.y,o=n.width,a=n.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,u=Object.create(s.prototype),y(u,{x:r,y:i,width:o,height:a,top:i,right:r+o,bottom:a+i,left:r}),u);y(this,{target:t,contentRect:l})},k=function(){function t(t,e,n){if(this.activeObservations_=[],this.observations_=new h,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof b(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new C(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof b(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new T(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),I="undefined"!=typeof WeakMap?new WeakMap:new h,N=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=v.getInstance(),r=new k(e,n,this);I.set(this,r)};["observe","unobserve","disconnect"].forEach((function(t){N.prototype[t]=function(){var e;return(e=I.get(this))[t].apply(e,arguments)}}));const P=void 0!==f.ResizeObserver?f.ResizeObserver:N;var O=new Map;var L=new P((function(t){t.forEach((function(t){var e,n=t.target;null===(e=O.get(n))||void 0===e||e.forEach((function(t){return t(n)}))}))}));var R=n(23029),D=n(92901),z=n(15361),F=n(29426),B=function(t){(0,z.A)(n,t);var e=(0,F.A)(n);function n(){return(0,R.A)(this,n),e.apply(this,arguments)}return(0,D.A)(n,[{key:"render",value:function(){return this.props.children}}]),n}(i.Component);function U(t,e){var n=t.children,r=t.disabled,o=i.useRef(null),h=i.useRef(null),d=i.useContext(c),f="function"==typeof n,p=f?n(o):n,m=i.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),g=!f&&i.isValidElement(p)&&(0,l.f3)(p),v=g?p.ref:null,y=(0,l.xK)(v,o),b=function(){var t;return(0,u.A)(o.current)||(o.current&&"object"===(0,s.A)(o.current)?(0,u.A)(null===(t=o.current)||void 0===t?void 0:t.nativeElement):null)||(0,u.A)(h.current)};i.useImperativeHandle(e,(function(){return b()}));var x=i.useRef(t);x.current=t;var w=i.useCallback((function(t){var e=x.current,n=e.onResize,r=e.data,i=t.getBoundingClientRect(),o=i.width,s=i.height,u=t.offsetWidth,l=t.offsetHeight,c=Math.floor(o),h=Math.floor(s);if(m.current.width!==c||m.current.height!==h||m.current.offsetWidth!==u||m.current.offsetHeight!==l){var f={width:c,height:h,offsetWidth:u,offsetHeight:l};m.current=f;var p=u===Math.round(o)?o:u,g=l===Math.round(s)?s:l,v=(0,a.A)((0,a.A)({},f),{},{offsetWidth:p,offsetHeight:g});null==d||d(v,t,r),n&&Promise.resolve().then((function(){n(v,t)}))}}),[]);return i.useEffect((function(){var t,e,n=b();return n&&!r&&(t=n,e=w,O.has(t)||(O.set(t,new Set),L.observe(t)),O.get(t).add(e)),function(){return function(t,e){O.has(t)&&(O.get(t).delete(e),O.get(t).size||(L.unobserve(t),O.delete(t)))}(n,w)}}),[o.current,r]),i.createElement(B,{ref:h},g?i.cloneElement(p,{ref:y}):p)}const j=i.forwardRef(U);function V(t,e){var n=t.children;return("function"==typeof n?[n]:(0,o.A)(n)).map((function(n,o){var a=(null==n?void 0:n.key)||"".concat("rc-observer-key","-").concat(o);return i.createElement(j,(0,r.A)({},t,{key:a,ref:0===o?e:void 0}),n)}))}var H=i.forwardRef(V);H.Collection=function(t){var e=t.children,n=t.onBatchResize,r=i.useRef(0),o=i.useRef([]),a=i.useContext(c),s=i.useCallback((function(t,e,i){r.current+=1;var s=r.current;o.current.push({size:t,element:e,data:i}),Promise.resolve().then((function(){s===r.current&&(null==n||n(o.current),o.current=[])})),null==a||a(t,e,i)}),[n,a]);return i.createElement(c.Provider,{value:s},e)};const G=H},63188:(t,e,n)=>{"use strict";n.d(e,{JM:()=>Q,c$:()=>tt,Ay:()=>qt});var r=n(58168),i=n(60436),o=n(64467),a=n(89379),s=n(5544),u=n(53986),l=n(82284),c=n(12533),h=n(68210),d=n(96540),f=n(46942),p=n.n(f),m=n(30981),g=n(68430),v=n(16928),y=n(8719);const b=function(t){var e=t.className,n=t.customizeIcon,r=t.customizeIconProps,i=t.children,o=t.onMouseDown,a=t.onClick,s="function"==typeof n?n(r):n;return d.createElement("span",{className:e,onMouseDown:function(t){t.preventDefault(),null==o||o(t)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:a,"aria-hidden":!0},void 0!==s?s:d.createElement("span",{className:p()(e.split(/\s+/).map((function(t){return"".concat(t,"-icon")})))},i))};var x=d.createContext(null);function w(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250,e=d.useRef(null),n=d.useRef(null);return d.useEffect((function(){return function(){window.clearTimeout(n.current)}}),[]),[function(){return e.current},function(r){(r||null===e.current)&&(e.current=r),window.clearTimeout(n.current),n.current=window.setTimeout((function(){e.current=null}),t)}]}var _=n(72065),S=n(99591),E=function(t,e){var n,r=t.prefixCls,i=t.id,o=t.inputElement,s=t.disabled,u=t.tabIndex,l=t.autoFocus,c=t.autoComplete,f=t.editable,m=t.activeDescendantId,g=t.value,v=t.maxLength,b=t.onKeyDown,x=t.onMouseDown,w=t.onChange,_=t.onPaste,S=t.onCompositionStart,E=t.onCompositionEnd,A=t.open,M=t.attrs,C=o||d.createElement("input",null),T=C,k=T.ref,I=T.props,N=I.onKeyDown,P=I.onChange,O=I.onMouseDown,L=I.onCompositionStart,R=I.onCompositionEnd,D=I.style;return(0,h.$e)(!("maxLength"in C.props),"Passing 'maxLength' to input element directly may not work because input in BaseSelect is controlled."),C=d.cloneElement(C,(0,a.A)((0,a.A)((0,a.A)({type:"search"},I),{},{id:i,ref:(0,y.K4)(e,k),disabled:s,tabIndex:u,autoComplete:c||"off",autoFocus:l,className:p()("".concat(r,"-selection-search-input"),null===(n=C)||void 0===n||null===(n=n.props)||void 0===n?void 0:n.className),role:"combobox","aria-expanded":A||!1,"aria-haspopup":"listbox","aria-owns":"".concat(i,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(i,"_list"),"aria-activedescendant":A?m:void 0},M),{},{value:f?g:"",maxLength:v,readOnly:!f,unselectable:f?null:"on",style:(0,a.A)((0,a.A)({},D),{},{opacity:f?null:0}),onKeyDown:function(t){b(t),N&&N(t)},onMouseDown:function(t){x(t),O&&O(t)},onChange:function(t){w(t),P&&P(t)},onCompositionStart:function(t){S(t),L&&L(t)},onCompositionEnd:function(t){E(t),R&&R(t)},onPaste:_}))};const A=d.forwardRef(E);function M(t){return Array.isArray(t)?t:void 0!==t?[t]:[]}var C="undefined"!=typeof window&&window.document&&window.document.documentElement;function T(t){return["string","number"].includes((0,l.A)(t))}function k(t){var e=void 0;return t&&(T(t.title)?e=t.title.toString():T(t.label)&&(e=t.label.toString())),e}function I(t){var e;return null!==(e=t.key)&&void 0!==e?e:t.value}var N=function(t){t.preventDefault(),t.stopPropagation()};const P=function(t){var e,n,r=t.id,i=t.prefixCls,a=t.values,u=t.open,l=t.searchValue,c=t.autoClearSearchValue,h=t.inputRef,f=t.placeholder,m=t.disabled,g=t.mode,v=t.showSearch,y=t.autoFocus,x=t.autoComplete,w=t.activeDescendantId,E=t.tabIndex,M=t.removeIcon,T=t.maxTagCount,P=t.maxTagTextLength,O=t.maxTagPlaceholder,L=void 0===O?function(t){return"+ ".concat(t.length," ...")}:O,R=t.tagRender,D=t.onToggleOpen,z=t.onRemove,F=t.onInputChange,B=t.onInputPaste,U=t.onInputKeyDown,j=t.onInputMouseDown,V=t.onInputCompositionStart,H=t.onInputCompositionEnd,G=d.useRef(null),W=(0,d.useState)(0),X=(0,s.A)(W,2),Y=X[0],q=X[1],$=(0,d.useState)(!1),K=(0,s.A)($,2),Z=K[0],Q=K[1],J="".concat(i,"-selection"),tt=u||"multiple"===g&&!1===c||"tags"===g?l:"",et="tags"===g||"multiple"===g&&!1===c||v&&(u||Z);e=function(){q(G.current.scrollWidth)},n=[tt],C?d.useLayoutEffect(e,n):d.useEffect(e,n);var nt=function(t,e,n,r,i){return d.createElement("span",{title:k(t),className:p()("".concat(J,"-item"),(0,o.A)({},"".concat(J,"-item-disabled"),n))},d.createElement("span",{className:"".concat(J,"-item-content")},e),r&&d.createElement(b,{className:"".concat(J,"-item-remove"),onMouseDown:N,onClick:i,customizeIcon:M},""))},rt=d.createElement("div",{className:"".concat(J,"-search"),style:{width:Y},onFocus:function(){Q(!0)},onBlur:function(){Q(!1)}},d.createElement(A,{ref:h,open:u,prefixCls:i,id:r,inputElement:null,disabled:m,autoFocus:y,autoComplete:x,editable:et,activeDescendantId:w,value:tt,onKeyDown:U,onMouseDown:j,onChange:F,onPaste:B,onCompositionStart:V,onCompositionEnd:H,tabIndex:E,attrs:(0,_.A)(t,!0)}),d.createElement("span",{ref:G,className:"".concat(J,"-search-mirror"),"aria-hidden":!0},tt,"")),it=d.createElement(S.A,{prefixCls:"".concat(J,"-overflow"),data:a,renderItem:function(t){var e=t.disabled,n=t.label,r=t.value,i=!m&&!e,o=n;if("number"==typeof P&&("string"==typeof n||"number"==typeof n)){var a=String(o);a.length>P&&(o="".concat(a.slice(0,P),"..."))}var s=function(e){e&&e.stopPropagation(),z(t)};return"function"==typeof R?function(t,e,n,r,i){return d.createElement("span",{onMouseDown:function(t){N(t),D(!u)}},R({label:e,value:t,disabled:n,closable:r,onClose:i}))}(r,o,e,i,s):nt(t,o,e,i,s)},renderRest:function(t){var e="function"==typeof L?L(t):L;return nt({title:e},e,!1)},suffix:rt,itemKey:I,maxCount:T});return d.createElement(d.Fragment,null,it,!a.length&&!tt&&d.createElement("span",{className:"".concat(J,"-placeholder")},f))};const O=function(t){var e=t.inputElement,n=t.prefixCls,r=t.id,i=t.inputRef,o=t.disabled,a=t.autoFocus,u=t.autoComplete,l=t.activeDescendantId,c=t.mode,h=t.open,f=t.values,p=t.placeholder,m=t.tabIndex,g=t.showSearch,v=t.searchValue,y=t.activeValue,b=t.maxLength,x=t.onInputKeyDown,w=t.onInputMouseDown,S=t.onInputChange,E=t.onInputPaste,M=t.onInputCompositionStart,C=t.onInputCompositionEnd,T=t.title,I=d.useState(!1),N=(0,s.A)(I,2),P=N[0],O=N[1],L="combobox"===c,R=L||g,D=f[0],z=v||"";L&&y&&!P&&(z=y),d.useEffect((function(){L&&O(!1)}),[L,y]);var F=!("combobox"!==c&&!h&&!g)&&!!z,B=void 0===T?k(D):T,U=d.useMemo((function(){return D?null:d.createElement("span",{className:"".concat(n,"-selection-placeholder"),style:F?{visibility:"hidden"}:void 0},p)}),[D,F,p,n]);return d.createElement(d.Fragment,null,d.createElement("span",{className:"".concat(n,"-selection-search")},d.createElement(A,{ref:i,prefixCls:n,id:r,open:h,inputElement:e,disabled:o,autoFocus:a,autoComplete:u,editable:R,activeDescendantId:l,value:z,onKeyDown:x,onMouseDown:w,onChange:function(t){O(!0),S(t)},onPaste:E,onCompositionStart:M,onCompositionEnd:C,tabIndex:m,attrs:(0,_.A)(t,!0),maxLength:L?b:void 0})),!L&&D?d.createElement("span",{className:"".concat(n,"-selection-item"),title:B,style:F?{visibility:"hidden"}:void 0},D.label):null,U)};var L=function(t,e){var n=(0,d.useRef)(null),i=(0,d.useRef)(!1),o=t.prefixCls,a=t.open,u=t.mode,l=t.showSearch,c=t.tokenWithEnter,h=t.autoClearSearchValue,f=t.onSearch,p=t.onSearchSubmit,m=t.onToggleOpen,g=t.onInputKeyDown,y=t.domRef;d.useImperativeHandle(e,(function(){return{focus:function(t){n.current.focus(t)},blur:function(){n.current.blur()}}}));var b=w(0),x=(0,s.A)(b,2),_=x[0],S=x[1],E=(0,d.useRef)(null),A=function(t){!1!==f(t,!0,i.current)&&m(!0)},M={inputRef:n,onInputKeyDown:function(t){var e,n=t.which;n!==v.A.UP&&n!==v.A.DOWN||t.preventDefault(),g&&g(t),n!==v.A.ENTER||"tags"!==u||i.current||a||null==p||p(t.target.value),e=n,[v.A.ESC,v.A.SHIFT,v.A.BACKSPACE,v.A.TAB,v.A.WIN_KEY,v.A.ALT,v.A.META,v.A.WIN_KEY_RIGHT,v.A.CTRL,v.A.SEMICOLON,v.A.EQUALS,v.A.CAPS_LOCK,v.A.CONTEXT_MENU,v.A.F1,v.A.F2,v.A.F3,v.A.F4,v.A.F5,v.A.F6,v.A.F7,v.A.F8,v.A.F9,v.A.F10,v.A.F11,v.A.F12].includes(e)||m(!0)},onInputMouseDown:function(){S(!0)},onInputChange:function(t){var e=t.target.value;if(c&&E.current&&/[\r\n]/.test(E.current)){var n=E.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");e=e.replace(n,E.current)}E.current=null,A(e)},onInputPaste:function(t){var e=t.clipboardData,n=null==e?void 0:e.getData("text");E.current=n||""},onInputCompositionStart:function(){i.current=!0},onInputCompositionEnd:function(t){i.current=!1,"combobox"!==u&&A(t.target.value)}},C="multiple"===u||"tags"===u?d.createElement(P,(0,r.A)({},t,M)):d.createElement(O,(0,r.A)({},t,M));return d.createElement("div",{ref:y,className:"".concat(o,"-selector"),onClick:function(t){t.target!==n.current&&(void 0!==document.body.style.msTouchAction?setTimeout((function(){n.current.focus()})):n.current.focus())},onMouseDown:function(t){var e=_();t.target===n.current||e||"combobox"===u||t.preventDefault(),("combobox"===u||l&&e)&&a||(a&&!1!==h&&f("",!0,!1),m())}},C)};const R=d.forwardRef(L);var D=n(62427),z=["prefixCls","disabled","visible","children","popupElement","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],F=function(t,e){var n=t.prefixCls,i=(t.disabled,t.visible),s=t.children,l=t.popupElement,c=t.animation,h=t.transitionName,f=t.dropdownStyle,m=t.dropdownClassName,g=t.direction,v=void 0===g?"ltr":g,y=t.placement,b=t.builtinPlacements,x=t.dropdownMatchSelectWidth,w=t.dropdownRender,_=t.dropdownAlign,S=t.getPopupContainer,E=t.empty,A=t.getTriggerDOMNode,M=t.onPopupVisibleChange,C=t.onPopupMouseEnter,T=(0,u.A)(t,z),k="".concat(n,"-dropdown"),I=l;w&&(I=w(l));var N=d.useMemo((function(){return b||function(t){var e=!0===t?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:e,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:e,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:e,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:e,adjustY:1},htmlRegion:"scroll"}}}(x)}),[b,x]),P=c?"".concat(k,"-").concat(c):h,O="number"==typeof x,L=d.useMemo((function(){return O?null:!1===x?"minWidth":"width"}),[x,O]),R=f;O&&(R=(0,a.A)((0,a.A)({},R),{},{width:x}));var F=d.useRef(null);return d.useImperativeHandle(e,(function(){return{getPopupElement:function(){var t;return null===(t=F.current)||void 0===t?void 0:t.popupElement}}})),d.createElement(D.A,(0,r.A)({},T,{showAction:M?["click"]:[],hideAction:M?["click"]:[],popupPlacement:y||("rtl"===v?"bottomRight":"bottomLeft"),builtinPlacements:N,prefixCls:k,popupTransitionName:P,popup:d.createElement("div",{onMouseEnter:C},I),ref:F,stretch:L,popupAlign:_,popupVisible:i,getPopupContainer:S,popupClassName:p()(m,(0,o.A)({},"".concat(k,"-empty"),E)),popupStyle:R,getTriggerDOMNode:A,onPopupVisibleChange:M}),s)};const B=d.forwardRef(F);var U=n(87695);function j(t,e){var n,r=t.key;return"value"in t&&(n=t.value),null!=r?r:void 0!==n?n:"rc-index-key-".concat(e)}function V(t){return void 0!==t&&!Number.isNaN(t)}function H(t,e){var n=t||{},r=n.label||(e?"children":"label");return{label:r,value:n.value||"value",options:n.options||"options",groupLabel:n.groupLabel||r}}function G(t){var e=(0,a.A)({},t);return"props"in e||Object.defineProperty(e,"props",{get:function(){return(0,h.Ay)(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),e}}),e}const W=d.createContext(null);var X=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","suffixIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],Y=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"],q=function(t){return"tags"===t||"multiple"===t},$=d.forwardRef((function(t,e){var n,h=t.id,f=t.prefixCls,_=t.className,S=t.showSearch,E=t.tagRender,A=t.direction,M=t.omitDomProps,C=t.displayValues,T=t.onDisplayValuesChange,k=t.emptyOptions,I=t.notFoundContent,N=void 0===I?"Not Found":I,P=t.onClear,O=t.mode,L=t.disabled,D=t.loading,z=t.getInputElement,F=t.getRawInputElement,j=t.open,H=t.defaultOpen,G=t.onDropdownVisibleChange,$=t.activeValue,K=t.onActiveValueChange,Z=t.activeDescendantId,Q=t.searchValue,J=t.autoClearSearchValue,tt=t.onSearch,et=t.onSearchSplit,nt=t.tokenSeparators,rt=t.allowClear,it=t.suffixIcon,ot=t.clearIcon,at=t.OptionList,st=t.animation,ut=t.transitionName,lt=t.dropdownStyle,ct=t.dropdownClassName,ht=t.dropdownMatchSelectWidth,dt=t.dropdownRender,ft=t.dropdownAlign,pt=t.placement,mt=t.builtinPlacements,gt=t.getPopupContainer,vt=t.showAction,yt=void 0===vt?[]:vt,bt=t.onFocus,xt=t.onBlur,wt=t.onKeyUp,_t=t.onKeyDown,St=t.onMouseDown,Et=(0,u.A)(t,X),At=q(O),Mt=(void 0!==S?S:At)||"combobox"===O,Ct=(0,a.A)({},Et);Y.forEach((function(t){delete Ct[t]})),null==M||M.forEach((function(t){delete Ct[t]}));var Tt=d.useState(!1),kt=(0,s.A)(Tt,2),It=kt[0],Nt=kt[1];d.useEffect((function(){Nt((0,g.A)())}),[]);var Pt=d.useRef(null),Ot=d.useRef(null),Lt=d.useRef(null),Rt=d.useRef(null),Dt=d.useRef(null),zt=d.useRef(!1),Ft=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=d.useState(!1),n=(0,s.A)(e,2),r=n[0],i=n[1],o=d.useRef(null),a=function(){window.clearTimeout(o.current)};return d.useEffect((function(){return a}),[]),[r,function(e,n){a(),o.current=window.setTimeout((function(){i(e),n&&n()}),t)},a]}(),Bt=(0,s.A)(Ft,3),Ut=Bt[0],jt=Bt[1],Vt=Bt[2];d.useImperativeHandle(e,(function(){var t,e;return{focus:null===(t=Rt.current)||void 0===t?void 0:t.focus,blur:null===(e=Rt.current)||void 0===e?void 0:e.blur,scrollTo:function(t){var e;return null===(e=Dt.current)||void 0===e?void 0:e.scrollTo(t)}}}));var Ht=d.useMemo((function(){var t;if("combobox"!==O)return Q;var e=null===(t=C[0])||void 0===t?void 0:t.value;return"string"==typeof e||"number"==typeof e?String(e):""}),[Q,O,C]),Gt="combobox"===O&&"function"==typeof z&&z()||null,Wt="function"==typeof F&&F(),Xt=(0,y.xK)(Ot,null==Wt||null===(n=Wt.props)||void 0===n?void 0:n.ref),Yt=d.useState(!1),qt=(0,s.A)(Yt,2),$t=qt[0],Kt=qt[1];(0,m.A)((function(){Kt(!0)}),[]);var Zt=(0,c.A)(!1,{defaultValue:H,value:j}),Qt=(0,s.A)(Zt,2),Jt=Qt[0],te=Qt[1],ee=!!$t&&Jt,ne=!N&&k;(L||ne&&ee&&"combobox"===O)&&(ee=!1);var re=!ne&&ee,ie=d.useCallback((function(t){var e=void 0!==t?t:!ee;L||(te(e),ee!==e&&(null==G||G(e)))}),[L,ee,te,G]),oe=d.useMemo((function(){return(nt||[]).some((function(t){return["\n","\r\n"].includes(t)}))}),[nt]),ae=d.useContext(W)||{},se=ae.maxCount,ue=ae.rawValues,le=function(t,e,n){if(!(At&&V(se)&&(null==ue?void 0:ue.size)>=se)){var r=!0,o=t;null==K||K(null);var a=function(t,e,n){if(!e||!e.length)return null;var r=!1,o=function t(e,n){var o=(0,U.A)(n),a=o[0],s=o.slice(1);if(!a)return[e];var u=e.split(a);return r=r||u.length>1,u.reduce((function(e,n){return[].concat((0,i.A)(e),(0,i.A)(t(n,s)))}),[]).filter(Boolean)}(t,e);return r?void 0!==n?o.slice(0,n):o:null}(t,nt,V(se)?se-ue.size:void 0),s=n?null:a;return"combobox"!==O&&s&&(o="",null==et||et(s),ie(!1),r=!1),tt&&Ht!==o&&tt(o,{source:e?"typing":"effect"}),r}};d.useEffect((function(){ee||At||"combobox"===O||le("",!1,!1)}),[ee]),d.useEffect((function(){Jt&&L&&te(!1),L&&!zt.current&&jt(!1)}),[L]);var ce=w(),he=(0,s.A)(ce,2),de=he[0],fe=he[1],pe=d.useRef(!1),me=[];d.useEffect((function(){return function(){me.forEach((function(t){return clearTimeout(t)})),me.splice(0,me.length)}}),[]);var ge,ve=d.useState({}),ye=(0,s.A)(ve,2)[1];Wt&&(ge=function(t){ie(t)}),function(t,e,n,r){var i=d.useRef(null);i.current={open:e,triggerOpen:n,customizedTrigger:r},d.useEffect((function(){function e(e){var n;if(null===(n=i.current)||void 0===n||!n.customizedTrigger){var r=e.target;r.shadowRoot&&e.composed&&(r=e.composedPath()[0]||r),i.current.open&&t().filter((function(t){return t})).every((function(t){return!t.contains(r)&&t!==r}))&&i.current.triggerOpen(!1)}}return window.addEventListener("mousedown",e),function(){return window.removeEventListener("mousedown",e)}}),[])}((function(){var t;return[Pt.current,null===(t=Lt.current)||void 0===t?void 0:t.getPopupElement()]}),re,ie,!!Wt);var be,xe=d.useMemo((function(){return(0,a.A)((0,a.A)({},t),{},{notFoundContent:N,open:ee,triggerOpen:re,id:h,showSearch:Mt,multiple:At,toggleOpen:ie})}),[t,N,re,ee,h,Mt,At,ie]),we=!!it||D;we&&(be=d.createElement(b,{className:p()("".concat(f,"-arrow"),(0,o.A)({},"".concat(f,"-arrow-loading"),D)),customizeIcon:it,customizeIconProps:{loading:D,searchValue:Ht,open:ee,focused:Ut,showSearch:Mt}}));var _e,Se=function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6?arguments[6]:void 0,s=arguments.length>7?arguments[7]:void 0,u=d.useMemo((function(){return"object"===(0,l.A)(r)?r.clearIcon:i||void 0}),[r,i]);return{allowClear:d.useMemo((function(){return!(o||!r||!n.length&&!a||"combobox"===s&&""===a)}),[r,o,n.length,a,s]),clearIcon:d.createElement(b,{className:"".concat(t,"-clear"),onMouseDown:e,customizeIcon:u},"")}}(f,(function(){var t;null==P||P(),null===(t=Rt.current)||void 0===t||t.focus(),T([],{type:"clear",values:C}),le("",!1,!1)}),C,rt,ot,L,Ht,O),Ee=Se.allowClear,Ae=Se.clearIcon,Me=d.createElement(at,{ref:Dt}),Ce=p()(f,_,(0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)({},"".concat(f,"-focused"),Ut),"".concat(f,"-multiple"),At),"".concat(f,"-single"),!At),"".concat(f,"-allow-clear"),rt),"".concat(f,"-show-arrow"),we),"".concat(f,"-disabled"),L),"".concat(f,"-loading"),D),"".concat(f,"-open"),ee),"".concat(f,"-customize-input"),Gt),"".concat(f,"-show-search"),Mt)),Te=d.createElement(B,{ref:Lt,disabled:L,prefixCls:f,visible:re,popupElement:Me,animation:st,transitionName:ut,dropdownStyle:lt,dropdownClassName:ct,direction:A,dropdownMatchSelectWidth:ht,dropdownRender:dt,dropdownAlign:ft,placement:pt,builtinPlacements:mt,getPopupContainer:gt,empty:k,getTriggerDOMNode:function(){return Ot.current},onPopupVisibleChange:ge,onPopupMouseEnter:function(){ye({})}},Wt?d.cloneElement(Wt,{ref:Xt}):d.createElement(R,(0,r.A)({},t,{domRef:Ot,prefixCls:f,inputElement:Gt,ref:Rt,id:h,showSearch:Mt,autoClearSearchValue:J,mode:O,activeDescendantId:Z,tagRender:E,values:C,open:ee,onToggleOpen:ie,activeValue:$,searchValue:Ht,onSearch:le,onSearchSubmit:function(t){t&&t.trim()&&tt(t,{source:"submit"})},onRemove:function(t){var e=C.filter((function(e){return e!==t}));T(e,{type:"remove",values:[t]})},tokenWithEnter:oe})));return _e=Wt?Te:d.createElement("div",(0,r.A)({className:Ce},Ct,{ref:Pt,onMouseDown:function(t){var e,n=t.target,r=null===(e=Lt.current)||void 0===e?void 0:e.getPopupElement();if(r&&r.contains(n)){var i=setTimeout((function(){var t,e=me.indexOf(i);-1!==e&&me.splice(e,1),Vt(),It||r.contains(document.activeElement)||null===(t=Rt.current)||void 0===t||t.focus()}));me.push(i)}for(var o=arguments.length,a=new Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];null==St||St.apply(void 0,[t].concat(a))},onKeyDown:function(t){var e,n=de(),r=t.which;if(r===v.A.ENTER&&("combobox"!==O&&t.preventDefault(),ee||ie(!0)),fe(!!Ht),r===v.A.BACKSPACE&&!n&&At&&!Ht&&C.length){for(var o=(0,i.A)(C),a=null,s=o.length-1;s>=0;s-=1){var u=o[s];if(!u.disabled){o.splice(s,1),a=u;break}}a&&T(o,{type:"remove",values:[a]})}for(var l=arguments.length,c=new Array(l>1?l-1:0),h=1;h<l;h++)c[h-1]=arguments[h];ee&&(null===(e=Dt.current)||void 0===e||e.onKeyDown.apply(e,[t].concat(c))),null==_t||_t.apply(void 0,[t].concat(c))},onKeyUp:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i;ee&&(null===(i=Dt.current)||void 0===i||i.onKeyUp.apply(i,[t].concat(n))),null==wt||wt.apply(void 0,[t].concat(n))},onFocus:function(){jt(!0),L||(bt&&!pe.current&&bt.apply(void 0,arguments),yt.includes("focus")&&ie(!0)),pe.current=!0},onBlur:function(){zt.current=!0,jt(!1,(function(){pe.current=!1,zt.current=!1,ie(!1)})),L||(Ht&&("tags"===O?tt(Ht,{source:"submit"}):"multiple"===O&&tt("",{source:"blur"})),xt&&xt.apply(void 0,arguments))}}),Ut&&!ee&&d.createElement("span",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"".concat(C.map((function(t){var e=t.label,n=t.value;return["number","string"].includes((0,l.A)(e))?e:n})).join(", "))),Te,be,Ee&&Ae),d.createElement(x.Provider,{value:xe},_e)}));const K=$;var Z=function(){return null};Z.isSelectOptGroup=!0;const Q=Z;var J=function(){return null};J.isSelectOption=!0;const tt=J;var et=n(28104),nt=n(19853),rt=n(40961),it=n(18462),ot=d.forwardRef((function(t,e){var n=t.height,i=t.offsetY,s=t.offsetX,u=t.children,l=t.prefixCls,c=t.onInnerResize,h=t.innerProps,f=t.rtl,m=t.extra,g={},v={display:"flex",flexDirection:"column"};return void 0!==i&&(g={height:n,position:"relative",overflow:"hidden"},v=(0,a.A)((0,a.A)({},v),{},(0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)({transform:"translateY(".concat(i,"px)")},f?"marginRight":"marginLeft",-s),"position","absolute"),"left",0),"right",0),"top",0))),d.createElement("div",{style:g},d.createElement(it.A,{onResize:function(t){t.offsetHeight&&c&&c()}},d.createElement("div",(0,r.A)({style:v,className:p()((0,o.A)({},"".concat(l,"-holder-inner"),l)),ref:e},h),u,m)))}));ot.displayName="Filler";const at=ot;var st=n(25371);function ut(t,e){return("touches"in t?t.touches[0]:t)[e?"pageX":"pageY"]}const lt=d.forwardRef((function(t,e){var n=t.prefixCls,r=t.rtl,i=t.scrollOffset,u=t.scrollRange,l=t.onStartMove,c=t.onStopMove,h=t.onScroll,f=t.horizontal,m=t.spinSize,g=t.containerSize,v=t.style,y=t.thumbStyle,b=d.useState(!1),x=(0,s.A)(b,2),w=x[0],_=x[1],S=d.useState(null),E=(0,s.A)(S,2),A=E[0],M=E[1],C=d.useState(null),T=(0,s.A)(C,2),k=T[0],I=T[1],N=!r,P=d.useRef(),O=d.useRef(),L=d.useState(!1),R=(0,s.A)(L,2),D=R[0],z=R[1],F=d.useRef(),B=function(){clearTimeout(F.current),z(!0),F.current=setTimeout((function(){z(!1)}),3e3)},U=u-g||0,j=g-m||0,V=d.useMemo((function(){return 0===i||0===U?0:i/U*j}),[i,U,j]),H=d.useRef({top:V,dragging:w,pageY:A,startTop:k});H.current={top:V,dragging:w,pageY:A,startTop:k};var G=function(t){_(!0),M(ut(t,f)),I(H.current.top),l(),t.stopPropagation(),t.preventDefault()};d.useEffect((function(){var t=function(t){t.preventDefault()},e=P.current,n=O.current;return e.addEventListener("touchstart",t),n.addEventListener("touchstart",G),function(){e.removeEventListener("touchstart",t),n.removeEventListener("touchstart",G)}}),[]);var W=d.useRef();W.current=U;var X=d.useRef();X.current=j,d.useEffect((function(){if(w){var t,e=function(e){var n=H.current,r=n.dragging,i=n.pageY,o=n.startTop;if(st.A.cancel(t),r){var a=ut(e,f)-i,s=o;!N&&f?s-=a:s+=a;var u=W.current,l=X.current,c=l?s/l:0,d=Math.ceil(c*u);d=Math.max(d,0),d=Math.min(d,u),t=(0,st.A)((function(){h(d,f)}))}},n=function(){_(!1),c()};return window.addEventListener("mousemove",e),window.addEventListener("touchmove",e),window.addEventListener("mouseup",n),window.addEventListener("touchend",n),function(){window.removeEventListener("mousemove",e),window.removeEventListener("touchmove",e),window.removeEventListener("mouseup",n),window.removeEventListener("touchend",n),st.A.cancel(t)}}}),[w]),d.useEffect((function(){B()}),[i]),d.useImperativeHandle(e,(function(){return{delayHidden:B}}));var Y="".concat(n,"-scrollbar"),q={position:"absolute",visibility:D?null:"hidden"},$={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return f?(q.height=8,q.left=0,q.right=0,q.bottom=0,$.height="100%",$.width=m,N?$.left=V:$.right=V):(q.width=8,q.top=0,q.bottom=0,N?q.right=0:q.left=0,$.width="100%",$.height=m,$.top=V),d.createElement("div",{ref:P,className:p()(Y,(0,o.A)((0,o.A)((0,o.A)({},"".concat(Y,"-horizontal"),f),"".concat(Y,"-vertical"),!f),"".concat(Y,"-visible"),D)),style:(0,a.A)((0,a.A)({},q),v),onMouseDown:function(t){t.stopPropagation(),t.preventDefault()},onMouseMove:B},d.createElement("div",{ref:O,className:p()("".concat(Y,"-thumb"),(0,o.A)({},"".concat(Y,"-thumb-moving"),w)),style:(0,a.A)((0,a.A)({},$),y),onMouseDown:G}))}));function ct(t){var e=t.children,n=t.setRef,r=d.useCallback((function(t){n(t)}),[]);return d.cloneElement(e,{ref:r})}var ht=n(66588),dt=n(23029),ft=n(92901);const pt=function(){function t(){(0,dt.A)(this,t),(0,o.A)(this,"maps",void 0),(0,o.A)(this,"id",0),this.maps=Object.create(null)}return(0,ft.A)(t,[{key:"set",value:function(t,e){this.maps[t]=e,this.id+=1}},{key:"get",value:function(t){return this.maps[t]}}]),t}();var mt=n(81470),gt=10;function vt(t,e,n){var r=d.useState(t),i=(0,s.A)(r,2),o=i[0],a=i[1],u=d.useState(null),l=(0,s.A)(u,2),c=l[0],h=l[1];return d.useEffect((function(){var r=function(t,e,n){var r,i,o=t.length,a=e.length;if(0===o&&0===a)return null;o<a?(r=t,i=e):(r=e,i=t);var s={__EMPTY_ITEM__:!0};function u(t){return void 0!==t?n(t):s}for(var l=null,c=1!==Math.abs(o-a),h=0;h<i.length;h+=1){var d=u(r[h]);if(d!==u(i[h])){l=h,c=c||d!==u(i[h+1]);break}}return null===l?null:{index:l,multiple:c}}(o||[],t||[],e);void 0!==(null==r?void 0:r.index)&&(null==n||n(r.index),h(t[r.index])),a(t)}),[t]),[c]}const yt="object"===("undefined"==typeof navigator?"undefined":(0,l.A)(navigator))&&/Firefox/i.test(navigator.userAgent),bt=function(t,e){var n=(0,d.useRef)(!1),r=(0,d.useRef)(null);var i=(0,d.useRef)({top:t,bottom:e});return i.current.top=t,i.current.bottom=e,function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=t<0&&i.current.top||t>0&&i.current.bottom;return e&&o?(clearTimeout(r.current),n.current=!1):o&&!n.current||(clearTimeout(r.current),n.current=!0,r.current=setTimeout((function(){n.current=!1}),50)),!n.current&&o}};function xt(t,e,n,r,i){var o=(0,d.useRef)(0),a=(0,d.useRef)(null),s=(0,d.useRef)(null),u=(0,d.useRef)(!1),l=bt(e,n);var c=(0,d.useRef)(null),h=(0,d.useRef)(null);return[function(e){if(t){st.A.cancel(h.current),h.current=(0,st.A)((function(){c.current=null}),2);var n=e.deltaX,d=e.deltaY,f=e.shiftKey,p=n,m=d;("sx"===c.current||!c.current&&f&&d&&!n)&&(p=d,m=0,c.current="sx");var g=Math.abs(p),v=Math.abs(m);null===c.current&&(c.current=r&&g>v?"x":"y"),"y"===c.current?function(t,e){st.A.cancel(a.current),o.current+=e,s.current=e,l(e)||(yt||t.preventDefault(),a.current=(0,st.A)((function(){var t=u.current?10:1;i(o.current*t),o.current=0})))}(e,m):function(t,e){i(e,!0),yt||t.preventDefault()}(e,p)}},function(e){t&&(u.current=e.detail===s.current)}]}var wt=14/15;var _t=20;function St(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=t/(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)*t;return isNaN(e)&&(e=0),e=Math.max(e,_t),Math.floor(e)}var Et=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles"],At=[],Mt={overflowY:"auto",overflowAnchor:"none"};function Ct(t,e){var n=t.prefixCls,i=void 0===n?"rc-virtual-list":n,c=t.className,h=t.height,f=t.itemHeight,g=t.fullHeight,v=void 0===g||g,y=t.style,b=t.data,x=t.children,w=t.itemKey,_=t.virtual,S=t.direction,E=t.scrollWidth,A=t.component,M=void 0===A?"div":A,C=t.onScroll,T=t.onVirtualScroll,k=t.onVisibleChange,I=t.innerProps,N=t.extraRender,P=t.styles,O=(0,u.A)(t,Et),L=d.useCallback((function(t){return"function"==typeof w?w(t):null==t?void 0:t[w]}),[w]),R=function(t,e,n){var r=d.useState(0),i=(0,s.A)(r,2),o=i[0],a=i[1],u=(0,d.useRef)(new Map),l=(0,d.useRef)(new pt),c=(0,d.useRef)();function h(){st.A.cancel(c.current)}function f(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];h();var e=function(){u.current.forEach((function(t,e){if(t&&t.offsetParent){var n=(0,ht.A)(t),r=n.offsetHeight;l.current.get(e)!==r&&l.current.set(e,n.offsetHeight)}})),a((function(t){return t+1}))};t?e():c.current=(0,st.A)(e)}return(0,d.useEffect)((function(){return h}),[]),[function(r,i){var o=t(r),a=u.current.get(o);i?(u.current.set(o,i),f()):u.current.delete(o),!a!=!i&&(i?null==e||e(r):null==n||n(r))},f,l.current,o]}(L,null,null),D=(0,s.A)(R,4),z=D[0],F=D[1],B=D[2],U=D[3],j=!(!1===_||!h||!f),V=d.useMemo((function(){return Object.values(B.maps).reduce((function(t,e){return t+e}),0)}),[B.id,B.maps]),H=j&&b&&(Math.max(f*b.length,V)>h||!!E),G="rtl"===S,W=p()(i,(0,o.A)({},"".concat(i,"-rtl"),G),c),X=b||At,Y=(0,d.useRef)(),q=(0,d.useRef)(),$=(0,d.useState)(0),K=(0,s.A)($,2),Z=K[0],Q=K[1],J=(0,d.useState)(0),tt=(0,s.A)(J,2),et=tt[0],nt=tt[1],ot=(0,d.useState)(!1),ut=(0,s.A)(ot,2),dt=ut[0],ft=ut[1],yt=function(){ft(!0)},_t=function(){ft(!1)},Ct={getKey:L};function Tt(t){Q((function(e){var n=function(t){var e=t;Number.isNaN(Yt.current)||(e=Math.min(e,Yt.current));return e=Math.max(e,0),e}("function"==typeof t?t(e):t);return Y.current.scrollTop=n,n}))}var kt=(0,d.useRef)({start:0,end:X.length}),It=(0,d.useRef)(),Nt=vt(X,L),Pt=(0,s.A)(Nt,1)[0];It.current=Pt;var Ot=d.useMemo((function(){if(!j)return{scrollHeight:void 0,start:0,end:X.length-1,offset:void 0};var t;if(!H)return{scrollHeight:(null===(t=q.current)||void 0===t?void 0:t.offsetHeight)||0,start:0,end:X.length-1,offset:void 0};for(var e,n,r,i=0,o=X.length,a=0;a<o;a+=1){var s=X[a],u=L(s),l=B.get(u),c=i+(void 0===l?f:l);c>=Z&&void 0===e&&(e=a,n=i),c>Z+h&&void 0===r&&(r=a),i=c}return void 0===e&&(e=0,n=0,r=Math.ceil(h/f)),void 0===r&&(r=X.length-1),{scrollHeight:i,start:e,end:r=Math.min(r+1,X.length-1),offset:n}}),[H,j,Z,X,U,h]),Lt=Ot.scrollHeight,Rt=Ot.start,Dt=Ot.end,zt=Ot.offset;kt.current.start=Rt,kt.current.end=Dt;var Ft=d.useState({width:0,height:h}),Bt=(0,s.A)(Ft,2),Ut=Bt[0],jt=Bt[1],Vt=(0,d.useRef)(),Ht=(0,d.useRef)(),Gt=d.useMemo((function(){return St(Ut.width,E)}),[Ut.width,E]),Wt=d.useMemo((function(){return St(Ut.height,Lt)}),[Ut.height,Lt]),Xt=Lt-h,Yt=(0,d.useRef)(Xt);Yt.current=Xt;var qt=Z<=0,$t=Z>=Xt,Kt=bt(qt,$t),Zt=function(){return{x:G?-et:et,y:Z}},Qt=(0,d.useRef)(Zt()),Jt=(0,mt._q)((function(){if(T){var t=Zt();Qt.current.x===t.x&&Qt.current.y===t.y||(T(t),Qt.current=t)}}));function te(t,e){var n=t;e?((0,rt.flushSync)((function(){nt(n)})),Jt()):Tt(n)}var ee=function(t){var e=t,n=E?E-Ut.width:0;return e=Math.max(e,0),e=Math.min(e,n)},ne=(0,mt._q)((function(t,e){e?((0,rt.flushSync)((function(){nt((function(e){return ee(e+(G?-t:t))}))})),Jt()):Tt((function(e){return e+t}))})),re=xt(j,qt,$t,!!E,ne),ie=(0,s.A)(re,2),oe=ie[0],ae=ie[1];!function(t,e,n){var r,i=(0,d.useRef)(!1),o=(0,d.useRef)(0),a=(0,d.useRef)(null),s=(0,d.useRef)(null),u=function(t){if(i.current){var e=Math.ceil(t.touches[0].pageY),r=o.current-e;o.current=e,n(r)&&t.preventDefault(),clearInterval(s.current),s.current=setInterval((function(){(!n(r*=wt,!0)||Math.abs(r)<=.1)&&clearInterval(s.current)}),16)}},l=function(){i.current=!1,r()},c=function(t){r(),1!==t.touches.length||i.current||(i.current=!0,o.current=Math.ceil(t.touches[0].pageY),a.current=t.target,a.current.addEventListener("touchmove",u),a.current.addEventListener("touchend",l))};r=function(){a.current&&(a.current.removeEventListener("touchmove",u),a.current.removeEventListener("touchend",l))},(0,m.A)((function(){return t&&e.current.addEventListener("touchstart",c),function(){var t;null===(t=e.current)||void 0===t||t.removeEventListener("touchstart",c),r(),clearInterval(s.current)}}),[t])}(j,Y,(function(t,e){return!Kt(t,e)&&(oe({preventDefault:function(){},deltaY:t}),!0)})),(0,m.A)((function(){function t(t){j&&t.preventDefault()}var e=Y.current;return e.addEventListener("wheel",oe),e.addEventListener("DOMMouseScroll",ae),e.addEventListener("MozMousePixelScroll",t),function(){e.removeEventListener("wheel",oe),e.removeEventListener("DOMMouseScroll",ae),e.removeEventListener("MozMousePixelScroll",t)}}),[j]),(0,m.A)((function(){E&&nt((function(t){return ee(t)}))}),[Ut.width,E]);var se=function(){var t,e;null===(t=Vt.current)||void 0===t||t.delayHidden(),null===(e=Ht.current)||void 0===e||e.delayHidden()},ue=function(t,e,n,r,i,o,u,c){var h=d.useRef(),f=d.useState(null),p=(0,s.A)(f,2),g=p[0],v=p[1];return(0,m.A)((function(){if(g&&g.times<gt){if(!t.current)return void v((function(t){return(0,a.A)({},t)}));o();var s=g.targetAlign,l=g.originAlign,c=g.index,h=g.offset,d=t.current.clientHeight,f=!1,p=s,m=null;if(d){for(var y=s||l,b=0,x=0,w=0,_=Math.min(e.length-1,c),S=0;S<=_;S+=1){var E=i(e[S]);x=b;var A=n.get(E);b=w=x+(void 0===A?r:A)}for(var M="top"===y?h:d-h,C=_;C>=0;C-=1){var T=i(e[C]),k=n.get(T);if(void 0===k){f=!0;break}if((M-=k)<=0)break}switch(y){case"top":m=x-h;break;case"bottom":m=w-d+h;break;default:var I=t.current.scrollTop;x<I?p="top":w>I+d&&(p="bottom")}null!==m&&u(m),m!==g.lastTop&&(f=!0)}f&&v((0,a.A)((0,a.A)({},g),{},{times:g.times+1,targetAlign:p,lastTop:m}))}}),[g,t.current]),function(t){if(null!=t){if(st.A.cancel(h.current),"number"==typeof t)u(t);else if(t&&"object"===(0,l.A)(t)){var n,r=t.align;n="index"in t?t.index:e.findIndex((function(e){return i(e)===t.key}));var o=t.offset;v({times:0,index:n,offset:void 0===o?0:o,originAlign:r})}}else c()}}(Y,X,B,f,L,(function(){return F(!0)}),Tt,se);d.useImperativeHandle(e,(function(){return{getScrollInfo:Zt,scrollTo:function(t){var e;(e=t)&&"object"===(0,l.A)(e)&&("left"in e||"top"in e)?(void 0!==t.left&&nt(ee(t.left)),ue(t.top)):ue(t)}}})),(0,m.A)((function(){if(k){var t=X.slice(Rt,Dt+1);k(t,X)}}),[Rt,Dt,X]);var le=function(t,e,n,r){var i=d.useMemo((function(){return[new Map,[]]}),[t,n.id,r]),o=(0,s.A)(i,2),a=o[0],u=o[1];return function(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,s=a.get(i),l=a.get(o);if(void 0===s||void 0===l)for(var c=t.length,h=u.length;h<c;h+=1){var d,f=t[h],p=e(f);a.set(p,h);var m=null!==(d=n.get(p))&&void 0!==d?d:r;if(u[h]=(u[h-1]||0)+m,p===i&&(s=h),p===o&&(l=h),void 0!==s&&void 0!==l)break}return{top:u[s-1]||0,bottom:u[l]}}}(X,L,B,f),ce=null==N?void 0:N({start:Rt,end:Dt,virtual:H,offsetX:et,offsetY:zt,rtl:G,getSize:le}),he=function(t,e,n,r,i,o,a){var s=a.getKey;return t.slice(e,n+1).map((function(t,n){var a=o(t,e+n,{style:{width:r}}),u=s(t);return d.createElement(ct,{key:u,setRef:function(e){return i(t,e)}},a)}))}(X,Rt,Dt,E,z,x,Ct),de=null;h&&(de=(0,a.A)((0,o.A)({},v?"height":"maxHeight",h),Mt),j&&(de.overflowY="hidden",E&&(de.overflowX="hidden"),dt&&(de.pointerEvents="none")));var fe={};return G&&(fe.dir="rtl"),d.createElement("div",(0,r.A)({style:(0,a.A)((0,a.A)({},y),{},{position:"relative"}),className:W},fe,O),d.createElement(it.A,{onResize:function(t){jt({width:t.width||t.offsetWidth,height:t.height||t.offsetHeight})}},d.createElement(M,{className:"".concat(i,"-holder"),style:de,ref:Y,onScroll:function(t){var e=t.currentTarget.scrollTop;e!==Z&&Tt(e),null==C||C(t),Jt()},onMouseEnter:se},d.createElement(at,{prefixCls:i,height:Lt,offsetX:et,offsetY:zt,scrollWidth:E,onInnerResize:F,ref:q,innerProps:I,rtl:G,extra:ce},he))),H&&Lt>h&&d.createElement(lt,{ref:Vt,prefixCls:i,scrollOffset:Z,scrollRange:Lt,rtl:G,onScroll:te,onStartMove:yt,onStopMove:_t,spinSize:Wt,containerSize:Ut.height,style:null==P?void 0:P.verticalScrollBar,thumbStyle:null==P?void 0:P.verticalScrollBarThumb}),H&&E>Ut.width&&d.createElement(lt,{ref:Ht,prefixCls:i,scrollOffset:et,scrollRange:E,rtl:G,onScroll:te,onStartMove:yt,onStopMove:_t,spinSize:Gt,containerSize:Ut.width,horizontal:!0,style:null==P?void 0:P.horizontalScrollBar,thumbStyle:null==P?void 0:P.horizontalScrollBarThumb}))}var Tt=d.forwardRef(Ct);Tt.displayName="List";const kt=Tt;var It=["disabled","title","children","style","className"];function Nt(t){return"string"==typeof t||"number"==typeof t}var Pt=function(t,e){var n=d.useContext(x),a=n.prefixCls,l=n.id,c=n.open,h=n.multiple,f=n.mode,m=n.searchValue,g=n.toggleOpen,y=n.notFoundContent,w=n.onPopupScroll,S=d.useContext(W),E=S.maxCount,A=S.flattenOptions,M=S.onActiveValue,C=S.defaultActiveFirstOption,T=S.onSelect,k=S.menuItemSelectedIcon,I=S.rawValues,N=S.fieldNames,P=S.virtual,O=S.direction,L=S.listHeight,R=S.listItemHeight,D=S.optionRender,z="".concat(a,"-item"),F=(0,et.A)((function(){return A}),[c,A],(function(t,e){return e[0]&&t[1]!==e[1]})),B=d.useRef(null),U=d.useMemo((function(){return h&&V(E)&&(null==I?void 0:I.size)>=E}),[h,E,null==I?void 0:I.size]),j=function(t){t.preventDefault()},H=function(t){var e;null===(e=B.current)||void 0===e||e.scrollTo("number"==typeof t?{index:t}:t)},G=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=F.length,r=0;r<n;r+=1){var i=(t+r*e+n)%n,o=F[i]||{},a=o.group,s=o.data;if(!(a||null!=s&&s.disabled||U))return i}return-1},X=d.useState((function(){return G(0)})),Y=(0,s.A)(X,2),q=Y[0],$=Y[1],K=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];$(t);var n={source:e?"keyboard":"mouse"},r=F[t];r?M(r.value,t,n):M(null,-1,n)};(0,d.useEffect)((function(){K(!1!==C?G(0):-1)}),[F.length,m]);var Z=d.useCallback((function(t){return I.has(t)&&"combobox"!==f}),[f,(0,i.A)(I).toString(),I.size]);(0,d.useEffect)((function(){var t,e=setTimeout((function(){if(!h&&c&&1===I.size){var t=Array.from(I)[0],e=F.findIndex((function(e){return e.data.value===t}));-1!==e&&(K(e),H(e))}}));c&&(null===(t=B.current)||void 0===t||t.scrollTo(void 0));return function(){return clearTimeout(e)}}),[c,m]);var Q=function(t){void 0!==t&&T(t,{selected:!I.has(t)}),h||g(!1)};if(d.useImperativeHandle(e,(function(){return{onKeyDown:function(t){var e=t.which,n=t.ctrlKey;switch(e){case v.A.N:case v.A.P:case v.A.UP:case v.A.DOWN:var r=0;if(e===v.A.UP?r=-1:e===v.A.DOWN?r=1:/(mac\sos|macintosh)/i.test(navigator.appVersion)&&n&&(e===v.A.N?r=1:e===v.A.P&&(r=-1)),0!==r){var i=G(q+r,r);H(i),K(i,!0)}break;case v.A.ENTER:var o,a=F[q];!a||null!=a&&null!==(o=a.data)&&void 0!==o&&o.disabled||U?Q(void 0):Q(a.value),c&&t.preventDefault();break;case v.A.ESC:g(!1),c&&t.stopPropagation()}},onKeyUp:function(){},scrollTo:function(t){H(t)}}})),0===F.length)return d.createElement("div",{role:"listbox",id:"".concat(l,"_list"),className:"".concat(z,"-empty"),onMouseDown:j},y);var J=Object.keys(N).map((function(t){return N[t]})),tt=function(t){return t.label};function rt(t,e){return{role:t.group?"presentation":"option",id:"".concat(l,"_list_").concat(e)}}var it=function(t){var e=F[t];if(!e)return null;var n=e.data||{},i=n.value,o=e.group,a=(0,_.A)(n,!0),s=tt(e);return e?d.createElement("div",(0,r.A)({"aria-label":"string"!=typeof s||o?null:s},a,{key:t},rt(e,t),{"aria-selected":Z(i)}),i):null},ot={role:"listbox",id:"".concat(l,"_list")};return d.createElement(d.Fragment,null,P&&d.createElement("div",(0,r.A)({},ot,{style:{height:0,width:0,overflow:"hidden"}}),it(q-1),it(q),it(q+1)),d.createElement(kt,{itemKey:"key",ref:B,data:F,height:L,itemHeight:R,fullHeight:!1,onMouseDown:j,onScroll:w,virtual:P,direction:O,innerProps:P?null:ot},(function(t,e){var n=t.group,i=t.groupOption,a=t.data,s=t.label,l=t.value,c=a.key;if(n){var h,f=null!==(h=a.title)&&void 0!==h?h:Nt(s)?s.toString():void 0;return d.createElement("div",{className:p()(z,"".concat(z,"-group"),a.className),title:f},void 0!==s?s:c)}var m=a.disabled,g=a.title,v=(a.children,a.style),y=a.className,x=(0,u.A)(a,It),w=(0,nt.A)(x,J),S=Z(l),E=m||!S&&U,A="".concat(z,"-option"),M=p()(z,A,y,(0,o.A)((0,o.A)((0,o.A)((0,o.A)({},"".concat(A,"-grouped"),i),"".concat(A,"-active"),q===e&&!E),"".concat(A,"-disabled"),E),"".concat(A,"-selected"),S)),C=tt(t),T=!k||"function"==typeof k||S,I="number"==typeof C?C:C||l,N=Nt(I)?I.toString():void 0;return void 0!==g&&(N=g),d.createElement("div",(0,r.A)({},(0,_.A)(w),P?{}:rt(t,e),{"aria-selected":S,className:M,title:N,onMouseMove:function(){q===e||E||K(e)},onClick:function(){E||Q(l)},style:v}),d.createElement("div",{className:"".concat(A,"-content")},"function"==typeof D?D(t,{index:e}):I),d.isValidElement(k)||S,T&&d.createElement(b,{className:"".concat(z,"-option-state"),customizeIcon:k,customizeIconProps:{value:l,disabled:E,isSelected:S}},S?"":null))})))};const Ot=d.forwardRef(Pt);function Lt(t,e){return M(t).join("").toUpperCase().includes(e)}var Rt=n(20998),Dt=0,zt=(0,Rt.A)();function Ft(t){var e=d.useState(),n=(0,s.A)(e,2),r=n[0],i=n[1];return d.useEffect((function(){var t;i("rc_select_".concat((zt?(t=Dt,Dt+=1):t="TEST_OR_SSR",t)))}),[]),t||r}var Bt=n(82546),Ut=["children","value"],jt=["children"];function Vt(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,Bt.A)(t).map((function(t,n){if(!d.isValidElement(t)||!t.type)return null;var r=t,i=r.type.isSelectOptGroup,o=r.key,s=r.props,l=s.children,c=(0,u.A)(s,jt);return e||!i?function(t){var e=t,n=e.key,r=e.props,i=r.children,o=r.value,s=(0,u.A)(r,Ut);return(0,a.A)({key:n,value:void 0!==o?o:n,children:i},s)}(t):(0,a.A)((0,a.A)({key:"__RC_SELECT_GRP__".concat(null===o?n:o,"__"),label:o},c),{},{options:Vt(l)})})).filter((function(t){return t}))}const Ht=function(t,e,n,r,i){return d.useMemo((function(){var o=t;!t&&(o=Vt(e));var a=new Map,s=new Map,u=function(t,e,n){n&&"string"==typeof n&&t.set(e[n],e)};return function t(e){for(var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=0;l<e.length;l+=1){var c=e[l];!c[n.options]||o?(a.set(c[n.value],c),u(s,c,n.label),u(s,c,r),u(s,c,i)):t(c[n.options],!0)}}(o),{options:o,valueOptions:a,labelOptions:s}}),[t,e,n,r,i])};function Gt(t){var e=d.useRef();e.current=t;var n=d.useCallback((function(){return e.current.apply(e,arguments)}),[]);return n}var Wt=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","optionRender","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","direction","listHeight","listItemHeight","labelRender","value","defaultValue","labelInValue","onChange","maxCount"],Xt=["inputValue"];var Yt=d.forwardRef((function(t,e){var n=t.id,h=t.mode,f=t.prefixCls,p=void 0===f?"rc-select":f,m=t.backfill,g=t.fieldNames,v=t.inputValue,y=t.searchValue,b=t.onSearch,x=t.autoClearSearchValue,w=void 0===x||x,_=t.onSelect,S=t.onDeselect,E=t.dropdownMatchSelectWidth,A=void 0===E||E,C=t.filterOption,T=t.filterSort,k=t.optionFilterProp,I=t.optionLabelProp,N=t.options,P=t.optionRender,O=t.children,L=t.defaultActiveFirstOption,R=t.menuItemSelectedIcon,D=t.virtual,z=t.direction,F=t.listHeight,B=void 0===F?200:F,U=t.listItemHeight,V=void 0===U?20:U,X=t.labelRender,Y=t.value,$=t.defaultValue,Z=t.labelInValue,Q=t.onChange,J=t.maxCount,tt=(0,u.A)(t,Wt),et=Ft(n),nt=q(h),rt=!(N||!O),it=d.useMemo((function(){return(void 0!==C||"combobox"!==h)&&C}),[C,h]),ot=d.useMemo((function(){return H(g,rt)}),[JSON.stringify(g),rt]),at=(0,c.A)("",{value:void 0!==y?y:v,postState:function(t){return t||""}}),st=(0,s.A)(at,2),ut=st[0],lt=st[1],ct=Ht(N,O,ot,k,I),ht=ct.valueOptions,dt=ct.labelOptions,ft=ct.options,pt=d.useCallback((function(t){return M(t).map((function(t){var e,n,r,i,o,a;(function(t){return!t||"object"!==(0,l.A)(t)})(t)?e=t:(r=t.key,n=t.label,e=null!==(a=t.value)&&void 0!==a?a:r);var s,u=ht.get(e);u&&(void 0===n&&(n=null==u?void 0:u[I||ot.label]),void 0===r&&(r=null!==(s=null==u?void 0:u.key)&&void 0!==s?s:e),i=null==u?void 0:u.disabled,o=null==u?void 0:u.title);return{label:n,value:e,key:r,disabled:i,title:o}}))}),[ot,I,ht]),mt=(0,c.A)($,{value:Y}),gt=(0,s.A)(mt,2),vt=gt[0],yt=gt[1],bt=d.useMemo((function(){var t,e=pt(nt&&null===vt?[]:vt);return"combobox"===h&&function(t){return!t&&0!==t}(null===(t=e[0])||void 0===t?void 0:t.value)?[]:e}),[vt,pt,h,nt]),xt=function(t,e){var n=d.useRef({values:new Map,options:new Map});return[d.useMemo((function(){var r=n.current,i=r.values,o=r.options,s=t.map((function(t){var e;return void 0===t.label?(0,a.A)((0,a.A)({},t),{},{label:null===(e=i.get(t.value))||void 0===e?void 0:e.label}):t})),u=new Map,l=new Map;return s.forEach((function(t){u.set(t.value,t),l.set(t.value,e.get(t.value)||o.get(t.value))})),n.current.values=u,n.current.options=l,s}),[t,e]),d.useCallback((function(t){return e.get(t)||n.current.options.get(t)}),[e])]}(bt,ht),wt=(0,s.A)(xt,2),_t=wt[0],St=wt[1],Et=d.useMemo((function(){if(!h&&1===_t.length){var t=_t[0];if(null===t.value&&(null===t.label||void 0===t.label))return[]}return _t.map((function(t){var e;return(0,a.A)((0,a.A)({},t),{},{label:null!==(e="function"==typeof X?X(t):t.label)&&void 0!==e?e:t.value})}))}),[h,_t,X]),At=d.useMemo((function(){return new Set(_t.map((function(t){return t.value})))}),[_t]);d.useEffect((function(){if("combobox"===h){var t,e=null===(t=_t[0])||void 0===t?void 0:t.value;lt(function(t){return null!=t}(e)?String(e):"")}}),[_t]);var Mt=Gt((function(t,e){var n=null!=e?e:t;return(0,o.A)((0,o.A)({},ot.value,t),ot.label,n)})),Ct=function(t,e,n,r,i){return d.useMemo((function(){if(!n||!1===r)return t;var s=e.options,u=e.label,l=e.value,c=[],h="function"==typeof r,d=n.toUpperCase(),f=h?r:function(t,e){return i?Lt(e[i],d):e[s]?Lt(e["children"!==u?u:"label"],d):Lt(e[l],d)},p=h?function(t){return G(t)}:function(t){return t};return t.forEach((function(t){if(t[s])if(f(n,p(t)))c.push(t);else{var e=t[s].filter((function(t){return f(n,p(t))}));e.length&&c.push((0,a.A)((0,a.A)({},t),{},(0,o.A)({},s,e)))}else f(n,p(t))&&c.push(t)})),c}),[t,r,i,n,e])}(d.useMemo((function(){if("tags"!==h)return ft;var t=(0,i.A)(ft);return(0,i.A)(_t).sort((function(t,e){return t.value<e.value?-1:1})).forEach((function(e){var n=e.value;(function(t){return ht.has(t)})(n)||t.push(Mt(n,e.label))})),t}),[Mt,ft,ht,_t,h]),ot,ut,it,k),Tt=d.useMemo((function(){return"tags"!==h||!ut||Ct.some((function(t){return t[k||"value"]===ut}))||Ct.some((function(t){return t[ot.value]===ut}))?Ct:[Mt(ut)].concat((0,i.A)(Ct))}),[Mt,k,h,Ct,ut,ot]),kt=d.useMemo((function(){return T?(0,i.A)(Tt).sort((function(t,e){return T(t,e)})):Tt}),[Tt,T]),It=d.useMemo((function(){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.fieldNames,r=e.childrenAsData,i=[],o=H(n,!1),a=o.label,s=o.value,u=o.options,l=o.groupLabel;return function t(e,n){Array.isArray(e)&&e.forEach((function(e){if(n||!(u in e)){var o=e[s];i.push({key:j(e,i.length),groupOption:n,data:e,label:e[a],value:o})}else{var c=e[l];void 0===c&&r&&(c=e.label),i.push({key:j(e,i.length),group:!0,data:e,label:c}),t(e[u],!0)}}))}(t,!1),i}(kt,{fieldNames:ot,childrenAsData:rt})}),[kt,ot,rt]),Nt=function(t){var e=pt(t);if(yt(e),Q&&(e.length!==_t.length||e.some((function(t,e){var n;return(null===(n=_t[e])||void 0===n?void 0:n.value)!==(null==t?void 0:t.value)})))){var n=Z?e:e.map((function(t){return t.value})),r=e.map((function(t){return G(St(t.value))}));Q(nt?n:n[0],nt?r:r[0])}},Pt=d.useState(null),Rt=(0,s.A)(Pt,2),Dt=Rt[0],zt=Rt[1],Bt=d.useState(0),Ut=(0,s.A)(Bt,2),jt=Ut[0],Vt=Ut[1],Yt=void 0!==L?L:"combobox"!==h,qt=d.useCallback((function(t,e){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).source,r=void 0===n?"keyboard":n;Vt(e),m&&"combobox"===h&&null!==t&&"keyboard"===r&&zt(String(t))}),[m,h]),$t=function(t,e,n){var r=function(){var e,n=St(t);return[Z?{label:null==n?void 0:n[ot.label],value:t,key:null!==(e=null==n?void 0:n.key)&&void 0!==e?e:t}:t,G(n)]};if(e&&_){var i=r(),o=(0,s.A)(i,2),a=o[0],u=o[1];_(a,u)}else if(!e&&S&&"clear"!==n){var l=r(),c=(0,s.A)(l,2),h=c[0],d=c[1];S(h,d)}},Kt=Gt((function(t,e){var n,r=!nt||e.selected;n=r?nt?[].concat((0,i.A)(_t),[t]):[t]:_t.filter((function(e){return e.value!==t})),Nt(n),$t(t,r),"combobox"===h?zt(""):q&&!w||(lt(""),zt(""))})),Zt=d.useMemo((function(){var t=!1!==D&&!1!==A;return(0,a.A)((0,a.A)({},ct),{},{flattenOptions:It,onActiveValue:qt,defaultActiveFirstOption:Yt,onSelect:Kt,menuItemSelectedIcon:R,rawValues:At,fieldNames:ot,virtual:t,direction:z,listHeight:B,listItemHeight:V,childrenAsData:rt,maxCount:J,optionRender:P})}),[J,ct,It,qt,Yt,Kt,R,At,ot,D,A,z,B,V,rt,P]);return d.createElement(W.Provider,{value:Zt},d.createElement(K,(0,r.A)({},tt,{id:et,prefixCls:p,ref:e,omitDomProps:Xt,mode:h,displayValues:Et,onDisplayValuesChange:function(t,e){Nt(t);var n=e.type,r=e.values;"remove"!==n&&"clear"!==n||r.forEach((function(t){$t(t.value,!1,n)}))},direction:z,searchValue:ut,onSearch:function(t,e){if(lt(t),zt(null),"submit"!==e.source)"blur"!==e.source&&("combobox"===h&&Nt(t),null==b||b(t));else{var n=(t||"").trim();if(n){var r=Array.from(new Set([].concat((0,i.A)(At),[n])));Nt(r),$t(n,!0),lt("")}}},autoClearSearchValue:w,onSearchSplit:function(t){var e=t;"tags"!==h&&(e=t.map((function(t){var e=dt.get(t);return null==e?void 0:e.value})).filter((function(t){return void 0!==t})));var n=Array.from(new Set([].concat((0,i.A)(At),(0,i.A)(e))));Nt(n),n.forEach((function(t){$t(t,!0)}))},dropdownMatchSelectWidth:A,OptionList:Ot,emptyOptions:!It.length,activeValue:Dt,activeDescendantId:"".concat(et,"_list_").concat(jt)})))}));Yt.Option=tt,Yt.OptGroup=Q;const qt=Yt},95826:(t,e,n)=>{"use strict";n.d(e,{A:()=>L});var r=n(89379),i=n(64467),o=n(60436),a=n(5544),s=n(82284),u=n(46942),l=n.n(u),c=n(12533),h=n(43210),d=n(68210),f=n(96540),p=n(58168),m=n(53986);function g(t,e,n){return(t-e)/(n-e)}function v(t,e,n,r){var i=g(e,n,r),o={};switch(t){case"rtl":o.right="".concat(100*i,"%"),o.transform="translateX(50%)";break;case"btt":o.bottom="".concat(100*i,"%"),o.transform="translateY(50%)";break;case"ttb":o.top="".concat(100*i,"%"),o.transform="translateY(-50%)";break;default:o.left="".concat(100*i,"%"),o.transform="translateX(-50%)"}return o}function y(t,e){return Array.isArray(t)?t[e]:t}var b=n(16928);const x=f.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0,keyboard:!0,styles:{},classNames:{}});var w=["prefixCls","value","valueIndex","onStartMove","style","render","dragging","onOffsetChange","onChangeComplete","onFocus","onMouseEnter"];const _=f.forwardRef((function(t,e){var n,o=t.prefixCls,a=t.value,s=t.valueIndex,u=t.onStartMove,c=t.style,h=t.render,d=t.dragging,g=t.onOffsetChange,_=t.onChangeComplete,S=t.onFocus,E=t.onMouseEnter,A=(0,m.A)(t,w),M=f.useContext(x),C=M.min,T=M.max,k=M.direction,I=M.disabled,N=M.keyboard,P=M.range,O=M.tabIndex,L=M.ariaLabelForHandle,R=M.ariaLabelledByForHandle,D=M.ariaValueTextFormatterForHandle,z=M.styles,F=M.classNames,B="".concat(o,"-handle"),U=function(t){I||u(t,s)},j=v(k,a,C,T),V={};null!==s&&(V={tabIndex:I?null:y(O,s),role:"slider","aria-valuemin":C,"aria-valuemax":T,"aria-valuenow":a,"aria-disabled":I,"aria-label":y(L,s),"aria-labelledby":y(R,s),"aria-valuetext":null===(n=y(D,s))||void 0===n?void 0:n(a),"aria-orientation":"ltr"===k||"rtl"===k?"horizontal":"vertical",onMouseDown:U,onTouchStart:U,onFocus:function(t){null==S||S(t,s)},onMouseEnter:function(t){E(t,s)},onKeyDown:function(t){if(!I&&N){var e=null;switch(t.which||t.keyCode){case b.A.LEFT:e="ltr"===k||"btt"===k?-1:1;break;case b.A.RIGHT:e="ltr"===k||"btt"===k?1:-1;break;case b.A.UP:e="ttb"!==k?1:-1;break;case b.A.DOWN:e="ttb"!==k?-1:1;break;case b.A.HOME:e="min";break;case b.A.END:e="max";break;case b.A.PAGE_UP:e=2;break;case b.A.PAGE_DOWN:e=-2}null!==e&&(t.preventDefault(),g(e,s))}},onKeyUp:function(t){switch(t.which||t.keyCode){case b.A.LEFT:case b.A.RIGHT:case b.A.UP:case b.A.DOWN:case b.A.HOME:case b.A.END:case b.A.PAGE_UP:case b.A.PAGE_DOWN:null==_||_()}}});var H=f.createElement("div",(0,p.A)({ref:e,className:l()(B,(0,i.A)((0,i.A)({},"".concat(B,"-").concat(s+1),null!==s&&P),"".concat(B,"-dragging"),d),F.handle),style:(0,r.A)((0,r.A)((0,r.A)({},j),c),z.handle)},V,A));return h&&(H=h(H,{index:s,prefixCls:o,value:a,dragging:d})),H}));var S=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","activeHandleRender","draggingIndex","onFocus"];const E=f.forwardRef((function(t,e){var n=t.prefixCls,i=t.style,o=t.onStartMove,s=t.onOffsetChange,u=t.values,l=t.handleRender,c=t.activeHandleRender,h=t.draggingIndex,d=t.onFocus,g=(0,m.A)(t,S),v=f.useRef({});f.useImperativeHandle(e,(function(){return{focus:function(t){var e;null===(e=v.current[t])||void 0===e||e.focus()}}}));var b=f.useState(-1),x=(0,a.A)(b,2),w=x[0],E=x[1],A=(0,r.A)({prefixCls:n,onStartMove:o,onOffsetChange:s,render:l,onFocus:function(t,e){E(e),null==d||d(t)},onMouseEnter:function(t,e){E(e)}},g);return f.createElement(f.Fragment,null,u.map((function(t,e){return f.createElement(_,(0,p.A)({ref:function(t){t?v.current[e]=t:delete v.current[e]},dragging:h===e,style:y(i,e),key:e,value:t,valueIndex:e},A))})),c&&f.createElement(_,(0,p.A)({key:"a11y"},A,{value:u[w],valueIndex:null,dragging:-1!==h,render:c,style:{pointerEvents:"none"},tabIndex:null,"aria-hidden":!0})))}));const A=function(t){var e=t.prefixCls,n=t.style,o=t.children,a=t.value,s=t.onClick,u=f.useContext(x),c=u.min,h=u.max,d=u.direction,p=u.includedStart,m=u.includedEnd,g=u.included,y="".concat(e,"-text"),b=v(d,a,c,h);return f.createElement("span",{className:l()(y,(0,i.A)({},"".concat(y,"-active"),g&&p<=a&&a<=m)),style:(0,r.A)((0,r.A)({},b),n),onMouseDown:function(t){t.stopPropagation()},onClick:function(){s(a)}},o)};const M=function(t){var e=t.prefixCls,n=t.marks,r=t.onClick,i="".concat(e,"-mark");return n.length?f.createElement("div",{className:i},n.map((function(t){var e=t.value,n=t.style,o=t.label;return f.createElement(A,{key:e,prefixCls:i,style:n,value:e,onClick:r},o)}))):null};const C=function(t){var e=t.prefixCls,n=t.value,o=t.style,a=t.activeStyle,s=f.useContext(x),u=s.min,c=s.max,h=s.direction,d=s.included,p=s.includedStart,m=s.includedEnd,g="".concat(e,"-dot"),y=d&&p<=n&&n<=m,b=(0,r.A)((0,r.A)({},v(h,n,u,c)),"function"==typeof o?o(n):o);return y&&(b=(0,r.A)((0,r.A)({},b),"function"==typeof a?a(n):a)),f.createElement("span",{className:l()(g,(0,i.A)({},"".concat(g,"-active"),y)),style:b})};const T=function(t){var e=t.prefixCls,n=t.marks,r=t.dots,i=t.style,o=t.activeStyle,a=f.useContext(x),s=a.min,u=a.max,l=a.step,c=f.useMemo((function(){var t=new Set;if(n.forEach((function(e){t.add(e.value)})),r&&null!==l)for(var e=s;e<=u;)t.add(e),e+=l;return Array.from(t)}),[s,u,l,r,n]);return f.createElement("div",{className:"".concat(e,"-step")},c.map((function(t){return f.createElement(C,{prefixCls:e,key:t,value:t,style:i,activeStyle:o})})))};const k=function(t){var e=t.prefixCls,n=t.style,o=t.start,a=t.end,s=t.index,u=t.onStartMove,c=t.replaceCls,h=f.useContext(x),d=h.direction,p=h.min,m=h.max,v=h.disabled,y=h.range,b=h.classNames,w="".concat(e,"-track"),_=g(o,p,m),S=g(a,p,m),E=function(t){!v&&u&&u(t,-1)},A={};switch(d){case"rtl":A.right="".concat(100*_,"%"),A.width="".concat(100*S-100*_,"%");break;case"btt":A.bottom="".concat(100*_,"%"),A.height="".concat(100*S-100*_,"%");break;case"ttb":A.top="".concat(100*_,"%"),A.height="".concat(100*S-100*_,"%");break;default:A.left="".concat(100*_,"%"),A.width="".concat(100*S-100*_,"%")}var M=c||l()(w,(0,i.A)((0,i.A)({},"".concat(w,"-").concat(s+1),null!==s&&y),"".concat(e,"-track-draggable"),u),b.track);return f.createElement("div",{className:M,style:(0,r.A)((0,r.A)({},A),n),onMouseDown:E,onTouchStart:E})};const I=function(t){var e=t.prefixCls,n=t.style,i=t.values,o=t.startPoint,a=t.onStartMove,s=f.useContext(x),u=s.included,c=s.range,h=s.min,d=s.styles,p=s.classNames,m=f.useMemo((function(){if(!c){if(0===i.length)return[];var t=null!=o?o:h,e=i[0];return[{start:Math.min(t,e),end:Math.max(t,e)}]}for(var n=[],r=0;r<i.length-1;r+=1)n.push({start:i[r],end:i[r+1]});return n}),[i,c,o,h]);if(!u)return null;var g=p.tracks||d.tracks?f.createElement(k,{index:null,prefixCls:e,start:m[0].start,end:m[m.length-1].end,replaceCls:l()(p.tracks,"".concat(e,"-tracks")),style:d.tracks}):null;return f.createElement(f.Fragment,null,g,m.map((function(t,i){var o=t.start,s=t.end;return f.createElement(k,{index:i,prefixCls:e,style:(0,r.A)((0,r.A)({},y(n,i)),d.track),start:o,end:s,key:i,onStartMove:a})})))};var N=n(81470);function P(t){var e="touches"in t?t.touches[0]:t;return{pageX:e.pageX,pageY:e.pageY}}const O=function(t,e,n,r,i,s,u,l,c){var h=f.useState(null),d=(0,a.A)(h,2),p=d[0],m=d[1],g=f.useState(-1),v=(0,a.A)(g,2),y=v[0],b=v[1],x=f.useState(n),w=(0,a.A)(x,2),_=w[0],S=w[1],E=f.useState(n),A=(0,a.A)(E,2),M=A[0],C=A[1],T=f.useRef(null),k=f.useRef(null);f.useLayoutEffect((function(){-1===y&&S(n)}),[n,y]),f.useEffect((function(){return function(){document.removeEventListener("mousemove",T.current),document.removeEventListener("mouseup",k.current),document.removeEventListener("touchmove",T.current),document.removeEventListener("touchend",k.current)}}),[]);var I=function(t,e){_.some((function(e,n){return e!==t[n]}))&&(void 0!==e&&m(e),S(t),u(t))},O=(0,N._q)((function(t,e){if(-1===t){var n=M[0],a=M[M.length-1],u=r-n,l=i-a,h=e*(i-r);h=Math.max(h,u),h=Math.min(h,l);var d=s(n+h);h=d-n;var f=M.map((function(t){return t+h}));I(f)}else{var p=(i-r)*e,m=(0,o.A)(_);m[t]=M[t];var g=c(m,p,t,"dist");I(g.values,g.value)}})),L=f.useMemo((function(){var t=(0,o.A)(n).sort((function(t,e){return t-e})),e=(0,o.A)(_).sort((function(t,e){return t-e}));return t.every((function(t,n){return t===e[n]}))?_:n}),[n,_]);return[y,p,L,function(r,i,o){r.stopPropagation();var a=o||n,s=a[i];b(i),m(s),C(a);var u=P(r),c=u.pageX,h=u.pageY,d=function(n){n.preventDefault();var r,o=P(n),a=o.pageX,s=o.pageY,u=a-c,l=s-h,d=t.current.getBoundingClientRect(),f=d.width,p=d.height;switch(e){case"btt":r=-l/p;break;case"ttb":r=l/p;break;case"rtl":r=-u/f;break;default:r=u/f}O(i,r)},f=function t(e){e.preventDefault(),document.removeEventListener("mouseup",t),document.removeEventListener("mousemove",d),document.removeEventListener("touchend",t),document.removeEventListener("touchmove",d),T.current=null,k.current=null,b(-1),l()};document.addEventListener("mouseup",f),document.addEventListener("mousemove",d),document.addEventListener("touchend",f),document.addEventListener("touchmove",d),T.current=d,k.current=f}]};const L=f.forwardRef((function(t,e){var n=t.prefixCls,u=void 0===n?"rc-slider":n,p=t.className,m=t.style,g=t.classNames,v=t.styles,y=t.disabled,b=void 0!==y&&y,w=t.keyboard,_=void 0===w||w,S=t.autoFocus,A=t.onFocus,C=t.onBlur,k=t.min,N=void 0===k?0:k,P=t.max,L=void 0===P?100:P,R=t.step,D=void 0===R?1:R,z=t.value,F=t.defaultValue,B=t.range,U=t.count,j=t.onChange,V=t.onBeforeChange,H=t.onAfterChange,G=t.onChangeComplete,W=t.allowCross,X=void 0===W||W,Y=t.pushable,q=void 0!==Y&&Y,$=t.draggableTrack,K=t.reverse,Z=t.vertical,Q=t.included,J=void 0===Q||Q,tt=t.startPoint,et=t.trackStyle,nt=t.handleStyle,rt=t.railStyle,it=t.dotStyle,ot=t.activeDotStyle,at=t.marks,st=t.dots,ut=t.handleRender,lt=t.activeHandleRender,ct=t.tabIndex,ht=void 0===ct?0:ct,dt=t.ariaLabelForHandle,ft=t.ariaLabelledByForHandle,pt=t.ariaValueTextFormatterForHandle,mt=f.useRef(null),gt=f.useRef(null),vt=f.useMemo((function(){return Z?K?"ttb":"btt":K?"rtl":"ltr"}),[K,Z]),yt=f.useMemo((function(){return isFinite(N)?N:0}),[N]),bt=f.useMemo((function(){return isFinite(L)?L:100}),[L]),xt=f.useMemo((function(){return null!==D&&D<=0?1:D}),[D]),wt=f.useMemo((function(){return"boolean"==typeof q?!!q&&xt:q>=0&&q}),[q,xt]),_t=f.useMemo((function(){return Object.keys(at||{}).map((function(t){var e=at[t],n={value:Number(t)};return e&&"object"===(0,s.A)(e)&&!f.isValidElement(e)&&("label"in e||"style"in e)?(n.style=e.style,n.label=e.label):n.label=e,n})).filter((function(t){var e=t.label;return e||"number"==typeof e})).sort((function(t,e){return t.value-e.value}))}),[at]),St=function(t,e,n,r,i,a){var s=f.useCallback((function(n){return Math.max(t,Math.min(e,n))}),[t,e]),u=f.useCallback((function(r){if(null!==n){var i=t+Math.round((s(r)-t)/n)*n,o=function(t){return(String(t).split(".")[1]||"").length},a=Math.max(o(n),o(e),o(t)),u=Number(i.toFixed(a));return t<=u&&u<=e?u:null}return null}),[n,t,e,s]),l=f.useCallback((function(i){var o=s(i),a=r.map((function(t){return t.value}));null!==n&&a.push(u(i)),a.push(t,e);var l=a[0],c=e-t;return a.forEach((function(t){var e=Math.abs(o-t);e<=c&&(l=t,c=e)})),l}),[t,e,r,n,s,u]),c=function i(a,s,l){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit";if("number"==typeof s){var h,d=a[l],f=d+s,p=[];r.forEach((function(t){p.push(t.value)})),p.push(t,e),p.push(u(d));var m=s>0?1:-1;"unit"===c?p.push(u(d+m*n)):p.push(u(f)),p=p.filter((function(t){return null!==t})).filter((function(t){return s<0?t<=d:t>=d})),"unit"===c&&(p=p.filter((function(t){return t!==d})));var g="unit"===c?d:f;h=p[0];var v=Math.abs(h-g);if(p.forEach((function(t){var e=Math.abs(t-g);e<v&&(h=t,v=e)})),void 0===h)return s<0?t:e;if("dist"===c)return h;if(Math.abs(s)>1){var y=(0,o.A)(a);return y[l]=h,i(y,s-m,l,c)}return h}return"min"===s?t:"max"===s?e:void 0},h=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit",i=t[n],o=c(t,e,n,r);return{value:o,changed:o!==i}},d=function(t){return null===a&&0===t||"number"==typeof a&&t<a};return[l,function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit",o=t.map(l),s=o[n],u=c(o,e,n,r);if(o[n]=u,!1===i){var f=a||0;n>0&&o[n-1]!==s&&(o[n]=Math.max(o[n],o[n-1]+f)),n<o.length-1&&o[n+1]!==s&&(o[n]=Math.min(o[n],o[n+1]-f))}else if("number"==typeof a||null===a){for(var p=n+1;p<o.length;p+=1)for(var m=!0;d(o[p]-o[p-1])&&m;){var g=h(o,1,p);o[p]=g.value,m=g.changed}for(var v=n;v>0;v-=1)for(var y=!0;d(o[v]-o[v-1])&&y;){var b=h(o,-1,v-1);o[v-1]=b.value,y=b.changed}for(var x=o.length-1;x>0;x-=1)for(var w=!0;d(o[x]-o[x-1])&&w;){var _=h(o,-1,x-1);o[x-1]=_.value,w=_.changed}for(var S=0;S<o.length-1;S+=1)for(var E=!0;d(o[S+1]-o[S])&&E;){var A=h(o,1,S+1);o[S+1]=A.value,E=A.changed}}return{value:o[n],values:o}}]}(yt,bt,xt,_t,X,wt),Et=(0,a.A)(St,2),At=Et[0],Mt=Et[1],Ct=(0,c.A)(F,{value:z}),Tt=(0,a.A)(Ct,2),kt=Tt[0],It=Tt[1],Nt=f.useMemo((function(){var t=null==kt?[]:Array.isArray(kt)?kt:[kt],e=(0,a.A)(t,1)[0],n=null===kt?[]:[void 0===e?yt:e];if(B){if(n=(0,o.A)(t),U||void 0===kt){var r=U>=0?U+1:2;for(n=n.slice(0,r);n.length<r;){var i;n.push(null!==(i=n[n.length-1])&&void 0!==i?i:yt)}}n.sort((function(t,e){return t-e}))}return n.forEach((function(t,e){n[e]=At(t)})),n}),[kt,B,yt,U,At]),Pt=f.useRef(Nt);Pt.current=Nt;var Ot=function(t){return B?t:t[0]},Lt=function(t){var e=(0,o.A)(t).sort((function(t,e){return t-e}));j&&!(0,h.A)(e,Pt.current,!0)&&j(Ot(e)),It(e)},Rt=function(){var t=Ot(Pt.current);null==H||H(t),(0,d.Ay)(!H,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),null==G||G(t)},Dt=O(gt,vt,Nt,yt,bt,At,Lt,Rt,Mt),zt=(0,a.A)(Dt,4),Ft=zt[0],Bt=zt[1],Ut=zt[2],jt=zt[3],Vt=function(t,e){if(!b){var n=0,r=bt-yt;Nt.forEach((function(e,i){var o=Math.abs(t-e);o<=r&&(r=o,n=i)}));var i,a,s=(0,o.A)(Nt);if(s[n]=t,B&&!Nt.length&&void 0===U&&s.push(t),null==V||V(Ot(s)),Lt(s),e)null===(i=document.activeElement)||void 0===i||null===(a=i.blur)||void 0===a||a.call(i),mt.current.focus(n),jt(e,n,s)}},Ht=f.useState(null),Gt=(0,a.A)(Ht,2),Wt=Gt[0],Xt=Gt[1];f.useEffect((function(){if(null!==Wt){var t=Nt.indexOf(Wt);t>=0&&mt.current.focus(t)}Xt(null)}),[Wt]);var Yt=f.useMemo((function(){return(!$||null!==xt)&&$}),[$,xt]),qt=function(t,e){jt(t,e),null==V||V(Ot(Pt.current))},$t=-1!==Ft;f.useEffect((function(){if(!$t){var t=Nt.lastIndexOf(Bt);mt.current.focus(t)}}),[$t]);var Kt=f.useMemo((function(){return(0,o.A)(Ut).sort((function(t,e){return t-e}))}),[Ut]),Zt=f.useMemo((function(){return B?[Kt[0],Kt[Kt.length-1]]:[yt,Kt[0]]}),[Kt,B,yt]),Qt=(0,a.A)(Zt,2),Jt=Qt[0],te=Qt[1];f.useImperativeHandle(e,(function(){return{focus:function(){mt.current.focus(0)},blur:function(){var t,e=document.activeElement;null!==(t=gt.current)&&void 0!==t&&t.contains(e)&&(null==e||e.blur())}}})),f.useEffect((function(){S&&mt.current.focus(0)}),[]);var ee=f.useMemo((function(){return{min:yt,max:bt,direction:vt,disabled:b,keyboard:_,step:xt,included:J,includedStart:Jt,includedEnd:te,range:B,tabIndex:ht,ariaLabelForHandle:dt,ariaLabelledByForHandle:ft,ariaValueTextFormatterForHandle:pt,styles:v||{},classNames:g||{}}}),[yt,bt,vt,b,_,xt,J,Jt,te,B,ht,dt,ft,pt,v,g]);return f.createElement(x.Provider,{value:ee},f.createElement("div",{ref:gt,className:l()(u,p,(0,i.A)((0,i.A)((0,i.A)((0,i.A)({},"".concat(u,"-disabled"),b),"".concat(u,"-vertical"),Z),"".concat(u,"-horizontal"),!Z),"".concat(u,"-with-marks"),_t.length)),style:m,onMouseDown:function(t){t.preventDefault();var e,n=gt.current.getBoundingClientRect(),r=n.width,i=n.height,o=n.left,a=n.top,s=n.bottom,u=n.right,l=t.clientX,c=t.clientY;switch(vt){case"btt":e=(s-c)/i;break;case"ttb":e=(c-a)/i;break;case"rtl":e=(u-l)/r;break;default:e=(l-o)/r}Vt(At(yt+e*(bt-yt)),t)}},f.createElement("div",{className:l()("".concat(u,"-rail"),null==g?void 0:g.rail),style:(0,r.A)((0,r.A)({},rt),null==v?void 0:v.rail)}),f.createElement(I,{prefixCls:u,style:et,values:Kt,startPoint:tt,onStartMove:Yt?qt:void 0}),f.createElement(T,{prefixCls:u,marks:_t,dots:st,style:it,activeStyle:ot}),f.createElement(E,{ref:mt,prefixCls:u,style:nt,values:Ut,draggingIndex:Ft,onStartMove:qt,onOffsetChange:function(t,e){if(!b){var n=Mt(Nt,t,e);null==V||V(Ot(Nt)),Lt(n.values),Xt(n.value)}},onFocus:A,onBlur:C,handleRender:ut,activeHandleRender:lt,onChangeComplete:Rt}),f.createElement(M,{prefixCls:u,marks:_t,onClick:Vt})))}))},9919:(t,e,n)=>{"use strict";n.d(e,{A:()=>C});var r,i=n(58168),o=n(64467),a=n(89379),s=n(60436),u=n(5544),l=n(53986),c=n(46942),h=n.n(c),d=n(48491),f=n(22489),p=n(11980),m=n(12533),g=n(96540),v=n(82284),y=n(18462),b=n(30981),x=n(25371),w=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],_={};function S(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;r||((r=document.createElement("textarea")).setAttribute("tab-index","-1"),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),t.getAttribute("wrap")?r.setAttribute("wrap",t.getAttribute("wrap")):r.removeAttribute("wrap");var o=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.getAttribute("id")||t.getAttribute("data-reactid")||t.getAttribute("name");if(e&&_[n])return _[n];var r=window.getComputedStyle(t),i=r.getPropertyValue("box-sizing")||r.getPropertyValue("-moz-box-sizing")||r.getPropertyValue("-webkit-box-sizing"),o=parseFloat(r.getPropertyValue("padding-bottom"))+parseFloat(r.getPropertyValue("padding-top")),a=parseFloat(r.getPropertyValue("border-bottom-width"))+parseFloat(r.getPropertyValue("border-top-width")),s={sizingStyle:w.map((function(t){return"".concat(t,":").concat(r.getPropertyValue(t))})).join(";"),paddingSize:o,borderSize:a,boxSizing:i};return e&&n&&(_[n]=s),s}(t,e),a=o.paddingSize,s=o.borderSize,u=o.boxSizing,l=o.sizingStyle;r.setAttribute("style","".concat(l,";").concat("\n  min-height:0 !important;\n  max-height:none !important;\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important;\n  pointer-events: none !important;\n")),r.value=t.value||t.placeholder||"";var c,h=void 0,d=void 0,f=r.scrollHeight;if("border-box"===u?f+=s:"content-box"===u&&(f-=a),null!==n||null!==i){r.value=" ";var p=r.scrollHeight-a;null!==n&&(h=p*n,"border-box"===u&&(h=h+a+s),f=Math.max(h,f)),null!==i&&(d=p*i,"border-box"===u&&(d=d+a+s),c=f>d?"":"hidden",f=Math.min(d,f))}var m={height:f,overflowY:c,resize:"none"};return h&&(m.minHeight=h),d&&(m.maxHeight=d),m}var E=["prefixCls","onPressEnter","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"];const A=g.forwardRef((function(t,e){var n=t,r=n.prefixCls,s=(n.onPressEnter,n.defaultValue),c=n.value,d=n.autoSize,f=n.onResize,p=n.className,w=n.style,_=n.disabled,A=n.onChange,M=(n.onInternalAutoSize,(0,l.A)(n,E)),C=(0,m.A)(s,{value:c,postState:function(t){return null!=t?t:""}}),T=(0,u.A)(C,2),k=T[0],I=T[1],N=g.useRef();g.useImperativeHandle(e,(function(){return{textArea:N.current}}));var P=g.useMemo((function(){return d&&"object"===(0,v.A)(d)?[d.minRows,d.maxRows]:[]}),[d]),O=(0,u.A)(P,2),L=O[0],R=O[1],D=!!d,z=g.useState(2),F=(0,u.A)(z,2),B=F[0],U=F[1],j=g.useState(),V=(0,u.A)(j,2),H=V[0],G=V[1],W=function(){U(0)};(0,b.A)((function(){D&&W()}),[c,L,R,D]),(0,b.A)((function(){if(0===B)U(1);else if(1===B){var t=S(N.current,!1,L,R);U(2),G(t)}else!function(){try{if(document.activeElement===N.current){var t=N.current,e=t.selectionStart,n=t.selectionEnd,r=t.scrollTop;N.current.setSelectionRange(e,n),N.current.scrollTop=r}}catch(t){}}()}),[B]);var X=g.useRef(),Y=function(){x.A.cancel(X.current)};g.useEffect((function(){return Y}),[]);var q=D?H:null,$=(0,a.A)((0,a.A)({},w),q);return 0!==B&&1!==B||($.overflowY="hidden",$.overflowX="hidden"),g.createElement(y.A,{onResize:function(t){2===B&&(null==f||f(t),d&&(Y(),X.current=(0,x.A)((function(){W()}))))},disabled:!(d||f)},g.createElement("textarea",(0,i.A)({},M,{ref:N,style:$,className:h()(r,p,(0,o.A)({},"".concat(r,"-disabled"),_)),disabled:_,value:k,onChange:function(t){I(t.target.value),null==A||A(t)}})))}));var M=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","showCount","count","className","style","disabled","hidden","classNames","styles","onResize"];const C=g.forwardRef((function(t,e){var n,r,c=t.defaultValue,v=t.value,y=t.onFocus,b=t.onBlur,x=t.onChange,w=t.allowClear,_=t.maxLength,S=t.onCompositionStart,E=t.onCompositionEnd,C=t.suffix,T=t.prefixCls,k=void 0===T?"rc-textarea":T,I=t.showCount,N=t.count,P=t.className,O=t.style,L=t.disabled,R=t.hidden,D=t.classNames,z=t.styles,F=t.onResize,B=(0,l.A)(t,M),U=(0,m.A)(c,{value:v,defaultValue:c}),j=(0,u.A)(U,2),V=j[0],H=j[1],G=null==V?"":String(V),W=g.useState(!1),X=(0,u.A)(W,2),Y=X[0],q=X[1],$=g.useRef(!1),K=g.useState(null),Z=(0,u.A)(K,2),Q=Z[0],J=Z[1],tt=(0,g.useRef)(null),et=function(){var t;return null===(t=tt.current)||void 0===t?void 0:t.textArea},nt=function(){et().focus()};(0,g.useImperativeHandle)(e,(function(){return{resizableTextArea:tt.current,focus:nt,blur:function(){et().blur()}}})),(0,g.useEffect)((function(){q((function(t){return!L&&t}))}),[L]);var rt=g.useState(null),it=(0,u.A)(rt,2),ot=it[0],at=it[1];g.useEffect((function(){var t;ot&&(t=et()).setSelectionRange.apply(t,(0,s.A)(ot))}),[ot]);var st,ut=(0,f.A)(N,I),lt=null!==(n=ut.max)&&void 0!==n?n:_,ct=Number(lt)>0,ht=ut.strategy(G),dt=!!lt&&ht>lt,ft=function(t,e){var n=e;!$.current&&ut.exceedFormatter&&ut.max&&ut.strategy(e)>ut.max&&e!==(n=ut.exceedFormatter(e,{max:ut.max}))&&at([et().selectionStart||0,et().selectionEnd||0]),H(n),(0,p.gS)(t.currentTarget,t,x,n)},pt=C;ut.show&&(st=ut.showFormatter?ut.showFormatter({value:G,count:ht,maxLength:lt}):"".concat(ht).concat(ct?" / ".concat(lt):""),pt=g.createElement(g.Fragment,null,pt,g.createElement("span",{className:h()("".concat(k,"-data-count"),null==D?void 0:D.count),style:null==z?void 0:z.count},st)));var mt=!B.autoSize&&!I&&!w;return g.createElement(d.a,{value:G,allowClear:w,handleReset:function(t){H(""),nt(),(0,p.gS)(et(),t,x)},suffix:pt,prefixCls:k,classNames:(0,a.A)((0,a.A)({},D),{},{affixWrapper:h()(null==D?void 0:D.affixWrapper,(r={},(0,o.A)(r,"".concat(k,"-show-count"),I),(0,o.A)(r,"".concat(k,"-textarea-allow-clear"),w),r))}),disabled:L,focused:Y,className:h()(P,dt&&"".concat(k,"-out-of-range")),style:(0,a.A)((0,a.A)({},O),Q&&!mt?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":"string"==typeof st?st:void 0}},hidden:R},g.createElement(A,(0,i.A)({},B,{maxLength:_,onKeyDown:function(t){var e=B.onPressEnter,n=B.onKeyDown;"Enter"===t.key&&e&&e(t),null==n||n(t)},onChange:function(t){ft(t,t.target.value)},onFocus:function(t){q(!0),null==y||y(t)},onBlur:function(t){q(!1),null==b||b(t)},onCompositionStart:function(t){$.current=!0,null==S||S(t)},onCompositionEnd:function(t){$.current=!1,ft(t,t.currentTarget.value),null==E||E(t)},className:h()(null==D?void 0:D.textarea),style:(0,a.A)((0,a.A)({},null==z?void 0:z.textarea),{},{resize:null==O?void 0:O.resize}),disabled:L,prefixCls:k,onResize:function(t){var e;null==F||F(t),null!==(e=et())&&void 0!==e&&e.style.height&&J(!0)},ref:tt})))}))},80427:(t,e,n)=>{"use strict";n.d(e,{z:()=>a,A:()=>v});var r=n(46942),i=n.n(r),o=n(96540);function a(t){var e=t.children,n=t.prefixCls,r=t.id,a=t.overlayInnerStyle,s=t.className,u=t.style;return o.createElement("div",{className:i()("".concat(n,"-content"),s),style:u},o.createElement("div",{className:"".concat(n,"-inner"),id:r,role:"tooltip",style:a},"function"==typeof e?e():e))}var s=n(58168),u=n(89379),l=n(53986),c=n(62427),h={shiftX:64,adjustY:1},d={adjustX:1,shiftY:!0},f=[0,0],p={left:{points:["cr","cl"],overflow:d,offset:[-4,0],targetOffset:f},right:{points:["cl","cr"],overflow:d,offset:[4,0],targetOffset:f},top:{points:["bc","tc"],overflow:h,offset:[0,-4],targetOffset:f},bottom:{points:["tc","bc"],overflow:h,offset:[0,4],targetOffset:f},topLeft:{points:["bl","tl"],overflow:h,offset:[0,-4],targetOffset:f},leftTop:{points:["tr","tl"],overflow:d,offset:[-4,0],targetOffset:f},topRight:{points:["br","tr"],overflow:h,offset:[0,-4],targetOffset:f},rightTop:{points:["tl","tr"],overflow:d,offset:[4,0],targetOffset:f},bottomRight:{points:["tr","br"],overflow:h,offset:[0,4],targetOffset:f},rightBottom:{points:["bl","br"],overflow:d,offset:[4,0],targetOffset:f},bottomLeft:{points:["tl","bl"],overflow:h,offset:[0,4],targetOffset:f},leftBottom:{points:["br","bl"],overflow:d,offset:[-4,0],targetOffset:f}};var m=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],g=function(t,e){var n=t.overlayClassName,r=t.trigger,i=void 0===r?["hover"]:r,h=t.mouseEnterDelay,d=void 0===h?0:h,f=t.mouseLeaveDelay,g=void 0===f?.1:f,v=t.overlayStyle,y=t.prefixCls,b=void 0===y?"rc-tooltip":y,x=t.children,w=t.onVisibleChange,_=t.afterVisibleChange,S=t.transitionName,E=t.animation,A=t.motion,M=t.placement,C=void 0===M?"right":M,T=t.align,k=void 0===T?{}:T,I=t.destroyTooltipOnHide,N=void 0!==I&&I,P=t.defaultVisible,O=t.getTooltipContainer,L=t.overlayInnerStyle,R=(t.arrowContent,t.overlay),D=t.id,z=t.showArrow,F=void 0===z||z,B=(0,l.A)(t,m),U=(0,o.useRef)(null);(0,o.useImperativeHandle)(e,(function(){return U.current}));var j=(0,u.A)({},B);"visible"in t&&(j.popupVisible=t.visible);return o.createElement(c.A,(0,s.A)({popupClassName:n,prefixCls:b,popup:function(){return o.createElement(a,{key:"content",prefixCls:b,id:D,overlayInnerStyle:L},R)},action:i,builtinPlacements:p,popupPlacement:C,ref:U,popupAlign:k,getPopupContainer:O,onPopupVisibleChange:w,afterPopupVisibleChange:_,popupTransitionName:S,popupAnimation:E,popupMotion:A,defaultPopupVisible:P,autoDestroy:N,mouseLeaveDelay:g,popupStyle:v,mouseEnterDelay:d,arrow:F},j),x)};const v=(0,o.forwardRef)(g)},40778:(t,e,n)=>{"use strict";n.d(e,{A:()=>P});var r=n(58168),i=n(23029),o=n(92901),a=n(9417),s=n(15361),u=n(29426),l=n(64467),c=n(96540),h=n(89379),d=n(53986),f=n(90675),p=n(82284),m=n(10467),g=n(60436),v=n(46942),y=n.n(v),b=n(72065),x=n(68210);const w=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(","),r=t.name||"",i=t.type||"",o=i.replace(/\/.*$/,"");return n.some((function(t){var e=t.trim();if(/^\*(\/\*)?$/.test(t))return!0;if("."===e.charAt(0)){var n=r.toLowerCase(),a=e.toLowerCase(),s=[a];return".jpg"!==a&&".jpeg"!==a||(s=[".jpg",".jpeg"]),s.some((function(t){return n.endsWith(t)}))}return/\/\*$/.test(e)?o===e.replace(/\/.*$/,""):i===e||!!/^\w+$/.test(e)&&((0,x.Ay)(!1,"Upload takes an invalidate 'accept' type '".concat(e,"'.Skip for check.")),!0)}))}return!0};function _(t){var e=t.responseText||t.response;if(!e)return e;try{return JSON.parse(e)}catch(t){return e}}function S(t){var e=new XMLHttpRequest;t.onProgress&&e.upload&&(e.upload.onprogress=function(e){e.total>0&&(e.percent=e.loaded/e.total*100),t.onProgress(e)});var n=new FormData;t.data&&Object.keys(t.data).forEach((function(e){var r=t.data[e];Array.isArray(r)?r.forEach((function(t){n.append("".concat(e,"[]"),t)})):n.append(e,r)})),t.file instanceof Blob?n.append(t.filename,t.file,t.file.name):n.append(t.filename,t.file),e.onerror=function(e){t.onError(e)},e.onload=function(){return e.status<200||e.status>=300?t.onError(function(t,e){var n="cannot ".concat(t.method," ").concat(t.action," ").concat(e.status,"'"),r=new Error(n);return r.status=e.status,r.method=t.method,r.url=t.action,r}(t,e),_(e)):t.onSuccess(_(e),e)},e.open(t.method,t.action,!0),t.withCredentials&&"withCredentials"in e&&(e.withCredentials=!0);var r=t.headers||{};return null!==r["X-Requested-With"]&&e.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(r).forEach((function(t){null!==r[t]&&e.setRequestHeader(t,r[t])})),e.send(n),{abort:function(){e.abort()}}}const E=function(t,e,n){var r=function t(r,i){r&&(r.path=i||"",r.isFile?r.file((function(t){n(t)&&(r.fullPath&&!t.webkitRelativePath&&(Object.defineProperties(t,{webkitRelativePath:{writable:!0}}),t.webkitRelativePath=r.fullPath.replace(/^\//,""),Object.defineProperties(t,{webkitRelativePath:{writable:!1}})),e([t]))})):r.isDirectory&&function(t,e){var n=t.createReader(),r=[];!function t(){n.readEntries((function(n){var i=Array.prototype.slice.apply(n);r=r.concat(i),i.length?t():e(r)}))}()}(r,(function(e){e.forEach((function(e){t(e,"".concat(i).concat(r.name,"/"))}))})))};t.forEach((function(t){r(t.webkitGetAsEntry())}))};var A=+new Date,M=0;function C(){return"rc-upload-".concat(A,"-").concat(++M)}var T=["component","prefixCls","className","classNames","disabled","id","style","styles","multiple","accept","capture","children","directory","openFileDialogOnClick","onMouseEnter","onMouseLeave","hasControlInside"];const k=function(t){(0,s.A)(n,t);var e=(0,u.A)(n);function n(){var t;(0,i.A)(this,n);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o)),(0,l.A)((0,a.A)(t),"state",{uid:C()}),(0,l.A)((0,a.A)(t),"reqs",{}),(0,l.A)((0,a.A)(t),"fileInput",void 0),(0,l.A)((0,a.A)(t),"_isMounted",void 0),(0,l.A)((0,a.A)(t),"onChange",(function(e){var n=t.props,r=n.accept,i=n.directory,o=e.target.files,a=(0,g.A)(o).filter((function(t){return!i||w(t,r)}));t.uploadFiles(a),t.reset()})),(0,l.A)((0,a.A)(t),"onClick",(function(e){var n=t.fileInput;if(n){var r=e.target,i=t.props.onClick;if(r&&"BUTTON"===r.tagName)n.parentNode.focus(),r.blur();n.click(),i&&i(e)}})),(0,l.A)((0,a.A)(t),"onKeyDown",(function(e){"Enter"===e.key&&t.onClick(e)})),(0,l.A)((0,a.A)(t),"onFileDrop",(function(e){var n=t.props.multiple;if(e.preventDefault(),"dragover"!==e.type)if(t.props.directory)E(Array.prototype.slice.call(e.dataTransfer.items),t.uploadFiles,(function(e){return w(e,t.props.accept)}));else{var r=(0,g.A)(e.dataTransfer.files).filter((function(e){return w(e,t.props.accept)}));!1===n&&(r=r.slice(0,1)),t.uploadFiles(r)}})),(0,l.A)((0,a.A)(t),"uploadFiles",(function(e){var n=(0,g.A)(e),r=n.map((function(e){return e.uid=C(),t.processFile(e,n)}));Promise.all(r).then((function(e){var n=t.props.onBatchStart;null==n||n(e.map((function(t){return{file:t.origin,parsedFile:t.parsedFile}}))),e.filter((function(t){return null!==t.parsedFile})).forEach((function(e){t.post(e)}))}))})),(0,l.A)((0,a.A)(t),"processFile",function(){var e=(0,m.A)((0,f.A)().mark((function e(n,r){var i,o,a,s,u,l,c,h,d;return(0,f.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.props.beforeUpload,o=n,!i){e.next=14;break}return e.prev=3,e.next=6,i(n,r);case 6:o=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),o=!1;case 12:if(!1!==o){e.next=14;break}return e.abrupt("return",{origin:n,parsedFile:null,action:null,data:null});case 14:if("function"!=typeof(a=t.props.action)){e.next=21;break}return e.next=18,a(n);case 18:s=e.sent,e.next=22;break;case 21:s=a;case 22:if("function"!=typeof(u=t.props.data)){e.next=29;break}return e.next=26,u(n);case 26:l=e.sent,e.next=30;break;case 29:l=u;case 30:return c="object"!==(0,p.A)(o)&&"string"!=typeof o||!o?n:o,h=c instanceof File?c:new File([c],n.name,{type:n.type}),(d=h).uid=n.uid,e.abrupt("return",{origin:n,data:l,parsedFile:d,action:s});case 35:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t,n){return e.apply(this,arguments)}}()),(0,l.A)((0,a.A)(t),"saveFileInput",(function(e){t.fileInput=e})),t}return(0,o.A)(n,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.abort()}},{key:"post",value:function(t){var e=this,n=t.data,r=t.origin,i=t.action,o=t.parsedFile;if(this._isMounted){var a=this.props,s=a.onStart,u=a.customRequest,l=a.name,c=a.headers,h=a.withCredentials,d=a.method,f=r.uid,p=u||S,m={action:i,filename:l,data:n,file:o,headers:c,withCredentials:h,method:d||"post",onProgress:function(t){var n=e.props.onProgress;null==n||n(t,o)},onSuccess:function(t,n){var r=e.props.onSuccess;null==r||r(t,o,n),delete e.reqs[f]},onError:function(t,n){var r=e.props.onError;null==r||r(t,n,o),delete e.reqs[f]}};s(r),this.reqs[f]=p(m)}}},{key:"reset",value:function(){this.setState({uid:C()})}},{key:"abort",value:function(t){var e=this.reqs;if(t){var n=t.uid?t.uid:t;e[n]&&e[n].abort&&e[n].abort(),delete e[n]}else Object.keys(e).forEach((function(t){e[t]&&e[t].abort&&e[t].abort(),delete e[t]}))}},{key:"render",value:function(){var t,e=this.props,n=e.component,i=e.prefixCls,o=e.className,a=e.classNames,s=void 0===a?{}:a,u=e.disabled,f=e.id,p=e.style,m=e.styles,g=void 0===m?{}:m,v=e.multiple,x=e.accept,w=e.capture,_=e.children,S=e.directory,E=e.openFileDialogOnClick,A=e.onMouseEnter,M=e.onMouseLeave,C=e.hasControlInside,k=(0,d.A)(e,T),I=y()((t={},(0,l.A)(t,i,!0),(0,l.A)(t,"".concat(i,"-disabled"),u),(0,l.A)(t,o,o),t)),N=S?{directory:"directory",webkitdirectory:"webkitdirectory"}:{},P=u?{}:{onClick:E?this.onClick:function(){},onKeyDown:E?this.onKeyDown:function(){},onMouseEnter:A,onMouseLeave:M,onDrop:this.onFileDrop,onDragOver:this.onFileDrop,tabIndex:C?void 0:"0"};return c.createElement(n,(0,r.A)({},P,{className:I,role:C?void 0:"button",style:p}),c.createElement("input",(0,r.A)({},(0,b.A)(k,{aria:!0,data:!0}),{id:f,disabled:u,type:"file",ref:this.saveFileInput,onClick:function(t){return t.stopPropagation()},key:this.state.uid,style:(0,h.A)({display:"none"},g.input),className:s.input,accept:x},N,{multiple:v,onChange:this.onChange},null!=w?{capture:w}:{})),_)}}]),n}(c.Component);function I(){}var N=function(t){(0,s.A)(n,t);var e=(0,u.A)(n);function n(){var t;(0,i.A)(this,n);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o)),(0,l.A)((0,a.A)(t),"uploader",void 0),(0,l.A)((0,a.A)(t),"saveUploader",(function(e){t.uploader=e})),t}return(0,o.A)(n,[{key:"abort",value:function(t){this.uploader.abort(t)}},{key:"render",value:function(){return c.createElement(k,(0,r.A)({},this.props,{ref:this.saveUploader}))}}]),n}(c.Component);(0,l.A)(N,"defaultProps",{component:"span",prefixCls:"rc-upload",data:{},headers:{},name:"file",multipart:!1,onStart:I,onError:I,onSuccess:I,multiple:!1,beforeUpload:null,customRequest:null,withCredentials:!1,openFileDialogOnClick:!0,hasControlInside:!1});const P=N},82546:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var r=n(96540),i=n(66351);function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];return r.Children.forEach(t,(function(t){(null!=t||e.keepEmpty)&&(Array.isArray(t)?n=n.concat(o(t)):(0,i.isFragment)(t)&&t.props?n=n.concat(o(t.props.children,e)):n.push(t))})),n}},20998:(t,e,n)=>{"use strict";function r(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}n.d(e,{A:()=>r})},54808:(t,e,n)=>{"use strict";function r(t,e){if(!t)return!1;if(t.contains)return t.contains(e);for(var n=e;n;){if(n===t)return!0;n=n.parentNode}return!1}n.d(e,{A:()=>r})},85089:(t,e,n)=>{"use strict";n.d(e,{BD:()=>g,m6:()=>m});var r=n(89379),i=n(20998),o=n(54808),a="data-rc-order",s="data-rc-priority",u="rc-util-key",l=new Map;function c(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).mark;return t?t.startsWith("data-")?t:"data-".concat(t):u}function h(t){return t.attachTo?t.attachTo:document.querySelector("head")||document.body}function d(t){return Array.from((l.get(t)||t).children).filter((function(t){return"STYLE"===t.tagName}))}function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,i.A)())return null;var n=e.csp,r=e.prepend,o=e.priority,u=void 0===o?0:o,l=function(t){return"queue"===t?"prependQueue":t?"prepend":"append"}(r),c="prependQueue"===l,f=document.createElement("style");f.setAttribute(a,l),c&&u&&f.setAttribute(s,"".concat(u)),null!=n&&n.nonce&&(f.nonce=null==n?void 0:n.nonce),f.innerHTML=t;var p=h(e),m=p.firstChild;if(r){if(c){var g=(e.styles||d(p)).filter((function(t){if(!["prepend","prependQueue"].includes(t.getAttribute(a)))return!1;var e=Number(t.getAttribute(s)||0);return u>=e}));if(g.length)return p.insertBefore(f,g[g.length-1].nextSibling),f}p.insertBefore(f,m)}else p.appendChild(f);return f}function p(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=h(e);return(e.styles||d(n)).find((function(n){return n.getAttribute(c(e))===t}))}function m(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=p(t,e);n&&h(e).removeChild(n)}function g(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=h(n),a=d(i),s=(0,r.A)((0,r.A)({},n),{},{styles:a});!function(t,e){var n=l.get(t);if(!n||!(0,o.A)(document,n)){var r=f("",e),i=r.parentNode;l.set(t,i),t.removeChild(r)}}(i,s);var u=p(e,s);if(u){var m,g,v;if(null!==(m=s.csp)&&void 0!==m&&m.nonce&&u.nonce!==(null===(g=s.csp)||void 0===g?void 0:g.nonce))u.nonce=null===(v=s.csp)||void 0===v?void 0:v.nonce;return u.innerHTML!==t&&(u.innerHTML=t),u}var y=f(t,s);return y.setAttribute(c(s),e),y}},66588:(t,e,n)=>{"use strict";n.d(e,{A:()=>a,f:()=>o});var r=n(96540),i=n(40961);function o(t){return t instanceof HTMLElement||t instanceof SVGElement}function a(t){return o(t)?t:t instanceof r.Component?i.findDOMNode(t):null}},42467:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r=function(t){if(!t)return!1;if(t instanceof Element){if(t.offsetParent)return!0;if(t.getBBox){var e=t.getBBox(),n=e.width,r=e.height;if(n||r)return!0}if(t.getBoundingClientRect){var i=t.getBoundingClientRect(),o=i.width,a=i.height;if(o||a)return!0}}return!1}},72633:(t,e,n)=>{"use strict";function r(t){var e;return null==t||null===(e=t.getRootNode)||void 0===e?void 0:e.call(t)}function i(t){return function(t){return r(t)instanceof ShadowRoot}(t)?r(t):null}n.d(e,{j:()=>i})},16928:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});var r={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(t){var e=t.keyCode;if(t.altKey&&!t.ctrlKey||t.metaKey||e>=r.F1&&e<=r.F12)return!1;switch(e){case r.ALT:case r.CAPS_LOCK:case r.CONTEXT_MENU:case r.CTRL:case r.DOWN:case r.END:case r.ESC:case r.HOME:case r.INSERT:case r.LEFT:case r.MAC_FF_META:case r.META:case r.NUMLOCK:case r.NUM_CENTER:case r.PAGE_DOWN:case r.PAGE_UP:case r.PAUSE:case r.PRINT_SCREEN:case r.RIGHT:case r.SHIFT:case r.UP:case r.WIN_KEY:case r.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(t){if(t>=r.ZERO&&t<=r.NINE)return!0;if(t>=r.NUM_ZERO&&t<=r.NUM_MULTIPLY)return!0;if(t>=r.A&&t<=r.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===t)return!0;switch(t){case r.SPACE:case r.QUESTION_MARK:case r.NUM_PLUS:case r.NUM_MINUS:case r.NUM_PERIOD:case r.NUM_DIVISION:case r.SEMICOLON:case r.DASH:case r.EQUALS:case r.COMMA:case r.PERIOD:case r.SLASH:case r.APOSTROPHE:case r.SINGLE_QUOTE:case r.OPEN_SQUARE_BRACKET:case r.BACKSLASH:case r.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};const i=r},14832:(t,e,n)=>{"use strict";var r;n.d(e,{X:()=>g,v:()=>x});var i,o=n(90675),a=n(10467),s=n(82284),u=n(89379),l=n(40961),c=(0,u.A)({},r||(r=n.t(l,2))),h=c.version,d=c.render,f=c.unmountComponentAtNode;try{Number((h||"").split(".")[0])>=18&&(i=c.createRoot)}catch(t){}function p(t){var e=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;e&&"object"===(0,s.A)(e)&&(e.usingClientEntryPoint=t)}var m="__rc_react_root__";function g(t,e){i?function(t,e){p(!0);var n=e[m]||i(e);p(!1),n.render(t),e[m]=n}(t,e):function(t,e){d(t,e)}(t,e)}function v(t){return y.apply(this,arguments)}function y(){return(y=(0,a.A)((0,o.A)().mark((function t(e){return(0,o.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.resolve().then((function(){var t;null===(t=e[m])||void 0===t||t.unmount(),delete e[m]})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function b(t){f(t)}function x(t){return w.apply(this,arguments)}function w(){return(w=(0,a.A)((0,o.A)().mark((function t(e){return(0,o.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===i){t.next=2;break}return t.abrupt("return",v(e));case 2:b(e);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},26956:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});var r=n(96540);function i(t){var e=r.useRef();e.current=t;var n=r.useCallback((function(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return null===(t=e.current)||void 0===t?void 0:t.call.apply(t,[e].concat(r))}),[]);return n}},56855:(t,e,n)=>{"use strict";var r;n.d(e,{A:()=>l});var i=n(5544),o=n(89379),a=n(96540);var s=0;var u=(0,o.A)({},r||(r=n.t(a,2))).useId;const l=u?function(t){var e=u();return t||e}:function(t){var e=a.useState("ssr-id"),n=(0,i.A)(e,2),r=n[0],o=n[1];return a.useEffect((function(){var t=s;s+=1,o("rc_unique_".concat(t))}),[]),t||r}},30981:(t,e,n)=>{"use strict";n.d(e,{A:()=>s,o:()=>a});var r=n(96540),i=(0,n(20998).A)()?r.useLayoutEffect:r.useEffect,o=function(t,e){var n=r.useRef(!0);i((function(){return t(n.current)}),e),i((function(){return n.current=!1,function(){n.current=!0}}),[])},a=function(t,e){o((function(e){if(!e)return t()}),e)};const s=o},28104:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});var r=n(96540);function i(t,e,n){var i=r.useRef({});return"value"in i.current&&!n(i.current.condition,e)||(i.current.value=t(),i.current.condition=e),i.current.value}},12533:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(5544),i=n(26956),o=n(30981),a=n(1233);function s(t){return void 0!==t}function u(t,e){var n=e||{},u=n.defaultValue,l=n.value,c=n.onChange,h=n.postState,d=(0,a.A)((function(){return s(l)?l:s(u)?"function"==typeof u?u():u:"function"==typeof t?t():t})),f=(0,r.A)(d,2),p=f[0],m=f[1],g=void 0!==l?l:p,v=h?h(g):g,y=(0,i.A)(c),b=(0,a.A)([g]),x=(0,r.A)(b,2),w=x[0],_=x[1];return(0,o.o)((function(){var t=w[0];p!==t&&y(p,t)}),[w]),(0,o.o)((function(){s(l)||m(l)}),[l]),[v,(0,i.A)((function(t,e){m(t,e),_([g],e)}))]}},1233:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var r=n(5544),i=n(96540);function o(t){var e=i.useRef(!1),n=i.useState(t),o=(0,r.A)(n,2),a=o[0],s=o[1];return i.useEffect((function(){return e.current=!1,function(){e.current=!0}}),[]),[a,function(t,n){n&&e.current||s(t)}]}},81470:(t,e,n)=>{"use strict";n.d(e,{_q:()=>r.A});var r=n(26956);n(12533),n(8719),n(20488),n(68210)},43210:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var r=n(82284),i=n(68210);const o=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=new Set;return function t(e,a){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,u=o.has(e);if((0,i.Ay)(!u,"Warning: There may be circular references"),u)return!1;if(e===a)return!0;if(n&&s>1)return!1;o.add(e);var l=s+1;if(Array.isArray(e)){if(!Array.isArray(a)||e.length!==a.length)return!1;for(var c=0;c<e.length;c++)if(!t(e[c],a[c],l))return!1;return!0}if(e&&a&&"object"===(0,r.A)(e)&&"object"===(0,r.A)(a)){var h=Object.keys(e);return h.length===Object.keys(a).length&&h.every((function(n){return t(e[n],a[n],l)}))}return!1}(t,e)}},68430:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r=function(){if("undefined"==typeof navigator||"undefined"==typeof window)return!1;var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(null==t?void 0:t.substr(0,4))}},19853:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});var r=n(89379);function i(t,e){var n=(0,r.A)({},t);return Array.isArray(e)&&e.forEach((function(t){delete n[t]})),n}},72065:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(89379),i="".concat("accept acceptCharset accessKey action allowFullScreen allowTransparency\n    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge\n    charSet checked classID className colSpan cols content contentEditable contextMenu\n    controls coords crossOrigin data dateTime default defer dir disabled download draggable\n    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder\n    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity\n    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media\n    mediaGroup method min minLength multiple muted name noValidate nonce open\n    optimum pattern placeholder poster preload radioGroup readOnly rel required\n    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected\n    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style\n    summary tabIndex target title type useMap value width wmode wrap"," ").concat("onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown\n    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick\n    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown\n    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel\n    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough\n    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata\n    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError").split(/[\s\n]+/),o="aria-",a="data-";function s(t,e){return 0===t.indexOf(e)}function u(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e=!1===n?{aria:!0,data:!0,attr:!0}:!0===n?{aria:!0}:(0,r.A)({},n);var u={};return Object.keys(t).forEach((function(n){(e.aria&&("role"===n||s(n,o))||e.data&&s(n,a)||e.attr&&i.includes(n))&&(u[n]=t[n])})),u}},25371:(t,e,n)=>{"use strict";n.d(e,{A:()=>l});var r=function(t){return+setTimeout(t,16)},i=function(t){return clearTimeout(t)};"undefined"!=typeof window&&"requestAnimationFrame"in window&&(r=function(t){return window.requestAnimationFrame(t)},i=function(t){return window.cancelAnimationFrame(t)});var o=0,a=new Map;function s(t){a.delete(t)}var u=function(t){var e=o+=1;return function n(i){if(0===i)s(e),t();else{var o=r((function(){n(i-1)}));a.set(e,o)}}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),e};u.cancel=function(t){var e=a.get(t);return s(t),i(e)};const l=u},8719:(t,e,n)=>{"use strict";n.d(e,{K4:()=>s,Xf:()=>a,f3:()=>l,xK:()=>u});var r=n(82284),i=(n(96540),n(66351)),o=n(28104);function a(t,e){"function"==typeof t?t(e):"object"===(0,r.A)(t)&&t&&"current"in t&&(t.current=e)}function s(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.filter((function(t){return t}));return r.length<=1?r[0]:function(t){e.forEach((function(e){a(e,t)}))}}function u(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,o.A)((function(){return s.apply(void 0,e)}),e,(function(t,e){return t.length!==e.length||t.every((function(t,n){return t!==e[n]}))}))}function l(t){var e,n,r=(0,i.isMemo)(t)?t.type.type:t.type;return!!("function"!=typeof r||null!==(e=r.prototype)&&void 0!==e&&e.render||r.$$typeof===i.ForwardRef)&&!!("function"!=typeof t||null!==(n=t.prototype)&&void 0!==n&&n.render||t.$$typeof===i.ForwardRef)}},16300:(t,e,n)=>{"use strict";function r(t,e){for(var n=t,r=0;r<e.length;r+=1){if(null==n)return;n=n[e[r]]}return n}n.d(e,{A:()=>r})},20488:(t,e,n)=>{"use strict";n.d(e,{A:()=>l,h:()=>d});var r=n(82284),i=n(89379),o=n(60436),a=n(87695),s=n(16300);function u(t,e,n,r){if(!e.length)return n;var s,l=(0,a.A)(e),c=l[0],h=l.slice(1);return s=t||"number"!=typeof c?Array.isArray(t)?(0,o.A)(t):(0,i.A)({},t):[],r&&void 0===n&&1===h.length?delete s[c][h[0]]:s[c]=u(s[c],h,n,r),s}function l(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e.length&&r&&void 0===n&&!(0,s.A)(t,e.slice(0,-1))?t:u(t,e,n,r)}function c(t){return Array.isArray(t)?[]:{}}var h="undefined"==typeof Reflect?Object.keys:Reflect.ownKeys;function d(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=c(e[0]);return e.forEach((function(t){!function e(n,a){var u,d=new Set(a),f=(0,s.A)(t,n),p=Array.isArray(f);if(p||(u=f,"object"===(0,r.A)(u)&&null!==u&&Object.getPrototypeOf(u)===Object.prototype)){if(!d.has(f)){d.add(f);var m=(0,s.A)(i,n);p?i=l(i,n,[]):m&&"object"===(0,r.A)(m)||(i=l(i,n,c(f))),h(f).forEach((function(t){e([].concat((0,o.A)(n),[t]),d)}))}}else i=l(i,n,f)}([])})),i}},68210:(t,e,n)=>{"use strict";n.d(e,{$e:()=>o,Ay:()=>l});var r={},i=[];function o(t,e){}function a(t,e){}function s(t,e,n){e||r[n]||(t(!1,n),r[n]=!0)}function u(t,e){s(o,t,e)}u.preMessage=function(t){i.push(t)},u.resetWarned=function(){r={}},u.noteOnce=function(t,e){s(a,t,e)};const l=u},57787:(t,e)=>{"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.server_context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");
/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function v(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case o:case s:case a:case d:case f:return t;default:switch(t=t&&t.$$typeof){case c:case l:case h:case m:case p:case u:return t;default:return e}}case i:return e}}}n=Symbol.for("react.module.reference"),e.ForwardRef=h,e.isFragment=function(t){return v(t)===o},e.isMemo=function(t){return v(t)===p}},66351:(t,e,n)=>{"use strict";t.exports=n(57787)},22551:(t,e,n)=>{"use strict";
/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(96540),i=n(69982);function o(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function u(t,e){l(t,e),l(t+"Capture",e)}function l(t,e){for(s[t]=e,t=0;t<e.length;t++)a.add(e[t])}var c=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(t,e,n,r,i,o,a){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){g[t]=new m(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];g[e]=new m(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){g[t]=new m(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){g[t]=new m(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){g[t]=new m(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){g[t]=new m(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){g[t]=new m(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){g[t]=new m(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){g[t]=new m(t,5,!1,t.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(t){return t[1].toUpperCase()}function b(t,e,n,r){var i=g.hasOwnProperty(e)?g[e]:null;(null!==i?0!==i.type:r||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,r){if(null==e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!h.call(p,t)||!h.call(f,t)&&(d.test(t)?p[t]=!0:(f[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(v,y);g[e]=new m(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(v,y);g[e]=new m(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(v,y);g[e]=new m(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){g[t]=new m(t,1,!1,t.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){g[t]=new m(t,1,!1,t.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),C=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function R(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=L&&t[L]||t["@@iterator"])?t:null}var D,z=Object.assign;function F(t){if(void 0===D)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);D=e&&e[1]||""}return"\n"+D+t}var B=!1;function U(t,e){if(!t||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(t){var r=t}Reflect.construct(t,[],e)}else{try{e.call()}catch(t){r=t}t.call(e.prototype)}else{try{throw Error()}catch(t){r=t}t()}}catch(e){if(e&&r&&"string"==typeof e.stack){for(var i=e.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var u="\n"+i[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}}while(1<=a&&0<=s);break}}}finally{B=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?F(t):""}function j(t){switch(t.tag){case 5:return F(t.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return t=U(t.type,!1);case 11:return t=U(t.type.render,!1);case 1:return t=U(t.type,!0);default:return""}}function V(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case S:return"Fragment";case _:return"Portal";case A:return"Profiler";case E:return"StrictMode";case k:return"Suspense";case I:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case C:return(t.displayName||"Context")+".Consumer";case M:return(t._context.displayName||"Context")+".Provider";case T:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case N:return null!==(e=t.displayName||null)?e:V(t.type)||"Memo";case P:e=t._payload,t=t._init;try{return V(t(e))}catch(t){}}return null}function H(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(e);case 8:return e===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e}return null}function G(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function W(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function X(t){t._valueTracker||(t._valueTracker=function(t){var e=W(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function Y(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=W(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function q(t){if(void 0===(t=t||("undefined"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function $(t,e){var n=e.checked;return z({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function K(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=G(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function Z(t,e){null!=(e=e.checked)&&b(t,"checked",e,!1)}function Q(t,e){Z(t,e);var n=G(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,n):e.hasOwnProperty("defaultValue")&&tt(t,e.type,G(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function J(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function tt(t,e,n){"number"===e&&q(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var et=Array.isArray;function nt(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+G(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function rt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(o(91));return z({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function it(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(o(92));if(et(n)){if(1<n.length)throw Error(o(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:G(n)}}function ot(t,e){var n=G(e.value),r=G(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function at(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function st(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ut(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?st(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var lt,ct,ht=(ct=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((lt=lt||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=lt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,r){MSApp.execUnsafeLocalFunction((function(){return ct(t,e)}))}:ct);function dt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pt=["Webkit","ms","Moz","O"];function mt(t,e,n){return null==e||"boolean"==typeof e||""===e?"":n||"number"!=typeof e||0===e||ft.hasOwnProperty(t)&&ft[t]?(""+e).trim():e+"px"}function gt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=mt(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(ft).forEach((function(t){pt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ft[e]=ft[t]}))}));var vt=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yt(t,e){if(e){if(vt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(o(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(o(60));if("object"!=typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=e.style&&"object"!=typeof e.style)throw Error(o(62))}}function bt(t,e){if(-1===t.indexOf("-"))return"string"==typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xt=null;function wt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var _t=null,St=null,Et=null;function At(t){if(t=bi(t)){if("function"!=typeof _t)throw Error(o(280));var e=t.stateNode;e&&(e=wi(e),_t(t.stateNode,t.type,e))}}function Mt(t){St?Et?Et.push(t):Et=[t]:St=t}function Ct(){if(St){var t=St,e=Et;if(Et=St=null,At(t),e)for(t=0;t<e.length;t++)At(e[t])}}function Tt(t,e){return t(e)}function kt(){}var It=!1;function Nt(t,e,n){if(It)return t(e,n);It=!0;try{return Tt(t,e,n)}finally{It=!1,(null!==St||null!==Et)&&(kt(),Ct())}}function Pt(t,e){var n=t.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!=typeof n)throw Error(o(231,e,typeof n));return n}var Ot=!1;if(c)try{var Lt={};Object.defineProperty(Lt,"passive",{get:function(){Ot=!0}}),window.addEventListener("test",Lt,Lt),window.removeEventListener("test",Lt,Lt)}catch(ct){Ot=!1}function Rt(t,e,n,r,i,o,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(t){this.onError(t)}}var Dt=!1,zt=null,Ft=!1,Bt=null,Ut={onError:function(t){Dt=!0,zt=t}};function jt(t,e,n,r,i,o,a,s,u){Dt=!1,zt=null,Rt.apply(Ut,arguments)}function Vt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{!!(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Ht(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Gt(t){if(Vt(t)!==t)throw Error(o(188))}function Wt(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=Vt(t)))throw Error(o(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Gt(i),t;if(a===r)return Gt(i),e;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?t:e}(t))?Xt(t):null}function Xt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=Xt(t);if(null!==e)return e;t=t.sibling}return null}var Yt=i.unstable_scheduleCallback,qt=i.unstable_cancelCallback,$t=i.unstable_shouldYield,Kt=i.unstable_requestPaint,Zt=i.unstable_now,Qt=i.unstable_getCurrentPriorityLevel,Jt=i.unstable_ImmediatePriority,te=i.unstable_UserBlockingPriority,ee=i.unstable_NormalPriority,ne=i.unstable_LowPriority,re=i.unstable_IdlePriority,ie=null,oe=null;var ae=Math.clz32?Math.clz32:function(t){return t>>>=0,0===t?32:31-(se(t)/ue|0)|0},se=Math.log,ue=Math.LN2;var le=64,ce=4194304;function he(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function de(t,e){var n=t.pendingLanes;if(0===n)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=he(s):0!==(o&=a)&&(r=he(o))}else 0!==(a=n&~i)?r=he(a):0!==o&&(r=he(o));if(0===r)return 0;if(0!==e&&e!==r&&!(e&i)&&((i=r&-r)>=(o=e&-e)||16===i&&4194240&o))return e;if(4&r&&(r|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)i=1<<(n=31-ae(e)),r|=t[n],e&=~i;return r}function fe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function pe(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function me(){var t=le;return!(4194240&(le<<=1))&&(le=64),t}function ge(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ve(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-ae(e)]=n}function ye(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ae(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var be=0;function xe(t){return 1<(t&=-t)?4<t?268435455&t?16:536870912:4:1}var we,_e,Se,Ee,Ae,Me=!1,Ce=[],Te=null,ke=null,Ie=null,Ne=new Map,Pe=new Map,Oe=[],Le="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Re(t,e){switch(t){case"focusin":case"focusout":Te=null;break;case"dragenter":case"dragleave":ke=null;break;case"mouseover":case"mouseout":Ie=null;break;case"pointerover":case"pointerout":Ne.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pe.delete(e.pointerId)}}function De(t,e,n,r,i,o){return null===t||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==e&&(null!==(e=bi(e))&&_e(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function ze(t){var e=yi(t.target);if(null!==e){var n=Vt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Ht(n)))return t.blockedOn=e,void Ae(t.priority,(function(){Se(n)}))}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function Fe(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=$e(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=bi(n))&&_e(e),t.blockedOn=n,!1;var r=new(n=t.nativeEvent).constructor(n.type,n);xt=r,n.target.dispatchEvent(r),xt=null,e.shift()}return!0}function Be(t,e,n){Fe(t)&&n.delete(e)}function Ue(){Me=!1,null!==Te&&Fe(Te)&&(Te=null),null!==ke&&Fe(ke)&&(ke=null),null!==Ie&&Fe(Ie)&&(Ie=null),Ne.forEach(Be),Pe.forEach(Be)}function je(t,e){t.blockedOn===e&&(t.blockedOn=null,Me||(Me=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ue)))}function Ve(t){function e(e){return je(e,t)}if(0<Ce.length){je(Ce[0],t);for(var n=1;n<Ce.length;n++){var r=Ce[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==Te&&je(Te,t),null!==ke&&je(ke,t),null!==Ie&&je(Ie,t),Ne.forEach(e),Pe.forEach(e),n=0;n<Oe.length;n++)(r=Oe[n]).blockedOn===t&&(r.blockedOn=null);for(;0<Oe.length&&null===(n=Oe[0]).blockedOn;)ze(n),null===n.blockedOn&&Oe.shift()}var He=x.ReactCurrentBatchConfig,Ge=!0;function We(t,e,n,r){var i=be,o=He.transition;He.transition=null;try{be=1,Ye(t,e,n,r)}finally{be=i,He.transition=o}}function Xe(t,e,n,r){var i=be,o=He.transition;He.transition=null;try{be=4,Ye(t,e,n,r)}finally{be=i,He.transition=o}}function Ye(t,e,n,r){if(Ge){var i=$e(t,e,n,r);if(null===i)Gr(t,e,r,qe,n),Re(t,r);else if(function(t,e,n,r,i){switch(e){case"focusin":return Te=De(Te,t,e,n,r,i),!0;case"dragenter":return ke=De(ke,t,e,n,r,i),!0;case"mouseover":return Ie=De(Ie,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Ne.set(o,De(Ne.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Pe.set(o,De(Pe.get(o)||null,t,e,n,r,i)),!0}return!1}(i,t,e,n,r))r.stopPropagation();else if(Re(t,r),4&e&&-1<Le.indexOf(t)){for(;null!==i;){var o=bi(i);if(null!==o&&we(o),null===(o=$e(t,e,n,r))&&Gr(t,e,r,qe,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Gr(t,e,r,null,n)}}var qe=null;function $e(t,e,n,r){if(qe=null,null!==(t=yi(t=wt(r))))if(null===(e=Vt(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=Ht(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return qe=t,null}function Ke(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qt()){case Jt:return 1;case te:return 4;case ee:case ne:return 16;case re:return 536870912;default:return 16}default:return 16}}var Ze=null,Qe=null,Je=null;function tn(){if(Je)return Je;var t,e,n=Qe,r=n.length,i="value"in Ze?Ze.value:Ze.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);return Je=i.slice(t,1<e?1-e:void 0)}function en(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function nn(){return!0}function rn(){return!1}function on(t){function e(e,n,r,i,o){for(var a in this._reactName=e,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,t)t.hasOwnProperty(a)&&(e=t[a],this[a]=e?e(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return z(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),e}var an,sn,un,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=on(ln),hn=z({},ln,{view:0,detail:0}),dn=on(hn),fn=z({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:An,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==un&&(un&&"mousemove"===t.type?(an=t.screenX-un.screenX,sn=t.screenY-un.screenY):sn=an=0,un=t),an)},movementY:function(t){return"movementY"in t?t.movementY:sn}}),pn=on(fn),mn=on(z({},fn,{dataTransfer:0})),gn=on(z({},hn,{relatedTarget:0})),vn=on(z({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=z({},ln,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bn=on(yn),xn=on(z({},ln,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Sn[t])&&!!e[t]}function An(){return En}var Mn=z({},hn,{key:function(t){if(t.key){var e=wn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=en(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?_n[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:An,charCode:function(t){return"keypress"===t.type?en(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?en(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),Cn=on(Mn),Tn=on(z({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),kn=on(z({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:An})),In=on(z({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=z({},fn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=on(Nn),On=[9,13,27,32],Ln=c&&"CompositionEvent"in window,Rn=null;c&&"documentMode"in document&&(Rn=document.documentMode);var Dn=c&&"TextEvent"in window&&!Rn,zn=c&&(!Ln||Rn&&8<Rn&&11>=Rn),Fn=String.fromCharCode(32),Bn=!1;function Un(t,e){switch(t){case"keyup":return-1!==On.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(t){return"object"==typeof(t=t.detail)&&"data"in t?t.data:null}var Vn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Hn[t.type]:"textarea"===e}function Wn(t,e,n,r){Mt(r),0<(e=Xr(e,"onChange")).length&&(n=new cn("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Xn=null,Yn=null;function qn(t){Fr(t,0)}function $n(t){if(Y(xi(t)))return t}function Kn(t,e){if("change"===t)return e}var Zn=!1;if(c){var Qn;if(c){var Jn="oninput"in document;if(!Jn){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),Jn="function"==typeof tr.oninput}Qn=Jn}else Qn=!1;Zn=Qn&&(!document.documentMode||9<document.documentMode)}function er(){Xn&&(Xn.detachEvent("onpropertychange",nr),Yn=Xn=null)}function nr(t){if("value"===t.propertyName&&$n(Yn)){var e=[];Wn(e,Yn,t,wt(t)),Nt(qn,e)}}function rr(t,e,n){"focusin"===t?(er(),Yn=n,(Xn=e).attachEvent("onpropertychange",nr)):"focusout"===t&&er()}function ir(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return $n(Yn)}function or(t,e){if("click"===t)return $n(e)}function ar(t,e){if("input"===t||"change"===t)return $n(e)}var sr="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e};function ur(t,e){if(sr(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(e,i)||!sr(t[i],e[i]))return!1}return!0}function lr(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cr(t,e){var n,r=lr(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=lr(r)}}function hr(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?hr(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function dr(){for(var t=window,e=q();e instanceof t.HTMLIFrameElement;){try{var n="string"==typeof e.contentWindow.location.href}catch(t){n=!1}if(!n)break;e=q((t=e.contentWindow).document)}return e}function fr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function pr(t){var e=dr(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(e=r.start,void 0===(t=r.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=cr(n,o);var a=cr(n,r);i&&a&&(1!==t.rangeCount||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&((e=e.createRange()).setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,br=!1;function xr(t,e,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ur(yr,r)||(yr=r,0<(r=Xr(vr,"onSelect")).length&&(e=new cn("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=gr)))}function wr(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Sr={},Er={};function Ar(t){if(Sr[t])return Sr[t];if(!_r[t])return t;var e,n=_r[t];for(e in n)if(n.hasOwnProperty(e)&&e in Er)return Sr[t]=n[e];return t}c&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Mr=Ar("animationend"),Cr=Ar("animationiteration"),Tr=Ar("animationstart"),kr=Ar("transitionend"),Ir=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(t,e){Ir.set(t,e),u(e,[t])}for(var Or=0;Or<Nr.length;Or++){var Lr=Nr[Or];Pr(Lr.toLowerCase(),"on"+(Lr[0].toUpperCase()+Lr.slice(1)))}Pr(Mr,"onAnimationEnd"),Pr(Cr,"onAnimationIteration"),Pr(Tr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(kr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function zr(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,r,i,a,s,u,l){if(jt.apply(this,arguments),Dt){if(!Dt)throw Error(o(198));var c=zt;Dt=!1,zt=null,Ft||(Ft=!0,Bt=c)}}(r,e,void 0,t),t.currentTarget=null}function Fr(t,e){e=!!(4&e);for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;t:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break t;zr(i,s,l),o=u}else for(a=0;a<r.length;a++){if(u=(s=r[a]).instance,l=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break t;zr(i,s,l),o=u}}}if(Ft)throw t=Bt,Ft=!1,Bt=null,t}function Br(t,e){var n=e[mi];void 0===n&&(n=e[mi]=new Set);var r=t+"__bubble";n.has(r)||(Hr(e,t,2,!1),n.add(r))}function Ur(t,e,n){var r=0;e&&(r|=4),Hr(n,t,r,e)}var jr="_reactListening"+Math.random().toString(36).slice(2);function Vr(t){if(!t[jr]){t[jr]=!0,a.forEach((function(e){"selectionchange"!==e&&(Dr.has(e)||Ur(e,!1,t),Ur(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[jr]||(e[jr]=!0,Ur("selectionchange",!1,e))}}function Hr(t,e,n,r){switch(Ke(e)){case 1:var i=We;break;case 4:i=Xe;break;default:i=Ye}n=i.bind(null,e,n,t),i=void 0,!Ot||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),r?void 0!==i?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):void 0!==i?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Gr(t,e,n,r,i){var o=r;if(!(1&e||2&e||null===r))t:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&((u=a.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=yi(s)))return;if(5===(u=a.tag)||6===u){r=o=a;continue t}s=s.parentNode}}r=r.return}Nt((function(){var r=o,i=wt(n),a=[];t:{var s=Ir.get(t);if(void 0!==s){var u=cn,l=t;switch(t){case"keypress":if(0===en(n))break t;case"keydown":case"keyup":u=Cn;break;case"focusin":l="focus",u=gn;break;case"focusout":l="blur",u=gn;break;case"beforeblur":case"afterblur":u=gn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=kn;break;case Mr:case Cr:case Tr:u=vn;break;case kr:u=In;break;case"scroll":u=dn;break;case"wheel":u=Pn;break;case"copy":case"cut":case"paste":u=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Tn}var c=!!(4&e),h=!c&&"scroll"===t,d=c?null!==s?s+"Capture":null:s;c=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Pt(p,d))&&c.push(Wr(p,m,f)))),h)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,i),a.push({event:s,listeners:c}))}}if(!(7&e)){if(u="mouseout"===t||"pointerout"===t,(!(s="mouseover"===t||"pointerover"===t)||n===xt||!(l=n.relatedTarget||n.fromElement)||!yi(l)&&!l[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?yi(l):null)&&(l!==(h=Vt(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==t&&"pointerover"!==t||(c=Tn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==u?s:xi(u),f=null==l?s:xi(l),(s=new c(m,p+"leave",u,n,i)).target=h,s.relatedTarget=f,m=null,yi(i)===r&&((c=new c(d,p+"enter",l,n,i)).target=f,c.relatedTarget=h,m=c),h=m,u&&l)t:{for(d=l,p=0,f=c=u;f;f=Yr(f))p++;for(f=0,m=d;m;m=Yr(m))f++;for(;0<p-f;)c=Yr(c),p--;for(;0<f-p;)d=Yr(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break t;c=Yr(c),d=Yr(d)}c=null}else c=null;null!==u&&qr(a,s,u,c,!1),null!==l&&null!==h&&qr(a,h,l,c,!0)}if("select"===(u=(s=r?xi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var g=Kn;else if(Gn(s))if(Zn)g=ar;else{g=ir;var v=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=or);switch(g&&(g=g(t,r))?Wn(a,g,n,i):(v&&v(t,s,r),"focusout"===t&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&tt(s,"number",s.value)),v=r?xi(r):window,t){case"focusin":(Gn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(a,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(a,n,i)}var y;if(Ln)t:{switch(t){case"compositionstart":var b="onCompositionStart";break t;case"compositionend":b="onCompositionEnd";break t;case"compositionupdate":b="onCompositionUpdate";break t}b=void 0}else Vn?Un(t,n)&&(b="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(b="onCompositionStart");b&&(zn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vn&&(y=tn()):(Qe="value"in(Ze=i)?Ze.value:Ze.textContent,Vn=!0)),0<(v=Xr(r,b)).length&&(b=new xn(b,t,null,n,i),a.push({event:b,listeners:v}),y?b.data=y:null!==(y=jn(n))&&(b.data=y))),(y=Dn?function(t,e){switch(t){case"compositionend":return jn(e);case"keypress":return 32!==e.which?null:(Bn=!0,Fn);case"textInput":return(t=e.data)===Fn&&Bn?null:t;default:return null}}(t,n):function(t,e){if(Vn)return"compositionend"===t||!Ln&&Un(t,e)?(t=tn(),Je=Qe=Ze=null,Vn=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return zn&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(r=Xr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}Fr(a,e)}))}function Wr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Xr(t,e){for(var n=e+"Capture",r=[];null!==t;){var i=t,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Pt(t,n))&&r.unshift(Wr(t,o,i)),null!=(o=Pt(t,e))&&r.push(Wr(t,o,i))),t=t.return}return r}function Yr(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function qr(t,e,n,r,i){for(var o=e._reactName,a=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,i?null!=(u=Pt(n,o))&&a.unshift(Wr(n,u,s)):i||null!=(u=Pt(n,o))&&a.push(Wr(n,u,s))),n=n.return}0!==a.length&&t.push({event:e,listeners:a})}var $r=/\r\n?/g,Kr=/\u0000|\uFFFD/g;function Zr(t){return("string"==typeof t?t:""+t).replace($r,"\n").replace(Kr,"")}function Qr(t,e,n){if(e=Zr(e),Zr(t)!==e&&n)throw Error(o(425))}function Jr(){}var ti=null,ei=null;function ni(t,e){return"textarea"===t||"noscript"===t||"string"==typeof e.children||"number"==typeof e.children||"object"==typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ri="function"==typeof setTimeout?setTimeout:void 0,ii="function"==typeof clearTimeout?clearTimeout:void 0,oi="function"==typeof Promise?Promise:void 0,ai="function"==typeof queueMicrotask?queueMicrotask:void 0!==oi?function(t){return oi.resolve(null).then(t).catch(si)}:ri;function si(t){setTimeout((function(){throw t}))}function ui(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return t.removeChild(i),void Ve(e);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Ve(e)}function li(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function ci(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function yi(t){var e=t[di];if(e)return e;for(var n=t.parentNode;n;){if(e=n[pi]||n[di]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=ci(t);null!==t;){if(n=t[di])return n;t=ci(t)}return e}n=(t=n).parentNode}return null}function bi(t){return!(t=t[di]||t[pi])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function xi(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(o(33))}function wi(t){return t[fi]||null}var _i=[],Si=-1;function Ei(t){return{current:t}}function Ai(t){0>Si||(t.current=_i[Si],_i[Si]=null,Si--)}function Mi(t,e){Si++,_i[Si]=t.current,t.current=e}var Ci={},Ti=Ei(Ci),ki=Ei(!1),Ii=Ci;function Ni(t,e){var n=t.type.contextTypes;if(!n)return Ci;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Pi(t){return null!=(t=t.childContextTypes)}function Oi(){Ai(ki),Ai(Ti)}function Li(t,e,n){if(Ti.current!==Ci)throw Error(o(168));Mi(Ti,e),Mi(ki,n)}function Ri(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(o(108,H(t)||"Unknown",i));return z({},n,r)}function Di(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ci,Ii=Ti.current,Mi(Ti,t),Mi(ki,ki.current),!0}function zi(t,e,n){var r=t.stateNode;if(!r)throw Error(o(169));n?(t=Ri(t,e,Ii),r.__reactInternalMemoizedMergedChildContext=t,Ai(ki),Ai(Ti),Mi(Ti,t)):Ai(ki),Mi(ki,n)}var Fi=null,Bi=!1,Ui=!1;function ji(t){null===Fi?Fi=[t]:Fi.push(t)}function Vi(){if(!Ui&&null!==Fi){Ui=!0;var t=0,e=be;try{var n=Fi;for(be=1;t<n.length;t++){var r=n[t];do{r=r(!0)}while(null!==r)}Fi=null,Bi=!1}catch(e){throw null!==Fi&&(Fi=Fi.slice(t+1)),Yt(Jt,Vi),e}finally{be=e,Ui=!1}}return null}var Hi=[],Gi=0,Wi=null,Xi=0,Yi=[],qi=0,$i=null,Ki=1,Zi="";function Qi(t,e){Hi[Gi++]=Xi,Hi[Gi++]=Wi,Wi=t,Xi=e}function Ji(t,e,n){Yi[qi++]=Ki,Yi[qi++]=Zi,Yi[qi++]=$i,$i=t;var r=Ki;t=Zi;var i=32-ae(r)-1;r&=~(1<<i),n+=1;var o=32-ae(e)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Ki=1<<32-ae(e)+i|n<<i|r,Zi=o+t}else Ki=1<<o|n<<i|r,Zi=t}function to(t){null!==t.return&&(Qi(t,1),Ji(t,1,0))}function eo(t){for(;t===Wi;)Wi=Hi[--Gi],Hi[Gi]=null,Xi=Hi[--Gi],Hi[Gi]=null;for(;t===$i;)$i=Yi[--qi],Yi[qi]=null,Zi=Yi[--qi],Yi[qi]=null,Ki=Yi[--qi],Yi[qi]=null}var no=null,ro=null,io=!1,oo=null;function ao(t,e){var n=Nl(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function so(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,no=t,ro=li(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,no=t,ro=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==$i?{id:Ki,overflow:Zi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Nl(18,null,null,0)).stateNode=e,n.return=t,t.child=n,no=t,ro=null,!0);default:return!1}}function uo(t){return!(!(1&t.mode)||128&t.flags)}function lo(t){if(io){var e=ro;if(e){var n=e;if(!so(t,e)){if(uo(t))throw Error(o(418));e=li(n.nextSibling);var r=no;e&&so(t,e)?ao(r,n):(t.flags=-4097&t.flags|2,io=!1,no=t)}}else{if(uo(t))throw Error(o(418));t.flags=-4097&t.flags|2,io=!1,no=t}}}function co(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;no=t}function ho(t){if(t!==no)return!1;if(!io)return co(t),io=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!ni(t.type,t.memoizedProps)),e&&(e=ro)){if(uo(t))throw fo(),Error(o(418));for(;e;)ao(t,e),e=li(e.nextSibling)}if(co(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(o(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){ro=li(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}ro=null}}else ro=no?li(t.stateNode.nextSibling):null;return!0}function fo(){for(var t=ro;t;)t=li(t.nextSibling)}function po(){ro=no=null,io=!1}function mo(t){null===oo?oo=[t]:oo.push(t)}var go=x.ReactCurrentBatchConfig;function vo(t,e,n){if(null!==(t=n.ref)&&"function"!=typeof t&&"object"!=typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,t));var i=r,a=""+t;return null!==e&&null!==e.ref&&"function"==typeof e.ref&&e.ref._stringRef===a?e.ref:(e=function(t){var e=i.refs;null===t?delete e[a]:e[a]=t},e._stringRef=a,e)}if("string"!=typeof t)throw Error(o(284));if(!n._owner)throw Error(o(290,t))}return t}function yo(t,e){throw t=Object.prototype.toString.call(e),Error(o(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function bo(t){return(0,t._init)(t._payload)}function xo(t){function e(e,n){if(t){var r=e.deletions;null===r?(e.deletions=[n],e.flags|=16):r.push(n)}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Ol(t,e)).index=0,t.sibling=null,t}function a(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.flags|=2,n):r:(e.flags|=2,n):(e.flags|=1048576,n)}function s(e){return t&&null===e.alternate&&(e.flags|=2),e}function u(t,e,n,r){return null===e||6!==e.tag?((e=zl(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function l(t,e,n,r){var o=n.type;return o===S?h(t,e,n.props.children,r,n.key):null!==e&&(e.elementType===o||"object"==typeof o&&null!==o&&o.$$typeof===P&&bo(o)===e.type)?((r=i(e,n.props)).ref=vo(t,e,n),r.return=t,r):((r=Ll(n.type,n.key,n.props,null,t.mode,r)).ref=vo(t,e,n),r.return=t,r)}function c(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Fl(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function h(t,e,n,r,o){return null===e||7!==e.tag?((e=Rl(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function d(t,e,n){if("string"==typeof e&&""!==e||"number"==typeof e)return(e=zl(""+e,t.mode,n)).return=t,e;if("object"==typeof e&&null!==e){switch(e.$$typeof){case w:return(n=Ll(e.type,e.key,e.props,null,t.mode,n)).ref=vo(t,null,e),n.return=t,n;case _:return(e=Fl(e,t.mode,n)).return=t,e;case P:return d(t,(0,e._init)(e._payload),n)}if(et(e)||R(e))return(e=Rl(e,t.mode,n,null)).return=t,e;yo(t,e)}return null}function f(t,e,n,r){var i=null!==e?e.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:u(t,e,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?l(t,e,n,r):null;case _:return n.key===i?c(t,e,n,r):null;case P:return f(t,e,(i=n._init)(n._payload),r)}if(et(n)||R(n))return null!==i?null:h(t,e,n,r,null);yo(t,n)}return null}function p(t,e,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return u(e,t=t.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case w:return l(e,t=t.get(null===r.key?n:r.key)||null,r,i);case _:return c(e,t=t.get(null===r.key?n:r.key)||null,r,i);case P:return p(t,e,n,(0,r._init)(r._payload),i)}if(et(r)||R(r))return h(e,t=t.get(n)||null,r,i,null);yo(e,r)}return null}function m(i,o,s,u){for(var l=null,c=null,h=o,m=o=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=f(i,h,s[m],u);if(null===v){null===h&&(h=g);break}t&&h&&null===v.alternate&&e(i,h),o=a(v,o,m),null===c?l=v:c.sibling=v,c=v,h=g}if(m===s.length)return n(i,h),io&&Qi(i,m),l;if(null===h){for(;m<s.length;m++)null!==(h=d(i,s[m],u))&&(o=a(h,o,m),null===c?l=h:c.sibling=h,c=h);return io&&Qi(i,m),l}for(h=r(i,h);m<s.length;m++)null!==(g=p(h,i,m,s[m],u))&&(t&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=a(g,o,m),null===c?l=g:c.sibling=g,c=g);return t&&h.forEach((function(t){return e(i,t)})),io&&Qi(i,m),l}function g(i,s,u,l){var c=R(u);if("function"!=typeof c)throw Error(o(150));if(null==(u=c.call(u)))throw Error(o(151));for(var h=c=null,m=s,g=s=0,v=null,y=u.next();null!==m&&!y.done;g++,y=u.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=f(i,m,y.value,l);if(null===b){null===m&&(m=v);break}t&&m&&null===b.alternate&&e(i,m),s=a(b,s,g),null===h?c=b:h.sibling=b,h=b,m=v}if(y.done)return n(i,m),io&&Qi(i,g),c;if(null===m){for(;!y.done;g++,y=u.next())null!==(y=d(i,y.value,l))&&(s=a(y,s,g),null===h?c=y:h.sibling=y,h=y);return io&&Qi(i,g),c}for(m=r(i,m);!y.done;g++,y=u.next())null!==(y=p(m,i,g,y.value,l))&&(t&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=a(y,s,g),null===h?c=y:h.sibling=y,h=y);return t&&m.forEach((function(t){return e(i,t)})),io&&Qi(i,g),c}return function t(r,o,a,u){if("object"==typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"==typeof a&&null!==a){switch(a.$$typeof){case w:t:{for(var l=a.key,c=o;null!==c;){if(c.key===l){if((l=a.type)===S){if(7===c.tag){n(r,c.sibling),(o=i(c,a.props.children)).return=r,r=o;break t}}else if(c.elementType===l||"object"==typeof l&&null!==l&&l.$$typeof===P&&bo(l)===c.type){n(r,c.sibling),(o=i(c,a.props)).ref=vo(r,c,a),o.return=r,r=o;break t}n(r,c);break}e(r,c),c=c.sibling}a.type===S?((o=Rl(a.props.children,r.mode,u,a.key)).return=r,r=o):((u=Ll(a.type,a.key,a.props,null,r.mode,u)).ref=vo(r,o,a),u.return=r,r=u)}return s(r);case _:t:{for(c=a.key;null!==o;){if(o.key===c){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break t}n(r,o);break}e(r,o),o=o.sibling}(o=Fl(a,r.mode,u)).return=r,r=o}return s(r);case P:return t(r,o,(c=a._init)(a._payload),u)}if(et(a))return m(r,o,a,u);if(R(a))return g(r,o,a,u);yo(r,a)}return"string"==typeof a&&""!==a||"number"==typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=zl(a,r.mode,u)).return=r,r=o),s(r)):n(r,o)}}var wo=xo(!0),_o=xo(!1),So=Ei(null),Eo=null,Ao=null,Mo=null;function Co(){Mo=Ao=Eo=null}function To(t){var e=So.current;Ai(So),t._currentValue=e}function ko(t,e,n){for(;null!==t;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==r&&(r.childLanes|=e)):null!==r&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Io(t,e){Eo=t,Mo=Ao=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(!!(t.lanes&e)&&(bs=!0),t.firstContext=null)}function No(t){var e=t._currentValue;if(Mo!==t)if(t={context:t,memoizedValue:e,next:null},null===Ao){if(null===Eo)throw Error(o(308));Ao=t,Eo.dependencies={lanes:0,firstContext:t}}else Ao=Ao.next=t;return e}var Po=null;function Oo(t){null===Po?Po=[t]:Po.push(t)}function Lo(t,e,n,r){var i=e.interleaved;return null===i?(n.next=n,Oo(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ro(t,r)}function Ro(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}var Do=!1;function zo(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fo(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Bo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Uo(t,e,n){var r=t.updateQueue;if(null===r)return null;if(r=r.shared,2&Tu){var i=r.pending;return null===i?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ro(t,n)}return null===(i=r.interleaved)?(e.next=e,Oo(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ro(t,n)}function jo(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,4194240&n)){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,ye(t,n)}}function Vo(t,e){var n=t.updateQueue,r=t.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=e:o=o.next=e}else i=o=e;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ho(t,e,n,r){var i=t.updateQueue;Do=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,l=u.next;u.next=null,null===a?o=l:a.next=l,a=u;var c=t.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===s?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(null!==o){var h=i.baseState;for(a=0,c=l=u=null,s=o;;){var d=s.lane,f=s.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});t:{var p=t,m=s;switch(d=e,f=n,m.tag){case 1:if("function"==typeof(p=m.payload)){h=p.call(f,h,d);break t}h=p;break t;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(d="function"==typeof(p=m.payload)?p.call(f,h,d):p))break t;h=z({},h,d);break t;case 2:Do=!0}}null!==s.callback&&0!==s.lane&&(t.flags|=64,null===(d=i.effects)?i.effects=[s]:d.push(s))}else f={eventTime:f,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(l=c=f,u=h):c=c.next=f,a|=d;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(d=s).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(u=h),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,null!==(e=i.shared.interleaved)){i=e;do{a|=i.lane,i=i.next}while(i!==e)}else null===o&&(i.shared.lanes=0);Du|=a,t.lanes=a,t.memoizedState=h}}function Go(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(o(191,i));i.call(r)}}}var Wo={},Xo=Ei(Wo),Yo=Ei(Wo),qo=Ei(Wo);function $o(t){if(t===Wo)throw Error(o(174));return t}function Ko(t,e){switch(Mi(qo,e),Mi(Yo,t),Mi(Xo,Wo),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ut(null,"");break;default:e=ut(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}Ai(Xo),Mi(Xo,e)}function Zo(){Ai(Xo),Ai(Yo),Ai(qo)}function Qo(t){$o(qo.current);var e=$o(Xo.current),n=ut(e,t.type);e!==n&&(Mi(Yo,t),Mi(Xo,n))}function Jo(t){Yo.current===t&&(Ai(Xo),Ai(Yo))}var ta=Ei(0);function ea(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(128&e.flags)return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var na=[];function ra(){for(var t=0;t<na.length;t++)na[t]._workInProgressVersionPrimary=null;na.length=0}var ia=x.ReactCurrentDispatcher,oa=x.ReactCurrentBatchConfig,aa=0,sa=null,ua=null,la=null,ca=!1,ha=!1,da=0,fa=0;function pa(){throw Error(o(321))}function ma(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!sr(t[n],e[n]))return!1;return!0}function ga(t,e,n,r,i,a){if(aa=a,sa=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ia.current=null===t||null===t.memoizedState?Ja:ts,t=n(r,i),ha){a=0;do{if(ha=!1,da=0,25<=a)throw Error(o(301));a+=1,la=ua=null,e.updateQueue=null,ia.current=es,t=n(r,i)}while(ha)}if(ia.current=Qa,e=null!==ua&&null!==ua.next,aa=0,la=ua=sa=null,ca=!1,e)throw Error(o(300));return t}function va(){var t=0!==da;return da=0,t}function ya(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?sa.memoizedState=la=t:la=la.next=t,la}function ba(){if(null===ua){var t=sa.alternate;t=null!==t?t.memoizedState:null}else t=ua.next;var e=null===la?sa.memoizedState:la.next;if(null!==e)la=e,ua=t;else{if(null===t)throw Error(o(310));t={memoizedState:(ua=t).memoizedState,baseState:ua.baseState,baseQueue:ua.baseQueue,queue:ua.queue,next:null},null===la?sa.memoizedState=la=t:la=la.next=t}return la}function xa(t,e){return"function"==typeof e?e(t):e}function wa(t){var e=ba(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var r=ua,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var u=s=null,l=null,c=a;do{var h=c.lane;if((aa&h)===h)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(u=l=d,s=r):l=l.next=d,sa.lanes|=h,Du|=h}c=c.next}while(null!==c&&c!==a);null===l?s=r:l.next=u,sr(r,e.memoizedState)||(bs=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,n.lastRenderedState=r}if(null!==(t=n.interleaved)){i=t;do{a=i.lane,sa.lanes|=a,Du|=a,i=i.next}while(i!==t)}else null===i&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function _a(t){var e=ba(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=t(a,s.action),s=s.next}while(s!==i);sr(a,e.memoizedState)||(bs=!0),e.memoizedState=a,null===e.baseQueue&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function Sa(){}function Ea(t,e){var n=sa,r=ba(),i=e(),a=!sr(r.memoizedState,i);if(a&&(r.memoizedState=i,bs=!0),r=r.queue,Da(Ca.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Na(9,Ma.bind(null,n,r,i,e),void 0,null),null===ku)throw Error(o(349));30&aa||Aa(n,e,i)}return i}function Aa(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=sa.updateQueue)?(e={lastEffect:null,stores:null},sa.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function Ma(t,e,n,r){e.value=n,e.getSnapshot=r,Ta(e)&&ka(t)}function Ca(t,e,n){return n((function(){Ta(e)&&ka(t)}))}function Ta(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!sr(t,n)}catch(t){return!0}}function ka(t){var e=Ro(t,1);null!==e&&nl(e,t,1,-1)}function Ia(t){var e=ya();return"function"==typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:t},e.queue=t,t=t.dispatch=qa.bind(null,sa,t),[e.memoizedState,t]}function Na(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=sa.updateQueue)?(e={lastEffect:null,stores:null},sa.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function Pa(){return ba().memoizedState}function Oa(t,e,n,r){var i=ya();sa.flags|=t,i.memoizedState=Na(1|e,n,void 0,void 0===r?null:r)}function La(t,e,n,r){var i=ba();r=void 0===r?null:r;var o=void 0;if(null!==ua){var a=ua.memoizedState;if(o=a.destroy,null!==r&&ma(r,a.deps))return void(i.memoizedState=Na(e,n,o,r))}sa.flags|=t,i.memoizedState=Na(1|e,n,o,r)}function Ra(t,e){return Oa(8390656,8,t,e)}function Da(t,e){return La(2048,8,t,e)}function za(t,e){return La(4,2,t,e)}function Fa(t,e){return La(4,4,t,e)}function Ba(t,e){return"function"==typeof e?(t=t(),e(t),function(){e(null)}):null!=e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Ua(t,e,n){return n=null!=n?n.concat([t]):null,La(4,4,Ba.bind(null,e,t),n)}function ja(){}function Va(t,e){var n=ba();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&ma(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ha(t,e){var n=ba();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&ma(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ga(t,e,n){return 21&aa?(sr(n,e)||(n=me(),sa.lanes|=n,Du|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,bs=!0),t.memoizedState=n)}function Wa(t,e){var n=be;be=0!==n&&4>n?n:4,t(!0);var r=oa.transition;oa.transition={};try{t(!1),e()}finally{be=n,oa.transition=r}}function Xa(){return ba().memoizedState}function Ya(t,e,n){var r=el(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$a(t))Ka(e,n);else if(null!==(n=Lo(t,e,n,r))){nl(n,t,r,tl()),Za(n,e,r)}}function qa(t,e,n){var r=el(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($a(t))Ka(e,i);else{var o=t.alternate;if(0===t.lanes&&(null===o||0===o.lanes)&&null!==(o=e.lastRenderedReducer))try{var a=e.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,a)){var u=e.interleaved;return null===u?(i.next=i,Oo(e)):(i.next=u.next,u.next=i),void(e.interleaved=i)}}catch(t){}null!==(n=Lo(t,e,i,r))&&(nl(n,t,r,i=tl()),Za(n,e,r))}}function $a(t){var e=t.alternate;return t===sa||null!==e&&e===sa}function Ka(t,e){ha=ca=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Za(t,e,n){if(4194240&n){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,ye(t,n)}}var Qa={readContext:No,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},Ja={readContext:No,useCallback:function(t,e){return ya().memoizedState=[t,void 0===e?null:e],t},useContext:No,useEffect:Ra,useImperativeHandle:function(t,e,n){return n=null!=n?n.concat([t]):null,Oa(4194308,4,Ba.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Oa(4194308,4,t,e)},useInsertionEffect:function(t,e){return Oa(4,2,t,e)},useMemo:function(t,e){var n=ya();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ya();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Ya.bind(null,sa,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},ya().memoizedState=t},useState:Ia,useDebugValue:ja,useDeferredValue:function(t){return ya().memoizedState=t},useTransition:function(){var t=Ia(!1),e=t[0];return t=Wa.bind(null,t[1]),ya().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=sa,i=ya();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=e(),null===ku)throw Error(o(349));30&aa||Aa(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,Ra(Ca.bind(null,r,a,t),[t]),r.flags|=2048,Na(9,Ma.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=ya(),e=ku.identifierPrefix;if(io){var n=Zi;e=":"+e+"R"+(n=(Ki&~(1<<32-ae(Ki)-1)).toString(32)+n),0<(n=da++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=fa++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ts={readContext:No,useCallback:Va,useContext:No,useEffect:Da,useImperativeHandle:Ua,useInsertionEffect:za,useLayoutEffect:Fa,useMemo:Ha,useReducer:wa,useRef:Pa,useState:function(){return wa(xa)},useDebugValue:ja,useDeferredValue:function(t){return Ga(ba(),ua.memoizedState,t)},useTransition:function(){return[wa(xa)[0],ba().memoizedState]},useMutableSource:Sa,useSyncExternalStore:Ea,useId:Xa,unstable_isNewReconciler:!1},es={readContext:No,useCallback:Va,useContext:No,useEffect:Da,useImperativeHandle:Ua,useInsertionEffect:za,useLayoutEffect:Fa,useMemo:Ha,useReducer:_a,useRef:Pa,useState:function(){return _a(xa)},useDebugValue:ja,useDeferredValue:function(t){var e=ba();return null===ua?e.memoizedState=t:Ga(e,ua.memoizedState,t)},useTransition:function(){return[_a(xa)[0],ba().memoizedState]},useMutableSource:Sa,useSyncExternalStore:Ea,useId:Xa,unstable_isNewReconciler:!1};function ns(t,e){if(t&&t.defaultProps){for(var n in e=z({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}function rs(t,e,n,r){n=null==(n=n(r,e=t.memoizedState))?e:z({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var is={isMounted:function(t){return!!(t=t._reactInternals)&&Vt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=tl(),i=el(t),o=Bo(r,i);o.payload=e,null!=n&&(o.callback=n),null!==(e=Uo(t,o,i))&&(nl(e,t,i,r),jo(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=tl(),i=el(t),o=Bo(r,i);o.tag=1,o.payload=e,null!=n&&(o.callback=n),null!==(e=Uo(t,o,i))&&(nl(e,t,i,r),jo(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=tl(),r=el(t),i=Bo(n,r);i.tag=2,null!=e&&(i.callback=e),null!==(e=Uo(t,i,r))&&(nl(e,t,r,n),jo(e,t,r))}};function os(t,e,n,r,i,o,a){return"function"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,a):!e.prototype||!e.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,o))}function as(t,e,n){var r=!1,i=Ci,o=e.contextType;return"object"==typeof o&&null!==o?o=No(o):(i=Pi(e)?Ii:Ti.current,o=(r=null!=(r=e.contextTypes))?Ni(t,i):Ci),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=is,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function ss(t,e,n,r){t=e.state,"function"==typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"==typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&is.enqueueReplaceState(e,e.state,null)}function us(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},zo(t);var o=e.contextType;"object"==typeof o&&null!==o?i.context=No(o):(o=Pi(e)?Ii:Ti.current,i.context=Ni(t,o)),i.state=t.memoizedState,"function"==typeof(o=e.getDerivedStateFromProps)&&(rs(t,e,o,n),i.state=t.memoizedState),"function"==typeof e.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(e=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&is.enqueueReplaceState(i,i.state,null),Ho(t,n,i,r),i.state=t.memoizedState),"function"==typeof i.componentDidMount&&(t.flags|=4194308)}function ls(t,e){try{var n="",r=e;do{n+=j(r),r=r.return}while(r);var i=n}catch(t){i="\nError generating stack: "+t.message+"\n"+t.stack}return{value:t,source:e,stack:i,digest:null}}function cs(t,e,n){return{value:t,source:null,stack:null!=n?n:null,digest:null!=e?e:null}}function hs(t,e){try{console.error(e.value)}catch(t){setTimeout((function(){throw t}))}}var ds="function"==typeof WeakMap?WeakMap:Map;function fs(t,e,n){(n=Bo(-1,n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Gu||(Gu=!0,Wu=r),hs(0,e)},n}function ps(t,e,n){(n=Bo(-1,n)).tag=3;var r=t.type.getDerivedStateFromError;if("function"==typeof r){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){hs(0,e)}}var o=t.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){hs(0,e),"function"!=typeof r&&(null===Xu?Xu=new Set([this]):Xu.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function ms(t,e,n){var r=t.pingCache;if(null===r){r=t.pingCache=new ds;var i=new Set;r.set(e,i)}else void 0===(i=r.get(e))&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Al.bind(null,t,e,n),e.then(t,t))}function gs(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function vs(t,e,n,r,i){return 1&t.mode?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=Bo(-1,1)).tag=2,Uo(n,e,1))),n.lanes|=1),t)}var ys=x.ReactCurrentOwner,bs=!1;function xs(t,e,n,r){e.child=null===t?_o(e,null,n,r):wo(e,t.child,n,r)}function ws(t,e,n,r,i){n=n.render;var o=e.ref;return Io(e,i),r=ga(t,e,n,r,o,i),n=va(),null===t||bs?(io&&n&&to(e),e.flags|=1,xs(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Gs(t,e,i))}function _s(t,e,n,r,i){if(null===t){var o=n.type;return"function"!=typeof o||Pl(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Ll(n.type,null,r,e,e.mode,i)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=o,Ss(t,e,o,r,i))}if(o=t.child,!(t.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(a,r)&&t.ref===e.ref)return Gs(t,e,i)}return e.flags|=1,(t=Ol(o,r)).ref=e.ref,t.return=e,e.child=t}function Ss(t,e,n,r,i){if(null!==t){var o=t.memoizedProps;if(ur(o,r)&&t.ref===e.ref){if(bs=!1,e.pendingProps=r=o,!(t.lanes&i))return e.lanes=t.lanes,Gs(t,e,i);131072&t.flags&&(bs=!0)}}return Ms(t,e,n,r,i)}function Es(t,e,n){var r=e.pendingProps,i=r.children,o=null!==t?t.memoizedState:null;if("hidden"===r.mode)if(1&e.mode){if(!(1073741824&n))return t=null!==o?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Mi(Ou,Pu),Pu|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Mi(Ou,Pu),Pu|=r}else e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mi(Ou,Pu),Pu|=n;else null!==o?(r=o.baseLanes|n,e.memoizedState=null):r=n,Mi(Ou,Pu),Pu|=r;return xs(t,e,i,n),e.child}function As(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ms(t,e,n,r,i){var o=Pi(n)?Ii:Ti.current;return o=Ni(e,o),Io(e,i),n=ga(t,e,n,r,o,i),r=va(),null===t||bs?(io&&r&&to(e),e.flags|=1,xs(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Gs(t,e,i))}function Cs(t,e,n,r,i){if(Pi(n)){var o=!0;Di(e)}else o=!1;if(Io(e,i),null===e.stateNode)Hs(t,e),as(e,n,r),us(e,n,r,i),r=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var u=a.context,l=n.contextType;"object"==typeof l&&null!==l?l=No(l):l=Ni(e,l=Pi(n)?Ii:Ti.current);var c=n.getDerivedStateFromProps,h="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;h||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||u!==l)&&ss(e,a,r,l),Do=!1;var d=e.memoizedState;a.state=d,Ho(e,r,a,i),u=e.memoizedState,s!==r||d!==u||ki.current||Do?("function"==typeof c&&(rs(e,n,c,r),u=e.memoizedState),(s=Do||os(e,n,s,r,d,u,l))?(h||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(e.flags|=4194308)):("function"==typeof a.componentDidMount&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=l,r=s):("function"==typeof a.componentDidMount&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Fo(t,e),s=e.memoizedProps,l=e.type===e.elementType?s:ns(e.type,s),a.props=l,h=e.pendingProps,d=a.context,"object"==typeof(u=n.contextType)&&null!==u?u=No(u):u=Ni(e,u=Pi(n)?Ii:Ti.current);var f=n.getDerivedStateFromProps;(c="function"==typeof f||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==h||d!==u)&&ss(e,a,r,u),Do=!1,d=e.memoizedState,a.state=d,Ho(e,r,a,i);var p=e.memoizedState;s!==h||d!==p||ki.current||Do?("function"==typeof f&&(rs(e,n,f,r),p=e.memoizedState),(l=Do||os(e,n,l,r,d,p,u)||!1)?(c||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,u),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,u)),"function"==typeof a.componentDidUpdate&&(e.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!=typeof a.componentDidUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),a.props=r,a.state=p,a.context=u,r=l):("function"!=typeof a.componentDidUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return Ts(t,e,n,r,o,i)}function Ts(t,e,n,r,i,o){As(t,e);var a=!!(128&e.flags);if(!r&&!a)return i&&zi(e,n,!1),Gs(t,e,o);r=e.stateNode,ys.current=e;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&a?(e.child=wo(e,t.child,null,o),e.child=wo(e,null,s,o)):xs(t,e,s,o),e.memoizedState=r.state,i&&zi(e,n,!0),e.child}function ks(t){var e=t.stateNode;e.pendingContext?Li(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Li(0,e.context,!1),Ko(t,e.containerInfo)}function Is(t,e,n,r,i){return po(),mo(i),e.flags|=256,xs(t,e,n,r),e.child}var Ns,Ps,Os,Ls,Rs={dehydrated:null,treeContext:null,retryLane:0};function Ds(t){return{baseLanes:t,cachePool:null,transitions:null}}function zs(t,e,n){var r,i=e.pendingProps,a=ta.current,s=!1,u=!!(128&e.flags);if((r=u)||(r=(null===t||null!==t.memoizedState)&&!!(2&a)),r?(s=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(a|=1),Mi(ta,1&a),null===t)return lo(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(1&e.mode?"$!"===t.data?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(u=i.children,t=i.fallback,s?(i=e.mode,s=e.child,u={mode:"hidden",children:u},1&i||null===s?s=Dl(u,i,0,null):(s.childLanes=0,s.pendingProps=u),t=Rl(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Ds(n),e.memoizedState=Rs,t):Fs(e,u));if(null!==(a=t.memoizedState)&&null!==(r=a.dehydrated))return function(t,e,n,r,i,a,s){if(n)return 256&e.flags?(e.flags&=-257,Bs(t,e,s,r=cs(Error(o(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=Dl({mode:"visible",children:r.children},i,0,null),(a=Rl(a,i,s,null)).flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,1&e.mode&&wo(e,t.child,null,s),e.child.memoizedState=Ds(s),e.memoizedState=Rs,a);if(!(1&e.mode))return Bs(t,e,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,Bs(t,e,s,r=cs(a=Error(o(419)),r,void 0))}if(u=!!(s&t.childLanes),bs||u){if(null!==(r=ku)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=i&(r.suspendedLanes|s)?0:i)&&i!==a.retryLane&&(a.retryLane=i,Ro(t,i),nl(r,t,i,-1))}return ml(),Bs(t,e,s,r=cs(Error(o(421))))}return"$?"===i.data?(e.flags|=128,e.child=t.child,e=Cl.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,ro=li(i.nextSibling),no=e,io=!0,oo=null,null!==t&&(Yi[qi++]=Ki,Yi[qi++]=Zi,Yi[qi++]=$i,Ki=t.id,Zi=t.overflow,$i=e),e=Fs(e,r.children),e.flags|=4096,e)}(t,e,u,i,r,a,n);if(s){s=i.fallback,u=e.mode,r=(a=t.child).sibling;var l={mode:"hidden",children:i.children};return 1&u||e.child===a?(i=Ol(a,l)).subtreeFlags=14680064&a.subtreeFlags:((i=e.child).childLanes=0,i.pendingProps=l,e.deletions=null),null!==r?s=Ol(r,s):(s=Rl(s,u,n,null)).flags|=2,s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,u=null===(u=t.child.memoizedState)?Ds(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=t.childLanes&~n,e.memoizedState=Rs,i}return t=(s=t.child).sibling,i=Ol(s,{mode:"visible",children:i.children}),!(1&e.mode)&&(i.lanes=n),i.return=e,i.sibling=null,null!==t&&(null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Fs(t,e){return(e=Dl({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function Bs(t,e,n,r){return null!==r&&mo(r),wo(e,t.child,null,n),(t=Fs(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function Us(t,e,n){t.lanes|=e;var r=t.alternate;null!==r&&(r.lanes|=e),ko(t.return,e,n)}function js(t,e,n,r,i){var o=t.memoizedState;null===o?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Vs(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(xs(t,e,r.children,n),2&(r=ta.current))r=1&r|2,e.flags|=128;else{if(null!==t&&128&t.flags)t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Us(t,n,e);else if(19===t.tag)Us(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Mi(ta,r),1&e.mode)switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===ea(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),js(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===ea(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}js(e,!0,n,null,o);break;case"together":js(e,!1,null,null,void 0);break;default:e.memoizedState=null}else e.memoizedState=null;return e.child}function Hs(t,e){!(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Gs(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Du|=e.lanes,!(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(o(153));if(null!==e.child){for(n=Ol(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Ol(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function Ws(t,e){if(!io)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Xs(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=t,i=i.sibling;else for(i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Ys(t,e,n){var r=e.pendingProps;switch(eo(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xs(e),null;case 1:case 17:return Pi(e.type)&&Oi(),Xs(e),null;case 3:return r=e.stateNode,Zo(),Ai(ki),Ai(Ti),ra(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||(ho(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&!(256&e.flags)||(e.flags|=1024,null!==oo&&(al(oo),oo=null))),Ps(t,e),Xs(e),null;case 5:Jo(e);var i=$o(qo.current);if(n=e.type,null!==t&&null!=e.stateNode)Os(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(null===e.stateNode)throw Error(o(166));return Xs(e),null}if(t=$o(Xo.current),ho(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[di]=e,r[fi]=a,t=!!(1&e.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(i=0;i<Rr.length;i++)Br(Rr[i],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":K(r,a),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Br("invalid",r);break;case"textarea":it(r,a),Br("invalid",r)}for(var u in yt(n,a),i=null,a)if(a.hasOwnProperty(u)){var l=a[u];"children"===u?"string"==typeof l?r.textContent!==l&&(!0!==a.suppressHydrationWarning&&Qr(r.textContent,l,t),i=["children",l]):"number"==typeof l&&r.textContent!==""+l&&(!0!==a.suppressHydrationWarning&&Qr(r.textContent,l,t),i=["children",""+l]):s.hasOwnProperty(u)&&null!=l&&"onScroll"===u&&Br("scroll",r)}switch(n){case"input":X(r),J(r,a,!0);break;case"textarea":X(r),at(r);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(r.onclick=Jr)}r=i,e.updateQueue=r,null!==r&&(e.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=st(n)),"http://www.w3.org/1999/xhtml"===t?"script"===n?((t=u.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"==typeof r.is?t=u.createElement(n,{is:r.is}):(t=u.createElement(n),"select"===n&&(u=t,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):t=u.createElementNS(t,n),t[di]=e,t[fi]=r,Ns(t,e,!1,!1),e.stateNode=t;t:{switch(u=bt(n,r),n){case"dialog":Br("cancel",t),Br("close",t),i=r;break;case"iframe":case"object":case"embed":Br("load",t),i=r;break;case"video":case"audio":for(i=0;i<Rr.length;i++)Br(Rr[i],t);i=r;break;case"source":Br("error",t),i=r;break;case"img":case"image":case"link":Br("error",t),Br("load",t),i=r;break;case"details":Br("toggle",t),i=r;break;case"input":K(t,r),i=$(t,r),Br("invalid",t);break;case"option":default:i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=z({},r,{value:void 0}),Br("invalid",t);break;case"textarea":it(t,r),i=rt(t,r),Br("invalid",t)}for(a in yt(n,i),l=i)if(l.hasOwnProperty(a)){var c=l[a];"style"===a?gt(t,c):"dangerouslySetInnerHTML"===a?null!=(c=c?c.__html:void 0)&&ht(t,c):"children"===a?"string"==typeof c?("textarea"!==n||""!==c)&&dt(t,c):"number"==typeof c&&dt(t,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=c&&"onScroll"===a&&Br("scroll",t):null!=c&&b(t,a,c,u))}switch(n){case"input":X(t),J(t,r,!1);break;case"textarea":X(t),at(t);break;case"option":null!=r.value&&t.setAttribute("value",""+G(r.value));break;case"select":t.multiple=!!r.multiple,null!=(a=r.value)?nt(t,!!r.multiple,a,!1):null!=r.defaultValue&&nt(t,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(t.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}}r&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Xs(e),null;case 6:if(t&&null!=e.stateNode)Ls(t,e,t.memoizedProps,r);else{if("string"!=typeof r&&null===e.stateNode)throw Error(o(166));if(n=$o(qo.current),$o(Xo.current),ho(e)){if(r=e.stateNode,n=e.memoizedProps,r[di]=e,(a=r.nodeValue!==n)&&null!==(t=no))switch(t.tag){case 3:Qr(r.nodeValue,n,!!(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,n,!!(1&t.mode))}a&&(e.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=e,e.stateNode=r}return Xs(e),null;case 13:if(Ai(ta),r=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(io&&null!==ro&&1&e.mode&&!(128&e.flags))fo(),po(),e.flags|=98560,a=!1;else if(a=ho(e),null!==r&&null!==r.dehydrated){if(null===t){if(!a)throw Error(o(318));if(!(a=null!==(a=e.memoizedState)?a.dehydrated:null))throw Error(o(317));a[di]=e}else po(),!(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Xs(e),a=!1}else null!==oo&&(al(oo),oo=null),a=!0;if(!a)return 65536&e.flags?e:null}return 128&e.flags?(e.lanes=n,e):((r=null!==r)!==(null!==t&&null!==t.memoizedState)&&r&&(e.child.flags|=8192,1&e.mode&&(null===t||1&ta.current?0===Lu&&(Lu=3):ml())),null!==e.updateQueue&&(e.flags|=4),Xs(e),null);case 4:return Zo(),Ps(t,e),null===t&&Vr(e.stateNode.containerInfo),Xs(e),null;case 10:return To(e.type._context),Xs(e),null;case 19:if(Ai(ta),null===(a=e.memoizedState))return Xs(e),null;if(r=!!(128&e.flags),null===(u=a.rendering))if(r)Ws(a,!1);else{if(0!==Lu||null!==t&&128&t.flags)for(t=e.child;null!==t;){if(null!==(u=ea(t))){for(e.flags|=128,Ws(a,!1),null!==(r=u.updateQueue)&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;null!==n;)t=r,(a=n).flags&=14680066,null===(u=a.alternate)?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,t=u.dependencies,a.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Mi(ta,1&ta.current|2),e.child}t=t.sibling}null!==a.tail&&Zt()>Vu&&(e.flags|=128,r=!0,Ws(a,!1),e.lanes=4194304)}else{if(!r)if(null!==(t=ea(u))){if(e.flags|=128,r=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),Ws(a,!0),null===a.tail&&"hidden"===a.tailMode&&!u.alternate&&!io)return Xs(e),null}else 2*Zt()-a.renderingStartTime>Vu&&1073741824!==n&&(e.flags|=128,r=!0,Ws(a,!1),e.lanes=4194304);a.isBackwards?(u.sibling=e.child,e.child=u):(null!==(n=a.last)?n.sibling=u:e.child=u,a.last=u)}return null!==a.tail?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Zt(),e.sibling=null,n=ta.current,Mi(ta,r?1&n|2:1&n),e):(Xs(e),null);case 22:case 23:return hl(),r=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==r&&(e.flags|=8192),r&&1&e.mode?!!(1073741824&Pu)&&(Xs(e),6&e.subtreeFlags&&(e.flags|=8192)):Xs(e),null;case 24:case 25:return null}throw Error(o(156,e.tag))}function qs(t,e){switch(eo(e),e.tag){case 1:return Pi(e.type)&&Oi(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return Zo(),Ai(ki),Ai(Ti),ra(),65536&(t=e.flags)&&!(128&t)?(e.flags=-65537&t|128,e):null;case 5:return Jo(e),null;case 13:if(Ai(ta),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(o(340));po()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return Ai(ta),null;case 4:return Zo(),null;case 10:return To(e.type._context),null;case 22:case 23:return hl(),null;default:return null}}Ns=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ps=function(){},Os=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,$o(Xo.current);var o,a=null;switch(n){case"input":i=$(t,i),r=$(t,r),a=[];break;case"select":i=z({},i,{value:void 0}),r=z({},r,{value:void 0}),a=[];break;case"textarea":i=rt(t,i),r=rt(t,r),a=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(t.onclick=Jr)}for(c in yt(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var u=i[c];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var l=r[c];if(u=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&l!==u&&(null!=l||null!=u))if("style"===c)if(u){for(o in u)!u.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&u[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(a||(a=[]),a.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(a=a||[]).push(c,l)):"children"===c?"string"!=typeof l&&"number"!=typeof l||(a=a||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&Br("scroll",t),a||u===l||(a=[])):(a=a||[]).push(c,l))}n&&(a=a||[]).push("style",n);var c=a;(e.updateQueue=c)&&(e.flags|=4)}},Ls=function(t,e,n,r){n!==r&&(e.flags|=4)};var $s=!1,Ks=!1,Zs="function"==typeof WeakSet?WeakSet:Set,Qs=null;function Js(t,e){var n=t.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){El(t,e,n)}else n.current=null}function tu(t,e,n){try{n()}catch(n){El(t,e,n)}}var eu=!1;function nu(t,e,n){var r=e.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,void 0!==o&&tu(e,n,o)}i=i.next}while(i!==r)}}function ru(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function iu(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"==typeof e?e(t):e.current=t}}function ou(t){var e=t.alternate;null!==e&&(t.alternate=null,ou(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[di],delete e[fi],delete e[mi],delete e[gi],delete e[vi])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function au(t){return 5===t.tag||3===t.tag||4===t.tag}function su(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||au(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function uu(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!=(n=n._reactRootContainer)||null!==e.onclick||(e.onclick=Jr));else if(4!==r&&null!==(t=t.child))for(uu(t,e,n),t=t.sibling;null!==t;)uu(t,e,n),t=t.sibling}function lu(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==r&&null!==(t=t.child))for(lu(t,e,n),t=t.sibling;null!==t;)lu(t,e,n),t=t.sibling}var cu=null,hu=!1;function du(t,e,n){for(n=n.child;null!==n;)fu(t,e,n),n=n.sibling}function fu(t,e,n){if(oe&&"function"==typeof oe.onCommitFiberUnmount)try{oe.onCommitFiberUnmount(ie,n)}catch(t){}switch(n.tag){case 5:Ks||Js(n,e);case 6:var r=cu,i=hu;cu=null,du(t,e,n),hu=i,null!==(cu=r)&&(hu?(t=cu,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):cu.removeChild(n.stateNode));break;case 18:null!==cu&&(hu?(t=cu,n=n.stateNode,8===t.nodeType?ui(t.parentNode,n):1===t.nodeType&&ui(t,n),Ve(t)):ui(cu,n.stateNode));break;case 4:r=cu,i=hu,cu=n.stateNode.containerInfo,hu=!0,du(t,e,n),cu=r,hu=i;break;case 0:case 11:case 14:case 15:if(!Ks&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(2&o||4&o)&&tu(n,e,a),i=i.next}while(i!==r)}du(t,e,n);break;case 1:if(!Ks&&(Js(n,e),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(t){El(n,e,t)}du(t,e,n);break;case 21:du(t,e,n);break;case 22:1&n.mode?(Ks=(r=Ks)||null!==n.memoizedState,du(t,e,n),Ks=r):du(t,e,n);break;default:du(t,e,n)}}function pu(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Zs),e.forEach((function(e){var r=Tl.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}function mu(t,e){var n=e.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t,s=e,u=s;t:for(;null!==u;){switch(u.tag){case 5:cu=u.stateNode,hu=!1;break t;case 3:case 4:cu=u.stateNode.containerInfo,hu=!0;break t}u=u.return}if(null===cu)throw Error(o(160));fu(a,s,i),cu=null,hu=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(t){El(i,e,t)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)gu(e,t),e=e.sibling}function gu(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(mu(e,t),vu(t),4&r){try{nu(3,t,t.return),ru(3,t)}catch(e){El(t,t.return,e)}try{nu(5,t,t.return)}catch(e){El(t,t.return,e)}}break;case 1:mu(e,t),vu(t),512&r&&null!==n&&Js(n,n.return);break;case 5:if(mu(e,t),vu(t),512&r&&null!==n&&Js(n,n.return),32&t.flags){var i=t.stateNode;try{dt(i,"")}catch(e){El(t,t.return,e)}}if(4&r&&null!=(i=t.stateNode)){var a=t.memoizedProps,s=null!==n?n.memoizedProps:a,u=t.type,l=t.updateQueue;if(t.updateQueue=null,null!==l)try{"input"===u&&"radio"===a.type&&null!=a.name&&Z(i,a),bt(u,s);var c=bt(u,a);for(s=0;s<l.length;s+=2){var h=l[s],d=l[s+1];"style"===h?gt(i,d):"dangerouslySetInnerHTML"===h?ht(i,d):"children"===h?dt(i,d):b(i,h,d,c)}switch(u){case"input":Q(i,a);break;case"textarea":ot(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?nt(i,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?nt(i,!!a.multiple,a.defaultValue,!0):nt(i,!!a.multiple,a.multiple?[]:"",!1))}i[fi]=a}catch(e){El(t,t.return,e)}}break;case 6:if(mu(e,t),vu(t),4&r){if(null===t.stateNode)throw Error(o(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(e){El(t,t.return,e)}}break;case 3:if(mu(e,t),vu(t),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ve(e.containerInfo)}catch(e){El(t,t.return,e)}break;case 4:default:mu(e,t),vu(t);break;case 13:mu(e,t),vu(t),8192&(i=t.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(ju=Zt())),4&r&&pu(t);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&t.mode?(Ks=(c=Ks)||h,mu(e,t),Ks=c):mu(e,t),vu(t),8192&r){if(c=null!==t.memoizedState,(t.stateNode.isHidden=c)&&!h&&1&t.mode)for(Qs=t,h=t.child;null!==h;){for(d=Qs=h;null!==Qs;){switch(p=(f=Qs).child,f.tag){case 0:case 11:case 14:case 15:nu(4,f,f.return);break;case 1:Js(f,f.return);var m=f.stateNode;if("function"==typeof m.componentWillUnmount){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(t){El(r,n,t)}}break;case 5:Js(f,f.return);break;case 22:if(null!==f.memoizedState){wu(d);continue}}null!==p?(p.return=f,Qs=p):wu(d)}h=h.sibling}t:for(h=null,d=t;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,c?"function"==typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(u=d.stateNode,s=null!=(l=d.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,u.style.display=mt("display",s))}catch(e){El(t,t.return,e)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(e){El(t,t.return,e)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===t)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===t)break t;for(;null===d.sibling;){if(null===d.return||d.return===t)break t;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:mu(e,t),vu(t),4&r&&pu(t);case 21:}}function vu(t){var e=t.flags;if(2&e){try{t:{for(var n=t.return;null!==n;){if(au(n)){var r=n;break t}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(dt(i,""),r.flags&=-33),lu(t,su(t),i);break;case 3:case 4:var a=r.stateNode.containerInfo;uu(t,su(t),a);break;default:throw Error(o(161))}}catch(e){El(t,t.return,e)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function yu(t,e,n){Qs=t,bu(t,e,n)}function bu(t,e,n){for(var r=!!(1&t.mode);null!==Qs;){var i=Qs,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||$s;if(!a){var s=i.alternate,u=null!==s&&null!==s.memoizedState||Ks;s=$s;var l=Ks;if($s=a,(Ks=u)&&!l)for(Qs=i;null!==Qs;)u=(a=Qs).child,22===a.tag&&null!==a.memoizedState?_u(i):null!==u?(u.return=a,Qs=u):_u(i);for(;null!==o;)Qs=o,bu(o,e,n),o=o.sibling;Qs=i,$s=s,Ks=l}xu(t)}else 8772&i.subtreeFlags&&null!==o?(o.return=i,Qs=o):xu(t)}}function xu(t){for(;null!==Qs;){var e=Qs;if(8772&e.flags){var n=e.alternate;try{if(8772&e.flags)switch(e.tag){case 0:case 11:case 15:Ks||ru(5,e);break;case 1:var r=e.stateNode;if(4&e.flags&&!Ks)if(null===n)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ns(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;null!==a&&Go(e,a,r);break;case 3:var s=e.updateQueue;if(null!==s){if(n=null,null!==e.child)switch(e.child.tag){case 5:case 1:n=e.child.stateNode}Go(e,s,n)}break;case 5:var u=e.stateNode;if(null===n&&4&e.flags){n=u;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var c=e.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Ve(d)}}}break;default:throw Error(o(163))}Ks||512&e.flags&&iu(e)}catch(t){El(e,e.return,t)}}if(e===t){Qs=null;break}if(null!==(n=e.sibling)){n.return=e.return,Qs=n;break}Qs=e.return}}function wu(t){for(;null!==Qs;){var e=Qs;if(e===t){Qs=null;break}var n=e.sibling;if(null!==n){n.return=e.return,Qs=n;break}Qs=e.return}}function _u(t){for(;null!==Qs;){var e=Qs;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ru(4,e)}catch(t){El(e,n,t)}break;case 1:var r=e.stateNode;if("function"==typeof r.componentDidMount){var i=e.return;try{r.componentDidMount()}catch(t){El(e,i,t)}}var o=e.return;try{iu(e)}catch(t){El(e,o,t)}break;case 5:var a=e.return;try{iu(e)}catch(t){El(e,a,t)}}}catch(t){El(e,e.return,t)}if(e===t){Qs=null;break}var s=e.sibling;if(null!==s){s.return=e.return,Qs=s;break}Qs=e.return}}var Su,Eu=Math.ceil,Au=x.ReactCurrentDispatcher,Mu=x.ReactCurrentOwner,Cu=x.ReactCurrentBatchConfig,Tu=0,ku=null,Iu=null,Nu=0,Pu=0,Ou=Ei(0),Lu=0,Ru=null,Du=0,zu=0,Fu=0,Bu=null,Uu=null,ju=0,Vu=1/0,Hu=null,Gu=!1,Wu=null,Xu=null,Yu=!1,qu=null,$u=0,Ku=0,Zu=null,Qu=-1,Ju=0;function tl(){return 6&Tu?Zt():-1!==Qu?Qu:Qu=Zt()}function el(t){return 1&t.mode?2&Tu&&0!==Nu?Nu&-Nu:null!==go.transition?(0===Ju&&(Ju=me()),Ju):0!==(t=be)?t:t=void 0===(t=window.event)?16:Ke(t.type):1}function nl(t,e,n,r){if(50<Ku)throw Ku=0,Zu=null,Error(o(185));ve(t,n,r),2&Tu&&t===ku||(t===ku&&(!(2&Tu)&&(zu|=n),4===Lu&&sl(t,Nu)),rl(t,r),1===n&&0===Tu&&!(1&e.mode)&&(Vu=Zt()+500,Bi&&Vi()))}function rl(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-ae(o),s=1<<a,u=i[a];-1===u?s&n&&!(s&r)||(i[a]=fe(s,e)):u<=e&&(t.expiredLanes|=s),o&=~s}}(t,e);var r=de(t,t===ku?Nu:0);if(0===r)null!==n&&qt(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(null!=n&&qt(n),1===e)0===t.tag?function(t){Bi=!0,ji(t)}(ul.bind(null,t)):ji(ul.bind(null,t)),ai((function(){!(6&Tu)&&Vi()})),n=null;else{switch(xe(r)){case 1:n=Jt;break;case 4:n=te;break;case 16:default:n=ee;break;case 536870912:n=re}n=kl(n,il.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function il(t,e){if(Qu=-1,Ju=0,6&Tu)throw Error(o(327));var n=t.callbackNode;if(_l()&&t.callbackNode!==n)return null;var r=de(t,t===ku?Nu:0);if(0===r)return null;if(30&r||r&t.expiredLanes||e)e=gl(t,r);else{e=r;var i=Tu;Tu|=2;var a=pl();for(ku===t&&Nu===e||(Hu=null,Vu=Zt()+500,dl(t,e));;)try{yl();break}catch(e){fl(t,e)}Co(),Au.current=a,Tu=i,null!==Iu?e=0:(ku=null,Nu=0,e=Lu)}if(0!==e){if(2===e&&(0!==(i=pe(t))&&(r=i,e=ol(t,i))),1===e)throw n=Ru,dl(t,0),sl(t,r),rl(t,Zt()),n;if(6===e)sl(t,r);else{if(i=t.current.alternate,!(30&r||function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch(t){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(i)||(e=gl(t,r),2===e&&(a=pe(t),0!==a&&(r=a,e=ol(t,a))),1!==e)))throw n=Ru,dl(t,0),sl(t,r),rl(t,Zt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(o(345));case 2:case 5:wl(t,Uu,Hu);break;case 3:if(sl(t,r),(130023424&r)===r&&10<(e=ju+500-Zt())){if(0!==de(t,0))break;if(((i=t.suspendedLanes)&r)!==r){tl(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ri(wl.bind(null,t,Uu,Hu),e);break}wl(t,Uu,Hu);break;case 4:if(sl(t,r),(4194240&r)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-ae(r);a=1<<s,(s=e[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Zt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Eu(r/1960))-r)){t.timeoutHandle=ri(wl.bind(null,t,Uu,Hu),r);break}wl(t,Uu,Hu);break;default:throw Error(o(329))}}}return rl(t,Zt()),t.callbackNode===n?il.bind(null,t):null}function ol(t,e){var n=Bu;return t.current.memoizedState.isDehydrated&&(dl(t,e).flags|=256),2!==(t=gl(t,e))&&(e=Uu,Uu=n,null!==e&&al(e)),t}function al(t){null===Uu?Uu=t:Uu.push.apply(Uu,t)}function sl(t,e){for(e&=~Fu,e&=~zu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ae(e),r=1<<n;t[n]=-1,e&=~r}}function ul(t){if(6&Tu)throw Error(o(327));_l();var e=de(t,0);if(!(1&e))return rl(t,Zt()),null;var n=gl(t,e);if(0!==t.tag&&2===n){var r=pe(t);0!==r&&(e=r,n=ol(t,r))}if(1===n)throw n=Ru,dl(t,0),sl(t,e),rl(t,Zt()),n;if(6===n)throw Error(o(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,wl(t,Uu,Hu),rl(t,Zt()),null}function ll(t,e){var n=Tu;Tu|=1;try{return t(e)}finally{0===(Tu=n)&&(Vu=Zt()+500,Bi&&Vi())}}function cl(t){null!==qu&&0===qu.tag&&!(6&Tu)&&_l();var e=Tu;Tu|=1;var n=Cu.transition,r=be;try{if(Cu.transition=null,be=1,t)return t()}finally{be=r,Cu.transition=n,!(6&(Tu=e))&&Vi()}}function hl(){Pu=Ou.current,Ai(Ou)}function dl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,ii(n)),null!==Iu)for(n=Iu.return;null!==n;){var r=n;switch(eo(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Oi();break;case 3:Zo(),Ai(ki),Ai(Ti),ra();break;case 5:Jo(r);break;case 4:Zo();break;case 13:case 19:Ai(ta);break;case 10:To(r.type._context);break;case 22:case 23:hl()}n=n.return}if(ku=t,Iu=t=Ol(t.current,null),Nu=Pu=e,Lu=0,Ru=null,Fu=zu=Du=0,Uu=Bu=null,null!==Po){for(e=0;e<Po.length;e++)if(null!==(r=(n=Po[e]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}Po=null}return t}function fl(t,e){for(;;){var n=Iu;try{if(Co(),ia.current=Qa,ca){for(var r=sa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ca=!1}if(aa=0,la=ua=sa=null,ha=!1,da=0,Mu.current=null,null===n||null===n.return){Lu=1,Ru=e,Iu=null;break}t:{var a=t,s=n.return,u=n,l=e;if(e=Nu,u.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var c=l,h=u,d=h.tag;if(!(1&h.mode||0!==d&&11!==d&&15!==d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=gs(s);if(null!==p){p.flags&=-257,vs(p,s,u,0,e),1&p.mode&&ms(a,c,e),l=c;var m=(e=p).updateQueue;if(null===m){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break t}if(!(1&e)){ms(a,c,e),ml();break t}l=Error(o(426))}else if(io&&1&u.mode){var v=gs(s);if(null!==v){!(65536&v.flags)&&(v.flags|=256),vs(v,s,u,0,e),mo(ls(l,u));break t}}a=l=ls(l,u),4!==Lu&&(Lu=2),null===Bu?Bu=[a]:Bu.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e,Vo(a,fs(0,l,e));break t;case 1:u=l;var y=a.type,b=a.stateNode;if(!(128&a.flags||"function"!=typeof y.getDerivedStateFromError&&(null===b||"function"!=typeof b.componentDidCatch||null!==Xu&&Xu.has(b)))){a.flags|=65536,e&=-e,a.lanes|=e,Vo(a,ps(a,u,e));break t}}a=a.return}while(null!==a)}xl(n)}catch(t){e=t,Iu===n&&null!==n&&(Iu=n=n.return);continue}break}}function pl(){var t=Au.current;return Au.current=Qa,null===t?Qa:t}function ml(){0!==Lu&&3!==Lu&&2!==Lu||(Lu=4),null===ku||!(268435455&Du)&&!(268435455&zu)||sl(ku,Nu)}function gl(t,e){var n=Tu;Tu|=2;var r=pl();for(ku===t&&Nu===e||(Hu=null,dl(t,e));;)try{vl();break}catch(e){fl(t,e)}if(Co(),Tu=n,Au.current=r,null!==Iu)throw Error(o(261));return ku=null,Nu=0,Lu}function vl(){for(;null!==Iu;)bl(Iu)}function yl(){for(;null!==Iu&&!$t();)bl(Iu)}function bl(t){var e=Su(t.alternate,t,Pu);t.memoizedProps=t.pendingProps,null===e?xl(t):Iu=e,Mu.current=null}function xl(t){var e=t;do{var n=e.alternate;if(t=e.return,32768&e.flags){if(null!==(n=qs(n,e)))return n.flags&=32767,void(Iu=n);if(null===t)return Lu=6,void(Iu=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}else if(null!==(n=Ys(n,e,Pu)))return void(Iu=n);if(null!==(e=e.sibling))return void(Iu=e);Iu=e=t}while(null!==e);0===Lu&&(Lu=5)}function wl(t,e,n){var r=be,i=Cu.transition;try{Cu.transition=null,be=1,function(t,e,n,r){do{_l()}while(null!==qu);if(6&Tu)throw Error(o(327));n=t.finishedWork;var i=t.finishedLanes;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(o(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ae(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}(t,a),t===ku&&(Iu=ku=null,Nu=0),!(2064&n.subtreeFlags)&&!(2064&n.flags)||Yu||(Yu=!0,kl(ee,(function(){return _l(),null}))),a=!!(15990&n.flags),!!(15990&n.subtreeFlags)||a){a=Cu.transition,Cu.transition=null;var s=be;be=1;var u=Tu;Tu|=4,Mu.current=null,function(t,e){if(ti=Ge,fr(t=dr())){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var r=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(t){n=null;break t}var s=0,u=-1,l=-1,c=0,h=0,d=t,f=null;e:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(u=s+i),d!==a||0!==r&&3!==d.nodeType||(l=s+r),3===d.nodeType&&(s+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===t)break e;if(f===n&&++c===i&&(u=s),f===a&&++h===r&&(l=s),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===u||-1===l?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ei={focusedElem:t,selectionRange:n},Ge=!1,Qs=e;null!==Qs;)if(t=(e=Qs).child,1028&e.subtreeFlags&&null!==t)t.return=e,Qs=t;else for(;null!==Qs;){e=Qs;try{var m=e.alternate;if(1024&e.flags)switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:ns(e.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=e.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(o(163))}}catch(t){El(e,e.return,t)}if(null!==(t=e.sibling)){t.return=e.return,Qs=t;break}Qs=e.return}m=eu,eu=!1}(t,n),gu(n,t),pr(ei),Ge=!!ti,ei=ti=null,t.current=n,yu(n,t,i),Kt(),Tu=u,be=s,Cu.transition=a}else t.current=n;if(Yu&&(Yu=!1,qu=t,$u=i),a=t.pendingLanes,0===a&&(Xu=null),function(t){if(oe&&"function"==typeof oe.onCommitFiberRoot)try{oe.onCommitFiberRoot(ie,t,void 0,!(128&~t.current.flags))}catch(t){}}(n.stateNode),rl(t,Zt()),null!==e)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gu)throw Gu=!1,t=Wu,Wu=null,t;!!(1&$u)&&0!==t.tag&&_l(),a=t.pendingLanes,1&a?t===Zu?Ku++:(Ku=0,Zu=t):Ku=0,Vi()}(t,e,n,r)}finally{Cu.transition=i,be=r}return null}function _l(){if(null!==qu){var t=xe($u),e=Cu.transition,n=be;try{if(Cu.transition=null,be=16>t?16:t,null===qu)var r=!1;else{if(t=qu,qu=null,$u=0,6&Tu)throw Error(o(331));var i=Tu;for(Tu|=4,Qs=t.current;null!==Qs;){var a=Qs,s=a.child;if(16&Qs.flags){var u=a.deletions;if(null!==u){for(var l=0;l<u.length;l++){var c=u[l];for(Qs=c;null!==Qs;){var h=Qs;switch(h.tag){case 0:case 11:case 15:nu(8,h,a)}var d=h.child;if(null!==d)d.return=h,Qs=d;else for(;null!==Qs;){var f=(h=Qs).sibling,p=h.return;if(ou(h),h===c){Qs=null;break}if(null!==f){f.return=p,Qs=f;break}Qs=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Qs=a}}if(2064&a.subtreeFlags&&null!==s)s.return=a,Qs=s;else t:for(;null!==Qs;){if(2048&(a=Qs).flags)switch(a.tag){case 0:case 11:case 15:nu(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Qs=y;break t}Qs=a.return}}var b=t.current;for(Qs=b;null!==Qs;){var x=(s=Qs).child;if(2064&s.subtreeFlags&&null!==x)x.return=s,Qs=x;else t:for(s=b;null!==Qs;){if(2048&(u=Qs).flags)try{switch(u.tag){case 0:case 11:case 15:ru(9,u)}}catch(t){El(u,u.return,t)}if(u===s){Qs=null;break t}var w=u.sibling;if(null!==w){w.return=u.return,Qs=w;break t}Qs=u.return}}if(Tu=i,Vi(),oe&&"function"==typeof oe.onPostCommitFiberRoot)try{oe.onPostCommitFiberRoot(ie,t)}catch(t){}r=!0}return r}finally{be=n,Cu.transition=e}}return!1}function Sl(t,e,n){t=Uo(t,e=fs(0,e=ls(n,e),1),1),e=tl(),null!==t&&(ve(t,1,e),rl(t,e))}function El(t,e,n){if(3===t.tag)Sl(t,t,n);else for(;null!==e;){if(3===e.tag){Sl(e,t,n);break}if(1===e.tag){var r=e.stateNode;if("function"==typeof e.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Xu||!Xu.has(r))){e=Uo(e,t=ps(e,t=ls(n,t),1),1),t=tl(),null!==e&&(ve(e,1,t),rl(e,t));break}}e=e.return}}function Al(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),e=tl(),t.pingedLanes|=t.suspendedLanes&n,ku===t&&(Nu&n)===n&&(4===Lu||3===Lu&&(130023424&Nu)===Nu&&500>Zt()-ju?dl(t,0):Fu|=n),rl(t,e)}function Ml(t,e){0===e&&(1&t.mode?(e=ce,!(130023424&(ce<<=1))&&(ce=4194304)):e=1);var n=tl();null!==(t=Ro(t,e))&&(ve(t,e,n),rl(t,n))}function Cl(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),Ml(t,n)}function Tl(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(e),Ml(t,n)}function kl(t,e){return Yt(t,e)}function Il(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nl(t,e,n,r){return new Il(t,e,n,r)}function Pl(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Ol(t,e){var n=t.alternate;return null===n?((n=Nl(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ll(t,e,n,r,i,a){var s=2;if(r=t,"function"==typeof t)Pl(t)&&(s=1);else if("string"==typeof t)s=5;else t:switch(t){case S:return Rl(n.children,i,a,e);case E:s=8,i|=8;break;case A:return(t=Nl(12,n,e,2|i)).elementType=A,t.lanes=a,t;case k:return(t=Nl(13,n,e,i)).elementType=k,t.lanes=a,t;case I:return(t=Nl(19,n,e,i)).elementType=I,t.lanes=a,t;case O:return Dl(n,i,a,e);default:if("object"==typeof t&&null!==t)switch(t.$$typeof){case M:s=10;break t;case C:s=9;break t;case T:s=11;break t;case N:s=14;break t;case P:s=16,r=null;break t}throw Error(o(130,null==t?t:typeof t,""))}return(e=Nl(s,n,e,i)).elementType=t,e.type=r,e.lanes=a,e}function Rl(t,e,n,r){return(t=Nl(7,t,r,e)).lanes=n,t}function Dl(t,e,n,r){return(t=Nl(22,t,r,e)).elementType=O,t.lanes=n,t.stateNode={isHidden:!1},t}function zl(t,e,n){return(t=Nl(6,t,null,e)).lanes=n,t}function Fl(t,e,n){return(e=Nl(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Bl(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ge(0),this.expirationTimes=ge(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ge(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ul(t,e,n,r,i,o,a,s,u){return t=new Bl(t,e,n,s,u),1===e?(e=1,!0===o&&(e|=8)):e=0,o=Nl(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zo(o),t}function jl(t){if(!t)return Ci;t:{if(Vt(t=t._reactInternals)!==t||1!==t.tag)throw Error(o(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Pi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(o(171))}if(1===t.tag){var n=t.type;if(Pi(n))return Ri(t,n,e)}return e}function Vl(t,e,n,r,i,o,a,s,u){return(t=Ul(n,r,!0,t,0,o,0,s,u)).context=jl(null),n=t.current,(o=Bo(r=tl(),i=el(n))).callback=null!=e?e:null,Uo(n,o,i),t.current.lanes=i,ve(t,i,r),rl(t,r),t}function Hl(t,e,n,r){var i=e.current,o=tl(),a=el(i);return n=jl(n),null===e.context?e.context=n:e.pendingContext=n,(e=Bo(o,a)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),null!==(t=Uo(i,e,a))&&(nl(t,i,a,o),jo(t,i,a)),a}function Gl(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function Wl(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Xl(t,e){Wl(t,e),(t=t.alternate)&&Wl(t,e)}Su=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||ki.current)bs=!0;else{if(!(t.lanes&n||128&e.flags))return bs=!1,function(t,e,n){switch(e.tag){case 3:ks(e),po();break;case 5:Qo(e);break;case 1:Pi(e.type)&&Di(e);break;case 4:Ko(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Mi(So,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=e.memoizedState))return null!==r.dehydrated?(Mi(ta,1&ta.current),e.flags|=128,null):n&e.child.childLanes?zs(t,e,n):(Mi(ta,1&ta.current),null!==(t=Gs(t,e,n))?t.sibling:null);Mi(ta,1&ta.current);break;case 19:if(r=!!(n&e.childLanes),128&t.flags){if(r)return Vs(t,e,n);e.flags|=128}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Mi(ta,ta.current),r)break;return null;case 22:case 23:return e.lanes=0,Es(t,e,n)}return Gs(t,e,n)}(t,e,n);bs=!!(131072&t.flags)}else bs=!1,io&&1048576&e.flags&&Ji(e,Xi,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Hs(t,e),t=e.pendingProps;var i=Ni(e,Ti.current);Io(e,n),i=ga(null,e,r,t,i,n);var a=va();return e.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Pi(r)?(a=!0,Di(e)):a=!1,e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,zo(e),i.updater=is,e.stateNode=i,i._reactInternals=e,us(e,r,t,n),e=Ts(null,e,r,!0,a,n)):(e.tag=0,io&&a&&to(e),xs(null,e,i,n),e=e.child),e;case 16:r=e.elementType;t:{switch(Hs(t,e),t=e.pendingProps,r=(i=r._init)(r._payload),e.type=r,i=e.tag=function(t){if("function"==typeof t)return Pl(t)?1:0;if(null!=t){if((t=t.$$typeof)===T)return 11;if(t===N)return 14}return 2}(r),t=ns(r,t),i){case 0:e=Ms(null,e,r,t,n);break t;case 1:e=Cs(null,e,r,t,n);break t;case 11:e=ws(null,e,r,t,n);break t;case 14:e=_s(null,e,r,ns(r.type,t),n);break t}throw Error(o(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,Ms(t,e,r,i=e.elementType===r?i:ns(r,i),n);case 1:return r=e.type,i=e.pendingProps,Cs(t,e,r,i=e.elementType===r?i:ns(r,i),n);case 3:t:{if(ks(e),null===t)throw Error(o(387));r=e.pendingProps,i=(a=e.memoizedState).element,Fo(t,e),Ho(e,r,null,n);var s=e.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=a,e.memoizedState=a,256&e.flags){e=Is(t,e,r,n,i=ls(Error(o(423)),e));break t}if(r!==i){e=Is(t,e,r,n,i=ls(Error(o(424)),e));break t}for(ro=li(e.stateNode.containerInfo.firstChild),no=e,io=!0,oo=null,n=_o(e,null,r,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){e=Gs(t,e,n);break t}xs(t,e,r,n)}e=e.child}return e;case 5:return Qo(e),null===t&&lo(e),r=e.type,i=e.pendingProps,a=null!==t?t.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==a&&ni(r,a)&&(e.flags|=32),As(t,e),xs(t,e,s,n),e.child;case 6:return null===t&&lo(e),null;case 13:return zs(t,e,n);case 4:return Ko(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=wo(e,null,r,n):xs(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,ws(t,e,r,i=e.elementType===r?i:ns(r,i),n);case 7:return xs(t,e,e.pendingProps,n),e.child;case 8:case 12:return xs(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,s=i.value,Mi(So,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===i.children&&!ki.current){e=Gs(t,e,n);break t}}else for(null!==(a=e.child)&&(a.return=e);null!==a;){var u=a.dependencies;if(null!==u){s=a.child;for(var l=u.firstContext;null!==l;){if(l.context===r){if(1===a.tag){(l=Bo(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),ko(a.return,n,e),u.lanes|=n;break}l=l.next}}else if(10===a.tag)s=a.type===e.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),ko(s,n,e),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===e){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}xs(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Io(e,n),r=r(i=No(i)),e.flags|=1,xs(t,e,r,n),e.child;case 14:return i=ns(r=e.type,e.pendingProps),_s(t,e,r,i=ns(r.type,i),n);case 15:return Ss(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ns(r,i),Hs(t,e),e.tag=1,Pi(r)?(t=!0,Di(e)):t=!1,Io(e,n),as(e,r,i),us(e,r,i,n),Ts(null,e,r,!0,t,n);case 19:return Vs(t,e,n);case 22:return Es(t,e,n)}throw Error(o(156,e.tag))};var Yl="function"==typeof reportError?reportError:function(t){console.error(t)};function ql(t){this._internalRoot=t}function $l(t){this._internalRoot=t}function Kl(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function Zl(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Ql(){}function Jl(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"==typeof i){var s=i;i=function(){var t=Gl(a);s.call(t)}}Hl(e,a,t,i)}else a=function(t,e,n,r,i){if(i){if("function"==typeof r){var o=r;r=function(){var t=Gl(a);o.call(t)}}var a=Vl(e,r,t,0,null,!1,0,"",Ql);return t._reactRootContainer=a,t[pi]=a.current,Vr(8===t.nodeType?t.parentNode:t),cl(),a}for(;i=t.lastChild;)t.removeChild(i);if("function"==typeof r){var s=r;r=function(){var t=Gl(u);s.call(t)}}var u=Ul(t,0,!1,null,0,!1,0,"",Ql);return t._reactRootContainer=u,t[pi]=u.current,Vr(8===t.nodeType?t.parentNode:t),cl((function(){Hl(e,u,n,r)})),u}(n,e,t,i,r);return Gl(a)}$l.prototype.render=ql.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(o(409));Hl(t,e,null,null)},$l.prototype.unmount=ql.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;cl((function(){Hl(null,t,null,null)})),e[pi]=null}},$l.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ee();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Oe.length&&0!==e&&e<Oe[n].priority;n++);Oe.splice(n,0,t),0===n&&ze(t)}},we=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=he(e.pendingLanes);0!==n&&(ye(e,1|n),rl(e,Zt()),!(6&Tu)&&(Vu=Zt()+500,Vi()))}break;case 13:cl((function(){var e=Ro(t,1);if(null!==e){var n=tl();nl(e,t,1,n)}})),Xl(t,1)}},_e=function(t){if(13===t.tag){var e=Ro(t,134217728);if(null!==e)nl(e,t,134217728,tl());Xl(t,134217728)}},Se=function(t){if(13===t.tag){var e=el(t),n=Ro(t,e);if(null!==n)nl(n,t,e,tl());Xl(t,e)}},Ee=function(){return be},Ae=function(t,e){var n=be;try{return be=t,e()}finally{be=n}},_t=function(t,e,n){switch(e){case"input":if(Q(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=wi(r);if(!i)throw Error(o(90));Y(r),Q(r,i)}}}break;case"textarea":ot(t,n);break;case"select":null!=(e=n.value)&&nt(t,!!n.multiple,e,!1)}},Tt=ll,kt=cl;var tc={usingClientEntryPoint:!1,Events:[bi,xi,wi,Mt,Ct,ll]},ec={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nc={bundleType:ec.bundleType,version:ec.version,rendererPackageName:ec.rendererPackageName,rendererConfig:ec.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Wt(t))?null:t.stateNode},findFiberByHostInstance:ec.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{ie=rc.inject(nc),oe=rc}catch(ct){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,e.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Kl(e))throw Error(o(200));return function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}(t,e,null,n)},e.createRoot=function(t,e){if(!Kl(t))throw Error(o(299));var n=!1,r="",i=Yl;return null!=e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(r=e.identifierPrefix),void 0!==e.onRecoverableError&&(i=e.onRecoverableError)),e=Ul(t,1,!1,null,0,n,0,r,i),t[pi]=e.current,Vr(8===t.nodeType?t.parentNode:t),new ql(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"==typeof t.render)throw Error(o(188));throw t=Object.keys(t).join(","),Error(o(268,t))}return t=null===(t=Wt(e))?null:t.stateNode},e.flushSync=function(t){return cl(t)},e.hydrate=function(t,e,n){if(!Zl(e))throw Error(o(200));return Jl(null,t,e,!0,n)},e.hydrateRoot=function(t,e,n){if(!Kl(t))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=Yl;if(null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),e=Vl(e,null,t,1,null!=n?n:null,i,0,a,s),t[pi]=e.current,Vr(t),r)for(t=0;t<r.length;t++)i=(i=(n=r[t])._getVersion)(n._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new $l(e)},e.render=function(t,e,n){if(!Zl(e))throw Error(o(200));return Jl(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Zl(t))throw Error(o(40));return!!t._reactRootContainer&&(cl((function(){Jl(null,null,t,!1,(function(){t._reactRootContainer=null,t[pi]=null}))})),!0)},e.unstable_batchedUpdates=ll,e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Zl(n))throw Error(o(200));if(null==t||void 0===t._reactInternals)throw Error(o(38));return Jl(t,e,n,!1,r)},e.version="18.3.1-next-f1338f8080-20240426"},5338:(t,e,n)=>{"use strict";var r=n(40961);e.H=r.createRoot,r.hydrateRoot},40961:(t,e,n)=>{"use strict";!function t(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(t){console.error(t)}}(),t.exports=n(22551)},71683:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=t||"";e&&(o=t.toString().trim().replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,(function(t,e,r){return e>0&&e+t.length!==r.length&&t.search(n)>-1&&":"!==r.charAt(e-2)&&("-"!==r.charAt(e+t.length)||"-"===r.charAt(e-1))&&r.charAt(e-1).search(/[^\s-]/)<0?t.toLowerCase():t.substr(1).search(/[A-Z]|\../)>-1?t:t.charAt(0).toUpperCase()+t.substr(1)})));i&&(o=function(t){if(function(t){return"string"==typeof t&&-1!==t.indexOf("@")}(t))return console.warn("This arg looks like an email address, redacting."),r;return t}(o));return o};var n=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i;var r="REDACTED (Potential Email Address)"},2874:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.GA4=void 0;var r=u(n(99507)),i=u(n(71683)),o=["eventCategory","eventAction","eventLabel","eventValue","hitType"],a=["title","location"],s=["page","hitType"];function u(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function h(t){return function(t){if(Array.isArray(t))return g(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||m(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function p(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||m(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){if(t){if("string"==typeof t)return g(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(t,e):void 0}}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,b(r.key),r)}}function y(t,e,n){return(e=b(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b(t){var e=function(t,e){if("object"!==c(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===c(e)?e:String(e)}var x=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,"reset",(function(){e.isInitialized=!1,e._testMode=!1,e._currentMeasurementId,e._hasLoadedGA=!1,e._isQueuing=!1,e._queueGtag=[]})),y(this,"_gtag",(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e._testMode||e._isQueuing?e._queueGtag.push(n):r.default.apply(void 0,n)})),y(this,"_loadGA",(function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"https://www.googletagmanager.com/gtag/js";if("undefined"!=typeof window&&"undefined"!=typeof document&&!e._hasLoadedGA){var i=document.createElement("script");i.async=!0,i.src="".concat(r,"?id=").concat(t),n&&i.setAttribute("nonce",n),document.body.appendChild(i),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},e._hasLoadedGA=!0}})),y(this,"_toGtagOptions",(function(t){if(t){var e={cookieUpdate:"cookie_update",cookieExpires:"cookie_expires",cookieDomain:"cookie_domain",cookieFlags:"cookie_flags",userId:"user_id",clientId:"client_id",anonymizeIp:"anonymize_ip",contentGroup1:"content_group1",contentGroup2:"content_group2",contentGroup3:"content_group3",contentGroup4:"content_group4",contentGroup5:"content_group5",allowAdFeatures:"allow_google_signals",allowAdPersonalizationSignals:"allow_ad_personalization_signals",nonInteraction:"non_interaction",page:"page_path",hitCallback:"event_callback"};return Object.entries(t).reduce((function(t,n){var r=p(n,2),i=r[0],o=r[1];return e[i]?t[e[i]]=o:t[i]=o,t}),{})}})),y(this,"initialize",(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)throw new Error("Require GA_MEASUREMENT_ID");var r="string"==typeof t?[{trackingId:t}]:t;e._currentMeasurementId=r[0].trackingId;var i=n.gaOptions,o=n.gtagOptions,a=n.nonce,s=n.testMode,u=void 0!==s&&s,l=n.gtagUrl;if(e._testMode=u,u||e._loadGA(e._currentMeasurementId,a,l),e.isInitialized||(e._gtag("js",new Date),r.forEach((function(t){var n=f(f(f({},e._toGtagOptions(f(f({},i),t.gaOptions))),o),t.gtagOptions);Object.keys(n).length?e._gtag("config",t.trackingId,n):e._gtag("config",t.trackingId)}))),e.isInitialized=!0,!u){var c=h(e._queueGtag);for(e._queueGtag=[],e._isQueuing=!1;c.length;){var d=c.shift();e._gtag.apply(e,h(d)),"get"===d[0]&&(e._isQueuing=!0)}}})),y(this,"set",(function(t){t?"object"===c(t)?(0===Object.keys(t).length&&console.warn("empty `fieldsObject` given to .set()"),e._gaCommand("set",t)):console.warn("Expected `fieldsObject` arg to be an Object"):console.warn("`fieldsObject` is required in .set()")})),y(this,"_gaCommandSendEvent",(function(t,n,r,i,o){e._gtag("event",n,f(f({event_category:t,event_label:r,value:i},o&&{non_interaction:o.nonInteraction}),e._toGtagOptions(o)))})),y(this,"_gaCommandSendEventParameters",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if("string"==typeof n[0])e._gaCommandSendEvent.apply(e,h(n.slice(1)));else{var i=n[0],a=i.eventCategory,s=i.eventAction,u=i.eventLabel,c=i.eventValue,d=(i.hitType,l(i,o));e._gaCommandSendEvent(a,s,u,c,d)}})),y(this,"_gaCommandSendTiming",(function(t,n,r,i){e._gtag("event","timing_complete",{name:n,value:r,event_category:t,event_label:i})})),y(this,"_gaCommandSendPageview",(function(t,n){if(n&&Object.keys(n).length){var r=e._toGtagOptions(n),i=r.title,o=r.location,s=l(r,a);e._gtag("event","page_view",f(f(f(f({},t&&{page_path:t}),i&&{page_title:i}),o&&{page_location:o}),s))}else t?e._gtag("event","page_view",{page_path:t}):e._gtag("event","page_view")})),y(this,"_gaCommandSendPageviewParameters",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if("string"==typeof n[0])e._gaCommandSendPageview.apply(e,h(n.slice(1)));else{var i=n[0],o=i.page,a=(i.hitType,l(i,s));e._gaCommandSendPageview(o,a)}})),y(this,"_gaCommandSend",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i="string"==typeof n[0]?n[0]:n[0].hitType;switch(i){case"event":e._gaCommandSendEventParameters.apply(e,n);break;case"pageview":e._gaCommandSendPageviewParameters.apply(e,n);break;case"timing":e._gaCommandSendTiming.apply(e,h(n.slice(1)));break;case"screenview":case"transaction":case"item":case"social":case"exception":console.warn("Unsupported send command: ".concat(i));break;default:console.warn("Send command doesn't exist: ".concat(i))}})),y(this,"_gaCommandSet",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];"string"==typeof n[0]&&(n[0]=y({},n[0],n[1])),e._gtag("set",e._toGtagOptions(n[0]))})),y(this,"_gaCommand",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];switch(t){case"send":e._gaCommandSend.apply(e,r);break;case"set":e._gaCommandSet.apply(e,r);break;default:console.warn("Command doesn't exist: ".concat(t))}})),y(this,"ga",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if("string"==typeof n[0])e._gaCommand.apply(e,n);else{var i=n[0];e._gtag("get",e._currentMeasurementId,"client_id",(function(t){e._isQueuing=!1;var n=e._queueGtag;for(i({get:function(n){return"clientId"===n?t:"trackingId"===n?e._currentMeasurementId:"apiVersion"===n?"1":void 0}});n.length;){var r=n.shift();e._gtag.apply(e,h(r))}})),e._isQueuing=!0}return e.ga})),y(this,"event",(function(t,n){if("string"==typeof t)e._gtag("event",t,e._toGtagOptions(n));else{var r=t.action,o=t.category,a=t.label,s=t.value,u=t.nonInteraction,l=t.transport;if(!o||!r)return void console.warn("args.category AND args.action are required in event()");var c={hitType:"event",eventCategory:(0,i.default)(o),eventAction:(0,i.default)(r)};a&&(c.eventLabel=(0,i.default)(a)),void 0!==s&&("number"!=typeof s?console.warn("Expected `args.value` arg to be a Number."):c.eventValue=s),void 0!==u&&("boolean"!=typeof u?console.warn("`args.nonInteraction` must be a boolean."):c.nonInteraction=u),void 0!==l&&("string"!=typeof l?console.warn("`args.transport` must be a string."):(-1===["beacon","xhr","image"].indexOf(l)&&console.warn("`args.transport` must be either one of these values: `beacon`, `xhr` or `image`"),c.transport=l)),e._gaCommand("send",c)}})),y(this,"send",(function(t){e._gaCommand("send",t)})),this.reset()}var e,n,u;return e=t,n=[{key:"gtag",value:function(){this._gtag.apply(this,arguments)}}],n&&v(e.prototype,n),u&&v(e,u),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.GA4=x;var w=new x;e.default=w},99507:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r;"undefined"!=typeof window&&(void 0===window.gtag&&(window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)}),(r=window).gtag.apply(r,e))};e.default=n},29970:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}e.Ay=void 0;var i=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var n=o(e);if(n&&n.has(t))return n.get(t);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if("default"!==s&&Object.prototype.hasOwnProperty.call(t,s)){var u=a?Object.getOwnPropertyDescriptor(t,s):null;u&&(u.get||u.set)?Object.defineProperty(i,s,u):i[s]=t[s]}i.default=t,n&&n.set(t,i);return i}(n(2874));function o(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(o=function(t){return t?n:e})(t)}i.GA4;var a=i.default;e.Ay=a},38798:(t,e,n)=>{"use strict";n.d(e,{Kq:()=>o,ob:()=>a});var r=n(96540);n(4146);var i="undefined"==typeof window||window.__REACT_INTL_BYPASS_GLOBAL_CONTEXT__?r.createContext(null):window.__REACT_INTL_CONTEXT__||(window.__REACT_INTL_CONTEXT__=r.createContext(null)),o=(i.Consumer,i.Provider),a=i},80445:(t,e,n)=>{"use strict";n.d(e,{A:()=>G});var r=n(31635),i=n(87683),o=n(96540),a=n(24184),s=n(38798),u=n(33672),l=n(62587),c=n(89160),h=n(78786);function d(t,e){return Object.keys(t).reduce((function(n,i){return n[i]=(0,r.__assign)({timeZone:e},t[i]),n}),{})}function f(t,e){return Object.keys((0,r.__assign)((0,r.__assign)({},t),e)).reduce((function(n,i){return n[i]=(0,r.__assign)((0,r.__assign)({},t[i]||{}),e[i]||{}),n}),{})}function p(t,e){if(!e)return t;var n=l.S.formats;return(0,r.__assign)((0,r.__assign)((0,r.__assign)({},n),t),{date:f(d(n.date,e),d(t.date||{},e)),time:f(d(n.time,e),d(t.time||{},e))})}var m=function(t,e,n,i,o){var a=t.locale,s=t.formats,l=t.messages,d=t.defaultLocale,f=t.defaultFormats,m=t.fallbackOnEmptyString,g=t.onError,v=t.timeZone,y=t.defaultRichTextElements;void 0===n&&(n={id:""});var b=n.id,x=n.defaultMessage;(0,u.V1)(!!b,"[@formatjs/intl] An `id` must be provided to format a message. You can either:\n1. Configure your build toolchain with [babel-plugin-formatjs](https://formatjs.io/docs/tooling/babel-plugin)\nor [@formatjs/ts-transformer](https://formatjs.io/docs/tooling/ts-transformer) OR\n2. Configure your `eslint` config to include [eslint-plugin-formatjs](https://formatjs.io/docs/tooling/linter#enforce-id)\nto autofix this issue");var w=String(b),_=l&&Object.prototype.hasOwnProperty.call(l,w)&&l[w];if(Array.isArray(_)&&1===_.length&&_[0].type===h.ZE.literal)return _[0].value;if(!i&&_&&"string"==typeof _&&!y)return _.replace(/'\{(.*?)\}'/gi,"{$1}");if(i=(0,r.__assign)((0,r.__assign)({},y),i||{}),s=p(s,v),f=p(f,v),!_){if(!1===m&&""===_)return _;if((!x||a&&a.toLowerCase()!==d.toLowerCase())&&g(new c.sb(n,a)),x)try{return e.getMessageFormat(x,d,f,o).format(i)}catch(t){return g(new c.Ho('Error formatting default message for: "'.concat(w,'", rendering default message verbatim'),a,n,t)),"string"==typeof x?x:w}return w}try{return e.getMessageFormat(_,a,s,(0,r.__assign)({formatters:e},o||{})).format(i)}catch(t){g(new c.Ho('Error formatting message: "'.concat(w,'", using ').concat(x?"default message":"id"," as fallback."),a,n,t))}if(x)try{return e.getMessageFormat(x,d,f,o).format(i)}catch(t){g(new c.Ho('Error formatting the default message for: "'.concat(w,'", rendering message verbatim'),a,n,t))}return"string"==typeof _?_:"string"==typeof x?x:w},g=["style","currency","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","currencyDisplay","currencySign","notation","signDisplay","unit","unitDisplay","numberingSystem","trailingZeroDisplay","roundingPriority","roundingIncrement","roundingMode"];function v(t,e,n){var r=t.locale,o=t.formats,a=t.onError;void 0===n&&(n={});var s=n.format,u=s&&(0,i.F3)(o,"number",s,a)||{};return e(r,(0,i.J9)(n,g,u))}function y(t,e,n,r){void 0===r&&(r={});try{return v(t,e,r).format(n)}catch(e){t.onError(new c.pg("Error formatting number.",t.locale,e))}return String(n)}function b(t,e,n,r){void 0===r&&(r={});try{return v(t,e,r).formatToParts(n)}catch(e){t.onError(new c.pg("Error formatting number.",t.locale,e))}return[]}var x=n(11732),w=["numeric","style"];function _(t,e,n,r,o){void 0===o&&(o={}),r||(r="second"),Intl.RelativeTimeFormat||t.onError(new x.IF('Intl.RelativeTimeFormat is not available in this environment.\nTry polyfilling it using "@formatjs/intl-relativetimeformat"\n',x.O4.MISSING_INTL_API));try{return function(t,e,n){var r=t.locale,o=t.formats,a=t.onError;void 0===n&&(n={});var s=n.format,u=!!s&&(0,i.F3)(o,"relative",s,a)||{};return e(r,(0,i.J9)(n,w,u))}(t,e,o).format(n,r)}catch(e){t.onError(new c.pg("Error formatting relative time.",t.locale,e))}return String(n)}var S=["formatMatcher","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName","hourCycle","dateStyle","timeStyle","calendar","numberingSystem","fractionalSecondDigits"];function E(t,e,n,o){var a=t.locale,s=t.formats,u=t.onError,l=t.timeZone;void 0===o&&(o={});var c=o.format,h=(0,r.__assign)((0,r.__assign)({},l&&{timeZone:l}),c&&(0,i.F3)(s,e,c,u)),d=(0,i.J9)(o,S,h);return"time"!==e||d.hour||d.minute||d.second||d.timeStyle||d.dateStyle||(d=(0,r.__assign)((0,r.__assign)({},d),{hour:"numeric",minute:"numeric"})),n(a,d)}function A(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],o=n[1],a=void 0===o?{}:o,s="string"==typeof i?new Date(i||0):i;try{return E(t,"date",e,a).format(s)}catch(e){t.onError(new c.pg("Error formatting date.",t.locale,e))}return String(s)}function M(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],o=n[1],a=void 0===o?{}:o,s="string"==typeof i?new Date(i||0):i;try{return E(t,"time",e,a).format(s)}catch(e){t.onError(new c.pg("Error formatting time.",t.locale,e))}return String(s)}function C(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=n[0],a=n[1],s=n[2],u=void 0===s?{}:s,l=t.timeZone,h=t.locale,d=t.onError,f=(0,i.J9)(u,S,l?{timeZone:l}:{});try{return e(h,f).formatRange(o,a)}catch(e){d(new c.pg("Error formatting date time range.",t.locale,e))}return String(o)}function T(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],o=n[1],a=void 0===o?{}:o,s="string"==typeof i?new Date(i||0):i;try{return E(t,"date",e,a).formatToParts(s)}catch(e){t.onError(new c.pg("Error formatting date.",t.locale,e))}return[]}function k(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],o=n[1],a=void 0===o?{}:o,s="string"==typeof i?new Date(i||0):i;try{return E(t,"time",e,a).formatToParts(s)}catch(e){t.onError(new c.pg("Error formatting time.",t.locale,e))}return[]}var I=["type"];function N(t,e,n,r){var o=t.locale,a=t.onError;void 0===r&&(r={}),Intl.PluralRules||a(new x.IF('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n',x.O4.MISSING_INTL_API));var s=(0,i.J9)(r,I);try{return e(o,s).select(n)}catch(t){a(new c.pg("Error formatting plural.",o,t))}return"other"}var P=["type","style"],O=Date.now();function L(t,e,n,r){void 0===r&&(r={});var i=R(t,e,n,r).reduce((function(t,e){var n=e.value;return"string"!=typeof n?t.push(n):"string"==typeof t[t.length-1]?t[t.length-1]+=n:t.push(n),t}),[]);return 1===i.length?i[0]:0===i.length?"":i}function R(t,e,n,o){var a=t.locale,s=t.onError;void 0===o&&(o={}),Intl.ListFormat||s(new x.IF('Intl.ListFormat is not available in this environment.\nTry polyfilling it using "@formatjs/intl-listformat"\n',x.O4.MISSING_INTL_API));var u=(0,i.J9)(o,P);try{var l={},h=n.map((function(t,e){if("object"==typeof t){var n=function(t){return"".concat(O,"_").concat(t,"_").concat(O)}(e);return l[n]=t,n}return String(t)}));return e(a,u).formatToParts(h).map((function(t){return"literal"===t.type?t:(0,r.__assign)((0,r.__assign)({},t),{value:l[t.value]||t.value})}))}catch(t){s(new c.pg("Error formatting list.",a,t))}return n}var D=["style","type","fallback","languageDisplay"];function z(t,e,n,r){var o=t.locale,a=t.onError;Intl.DisplayNames||a(new x.IF('Intl.DisplayNames is not available in this environment.\nTry polyfilling it using "@formatjs/intl-displaynames"\n',x.O4.MISSING_INTL_API));var s=(0,i.J9)(r,D);try{return e(o,s).of(n)}catch(t){a(new c.pg("Error formatting display name.",o,t))}}function F(t){var e;t.onWarn&&t.defaultRichTextElements&&"string"==typeof((e=t.messages||{})?e[Object.keys(e)[0]]:void 0)&&t.onWarn('[@formatjs/intl] "defaultRichTextElements" was specified but "message" was not pre-compiled. \nPlease consider using "@formatjs/cli" to pre-compile your messages for performance.\nFor more details see https://formatjs.io/docs/getting-started/message-distribution')}var B=n(31071);function U(t){return t?Object.keys(t).reduce((function(e,n){var r=t[n];return e[n]=(0,B.RK)(r)?(0,a.yU)(r):r,e}),{}):t}var j=function(t,e,n,i){for(var a=[],s=4;s<arguments.length;s++)a[s-4]=arguments[s];var u=U(i),l=m.apply(void 0,(0,r.__spreadArray)([t,e,n,u],a,!1));return Array.isArray(l)?o.Children.toArray(l):l},V=function(t,e){var n=t.defaultRichTextElements,o=(0,r.__rest)(t,["defaultRichTextElements"]),s=U(n),u=function(t,e){var n=(0,i.GT)(e),o=(0,r.__assign)((0,r.__assign)({},i.JF),t),a=o.locale,s=o.defaultLocale,u=o.onError;return a?!Intl.NumberFormat.supportedLocalesOf(a).length&&u?u(new c.hr('Missing locale data for locale: "'.concat(a,'" in Intl.NumberFormat. Using default locale: "').concat(s,'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details'))):!Intl.DateTimeFormat.supportedLocalesOf(a).length&&u&&u(new c.hr('Missing locale data for locale: "'.concat(a,'" in Intl.DateTimeFormat. Using default locale: "').concat(s,'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details'))):(u&&u(new c.uo('"locale" was not configured, using "'.concat(s,'" as fallback. See https://formatjs.io/docs/react-intl/api#intlshape for more details'))),o.locale=o.defaultLocale||"en"),F(o),(0,r.__assign)((0,r.__assign)({},o),{formatters:n,formatNumber:y.bind(null,o,n.getNumberFormat),formatNumberToParts:b.bind(null,o,n.getNumberFormat),formatRelativeTime:_.bind(null,o,n.getRelativeTimeFormat),formatDate:A.bind(null,o,n.getDateTimeFormat),formatDateToParts:T.bind(null,o,n.getDateTimeFormat),formatTime:M.bind(null,o,n.getDateTimeFormat),formatDateTimeRange:C.bind(null,o,n.getDateTimeFormat),formatTimeToParts:k.bind(null,o,n.getDateTimeFormat),formatPlural:N.bind(null,o,n.getPluralRules),formatMessage:m.bind(null,o,n),$t:m.bind(null,o,n),formatList:L.bind(null,o,n.getListFormat),formatListToParts:R.bind(null,o,n.getListFormat),formatDisplayName:z.bind(null,o,n.getDisplayNames)})}((0,r.__assign)((0,r.__assign)((0,r.__assign)({},a.JF),o),{defaultRichTextElements:s}),e),l={locale:u.locale,timeZone:u.timeZone,fallbackOnEmptyString:u.fallbackOnEmptyString,formats:u.formats,defaultLocale:u.defaultLocale,defaultFormats:u.defaultFormats,messages:u.messages,onError:u.onError,defaultRichTextElements:s};return(0,r.__assign)((0,r.__assign)({},u),{formatMessage:j.bind(null,l,u.formatters),$t:j.bind(null,l,u.formatters)})};function H(t){return{locale:t.locale,timeZone:t.timeZone,fallbackOnEmptyString:t.fallbackOnEmptyString,formats:t.formats,textComponent:t.textComponent,messages:t.messages,defaultLocale:t.defaultLocale,defaultFormats:t.defaultFormats,onError:t.onError,onWarn:t.onWarn,wrapRichTextChunksInFragment:t.wrapRichTextChunksInFragment,defaultRichTextElements:t.defaultRichTextElements}}const G=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cache=(0,i.MT)(),e.state={cache:e.cache,intl:V(H(e.props),e.cache),prevConfig:H(e.props)},e}return(0,r.__extends)(e,t),e.getDerivedStateFromProps=function(t,e){var n=e.prevConfig,r=e.cache,i=H(t);return(0,a.bN)(n,i)?null:{intl:V(i,r),prevConfig:i}},e.prototype.render=function(){return(0,a.HM)(this.state.intl),o.createElement(s.Kq,{value:this.state.intl},this.props.children)},e.displayName="IntlProvider",e.defaultProps=a.JF,e}(o.PureComponent)},6442:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var r=n(96540),i=n(38798),o=n(24184);function a(){var t=r.useContext(i.ob);return(0,o.HM)(t),t}},24184:(t,e,n)=>{"use strict";n.d(e,{HM:()=>s,JF:()=>u,bN:()=>c,yU:()=>l});var r=n(31635),i=n(96540),o=n(33672),a=n(87683);function s(t){(0,o.V1)(t,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}var u=(0,r.__assign)((0,r.__assign)({},a.JF),{textComponent:i.Fragment});function l(t){return function(e){return t(i.Children.toArray(e))}}function c(t,e){if(t===e)return!0;if(!t||!e)return!1;var n=Object.keys(t),r=Object.keys(e),i=n.length;if(r.length!==i)return!1;for(var o=0;o<i;o++){var a=n[o];if(t[a]!==e[a]||!Object.prototype.hasOwnProperty.call(e,a))return!1}return!0}},22799:(t,e)=>{"use strict";
/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function w(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case c:case h:case o:case s:case a:case f:return t;default:switch(t=t&&t.$$typeof){case l:case d:case g:case m:case u:return t;default:return e}}case i:return e}}}function _(t){return w(t)===h}e.AsyncMode=c,e.ConcurrentMode=h,e.ContextConsumer=l,e.ContextProvider=u,e.Element=r,e.ForwardRef=d,e.Fragment=o,e.Lazy=g,e.Memo=m,e.Portal=i,e.Profiler=s,e.StrictMode=a,e.Suspense=f,e.isAsyncMode=function(t){return _(t)||w(t)===c},e.isConcurrentMode=_,e.isContextConsumer=function(t){return w(t)===l},e.isContextProvider=function(t){return w(t)===u},e.isElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===r},e.isForwardRef=function(t){return w(t)===d},e.isFragment=function(t){return w(t)===o},e.isLazy=function(t){return w(t)===g},e.isMemo=function(t){return w(t)===m},e.isPortal=function(t){return w(t)===i},e.isProfiler=function(t){return w(t)===s},e.isStrictMode=function(t){return w(t)===a},e.isSuspense=function(t){return w(t)===f},e.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===o||t===h||t===s||t===a||t===f||t===p||"object"==typeof t&&null!==t&&(t.$$typeof===g||t.$$typeof===m||t.$$typeof===u||t.$$typeof===l||t.$$typeof===d||t.$$typeof===y||t.$$typeof===b||t.$$typeof===x||t.$$typeof===v)},e.typeOf=w},44363:(t,e,n)=>{"use strict";t.exports=n(22799)},84976:(t,e,n)=>{"use strict";var r,i;n.d(e,{I9:()=>c});var o=n(96540),a=n(40961),s=n(47767),u=n(45588);new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(t){}new Map;const l=(r||(r=n.t(o,2))).startTransition;(i||(i=n.t(a,2))).flushSync,(r||(r=n.t(o,2))).useId;function c(t){let{basename:e,children:n,future:r,window:i}=t,a=o.useRef();null==a.current&&(a.current=(0,u.TM)({window:i,v5Compat:!0}));let c=a.current,[h,d]=o.useState({action:c.action,location:c.location}),{v7_startTransition:f}=r||{},p=o.useCallback((t=>{f&&l?l((()=>d(t))):d(t)}),[d,f]);return o.useLayoutEffect((()=>c.listen(p)),[c,p]),o.createElement(s.Ix,{basename:e,children:n,location:h.location,navigationType:h.action,navigator:c,future:r})}"undefined"!=typeof window&&void 0!==window.document&&window.document.createElement;var h,d;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(h||(h={})),function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"}(d||(d={}))},47767:(t,e,n)=>{"use strict";var r;n.d(e,{Ix:()=>I,Ye:()=>v,Zp:()=>g,zy:()=>p});var i=n(96540),o=n(45588);
/**
 * React Router v6.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function a(){return a=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a.apply(this,arguments)}const s=i.createContext(null);const u=i.createContext(null);const l=i.createContext(null);const c=i.createContext(null);const h=i.createContext({outlet:null,matches:[],isDataRoute:!1});const d=i.createContext(null);function f(){return null!=i.useContext(c)}function p(){return f()||(0,o.Oi)(!1),i.useContext(c).location}function m(t){i.useContext(l).static||i.useLayoutEffect(t)}function g(){let{isDataRoute:t}=i.useContext(h);return t?function(){let{router:t}=M(E.UseNavigateStable),e=T(A.UseNavigateStable),n=i.useRef(!1);return m((()=>{n.current=!0})),i.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"==typeof r?t.navigate(r):t.navigate(r,a({fromRouteId:e},i)))}),[t,e])}():function(){f()||(0,o.Oi)(!1);let t=i.useContext(s),{basename:e,future:n,navigator:r}=i.useContext(l),{matches:a}=i.useContext(h),{pathname:u}=p(),c=JSON.stringify((0,o.yD)(a,n.v7_relativeSplatPath)),d=i.useRef(!1);return m((()=>{d.current=!0})),i.useCallback((function(n,i){if(void 0===i&&(i={}),!d.current)return;if("number"==typeof n)return void r.go(n);let a=(0,o.Gh)(n,JSON.parse(c),u,"path"===i.relative);null==t&&"/"!==e&&(a.pathname="/"===a.pathname?e:(0,o.HS)([e,a.pathname])),(i.replace?r.replace:r.push)(a,i.state,i)}),[e,r,c,u,t])}()}function v(t,e){return y(t,e)}function y(t,e,n,r){f()||(0,o.Oi)(!1);let{navigator:s}=i.useContext(l),{matches:u}=i.useContext(h),d=u[u.length-1],m=d?d.params:{},g=(d&&d.pathname,d?d.pathnameBase:"/");d&&d.route;let v,y=p();if(e){var b;let t="string"==typeof e?(0,o.Rr)(e):e;"/"===g||(null==(b=t.pathname)?void 0:b.startsWith(g))||(0,o.Oi)(!1),v=t}else v=y;let x=v.pathname||"/",w=x;if("/"!==g){let t=g.replace(/^\//,"").split("/");w="/"+x.replace(/^\//,"").split("/").slice(t.length).join("/")}let _=(0,o.ue)(t,{pathname:w});let E=S(_&&_.map((t=>Object.assign({},t,{params:Object.assign({},m,t.params),pathname:(0,o.HS)([g,s.encodeLocation?s.encodeLocation(t.pathname).pathname:t.pathname]),pathnameBase:"/"===t.pathnameBase?g:(0,o.HS)([g,s.encodeLocation?s.encodeLocation(t.pathnameBase).pathname:t.pathnameBase])}))),u,n,r);return e&&E?i.createElement(c.Provider,{value:{location:a({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:o.rc.Pop}},E):E}function b(){let t=function(){var t;let e=i.useContext(d),n=C(A.UseRouteError),r=T(A.UseRouteError);if(void 0!==e)return e;return null==(t=n.errors)?void 0:t[r]}(),e=(0,o.pX)(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},e),n?i.createElement("pre",{style:a},n):null,null)}const x=i.createElement(b,null);class w extends i.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||"idle"!==e.revalidation&&"idle"===t.revalidation?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:void 0!==t.error?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return void 0!==this.state.error?i.createElement(h.Provider,{value:this.props.routeContext},i.createElement(d.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function _(t){let{routeContext:e,match:n,children:r}=t,o=i.useContext(s);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(h.Provider,{value:e},r)}function S(t,e,n,r){var a;if(void 0===e&&(e=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==t){var s;if(null==(s=n)||!s.errors)return null;t=n.matches}let u=t,l=null==(a=n)?void 0:a.errors;if(null!=l){let t=u.findIndex((t=>t.route.id&&void 0!==(null==l?void 0:l[t.route.id])));t>=0||(0,o.Oi)(!1),u=u.slice(0,Math.min(u.length,t+1))}let c=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let t=0;t<u.length;t++){let e=u[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(h=t),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){c=!0,u=h>=0?u.slice(0,h+1):[u[0]];break}}}return u.reduceRight(((t,r,o)=>{let a,s=!1,d=null,f=null;var p;n&&(a=l&&r.route.id?l[r.route.id]:void 0,d=r.route.errorElement||x,c&&(h<0&&0===o?(p="route-fallback",!1||k[p]||(k[p]=!0),s=!0,f=null):h===o&&(s=!0,f=r.route.hydrateFallbackElement||null)));let m=e.concat(u.slice(0,o+1)),g=()=>{let e;return e=a?d:s?f:r.route.Component?i.createElement(r.route.Component,null):r.route.element?r.route.element:t,i.createElement(_,{match:r,routeContext:{outlet:t,matches:m,isDataRoute:null!=n},children:e})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===o)?i.createElement(w,{location:n.location,revalidation:n.revalidation,component:d,error:a,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var E=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(E||{}),A=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(A||{});function M(t){let e=i.useContext(s);return e||(0,o.Oi)(!1),e}function C(t){let e=i.useContext(u);return e||(0,o.Oi)(!1),e}function T(t){let e=function(t){let e=i.useContext(h);return e||(0,o.Oi)(!1),e}(),n=e.matches[e.matches.length-1];return n.route.id||(0,o.Oi)(!1),n.route.id}const k={};(r||(r=n.t(i,2))).startTransition;function I(t){let{basename:e="/",children:n=null,location:r,navigationType:s=o.rc.Pop,navigator:u,static:h=!1,future:d}=t;f()&&(0,o.Oi)(!1);let p=e.replace(/^\/*/,"/"),m=i.useMemo((()=>({basename:p,navigator:u,static:h,future:a({v7_relativeSplatPath:!1},d)})),[p,d,u,h]);"string"==typeof r&&(r=(0,o.Rr)(r));let{pathname:g="/",search:v="",hash:y="",state:b=null,key:x="default"}=r,w=i.useMemo((()=>{let t=(0,o.pb)(g,p);return null==t?null:{location:{pathname:t,search:v,hash:y,state:b,key:x},navigationType:s}}),[p,g,v,y,b,x,s]);return null==w?null:i.createElement(l.Provider,{value:m},i.createElement(c.Provider,{children:n,value:w}))}new Promise((()=>{}));i.Component},41550:(t,e,n)=>{"use strict";var r,i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(96540),s=(r=a)&&r.__esModule?r:{default:r},u=n(40961);var l=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));n.state={style:{}};return n.width=null,n.height=null,n.left=null,n.top=null,n.transitionTimeout=null,n.updateCall=null,n.element=null,n.settings=Object.assign({},{reverse:!1,max:35,perspective:1e3,easing:"cubic-bezier(.03,.98,.52,.99)",scale:"1.1",speed:"1000",transition:!0,axis:null,reset:!0},n.props.options),n.reverse=n.settings.reverse?-1:1,n.onMouseEnter=n.onMouseEnter.bind(n,n.props.onMouseEnter),n.onMouseMove=n.onMouseMove.bind(n,n.props.onMouseMove),n.onMouseLeave=n.onMouseLeave.bind(n,n.props.onMouseLeave),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),o(e,[{key:"componentDidMount",value:function(){this.element=(0,u.findDOMNode)(this)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.transitionTimeout),cancelAnimationFrame(this.updateCall)}},{key:"onMouseEnter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},e=arguments[1];return this.updateElementPosition(),this.setState(Object.assign({},this.state,{style:i({},this.state.style,{willChange:"transform"})})),this.setTransition(),t(e)}},{key:"reset",value:function(){var t=this;window.requestAnimationFrame((function(){t.setState(Object.assign({},t.state,{style:i({},t.state.style,{transform:"perspective("+t.settings.perspective+"px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)"})}))}))}},{key:"onMouseMove",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},e=arguments[1];return e.persist(),null!==this.updateCall&&window.cancelAnimationFrame(this.updateCall),this.event=e,this.updateCall=requestAnimationFrame(this.update.bind(this,e)),t(e)}},{key:"setTransition",value:function(){var t=this;clearTimeout(this.transitionTimeout),this.setState(Object.assign({},this.state,{style:i({},this.state.style,{transition:this.settings.speed+"ms "+this.settings.easing})})),this.transitionTimeout=setTimeout((function(){t.setState(Object.assign({},t.state,{style:i({},t.state.style,{transition:""})}))}),this.settings.speed)}},{key:"onMouseLeave",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},e=arguments[1];return this.setTransition(),this.settings.reset&&this.reset(),t(e)}},{key:"getValues",value:function(t){var e=(t.nativeEvent.clientX-this.left)/this.width,n=(t.nativeEvent.clientY-this.top)/this.height,r=Math.min(Math.max(e,0),1),i=Math.min(Math.max(n,0),1);return{tiltX:(this.reverse*(this.settings.max/2-r*this.settings.max)).toFixed(2),tiltY:(this.reverse*(i*this.settings.max-this.settings.max/2)).toFixed(2),percentageX:100*r,percentageY:100*i}}},{key:"updateElementPosition",value:function(){var t=this.element.getBoundingClientRect();this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this.left=t.left,this.top=t.top}},{key:"update",value:function(t){var e=this.getValues(t);this.setState(Object.assign({},this.state,{style:i({},this.state.style,{transform:"perspective("+this.settings.perspective+"px) rotateX("+("x"===this.settings.axis?0:e.tiltY)+"deg) rotateY("+("y"===this.settings.axis?0:e.tiltX)+"deg) scale3d("+this.settings.scale+", "+this.settings.scale+", "+this.settings.scale+")"})})),this.updateCall=null}},{key:"render",value:function(){var t=Object.assign({},this.props.style,this.state.style);return s.default.createElement("div",{style:t,className:this.props.className,onMouseEnter:this.onMouseEnter,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave},this.props.children)}}]),e}(a.Component);e.A=l},21020:(t,e,n)=>{"use strict";
/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(96540),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function l(t,e,n){var r,o={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==e.key&&(l=""+e.key),void 0!==e.ref&&(c=e.ref),e)a.call(e,r)&&!u.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===o[r]&&(o[r]=e[r]);return{$$typeof:i,type:t,key:l,ref:c,props:o,_owner:s.current}}e.Fragment=o,e.jsx=l,e.jsxs=l},15287:(t,e)=>{"use strict";
/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(t,e,n){this.props=t,this.context=e,this.refs=g,this.updater=n||p}function y(){}function b(t,e,n){this.props=t,this.context=e,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},v.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},y.prototype=v.prototype;var x=b.prototype=new y;x.constructor=b,m(x,v.prototype),x.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,S={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function A(t,e,r){var i,o={},a=null,s=null;if(null!=e)for(i in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)_.call(e,i)&&!E.hasOwnProperty(i)&&(o[i]=e[i]);var u=arguments.length-2;if(1===u)o.children=r;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];o.children=l}if(t&&t.defaultProps)for(i in u=t.defaultProps)void 0===o[i]&&(o[i]=u[i]);return{$$typeof:n,type:t,key:a,ref:s,props:o,_owner:S.current}}function M(t){return"object"==typeof t&&null!==t&&t.$$typeof===n}var C=/\/+/g;function T(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function k(t,e,i,o,a){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var u=!1;if(null===t)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case n:case r:u=!0}}if(u)return a=a(u=t),t=""===o?"."+T(u,0):o,w(a)?(i="",null!=t&&(i=t.replace(C,"$&/")+"/"),k(a,e,i,"",(function(t){return t}))):null!=a&&(M(a)&&(a=function(t,e){return{$$typeof:n,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(a,i+(!a.key||u&&u.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+t)),e.push(a)),1;if(u=0,o=""===o?".":o+":",w(t))for(var l=0;l<t.length;l++){var c=o+T(s=t[l],l);u+=k(s,e,i,c,a)}else if(c=function(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=f&&t[f]||t["@@iterator"])?t:null}(t),"function"==typeof c)for(t=c.call(t),l=0;!(s=t.next()).done;)u+=k(s=s.value,e,i,c=o+T(s,l++),a);else if("object"===s)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return u}function I(t,e,n){if(null==t)return t;var r=[],i=0;return k(t,r,"","",(function(t){return e.call(n,t,i++)})),r}function N(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var P={current:null},O={transition:null},L={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:O,ReactCurrentOwner:S};function R(){throw Error("act(...) is not supported in production builds of React.")}e.Children={map:I,forEach:function(t,e,n){I(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return I(t,(function(){e++})),e},toArray:function(t){return I(t,(function(t){return t}))||[]},only:function(t){if(!M(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=v,e.Fragment=i,e.Profiler=a,e.PureComponent=b,e.StrictMode=o,e.Suspense=c,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,e.act=R,e.cloneElement=function(t,e,r){if(null==t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=m({},t.props),o=t.key,a=t.ref,s=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,s=S.current),void 0!==e.key&&(o=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(l in e)_.call(e,l)&&!E.hasOwnProperty(l)&&(i[l]=void 0===e[l]&&void 0!==u?u[l]:e[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){u=Array(l);for(var c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}return{$$typeof:n,type:t.type,key:o,ref:a,props:i,_owner:s}},e.createContext=function(t){return(t={$$typeof:u,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:t},t.Consumer=t},e.createElement=A,e.createFactory=function(t){var e=A.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:l,render:t}},e.isValidElement=M,e.lazy=function(t){return{$$typeof:d,_payload:{_status:-1,_result:t},_init:N}},e.memo=function(t,e){return{$$typeof:h,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=O.transition;O.transition={};try{t()}finally{O.transition=e}},e.unstable_act=R,e.useCallback=function(t,e){return P.current.useCallback(t,e)},e.useContext=function(t){return P.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return P.current.useDeferredValue(t)},e.useEffect=function(t,e){return P.current.useEffect(t,e)},e.useId=function(){return P.current.useId()},e.useImperativeHandle=function(t,e,n){return P.current.useImperativeHandle(t,e,n)},e.useInsertionEffect=function(t,e){return P.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return P.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return P.current.useMemo(t,e)},e.useReducer=function(t,e,n){return P.current.useReducer(t,e,n)},e.useRef=function(t){return P.current.useRef(t)},e.useState=function(t){return P.current.useState(t)},e.useSyncExternalStore=function(t,e,n){return P.current.useSyncExternalStore(t,e,n)},e.useTransition=function(){return P.current.useTransition()},e.version="18.3.1"},96540:(t,e,n)=>{"use strict";t.exports=n(15287)},74848:(t,e,n)=>{"use strict";t.exports=n(21020)},60364:function(t){t.exports=function(){"use strict";var t=function(t){return t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Float32Array||t instanceof Float64Array||t instanceof Uint8ClampedArray},e=function(t,e){for(var n=Object.keys(e),r=0;r<n.length;++r)t[n[r]]=e[n[r]];return t},n="\n";function r(t){return"undefined"!=typeof atob?atob(t):"base64:"+t}function i(t){var e=new Error("(regl) "+t);throw console.error(e),e}function o(t,e){t||i(e)}function a(t){return t?": "+t:""}function s(t,e,n){t in e||i("unknown parameter ("+t+")"+a(n)+". possible values: "+Object.keys(e).join())}function u(e,n){t(e)||i("invalid parameter type"+a(n)+". must be a typed array")}function l(t,e){switch(e){case"number":return"number"==typeof t;case"object":return"object"==typeof t;case"string":return"string"==typeof t;case"boolean":return"boolean"==typeof t;case"function":return"function"==typeof t;case"undefined":return void 0===t;case"symbol":return"symbol"==typeof t}}function c(t,e,n){l(t,e)||i("invalid parameter type"+a(n)+". expected "+e+", got "+typeof t)}function h(t,e){t>=0&&(0|t)===t||i("invalid parameter type, ("+t+")"+a(e)+". must be a nonnegative integer")}function d(t,e,n){e.indexOf(t)<0&&i("invalid value"+a(n)+". must be one of: "+e)}var f=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function p(t){Object.keys(t).forEach((function(t){f.indexOf(t)<0&&i('invalid regl constructor argument "'+t+'". must be one of '+f)}))}function m(t,e){for(t+="";t.length<e;)t=" "+t;return t}function g(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function v(t,e){this.number=t,this.line=e,this.errors=[]}function y(t,e,n){this.file=t,this.line=e,this.message=n}function b(){var t=new Error,e=(t.stack||t).toString(),n=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(e);if(n)return n[1];var r=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(e);return r?r[1]:"unknown"}function x(){var t=new Error,e=(t.stack||t).toString(),n=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(e);if(n)return n[1];var r=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(e);return r?r[1]:"unknown"}function w(t,e){var n=t.split("\n"),i=1,o=0,a={unknown:new g,0:new g};a.unknown.name=a[0].name=e||b(),a.unknown.lines.push(new v(0,""));for(var s=0;s<n.length;++s){var u=n[s],l=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(u);if(l)switch(l[1]){case"line":var c=/(\d+)(\s+\d+)?/.exec(l[2]);c&&(i=0|c[1],c[2]&&((o=0|c[2])in a||(a[o]=new g)));break;case"define":var h=/SHADER_NAME(_B64)?\s+(.*)$/.exec(l[2]);h&&(a[o].name=h[1]?r(h[2]):h[2])}a[o].lines.push(new v(i++,u))}return Object.keys(a).forEach((function(t){var e=a[t];e.lines.forEach((function(t){e.index[t.number]=t}))})),a}function _(t){var e=[];return t.split("\n").forEach((function(t){if(!(t.length<5)){var n=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(t);n?e.push(new y(0|n[1],0|n[2],n[3].trim())):t.length>0&&e.push(new y("unknown",0,t))}})),e}function S(t,e){e.forEach((function(e){var n=t[e.file];if(n){var r=n.index[e.line];if(r)return r.errors.push(e),void(n.hasErrors=!0)}t.unknown.hasErrors=!0,t.unknown.lines[0].errors.push(e)}))}function E(t,e,r,i,a){if(!t.getShaderParameter(e,t.COMPILE_STATUS)){var s=t.getShaderInfoLog(e),u=i===t.FRAGMENT_SHADER?"fragment":"vertex";N(r,"string",u+" shader source must be a string",a);var l=w(r,a),c=_(s);S(l,c),Object.keys(l).forEach((function(t){var e=l[t];if(e.hasErrors){var r=[""],i=[""];o("file number "+t+": "+e.name+"\n","color:red;text-decoration:underline;font-weight:bold"),e.lines.forEach((function(t){if(t.errors.length>0){o(m(t.number,4)+"|  ","background-color:yellow; font-weight:bold"),o(t.line+n,"color:red; background-color:yellow; font-weight:bold");var e=0;t.errors.forEach((function(r){var i=r.message,a=/^\s*'(.*)'\s*:\s*(.*)$/.exec(i);if(a){var s=a[1];i=a[2],"assign"===s&&(s="="),e=Math.max(t.line.indexOf(s,e),0)}else e=0;o(m("| ",6)),o(m("^^^",e+3)+n,"font-weight:bold"),o(m("| ",6)),o(i+n,"font-weight:bold")})),o(m("| ",6)+n)}else o(m(t.number,4)+"|  "),o(t.line+n,"color:red")})),"undefined"==typeof document||window.chrome?console.log(r.join("")):(i[0]=r.join("%c"),console.log.apply(console,i))}function o(t,e){r.push(t),i.push(e||"")}})),o.raise("Error compiling "+u+" shader, "+l[0].name)}}function A(t,e,r,i,a){if(!t.getProgramParameter(e,t.LINK_STATUS)){var s=t.getProgramInfoLog(e),u=w(r,a),l='Error linking program with vertex shader, "'+w(i,a)[0].name+'", and fragment shader "'+u[0].name+'"';"undefined"!=typeof document?console.log("%c"+l+n+"%c"+s,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(l+n+s),o.raise(l)}}function M(t){t._commandRef=b()}function C(t,e,n,r){function i(t){return t?r.id(t):0}function o(t,e){Object.keys(e).forEach((function(e){t[r.id(e)]=!0}))}M(t),t._fragId=i(t.static.frag),t._vertId=i(t.static.vert);var a=t._uniformSet={};o(a,e.static),o(a,e.dynamic);var s=t._attributeSet={};o(s,n.static),o(s,n.dynamic),t._hasCount="count"in t.static||"count"in t.dynamic||"elements"in t.static||"elements"in t.dynamic}function T(t,e){var n=x();i(t+" in command "+(e||b())+("unknown"===n?"":" called from "+n))}function k(t,e,n){t||T(e,n||b())}function I(t,e,n,r){t in e||T("unknown parameter ("+t+")"+a(n)+". possible values: "+Object.keys(e).join(),r||b())}function N(t,e,n,r){l(t,e)||T("invalid parameter type"+a(n)+". expected "+e+", got "+typeof t,r||b())}function P(t){t()}function O(t,e,n){t.texture?d(t.texture._texture.internalformat,e,"unsupported texture format for attachment"):d(t.renderbuffer._renderbuffer.format,n,"unsupported renderbuffer format for attachment")}var L=33071,R=9728,D=9984,z=9985,F=9986,B=9987,U=5121,j=5122,V=5123,H=5124,G=5125,W=5126,X=32819,Y=32820,q=33635,$=34042,K=36193,Z={};function Q(t,e){return t===Y||t===X||t===q?2:t===$?4:Z[t]*e}function J(t){return!(t&t-1||!t)}function tt(t,e,n){var r,i=e.width,a=e.height,s=e.channels;o(i>0&&i<=n.maxTextureSize&&a>0&&a<=n.maxTextureSize,"invalid texture shape"),t.wrapS===L&&t.wrapT===L||o(J(i)&&J(a),"incompatible wrap mode for texture, both width and height must be power of 2"),1===e.mipmask?1!==i&&1!==a&&o(t.minFilter!==D&&t.minFilter!==F&&t.minFilter!==z&&t.minFilter!==B,"min filter requires mipmap"):(o(J(i)&&J(a),"texture must be a square power of 2 to support mipmapping"),o(e.mipmask===(i<<1)-1,"missing or incomplete mipmap data")),e.type===W&&(n.extensions.indexOf("oes_texture_float_linear")<0&&o(t.minFilter===R&&t.magFilter===R,"filter not supported, must enable oes_texture_float_linear"),o(!t.genMipmaps,"mipmap generation not supported with float textures"));var u=e.images;for(r=0;r<16;++r)if(u[r]){var l=i>>r,c=a>>r;o(e.mipmask&1<<r,"missing mipmap data");var h=u[r];if(o(h.width===l&&h.height===c,"invalid shape for mip images"),o(h.format===e.format&&h.internalformat===e.internalformat&&h.type===e.type,"incompatible type for mip image"),h.compressed);else if(h.data){var d=Math.ceil(Q(h.type,s)*l/h.unpackAlignment)*h.unpackAlignment;o(h.data.byteLength===d*c,"invalid data for image, buffer size is inconsistent with image format")}else h.element||h.copy}else t.genMipmaps||o(!(e.mipmask&1<<r),"extra mipmap data");e.compressed&&o(!t.genMipmaps,"mipmap generation for compressed images not supported")}function et(t,e,n,r){var i=t.width,a=t.height,s=t.channels;o(i>0&&i<=r.maxTextureSize&&a>0&&a<=r.maxTextureSize,"invalid texture shape"),o(i===a,"cube map must be square"),o(e.wrapS===L&&e.wrapT===L,"wrap mode not supported by cube map");for(var u=0;u<n.length;++u){var l=n[u];o(l.width===i&&l.height===a,"inconsistent cube map face shape"),e.genMipmaps&&(o(!l.compressed,"can not generate mipmap for compressed textures"),o(1===l.mipmask,"can not specify mipmaps and generate mipmaps"));for(var c=l.images,h=0;h<16;++h){var d=c[h];if(d){var f=i>>h,p=a>>h;o(l.mipmask&1<<h,"missing mipmap data"),o(d.width===f&&d.height===p,"invalid shape for mip images"),o(d.format===t.format&&d.internalformat===t.internalformat&&d.type===t.type,"incompatible type for mip image"),d.compressed||(d.data?o(d.data.byteLength===f*p*Math.max(Q(d.type,s),d.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):d.element||d.copy)}}}}Z[5120]=Z[U]=1,Z[j]=Z[V]=Z[K]=Z[q]=Z[X]=Z[Y]=2,Z[H]=Z[G]=Z[W]=Z[$]=4;var nt=e(o,{optional:P,raise:i,commandRaise:T,command:k,parameter:s,commandParameter:I,constructor:p,type:c,commandType:N,isTypedArray:u,nni:h,oneOf:d,shaderError:E,linkError:A,callSite:x,saveCommandRef:M,saveDrawInfo:C,framebufferFormat:O,guessCommand:b,texture2D:tt,textureCube:et}),rt=0,it=0,ot=5,at=6;function st(t,e){this.id=rt++,this.type=t,this.data=e}function ut(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function lt(t){if(0===t.length)return[];var e=t.charAt(0),n=t.charAt(t.length-1);if(t.length>1&&e===n&&('"'===e||"'"===e))return['"'+ut(t.substr(1,t.length-2))+'"'];var r=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(t);if(r)return lt(t.substr(0,r.index)).concat(lt(r[1])).concat(lt(t.substr(r.index+r[0].length)));var i=t.split(".");if(1===i.length)return['"'+ut(t)+'"'];for(var o=[],a=0;a<i.length;++a)o=o.concat(lt(i[a]));return o}function ct(t){return"["+lt(t).join("][")+"]"}function ht(t,e){return new st(t,ct(e+""))}function dt(t){return"function"==typeof t&&!t._reglType||t instanceof st}function ft(t,e){return"function"==typeof t?new st(it,t):"number"==typeof t||"boolean"==typeof t?new st(ot,t):Array.isArray(t)?new st(at,t.map(((t,n)=>ft(t,e+"["+n+"]")))):t instanceof st?t:void nt(!1,"invalid option type in uniform "+e)}var pt={DynamicVariable:st,define:ht,isDynamic:dt,unbox:ft,accessor:ct},mt={next:"function"==typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,16)},cancel:"function"==typeof cancelAnimationFrame?function(t){return cancelAnimationFrame(t)}:clearTimeout},gt="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date};function vt(){var t={"":0},e=[""];return{id:function(n){var r=t[n];return r||(r=t[n]=e.length,e.push(n),r)},str:function(t){return e[t]}}}function yt(t,n,r){var i,o=document.createElement("canvas");function a(){var n=window.innerWidth,i=window.innerHeight;if(t!==document.body){var a=t.getBoundingClientRect();n=a.right-a.left,i=a.bottom-a.top}o.width=r*n,o.height=r*i,e(o.style,{width:n+"px",height:i+"px"})}function s(){i?i.disconnect():window.removeEventListener("resize",a),t.removeChild(o)}return e(o.style,{border:0,margin:0,padding:0,top:0,left:0}),t.appendChild(o),t===document.body&&(o.style.position="absolute",e(t.style,{margin:0,padding:0})),t!==document.body&&"function"==typeof ResizeObserver?(i=new ResizeObserver((function(){setTimeout(a)}))).observe(t):window.addEventListener("resize",a,!1),a(),{canvas:o,onDestroy:s}}function bt(t,e){function n(n){try{return t.getContext(n,e)}catch(t){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}function xt(t){return"string"==typeof t.nodeName&&"function"==typeof t.appendChild&&"function"==typeof t.getBoundingClientRect}function wt(t){return"function"==typeof t.drawArrays||"function"==typeof t.drawElements}function _t(t){return"string"==typeof t?t.split():(nt(Array.isArray(t),"invalid extension array"),t)}function St(t){return"string"==typeof t?(nt("undefined"!=typeof document,"not supported outside of DOM"),document.querySelector(t)):t}function Et(t){var e,n,r,i,o=t||{},a={},s=[],u=[],l="undefined"==typeof window?1:window.devicePixelRatio,c=!1,h=function(t){t&&nt.raise(t)},d=function(){};if("string"==typeof o?(nt("undefined"!=typeof document,"selector queries only supported in DOM enviroments"),e=document.querySelector(o),nt(e,"invalid query string for element")):"object"==typeof o?xt(o)?e=o:wt(o)?r=(i=o).canvas:(nt.constructor(o),"gl"in o?i=o.gl:"canvas"in o?r=St(o.canvas):"container"in o&&(n=St(o.container)),"attributes"in o&&(a=o.attributes,nt.type(a,"object","invalid context attributes")),"extensions"in o&&(s=_t(o.extensions)),"optionalExtensions"in o&&(u=_t(o.optionalExtensions)),"onDone"in o&&(nt.type(o.onDone,"function","invalid or missing onDone callback"),h=o.onDone),"profile"in o&&(c=!!o.profile),"pixelRatio"in o&&(l=+o.pixelRatio,nt(l>0,"invalid pixel ratio"))):nt.raise("invalid arguments to regl"),e&&("canvas"===e.nodeName.toLowerCase()?r=e:n=e),!i){if(!r){nt("undefined"!=typeof document,"must manually specify webgl context outside of DOM environments");var f=yt(n||document.body,h,l);if(!f)return null;r=f.canvas,d=f.onDestroy}void 0===a.premultipliedAlpha&&(a.premultipliedAlpha=!0),i=bt(r,a)}return i?{gl:i,canvas:r,container:n,extensions:s,optionalExtensions:u,pixelRatio:l,profile:c,onDone:h,onDestroy:d}:(d(),h("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function At(t,e){var n={};function r(e){nt.type(e,"string","extension name must be string");var r,i=e.toLowerCase();try{r=n[i]=t.getExtension(i)}catch(t){}return!!r}for(var i=0;i<e.extensions.length;++i){var o=e.extensions[i];if(!r(o))return e.onDestroy(),e.onDone('"'+o+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return e.optionalExtensions.forEach(r),{extensions:n,restore:function(){Object.keys(n).forEach((function(t){if(n[t]&&!r(t))throw new Error("(regl): error restoring extension "+t)}))}}}function Mt(t,e){for(var n=Array(t),r=0;r<t;++r)n[r]=e(r);return n}var Ct=5120,Tt=5121,kt=5122,It=5123,Nt=5124,Pt=5125,Ot=5126;function Lt(t){for(var e=16;e<=1<<28;e*=16)if(t<=e)return e;return 0}function Rt(t){var e,n;return e=(t>65535)<<4,e|=n=((t>>>=e)>255)<<3,e|=n=((t>>>=n)>15)<<2,(e|=n=((t>>>=n)>3)<<1)|(t>>>=n)>>1}function Dt(){var t=Mt(8,(function(){return[]}));function e(e){var n=Lt(e),r=t[Rt(n)>>2];return r.length>0?r.pop():new ArrayBuffer(n)}function n(e){t[Rt(e.byteLength)>>2].push(e)}function r(t,n){var r=null;switch(t){case Ct:r=new Int8Array(e(n),0,n);break;case Tt:r=new Uint8Array(e(n),0,n);break;case kt:r=new Int16Array(e(2*n),0,n);break;case It:r=new Uint16Array(e(2*n),0,n);break;case Nt:r=new Int32Array(e(4*n),0,n);break;case Pt:r=new Uint32Array(e(4*n),0,n);break;case Ot:r=new Float32Array(e(4*n),0,n);break;default:return null}return r.length!==n?r.subarray(0,n):r}function i(t){n(t.buffer)}return{alloc:e,free:n,allocType:r,freeType:i}}var zt=Dt();zt.zero=Dt();var Ft=3408,Bt=3410,Ut=3411,jt=3412,Vt=3413,Ht=3414,Gt=3415,Wt=33901,Xt=33902,Yt=3379,qt=3386,$t=34921,Kt=36347,Zt=36348,Qt=35661,Jt=35660,te=34930,ee=36349,ne=34076,re=34024,ie=7936,oe=7937,ae=7938,se=35724,ue=34047,le=36063,ce=34852,he=3553,de=34067,fe=34069,pe=33984,me=6408,ge=5126,ve=5121,ye=36160,be=36053,xe=36064,we=16384,_e=function(t,e){var n=1;e.ext_texture_filter_anisotropic&&(n=t.getParameter(ue));var r=1,i=1;e.webgl_draw_buffers&&(r=t.getParameter(ce),i=t.getParameter(le));var o=!!e.oes_texture_float;if(o){var a=t.createTexture();t.bindTexture(he,a),t.texImage2D(he,0,me,1,1,0,me,ge,null);var s=t.createFramebuffer();if(t.bindFramebuffer(ye,s),t.framebufferTexture2D(ye,xe,he,a,0),t.bindTexture(he,null),t.checkFramebufferStatus(ye)!==be)o=!1;else{t.viewport(0,0,1,1),t.clearColor(1,0,0,1),t.clear(we);var u=zt.allocType(ge,4);t.readPixels(0,0,1,1,me,ge,u),t.getError()?o=!1:(t.deleteFramebuffer(s),t.deleteTexture(a),o=1===u[0]),zt.freeType(u)}}var l=!0;if("undefined"==typeof navigator||!(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))){var c=t.createTexture(),h=zt.allocType(ve,36);t.activeTexture(pe),t.bindTexture(de,c),t.texImage2D(fe,0,me,3,3,0,me,ve,h),zt.freeType(h),t.bindTexture(de,null),t.deleteTexture(c),l=!t.getError()}return{colorBits:[t.getParameter(Bt),t.getParameter(Ut),t.getParameter(jt),t.getParameter(Vt)],depthBits:t.getParameter(Ht),stencilBits:t.getParameter(Gt),subpixelBits:t.getParameter(Ft),extensions:Object.keys(e).filter((function(t){return!!e[t]})),maxAnisotropic:n,maxDrawbuffers:r,maxColorAttachments:i,pointSizeDims:t.getParameter(Wt),lineWidthDims:t.getParameter(Xt),maxViewportDims:t.getParameter(qt),maxCombinedTextureUnits:t.getParameter(Qt),maxCubeMapSize:t.getParameter(ne),maxRenderbufferSize:t.getParameter(re),maxTextureUnits:t.getParameter(te),maxTextureSize:t.getParameter(Yt),maxAttributes:t.getParameter($t),maxVertexUniforms:t.getParameter(Kt),maxVertexTextureUnits:t.getParameter(Jt),maxVaryingVectors:t.getParameter(Zt),maxFragmentUniforms:t.getParameter(ee),glsl:t.getParameter(se),renderer:t.getParameter(oe),vendor:t.getParameter(ie),version:t.getParameter(ae),readFloat:o,npotTextureCube:l}};function Se(e){return!!e&&"object"==typeof e&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"==typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||t(e.data))}var Ee=function(t){return Object.keys(t).map((function(e){return t[e]}))},Ae={shape:Ne,flatten:Ie};function Me(t,e,n){for(var r=0;r<e;++r)n[r]=t[r]}function Ce(t,e,n,r){for(var i=0,o=0;o<e;++o)for(var a=t[o],s=0;s<n;++s)r[i++]=a[s]}function Te(t,e,n,r,i,o){for(var a=o,s=0;s<e;++s)for(var u=t[s],l=0;l<n;++l)for(var c=u[l],h=0;h<r;++h)i[a++]=c[h]}function ke(t,e,n,r,i){for(var o=1,a=n+1;a<e.length;++a)o*=e[a];var s=e[n];if(e.length-n==4){var u=e[n+1],l=e[n+2],c=e[n+3];for(a=0;a<s;++a)Te(t[a],u,l,c,r,i),i+=o}else for(a=0;a<s;++a)ke(t[a],e,n+1,r,i),i+=o}function Ie(t,e,n,r){var i=1;if(e.length)for(var o=0;o<e.length;++o)i*=e[o];else i=0;var a=r||zt.allocType(n,i);switch(e.length){case 0:break;case 1:Me(t,e[0],a);break;case 2:Ce(t,e[0],e[1],a);break;case 3:Te(t,e[0],e[1],e[2],a,0);break;default:ke(t,e,0,a,0)}return a}function Ne(t){for(var e=[],n=t;n.length;n=n[0])e.push(n.length);return e}var Pe={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Oe={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Le={dynamic:35048,stream:35040,static:35044},Re=Ae.flatten,De=Ae.shape,ze=35044,Fe=35040,Be=5121,Ue=5126,je=[];function Ve(t){return 0|Pe[Object.prototype.toString.call(t)]}function He(t,e){for(var n=0;n<e.length;++n)t[n]=e[n]}function Ge(t,e,n,r,i,o,a){for(var s=0,u=0;u<n;++u)for(var l=0;l<r;++l)t[s++]=e[i*u+o*l+a]}function We(e,n,r,i){var o=0,a={};function s(t){this.id=o++,this.buffer=e.createBuffer(),this.type=t,this.usage=ze,this.byteLength=0,this.dimension=1,this.dtype=Be,this.persistentData=null,r.profile&&(this.stats={size:0})}s.prototype.bind=function(){e.bindBuffer(this.type,this.buffer)},s.prototype.destroy=function(){f(this)};var u=[];function l(t,e){var n=u.pop();return n||(n=new s(t)),n.bind(),d(n,e,Fe,0,1,!1),n}function c(t){u.push(t)}function h(t,n,r){t.byteLength=n.byteLength,e.bufferData(t.type,n,r)}function d(e,n,r,i,o,a){var s,u;if(e.usage=r,Array.isArray(n)){if(e.dtype=i||Ue,n.length>0)if(Array.isArray(n[0])){s=De(n);for(var l=1,c=1;c<s.length;++c)l*=s[c];e.dimension=l,h(e,u=Re(n,s,e.dtype),r),a?e.persistentData=u:zt.freeType(u)}else if("number"==typeof n[0]){e.dimension=o;var d=zt.allocType(e.dtype,n.length);He(d,n),h(e,d,r),a?e.persistentData=d:zt.freeType(d)}else t(n[0])?(e.dimension=n[0].length,e.dtype=i||Ve(n[0])||Ue,h(e,u=Re(n,[n.length,n[0].length],e.dtype),r),a?e.persistentData=u:zt.freeType(u)):nt.raise("invalid buffer data")}else if(t(n))e.dtype=i||Ve(n),e.dimension=o,h(e,n,r),a&&(e.persistentData=new Uint8Array(new Uint8Array(n.buffer)));else if(Se(n)){s=n.shape;var f=n.stride,p=n.offset,m=0,g=0,v=0,y=0;1===s.length?(m=s[0],g=1,v=f[0],y=0):2===s.length?(m=s[0],g=s[1],v=f[0],y=f[1]):nt.raise("invalid shape"),e.dtype=i||Ve(n.data)||Ue,e.dimension=g;var b=zt.allocType(e.dtype,m*g);Ge(b,n.data,m,g,v,y,p),h(e,b,r),a?e.persistentData=b:zt.freeType(b)}else n instanceof ArrayBuffer?(e.dtype=Be,e.dimension=o,h(e,n,r),a&&(e.persistentData=new Uint8Array(new Uint8Array(n)))):nt.raise("invalid buffer data")}function f(t){n.bufferCount--,i(t);var r=t.buffer;nt(r,"buffer must not be deleted already"),e.deleteBuffer(r),t.buffer=null,delete a[t.id]}function p(i,o,u,l){n.bufferCount++;var c=new s(o);function h(n){var i=ze,o=null,a=0,s=0,u=1;return Array.isArray(n)||t(n)||Se(n)||n instanceof ArrayBuffer?o=n:"number"==typeof n?a=0|n:n&&(nt.type(n,"object","buffer arguments must be an object, a number or an array"),"data"in n&&(nt(null===o||Array.isArray(o)||t(o)||Se(o),"invalid data for buffer"),o=n.data),"usage"in n&&(nt.parameter(n.usage,Le,"invalid buffer usage"),i=Le[n.usage]),"type"in n&&(nt.parameter(n.type,Oe,"invalid buffer type"),s=Oe[n.type]),"dimension"in n&&(nt.type(n.dimension,"number","invalid dimension"),u=0|n.dimension),"length"in n&&(nt.nni(a,"buffer length must be a nonnegative integer"),a=0|n.length)),c.bind(),o?d(c,o,i,s,u,l):(a&&e.bufferData(c.type,a,i),c.dtype=s||Be,c.usage=i,c.dimension=u,c.byteLength=a),r.profile&&(c.stats.size=c.byteLength*je[c.dtype]),h}function p(t,n){nt(n+t.byteLength<=c.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+t.byteLength+" starting from offset "+n+" to a buffer of size "+c.byteLength),e.bufferSubData(c.type,n,t)}function m(e,n){var r,i=0|(n||0);if(c.bind(),t(e)||e instanceof ArrayBuffer)p(e,i);else if(Array.isArray(e)){if(e.length>0)if("number"==typeof e[0]){var o=zt.allocType(c.dtype,e.length);He(o,e),p(o,i),zt.freeType(o)}else if(Array.isArray(e[0])||t(e[0])){r=De(e);var a=Re(e,r,c.dtype);p(a,i),zt.freeType(a)}else nt.raise("invalid buffer data")}else if(Se(e)){r=e.shape;var s=e.stride,u=0,l=0,d=0,f=0;1===r.length?(u=r[0],l=1,d=s[0],f=0):2===r.length?(u=r[0],l=r[1],d=s[0],f=s[1]):nt.raise("invalid shape");var m=Array.isArray(e.data)?c.dtype:Ve(e.data),g=zt.allocType(m,u*l);Ge(g,e.data,u,l,d,f,e.offset),p(g,i),zt.freeType(g)}else nt.raise("invalid data for buffer subdata");return h}return a[c.id]=c,u||h(i),h._reglType="buffer",h._buffer=c,h.subdata=m,r.profile&&(h.stats=c.stats),h.destroy=function(){f(c)},h}function m(){Ee(a).forEach((function(t){t.buffer=e.createBuffer(),e.bindBuffer(t.type,t.buffer),e.bufferData(t.type,t.persistentData||t.byteLength,t.usage)}))}return r.profile&&(n.getTotalBufferSize=function(){var t=0;return Object.keys(a).forEach((function(e){t+=a[e].stats.size})),t}),{create:p,createStream:l,destroyStream:c,clear:function(){Ee(a).forEach(f),u.forEach(f)},getBuffer:function(t){return t&&t._buffer instanceof s?t._buffer:null},restore:m,_initBuffer:d}}je[5120]=1,je[5122]=2,je[5124]=4,je[5121]=1,je[5123]=2,je[5125]=4,je[5126]=4;var Xe={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Ye=0,qe=1,$e=4,Ke=5120,Ze=5121,Qe=5122,Je=5123,tn=5124,en=5125,nn=34963,rn=35040,on=35044;function an(e,n,r,i){var o={},a=0,s={uint8:Ze,uint16:Je};function u(t){this.id=a++,o[this.id]=this,this.buffer=t,this.primType=$e,this.vertCount=0,this.type=0}n.oes_element_index_uint&&(s.uint32=en),u.prototype.bind=function(){this.buffer.bind()};var l=[];function c(t){var e=l.pop();return e||(e=new u(r.create(null,nn,!0,!1)._buffer)),d(e,t,rn,-1,-1,0,0),e}function h(t){l.push(t)}function d(i,o,a,s,u,l,c){var h;if(i.buffer.bind(),o){var d=c;c||t(o)&&(!Se(o)||t(o.data))||(d=n.oes_element_index_uint?en:Je),r._initBuffer(i.buffer,o,a,d,3)}else e.bufferData(nn,l,a),i.buffer.dtype=h||Ze,i.buffer.usage=a,i.buffer.dimension=3,i.buffer.byteLength=l;if(h=c,!c){switch(i.buffer.dtype){case Ze:case Ke:h=Ze;break;case Je:case Qe:h=Je;break;case en:case tn:h=en;break;default:nt.raise("unsupported type for element array")}i.buffer.dtype=h}i.type=h,nt(h!==en||!!n.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var f=u;f<0&&(f=i.buffer.byteLength,h===Je?f>>=1:h===en&&(f>>=2)),i.vertCount=f;var p=s;if(s<0){p=$e;var m=i.buffer.dimension;1===m&&(p=Ye),2===m&&(p=qe),3===m&&(p=$e)}i.primType=p}function f(t){i.elementsCount--,nt(null!==t.buffer,"must not double destroy elements"),delete o[t.id],t.buffer.destroy(),t.buffer=null}function p(e,n){var o=r.create(null,nn,!0),a=new u(o._buffer);function l(e){if(e)if("number"==typeof e)o(e),a.primType=$e,a.vertCount=0|e,a.type=Ze;else{var n=null,r=on,i=-1,u=-1,c=0,h=0;Array.isArray(e)||t(e)||Se(e)?n=e:(nt.type(e,"object","invalid arguments for elements"),"data"in e&&(n=e.data,nt(Array.isArray(n)||t(n)||Se(n),"invalid data for element buffer")),"usage"in e&&(nt.parameter(e.usage,Le,"invalid element buffer usage"),r=Le[e.usage]),"primitive"in e&&(nt.parameter(e.primitive,Xe,"invalid element buffer primitive"),i=Xe[e.primitive]),"count"in e&&(nt("number"==typeof e.count&&e.count>=0,"invalid vertex count for elements"),u=0|e.count),"type"in e&&(nt.parameter(e.type,s,"invalid buffer type"),h=s[e.type]),"length"in e?c=0|e.length:(c=u,h===Je||h===Qe?c*=2:h!==en&&h!==tn||(c*=4))),d(a,n,r,i,u,c,h)}else o(),a.primType=$e,a.vertCount=0,a.type=Ze;return l}return i.elementsCount++,l(e),l._reglType="elements",l._elements=a,l.subdata=function(t,e){return o.subdata(t,e),l},l.destroy=function(){f(a)},l}return{create:p,createStream:c,destroyStream:h,getElements:function(t){return"function"==typeof t&&t._elements instanceof u?t._elements:null},clear:function(){Ee(o).forEach(f)}}}var sn=new Float32Array(1),un=new Uint32Array(sn.buffer),ln=5123;function cn(t){for(var e=zt.allocType(ln,t.length),n=0;n<t.length;++n)if(isNaN(t[n]))e[n]=65535;else if(t[n]===1/0)e[n]=31744;else if(t[n]===-1/0)e[n]=64512;else{sn[0]=t[n];var r=un[0],i=r>>>31<<15,o=(r<<1>>>24)-127,a=r>>13&1023;if(o<-24)e[n]=i;else if(o<-14){var s=-14-o;e[n]=i+(a+1024>>s)}else e[n]=o>15?i+31744:i+(o+15<<10)+a}return e}function hn(e){return Array.isArray(e)||t(e)}var dn=function(t){return!(t&t-1||!t)},fn=34467,pn=3553,mn=34067,gn=34069,vn=6408,yn=6406,bn=6407,xn=6409,wn=6410,_n=32854,Sn=32855,En=36194,An=32819,Mn=32820,Cn=33635,Tn=34042,kn=6402,In=34041,Nn=35904,Pn=35906,On=36193,Ln=33776,Rn=33777,Dn=33778,zn=33779,Fn=35986,Bn=35987,Un=34798,jn=35840,Vn=35841,Hn=35842,Gn=35843,Wn=36196,Xn=5121,Yn=5123,qn=5125,$n=5126,Kn=10242,Zn=10243,Qn=10497,Jn=33071,tr=33648,er=10240,nr=10241,rr=9728,ir=9729,or=9984,ar=9985,sr=9986,ur=9987,lr=33170,cr=4352,hr=4353,dr=4354,fr=34046,pr=3317,mr=37440,gr=37441,vr=37443,yr=37444,br=33984,xr=[or,sr,ar,ur],wr=[0,xn,wn,bn,vn],_r={};function Sr(t){return"[object "+t+"]"}_r[xn]=_r[yn]=_r[kn]=1,_r[In]=_r[wn]=2,_r[bn]=_r[Nn]=3,_r[vn]=_r[Pn]=4;var Er=Sr("HTMLCanvasElement"),Ar=Sr("OffscreenCanvas"),Mr=Sr("CanvasRenderingContext2D"),Cr=Sr("ImageBitmap"),Tr=Sr("HTMLImageElement"),kr=Sr("HTMLVideoElement"),Ir=Object.keys(Pe).concat([Er,Ar,Mr,Cr,Tr,kr]),Nr=[];Nr[Xn]=1,Nr[$n]=4,Nr[On]=2,Nr[Yn]=2,Nr[qn]=4;var Pr=[];function Or(t){return Array.isArray(t)&&(0===t.length||"number"==typeof t[0])}function Lr(t){return!!Array.isArray(t)&&!(0===t.length||!hn(t[0]))}function Rr(t){return Object.prototype.toString.call(t)}function Dr(t){return Rr(t)===Er}function zr(t){return Rr(t)===Ar}function Fr(t){return Rr(t)===Mr}function Br(t){return Rr(t)===Cr}function Ur(t){return Rr(t)===Tr}function jr(t){return Rr(t)===kr}function Vr(t){if(!t)return!1;var e=Rr(t);return Ir.indexOf(e)>=0||Or(t)||Lr(t)||Se(t)}function Hr(t){return 0|Pe[Object.prototype.toString.call(t)]}function Gr(t,e){var n=e.length;switch(t.type){case Xn:case Yn:case qn:case $n:var r=zt.allocType(t.type,n);r.set(e),t.data=r;break;case On:t.data=cn(e);break;default:nt.raise("unsupported texture type, must specify a typed array")}}function Wr(t,e){return zt.allocType(t.type===On?$n:t.type,e)}function Xr(t,e){t.type===On?(t.data=cn(e),zt.freeType(e)):t.data=e}function Yr(t,e,n,r,i,o){for(var a=t.width,s=t.height,u=t.channels,l=Wr(t,a*s*u),c=0,h=0;h<s;++h)for(var d=0;d<a;++d)for(var f=0;f<u;++f)l[c++]=e[n*d+r*h+i*f+o];Xr(t,l)}function qr(t,e,n,r,i,o){var a;if(a=void 0!==Pr[t]?Pr[t]:_r[t]*Nr[e],o&&(a*=6),i){for(var s=0,u=n;u>=1;)s+=a*u*u,u/=2;return s}return a*n*r}function $r(n,r,i,o,a,s,u){var l={"don't care":cr,"dont care":cr,nice:dr,fast:hr},c={repeat:Qn,clamp:Jn,mirror:tr},h={nearest:rr,linear:ir},d=e({mipmap:ur,"nearest mipmap nearest":or,"linear mipmap nearest":ar,"nearest mipmap linear":sr,"linear mipmap linear":ur},h),f={none:0,browser:yr},p={uint8:Xn,rgba4:An,rgb565:Cn,"rgb5 a1":Mn},m={alpha:yn,luminance:xn,"luminance alpha":wn,rgb:bn,rgba:vn,rgba4:_n,"rgb5 a1":Sn,rgb565:En},g={};r.ext_srgb&&(m.srgb=Nn,m.srgba=Pn),r.oes_texture_float&&(p.float32=p.float=$n),r.oes_texture_half_float&&(p.float16=p["half float"]=On),r.webgl_depth_texture&&(e(m,{depth:kn,"depth stencil":In}),e(p,{uint16:Yn,uint32:qn,"depth stencil":Tn})),r.webgl_compressed_texture_s3tc&&e(g,{"rgb s3tc dxt1":Ln,"rgba s3tc dxt1":Rn,"rgba s3tc dxt3":Dn,"rgba s3tc dxt5":zn}),r.webgl_compressed_texture_atc&&e(g,{"rgb atc":Fn,"rgba atc explicit alpha":Bn,"rgba atc interpolated alpha":Un}),r.webgl_compressed_texture_pvrtc&&e(g,{"rgb pvrtc 4bppv1":jn,"rgb pvrtc 2bppv1":Vn,"rgba pvrtc 4bppv1":Hn,"rgba pvrtc 2bppv1":Gn}),r.webgl_compressed_texture_etc1&&(g["rgb etc1"]=Wn);var v=Array.prototype.slice.call(n.getParameter(fn));Object.keys(g).forEach((function(t){var e=g[t];v.indexOf(e)>=0&&(m[t]=e)}));var y=Object.keys(m);i.textureFormats=y;var b=[];Object.keys(m).forEach((function(t){var e=m[t];b[e]=t}));var x=[];Object.keys(p).forEach((function(t){var e=p[t];x[e]=t}));var w=[];Object.keys(h).forEach((function(t){var e=h[t];w[e]=t}));var _=[];Object.keys(d).forEach((function(t){var e=d[t];_[e]=t}));var S=[];Object.keys(c).forEach((function(t){var e=c[t];S[e]=t}));var E=y.reduce((function(t,e){var n=m[e];return n===xn||n===yn||n===xn||n===wn||n===kn||n===In||r.ext_srgb&&(n===Nn||n===Pn)?t[n]=n:n===Sn||e.indexOf("rgba")>=0?t[n]=vn:t[n]=bn,t}),{});function A(){this.internalformat=vn,this.format=vn,this.type=Xn,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=yr,this.width=0,this.height=0,this.channels=0}function M(t,e){t.internalformat=e.internalformat,t.format=e.format,t.type=e.type,t.compressed=e.compressed,t.premultiplyAlpha=e.premultiplyAlpha,t.flipY=e.flipY,t.unpackAlignment=e.unpackAlignment,t.colorSpace=e.colorSpace,t.width=e.width,t.height=e.height,t.channels=e.channels}function C(t,e){if("object"==typeof e&&e){if("premultiplyAlpha"in e&&(nt.type(e.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),t.premultiplyAlpha=e.premultiplyAlpha),"flipY"in e&&(nt.type(e.flipY,"boolean","invalid texture flip"),t.flipY=e.flipY),"alignment"in e&&(nt.oneOf(e.alignment,[1,2,4,8],"invalid texture unpack alignment"),t.unpackAlignment=e.alignment),"colorSpace"in e&&(nt.parameter(e.colorSpace,f,"invalid colorSpace"),t.colorSpace=f[e.colorSpace]),"type"in e){var n=e.type;nt(r.oes_texture_float||!("float"===n||"float32"===n),"you must enable the OES_texture_float extension in order to use floating point textures."),nt(r.oes_texture_half_float||!("half float"===n||"float16"===n),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),nt(r.webgl_depth_texture||!("uint16"===n||"uint32"===n||"depth stencil"===n),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),nt.parameter(n,p,"invalid texture type"),t.type=p[n]}var o=t.width,a=t.height,s=t.channels,u=!1;"shape"in e?(nt(Array.isArray(e.shape)&&e.shape.length>=2,"shape must be an array"),o=e.shape[0],a=e.shape[1],3===e.shape.length&&(s=e.shape[2],nt(s>0&&s<=4,"invalid number of channels"),u=!0),nt(o>=0&&o<=i.maxTextureSize,"invalid width"),nt(a>=0&&a<=i.maxTextureSize,"invalid height")):("radius"in e&&(o=a=e.radius,nt(o>=0&&o<=i.maxTextureSize,"invalid radius")),"width"in e&&(o=e.width,nt(o>=0&&o<=i.maxTextureSize,"invalid width")),"height"in e&&(a=e.height,nt(a>=0&&a<=i.maxTextureSize,"invalid height")),"channels"in e&&(s=e.channels,nt(s>0&&s<=4,"invalid number of channels"),u=!0)),t.width=0|o,t.height=0|a,t.channels=0|s;var l=!1;if("format"in e){var c=e.format;nt(r.webgl_depth_texture||!("depth"===c||"depth stencil"===c),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),nt.parameter(c,m,"invalid texture format");var h=t.internalformat=m[c];t.format=E[h],c in p&&("type"in e||(t.type=p[c])),c in g&&(t.compressed=!0),l=!0}!u&&l?t.channels=_r[t.format]:u&&!l?t.channels!==wr[t.format]&&(t.format=t.internalformat=wr[t.channels]):l&&u&&nt(t.channels===_r[t.format],"number of channels inconsistent with specified format")}}function T(t){n.pixelStorei(mr,t.flipY),n.pixelStorei(gr,t.premultiplyAlpha),n.pixelStorei(vr,t.colorSpace),n.pixelStorei(pr,t.unpackAlignment)}function k(){A.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function I(e,n){var r=null;if(Vr(n)?r=n:n&&(nt.type(n,"object","invalid pixel data type"),C(e,n),"x"in n&&(e.xOffset=0|n.x),"y"in n&&(e.yOffset=0|n.y),Vr(n.data)&&(r=n.data)),nt(!e.compressed||r instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),n.copy){nt(!r,"can not specify copy and data field for the same texture");var o=a.viewportWidth,s=a.viewportHeight;e.width=e.width||o-e.xOffset,e.height=e.height||s-e.yOffset,e.needsCopy=!0,nt(e.xOffset>=0&&e.xOffset<o&&e.yOffset>=0&&e.yOffset<s&&e.width>0&&e.width<=o&&e.height>0&&e.height<=s,"copy texture read out of bounds")}else if(r){if(t(r))e.channels=e.channels||4,e.data=r,"type"in n||e.type!==Xn||(e.type=Hr(r));else if(Or(r))e.channels=e.channels||4,Gr(e,r),e.alignment=1,e.needsFree=!0;else if(Se(r)){var u=r.data;Array.isArray(u)||e.type!==Xn||(e.type=Hr(u));var l,c,h,d,f,p,m=r.shape,g=r.stride;3===m.length?(h=m[2],p=g[2]):(nt(2===m.length,"invalid ndarray pixel data, must be 2 or 3D"),h=1,p=1),l=m[0],c=m[1],d=g[0],f=g[1],e.alignment=1,e.width=l,e.height=c,e.channels=h,e.format=e.internalformat=wr[h],e.needsFree=!0,Yr(e,u,d,f,p,r.offset)}else if(Dr(r)||zr(r)||Fr(r))Dr(r)||zr(r)?e.element=r:e.element=r.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(Br(r))e.element=r,e.width=r.width,e.height=r.height,e.channels=4;else if(Ur(r))e.element=r,e.width=r.naturalWidth,e.height=r.naturalHeight,e.channels=4;else if(jr(r))e.element=r,e.width=r.videoWidth,e.height=r.videoHeight,e.channels=4;else if(Lr(r)){var v=e.width||r[0].length,y=e.height||r.length,b=e.channels;b=hn(r[0][0])?b||r[0][0].length:b||1;for(var x=Ae.shape(r),w=1,_=0;_<x.length;++_)w*=x[_];var S=Wr(e,w);Ae.flatten(r,x,"",S),Xr(e,S),e.alignment=1,e.width=v,e.height=y,e.channels=b,e.format=e.internalformat=wr[b],e.needsFree=!0}}else e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4;e.type===$n?nt(i.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):e.type===On&&nt(i.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function N(t,e,r){var i=t.element,a=t.data,s=t.internalformat,u=t.format,l=t.type,c=t.width,h=t.height;T(t),i?n.texImage2D(e,r,u,u,l,i):t.compressed?n.compressedTexImage2D(e,r,s,c,h,0,a):t.needsCopy?(o(),n.copyTexImage2D(e,r,u,t.xOffset,t.yOffset,c,h,0)):n.texImage2D(e,r,u,c,h,0,u,l,a||null)}function P(t,e,r,i,a){var s=t.element,u=t.data,l=t.internalformat,c=t.format,h=t.type,d=t.width,f=t.height;T(t),s?n.texSubImage2D(e,a,r,i,c,h,s):t.compressed?n.compressedTexSubImage2D(e,a,r,i,l,d,f,u):t.needsCopy?(o(),n.copyTexSubImage2D(e,a,r,i,t.xOffset,t.yOffset,d,f)):n.texSubImage2D(e,a,r,i,d,f,c,h,u)}var O=[];function L(){return O.pop()||new k}function R(t){t.needsFree&&zt.freeType(t.data),k.call(t),O.push(t)}function D(){A.call(this),this.genMipmaps=!1,this.mipmapHint=cr,this.mipmask=0,this.images=Array(16)}function z(t,e,n){var r=t.images[0]=L();t.mipmask=1,r.width=t.width=e,r.height=t.height=n,r.channels=t.channels=4}function F(t,e){var n=null;if(Vr(e))M(n=t.images[0]=L(),t),I(n,e),t.mipmask=1;else if(C(t,e),Array.isArray(e.mipmap))for(var r=e.mipmap,i=0;i<r.length;++i)M(n=t.images[i]=L(),t),n.width>>=i,n.height>>=i,I(n,r[i]),t.mipmask|=1<<i;else M(n=t.images[0]=L(),t),I(n,e),t.mipmask=1;M(t,t.images[0]),!t.compressed||t.internalformat!==Ln&&t.internalformat!==Rn&&t.internalformat!==Dn&&t.internalformat!==zn||nt(t.width%4==0&&t.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function B(t,e){for(var n=t.images,r=0;r<n.length;++r){if(!n[r])return;N(n[r],e,r)}}var U=[];function j(){var t=U.pop()||new D;A.call(t),t.mipmask=0;for(var e=0;e<16;++e)t.images[e]=null;return t}function V(t){for(var e=t.images,n=0;n<e.length;++n)e[n]&&R(e[n]),e[n]=null;U.push(t)}function H(){this.minFilter=rr,this.magFilter=rr,this.wrapS=Jn,this.wrapT=Jn,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=cr}function G(t,e){if("min"in e){var n=e.min;nt.parameter(n,d),t.minFilter=d[n],xr.indexOf(t.minFilter)>=0&&!("faces"in e)&&(t.genMipmaps=!0)}if("mag"in e){var r=e.mag;nt.parameter(r,h),t.magFilter=h[r]}var o=t.wrapS,a=t.wrapT;if("wrap"in e){var s=e.wrap;"string"==typeof s?(nt.parameter(s,c),o=a=c[s]):Array.isArray(s)&&(nt.parameter(s[0],c),nt.parameter(s[1],c),o=c[s[0]],a=c[s[1]])}else{if("wrapS"in e){var u=e.wrapS;nt.parameter(u,c),o=c[u]}if("wrapT"in e){var f=e.wrapT;nt.parameter(f,c),a=c[f]}}if(t.wrapS=o,t.wrapT=a,"anisotropic"in e){var p=e.anisotropic;nt("number"==typeof p&&p>=1&&p<=i.maxAnisotropic,"aniso samples must be between 1 and "),t.anisotropic=e.anisotropic}if("mipmap"in e){var m=!1;switch(typeof e.mipmap){case"string":nt.parameter(e.mipmap,l,"invalid mipmap hint"),t.mipmapHint=l[e.mipmap],t.genMipmaps=!0,m=!0;break;case"boolean":m=t.genMipmaps=e.mipmap;break;case"object":nt(Array.isArray(e.mipmap),"invalid mipmap type"),t.genMipmaps=!1,m=!0;break;default:nt.raise("invalid mipmap type")}m&&!("min"in e)&&(t.minFilter=or)}}function W(t,e){n.texParameteri(e,nr,t.minFilter),n.texParameteri(e,er,t.magFilter),n.texParameteri(e,Kn,t.wrapS),n.texParameteri(e,Zn,t.wrapT),r.ext_texture_filter_anisotropic&&n.texParameteri(e,fr,t.anisotropic),t.genMipmaps&&(n.hint(lr,t.mipmapHint),n.generateMipmap(e))}var X=0,Y={},q=i.maxTextureUnits,$=Array(q).map((function(){return null}));function K(t){A.call(this),this.mipmask=0,this.internalformat=vn,this.id=X++,this.refCount=1,this.target=t,this.texture=n.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new H,u.profile&&(this.stats={size:0})}function Z(t){n.activeTexture(br),n.bindTexture(t.target,t.texture)}function Q(){var t=$[0];t?n.bindTexture(t.target,t.texture):n.bindTexture(pn,null)}function J(t){var e=t.texture;nt(e,"must not double destroy texture");var r=t.unit,i=t.target;r>=0&&(n.activeTexture(br+r),n.bindTexture(i,null),$[r]=null),n.deleteTexture(e),t.texture=null,t.params=null,t.pixels=null,t.refCount=0,delete Y[t.id],s.textureCount--}function tt(t,e){var r=new K(pn);function o(t,e){var n=r.texInfo;H.call(n);var a=j();return"number"==typeof t?z(a,0|t,"number"==typeof e?0|e:0|t):t?(nt.type(t,"object","invalid arguments to regl.texture"),G(n,t),F(a,t)):z(a,1,1),n.genMipmaps&&(a.mipmask=(a.width<<1)-1),r.mipmask=a.mipmask,M(r,a),nt.texture2D(n,a,i),r.internalformat=a.internalformat,o.width=a.width,o.height=a.height,Z(r),B(a,pn),W(n,pn),Q(),V(a),u.profile&&(r.stats.size=qr(r.internalformat,r.type,a.width,a.height,n.genMipmaps,!1)),o.format=b[r.internalformat],o.type=x[r.type],o.mag=w[n.magFilter],o.min=_[n.minFilter],o.wrapS=S[n.wrapS],o.wrapT=S[n.wrapT],o}function a(t,e,n,i){nt(!!t,"must specify image data");var a=0|e,s=0|n,u=0|i,l=L();return M(l,r),l.width=0,l.height=0,I(l,t),l.width=l.width||(r.width>>u)-a,l.height=l.height||(r.height>>u)-s,nt(r.type===l.type&&r.format===l.format&&r.internalformat===l.internalformat,"incompatible format for texture.subimage"),nt(a>=0&&s>=0&&a+l.width<=r.width&&s+l.height<=r.height,"texture.subimage write out of bounds"),nt(r.mipmask&1<<u,"missing mipmap data"),nt(l.data||l.element||l.needsCopy,"missing image data"),Z(r),P(l,pn,a,s,u),Q(),R(l),o}function l(t,e){var i=0|t,a=0|e||i;if(i===r.width&&a===r.height)return o;o.width=r.width=i,o.height=r.height=a,Z(r);for(var s=0;r.mipmask>>s;++s){var l=i>>s,c=a>>s;if(!l||!c)break;n.texImage2D(pn,s,r.format,l,c,0,r.format,r.type,null)}return Q(),u.profile&&(r.stats.size=qr(r.internalformat,r.type,i,a,!1,!1)),o}return Y[r.id]=r,s.textureCount++,o(t,e),o.subimage=a,o.resize=l,o._reglType="texture2d",o._texture=r,u.profile&&(o.stats=r.stats),o.destroy=function(){r.decRef()},o}function et(t,e,r,o,a,l){var c=new K(mn);Y[c.id]=c,s.cubeCount++;var h=new Array(6);function d(t,e,n,r,o,a){var s,l=c.texInfo;for(H.call(l),s=0;s<6;++s)h[s]=j();if("number"!=typeof t&&t)if("object"==typeof t)if(e)F(h[0],t),F(h[1],e),F(h[2],n),F(h[3],r),F(h[4],o),F(h[5],a);else if(G(l,t),C(c,t),"faces"in t){var f=t.faces;for(nt(Array.isArray(f)&&6===f.length,"cube faces must be a length 6 array"),s=0;s<6;++s)nt("object"==typeof f[s]&&!!f[s],"invalid input for cube map face"),M(h[s],c),F(h[s],f[s])}else for(s=0;s<6;++s)F(h[s],t);else nt.raise("invalid arguments to cube map");else{var p=0|t||1;for(s=0;s<6;++s)z(h[s],p,p)}for(M(c,h[0]),i.npotTextureCube||nt(dn(c.width)&&dn(c.height),"your browser does not support non power or two texture dimensions"),l.genMipmaps?c.mipmask=(h[0].width<<1)-1:c.mipmask=h[0].mipmask,nt.textureCube(c,l,h,i),c.internalformat=h[0].internalformat,d.width=h[0].width,d.height=h[0].height,Z(c),s=0;s<6;++s)B(h[s],gn+s);for(W(l,mn),Q(),u.profile&&(c.stats.size=qr(c.internalformat,c.type,d.width,d.height,l.genMipmaps,!0)),d.format=b[c.internalformat],d.type=x[c.type],d.mag=w[l.magFilter],d.min=_[l.minFilter],d.wrapS=S[l.wrapS],d.wrapT=S[l.wrapT],s=0;s<6;++s)V(h[s]);return d}function f(t,e,n,r,i){nt(!!e,"must specify image data"),nt("number"==typeof t&&t===(0|t)&&t>=0&&t<6,"invalid face");var o=0|n,a=0|r,s=0|i,u=L();return M(u,c),u.width=0,u.height=0,I(u,e),u.width=u.width||(c.width>>s)-o,u.height=u.height||(c.height>>s)-a,nt(c.type===u.type&&c.format===u.format&&c.internalformat===u.internalformat,"incompatible format for texture.subimage"),nt(o>=0&&a>=0&&o+u.width<=c.width&&a+u.height<=c.height,"texture.subimage write out of bounds"),nt(c.mipmask&1<<s,"missing mipmap data"),nt(u.data||u.element||u.needsCopy,"missing image data"),Z(c),P(u,gn+t,o,a,s),Q(),R(u),d}function p(t){var e=0|t;if(e!==c.width){d.width=c.width=e,d.height=c.height=e,Z(c);for(var r=0;r<6;++r)for(var i=0;c.mipmask>>i;++i)n.texImage2D(gn+r,i,c.format,e>>i,e>>i,0,c.format,c.type,null);return Q(),u.profile&&(c.stats.size=qr(c.internalformat,c.type,d.width,d.height,!1,!0)),d}}return d(t,e,r,o,a,l),d.subimage=f,d.resize=p,d._reglType="textureCube",d._texture=c,u.profile&&(d.stats=c.stats),d.destroy=function(){c.decRef()},d}function rt(){for(var t=0;t<q;++t)n.activeTexture(br+t),n.bindTexture(pn,null),$[t]=null;Ee(Y).forEach(J),s.cubeCount=0,s.textureCount=0}function it(){for(var t=0;t<q;++t){var e=$[t];e&&(e.bindCount=0,e.unit=-1,$[t]=null)}Ee(Y).forEach((function(t){t.texture=n.createTexture(),n.bindTexture(t.target,t.texture);for(var e=0;e<32;++e)if(t.mipmask&1<<e)if(t.target===pn)n.texImage2D(pn,e,t.internalformat,t.width>>e,t.height>>e,0,t.internalformat,t.type,null);else for(var r=0;r<6;++r)n.texImage2D(gn+r,e,t.internalformat,t.width>>e,t.height>>e,0,t.internalformat,t.type,null);W(t.texInfo,t.target)}))}function ot(){for(var t=0;t<q;++t){var e=$[t];e&&(e.bindCount=0,e.unit=-1,$[t]=null),n.activeTexture(br+t),n.bindTexture(pn,null),n.bindTexture(mn,null)}}return e(K.prototype,{bind:function(){var t=this;t.bindCount+=1;var e=t.unit;if(e<0){for(var r=0;r<q;++r){var i=$[r];if(i){if(i.bindCount>0)continue;i.unit=-1}$[r]=t,e=r;break}e>=q&&nt.raise("insufficient number of texture units"),u.profile&&s.maxTextureUnits<e+1&&(s.maxTextureUnits=e+1),t.unit=e,n.activeTexture(br+e),n.bindTexture(t.target,t.texture)}return e},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&J(this)}}),u.profile&&(s.getTotalTextureSize=function(){var t=0;return Object.keys(Y).forEach((function(e){t+=Y[e].stats.size})),t}),{create2D:tt,createCube:et,clear:rt,getTexture:function(t){return null},restore:it,refresh:ot}}Pr[_n]=2,Pr[Sn]=2,Pr[En]=2,Pr[In]=4,Pr[Ln]=.5,Pr[Rn]=.5,Pr[Dn]=1,Pr[zn]=1,Pr[Fn]=.5,Pr[Bn]=1,Pr[Un]=1,Pr[jn]=.5,Pr[Vn]=.25,Pr[Hn]=.5,Pr[Gn]=.25,Pr[Wn]=.5;var Kr=36161,Zr=32854,Qr=32855,Jr=36194,ti=33189,ei=36168,ni=34041,ri=35907,ii=34836,oi=34842,ai=34843,si=[];function ui(t,e,n){return si[t]*e*n}si[Zr]=2,si[Qr]=2,si[Jr]=2,si[ti]=2,si[ei]=1,si[ni]=4,si[ri]=4,si[ii]=16,si[oi]=8,si[ai]=6;var li=function(t,e,n,r,i){var o={rgba4:Zr,rgb565:Jr,"rgb5 a1":Qr,depth:ti,stencil:ei,"depth stencil":ni};e.ext_srgb&&(o.srgba=ri),e.ext_color_buffer_half_float&&(o.rgba16f=oi,o.rgb16f=ai),e.webgl_color_buffer_float&&(o.rgba32f=ii);var a=[];Object.keys(o).forEach((function(t){var e=o[t];a[e]=t}));var s=0,u={};function l(t){this.id=s++,this.refCount=1,this.renderbuffer=t,this.format=Zr,this.width=0,this.height=0,i.profile&&(this.stats={size:0})}function c(e){var n=e.renderbuffer;nt(n,"must not double destroy renderbuffer"),t.bindRenderbuffer(Kr,null),t.deleteRenderbuffer(n),e.renderbuffer=null,e.refCount=0,delete u[e.id],r.renderbufferCount--}function h(e,s){var c=new l(t.createRenderbuffer());function h(e,r){var s=0,u=0,l=Zr;if("object"==typeof e&&e){var d=e;if("shape"in d){var f=d.shape;nt(Array.isArray(f)&&f.length>=2,"invalid renderbuffer shape"),s=0|f[0],u=0|f[1]}else"radius"in d&&(s=u=0|d.radius),"width"in d&&(s=0|d.width),"height"in d&&(u=0|d.height);"format"in d&&(nt.parameter(d.format,o,"invalid renderbuffer format"),l=o[d.format])}else"number"==typeof e?(s=0|e,u="number"==typeof r?0|r:s):e?nt.raise("invalid arguments to renderbuffer constructor"):s=u=1;if(nt(s>0&&u>0&&s<=n.maxRenderbufferSize&&u<=n.maxRenderbufferSize,"invalid renderbuffer size"),s!==c.width||u!==c.height||l!==c.format)return h.width=c.width=s,h.height=c.height=u,c.format=l,t.bindRenderbuffer(Kr,c.renderbuffer),t.renderbufferStorage(Kr,l,s,u),nt(0===t.getError(),"invalid render buffer format"),i.profile&&(c.stats.size=ui(c.format,c.width,c.height)),h.format=a[c.format],h}function d(e,r){var o=0|e,a=0|r||o;return o===c.width&&a===c.height||(nt(o>0&&a>0&&o<=n.maxRenderbufferSize&&a<=n.maxRenderbufferSize,"invalid renderbuffer size"),h.width=c.width=o,h.height=c.height=a,t.bindRenderbuffer(Kr,c.renderbuffer),t.renderbufferStorage(Kr,c.format,o,a),nt(0===t.getError(),"invalid render buffer format"),i.profile&&(c.stats.size=ui(c.format,c.width,c.height))),h}return u[c.id]=c,r.renderbufferCount++,h(e,s),h.resize=d,h._reglType="renderbuffer",h._renderbuffer=c,i.profile&&(h.stats=c.stats),h.destroy=function(){c.decRef()},h}function d(){Ee(u).forEach((function(e){e.renderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(Kr,e.renderbuffer),t.renderbufferStorage(Kr,e.format,e.width,e.height)})),t.bindRenderbuffer(Kr,null)}return l.prototype.decRef=function(){--this.refCount<=0&&c(this)},i.profile&&(r.getTotalRenderbufferSize=function(){var t=0;return Object.keys(u).forEach((function(e){t+=u[e].stats.size})),t}),{create:h,clear:function(){Ee(u).forEach(c)},restore:d}},ci=36160,hi=36161,di=3553,fi=34069,pi=36064,mi=36096,gi=36128,vi=33306,yi=36053,bi=36054,xi=36055,wi=36057,_i=36061,Si=36193,Ei=5121,Ai=5126,Mi=6407,Ci=6408,Ti=6402,ki=[Mi,Ci],Ii=[];Ii[Ci]=4,Ii[Mi]=3;var Ni=[];Ni[Ei]=1,Ni[Ai]=4,Ni[Si]=2;var Pi=33189,Oi=36168,Li=34041,Ri=[32854,32855,36194,35907,34842,34843,34836],Di={};function zi(t,n,r,i,o,a){var s={cur:null,next:null,dirty:!1,setFBO:null},u=["rgba"],l=["rgba4","rgb565","rgb5 a1"];n.ext_srgb&&l.push("srgba"),n.ext_color_buffer_half_float&&l.push("rgba16f","rgb16f"),n.webgl_color_buffer_float&&l.push("rgba32f");var c=["uint8"];function h(t,e,n){this.target=t,this.texture=e,this.renderbuffer=n;var r=0,i=0;e?(r=e.width,i=e.height):n&&(r=n.width,i=n.height),this.width=r,this.height=i}function d(t){t&&(t.texture&&t.texture._texture.decRef(),t.renderbuffer&&t.renderbuffer._renderbuffer.decRef())}function f(t,e,n){if(t)if(t.texture){var r=t.texture._texture,i=Math.max(1,r.width),o=Math.max(1,r.height);nt(i===e&&o===n,"inconsistent width/height for supplied texture"),r.refCount+=1}else{var a=t.renderbuffer._renderbuffer;nt(a.width===e&&a.height===n,"inconsistent width/height for renderbuffer"),a.refCount+=1}}function p(e,n){n&&(n.texture?t.framebufferTexture2D(ci,e,n.target,n.texture._texture.texture,0):t.framebufferRenderbuffer(ci,e,hi,n.renderbuffer._renderbuffer.renderbuffer))}function m(t){var e=di,n=null,r=null,i=t;"object"==typeof t&&(i=t.data,"target"in t&&(e=0|t.target)),nt.type(i,"function","invalid attachment data");var o=i._reglType;return"texture2d"===o?(n=i,nt(e===di)):"textureCube"===o?(n=i,nt(e>=fi&&e<fi+6,"invalid cube map target")):"renderbuffer"===o?(r=i,e=hi):nt.raise("invalid regl object for attachment"),new h(e,n,r)}function g(t,e,n,r,a){if(n){var s=i.create2D({width:t,height:e,format:r,type:a});return s._texture.refCount=0,new h(di,s,null)}var u=o.create({width:t,height:e,format:r});return u._renderbuffer.refCount=0,new h(hi,null,u)}function v(t){return t&&(t.texture||t.renderbuffer)}function y(t,e,n){t&&(t.texture?t.texture.resize(e,n):t.renderbuffer&&t.renderbuffer.resize(e,n),t.width=e,t.height=n)}n.oes_texture_half_float&&c.push("half float","float16"),n.oes_texture_float&&c.push("float","float32");var b=0,x={};function w(){this.id=b++,x[this.id]=this,this.framebuffer=t.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function _(t){t.colorAttachments.forEach(d),d(t.depthAttachment),d(t.stencilAttachment),d(t.depthStencilAttachment)}function S(e){var n=e.framebuffer;nt(n,"must not double destroy framebuffer"),t.deleteFramebuffer(n),e.framebuffer=null,a.framebufferCount--,delete x[e.id]}function E(e){var n;t.bindFramebuffer(ci,e.framebuffer);var i=e.colorAttachments;for(n=0;n<i.length;++n)p(pi+n,i[n]);for(n=i.length;n<r.maxColorAttachments;++n)t.framebufferTexture2D(ci,pi+n,di,null,0);t.framebufferTexture2D(ci,vi,di,null,0),t.framebufferTexture2D(ci,mi,di,null,0),t.framebufferTexture2D(ci,gi,di,null,0),p(mi,e.depthAttachment),p(gi,e.stencilAttachment),p(vi,e.depthStencilAttachment);var o=t.checkFramebufferStatus(ci);t.isContextLost()||o===yi||nt.raise("framebuffer configuration not supported, status = "+Di[o]),t.bindFramebuffer(ci,s.next?s.next.framebuffer:null),s.cur=s.next,t.getError()}function A(t,i){var o=new w;function h(t,e){var i;nt(s.next!==o,"can not update framebuffer which is currently in use");var a=0,d=0,p=!0,y=!0,b=null,x=!0,w="rgba",S="uint8",A=1,M=null,C=null,T=null,k=!1;if("number"==typeof t)a=0|t,d=0|e||a;else if(t){nt.type(t,"object","invalid arguments for framebuffer");var I=t;if("shape"in I){var N=I.shape;nt(Array.isArray(N)&&N.length>=2,"invalid shape for framebuffer"),a=N[0],d=N[1]}else"radius"in I&&(a=d=I.radius),"width"in I&&(a=I.width),"height"in I&&(d=I.height);("color"in I||"colors"in I)&&(b=I.color||I.colors,Array.isArray(b)&&nt(1===b.length||n.webgl_draw_buffers,"multiple render targets not supported")),b||("colorCount"in I&&(A=0|I.colorCount,nt(A>0,"invalid color buffer count")),"colorTexture"in I&&(x=!!I.colorTexture,w="rgba4"),"colorType"in I&&(S=I.colorType,x?(nt(n.oes_texture_float||!("float"===S||"float32"===S),"you must enable OES_texture_float in order to use floating point framebuffer objects"),nt(n.oes_texture_half_float||!("half float"===S||"float16"===S),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===S||"float16"===S?(nt(n.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),w="rgba16f"):"float"!==S&&"float32"!==S||(nt(n.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),w="rgba32f"),nt.oneOf(S,c,"invalid color type")),"colorFormat"in I&&(w=I.colorFormat,u.indexOf(w)>=0?x=!0:l.indexOf(w)>=0?x=!1:x?nt.oneOf(I.colorFormat,u,"invalid color format for texture"):nt.oneOf(I.colorFormat,l,"invalid color format for renderbuffer"))),("depthTexture"in I||"depthStencilTexture"in I)&&(k=!(!I.depthTexture&&!I.depthStencilTexture),nt(!k||n.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in I&&("boolean"==typeof I.depth?p=I.depth:(M=I.depth,y=!1)),"stencil"in I&&("boolean"==typeof I.stencil?y=I.stencil:(C=I.stencil,p=!1)),"depthStencil"in I&&("boolean"==typeof I.depthStencil?p=y=I.depthStencil:(T=I.depthStencil,p=!1,y=!1))}else a=d=1;var P=null,O=null,L=null,R=null;if(Array.isArray(b))P=b.map(m);else if(b)P=[m(b)];else for(P=new Array(A),i=0;i<A;++i)P[i]=g(a,d,x,w,S);nt(n.webgl_draw_buffers||P.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),nt(P.length<=r.maxColorAttachments,"too many color attachments, not supported"),a=a||P[0].width,d=d||P[0].height,M?O=m(M):p&&!y&&(O=g(a,d,k,"depth","uint32")),C?L=m(C):y&&!p&&(L=g(a,d,!1,"stencil","uint8")),T?R=m(T):!M&&!C&&y&&p&&(R=g(a,d,k,"depth stencil","depth stencil")),nt(!!M+!!C+!!T<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var D=null;for(i=0;i<P.length;++i)if(f(P[i],a,d),nt(!P[i]||P[i].texture&&ki.indexOf(P[i].texture._texture.format)>=0||P[i].renderbuffer&&Ri.indexOf(P[i].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+i+" is invalid"),P[i]&&P[i].texture){var z=Ii[P[i].texture._texture.format]*Ni[P[i].texture._texture.type];null===D?D=z:nt(D===z,"all color attachments much have the same number of bits per pixel.")}return f(O,a,d),nt(!O||O.texture&&O.texture._texture.format===Ti||O.renderbuffer&&O.renderbuffer._renderbuffer.format===Pi,"invalid depth attachment for framebuffer object"),f(L,a,d),nt(!L||L.renderbuffer&&L.renderbuffer._renderbuffer.format===Oi,"invalid stencil attachment for framebuffer object"),f(R,a,d),nt(!R||R.texture&&R.texture._texture.format===Li||R.renderbuffer&&R.renderbuffer._renderbuffer.format===Li,"invalid depth-stencil attachment for framebuffer object"),_(o),o.width=a,o.height=d,o.colorAttachments=P,o.depthAttachment=O,o.stencilAttachment=L,o.depthStencilAttachment=R,h.color=P.map(v),h.depth=v(O),h.stencil=v(L),h.depthStencil=v(R),h.width=o.width,h.height=o.height,E(o),h}function d(t,e){nt(s.next!==o,"can not resize a framebuffer which is currently in use");var n=Math.max(0|t,1),r=Math.max(0|e||n,1);if(n===o.width&&r===o.height)return h;for(var i=o.colorAttachments,a=0;a<i.length;++a)y(i[a],n,r);return y(o.depthAttachment,n,r),y(o.stencilAttachment,n,r),y(o.depthStencilAttachment,n,r),o.width=h.width=n,o.height=h.height=r,E(o),h}return a.framebufferCount++,h(t,i),e(h,{resize:d,_reglType:"framebuffer",_framebuffer:o,destroy:function(){S(o),_(o)},use:function(t){s.setFBO({framebuffer:h},t)}})}function M(t){var o=Array(6);function a(t){var r;nt(o.indexOf(s.next)<0,"can not update framebuffer which is currently in use");var l,h={color:null},d=0,f=null,p="rgba",m="uint8",g=1;if("number"==typeof t)d=0|t;else if(t){nt.type(t,"object","invalid arguments for framebuffer");var v=t;if("shape"in v){var y=v.shape;nt(Array.isArray(y)&&y.length>=2,"invalid shape for framebuffer"),nt(y[0]===y[1],"cube framebuffer must be square"),d=y[0]}else"radius"in v&&(d=0|v.radius),"width"in v?(d=0|v.width,"height"in v&&nt(v.height===d,"must be square")):"height"in v&&(d=0|v.height);("color"in v||"colors"in v)&&(f=v.color||v.colors,Array.isArray(f)&&nt(1===f.length||n.webgl_draw_buffers,"multiple render targets not supported")),f||("colorCount"in v&&(g=0|v.colorCount,nt(g>0,"invalid color buffer count")),"colorType"in v&&(nt.oneOf(v.colorType,c,"invalid color type"),m=v.colorType),"colorFormat"in v&&(p=v.colorFormat,nt.oneOf(v.colorFormat,u,"invalid color format for texture"))),"depth"in v&&(h.depth=v.depth),"stencil"in v&&(h.stencil=v.stencil),"depthStencil"in v&&(h.depthStencil=v.depthStencil)}else d=1;if(f)if(Array.isArray(f))for(l=[],r=0;r<f.length;++r)l[r]=f[r];else l=[f];else{l=Array(g);var b={radius:d,format:p,type:m};for(r=0;r<g;++r)l[r]=i.createCube(b)}for(h.color=Array(l.length),r=0;r<l.length;++r){var x=l[r];nt("function"==typeof x&&"textureCube"===x._reglType,"invalid cube map"),d=d||x.width,nt(x.width===d&&x.height===d,"invalid cube map shape"),h.color[r]={target:fi,data:l[r]}}for(r=0;r<6;++r){for(var w=0;w<l.length;++w)h.color[w].target=fi+r;r>0&&(h.depth=o[0].depth,h.stencil=o[0].stencil,h.depthStencil=o[0].depthStencil),o[r]?o[r](h):o[r]=A(h)}return e(a,{width:d,height:d,color:l})}function l(t){var e,n=0|t;if(nt(n>0&&n<=r.maxCubeMapSize,"invalid radius for cube fbo"),n===a.width)return a;var i=a.color;for(e=0;e<i.length;++e)i[e].resize(n);for(e=0;e<6;++e)o[e].resize(n);return a.width=a.height=n,a}return a(t),e(a,{faces:o,resize:l,_reglType:"framebufferCube",destroy:function(){o.forEach((function(t){t.destroy()}))}})}function C(){s.cur=null,s.next=null,s.dirty=!0,Ee(x).forEach((function(e){e.framebuffer=t.createFramebuffer(),E(e)}))}return e(s,{getFramebuffer:function(t){if("function"==typeof t&&"framebuffer"===t._reglType){var e=t._framebuffer;if(e instanceof w)return e}return null},create:A,createCube:M,clear:function(){Ee(x).forEach(S)},restore:C})}Di[yi]="complete",Di[bi]="incomplete attachment",Di[wi]="incomplete dimensions",Di[xi]="incomplete, missing attachment",Di[_i]="unsupported";var Fi=5126,Bi=34962;function Ui(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Fi,this.offset=0,this.stride=0,this.divisor=0}function ji(e,n,r,i,o){for(var a=r.maxAttributes,s=new Array(a),u=0;u<a;++u)s[u]=new Ui;var l=0,c={},h={Record:Ui,scope:{},state:s,currentVAO:null,targetVAO:null,restore:f()?x:function(){},createVAO:w,getVAO:m,destroyBuffer:d,setVAO:f()?g:v,clear:f()?y:function(){}};function d(t){for(var n=0;n<s.length;++n){var r=s[n];r.buffer===t&&(e.disableVertexAttribArray(n),r.buffer=null)}}function f(){return n.oes_vertex_array_object}function p(){return n.angle_instanced_arrays}function m(t){return"function"==typeof t&&t._vao?t._vao:null}function g(t){if(t!==h.currentVAO){var e=f();t?e.bindVertexArrayOES(t.vao):e.bindVertexArrayOES(null),h.currentVAO=t}}function v(t){if(t!==h.currentVAO){if(t)t.bindAttrs();else for(var n=p(),r=0;r<s.length;++r){var i=s[r];i.buffer?(e.enableVertexAttribArray(r),e.vertexAttribPointer(r,i.size,i.type,i.normalized,i.stride,i.offfset),n&&i.divisor&&n.vertexAttribDivisorANGLE(r,i.divisor)):(e.disableVertexAttribArray(r),e.vertexAttrib4f(r,i.x,i.y,i.z,i.w))}h.currentVAO=t}}function y(){Ee(c).forEach((function(t){t.destroy()}))}function b(){this.id=++l,this.attributes=[];var t=f();this.vao=t?t.createVertexArrayOES():null,c[this.id]=this,this.buffers=[]}function x(){f()&&Ee(c).forEach((function(t){t.refresh()}))}function w(e){var r=new b;function s(e){nt(Array.isArray(e),"arguments to vertex array constructor must be an array"),nt(e.length<a,"too many attributes"),nt(e.length>0,"must specify at least one attribute");var i={},u=r.attributes;u.length=e.length;for(var l=0;l<e.length;++l){var c,h=e[l],d=u[l]=new Ui,f=h.data||h;Array.isArray(f)||t(f)||Se(f)?(r.buffers[l]&&(c=r.buffers[l],t(f)&&c._buffer.byteLength>=f.byteLength?c.subdata(f):(c.destroy(),r.buffers[l]=null)),r.buffers[l]||(c=r.buffers[l]=o.create(h,Bi,!1,!0)),d.buffer=o.getBuffer(c),d.size=0|d.buffer.dimension,d.normalized=!1,d.type=d.buffer.dtype,d.offset=0,d.stride=0,d.divisor=0,d.state=1,i[l]=1):o.getBuffer(h)?(d.buffer=o.getBuffer(h),d.size=0|d.buffer.dimension,d.normalized=!1,d.type=d.buffer.dtype,d.offset=0,d.stride=0,d.divisor=0,d.state=1):o.getBuffer(h.buffer)?(d.buffer=o.getBuffer(h.buffer),d.size=0|(+h.size||d.buffer.dimension),d.normalized=!!h.normalized||!1,"type"in h?(nt.parameter(h.type,Oe,"invalid buffer type"),d.type=Oe[h.type]):d.type=d.buffer.dtype,d.offset=0|(h.offset||0),d.stride=0|(h.stride||0),d.divisor=0|(h.divisor||0),d.state=1,nt(d.size>=1&&d.size<=4,"size must be between 1 and 4"),nt(d.offset>=0,"invalid offset"),nt(d.stride>=0&&d.stride<=255,"stride must be between 0 and 255"),nt(d.divisor>=0,"divisor must be positive"),nt(!d.divisor||!!n.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in h?(nt(l>0,"first attribute must not be a constant"),d.x=+h.x||0,d.y=+h.y||0,d.z=+h.z||0,d.w=+h.w||0,d.state=2):nt(!1,"invalid attribute spec for location "+l)}for(var p=0;p<r.buffers.length;++p)!i[p]&&r.buffers[p]&&(r.buffers[p].destroy(),r.buffers[p]=null);return r.refresh(),s}return i.vaoCount+=1,s.destroy=function(){for(var t=0;t<r.buffers.length;++t)r.buffers[t]&&r.buffers[t].destroy();r.buffers.length=0,r.destroy()},s._vao=r,s._reglType="vao",s(e)}return b.prototype.bindAttrs=function(){for(var t=p(),n=this.attributes,r=0;r<n.length;++r){var i=n[r];i.buffer?(e.enableVertexAttribArray(r),e.bindBuffer(Bi,i.buffer.buffer),e.vertexAttribPointer(r,i.size,i.type,i.normalized,i.stride,i.offset),t&&i.divisor&&t.vertexAttribDivisorANGLE(r,i.divisor)):(e.disableVertexAttribArray(r),e.vertexAttrib4f(r,i.x,i.y,i.z,i.w))}for(var o=n.length;o<a;++o)e.disableVertexAttribArray(o)},b.prototype.refresh=function(){var t=f();t&&(t.bindVertexArrayOES(this.vao),this.bindAttrs(),h.currentVAO=this)},b.prototype.destroy=function(){if(this.vao){var t=f();this===h.currentVAO&&(h.currentVAO=null,t.bindVertexArrayOES(null)),t.deleteVertexArrayOES(this.vao),this.vao=null}c[this.id]&&(delete c[this.id],i.vaoCount-=1)},h}var Vi=35632,Hi=35633,Gi=35718,Wi=35721;function Xi(t,n,r,i){var o={},a={};function s(t,e,n,r){this.name=t,this.id=e,this.location=n,this.info=r}function u(t,e){for(var n=0;n<t.length;++n)if(t[n].id===e.id)return void(t[n].location=e.location);t.push(e)}function l(e,r,i){var s=e===Vi?o:a,u=s[r];if(!u){var l=n.str(r);u=t.createShader(e),t.shaderSource(u,l),t.compileShader(u),nt.shaderError(t,u,l,e,i),s[r]=u}return u}var c={},h=[],d=0;function f(t,e){this.id=d++,this.fragId=t,this.vertId=e,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,i.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function p(e,r,o){var a,c,h=l(Vi,e.fragId),d=l(Hi,e.vertId),f=e.program=t.createProgram();if(t.attachShader(f,h),t.attachShader(f,d),o)for(a=0;a<o.length;++a){var p=o[a];t.bindAttribLocation(f,p[0],p[1])}t.linkProgram(f),nt.linkError(t,f,n.str(e.fragId),n.str(e.vertId),r);var m=t.getProgramParameter(f,Gi);i.profile&&(e.stats.uniformsCount=m);var g=e.uniforms;for(a=0;a<m;++a)if(c=t.getActiveUniform(f,a))if(c.size>1)for(var v=0;v<c.size;++v){var y=c.name.replace("[0]","["+v+"]");u(g,new s(y,n.id(y),t.getUniformLocation(f,y),c))}else u(g,new s(c.name,n.id(c.name),t.getUniformLocation(f,c.name),c));var b=t.getProgramParameter(f,Wi);i.profile&&(e.stats.attributesCount=b);var x=e.attributes;for(a=0;a<b;++a)(c=t.getActiveAttrib(f,a))&&u(x,new s(c.name,n.id(c.name),t.getAttribLocation(f,c.name),c))}function m(){o={},a={};for(var t=0;t<h.length;++t)p(h[t],null,h[t].attributes.map((function(t){return[t.location,t.name]})))}return i.profile&&(r.getMaxUniformsCount=function(){var t=0;return h.forEach((function(e){e.stats.uniformsCount>t&&(t=e.stats.uniformsCount)})),t},r.getMaxAttributesCount=function(){var t=0;return h.forEach((function(e){e.stats.attributesCount>t&&(t=e.stats.attributesCount)})),t}),{clear:function(){var e=t.deleteShader.bind(t);Ee(o).forEach(e),o={},Ee(a).forEach(e),a={},h.forEach((function(e){t.deleteProgram(e.program)})),h.length=0,c={},r.shaderCount=0},program:function(n,i,s,u){nt.command(n>=0,"missing vertex shader",s),nt.command(i>=0,"missing fragment shader",s);var l=c[i];l||(l=c[i]={});var d=l[n];if(d&&(d.refCount++,!u))return d;var m=new f(i,n);return r.shaderCount++,p(m,s,u),d||(l[n]=m),h.push(m),e(m,{destroy:function(){if(m.refCount--,m.refCount<=0){t.deleteProgram(m.program);var e=h.indexOf(m);h.splice(e,1),r.shaderCount--}l[m.vertId].refCount<=0&&(t.deleteShader(a[m.vertId]),delete a[m.vertId],delete c[m.fragId][m.vertId]),Object.keys(c[m.fragId]).length||(t.deleteShader(o[m.fragId]),delete o[m.fragId],delete c[m.fragId])}})},restore:m,shader:l,frag:-1,vert:-1}}var Yi=6408,qi=5121,$i=3333,Ki=5126;function Zi(e,n,r,i,o,a,s){function u(u){var l;null===n.next?(nt(o.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),l=qi):(nt(null!==n.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),l=n.next.colorAttachments[0].texture._texture.type,a.oes_texture_float?(nt(l===qi||l===Ki,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),l===Ki&&nt(s.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):nt(l===qi,"Reading from a framebuffer is only allowed for the type 'uint8'"));var c=0,h=0,d=i.framebufferWidth,f=i.framebufferHeight,p=null;t(u)?p=u:u&&(nt.type(u,"object","invalid arguments to regl.read()"),c=0|u.x,h=0|u.y,nt(c>=0&&c<i.framebufferWidth,"invalid x offset for regl.read"),nt(h>=0&&h<i.framebufferHeight,"invalid y offset for regl.read"),d=0|(u.width||i.framebufferWidth-c),f=0|(u.height||i.framebufferHeight-h),p=u.data||null),p&&(l===qi?nt(p instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):l===Ki&&nt(p instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),nt(d>0&&d+c<=i.framebufferWidth,"invalid width for read pixels"),nt(f>0&&f+h<=i.framebufferHeight,"invalid height for read pixels"),r();var m=d*f*4;return p||(l===qi?p=new Uint8Array(m):l===Ki&&(p=p||new Float32Array(m))),nt.isTypedArray(p,"data buffer for regl.read() must be a typedarray"),nt(p.byteLength>=m,"data buffer for regl.read() too small"),e.pixelStorei($i,4),e.readPixels(c,h,d,f,Yi,l,p),p}function l(t){var e;return n.setFBO({framebuffer:t.framebuffer},(function(){e=u(t)})),e}function c(t){return t&&"framebuffer"in t?l(t):u(t)}return c}function Qi(t){return Array.prototype.slice.call(t)}function Ji(t){return Qi(t).join("")}function to(){var t=0,n=[],r=[];function i(e){for(var i=0;i<r.length;++i)if(r[i]===e)return n[i];var o="g"+t++;return n.push(o),r.push(e),o}function o(){var n=[];function r(){n.push.apply(n,Qi(arguments))}var i=[];function o(){var e="v"+t++;return i.push(e),arguments.length>0&&(n.push(e,"="),n.push.apply(n,Qi(arguments)),n.push(";")),e}return e(r,{def:o,toString:function(){return Ji([i.length>0?"var "+i.join(",")+";":"",Ji(n)])}})}function a(){var t=o(),n=o(),r=t.toString,i=n.toString;function a(e,r){n(e,r,"=",t.def(e,r),";")}return e((function(){t.apply(t,Qi(arguments))}),{def:t.def,entry:t,exit:n,save:a,set:function(e,n,r){a(e,n),t(e,n,"=",r,";")},toString:function(){return r()+i()}})}function s(){var t=Ji(arguments),n=a(),r=a(),i=n.toString,o=r.toString;return e(n,{then:function(){return n.apply(n,Qi(arguments)),this},else:function(){return r.apply(r,Qi(arguments)),this},toString:function(){var e=o();return e&&(e="else{"+e+"}"),Ji(["if(",t,"){",i(),"}",e])}})}var u=o(),l={};function c(t,n){var r=[];function i(){var t="a"+r.length;return r.push(t),t}n=n||0;for(var o=0;o<n;++o)i();var s=a(),u=s.toString;return l[t]=e(s,{arg:i,toString:function(){return Ji(["function(",r.join(),"){",u(),"}"])}})}function h(){var t=['"use strict";',u,"return {"];Object.keys(l).forEach((function(e){t.push('"',e,'":',l[e].toString(),",")})),t.push("}");var e=Ji(t).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,n.concat(e)).apply(null,r)}return{global:u,link:i,block:o,proc:c,scope:a,cond:s,compile:h}}var eo="xyzw".split(""),no=5121,ro=1,io=2,oo=0,ao=1,so=2,uo=3,lo=4,co=5,ho=6,fo="dither",po="blend.enable",mo="blend.color",go="blend.equation",vo="blend.func",yo="depth.enable",bo="depth.func",xo="depth.range",wo="depth.mask",_o="colorMask",So="cull.enable",Eo="cull.face",Ao="frontFace",Mo="lineWidth",Co="polygonOffset.enable",To="polygonOffset.offset",ko="sample.alpha",Io="sample.enable",No="sample.coverage",Po="stencil.enable",Oo="stencil.mask",Lo="stencil.func",Ro="stencil.opFront",Do="stencil.opBack",zo="scissor.enable",Fo="scissor.box",Bo="viewport",Uo="profile",jo="framebuffer",Vo="vert",Ho="frag",Go="elements",Wo="primitive",Xo="count",Yo="offset",qo="instances",$o="vao",Ko="Width",Zo="Height",Qo=jo+Ko,Jo=jo+Zo,ta=Bo+Ko,ea=Bo+Zo,na="drawingBuffer",ra=na+Ko,ia=na+Zo,oa=[vo,go,Lo,Ro,Do,No,Bo,Fo,To],aa=34962,sa=34963,ua=3553,la=34067,ca=2884,ha=3042,da=3024,fa=2960,pa=2929,ma=3089,ga=32823,va=32926,ya=32928,ba=5126,xa=35664,wa=35665,_a=35666,Sa=5124,Ea=35667,Aa=35668,Ma=35669,Ca=35670,Ta=35671,ka=35672,Ia=35673,Na=35674,Pa=35675,Oa=35676,La=35678,Ra=35680,Da=4,za=1028,Fa=1029,Ba=2304,Ua=2305,ja=32775,Va=32776,Ha=519,Ga=7680,Wa=0,Xa=1,Ya=32774,qa=513,$a=36160,Ka=36064,Za={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Qa=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Ja={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},ts={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},es={frag:35632,vert:35633},ns={cw:Ba,ccw:Ua};function rs(e){return Array.isArray(e)||t(e)||Se(e)}function is(t){return t.sort((function(t,e){return t===Bo?-1:e===Bo?1:t<e?-1:1}))}function os(t,e,n,r){this.thisDep=t,this.contextDep=e,this.propDep=n,this.append=r}function as(t){return t&&!(t.thisDep||t.contextDep||t.propDep)}function ss(t){return new os(!1,!1,!1,t)}function us(t,e){var n=t.type;if(n===oo){var r=t.data.length;return new os(!0,r>=1,r>=2,e)}if(n===lo){var i=t.data;return new os(i.thisDep,i.contextDep,i.propDep,e)}if(n===co)return new os(!1,!1,!1,e);if(n===ho){for(var o=!1,a=!1,s=!1,u=0;u<t.data.length;++u){var l=t.data[u];if(l.type===ao)s=!0;else if(l.type===so)a=!0;else if(l.type===uo)o=!0;else if(l.type===oo){o=!0;var c=l.data;c>=1&&(a=!0),c>=2&&(s=!0)}else l.type===lo&&(o=o||l.data.thisDep,a=a||l.data.contextDep,s=s||l.data.propDep)}return new os(o,a,s,e)}return new os(n===uo,n===so,n===ao,e)}var ls=new os(!1,!1,!1,(function(){}));function cs(t,n,r,i,o,a,s,u,l,c,h,d,f,p,m){var g=c.Record,v={add:32774,subtract:32778,"reverse subtract":32779};r.ext_blend_minmax&&(v.min=ja,v.max=Va);var y=r.angle_instanced_arrays,b=r.webgl_draw_buffers,x={dirty:!0,profile:m.profile},w={},_=[],S={},E={};function A(t){return t.replace(".","_")}function M(t,e,n){var r=A(t);_.push(t),w[r]=x[r]=!!n,S[r]=e}function C(t,e,n){var r=A(t);_.push(t),Array.isArray(n)?(x[r]=n.slice(),w[r]=n.slice()):x[r]=w[r]=n,E[r]=e}M(fo,da),M(po,ha),C(mo,"blendColor",[0,0,0,0]),C(go,"blendEquationSeparate",[Ya,Ya]),C(vo,"blendFuncSeparate",[Xa,Wa,Xa,Wa]),M(yo,pa,!0),C(bo,"depthFunc",qa),C(xo,"depthRange",[0,1]),C(wo,"depthMask",!0),C(_o,_o,[!0,!0,!0,!0]),M(So,ca),C(Eo,"cullFace",Fa),C(Ao,Ao,Ua),C(Mo,Mo,1),M(Co,ga),C(To,"polygonOffset",[0,0]),M(ko,va),M(Io,ya),C(No,"sampleCoverage",[1,!1]),M(Po,fa),C(Oo,"stencilMask",-1),C(Lo,"stencilFunc",[Ha,0,-1]),C(Ro,"stencilOpSeparate",[za,Ga,Ga,Ga]),C(Do,"stencilOpSeparate",[Fa,Ga,Ga,Ga]),M(zo,ma),C(Fo,"scissor",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]),C(Bo,Bo,[0,0,t.drawingBufferWidth,t.drawingBufferHeight]);var T={gl:t,context:f,strings:n,next:w,current:x,draw:d,elements:a,buffer:o,shader:h,attributes:c.state,vao:c,uniforms:l,framebuffer:u,extensions:r,timer:p,isBufferArgs:rs},k={primTypes:Xe,compareFuncs:Ja,blendFuncs:Za,blendEquations:v,stencilOps:ts,glTypes:Oe,orientationType:ns};nt.optional((function(){T.isArrayLike=hn})),b&&(k.backBuffer=[Fa],k.drawBuffer=Mt(i.maxDrawbuffers,(function(t){return 0===t?[0]:Mt(t,(function(t){return Ka+t}))})));var I=0;function N(){var t=to(),e=t.link,r=t.global;t.id=I++,t.batchId="0";var i=e(T),o=t.shared={props:"a0"};Object.keys(T).forEach((function(t){o[t]=r.def(i,".",t)})),nt.optional((function(){t.CHECK=e(nt),t.commandStr=nt.guessCommand(),t.command=e(t.commandStr),t.assert=function(t,n,r){t("if(!(",n,"))",this.CHECK,".commandRaise(",e(r),",",this.command,");")},k.invalidBlendCombinations=Qa}));var a=t.next={},s=t.current={};Object.keys(E).forEach((function(t){Array.isArray(x[t])&&(a[t]=r.def(o.next,".",t),s[t]=r.def(o.current,".",t))}));var u=t.constants={};Object.keys(k).forEach((function(t){u[t]=r.def(JSON.stringify(k[t]))})),t.invoke=function(n,r){switch(r.type){case oo:var i=["this",o.context,o.props,t.batchId];return n.def(e(r.data),".call(",i.slice(0,Math.max(r.data.length+1,4)),")");case ao:return n.def(o.props,r.data);case so:return n.def(o.context,r.data);case uo:return n.def("this",r.data);case lo:return r.data.append(t,n),r.data.ref;case co:return r.data.toString();case ho:return r.data.map((function(e){return t.invoke(n,e)}))}},t.attribCache={};var l={};return t.scopeAttrib=function(t){var r=n.id(t);if(r in l)return l[r];var i=c.scope[r];return i||(i=c.scope[r]=new g),l[r]=e(i)},t}function P(t){var e,n=t.static,r=t.dynamic;if(Uo in n){var i=!!n[Uo];(e=ss((function(t,e){return i}))).enable=i}else if(Uo in r){var o=r[Uo];e=us(o,(function(t,e){return t.invoke(e,o)}))}return e}function O(t,e){var n=t.static,r=t.dynamic;if(jo in n){var i=n[jo];return i?(i=u.getFramebuffer(i),nt.command(i,"invalid framebuffer object"),ss((function(t,e){var n=t.link(i),r=t.shared;e.set(r.framebuffer,".next",n);var o=r.context;return e.set(o,"."+Qo,n+".width"),e.set(o,"."+Jo,n+".height"),n}))):ss((function(t,e){var n=t.shared;e.set(n.framebuffer,".next","null");var r=n.context;return e.set(r,"."+Qo,r+"."+ra),e.set(r,"."+Jo,r+"."+ia),"null"}))}if(jo in r){var o=r[jo];return us(o,(function(t,e){var n=t.invoke(e,o),r=t.shared,i=r.framebuffer,a=e.def(i,".getFramebuffer(",n,")");nt.optional((function(){t.assert(e,"!"+n+"||"+a,"invalid framebuffer object")})),e.set(i,".next",a);var s=r.context;return e.set(s,"."+Qo,a+"?"+a+".width:"+s+"."+ra),e.set(s,"."+Jo,a+"?"+a+".height:"+s+"."+ia),a}))}return null}function L(t,e,n){var r=t.static,i=t.dynamic;function o(t){if(t in r){var o=r[t];nt.commandType(o,"object","invalid "+t,n.commandStr);var a,s,u=!0,l=0|o.x,c=0|o.y;return"width"in o?(a=0|o.width,nt.command(a>=0,"invalid "+t,n.commandStr)):u=!1,"height"in o?(s=0|o.height,nt.command(s>=0,"invalid "+t,n.commandStr)):u=!1,new os(!u&&e&&e.thisDep,!u&&e&&e.contextDep,!u&&e&&e.propDep,(function(t,e){var n=t.shared.context,r=a;"width"in o||(r=e.def(n,".",Qo,"-",l));var i=s;return"height"in o||(i=e.def(n,".",Jo,"-",c)),[l,c,r,i]}))}if(t in i){var h=i[t],d=us(h,(function(e,n){var r=e.invoke(n,h);nt.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)}));var i=e.shared.context,o=n.def(r,".x|0"),a=n.def(r,".y|0"),s=n.def('"width" in ',r,"?",r,".width|0:","(",i,".",Qo,"-",o,")"),u=n.def('"height" in ',r,"?",r,".height|0:","(",i,".",Jo,"-",a,")");return nt.optional((function(){e.assert(n,s+">=0&&"+u+">=0","invalid "+t)})),[o,a,s,u]}));return e&&(d.thisDep=d.thisDep||e.thisDep,d.contextDep=d.contextDep||e.contextDep,d.propDep=d.propDep||e.propDep),d}return e?new os(e.thisDep,e.contextDep,e.propDep,(function(t,e){var n=t.shared.context;return[0,0,e.def(n,".",Qo),e.def(n,".",Jo)]})):null}var a=o(Bo);if(a){var s=a;a=new os(a.thisDep,a.contextDep,a.propDep,(function(t,e){var n=s.append(t,e),r=t.shared.context;return e.set(r,"."+ta,n[2]),e.set(r,"."+ea,n[3]),n}))}return{viewport:a,scissor_box:o(Fo)}}function R(t,e){var n=t.static;if("string"==typeof n[Ho]&&"string"==typeof n[Vo]){if(Object.keys(e.dynamic).length>0)return null;var r=e.static,i=Object.keys(r);if(i.length>0&&"number"==typeof r[i[0]]){for(var o=[],a=0;a<i.length;++a)nt("number"==typeof r[i[a]],"must specify all vertex attribute locations when using vaos"),o.push([0|r[i[a]],i[a]]);return o}}return null}function D(t,e,r){var i=t.static,o=t.dynamic;function a(t){if(t in i){var e=n.id(i[t]);nt.optional((function(){h.shader(es[t],e,nt.guessCommand())}));var r=ss((function(){return e}));return r.id=e,r}if(t in o){var a=o[t];return us(a,(function(e,n){var r=e.invoke(n,a),i=n.def(e.shared.strings,".id(",r,")");return nt.optional((function(){n(e.shared.shader,".shader(",es[t],",",i,",",e.command,");")})),i}))}return null}var s,u=a(Ho),l=a(Vo),c=null;return as(u)&&as(l)?(c=h.program(l.id,u.id,null,r),s=ss((function(t,e){return t.link(c)}))):s=new os(u&&u.thisDep||l&&l.thisDep,u&&u.contextDep||l&&l.contextDep,u&&u.propDep||l&&l.propDep,(function(t,e){var n,r=t.shared.shader;n=u?u.append(t,e):e.def(r,".",Ho);var i=r+".program("+(l?l.append(t,e):e.def(r,".",Vo))+","+n;return nt.optional((function(){i+=","+t.command})),e.def(i+")")})),{frag:u,vert:l,progVar:s,program:c}}function z(t,e){var n=t.static,r=t.dynamic;function i(){if(Go in n){var t=n[Go];rs(t)?t=a.getElements(a.create(t,!0)):t&&(t=a.getElements(t),nt.command(t,"invalid elements",e.commandStr));var i=ss((function(e,n){if(t){var r=e.link(t);return e.ELEMENTS=r,r}return e.ELEMENTS=null,null}));return i.value=t,i}if(Go in r){var o=r[Go];return us(o,(function(t,e){var n=t.shared,r=n.isBufferArgs,i=n.elements,a=t.invoke(e,o),s=e.def("null"),u=e.def(r,"(",a,")"),l=t.cond(u).then(s,"=",i,".createStream(",a,");").else(s,"=",i,".getElements(",a,");");return nt.optional((function(){t.assert(l.else,"!"+a+"||"+s,"invalid elements")})),e.entry(l),e.exit(t.cond(u).then(i,".destroyStream(",s,");")),t.ELEMENTS=s,s}))}return null}var o=i();function s(){if(Wo in n){var t=n[Wo];return nt.commandParameter(t,Xe,"invalid primitve",e.commandStr),ss((function(e,n){return Xe[t]}))}if(Wo in r){var i=r[Wo];return us(i,(function(t,e){var n=t.constants.primTypes,r=t.invoke(e,i);return nt.optional((function(){t.assert(e,r+" in "+n,"invalid primitive, must be one of "+Object.keys(Xe))})),e.def(n,"[",r,"]")}))}return o?as(o)?o.value?ss((function(t,e){return e.def(t.ELEMENTS,".primType")})):ss((function(){return Da})):new os(o.thisDep,o.contextDep,o.propDep,(function(t,e){var n=t.ELEMENTS;return e.def(n,"?",n,".primType:",Da)})):null}function u(t,i){if(t in n){var a=0|n[t];return nt.command(!i||a>=0,"invalid "+t,e.commandStr),ss((function(t,e){return i&&(t.OFFSET=a),a}))}if(t in r){var s=r[t];return us(s,(function(e,n){var r=e.invoke(n,s);return i&&(e.OFFSET=r,nt.optional((function(){e.assert(n,r+">=0","invalid "+t)}))),r}))}return i&&o?ss((function(t,e){return t.OFFSET="0",0})):null}var l=u(Yo,!0);function c(){if(Xo in n){var t=0|n[Xo];return nt.command("number"==typeof t&&t>=0,"invalid vertex count",e.commandStr),ss((function(){return t}))}if(Xo in r){var i=r[Xo];return us(i,(function(t,e){var n=t.invoke(e,i);return nt.optional((function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">=0&&"+n+"===("+n+"|0)","invalid vertex count")})),n}))}if(o){if(as(o)){if(o)return l?new os(l.thisDep,l.contextDep,l.propDep,(function(t,e){var n=e.def(t.ELEMENTS,".vertCount-",t.OFFSET);return nt.optional((function(){t.assert(e,n+">=0","invalid vertex offset/element buffer too small")})),n})):ss((function(t,e){return e.def(t.ELEMENTS,".vertCount")}));var a=ss((function(){return-1}));return nt.optional((function(){a.MISSING=!0})),a}var s=new os(o.thisDep||l.thisDep,o.contextDep||l.contextDep,o.propDep||l.propDep,(function(t,e){var n=t.ELEMENTS;return t.OFFSET?e.def(n,"?",n,".vertCount-",t.OFFSET,":-1"):e.def(n,"?",n,".vertCount:-1")}));return nt.optional((function(){s.DYNAMIC=!0})),s}return null}return{elements:o,primitive:s(),count:c(),instances:u(qo,!1),offset:l}}function F(t,e){var n=t.static,r=t.dynamic,o={};return _.forEach((function(t){var a=A(t);function s(e,i){if(t in n){var s=e(n[t]);o[a]=ss((function(){return s}))}else if(t in r){var u=r[t];o[a]=us(u,(function(t,e){return i(t,e,t.invoke(e,u))}))}}switch(t){case So:case po:case fo:case Po:case yo:case zo:case Co:case ko:case Io:case wo:return s((function(n){return nt.commandType(n,"boolean",t,e.commandStr),n}),(function(e,n,r){return nt.optional((function(){e.assert(n,"typeof "+r+'==="boolean"',"invalid flag "+t,e.commandStr)})),r}));case bo:return s((function(n){return nt.commandParameter(n,Ja,"invalid "+t,e.commandStr),Ja[n]}),(function(e,n,r){var i=e.constants.compareFuncs;return nt.optional((function(){e.assert(n,r+" in "+i,"invalid "+t+", must be one of "+Object.keys(Ja))})),n.def(i,"[",r,"]")}));case xo:return s((function(t){return nt.command(hn(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]&&t[0]<=t[1],"depth range is 2d array",e.commandStr),t}),(function(t,e,n){return nt.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===2&&typeof "+n+'[0]==="number"&&typeof '+n+'[1]==="number"&&'+n+"[0]<="+n+"[1]","depth range must be a 2d array")})),[e.def("+",n,"[0]"),e.def("+",n,"[1]")]}));case vo:return s((function(t){nt.commandType(t,"object","blend.func",e.commandStr);var n="srcRGB"in t?t.srcRGB:t.src,r="srcAlpha"in t?t.srcAlpha:t.src,i="dstRGB"in t?t.dstRGB:t.dst,o="dstAlpha"in t?t.dstAlpha:t.dst;return nt.commandParameter(n,Za,a+".srcRGB",e.commandStr),nt.commandParameter(r,Za,a+".srcAlpha",e.commandStr),nt.commandParameter(i,Za,a+".dstRGB",e.commandStr),nt.commandParameter(o,Za,a+".dstAlpha",e.commandStr),nt.command(-1===Qa.indexOf(n+", "+i),"unallowed blending combination (srcRGB, dstRGB) = ("+n+", "+i+")",e.commandStr),[Za[n],Za[i],Za[r],Za[o]]}),(function(e,n,r){var i=e.constants.blendFuncs;function o(o,a){var s=n.def('"',o,a,'" in ',r,"?",r,".",o,a,":",r,".",o);return nt.optional((function(){e.assert(n,s+" in "+i,"invalid "+t+"."+o+a+", must be one of "+Object.keys(Za))})),s}nt.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid blend func, must be an object")}));var a=o("src","RGB"),s=o("dst","RGB");nt.optional((function(){var t=e.constants.invalidBlendCombinations;e.assert(n,t+".indexOf("+a+'+", "+'+s+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")}));var u=n.def(i,"[",a,"]"),l=n.def(i,"[",o("src","Alpha"),"]");return[u,n.def(i,"[",s,"]"),l,n.def(i,"[",o("dst","Alpha"),"]")]}));case go:return s((function(n){return"string"==typeof n?(nt.commandParameter(n,v,"invalid "+t,e.commandStr),[v[n],v[n]]):"object"==typeof n?(nt.commandParameter(n.rgb,v,t+".rgb",e.commandStr),nt.commandParameter(n.alpha,v,t+".alpha",e.commandStr),[v[n.rgb],v[n.alpha]]):void nt.commandRaise("invalid blend.equation",e.commandStr)}),(function(e,n,r){var i=e.constants.blendEquations,o=n.def(),a=n.def(),s=e.cond("typeof ",r,'==="string"');return nt.optional((function(){function n(t,n,r){e.assert(t,r+" in "+i,"invalid "+n+", must be one of "+Object.keys(v))}n(s.then,t,r),e.assert(s.else,r+"&&typeof "+r+'==="object"',"invalid "+t),n(s.else,t+".rgb",r+".rgb"),n(s.else,t+".alpha",r+".alpha")})),s.then(o,"=",a,"=",i,"[",r,"];"),s.else(o,"=",i,"[",r,".rgb];",a,"=",i,"[",r,".alpha];"),n(s),[o,a]}));case mo:return s((function(t){return nt.command(hn(t)&&4===t.length,"blend.color must be a 4d array",e.commandStr),Mt(4,(function(e){return+t[e]}))}),(function(t,e,n){return nt.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","blend.color must be a 4d array")})),Mt(4,(function(t){return e.def("+",n,"[",t,"]")}))}));case Oo:return s((function(t){return nt.commandType(t,"number",a,e.commandStr),0|t}),(function(t,e,n){return nt.optional((function(){t.assert(e,"typeof "+n+'==="number"',"invalid stencil.mask")})),e.def(n,"|0")}));case Lo:return s((function(n){nt.commandType(n,"object",a,e.commandStr);var r=n.cmp||"keep",i=n.ref||0,o="mask"in n?n.mask:-1;return nt.commandParameter(r,Ja,t+".cmp",e.commandStr),nt.commandType(i,"number",t+".ref",e.commandStr),nt.commandType(o,"number",t+".mask",e.commandStr),[Ja[r],i,o]}),(function(t,e,n){var r=t.constants.compareFuncs;return nt.optional((function(){function i(){t.assert(e,Array.prototype.join.call(arguments,""),"invalid stencil.func")}i(n+"&&typeof ",n,'==="object"'),i('!("cmp" in ',n,")||(",n,".cmp in ",r,")")})),[e.def('"cmp" in ',n,"?",r,"[",n,".cmp]",":",Ga),e.def(n,".ref|0"),e.def('"mask" in ',n,"?",n,".mask|0:-1")]}));case Ro:case Do:return s((function(n){nt.commandType(n,"object",a,e.commandStr);var r=n.fail||"keep",i=n.zfail||"keep",o=n.zpass||"keep";return nt.commandParameter(r,ts,t+".fail",e.commandStr),nt.commandParameter(i,ts,t+".zfail",e.commandStr),nt.commandParameter(o,ts,t+".zpass",e.commandStr),[t===Do?Fa:za,ts[r],ts[i],ts[o]]}),(function(e,n,r){var i=e.constants.stencilOps;function o(o){return nt.optional((function(){e.assert(n,'!("'+o+'" in '+r+")||("+r+"."+o+" in "+i+")","invalid "+t+"."+o+", must be one of "+Object.keys(ts))})),n.def('"',o,'" in ',r,"?",i,"[",r,".",o,"]:",Ga)}return nt.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)})),[t===Do?Fa:za,o("fail"),o("zfail"),o("zpass")]}));case To:return s((function(t){nt.commandType(t,"object",a,e.commandStr);var n=0|t.factor,r=0|t.units;return nt.commandType(n,"number",a+".factor",e.commandStr),nt.commandType(r,"number",a+".units",e.commandStr),[n,r]}),(function(e,n,r){return nt.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)})),[n.def(r,".factor|0"),n.def(r,".units|0")]}));case Eo:return s((function(t){var n=0;return"front"===t?n=za:"back"===t&&(n=Fa),nt.command(!!n,a,e.commandStr),n}),(function(t,e,n){return nt.optional((function(){t.assert(e,n+'==="front"||'+n+'==="back"',"invalid cull.face")})),e.def(n,'==="front"?',za,":",Fa)}));case Mo:return s((function(t){return nt.command("number"==typeof t&&t>=i.lineWidthDims[0]&&t<=i.lineWidthDims[1],"invalid line width, must be a positive number between "+i.lineWidthDims[0]+" and "+i.lineWidthDims[1],e.commandStr),t}),(function(t,e,n){return nt.optional((function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">="+i.lineWidthDims[0]+"&&"+n+"<="+i.lineWidthDims[1],"invalid line width")})),n}));case Ao:return s((function(t){return nt.commandParameter(t,ns,a,e.commandStr),ns[t]}),(function(t,e,n){return nt.optional((function(){t.assert(e,n+'==="cw"||'+n+'==="ccw"',"invalid frontFace, must be one of cw,ccw")})),e.def(n+'==="cw"?'+Ba+":"+Ua)}));case _o:return s((function(t){return nt.command(hn(t)&&4===t.length,"color.mask must be length 4 array",e.commandStr),t.map((function(t){return!!t}))}),(function(t,e,n){return nt.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","invalid color.mask")})),Mt(4,(function(t){return"!!"+n+"["+t+"]"}))}));case No:return s((function(t){nt.command("object"==typeof t&&t,a,e.commandStr);var n="value"in t?t.value:1,r=!!t.invert;return nt.command("number"==typeof n&&n>=0&&n<=1,"sample.coverage.value must be a number between 0 and 1",e.commandStr),[n,r]}),(function(t,e,n){return nt.optional((function(){t.assert(e,n+"&&typeof "+n+'==="object"',"invalid sample.coverage")})),[e.def('"value" in ',n,"?+",n,".value:1"),e.def("!!",n,".invert")]}))}})),o}function B(t,e){var n=t.static,r=t.dynamic,i={};return Object.keys(n).forEach((function(t){var r,o=n[t];if("number"==typeof o||"boolean"==typeof o)r=ss((function(){return o}));else if("function"==typeof o){var a=o._reglType;"texture2d"===a||"textureCube"===a?r=ss((function(t){return t.link(o)})):"framebuffer"===a||"framebufferCube"===a?(nt.command(o.color.length>0,'missing color attachment for framebuffer sent to uniform "'+t+'"',e.commandStr),r=ss((function(t){return t.link(o.color[0])}))):nt.commandRaise('invalid data for uniform "'+t+'"',e.commandStr)}else hn(o)?r=ss((function(e){return e.global.def("[",Mt(o.length,(function(n){return nt.command("number"==typeof o[n]||"boolean"==typeof o[n],"invalid uniform "+t,e.commandStr),o[n]})),"]")})):nt.commandRaise('invalid or missing data for uniform "'+t+'"',e.commandStr);r.value=o,i[t]=r})),Object.keys(r).forEach((function(t){var e=r[t];i[t]=us(e,(function(t,n){return t.invoke(n,e)}))})),i}function U(t,e){var r=t.static,i=t.dynamic,a={};return Object.keys(r).forEach((function(t){var i=r[t],s=n.id(t),u=new g;if(rs(i))u.state=ro,u.buffer=o.getBuffer(o.create(i,aa,!1,!0)),u.type=0;else{var l=o.getBuffer(i);if(l)u.state=ro,u.buffer=l,u.type=0;else if(nt.command("object"==typeof i&&i,"invalid data for attribute "+t,e.commandStr),"constant"in i){var c=i.constant;u.buffer="null",u.state=io,"number"==typeof c?u.x=c:(nt.command(hn(c)&&c.length>0&&c.length<=4,"invalid constant for attribute "+t,e.commandStr),eo.forEach((function(t,e){e<c.length&&(u[t]=c[e])})))}else{l=rs(i.buffer)?o.getBuffer(o.create(i.buffer,aa,!1,!0)):o.getBuffer(i.buffer),nt.command(!!l,'missing buffer for attribute "'+t+'"',e.commandStr);var h=0|i.offset;nt.command(h>=0,'invalid offset for attribute "'+t+'"',e.commandStr);var d=0|i.stride;nt.command(d>=0&&d<256,'invalid stride for attribute "'+t+'", must be integer betweeen [0, 255]',e.commandStr);var f=0|i.size;nt.command(!("size"in i)||f>0&&f<=4,'invalid size for attribute "'+t+'", must be 1,2,3,4',e.commandStr);var p=!!i.normalized,m=0;"type"in i&&(nt.commandParameter(i.type,Oe,"invalid type for attribute "+t,e.commandStr),m=Oe[i.type]);var v=0|i.divisor;"divisor"in i&&(nt.command(0===v||y,'cannot specify divisor for attribute "'+t+'", instancing not supported',e.commandStr),nt.command(v>=0,'invalid divisor for attribute "'+t+'"',e.commandStr)),nt.optional((function(){var n=e.commandStr,r=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(i).forEach((function(e){nt.command(r.indexOf(e)>=0,'unknown parameter "'+e+'" for attribute pointer "'+t+'" (valid parameters are '+r+")",n)}))})),u.buffer=l,u.state=ro,u.size=f,u.normalized=p,u.type=m||l.dtype,u.offset=h,u.stride=d,u.divisor=v}}a[t]=ss((function(t,e){var n=t.attribCache;if(s in n)return n[s];var r={isStream:!1};return Object.keys(u).forEach((function(t){r[t]=u[t]})),u.buffer&&(r.buffer=t.link(u.buffer),r.type=r.type||r.buffer+".dtype"),n[s]=r,r}))})),Object.keys(i).forEach((function(t){var e=i[t];function n(n,r){var i=n.invoke(r,e),o=n.shared,a=n.constants,s=o.isBufferArgs,u=o.buffer;nt.optional((function(){n.assert(r,i+"&&(typeof "+i+'==="object"||typeof '+i+'==="function")&&('+s+"("+i+")||"+u+".getBuffer("+i+")||"+u+".getBuffer("+i+".buffer)||"+s+"("+i+'.buffer)||("constant" in '+i+"&&(typeof "+i+'.constant==="number"||'+o.isArrayLike+"("+i+".constant))))",'invalid dynamic attribute "'+t+'"')}));var l={isStream:r.def(!1)},c=new g;c.state=ro,Object.keys(c).forEach((function(t){l[t]=r.def(""+c[t])}));var h=l.buffer,d=l.type;function f(t){r(l[t],"=",i,".",t,"|0;")}return r("if(",s,"(",i,")){",l.isStream,"=true;",h,"=",u,".createStream(",aa,",",i,");",d,"=",h,".dtype;","}else{",h,"=",u,".getBuffer(",i,");","if(",h,"){",d,"=",h,".dtype;",'}else if("constant" in ',i,"){",l.state,"=",io,";","if(typeof "+i+'.constant === "number"){',l[eo[0]],"=",i,".constant;",eo.slice(1).map((function(t){return l[t]})).join("="),"=0;","}else{",eo.map((function(t,e){return l[t]+"="+i+".constant.length>"+e+"?"+i+".constant["+e+"]:0;"})).join(""),"}}else{","if(",s,"(",i,".buffer)){",h,"=",u,".createStream(",aa,",",i,".buffer);","}else{",h,"=",u,".getBuffer(",i,".buffer);","}",d,'="type" in ',i,"?",a.glTypes,"[",i,".type]:",h,".dtype;",l.normalized,"=!!",i,".normalized;"),f("size"),f("offset"),f("stride"),f("divisor"),r("}}"),r.exit("if(",l.isStream,"){",u,".destroyStream(",h,");","}"),l}a[t]=us(e,n)})),a}function j(t,e){var n=t.static,r=t.dynamic;if($o in n){var i=n[$o];return null!==i&&null===c.getVAO(i)&&(i=c.createVAO(i)),ss((function(t){return t.link(c.getVAO(i))}))}if($o in r){var o=r[$o];return us(o,(function(t,e){var n=t.invoke(e,o);return e.def(t.shared.vao+".getVAO("+n+")")}))}return null}function V(t){var e=t.static,n=t.dynamic,r={};return Object.keys(e).forEach((function(t){var n=e[t];r[t]=ss((function(t,e){return"number"==typeof n||"boolean"==typeof n?""+n:t.link(n)}))})),Object.keys(n).forEach((function(t){var e=n[t];r[t]=us(e,(function(t,n){return t.invoke(n,e)}))})),r}function H(t,e,n,i,o){var a=t.static,s=t.dynamic;nt.optional((function(){var t=[jo,Vo,Ho,Go,Wo,Yo,Xo,qo,Uo,$o].concat(_);function e(e){Object.keys(e).forEach((function(e){nt.command(t.indexOf(e)>=0,'unknown parameter "'+e+'"',o.commandStr)}))}e(a),e(s)}));var u=R(t,e),l=O(t,o),h=L(t,l,o),d=z(t,o),f=F(t,o),p=D(t,o,u);function m(t){var e=h[t];e&&(f[t]=e)}m(Bo),m(A(Fo));var g=Object.keys(f).length>0,v={framebuffer:l,draw:d,shader:p,state:f,dirty:g,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(v.profile=P(t,o),v.uniforms=B(n,o),v.drawVAO=v.scopeVAO=j(t,o),!v.drawVAO&&p.program&&!u&&r.angle_instanced_arrays){var y=!0,b=p.program.attributes.map((function(t){var n=e.static[t];return y=y&&!!n,n}));if(y&&b.length>0){var x=c.getVAO(c.createVAO(b));v.drawVAO=new os(null,null,null,(function(t,e){return t.link(x)})),v.useVAO=!0}}return u?v.useVAO=!0:v.attributes=U(e,o),v.context=V(i,o),v}function G(t,e,n){var r=t.shared.context,i=t.scope();Object.keys(n).forEach((function(o){e.save(r,"."+o);var a=n[o].append(t,e);Array.isArray(a)?i(r,".",o,"=[",a.join(),"];"):i(r,".",o,"=",a,";")})),e(i)}function W(t,e,n,r){var i,o=t.shared,a=o.gl,s=o.framebuffer;b&&(i=e.def(o.extensions,".webgl_draw_buffers"));var u,l=t.constants,c=l.drawBuffer,h=l.backBuffer;u=n?n.append(t,e):e.def(s,".next"),r||e("if(",u,"!==",s,".cur){"),e("if(",u,"){",a,".bindFramebuffer(",$a,",",u,".framebuffer);"),b&&e(i,".drawBuffersWEBGL(",c,"[",u,".colorAttachments.length]);"),e("}else{",a,".bindFramebuffer(",$a,",null);"),b&&e(i,".drawBuffersWEBGL(",h,");"),e("}",s,".cur=",u,";"),r||e("}")}function X(t,e,n){var r=t.shared,i=r.gl,o=t.current,a=t.next,s=r.current,u=r.next,l=t.cond(s,".dirty");_.forEach((function(e){var r,c,h=A(e);if(!(h in n.state))if(h in a){r=a[h],c=o[h];var d=Mt(x[h].length,(function(t){return l.def(r,"[",t,"]")}));l(t.cond(d.map((function(t,e){return t+"!=="+c+"["+e+"]"})).join("||")).then(i,".",E[h],"(",d,");",d.map((function(t,e){return c+"["+e+"]="+t})).join(";"),";"))}else{r=l.def(u,".",h);var f=t.cond(r,"!==",s,".",h);l(f),h in S?f(t.cond(r).then(i,".enable(",S[h],");").else(i,".disable(",S[h],");"),s,".",h,"=",r,";"):f(i,".",E[h],"(",r,");",s,".",h,"=",r,";")}})),0===Object.keys(n.state).length&&l(s,".dirty=false;"),e(l)}function Y(t,e,n,r){var i=t.shared,o=t.current,a=i.current,s=i.gl;is(Object.keys(n)).forEach((function(i){var u=n[i];if(!r||r(u)){var l=u.append(t,e);if(S[i]){var c=S[i];as(u)?e(s,l?".enable(":".disable(",c,");"):e(t.cond(l).then(s,".enable(",c,");").else(s,".disable(",c,");")),e(a,".",i,"=",l,";")}else if(hn(l)){var h=o[i];e(s,".",E[i],"(",l,");",l.map((function(t,e){return h+"["+e+"]="+t})).join(";"),";")}else e(s,".",E[i],"(",l,");",a,".",i,"=",l,";")}}))}function q(t,e){y&&(t.instancing=e.def(t.shared.extensions,".angle_instanced_arrays"))}function $(t,e,n,r,i){var o,a,s,u=t.shared,l=t.stats,c=u.current,h=u.timer,d=n.profile;function f(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function m(t){t(o=e.def(),"=",f(),";"),"string"==typeof i?t(l,".count+=",i,";"):t(l,".count++;"),p&&(r?t(a=e.def(),"=",h,".getNumPendingQueries();"):t(h,".beginQuery(",l,");"))}function g(t){t(l,".cpuTime+=",f(),"-",o,";"),p&&(r?t(h,".pushScopeStats(",a,",",h,".getNumPendingQueries(),",l,");"):t(h,".endQuery();"))}function v(t){var n=e.def(c,".profile");e(c,".profile=",t,";"),e.exit(c,".profile=",n,";")}if(d){if(as(d))return void(d.enable?(m(e),g(e.exit),v("true")):v("false"));v(s=d.append(t,e))}else s=e.def(c,".profile");var y=t.block();m(y),e("if(",s,"){",y,"}");var b=t.block();g(b),e.exit("if(",s,"){",b,"}")}function K(t,e,n,r,i){var o=t.shared;function a(t){switch(t){case xa:case Ea:case Ta:return 2;case wa:case Aa:case ka:return 3;case _a:case Ma:case Ia:return 4;default:return 1}}function s(n,r,i){var a=o.gl,s=e.def(n,".location"),u=e.def(o.attributes,"[",s,"]"),l=i.state,c=i.buffer,h=[i.x,i.y,i.z,i.w],d=["buffer","normalized","offset","stride"];function f(){e("if(!",u,".buffer){",a,".enableVertexAttribArray(",s,");}");var n,o=i.type;if(n=i.size?e.def(i.size,"||",r):r,e("if(",u,".type!==",o,"||",u,".size!==",n,"||",d.map((function(t){return u+"."+t+"!=="+i[t]})).join("||"),"){",a,".bindBuffer(",aa,",",c,".buffer);",a,".vertexAttribPointer(",[s,n,o,i.normalized,i.stride,i.offset],");",u,".type=",o,";",u,".size=",n,";",d.map((function(t){return u+"."+t+"="+i[t]+";"})).join(""),"}"),y){var l=i.divisor;e("if(",u,".divisor!==",l,"){",t.instancing,".vertexAttribDivisorANGLE(",[s,l],");",u,".divisor=",l,";}")}}function p(){e("if(",u,".buffer){",a,".disableVertexAttribArray(",s,");",u,".buffer=null;","}if(",eo.map((function(t,e){return u+"."+t+"!=="+h[e]})).join("||"),"){",a,".vertexAttrib4f(",s,",",h,");",eo.map((function(t,e){return u+"."+t+"="+h[e]+";"})).join(""),"}")}l===ro?f():l===io?p():(e("if(",l,"===",ro,"){"),f(),e("}else{"),p(),e("}"))}r.forEach((function(r){var o,u=r.name,l=n.attributes[u];if(l){if(!i(l))return;o=l.append(t,e)}else{if(!i(ls))return;var c=t.scopeAttrib(u);nt.optional((function(){t.assert(e,c+".state","missing attribute "+u)})),o={},Object.keys(new g).forEach((function(t){o[t]=e.def(c,".",t)}))}s(t.link(r),a(r.info.type),o)}))}function Z(t,e,r,i,o){for(var a,s=t.shared,u=s.gl,l=0;l<i.length;++l){var c,h=i[l],d=h.name,f=h.info.type,p=r.uniforms[d],m=t.link(h)+".location";if(p){if(!o(p))continue;if(as(p)){var g=p.value;if(nt.command(null!=g,'missing uniform "'+d+'"',t.commandStr),f===La||f===Ra){nt.command("function"==typeof g&&(f===La&&("texture2d"===g._reglType||"framebuffer"===g._reglType)||f===Ra&&("textureCube"===g._reglType||"framebufferCube"===g._reglType)),"invalid texture for uniform "+d,t.commandStr);var v=t.link(g._texture||g.color[0]._texture);e(u,".uniform1i(",m,",",v+".bind());"),e.exit(v,".unbind();")}else if(f===Na||f===Pa||f===Oa){nt.optional((function(){nt.command(hn(g),"invalid matrix for uniform "+d,t.commandStr),nt.command(f===Na&&4===g.length||f===Pa&&9===g.length||f===Oa&&16===g.length,"invalid length for matrix uniform "+d,t.commandStr)}));var y=t.global.def("new Float32Array(["+Array.prototype.slice.call(g)+"])"),b=2;f===Pa?b=3:f===Oa&&(b=4),e(u,".uniformMatrix",b,"fv(",m,",false,",y,");")}else{switch(f){case ba:nt.commandType(g,"number","uniform "+d,t.commandStr),a="1f";break;case xa:nt.command(hn(g)&&2===g.length,"uniform "+d,t.commandStr),a="2f";break;case wa:nt.command(hn(g)&&3===g.length,"uniform "+d,t.commandStr),a="3f";break;case _a:nt.command(hn(g)&&4===g.length,"uniform "+d,t.commandStr),a="4f";break;case Ca:nt.commandType(g,"boolean","uniform "+d,t.commandStr),a="1i";break;case Sa:nt.commandType(g,"number","uniform "+d,t.commandStr),a="1i";break;case Ta:case Ea:nt.command(hn(g)&&2===g.length,"uniform "+d,t.commandStr),a="2i";break;case ka:case Aa:nt.command(hn(g)&&3===g.length,"uniform "+d,t.commandStr),a="3i";break;case Ia:case Ma:nt.command(hn(g)&&4===g.length,"uniform "+d,t.commandStr),a="4i"}e(u,".uniform",a,"(",m,",",hn(g)?Array.prototype.slice.call(g):g,");")}continue}c=p.append(t,e)}else{if(!o(ls))continue;c=e.def(s.uniforms,"[",n.id(d),"]")}f===La?(nt(!Array.isArray(c),"must specify a scalar prop for textures"),e("if(",c,"&&",c,'._reglType==="framebuffer"){',c,"=",c,".color[0];","}")):f===Ra&&(nt(!Array.isArray(c),"must specify a scalar prop for cube maps"),e("if(",c,"&&",c,'._reglType==="framebufferCube"){',c,"=",c,".color[0];","}")),nt.optional((function(){function n(n,r){t.assert(e,n,'bad data or missing for uniform "'+d+'".  '+r)}function r(t){nt(!Array.isArray(c),"must not specify an array type for uniform"),n("typeof "+c+'==="'+t+'"',"invalid type, expected "+t)}function i(e,r){Array.isArray(c)?nt(c.length===e,"must have length "+e):n(s.isArrayLike+"("+c+")&&"+c+".length==="+e,"invalid vector, should have length "+e,t.commandStr)}function o(e){nt(!Array.isArray(c),"must not specify a value type"),n("typeof "+c+'==="function"&&'+c+'._reglType==="texture'+(e===ua?"2d":"Cube")+'"',"invalid texture type",t.commandStr)}switch(f){case Sa:r("number");break;case Ea:i(2,"number");break;case Aa:i(3,"number");break;case Ma:i(4,"number");break;case ba:r("number");break;case xa:i(2,"number");break;case wa:i(3,"number");break;case _a:i(4,"number");break;case Ca:r("boolean");break;case Ta:i(2,"boolean");break;case ka:i(3,"boolean");break;case Ia:i(4,"boolean");break;case Na:i(4,"number");break;case Pa:i(9,"number");break;case Oa:i(16,"number");break;case La:o(ua);break;case Ra:o(la)}}));var x=1;switch(f){case La:case Ra:var w=e.def(c,"._texture");e(u,".uniform1i(",m,",",w,".bind());"),e.exit(w,".unbind();");continue;case Sa:case Ca:a="1i";break;case Ea:case Ta:a="2i",x=2;break;case Aa:case ka:a="3i",x=3;break;case Ma:case Ia:a="4i",x=4;break;case ba:a="1f";break;case xa:a="2f",x=2;break;case wa:a="3f",x=3;break;case _a:a="4f",x=4;break;case Na:a="Matrix2fv";break;case Pa:a="Matrix3fv";break;case Oa:a="Matrix4fv"}if(e(u,".uniform",a,"(",m,","),"M"===a.charAt(0)){var _=Math.pow(f-Na+2,2),S=t.global.def("new Float32Array(",_,")");Array.isArray(c)?e("false,(",Mt(_,(function(t){return S+"["+t+"]="+c[t]})),",",S,")"):e("false,(Array.isArray(",c,")||",c," instanceof Float32Array)?",c,":(",Mt(_,(function(t){return S+"["+t+"]="+c+"["+t+"]"})),",",S,")")}else x>1?e(Mt(x,(function(t){return Array.isArray(c)?c[t]:c+"["+t+"]"}))):(nt(!Array.isArray(c),"uniform value must not be an array"),e(c));e(");")}}function Q(t,e,n,r){var i=t.shared,o=i.gl,a=i.draw,s=r.draw;function u(){var i,u=s.elements,l=e;return u?((u.contextDep&&r.contextDynamic||u.propDep)&&(l=n),i=u.append(t,l)):i=l.def(a,".",Go),i&&l("if("+i+")"+o+".bindBuffer("+sa+","+i+".buffer.buffer);"),i}function l(){var i,o=s.count,u=e;return o?((o.contextDep&&r.contextDynamic||o.propDep)&&(u=n),i=o.append(t,u),nt.optional((function(){o.MISSING&&t.assert(e,"false","missing vertex count"),o.DYNAMIC&&t.assert(u,i+">=0","missing vertex count")}))):(i=u.def(a,".",Xo),nt.optional((function(){t.assert(u,i+">=0","missing vertex count")}))),i}var c=u();function h(i){var o=s[i];return o?o.contextDep&&r.contextDynamic||o.propDep?o.append(t,n):o.append(t,e):e.def(a,".",i)}var d,f,p=h(Wo),m=h(Yo),g=l();if("number"==typeof g){if(0===g)return}else n("if(",g,"){"),n.exit("}");y&&(d=h(qo),f=t.instancing);var v=c+".type",b=s.elements&&as(s.elements);function x(){function t(){n(f,".drawElementsInstancedANGLE(",[p,g,v,m+"<<(("+v+"-"+no+")>>1)",d],");")}function e(){n(f,".drawArraysInstancedANGLE(",[p,m,g,d],");")}c?b?t():(n("if(",c,"){"),t(),n("}else{"),e(),n("}")):e()}function w(){function t(){n(o+".drawElements("+[p,g,v,m+"<<(("+v+"-"+no+")>>1)"]+");")}function e(){n(o+".drawArrays("+[p,m,g]+");")}c?b?t():(n("if(",c,"){"),t(),n("}else{"),e(),n("}")):e()}y&&("number"!=typeof d||d>=0)?"string"==typeof d?(n("if(",d,">0){"),x(),n("}else if(",d,"<0){"),w(),n("}")):x():w()}function J(t,e,n,r,i){var o=N(),a=o.proc("body",i);return nt.optional((function(){o.commandStr=e.commandStr,o.command=o.link(e.commandStr)})),y&&(o.instancing=a.def(o.shared.extensions,".angle_instanced_arrays")),t(o,a,n,r),o.compile().body}function tt(t,e,n,r){q(t,e),n.useVAO?n.drawVAO?e(t.shared.vao,".setVAO(",n.drawVAO.append(t,e),");"):e(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(e(t.shared.vao,".setVAO(null);"),K(t,e,n,r.attributes,(function(){return!0}))),Z(t,e,n,r.uniforms,(function(){return!0})),Q(t,e,e,n)}function et(t,e){var n=t.proc("draw",1);q(t,n),G(t,n,e.context),W(t,n,e.framebuffer),X(t,n,e),Y(t,n,e.state),$(t,n,e,!1,!0);var r=e.shader.progVar.append(t,n);if(n(t.shared.gl,".useProgram(",r,".program);"),e.shader.program)tt(t,n,e,e.shader.program);else{n(t.shared.vao,".setVAO(null);");var i=t.global.def("{}"),o=n.def(r,".id"),a=n.def(i,"[",o,"]");n(t.cond(a).then(a,".call(this,a0);").else(a,"=",i,"[",o,"]=",t.link((function(n){return J(tt,t,e,n,1)})),"(",r,");",a,".call(this,a0);"))}Object.keys(e.state).length>0&&n(t.shared.current,".dirty=true;")}function rt(t,e,n,r){function i(){return!0}t.batchId="a1",q(t,e),K(t,e,n,r.attributes,i),Z(t,e,n,r.uniforms,i),Q(t,e,e,n)}function it(t,e,n,r){q(t,e);var i=n.contextDep,o=e.def(),a="a0",s="a1",u=e.def();t.shared.props=u,t.batchId=o;var l=t.scope(),c=t.scope();function h(t){return t.contextDep&&i||t.propDep}function d(t){return!h(t)}if(e(l.entry,"for(",o,"=0;",o,"<",s,";++",o,"){",u,"=",a,"[",o,"];",c,"}",l.exit),n.needsContext&&G(t,c,n.context),n.needsFramebuffer&&W(t,c,n.framebuffer),Y(t,c,n.state,h),n.profile&&h(n.profile)&&$(t,c,n,!1,!0),r)n.useVAO?n.drawVAO?h(n.drawVAO)?c(t.shared.vao,".setVAO(",n.drawVAO.append(t,c),");"):l(t.shared.vao,".setVAO(",n.drawVAO.append(t,l),");"):l(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(l(t.shared.vao,".setVAO(null);"),K(t,l,n,r.attributes,d),K(t,c,n,r.attributes,h)),Z(t,l,n,r.uniforms,d),Z(t,c,n,r.uniforms,h),Q(t,l,c,n);else{var f=t.global.def("{}"),p=n.shader.progVar.append(t,c),m=c.def(p,".id"),g=c.def(f,"[",m,"]");c(t.shared.gl,".useProgram(",p,".program);","if(!",g,"){",g,"=",f,"[",m,"]=",t.link((function(e){return J(rt,t,n,e,2)})),"(",p,");}",g,".call(this,a0[",o,"],",o,");")}}function ot(t,e){var n=t.proc("batch",2);t.batchId="0",q(t,n);var r=!1,i=!0;Object.keys(e.context).forEach((function(t){r=r||e.context[t].propDep})),r||(G(t,n,e.context),i=!1);var o=e.framebuffer,a=!1;function s(t){return t.contextDep&&r||t.propDep}o?(o.propDep?r=a=!0:o.contextDep&&r&&(a=!0),a||W(t,n,o)):W(t,n,null),e.state.viewport&&e.state.viewport.propDep&&(r=!0),X(t,n,e),Y(t,n,e.state,(function(t){return!s(t)})),e.profile&&s(e.profile)||$(t,n,e,!1,"a1"),e.contextDep=r,e.needsContext=i,e.needsFramebuffer=a;var u=e.shader.progVar;if(u.contextDep&&r||u.propDep)it(t,n,e,null);else{var l=u.append(t,n);if(n(t.shared.gl,".useProgram(",l,".program);"),e.shader.program)it(t,n,e,e.shader.program);else{n(t.shared.vao,".setVAO(null);");var c=t.global.def("{}"),h=n.def(l,".id"),d=n.def(c,"[",h,"]");n(t.cond(d).then(d,".call(this,a0,a1);").else(d,"=",c,"[",h,"]=",t.link((function(n){return J(it,t,e,n,2)})),"(",l,");",d,".call(this,a0,a1);"))}}Object.keys(e.state).length>0&&n(t.shared.current,".dirty=true;")}function at(t,e){var r=t.proc("scope",3);t.batchId="a2";var i=t.shared,o=i.current;function a(n){var o=e.shader[n];o&&r.set(i.shader,"."+n,o.append(t,r))}G(t,r,e.context),e.framebuffer&&e.framebuffer.append(t,r),is(Object.keys(e.state)).forEach((function(n){var o=e.state[n].append(t,r);hn(o)?o.forEach((function(e,i){r.set(t.next[n],"["+i+"]",e)})):r.set(i.next,"."+n,o)})),$(t,r,e,!0,!0),[Go,Yo,Xo,qo,Wo].forEach((function(n){var o=e.draw[n];o&&r.set(i.draw,"."+n,""+o.append(t,r))})),Object.keys(e.uniforms).forEach((function(o){var a=e.uniforms[o].append(t,r);Array.isArray(a)&&(a="["+a.join()+"]"),r.set(i.uniforms,"["+n.id(o)+"]",a)})),Object.keys(e.attributes).forEach((function(n){var i=e.attributes[n].append(t,r),o=t.scopeAttrib(n);Object.keys(new g).forEach((function(t){r.set(o,"."+t,i[t])}))})),e.scopeVAO&&r.set(i.vao,".targetVAO",e.scopeVAO.append(t,r)),a(Vo),a(Ho),Object.keys(e.state).length>0&&(r(o,".dirty=true;"),r.exit(o,".dirty=true;")),r("a1(",t.shared.context,",a0,",t.batchId,");")}function st(t){if("object"==typeof t&&!hn(t)){for(var e=Object.keys(t),n=0;n<e.length;++n)if(pt.isDynamic(t[e[n]]))return!0;return!1}}function ut(t,e,n){var r=e.static[n];if(r&&st(r)){var i=t.global,o=Object.keys(r),a=!1,s=!1,u=!1,l=t.global.def("{}");o.forEach((function(e){var n=r[e];if(pt.isDynamic(n)){"function"==typeof n&&(n=r[e]=pt.unbox(n));var o=us(n,null);a=a||o.thisDep,u=u||o.propDep,s=s||o.contextDep}else{switch(i(l,".",e,"="),typeof n){case"number":i(n);break;case"string":i('"',n,'"');break;case"object":Array.isArray(n)&&i("[",n.join(),"]");break;default:i(t.link(n))}i(";")}})),e.dynamic[n]=new pt.DynamicVariable(lo,{thisDep:a,contextDep:s,propDep:u,ref:l,append:c}),delete e.static[n]}function c(t,e){o.forEach((function(n){var i=r[n];if(pt.isDynamic(i)){var o=t.invoke(e,i);e(l,".",n,"=",o,";")}}))}}function lt(t,n,r,i,o){var a=N();a.stats=a.link(o),Object.keys(n.static).forEach((function(t){ut(a,n,t)})),oa.forEach((function(e){ut(a,t,e)}));var s=H(t,n,r,i,a);return et(a,s),at(a,s),ot(a,s),e(a.compile(),{destroy:function(){s.shader.program.destroy()}})}return{next:w,current:x,procs:function(){var t=N(),e=t.proc("poll"),n=t.proc("refresh"),o=t.block();e(o),n(o);var a,s=t.shared,u=s.gl,l=s.next,c=s.current;o(c,".dirty=false;"),W(t,e),W(t,n,null,!0),y&&(a=t.link(y)),r.oes_vertex_array_object&&n(t.link(r.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var h=0;h<i.maxAttributes;++h){var d=n.def(s.attributes,"[",h,"]"),f=t.cond(d,".buffer");f.then(u,".enableVertexAttribArray(",h,");",u,".bindBuffer(",aa,",",d,".buffer.buffer);",u,".vertexAttribPointer(",h,",",d,".size,",d,".type,",d,".normalized,",d,".stride,",d,".offset);").else(u,".disableVertexAttribArray(",h,");",u,".vertexAttrib4f(",h,",",d,".x,",d,".y,",d,".z,",d,".w);",d,".buffer=null;"),n(f),y&&n(a,".vertexAttribDivisorANGLE(",h,",",d,".divisor);")}return n(t.shared.vao,".currentVAO=null;",t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"),Object.keys(S).forEach((function(r){var i=S[r],a=o.def(l,".",r),s=t.block();s("if(",a,"){",u,".enable(",i,")}else{",u,".disable(",i,")}",c,".",r,"=",a,";"),n(s),e("if(",a,"!==",c,".",r,"){",s,"}")})),Object.keys(E).forEach((function(r){var i,a,s=E[r],h=x[r],d=t.block();if(d(u,".",s,"("),hn(h)){var f=h.length;i=t.global.def(l,".",r),a=t.global.def(c,".",r),d(Mt(f,(function(t){return i+"["+t+"]"})),");",Mt(f,(function(t){return a+"["+t+"]="+i+"["+t+"];"})).join("")),e("if(",Mt(f,(function(t){return i+"["+t+"]!=="+a+"["+t+"]"})).join("||"),"){",d,"}")}else i=o.def(l,".",r),a=o.def(c,".",r),d(i,");",c,".",r,"=",i,";"),e("if(",i,"!==",a,"){",d,"}");n(d)})),t.compile()}(),compile:lt}}function hs(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var ds=34918,fs=34919,ps=35007,ms=function(t,e){if(!e.ext_disjoint_timer_query)return null;var n=[];function r(){return n.pop()||e.ext_disjoint_timer_query.createQueryEXT()}function i(t){n.push(t)}var o=[];function a(t){var n=r();e.ext_disjoint_timer_query.beginQueryEXT(ps,n),o.push(n),f(o.length-1,o.length,t)}function s(){e.ext_disjoint_timer_query.endQueryEXT(ps)}function u(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var l=[];function c(){return l.pop()||new u}function h(t){l.push(t)}var d=[];function f(t,e,n){var r=c();r.startQueryIndex=t,r.endQueryIndex=e,r.sum=0,r.stats=n,d.push(r)}var p=[],m=[];function g(){var t,n,r=o.length;if(0!==r){m.length=Math.max(m.length,r+1),p.length=Math.max(p.length,r+1),p[0]=0,m[0]=0;var a=0;for(t=0,n=0;n<o.length;++n){var s=o[n];e.ext_disjoint_timer_query.getQueryObjectEXT(s,fs)?(a+=e.ext_disjoint_timer_query.getQueryObjectEXT(s,ds),i(s)):o[t++]=s,p[n+1]=a,m[n+1]=t}for(o.length=t,t=0,n=0;n<d.length;++n){var u=d[n],l=u.startQueryIndex,c=u.endQueryIndex;u.sum+=p[c]-p[l];var f=m[l],g=m[c];g===f?(u.stats.gpuTime+=u.sum/1e6,h(u)):(u.startQueryIndex=f,u.endQueryIndex=g,d[t++]=u)}d.length=t}}return{beginQuery:a,endQuery:s,pushScopeStats:f,update:g,getNumPendingQueries:function(){return o.length},clear:function(){n.push.apply(n,o);for(var t=0;t<n.length;t++)e.ext_disjoint_timer_query.deleteQueryEXT(n[t]);o.length=0,n.length=0},restore:function(){o.length=0,n.length=0}}},gs=16384,vs=256,ys=1024,bs=34962,xs="webglcontextlost",ws="webglcontextrestored",_s=1,Ss=2,Es=3;function As(t,e){for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}function Ms(t){var n=Et(t);if(!n)return null;var r=n.gl,i=r.getContextAttributes(),o=r.isContextLost(),a=At(r,n);if(!a)return null;var s=vt(),u=hs(),l=a.extensions,c=ms(r,l),h=gt(),d=r.drawingBufferWidth,f=r.drawingBufferHeight,p={tick:0,time:0,viewportWidth:d,viewportHeight:f,framebufferWidth:d,framebufferHeight:f,drawingBufferWidth:d,drawingBufferHeight:f,pixelRatio:n.pixelRatio},m={},g={elements:null,primitive:4,count:-1,offset:0,instances:-1},v=_e(r,l),y=We(r,u,n,x),b=ji(r,l,v,u,y);function x(t){return b.destroyBuffer(t)}var w=an(r,l,y,u),_=Xi(r,s,u,n),S=$r(r,l,v,(function(){M.procs.poll()}),p,u,n),E=li(r,l,v,u,n),A=zi(r,l,v,S,E,u),M=cs(r,s,l,v,y,w,S,A,m,b,_,g,p,c,n),C=Zi(r,A,M.procs.poll,p,i,l,v),T=M.next,k=r.canvas,I=[],N=[],P=[],O=[n.onDestroy],L=null;function R(){if(0===I.length)return c&&c.update(),void(L=null);L=mt.next(R),Y();for(var t=I.length-1;t>=0;--t){var e=I[t];e&&e(p,null,0)}r.flush(),c&&c.update()}function D(){!L&&I.length>0&&(L=mt.next(R))}function z(){L&&(mt.cancel(R),L=null)}function F(t){t.preventDefault(),o=!0,z(),N.forEach((function(t){t()}))}function B(t){r.getError(),o=!1,a.restore(),_.restore(),y.restore(),S.restore(),E.restore(),A.restore(),b.restore(),c&&c.restore(),M.procs.refresh(),D(),P.forEach((function(t){t()}))}function U(){I.length=0,z(),k&&(k.removeEventListener(xs,F),k.removeEventListener(ws,B)),_.clear(),A.clear(),E.clear(),S.clear(),w.clear(),y.clear(),b.clear(),c&&c.clear(),O.forEach((function(t){t()}))}function j(t){function n(t){var n=e({},t);function r(t){if(t in n){var e=n[t];delete n[t],Object.keys(e).forEach((function(r){n[t+"."+r]=e[r]}))}}return delete n.uniforms,delete n.attributes,delete n.context,delete n.vao,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),r("blend"),r("depth"),r("cull"),r("stencil"),r("polygonOffset"),r("scissor"),r("sample"),"vao"in t&&(n.vao=t.vao),n}function r(t,e){var n={},r={};return Object.keys(t).forEach((function(i){var o=t[i];if(pt.isDynamic(o))r[i]=pt.unbox(o,i);else{if(e&&Array.isArray(o))for(var a=0;a<o.length;++a)if(pt.isDynamic(o[a]))return void(r[i]=pt.unbox(o,i));n[i]=o}})),{dynamic:r,static:n}}nt(!!t,"invalid args to regl({...})"),nt.type(t,"object","invalid args to regl({...})");var i=r(t.context||{},!0),a=r(t.uniforms||{},!0),s=r(t.attributes||{},!1),u=r(n(t),!1),l={gpuTime:0,cpuTime:0,count:0},c=M.compile(u,s,a,i,l),h=c.draw,d=c.batch,f=c.scope,p=[];function m(t){for(;p.length<t;)p.push(null);return p}function g(t,e){var n;if(o&&nt.raise("context lost"),"function"==typeof t)return f.call(this,null,t,0);if("function"==typeof e)if("number"==typeof t)for(n=0;n<t;++n)f.call(this,null,e,n);else{if(!Array.isArray(t))return f.call(this,t,e,0);for(n=0;n<t.length;++n)f.call(this,t[n],e,n)}else if("number"==typeof t){if(t>0)return d.call(this,m(0|t),0|t)}else{if(!Array.isArray(t))return h.call(this,t);if(t.length)return d.call(this,t,t.length)}}return e(g,{stats:l,destroy:function(){c.destroy()}})}k&&(k.addEventListener(xs,F,!1),k.addEventListener(ws,B,!1));var V=A.setFBO=j({framebuffer:pt.define.call(null,_s,"framebuffer")});function H(t,e){var n=0;M.procs.poll();var i=e.color;i&&(r.clearColor(+i[0]||0,+i[1]||0,+i[2]||0,+i[3]||0),n|=gs),"depth"in e&&(r.clearDepth(+e.depth),n|=vs),"stencil"in e&&(r.clearStencil(0|e.stencil),n|=ys),nt(!!n,"called regl.clear with no buffer specified"),r.clear(n)}function G(t){if(nt("object"==typeof t&&t,"regl.clear() takes an object as input"),"framebuffer"in t)if(t.framebuffer&&"framebufferCube"===t.framebuffer_reglType)for(var n=0;n<6;++n)V(e({framebuffer:t.framebuffer.faces[n]},t),H);else V(t,H);else H(null,t)}function W(t){function e(){var e=As(I,t);function n(){var t=As(I,n);I[t]=I[I.length-1],I.length-=1,I.length<=0&&z()}nt(e>=0,"cannot cancel a frame twice"),I[e]=n}return nt.type(t,"function","regl.frame() callback must be a function"),I.push(t),D(),{cancel:e}}function X(){var t=T.viewport,e=T.scissor_box;t[0]=t[1]=e[0]=e[1]=0,p.viewportWidth=p.framebufferWidth=p.drawingBufferWidth=t[2]=e[2]=r.drawingBufferWidth,p.viewportHeight=p.framebufferHeight=p.drawingBufferHeight=t[3]=e[3]=r.drawingBufferHeight}function Y(){p.tick+=1,p.time=$(),X(),M.procs.poll()}function q(){S.refresh(),X(),M.procs.refresh(),c&&c.update()}function $(){return(gt()-h)/1e3}function K(t,e){var n;switch(nt.type(e,"function","listener callback must be a function"),t){case"frame":return W(e);case"lost":n=N;break;case"restore":n=P;break;case"destroy":n=O;break;default:nt.raise("invalid event, must be one of frame,lost,restore,destroy")}return n.push(e),{cancel:function(){for(var t=0;t<n.length;++t)if(n[t]===e)return n[t]=n[n.length-1],void n.pop()}}}q();var Z=e(j,{clear:G,prop:pt.define.bind(null,_s),context:pt.define.bind(null,Ss),this:pt.define.bind(null,Es),draw:j({}),buffer:function(t){return y.create(t,bs,!1,!1)},elements:function(t){return w.create(t,!1)},texture:S.create2D,cube:S.createCube,renderbuffer:E.create,framebuffer:A.create,framebufferCube:A.createCube,vao:b.createVAO,attributes:i,frame:W,on:K,limits:v,hasExtension:function(t){return v.extensions.indexOf(t.toLowerCase())>=0},read:C,destroy:U,_gl:r,_refresh:q,poll:function(){Y(),c&&c.update()},now:$,stats:u});return n.onDone(null,Z),Z}return Ms}()},7463:(t,e)=>{"use strict";
/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var r=n-1>>>1,i=t[r];if(!(0<o(i,e)))break t;t[r]=e,t[n]=i,n=r}}function r(t){return 0===t.length?null:t[0]}function i(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length,a=i>>>1;r<a;){var s=2*(r+1)-1,u=t[s],l=s+1,c=t[l];if(0>o(u,n))l<i&&0>o(c,u)?(t[r]=c,t[l]=n,r=l):(t[r]=u,t[s]=n,r=s);else{if(!(l<i&&0>o(c,n)))break t;t[r]=c,t[l]=n,r=l}}}return e}function o(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"==typeof performance&&"function"==typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,u=s.now();e.unstable_now=function(){return s.now()-u}}var l=[],c=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,v="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function x(t){for(var e=r(c);null!==e;){if(null===e.callback)i(c);else{if(!(e.startTime<=t))break;i(c),e.sortIndex=e.expirationTime,n(l,e)}e=r(c)}}function w(t){if(g=!1,x(t),!m)if(null!==r(l))m=!0,O(_);else{var e=r(c);null!==e&&L(w,e.startTime-t)}}function _(t,n){m=!1,g&&(g=!1,y(M),M=-1),p=!0;var o=f;try{for(x(n),d=r(l);null!==d&&(!(d.expirationTime>n)||t&&!k());){var a=d.callback;if("function"==typeof a){d.callback=null,f=d.priorityLevel;var s=a(d.expirationTime<=n);n=e.unstable_now(),"function"==typeof s?d.callback=s:d===r(l)&&i(l),x(n)}else i(l);d=r(l)}if(null!==d)var u=!0;else{var h=r(c);null!==h&&L(w,h.startTime-n),u=!1}return u}finally{d=null,f=o,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,E=!1,A=null,M=-1,C=5,T=-1;function k(){return!(e.unstable_now()-T<C)}function I(){if(null!==A){var t=e.unstable_now();T=t;var n=!0;try{n=A(!0,t)}finally{n?S():(E=!1,A=null)}}else E=!1}if("function"==typeof b)S=function(){b(I)};else if("undefined"!=typeof MessageChannel){var N=new MessageChannel,P=N.port2;N.port1.onmessage=I,S=function(){P.postMessage(null)}}else S=function(){v(I,0)};function O(t){A=t,E||(E=!0,S())}function L(t,n){M=v((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,O(_))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(t){switch(f){case 1:case 2:case 3:var e=3;break;default:e=f}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_scheduleCallback=function(t,i,o){var a=e.unstable_now();switch("object"==typeof o&&null!==o?o="number"==typeof(o=o.delay)&&0<o?a+o:a:o=a,t){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return t={id:h++,callback:i,priorityLevel:t,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(t.sortIndex=o,n(c,t),null===r(l)&&t===r(c)&&(g?(y(M),M=-1):g=!0,L(w,o-a))):(t.sortIndex=s,n(l,t),m||p||(m=!0,O(_))),t},e.unstable_shouldYield=k,e.unstable_wrapCallback=function(t){var e=f;return function(){var n=f;f=e;try{return t.apply(this,arguments)}finally{f=n}}}},69982:(t,e,n)=>{"use strict";t.exports=n(7463)},7391:(t,e,n)=>{var r=n(7180),i=n(43181),o=n(43031),a=n(9067),s=n(96833),u=n(43717),l=n(74801);l.alea=r,l.xor128=i,l.xorwow=o,l.xorshift7=a,l.xor4096=s,l.tychei=u,t.exports=l},7180:function(t,e,n){var r;!function(t,i,o){function a(t){var e=this,n=function(){var t=4022871197,e=function(e){e=String(e);for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)};return e}();e.next=function(){var t=2091639*e.s0+2.3283064365386963e-10*e.c;return e.s0=e.s1,e.s1=e.s2,e.s2=t-(e.c=0|t)},e.c=1,e.s0=n(" "),e.s1=n(" "),e.s2=n(" "),e.s0-=n(t),e.s0<0&&(e.s0+=1),e.s1-=n(t),e.s1<0&&(e.s1+=1),e.s2-=n(t),e.s2<0&&(e.s2+=1),n=null}function s(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function u(t,e){var n=new a(t),r=e&&e.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(e,n,e,i))||(i.exports=r):this.alea=u}(0,t=n.nmd(t),n.amdD)},43717:function(t,e,n){var r;!function(t,i,o){function a(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,r=e.d,i=e.a;return t=t<<25^t>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-r|0,e.d=r<<16^n>>>16^i,e.a=i-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var r=0;r<n.length+20;r++)e.b^=0|n.charCodeAt(r),e.next()}function s(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function u(t,e){var n=new a(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(e,n,e,i))||(i.exports=r):this.tychei=u}(0,t=n.nmd(t),n.amdD)},43181:function(t,e,n){var r;!function(t,i,o){function a(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),e.next()}function s(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function u(t,e){var n=new a(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(e,n,e,i))||(i.exports=r):this.xor128=u}(0,t=n.nmd(t),n.amdD)},96833:function(t,e,n){var r;!function(t,i,o){function a(t){var e=this;e.next=function(){var t,n,r=e.w,i=e.X,o=e.i;return e.w=r=r+1640531527|0,n=i[o+34&127],t=i[o=o+1&127],n^=n<<13,t^=t<<17,n^=n>>>15,t^=t>>>12,n=i[o]=n^t,e.i=o,n+(r^r>>>16)|0},function(t,e){var n,r,i,o,a,s=[],u=128;for(e===(0|e)?(r=e,e=null):(e+="\0",r=0,u=Math.max(u,e.length)),i=0,o=-32;o<u;++o)e&&(r^=e.charCodeAt((o+32)%e.length)),0===o&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(a=a+1640531527|0,i=0==(n=s[127&o]^=r+a)?i+1:0);for(i>=128&&(s[127&(e&&e.length||0)]=-1),i=127,o=512;o>0;--o)r=s[i+34&127],n=s[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[i]=r^n;t.w=a,t.X=s,t.i=i}(e,t)}function s(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function u(t,e){null==t&&(t=+new Date);var n=new a(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,r&&(r.X&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(e,n,e,i))||(i.exports=r):this.xor4096=u}(0,t=n.nmd(t),n.amdD)},9067:function(t,e,n){var r;!function(t,i,o){function a(t){var e=this;e.next=function(){var t,n,r=e.x,i=e.i;return t=r[i],n=(t^=t>>>7)^t<<24,n^=(t=r[i+1&7])^t>>>10,n^=(t=r[i+3&7])^t>>>3,n^=(t=r[i+4&7])^t<<7,t=r[i+7&7],n^=(t^=t<<13)^t<<9,r[i]=n,e.i=i+1&7,n},function(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(e=""+e,n=0;n<e.length;++n)r[7&n]=r[7&n]<<15^e.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],t.x=r,t.i=0,n=256;n>0;--n)t.next()}(e,t)}function s(t,e){return e.x=t.x.slice(),e.i=t.i,e}function u(t,e){null==t&&(t=+new Date);var n=new a(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,r&&(r.x&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(e,n,e,i))||(i.exports=r):this.xorshift7=u}(0,t=n.nmd(t),n.amdD)},43031:function(t,e,n){var r;!function(t,i,o){function a(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),r==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function s(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function u(t,e){var n=new a(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(e,n,e,i))||(i.exports=r):this.xorwow=u}(0,t=n.nmd(t),n.amdD)},74801:function(t,e,n){var r;!function(i,o,a){var s,u=256,l=a.pow(u,6),c=a.pow(2,52),h=2*c,d=u-1;function f(t,e,n){var r=[],d=v(g((e=1==e?{entropy:!0}:e||{}).entropy?[t,y(o)]:null==t?function(){try{var t;return s&&(t=s.randomBytes)?t=t(u):(t=new Uint8Array(u),(i.crypto||i.msCrypto).getRandomValues(t)),y(t)}catch(t){var e=i.navigator,n=e&&e.plugins;return[+new Date,i,n,i.screen,y(o)]}}():t,3),r),f=new p(r),b=function(){for(var t=f.g(6),e=l,n=0;t<c;)t=(t+n)*u,e*=u,n=f.g(1);for(;t>=h;)t/=2,e/=2,n>>>=1;return(t+n)/e};return b.int32=function(){return 0|f.g(4)},b.quick=function(){return f.g(4)/4294967296},b.double=b,v(y(f.S),o),(e.pass||n||function(t,e,n,r){return r&&(r.S&&m(r,f),t.state=function(){return m(f,{})}),n?(a.random=t,e):t})(b,d,"global"in e?e.global:this==a,e.state)}function p(t){var e,n=t.length,r=this,i=0,o=r.i=r.j=0,a=r.S=[];for(n||(t=[n++]);i<u;)a[i]=i++;for(i=0;i<u;i++)a[i]=a[o=d&o+t[i%n]+(e=a[i])],a[o]=e;(r.g=function(t){for(var e,n=0,i=r.i,o=r.j,a=r.S;t--;)e=a[i=d&i+1],n=n*u+a[d&(a[i]=a[o=d&o+e])+(a[o]=e)];return r.i=i,r.j=o,n})(u)}function m(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function g(t,e){var n,r=[],i=typeof t;if(e&&"object"==i)for(n in t)try{r.push(g(t[n],e-1))}catch(t){}return r.length?r:"string"==i?t:t+"\0"}function v(t,e){for(var n,r=t+"",i=0;i<r.length;)e[d&i]=d&(n^=19*e[d&i])+r.charCodeAt(i++);return y(e)}function y(t){return String.fromCharCode.apply(0,t)}if(v(a.random(),o),t.exports){t.exports=f;try{s=n(41234)}catch(t){}}else void 0===(r=function(){return f}.call(e,n,e,t))||(t.exports=r)}("undefined"!=typeof self?self:this,[],Math)},19872:(t,e,n)=>{"use strict";var r=n(83496),i=Array.prototype.concat,o=Array.prototype.slice,a=t.exports=function(t){for(var e=[],n=0,a=t.length;n<a;n++){var s=t[n];r(s)?e=i.call(e,o.call(s)):e.push(s)}return e};a.wrap=function(t){return function(){return t(a(arguments))}}},83496:t=>{t.exports=function(t){return!(!t||"string"==typeof t)&&(t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&"String"!==t.constructor.name))}},65633:t=>{self,t.exports=function(){"use strict";var t,e={};!function(t){t[t.waitStart=0]="waitStart",t[t.inAnimation=1]="inAnimation",t[t.stop=2]="stop"}(t||(t={}));var n=function(){function e(e,n,i,o){this.ctx=e||null,this.canvas=n||null,this.options={collisionRectX:0,collisionRectY:0,collisionRectWidth:n.width,collisionRectHeight:n.height,monitorMousePos:!1,beforeDrawGlobules:null,afterDrawGlobules:null,onMouseDownCanvas:null,onMouseMoveCanvas:null,onMouseUpCanvas:null,onMouseLeaveCanvas:null},o&&(this.options=Object.assign({},this.options,o)),this.frameId=0,this.animationState=t.waitStart,this.mousePos={mouseX:null,mouseY:null},this.prevMousePos={mouseX:null,mouseY:null},this.isMouseDown=!1,this.mouseDownPos={mouseX:null,mouseY:null};var a=[];if(i&&i.length>0)for(var s=0,u=i.length;s<u;s++){var l=i[s],c=new r(e,n,l,this.mousePos);a.push(c)}if(this.globuleList=a,this.options.monitorMousePos){var h=this;n.addEventListener("mousedown",(function(t){h._updateMouseProperty(t),h.mouseInGlobuleList.forEach((function(t){var e=t.requiredMouseInteraction,n=t.mouseInteractionBehavior;e&&"drag"===n&&(t.vx=0,t.vy=0)})),h.options.onMouseDownCanvas&&h.options.onMouseDownCanvas(t,h)})),n.addEventListener("mousemove",(function(t){h._updateMouseProperty(t),h.isMouseDown&&h.mouseInGlobuleList.forEach((function(t){var e=t.requiredMouseInteraction,n=t.mouseInteractionBehavior;if(e&&"drag"===n){var r=h.mousePos.mouseX-h.prevMousePos.mouseX,i=h.mousePos.mouseY-h.prevMousePos.mouseY;t.x+=r,t.y+=i;var o=t.receiveOutForce,a=t.maxMouseOutForce;if(o){var s=r,u=i;if(a){var l=t.getXAndYValue(a,r,i),c=l.x,d=l.y;s>c?s=c:s<-c&&(s=-c),u>d?u=d:u<-d&&(u=-d)}t.vx=s,t.vy=u}}})),h.options.onMouseMoveCanvas&&h.options.onMouseMoveCanvas(t,h)})),n.addEventListener("mouseup",(function(t){h._updateMouseProperty(t),h.options.onMouseUpCanvas&&h.options.onMouseUpCanvas(t,h)})),n.addEventListener("mouseleave",(function(t){h._updateMouseProperty(t),h.options.onMouseLeaveCanvas&&h.options.onMouseLeaveCanvas(t,h)}))}}return e.prototype.start=function(){var e=this;this.animationState=t.inAnimation,e.frameId=requestAnimationFrame((function n(){if(e.animationState===t.inAnimation){var r=e.ctx,i=e.canvas,o=e.globuleList,a=e.options,s=a.beforeDrawGlobules,u=a.afterDrawGlobules,l=a.collisionRectX,c=a.collisionRectY,h=a.collisionRectWidth,d=a.collisionRectHeight,f=i.width,p=i.height;s?s&&s(e):r.clearRect(0,0,f,p),o.forEach((function(t,e){t._drawCurrentFrame(o,e,l,c,h,d)})),u&&u(e),o.forEach((function(t){t.inCollisionGlobule=!1,t.inCollisionGlobuleList=[],t.inCollisionWall=!1})),o.forEach((function(t,e){t._calculateNextFrame(o,e,l,c,h,d)})),e.frameId=requestAnimationFrame(n)}}))},e.prototype.createGlobule=function(t){return new r(this.ctx,this.canvas,t,this.mousePos)},e.prototype.updateGlobuleList=function(t){"[object Array]"===Object.prototype.toString.call(t)&&(this.globuleList=t)},e.prototype.stop=function(){this.animationState===t.inAnimation&&(this.animationState=t.stop),this.frameId&&(cancelAnimationFrame(this.frameId),this.frameId=0)},e.prototype._updateMouseProperty=function(t){if(this.prevMousePos.mouseX=this.mousePos.mouseX,this.prevMousePos.mouseY=this.mousePos.mouseY,"mouseLeave"===t.type)this.mousePos.mouseX=null,this.mousePos.mouseY=null;else{var e=this.canvas.getBoundingClientRect(),n=t.clientX-e.left,r=t.clientY-e.top;this.mousePos.mouseX=n,this.mousePos.mouseY=r}switch(this.mouseInGlobuleList=this._getMouseInGlobuleList(t.type),t.type){case"mousedown":this.isMouseDown=!0,this.mouseDownPos.mouseX=this.mousePos.mouseX,this.mouseDownPos.mouseY=this.mousePos.mouseY,this.mouseInGlobuleList.forEach((function(t){t.controlledByMouse=!0}));break;case"mousemove":default:break;case"mouseup":case"mouseleave":this.isMouseDown=!1,this.mouseDownPos.mouseX=null,this.mouseDownPos.mouseY=null}},e.prototype._getMouseInGlobuleList=function(t){var e=[],n=this;return this.globuleList.forEach((function(r){"mousemove"===t&&"drag"===r.mouseInteractionBehavior&&r.controlledByMouse?e.push(r):(r.controlledByMouse=!1,n._checkMouseInGlobule(r)&&e.push(r))})),e},e.prototype._checkMouseInGlobule=function(t){var e=this.mousePos,n=e.mouseX,r=e.mouseY,i=!1;return null!==n&&null!==r&&Math.hypot(n-t.x,r-t.y)<t.radius&&(i=!0),i},e}(),r=function(){function t(t,e,n,r){var i=n.id,o=n.initX,a=n.initY,s=n.vx,u=n.vy,l=n.radius,c=n.color,h=n.isPureColor,d=n.alpha,f=n.alphaChangeV,p=n.bgImg,m=n.collisionLossV,g=n.moveLossV,v=n.gDirection,y=n.gCoefficient,b=n.requiredMouseInteraction,x=n.mouseInteractionBehavior,w=n.fixedPos,_=n.receiveOutForce,S=n.receiveWallForce,E=n.resistanceWallDirection,A=n.onlyCheckCollision,M=n.perfectlyElasticCollision,C=n.maxMouseOutForce,T=n.maxMoveV,k=n.beforeDrawGlobule,I=n.afterDrawGlobule,N=n.afterCalculateNextFrameGlobule;this.id=i,this.ctx=t,this.canvas=e,this.initX=o||0,this.initY=a||0,this.x=this.initX,this.y=this.initY,this.previousX=null,this.previousY=null,this.vx=s||0,this.vy=u||0,this.radius=l||10,this.color=c||"#666666",this.isPureColor=!!h,this.alpha="number"==typeof d?d<0?0:d>1?1:d:1,this.alphaChangeV="number"==typeof f?f:0,this.bgImg=p||"",this.collisionLossV=m||0,this.moveLossV=g||0,this.gDirection=v,this.gCoefficient=y||0,this.requiredMouseInteraction=!!b,this.mouseInteractionBehavior=x||(this.requiredMouseInteraction?"over":void 0),this.fixedPos=!!w,this.receiveOutForce="boolean"!=typeof _||_,this.receiveWallForce="boolean"!=typeof S||S,this.resistanceWallDirection=E&&E.length>1?E:["bottom","top","left","right"],this.onlyCheckCollision=!!A,this.perfectlyElasticCollision=!!M,this.maxMouseOutForce=C||null,this.mousePos=r||{mouseX:null,mouseY:null},this.maxMoveV=T||null,this.controlledByMouse=!1,this.firstHoverX=null,this.firstHoverY=null,this.outForceLastTime=null,this.inCollisionGlobule=!1,this.inCollisionGlobuleList=[],this.inCollisionWall=!1,this.beforeDrawGlobule=k||null,this.afterDrawGlobule=I||null,this.afterCalculateNextFrameGlobule=N||null}return t.prototype._draw=function(){if(this.ctx.save(),this.ctx.beginPath(),this.color)if(this.isPureColor)this.ctx.fillStyle=this.color;else{var t=this.ctx.createRadialGradient(this.x,this.y,0,this.x,this.y,this.radius);t.addColorStop(0,"#ffffff"),t.addColorStop(1,this.color),this.ctx.fillStyle=t}if(this.ctx.globalAlpha=this.alpha,this.ctx.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),this.ctx.fill(),this.bgImg){var e=new Image;e.width=2*this.radius,e.height=2*this.radius,e.src=this.bgImg,this.ctx.drawImage(e,this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}this.ctx.restore(),this.previousX=this.x,this.previousY=this.y},t.prototype._drawCurrentFrame=function(t,e,n,r,i,o){if(this.receiveOutForce)for(var a=e+1,s=t.length;a<s;a++){var u=t[a];this._checkOverlap(u)}this._checkOverWall(n,r,i,o),null!==this.previousX&&null!==this.previousY&&this.previousX===this.x&&this.previousY===this.y&&(0!==this.vx&&(this.vx=0),0!==this.vy&&(this.vy=0)),this.beforeDrawGlobule&&this.beforeDrawGlobule(this),this._draw(),this.afterDrawGlobule&&this.afterDrawGlobule(this)},t.prototype._calculateNextFrame=function(t,e,n,r,i,o){this._checkHover();for(var a=e+1,s=t.length;a<s;a++){var u=t[a];this._checkCollisionGlobule(u)}if(this._checkCollisionWall(n,r,i,o),this._addGravitation(),this.controlledByMouse||(this.x+=this.vx,this.y+=this.vy),0!==this.alphaChangeV){var l=this.alpha+this.alphaChangeV;l<0?l=0:l>1&&(l=1),this.alpha=l}this._addMoveLoss(),this.afterCalculateNextFrameGlobule&&this.afterCalculateNextFrameGlobule(this)},t.prototype._getOutForce=function(t,e,n,r,i,o,a){var s=this,u=s.x,l=s.y,c=s.vx,h=s.vy;if(this.perfectlyElasticCollision||a)return this._getPerfectlyElasticOutForce(t,e,n,r);var d=0,f=0;if(0===c&&0===h){var p=this._getCosspoint(t+n,e+r,t,e,u,l);d=((g=p.x)-t)/2,f=((v=p.y)-e)/2}else if(0===n&&0===r){var m=this._getCosspoint(u+c,l+h,u,l,t,e),g=m.x,v=m.y;i||o?(d=2*-(g-u),f=2*-(v-l)):(d=3*-(g-u)/2,f=3*-(v-l)/2)}else{var y=this._getLineEquation(u,-l,t,-e);if(y){var b=this._getLineEquation(u,-l,u+c,-(l+h));if(b&&b.k===y.k&&b.b===y.b){var x=this._getLineEquation(t,-e,t+n,-(e+r));if(x){if(x.k===y.k&&x.b===y.b){if(c*n<=0&&h*r<=0)return{outForceVX:-c+n,outForceVY:-h+r}}else if(b.k===-1/x.k)return(t-u>0&&c>0||t-u<0&&c<0)&&(e-l>0&&h>0||e-l<0&&h<0)?{outForceVX:-c+n,outForceVY:-h+r}:{outForceVX:0,outForceVY:0}}else if(0===b.k)return u>t&&c<0||u<t&&c>0?{outForceVX:2*-c,outForceVY:0}:{outForceVX:0,outForceVY:0}}}else{if(0===c&&0===n)return{outForceVX:0,outForceVY:-h+r};if(0===c&&h>0&&0===r)return l<e?{outForceVX:0,outForceVY:2*-h}:{outForceVX:0,outForceVY:0};if(0===c&&h<0&&0===r)return l>e?{outForceVX:0,outForceVY:2*-h}:{outForceVX:0,outForceVY:0}}var w=this._getCosspoint(t+n,e+r,t,e,u,l);((d=(g=w.x)-t)>0&&c>0||d<0&&c<0)&&(d-=c),((f=(v=w.y)-e)>0&&h>0||f<0&&h<0)&&(f-=h)}return{outForceVX:d,outForceVY:f}},t.prototype._getPerfectlyElasticOutForce=function(t,e,n,r){var i=this,o=i.x,a=i.y,s=i.vx,u=i.vy,l=Math.hypot(s,u),c=this._getAngleTypeBetweenTwoVectors(s,u,t-o,e-a);if(c&&c>0){var h=this.getXAndYValue(l,o-t,a-e);return{outForceVX:-s+h.x,outForceVY:-u+h.y}}var d=this._getAngleTypeBetweenTwoVectors(n,r,o-t,a-e);if(d&&d>0){0===l&&(l=Math.hypot(n,r));var f=this.getXAndYValue(l,o-t,a-e);return{outForceVX:-s+f.x,outForceVY:-u+f.y}}return{outForceVX:0,outForceVY:0}},t.prototype._getMouseOutForce=function(t,e){var n=t,r=e,i=this,o=i.requiredMouseInteraction,a=i.mouseInteractionBehavior,s=i.maxMouseOutForce;return o&&"over"===a&&s&&(n>s?n=s:n<-s&&(n=-s),r>s?r=s:r<-s&&(r=-s)),{outForceVX:n,outForceVY:r}},t.prototype.addOutForce=function(t,e,n){if(void 0===n&&(n=!1),!(this.fixedPos||0===t&&0===e)&&(this.vx+=t,this.vy+=e,n&&this._addCollisionLoss(),"number"==typeof this.maxMoveV&&this.maxMoveV>=0&&Math.hypot(this.vx,this.vy)>this.maxMoveV)){var r=this.getXAndYValue(this.maxMoveV,this.vx,this.vy),i=r.x,o=r.y;this.vx=i,this.vy=o}},t.prototype._checkHover=function(){if(!this.fixedPos&&this.requiredMouseInteraction&&"over"===this.mouseInteractionBehavior){var t=this.mousePos,e=t.mouseX,n=t.mouseY;if(null!==e&&null!==n&&Math.hypot(e-this.x,n-this.y)<=this.radius){if(this.outForceLastTime&&(new Date).getTime()-this.outForceLastTime<400)return;if(null!==this.firstHoverX&&null!==this.firstHoverY){var r=e-this.firstHoverX,i=n-this.firstHoverY,o=this._getMouseOutForce(r,i),a=o.outForceVX,s=o.outForceVY;this.addOutForce(a,s),this.outForceLastTime=(new Date).getTime(),this.firstHoverX=null,this.firstHoverY=null}else this.firstHoverX=e,this.firstHoverY=n}}},t.prototype._checkCollisionWall=function(t,e,n,r){if(this.receiveWallForce&&!this.fixedPos){var i=this,o=i.x,a=i.y,s=i.radius,u=i.vx,l=i.vy,c=i.resistanceWallDirection,h=0,d=0,f=!1;c.includes("bottom")&&a>=e+r-s&&l>0&&(d=2*-l,f=!0),c.includes("top")&&a<=s+e&&l<0&&(d=2*-l,f=!0),c.includes("left")&&o<=s+t&&u<0&&(h=2*-u,f=!0),c.includes("right")&&o>=t+n-s&&u>0&&(h=2*-u,f=!0),f?(this.inCollisionWall=!0,this.addOutForce(h,d,!0)):this.inCollisionWall=!1}},t.prototype._checkCollisionGlobule=function(t){var e=t.x,n=t.y,r=t.radius,i=t.vx,o=t.vy,a=t.receiveOutForce,s=t.onlyCheckCollision,u=t.fixedPos,l=t.controlledByMouse,c=t.perfectlyElasticCollision;if((this.receiveOutForce||this.onlyCheckCollision||a||s)&&Math.hypot(e-this.x,n-this.y)<=r+this.radius&&(i!==this.vx||o!==this.vy)){var h=this.x,d=this.y,f=this.vx,p=this.vy;if(this.receiveOutForce&&a||this.onlyCheckCollision){var m=this._getOutForce(e,n,i,o,u,l,c),g=m.outForceVX,v=m.outForceVY;this.receiveOutForce&&a&&!this.fixedPos&&!this.controlledByMouse&&this.addOutForce(g,v,!0),0===g&&0===v||(this.inCollisionGlobule=!0,this.inCollisionGlobuleList.push(t))}if(this.receiveOutForce&&a||s){var y=t._getOutForce(h,d,f,p,this.fixedPos,this.controlledByMouse,this.perfectlyElasticCollision),b=y.outForceVX,x=y.outForceVY;this.receiveOutForce&&a&&!u&&!l&&t.addOutForce(b,x,!0),0===b&&0===x||(t.inCollisionGlobule=!0,t.inCollisionGlobuleList.push(this))}}},t.prototype._addCollisionLoss=function(){if(this.receiveOutForce&&!this.fixedPos&&0!==this.collisionLossV&&!this.controlledByMouse){var t=this.getXAndYValue(this.collisionLossV,this.vx,this.vy),e=t.x,n=t.y;Math.abs(this.vx)>Math.abs(e)?this.vx-=e:this.vx=0,Math.abs(this.vy)>Math.abs(n)?this.vy-=n:this.vy=0}},t.prototype._addMoveLoss=function(){if(!this.fixedPos&&0!==this.moveLossV&&!this.controlledByMouse){var t=this.getXAndYValue(this.moveLossV,this.vx,this.vy),e=t.x,n=t.y;Math.abs(this.vx)>Math.abs(e)?this.vx-=e:this.vx=0,Math.abs(this.vy)>Math.abs(n)?this.vy-=n:this.vy=0}},t.prototype._checkOverlap=function(t){var e=t.x,n=t.y,r=t.radius,i=t.receiveOutForce,o=t.fixedPos,a=t.controlledByMouse;if(this.receiveOutForce&&i&&(!this.fixedPos||!o)){var s=Math.hypot(e-this.x,n-this.y);if(s+.2<r+this.radius){var u=r+this.radius-s;this.fixedPos||this.controlledByMouse||o||a||(u/=2);var l=0,c=0;this.x===e?(c=u,this.y>n?(this.fixedPos||this.controlledByMouse||(this.y=this.y+c),o||a||(t.y=n-c)):(this.fixedPos||this.controlledByMouse||(this.y=this.y-u),o||a||(t.y=n+u))):this.y===n?(l=u,this.x>e?(this.fixedPos||this.controlledByMouse||(this.x=this.x+l),o||a||(t.x=e-l)):(this.fixedPos||this.controlledByMouse||(this.x=this.x-l),o||a||(t.x=e+l))):this.x>e?(l=u/s*Math.abs(this.x-e),c=u/s*Math.abs(this.y-n),this.y>n?(this.fixedPos||this.controlledByMouse||(this.x=this.x+l,this.y=this.y+c),o||a||(t.x=e-l,t.y=n-c)):(this.fixedPos||this.controlledByMouse||(this.x=this.x+l,this.y=this.y-c),o||a||(t.x=e-l,t.y=n+c))):(l=u/s*Math.abs(this.x-e),c=u/s*Math.abs(this.y-n),this.y>n?(this.fixedPos||this.controlledByMouse||(this.x=this.x-l,this.y=this.y+c),o||a||(t.x=e+l,t.y=n-c)):(this.fixedPos||this.controlledByMouse||(this.x=this.x-l,this.y=this.y-c),o||a||(t.x=e+l,t.y=n+c)))}}},t.prototype._checkOverWall=function(t,e,n,r){if(this.receiveWallForce&&!this.fixedPos){var i=this,o=i.x,a=i.y,s=i.radius;this.resistanceWallDirection.includes("bottom")&&a>e+r-s&&(this.y=e+r-s),this.resistanceWallDirection.includes("top")&&a<s+e&&(this.y=s+e),this.resistanceWallDirection.includes("left")&&o<s+t&&(this.x=s+t),this.resistanceWallDirection.includes("right")&&this.x>t+n-s&&(this.x=t+n-s)}},t.prototype._addGravitation=function(){if(!this.fixedPos&&this.gDirection&&this.gCoefficient&&!this.controlledByMouse)switch(this.gDirection){case"toInit":var t=(this.initX-this.x)*this.gCoefficient,e=(this.initY-this.y)*this.gCoefficient;this.addOutForce(t,e);break;case"toBottom":var n=this.gCoefficient;this.addOutForce(0,n);break;case"toTop":var r=-this.gCoefficient;this.addOutForce(0,r);break;case"toLeft":var i=-this.gCoefficient;this.addOutForce(i,0);break;case"toRight":var o=this.gCoefficient;this.addOutForce(o,0)}},t.prototype.getXAndYValue=function(t,e,n){return 0===e&&0===n?{x:0,y:0}:{x:t*e/Math.hypot(e,n),y:t*n/Math.hypot(e,n)}},t.prototype._getAngleTypeBetweenTwoVectors=function(t,e,n,r){return 0===t&&0===e||0===n&&0===r?null:(t*n+e*r)/(Math.hypot(t,e)*Math.hypot(n,r))},t.prototype._getLineEquation=function(t,e,n,r){if(t===n)return null;var i=(r-e)/(n-t);return{k:i,b:e-i*t}},t.prototype._getCosspoint=function(t,e,n,r,i,o){var a=this._getLineEquation(n,-r,i,-o);if(a){var s=a.k,u=a.b;if(0===s)return{x:t,y:r};var l=-1/s,c=(u-(-e-l*t))/(l-s);return{x:c,y:-(s*c+u)}}return{x:n,y:e}},t}();return e.default=n,e.default}()},42569:t=>{var e,n,r={};t.exports=r,r.parse=function(t,e){for(var n=r.bin.readUshort,i=r.bin.readUint,o=0,a={},s=new Uint8Array(t),u=s.length-4;101010256!=i(s,u);)u--;o=u;o+=4;var l=n(s,o+=4),c=(n(s,o+=2),i(s,o+=2)),h=i(s,o+=4);o+=4,o=h;for(var d=0;d<l;d++){i(s,o);o+=4,o+=4,o+=4;i(s,o+=4),c=i(s,o+=4);var f=i(s,o+=4),p=n(s,o+=4),m=n(s,o+2),g=n(s,o+4);o+=6;var v=i(s,o+=8);o+=4,o+=p+m+g,r._readLocal(s,v,a,c,f,e)}return a},r._readLocal=function(t,e,n,i,o,a){var s=r.bin.readUshort,u=r.bin.readUint,l=(u(t,e),s(t,e+=4),s(t,e+=2),s(t,e+=2));u(t,e+=2),u(t,e+=4);e+=4;var c=s(t,e+=8),h=s(t,e+=2);e+=2;var d=r.bin.readUTF8(t,e,c);if(e+=c,e+=h,a)n[d]={size:o,csize:i};else{var f=new Uint8Array(t.buffer,e);if(0==l)n[d]=new Uint8Array(f.buffer.slice(e,e+i));else{if(8!=l)throw"unknown compression method: "+l;var p=new Uint8Array(o);r.inflateRaw(f,p),n[d]=p}}},r.inflateRaw=function(t,e){return r.F.inflate(t,e)},r.inflate=function(t,e){t[0],t[1];return r.inflateRaw(new Uint8Array(t.buffer,t.byteOffset+2,t.length-6),e)},r.deflate=function(t,e){null==e&&(e={level:6});var n=0,i=new Uint8Array(50+Math.floor(1.1*t.length));i[n]=120,i[n+1]=156,n+=2,n=r.F.deflateRaw(t,i,n,e.level);var o=r.adler(t,0,t.length);return i[n+0]=o>>>24&255,i[n+1]=o>>>16&255,i[n+2]=o>>>8&255,i[n+3]=o>>>0&255,new Uint8Array(i.buffer,0,n+4)},r.deflateRaw=function(t,e){null==e&&(e={level:6});var n=new Uint8Array(50+Math.floor(1.1*t.length)),i=r.F.deflateRaw(t,n,i,e.level);return new Uint8Array(n.buffer,0,i)},r.encode=function(t,e){null==e&&(e=!1);var n=0,i=r.bin.writeUint,o=r.bin.writeUshort,a={};for(var s in t){var u=!r._noNeed(s)&&!e,l=t[s],c=r.crc.crc(l,0,l.length);a[s]={cpr:u,usize:l.length,crc:c,file:u?r.deflateRaw(l):l}}for(var s in a)n+=a[s].file.length+30+46+2*r.bin.sizeUTF8(s);n+=22;var h=new Uint8Array(n),d=0,f=[];for(var s in a){var p=a[s];f.push(d),d=r._writeHeader(h,d,s,p,0)}var m=0,g=d;for(var s in a){p=a[s];f.push(d),d=r._writeHeader(h,d,s,p,1,f[m++])}var v=d-g;return i(h,d,101010256),d+=4,o(h,d+=4,m),o(h,d+=2,m),i(h,d+=2,v),i(h,d+=4,g),d+=4,d+=2,h.buffer},r._noNeed=function(t){var e=t.split(".").pop().toLowerCase();return-1!="png,jpg,jpeg,zip".indexOf(e)},r._writeHeader=function(t,e,n,i,o,a){var s=r.bin.writeUint,u=r.bin.writeUshort,l=i.file;return s(t,e,0==o?67324752:33639248),e+=4,1==o&&(e+=2),u(t,e,20),u(t,e+=2,0),u(t,e+=2,i.cpr?8:0),s(t,e+=2,0),s(t,e+=4,i.crc),s(t,e+=4,l.length),s(t,e+=4,i.usize),u(t,e+=4,r.bin.sizeUTF8(n)),u(t,e+=2,0),e+=2,1==o&&(e+=2,e+=2,s(t,e+=6,a),e+=4),e+=r.bin.writeUTF8(t,e,n),0==o&&(t.set(l,e),e+=l.length),e},r.crc={table:function(){for(var t=new Uint32Array(256),e=0;e<256;e++){for(var n=e,r=0;r<8;r++)1&n?n=3988292384^n>>>1:n>>>=1;t[e]=n}return t}(),update:function(t,e,n,i){for(var o=0;o<i;o++)t=r.crc.table[255&(t^e[n+o])]^t>>>8;return t},crc:function(t,e,n){return 4294967295^r.crc.update(4294967295,t,e,n)}},r.adler=function(t,e,n){for(var r=1,i=0,o=e,a=e+n;o<a;){for(var s=Math.min(o+5552,a);o<s;)i+=r+=t[o++];r%=65521,i%=65521}return i<<16|r},r.bin={readUshort:function(t,e){return t[e]|t[e+1]<<8},writeUshort:function(t,e,n){t[e]=255&n,t[e+1]=n>>8&255},readUint:function(t,e){return 16777216*t[e+3]+(t[e+2]<<16|t[e+1]<<8|t[e])},writeUint:function(t,e,n){t[e]=255&n,t[e+1]=n>>8&255,t[e+2]=n>>16&255,t[e+3]=n>>24&255},readASCII:function(t,e,n){for(var r="",i=0;i<n;i++)r+=String.fromCharCode(t[e+i]);return r},writeASCII:function(t,e,n){for(var r=0;r<n.length;r++)t[e+r]=n.charCodeAt(r)},pad:function(t){return t.length<2?"0"+t:t},readUTF8:function(t,e,n){for(var i,o="",a=0;a<n;a++)o+="%"+r.bin.pad(t[e+a].toString(16));try{i=decodeURIComponent(o)}catch(i){return r.bin.readASCII(t,e,n)}return i},writeUTF8:function(t,e,n){for(var r=n.length,i=0,o=0;o<r;o++){var a=n.charCodeAt(o);if(4294967168&a)if(4294965248&a)if(4294901760&a){if(4292870144&a)throw"e";t[e+i]=240|a>>18,t[e+i+1]=128|a>>12&63,t[e+i+2]=128|a>>6&63,t[e+i+3]=128|63&a,i+=4}else t[e+i]=224|a>>12,t[e+i+1]=128|a>>6&63,t[e+i+2]=128|63&a,i+=3;else t[e+i]=192|a>>6,t[e+i+1]=128|63&a,i+=2;else t[e+i]=a,i++}return i},sizeUTF8:function(t){for(var e=t.length,n=0,r=0;r<e;r++){var i=t.charCodeAt(r);if(4294967168&i)if(4294965248&i)if(4294901760&i){if(4292870144&i)throw"e";n+=4}else n+=3;else n+=2;else n++}return n}},r.F={},r.F.deflateRaw=function(t,e,n,i){var o=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][i],a=r.F.U,s=r.F._goodIndex,u=(r.F._hash,r.F._putsE),l=0,c=n<<3,h=0,d=t.length;if(0==i){for(;l<d;){u(e,c,l+(E=Math.min(65535,d-l))==d?1:0),c=r.F._copyExact(t,l,E,e,c+8),l+=E}return c>>>3}var f=a.lits,p=a.strt,m=a.prev,g=0,v=0,y=0,b=0,x=0,w=0;d>2&&(p[w=r.F._hash(t,0)]=0);for(l=0;l<d;l++){if(x=w,l+1<d-2){w=r.F._hash(t,l+1);var _=l+1&32767;m[_]=p[w],p[w]=_}if(h<=l){(g>14e3||v>26697)&&d-l>100&&(h<l&&(f[g]=l-h,g+=2,h=l),c=r.F._writeBlock(l==d-1||h==d?1:0,f,g,b,t,y,l-y,e,c),g=v=b=0,y=l);var S=0;l<d-2&&(S=r.F._bestMatch(t,l,m,x,Math.min(o[2],d-l),o[3]));var E=S>>>16,A=65535&S;if(0!=S){A=65535&S;var M=s(E=S>>>16,a.of0);a.lhst[257+M]++;var C=s(A,a.df0);a.dhst[C]++,b+=a.exb[M]+a.dxb[C],f[g]=E<<23|l-h,f[g+1]=A<<16|M<<8|C,g+=2,h=l+E}else a.lhst[t[l]]++;v++}}for(y==l&&0!=t.length||(h<l&&(f[g]=l-h,g+=2,h=l),c=r.F._writeBlock(1,f,g,b,t,y,l-y,e,c),g=0,v=0,g=v=b=0,y=l);7&c;)c++;return c>>>3},r.F._bestMatch=function(t,e,n,i,o,a){var s=32767&e,u=n[s],l=s-u+32768&32767;if(u==s||i!=r.F._hash(t,e-l))return 0;for(var c=0,h=0,d=Math.min(32767,e);l<=d&&0!=--a&&u!=s;){if(0==c||t[e+c]==t[e+c-l]){var f=r.F._howLong(t,e,l);if(f>c){if(h=l,(c=f)>=o)break;l+2<f&&(f=l+2);for(var p=0,m=0;m<f-2;m++){var g=e-l+m+32768&32767,v=g-n[g]+32768&32767;v>p&&(p=v,u=g)}}}l+=(s=u)-(u=n[s])+32768&32767}return c<<16|h},r.F._howLong=function(t,e,n){if(t[e]!=t[e-n]||t[e+1]!=t[e+1-n]||t[e+2]!=t[e+2-n])return 0;var r=e,i=Math.min(t.length,e+258);for(e+=3;e<i&&t[e]==t[e-n];)e++;return e-r},r.F._hash=function(t,e){return(t[e]<<8|t[e+1])+(t[e+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(t,e,n,i,o,a,s,u,l){var c,h,d,f,p,m,g,v,y,b=r.F.U,x=r.F._putsF,w=r.F._putsE;b.lhst[256]++,h=(c=r.F.getTrees())[0],d=c[1],f=c[2],p=c[3],m=c[4],g=c[5],v=c[6],y=c[7];var _=32+(l+3&7?8-(l+3&7):0)+(s<<3),S=i+r.F.contSize(b.fltree,b.lhst)+r.F.contSize(b.fdtree,b.dhst),E=i+r.F.contSize(b.ltree,b.lhst)+r.F.contSize(b.dtree,b.dhst);E+=14+3*g+r.F.contSize(b.itree,b.ihst)+(2*b.ihst[16]+3*b.ihst[17]+7*b.ihst[18]);for(var A=0;A<286;A++)b.lhst[A]=0;for(A=0;A<30;A++)b.dhst[A]=0;for(A=0;A<19;A++)b.ihst[A]=0;var M=_<S&&_<E?0:S<E?1:2;x(u,l,t),x(u,l+1,M);l+=3;if(0==M){for(;7&l;)l++;l=r.F._copyExact(o,a,s,u,l)}else{var C,T;if(1==M&&(C=b.fltree,T=b.fdtree),2==M){r.F.makeCodes(b.ltree,h),r.F.revCodes(b.ltree,h),r.F.makeCodes(b.dtree,d),r.F.revCodes(b.dtree,d),r.F.makeCodes(b.itree,f),r.F.revCodes(b.itree,f),C=b.ltree,T=b.dtree,w(u,l,p-257),w(u,l+=5,m-1),w(u,l+=5,g-4),l+=4;for(var k=0;k<g;k++)w(u,l+3*k,b.itree[1+(b.ordr[k]<<1)]);l+=3*g,l=r.F._codeTiny(v,b.itree,u,l),l=r.F._codeTiny(y,b.itree,u,l)}for(var I=a,N=0;N<n;N+=2){for(var P=e[N],O=P>>>23,L=I+(8388607&P);I<L;)l=r.F._writeLit(o[I++],C,u,l);if(0!=O){var R=e[N+1],D=R>>16,z=R>>8&255,F=255&R;w(u,l=r.F._writeLit(257+z,C,u,l),O-b.of0[z]),l+=b.exb[z],x(u,l=r.F._writeLit(F,T,u,l),D-b.df0[F]),l+=b.dxb[F],I+=O}}l=r.F._writeLit(256,C,u,l)}return l},r.F._copyExact=function(t,e,n,r,i){var o=i>>>3;return r[o]=n,r[o+1]=n>>>8,r[o+2]=255-r[o],r[o+3]=255-r[o+1],o+=4,r.set(new Uint8Array(t.buffer,e,n),o),i+(n+4<<3)},r.F.getTrees=function(){for(var t=r.F.U,e=r.F._hufTree(t.lhst,t.ltree,15),n=r.F._hufTree(t.dhst,t.dtree,15),i=[],o=r.F._lenCodes(t.ltree,i),a=[],s=r.F._lenCodes(t.dtree,a),u=0;u<i.length;u+=2)t.ihst[i[u]]++;for(u=0;u<a.length;u+=2)t.ihst[a[u]]++;for(var l=r.F._hufTree(t.ihst,t.itree,7),c=19;c>4&&0==t.itree[1+(t.ordr[c-1]<<1)];)c--;return[e,n,l,o,s,c,i,a]},r.F.getSecond=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(t[n+1]);return e},r.F.nonZero=function(t){for(var e="",n=0;n<t.length;n+=2)0!=t[n+1]&&(e+=(n>>1)+",");return e},r.F.contSize=function(t,e){for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[1+(r<<1)];return n},r.F._codeTiny=function(t,e,n,i){for(var o=0;o<t.length;o+=2){var a=t[o],s=t[o+1];i=r.F._writeLit(a,e,n,i);var u=16==a?2:17==a?3:7;a>15&&(r.F._putsE(n,i,s,u),i+=u)}return i},r.F._lenCodes=function(t,e){for(var n=t.length;2!=n&&0==t[n-1];)n-=2;for(var r=0;r<n;r+=2){var i=t[r+1],o=r+3<n?t[r+3]:-1,a=r+5<n?t[r+5]:-1,s=0==r?-1:t[r-1];if(0==i&&o==i&&a==i){for(var u=r+5;u+2<n&&t[u+2]==i;)u+=2;(l=Math.min(u+1-r>>>1,138))<11?e.push(17,l-3):e.push(18,l-11),r+=2*l-2}else if(i==s&&o==i&&a==i){for(u=r+5;u+2<n&&t[u+2]==i;)u+=2;var l=Math.min(u+1-r>>>1,6);e.push(16,l-3),r+=2*l-2}else e.push(i,0)}return n>>>1},r.F._hufTree=function(t,e,n){var i=[],o=t.length,a=e.length,s=0;for(s=0;s<a;s+=2)e[s]=0,e[s+1]=0;for(s=0;s<o;s++)0!=t[s]&&i.push({lit:s,f:t[s]});var u=i.length,l=i.slice(0);if(0==u)return 0;if(1==u){var c=i[0].lit;l=0==c?1:0;return e[1+(c<<1)]=1,e[1+(l<<1)]=1,1}i.sort((function(t,e){return t.f-e.f}));var h=i[0],d=i[1],f=0,p=1,m=2;for(i[0]={lit:-1,f:h.f+d.f,l:h,r:d,d:0};p!=u-1;)h=f!=p&&(m==u||i[f].f<i[m].f)?i[f++]:i[m++],d=f!=p&&(m==u||i[f].f<i[m].f)?i[f++]:i[m++],i[p++]={lit:-1,f:h.f+d.f,l:h,r:d};var g=r.F.setDepth(i[p-1],0);for(g>n&&(r.F.restrictDepth(l,n,g),g=n),s=0;s<u;s++)e[1+(l[s].lit<<1)]=l[s].d;return g},r.F.setDepth=function(t,e){return-1!=t.lit?(t.d=e,e):Math.max(r.F.setDepth(t.l,e+1),r.F.setDepth(t.r,e+1))},r.F.restrictDepth=function(t,e,n){var r=0,i=1<<n-e,o=0;for(t.sort((function(t,e){return e.d==t.d?t.f-e.f:e.d-t.d})),r=0;r<t.length&&t[r].d>e;r++){var a=t[r].d;t[r].d=e,o+=i-(1<<n-a)}for(o>>>=n-e;o>0;){(a=t[r].d)<e?(t[r].d++,o-=1<<e-a-1):r++}for(;r>=0;r--)t[r].d==e&&o<0&&(t[r].d--,o++);0!=o&&console.log("debt left")},r.F._goodIndex=function(t,e){var n=0;return e[16|n]<=t&&(n|=16),e[8|n]<=t&&(n|=8),e[4|n]<=t&&(n|=4),e[2|n]<=t&&(n|=2),e[1|n]<=t&&(n|=1),n},r.F._writeLit=function(t,e,n,i){return r.F._putsF(n,i,e[t<<1]),i+e[1+(t<<1)]},r.F.inflate=function(t,e){var n=Uint8Array;if(3==t[0]&&0==t[1])return e||new n(0);var i=r.F,o=i._bitsF,a=i._bitsE,s=i._decodeTiny,u=i.makeCodes,l=i.codes2map,c=i._get17,h=i.U,d=null==e;d&&(e=new n(t.length>>>2<<3));for(var f,p,m=0,g=0,v=0,y=0,b=0,x=0,w=0,_=0,S=0;0==m;)if(m=o(t,S,1),g=o(t,S+1,2),S+=3,0!=g){if(d&&(e=r.F._check(e,_+(1<<17))),1==g&&(f=h.flmap,p=h.fdmap,x=511,w=31),2==g){v=a(t,S,5)+257,y=a(t,S+5,5)+1,b=a(t,S+10,4)+4;S+=14;for(var E=0;E<38;E+=2)h.itree[E]=0,h.itree[E+1]=0;var A=1;for(E=0;E<b;E++){var M=a(t,S+3*E,3);h.itree[1+(h.ordr[E]<<1)]=M,M>A&&(A=M)}S+=3*b,u(h.itree,A),l(h.itree,A,h.imap),f=h.lmap,p=h.dmap,S=s(h.imap,(1<<A)-1,v+y,t,S,h.ttree);var C=i._copyOut(h.ttree,0,v,h.ltree);x=(1<<C)-1;var T=i._copyOut(h.ttree,v,y,h.dtree);w=(1<<T)-1,u(h.ltree,C),l(h.ltree,C,f),u(h.dtree,T),l(h.dtree,T,p)}for(;;){var k=f[c(t,S)&x];S+=15&k;var I=k>>>4;if(I>>>8==0)e[_++]=I;else{if(256==I)break;var N=_+I-254;if(I>264){var P=h.ldef[I-257];N=_+(P>>>3)+a(t,S,7&P),S+=7&P}var O=p[c(t,S)&w];S+=15&O;var L=O>>>4,R=h.ddef[L],D=(R>>>4)+o(t,S,15&R);for(S+=15&R,d&&(e=r.F._check(e,_+(1<<17)));_<N;)e[_]=e[_++-D],e[_]=e[_++-D],e[_]=e[_++-D],e[_]=e[_++-D];_=N}}}else{7&S&&(S+=8-(7&S));var z=4+(S>>>3),F=t[z-4]|t[z-3]<<8;d&&(e=r.F._check(e,_+F)),e.set(new n(t.buffer,t.byteOffset+z,F),_),S=z+F<<3,_+=F}return e.length==_?e:e.slice(0,_)},r.F._check=function(t,e){var n=t.length;if(e<=n)return t;var r=new Uint8Array(Math.max(n<<1,e));return r.set(t,0),r},r.F._decodeTiny=function(t,e,n,i,o,a){for(var s=r.F._bitsE,u=r.F._get17,l=0;l<n;){var c=t[u(i,o)&e];o+=15&c;var h=c>>>4;if(h<=15)a[l]=h,l++;else{var d=0,f=0;16==h?(f=3+s(i,o,2),o+=2,d=a[l-1]):17==h?(f=3+s(i,o,3),o+=3):18==h&&(f=11+s(i,o,7),o+=7);for(var p=l+f;l<p;)a[l]=d,l++}}return o},r.F._copyOut=function(t,e,n,r){for(var i=0,o=0,a=r.length>>>1;o<n;){var s=t[o+e];r[o<<1]=0,r[1+(o<<1)]=s,s>i&&(i=s),o++}for(;o<a;)r[o<<1]=0,r[1+(o<<1)]=0,o++;return i},r.F.makeCodes=function(t,e){for(var n,i,o,a,s=r.F.U,u=t.length,l=s.bl_count,c=0;c<=e;c++)l[c]=0;for(c=1;c<u;c+=2)l[t[c]]++;var h=s.next_code;for(n=0,l[0]=0,i=1;i<=e;i++)n=n+l[i-1]<<1,h[i]=n;for(o=0;o<u;o+=2)0!=(a=t[o+1])&&(t[o]=h[a],h[a]++)},r.F.codes2map=function(t,e,n){for(var i=t.length,o=r.F.U.rev15,a=0;a<i;a+=2)if(0!=t[a+1])for(var s=a>>1,u=t[a+1],l=s<<4|u,c=e-u,h=t[a]<<c,d=h+(1<<c);h!=d;){n[o[h]>>>15-e]=l,h++}},r.F.revCodes=function(t,e){for(var n=r.F.U.rev15,i=15-e,o=0;o<t.length;o+=2){var a=t[o]<<e-t[o+1];t[o]=n[a]>>>i}},r.F._putsE=function(t,e,n){n<<=7&e;var r=e>>>3;t[r]|=n,t[r+1]|=n>>>8},r.F._putsF=function(t,e,n){n<<=7&e;var r=e>>>3;t[r]|=n,t[r+1]|=n>>>8,t[r+2]|=n>>>16},r.F._bitsE=function(t,e,n){return(t[e>>>3]|t[1+(e>>>3)]<<8)>>>(7&e)&(1<<n)-1},r.F._bitsF=function(t,e,n){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16)>>>(7&e)&(1<<n)-1},r.F._get17=function(t,e){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16)>>>(7&e)},r.F._get25=function(t,e){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16|t[3+(e>>>3)]<<24)>>>(7&e)},r.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var t=r.F.U,e=0;e<32768;e++){var n=e;n=(4278255360&(n=(4042322160&(n=(3435973836&(n=(2863311530&n)>>>1|(1431655765&n)<<1))>>>2|(858993459&n)<<2))>>>4|(252645135&n)<<4))>>>8|(16711935&n)<<8,t.rev15[e]=(n>>>16|n<<16)>>>17}function i(t,e,n){for(;0!=e--;)t.push(0,n)}for(e=0;e<32;e++)t.ldef[e]=t.of0[e]<<3|t.exb[e],t.ddef[e]=t.df0[e]<<4|t.dxb[e];i(t.fltree,144,8),i(t.fltree,112,9),i(t.fltree,24,7),i(t.fltree,8,8),r.F.makeCodes(t.fltree,9),r.F.codes2map(t.fltree,9,t.flmap),r.F.revCodes(t.fltree,9),i(t.fdtree,32,5),r.F.makeCodes(t.fdtree,5),r.F.codes2map(t.fdtree,5,t.fdmap),r.F.revCodes(t.fdtree,5),i(t.itree,19,0),i(t.ltree,286,0),i(t.dtree,30,0),i(t.ttree,320,0)}()},15727:(t,e,n)=>{"use strict";n.d(e,{C6:()=>i});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}Object.create;Object.create},4633:(t,e,n)=>{var r=n(73738).default;function i(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t.exports=i=function(){return n},t.exports.__esModule=!0,t.exports.default=t.exports;var e,n={},o=Object.prototype,a=o.hasOwnProperty,s=Object.defineProperty||function(t,e,n){t[e]=n.value},u="function"==typeof Symbol?Symbol:{},l=u.iterator||"@@iterator",c=u.asyncIterator||"@@asyncIterator",h=u.toStringTag||"@@toStringTag";function d(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(e){d=function(t,e,n){return t[e]=n}}function f(t,e,n,r){var i=e&&e.prototype instanceof x?e:x,o=Object.create(i.prototype),a=new O(r||[]);return s(o,"_invoke",{value:k(t,n,a)}),o}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}n.wrap=f;var m="suspendedStart",g="suspendedYield",v="executing",y="completed",b={};function x(){}function w(){}function _(){}var S={};d(S,l,(function(){return this}));var E=Object.getPrototypeOf,A=E&&E(E(L([])));A&&A!==o&&a.call(A,l)&&(S=A);var M=_.prototype=x.prototype=Object.create(S);function C(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function n(i,o,s,u){var l=p(t[i],t,o);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==r(h)&&a.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,s,u)}),(function(t){n("throw",t,s,u)})):e.resolve(h).then((function(t){c.value=t,s(c)}),(function(t){return n("throw",t,s,u)}))}u(l.arg)}var i;s(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}})}function k(t,n,r){var i=m;return function(o,a){if(i===v)throw Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var u=I(s,r);if(u){if(u===b)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===m)throw i=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=v;var l=p(t,n,r);if("normal"===l.type){if(i=r.done?y:g,l.arg===b)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=y,r.method="throw",r.arg=l.arg)}}}function I(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,I(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var o=p(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,b;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function N(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(N,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(a.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(r(t)+" is not iterable")}return w.prototype=_,s(M,"constructor",{value:_,configurable:!0}),s(_,"constructor",{value:w,configurable:!0}),w.displayName=d(_,h,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,d(t,h,"GeneratorFunction")),t.prototype=Object.create(M),t},n.awrap=function(t){return{__await:t}},C(T.prototype),d(T.prototype,c,(function(){return this})),n.AsyncIterator=T,n.async=function(t,e,r,i,o){void 0===o&&(o=Promise);var a=new T(f(t,e,r,i),o);return n.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},C(M),d(M,h,"Generator"),d(M,l,(function(){return this})),d(M,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},n.values=L,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var u=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),b}},n}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},73738:t=>{function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},54756:(t,e,n)=>{var r=n(4633)();t.exports=r;try{regeneratorRuntime=r}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},46942:(t,e)=>{var n;
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var t="",e=0;e<arguments.length;e++){var n=arguments[e];n&&(t=a(t,o(n)))}return t}function o(t){if("string"==typeof t||"number"==typeof t)return t;if("object"!=typeof t)return"";if(Array.isArray(t))return i.apply(null,t);if(t.toString!==Object.prototype.toString&&!t.toString.toString().includes("[native code]"))return t.toString();var e="";for(var n in t)r.call(t,n)&&t[n]&&(e=a(e,n));return e}function a(t,e){return e?t?t+" "+e:t+e:t}t.exports?(i.default=i,t.exports=i):void 0===(n=function(){return i}.apply(e,[]))||(t.exports=n)}()},43145:(t,e,n)=>{"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,{A:()=>r})},96369:(t,e,n)=>{"use strict";function r(t){if(Array.isArray(t))return t}n.d(e,{A:()=>r})},9417:(t,e,n)=>{"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,{A:()=>r})},10467:(t,e,n)=>{"use strict";function r(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var a=t.apply(e,n);function s(t){r(a,i,o,s,u,"next",t)}function u(t){r(a,i,o,s,u,"throw",t)}s(void 0)}))}}n.d(e,{A:()=>i})},39874:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var r=n(53954),i=n(52176),o=n(56822);function a(t,e,n){return e=(0,r.A)(e),(0,o.A)(t,(0,i.A)()?Reflect.construct(e,n||[],(0,r.A)(t).constructor):e.apply(t,n))}},23029:(t,e,n)=>{"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,{A:()=>r})},92901:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var r=n(20816);function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(0,r.A)(i.key),i)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}},29426:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var r=n(53954),i=n(52176),o=n(56822);function a(t){var e=(0,i.A)();return function(){var n,i=(0,r.A)(t);if(e){var a=(0,r.A)(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return(0,o.A)(this,n)}}},64467:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});var r=n(20816);function i(t,e,n){return(e=(0,r.A)(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},58168:(t,e,n)=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r.apply(this,arguments)}n.d(e,{A:()=>r})},53954:(t,e,n)=>{"use strict";function r(t){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},r(t)}n.d(e,{A:()=>r})},15361:(t,e,n)=>{"use strict";function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&r(t,e)}n.d(e,{A:()=>i})},52176:(t,e,n)=>{"use strict";function r(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(r=function(){return!!t})()}n.d(e,{A:()=>r})},73893:(t,e,n)=>{"use strict";function r(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}n.d(e,{A:()=>r})},76562:(t,e,n)=>{"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(e,{A:()=>r})},89379:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var r=n(64467);function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){(0,r.A)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}},53986:(t,e,n)=>{"use strict";function r(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}n.d(e,{A:()=>r})},56822:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var r=n(82284),i=n(9417);function o(t,e){if(e&&("object"===(0,r.A)(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return(0,i.A)(t)}},90675:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});var r=n(82284);function i(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
i=function(){return e};var t,e={},n=Object.prototype,o=n.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},s="function"==typeof Symbol?Symbol:{},u=s.iterator||"@@iterator",l=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function h(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(t){h=function(t,e,n){return t[e]=n}}function d(t,e,n,r){var i=e&&e.prototype instanceof b?e:b,o=Object.create(i.prototype),s=new P(r||[]);return a(o,"_invoke",{value:T(t,n,s)}),o}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=d;var p="suspendedStart",m="suspendedYield",g="executing",v="completed",y={};function b(){}function x(){}function w(){}var _={};h(_,u,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(O([])));E&&E!==n&&o.call(E,u)&&(_=E);var A=w.prototype=b.prototype=Object.create(_);function M(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function n(i,a,s,u){var l=f(t[i],t,a);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==(0,r.A)(h)&&o.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,s,u)}),(function(t){n("throw",t,s,u)})):e.resolve(h).then((function(t){c.value=t,s(c)}),(function(t){return n("throw",t,s,u)}))}u(l.arg)}var i;a(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}})}function T(e,n,r){var i=p;return function(o,a){if(i===g)throw Error("Generator is already running");if(i===v){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var u=k(s,r);if(u){if(u===y)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=g;var l=f(e,n,r);if("normal"===l.type){if(i=r.done?v:m,l.arg===y)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=v,r.method="throw",r.arg=l.arg)}}}function k(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,k(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=f(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function O(e){if(e||""===e){var n=e[u];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(o.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError((0,r.A)(e)+" is not iterable")}return x.prototype=w,a(A,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:x,configurable:!0}),x.displayName=h(w,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,h(t,c,"GeneratorFunction")),t.prototype=Object.create(A),t},e.awrap=function(t){return{__await:t}},M(C.prototype),h(C.prototype,l,(function(){return this})),e.AsyncIterator=C,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new C(d(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},M(A),h(A,c,"Generator"),h(A,u,(function(){return this})),h(A,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=O,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),l=o.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),N(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;N(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:O(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}},5544:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var r=n(96369);var i=n(27800),o=n(76562);function a(t,e){return(0,r.A)(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||(0,i.A)(t,e)||(0,o.A)()}},87695:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var r=n(96369),i=n(73893),o=n(27800),a=n(76562);function s(t){return(0,r.A)(t)||(0,i.A)(t)||(0,o.A)(t)||(0,a.A)()}},60436:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var r=n(43145);var i=n(73893),o=n(27800);function a(t){return function(t){if(Array.isArray(t))return(0,r.A)(t)}(t)||(0,i.A)(t)||(0,o.A)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},20816:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});var r=n(82284);function i(t){var e=function(t,e){if("object"!=(0,r.A)(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=(0,r.A)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==(0,r.A)(e)?e:e+""}},82284:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}n.d(e,{A:()=>r})},27800:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});var r=n(43145);function i(t,e){if(t){if("string"==typeof t)return(0,r.A)(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.A)(t,e):void 0}}},60346:(t,e,n)=>{"use strict";n.d(e,{A:()=>_});var r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,o=Math.floor,a="[BigNumber Error] ",s=a+"Number primitive has more than 15 significant digits: ",u=1e14,l=14,c=9007199254740991,h=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],d=1e7,f=1e9;function p(t){var e=0|t;return t>0||t===e?e:e-1}function m(t){for(var e,n,r=1,i=t.length,o=t[0]+"";r<i;){for(e=t[r++]+"",n=l-e.length;n--;e="0"+e);o+=e}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function g(t,e){var n,r,i=t.c,o=e.c,a=t.s,s=e.s,u=t.e,l=e.e;if(!a||!s)return null;if(n=i&&!i[0],r=o&&!o[0],n||r)return n?r?0:-s:a;if(a!=s)return a;if(n=a<0,r=u==l,!i||!o)return r?0:!i^n?1:-1;if(!r)return u>l^n?1:-1;for(s=(u=i.length)<(l=o.length)?u:l,a=0;a<s;a++)if(i[a]!=o[a])return i[a]>o[a]^n?1:-1;return u==l?0:u>l^n?1:-1}function v(t,e,n,r){if(t<e||t>n||t!==o(t))throw Error(a+(r||"Argument")+("number"==typeof t?t<e||t>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function y(t){var e=t.c.length-1;return p(t.e/l)==e&&t.c[e]%2!=0}function b(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function x(t,e,n){var r,i;if(e<0){for(i=n+".";++e;i+=n);t=i+t}else if(++e>(r=t.length)){for(i=n,e-=r;--e;i+=n);t+=i}else e<r&&(t=t.slice(0,e)+"."+t.slice(e));return t}var w=function t(e){var n,w,_,S,E,A,M,C,T,k,I=G.prototype={constructor:G,toString:null,valueOf:null},N=new G(1),P=20,O=4,L=-7,R=21,D=-1e7,z=1e7,F=!1,B=1,U=0,j={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},V="0123456789abcdefghijklmnopqrstuvwxyz",H=!0;function G(t,e){var n,i,a,u,h,d,f,p,m=this;if(!(m instanceof G))return new G(t,e);if(null==e){if(t&&!0===t._isBigNumber)return m.s=t.s,void(!t.c||t.e>z?m.c=m.e=null:t.e<D?m.c=[m.e=0]:(m.e=t.e,m.c=t.c.slice()));if((d="number"==typeof t)&&0*t==0){if(m.s=1/t<0?(t=-t,-1):1,t===~~t){for(u=0,h=t;h>=10;h/=10,u++);return void(u>z?m.c=m.e=null:(m.e=u,m.c=[t]))}p=String(t)}else{if(!r.test(p=String(t)))return _(m,p,d);m.s=45==p.charCodeAt(0)?(p=p.slice(1),-1):1}(u=p.indexOf("."))>-1&&(p=p.replace(".","")),(h=p.search(/e/i))>0?(u<0&&(u=h),u+=+p.slice(h+1),p=p.substring(0,h)):u<0&&(u=p.length)}else{if(v(e,2,V.length,"Base"),10==e&&H)return q(m=new G(t),P+m.e+1,O);if(p=String(t),d="number"==typeof t){if(0*t!=0)return _(m,p,d,e);if(m.s=1/t<0?(p=p.slice(1),-1):1,G.DEBUG&&p.replace(/^0\.0*|\./,"").length>15)throw Error(s+t)}else m.s=45===p.charCodeAt(0)?(p=p.slice(1),-1):1;for(n=V.slice(0,e),u=h=0,f=p.length;h<f;h++)if(n.indexOf(i=p.charAt(h))<0){if("."==i){if(h>u){u=f;continue}}else if(!a&&(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase()))){a=!0,h=-1,u=0;continue}return _(m,String(t),d,e)}d=!1,(u=(p=w(p,e,10,m.s)).indexOf("."))>-1?p=p.replace(".",""):u=p.length}for(h=0;48===p.charCodeAt(h);h++);for(f=p.length;48===p.charCodeAt(--f););if(p=p.slice(h,++f)){if(f-=h,d&&G.DEBUG&&f>15&&(t>c||t!==o(t)))throw Error(s+m.s*t);if((u=u-h-1)>z)m.c=m.e=null;else if(u<D)m.c=[m.e=0];else{if(m.e=u,m.c=[],h=(u+1)%l,u<0&&(h+=l),h<f){for(h&&m.c.push(+p.slice(0,h)),f-=l;h<f;)m.c.push(+p.slice(h,h+=l));h=l-(p=p.slice(h)).length}else h-=f;for(;h--;p+="0");m.c.push(+p)}}else m.c=[m.e=0]}function W(t,e,n,r){var i,o,a,s,u;if(null==n?n=O:v(n,0,8),!t.c)return t.toString();if(i=t.c[0],a=t.e,null==e)u=m(t.c),u=1==r||2==r&&(a<=L||a>=R)?b(u,a):x(u,a,"0");else if(o=(t=q(new G(t),e,n)).e,s=(u=m(t.c)).length,1==r||2==r&&(e<=o||o<=L)){for(;s<e;u+="0",s++);u=b(u,o)}else if(e-=a,u=x(u,o,"0"),o+1>s){if(--e>0)for(u+=".";e--;u+="0");}else if((e+=o-s)>0)for(o+1==s&&(u+=".");e--;u+="0");return t.s<0&&i?"-"+u:u}function X(t,e){for(var n,r,i=1,o=new G(t[0]);i<t.length;i++)(!(r=new G(t[i])).s||(n=g(o,r))===e||0===n&&o.s===e)&&(o=r);return o}function Y(t,e,n){for(var r=1,i=e.length;!e[--i];e.pop());for(i=e[0];i>=10;i/=10,r++);return(n=r+n*l-1)>z?t.c=t.e=null:n<D?t.c=[t.e=0]:(t.e=n,t.c=e),t}function q(t,e,n,r){var a,s,c,d,f,p,m,g=t.c,v=h;if(g){t:{for(a=1,d=g[0];d>=10;d/=10,a++);if((s=e-a)<0)s+=l,c=e,f=g[p=0],m=o(f/v[a-c-1]%10);else if((p=i((s+1)/l))>=g.length){if(!r)break t;for(;g.length<=p;g.push(0));f=m=0,a=1,c=(s%=l)-l+1}else{for(f=d=g[p],a=1;d>=10;d/=10,a++);m=(c=(s%=l)-l+a)<0?0:o(f/v[a-c-1]%10)}if(r=r||e<0||null!=g[p+1]||(c<0?f:f%v[a-c-1]),r=n<4?(m||r)&&(0==n||n==(t.s<0?3:2)):m>5||5==m&&(4==n||r||6==n&&(s>0?c>0?f/v[a-c]:0:g[p-1])%10&1||n==(t.s<0?8:7)),e<1||!g[0])return g.length=0,r?(e-=t.e+1,g[0]=v[(l-e%l)%l],t.e=-e||0):g[0]=t.e=0,t;if(0==s?(g.length=p,d=1,p--):(g.length=p+1,d=v[l-s],g[p]=c>0?o(f/v[a-c]%v[c])*d:0),r)for(;;){if(0==p){for(s=1,c=g[0];c>=10;c/=10,s++);for(c=g[0]+=d,d=1;c>=10;c/=10,d++);s!=d&&(t.e++,g[0]==u&&(g[0]=1));break}if(g[p]+=d,g[p]!=u)break;g[p--]=0,d=1}for(s=g.length;0===g[--s];g.pop());}t.e>z?t.c=t.e=null:t.e<D&&(t.c=[t.e=0])}return t}function $(t){var e,n=t.e;return null===n?t.toString():(e=m(t.c),e=n<=L||n>=R?b(e,n):x(e,n,"0"),t.s<0?"-"+e:e)}return G.clone=t,G.ROUND_UP=0,G.ROUND_DOWN=1,G.ROUND_CEIL=2,G.ROUND_FLOOR=3,G.ROUND_HALF_UP=4,G.ROUND_HALF_DOWN=5,G.ROUND_HALF_EVEN=6,G.ROUND_HALF_CEIL=7,G.ROUND_HALF_FLOOR=8,G.EUCLID=9,G.config=G.set=function(t){var e,n;if(null!=t){if("object"!=typeof t)throw Error(a+"Object expected: "+t);if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(v(n=t[e],0,f,e),P=n),t.hasOwnProperty(e="ROUNDING_MODE")&&(v(n=t[e],0,8,e),O=n),t.hasOwnProperty(e="EXPONENTIAL_AT")&&((n=t[e])&&n.pop?(v(n[0],-f,0,e),v(n[1],0,f,e),L=n[0],R=n[1]):(v(n,-f,f,e),L=-(R=n<0?-n:n))),t.hasOwnProperty(e="RANGE"))if((n=t[e])&&n.pop)v(n[0],-f,-1,e),v(n[1],1,f,e),D=n[0],z=n[1];else{if(v(n,-f,f,e),!n)throw Error(a+e+" cannot be zero: "+n);D=-(z=n<0?-n:n)}if(t.hasOwnProperty(e="CRYPTO")){if((n=t[e])!==!!n)throw Error(a+e+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw F=!n,Error(a+"crypto unavailable");F=n}else F=n}if(t.hasOwnProperty(e="MODULO_MODE")&&(v(n=t[e],0,9,e),B=n),t.hasOwnProperty(e="POW_PRECISION")&&(v(n=t[e],0,f,e),U=n),t.hasOwnProperty(e="FORMAT")){if("object"!=typeof(n=t[e]))throw Error(a+e+" not an object: "+n);j=n}if(t.hasOwnProperty(e="ALPHABET")){if("string"!=typeof(n=t[e])||/^.?$|[+\-.\s]|(.).*\1/.test(n))throw Error(a+e+" invalid: "+n);H="0123456789"==n.slice(0,10),V=n}}return{DECIMAL_PLACES:P,ROUNDING_MODE:O,EXPONENTIAL_AT:[L,R],RANGE:[D,z],CRYPTO:F,MODULO_MODE:B,POW_PRECISION:U,FORMAT:j,ALPHABET:V}},G.isBigNumber=function(t){if(!t||!0!==t._isBigNumber)return!1;if(!G.DEBUG)return!0;var e,n,r=t.c,i=t.e,s=t.s;t:if("[object Array]"=={}.toString.call(r)){if((1===s||-1===s)&&i>=-f&&i<=f&&i===o(i)){if(0===r[0]){if(0===i&&1===r.length)return!0;break t}if((e=(i+1)%l)<1&&(e+=l),String(r[0]).length==e){for(e=0;e<r.length;e++)if((n=r[e])<0||n>=u||n!==o(n))break t;if(0!==n)return!0}}}else if(null===r&&null===i&&(null===s||1===s||-1===s))return!0;throw Error(a+"Invalid BigNumber: "+t)},G.maximum=G.max=function(){return X(arguments,-1)},G.minimum=G.min=function(){return X(arguments,1)},G.random=(S=9007199254740992,E=Math.random()*S&2097151?function(){return o(Math.random()*S)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(t){var e,n,r,s,u,c=0,d=[],p=new G(N);if(null==t?t=P:v(t,0,f),s=i(t/l),F)if(crypto.getRandomValues){for(e=crypto.getRandomValues(new Uint32Array(s*=2));c<s;)(u=131072*e[c]+(e[c+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),e[c]=n[0],e[c+1]=n[1]):(d.push(u%1e14),c+=2);c=s/2}else{if(!crypto.randomBytes)throw F=!1,Error(a+"crypto unavailable");for(e=crypto.randomBytes(s*=7);c<s;)(u=281474976710656*(31&e[c])+1099511627776*e[c+1]+4294967296*e[c+2]+16777216*e[c+3]+(e[c+4]<<16)+(e[c+5]<<8)+e[c+6])>=9e15?crypto.randomBytes(7).copy(e,c):(d.push(u%1e14),c+=7);c=s/7}if(!F)for(;c<s;)(u=E())<9e15&&(d[c++]=u%1e14);for(s=d[--c],t%=l,s&&t&&(u=h[l-t],d[c]=o(s/u)*u);0===d[c];d.pop(),c--);if(c<0)d=[r=0];else{for(r=-1;0===d[0];d.splice(0,1),r-=l);for(c=1,u=d[0];u>=10;u/=10,c++);c<l&&(r-=l-c)}return p.e=r,p.c=d,p}),G.sum=function(){for(var t=1,e=arguments,n=new G(e[0]);t<e.length;)n=n.plus(e[t++]);return n},w=function(){var t="0123456789";function e(t,e,n,r){for(var i,o,a=[0],s=0,u=t.length;s<u;){for(o=a.length;o--;a[o]*=e);for(a[0]+=r.indexOf(t.charAt(s++)),i=0;i<a.length;i++)a[i]>n-1&&(null==a[i+1]&&(a[i+1]=0),a[i+1]+=a[i]/n|0,a[i]%=n)}return a.reverse()}return function(r,i,o,a,s){var u,l,c,h,d,f,p,g,v=r.indexOf("."),y=P,b=O;for(v>=0&&(h=U,U=0,r=r.replace(".",""),f=(g=new G(i)).pow(r.length-v),U=h,g.c=e(x(m(f.c),f.e,"0"),10,o,t),g.e=g.c.length),c=h=(p=e(r,i,o,s?(u=V,t):(u=t,V))).length;0==p[--h];p.pop());if(!p[0])return u.charAt(0);if(v<0?--c:(f.c=p,f.e=c,f.s=a,p=(f=n(f,g,y,b,o)).c,d=f.r,c=f.e),v=p[l=c+y+1],h=o/2,d=d||l<0||null!=p[l+1],d=b<4?(null!=v||d)&&(0==b||b==(f.s<0?3:2)):v>h||v==h&&(4==b||d||6==b&&1&p[l-1]||b==(f.s<0?8:7)),l<1||!p[0])r=d?x(u.charAt(1),-y,u.charAt(0)):u.charAt(0);else{if(p.length=l,d)for(--o;++p[--l]>o;)p[l]=0,l||(++c,p=[1].concat(p));for(h=p.length;!p[--h];);for(v=0,r="";v<=h;r+=u.charAt(p[v++]));r=x(r,c,u.charAt(0))}return r}}(),n=function(){function t(t,e,n){var r,i,o,a,s=0,u=t.length,l=e%d,c=e/d|0;for(t=t.slice();u--;)s=((i=l*(o=t[u]%d)+(r=c*o+(a=t[u]/d|0)*l)%d*d+s)/n|0)+(r/d|0)+c*a,t[u]=i%n;return s&&(t=[s].concat(t)),t}function e(t,e,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(t[i]!=e[i]){o=t[i]>e[i]?1:-1;break}return o}function n(t,e,n,r){for(var i=0;n--;)t[n]-=i,i=t[n]<e[n]?1:0,t[n]=i*r+t[n]-e[n];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(r,i,a,s,c){var h,d,f,m,g,v,y,b,x,w,_,S,E,A,M,C,T,k=r.s==i.s?1:-1,I=r.c,N=i.c;if(!(I&&I[0]&&N&&N[0]))return new G(r.s&&i.s&&(I?!N||I[0]!=N[0]:N)?I&&0==I[0]||!N?0*k:k/0:NaN);for(x=(b=new G(k)).c=[],k=a+(d=r.e-i.e)+1,c||(c=u,d=p(r.e/l)-p(i.e/l),k=k/l|0),f=0;N[f]==(I[f]||0);f++);if(N[f]>(I[f]||0)&&d--,k<0)x.push(1),m=!0;else{for(A=I.length,C=N.length,f=0,k+=2,(g=o(c/(N[0]+1)))>1&&(N=t(N,g,c),I=t(I,g,c),C=N.length,A=I.length),E=C,_=(w=I.slice(0,C)).length;_<C;w[_++]=0);T=N.slice(),T=[0].concat(T),M=N[0],N[1]>=c/2&&M++;do{if(g=0,(h=e(N,w,C,_))<0){if(S=w[0],C!=_&&(S=S*c+(w[1]||0)),(g=o(S/M))>1)for(g>=c&&(g=c-1),y=(v=t(N,g,c)).length,_=w.length;1==e(v,w,y,_);)g--,n(v,C<y?T:N,y,c),y=v.length,h=1;else 0==g&&(h=g=1),y=(v=N.slice()).length;if(y<_&&(v=[0].concat(v)),n(w,v,_,c),_=w.length,-1==h)for(;e(N,w,C,_)<1;)g++,n(w,C<_?T:N,_,c),_=w.length}else 0===h&&(g++,w=[0]);x[f++]=g,w[0]?w[_++]=I[E]||0:(w=[I[E]],_=1)}while((E++<A||null!=w[0])&&k--);m=null!=w[0],x[0]||x.splice(0,1)}if(c==u){for(f=1,k=x[0];k>=10;k/=10,f++);q(b,a+(b.e=f+d*l-1)+1,s,m)}else b.e=d,b.r=+m;return b}}(),A=/^(-?)0([xbo])(?=\w[\w.]*$)/i,M=/^([^.]+)\.$/,C=/^\.([^.]+)$/,T=/^-?(Infinity|NaN)$/,k=/^\s*\+(?=[\w.])|^\s+|\s+$/g,_=function(t,e,n,r){var i,o=n?e:e.replace(k,"");if(T.test(o))t.s=isNaN(o)?null:o<0?-1:1;else{if(!n&&(o=o.replace(A,(function(t,e,n){return i="x"==(n=n.toLowerCase())?16:"b"==n?2:8,r&&r!=i?t:e})),r&&(i=r,o=o.replace(M,"$1").replace(C,"0.$1")),e!=o))return new G(o,i);if(G.DEBUG)throw Error(a+"Not a"+(r?" base "+r:"")+" number: "+e);t.s=null}t.c=t.e=null},I.absoluteValue=I.abs=function(){var t=new G(this);return t.s<0&&(t.s=1),t},I.comparedTo=function(t,e){return g(this,new G(t,e))},I.decimalPlaces=I.dp=function(t,e){var n,r,i,o=this;if(null!=t)return v(t,0,f),null==e?e=O:v(e,0,8),q(new G(o),t+o.e+1,e);if(!(n=o.c))return null;if(r=((i=n.length-1)-p(this.e/l))*l,i=n[i])for(;i%10==0;i/=10,r--);return r<0&&(r=0),r},I.dividedBy=I.div=function(t,e){return n(this,new G(t,e),P,O)},I.dividedToIntegerBy=I.idiv=function(t,e){return n(this,new G(t,e),0,1)},I.exponentiatedBy=I.pow=function(t,e){var n,r,s,u,c,h,d,f,p=this;if((t=new G(t)).c&&!t.isInteger())throw Error(a+"Exponent not an integer: "+$(t));if(null!=e&&(e=new G(e)),c=t.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!t.c||!t.c[0])return f=new G(Math.pow(+$(p),c?t.s*(2-y(t)):+$(t))),e?f.mod(e):f;if(h=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new G(NaN);(r=!h&&p.isInteger()&&e.isInteger())&&(p=p.mod(e))}else{if(t.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||c&&p.c[1]>=24e7:p.c[0]<8e13||c&&p.c[0]<=9999975e7)))return u=p.s<0&&y(t)?-0:0,p.e>-1&&(u=1/u),new G(h?1/u:u);U&&(u=i(U/l+2))}for(c?(n=new G(.5),h&&(t.s=1),d=y(t)):d=(s=Math.abs(+$(t)))%2,f=new G(N);;){if(d){if(!(f=f.times(p)).c)break;u?f.c.length>u&&(f.c.length=u):r&&(f=f.mod(e))}if(s){if(0===(s=o(s/2)))break;d=s%2}else if(q(t=t.times(n),t.e+1,1),t.e>14)d=y(t);else{if(0===(s=+$(t)))break;d=s%2}p=p.times(p),u?p.c&&p.c.length>u&&(p.c.length=u):r&&(p=p.mod(e))}return r?f:(h&&(f=N.div(f)),e?f.mod(e):u?q(f,U,O,undefined):f)},I.integerValue=function(t){var e=new G(this);return null==t?t=O:v(t,0,8),q(e,e.e+1,t)},I.isEqualTo=I.eq=function(t,e){return 0===g(this,new G(t,e))},I.isFinite=function(){return!!this.c},I.isGreaterThan=I.gt=function(t,e){return g(this,new G(t,e))>0},I.isGreaterThanOrEqualTo=I.gte=function(t,e){return 1===(e=g(this,new G(t,e)))||0===e},I.isInteger=function(){return!!this.c&&p(this.e/l)>this.c.length-2},I.isLessThan=I.lt=function(t,e){return g(this,new G(t,e))<0},I.isLessThanOrEqualTo=I.lte=function(t,e){return-1===(e=g(this,new G(t,e)))||0===e},I.isNaN=function(){return!this.s},I.isNegative=function(){return this.s<0},I.isPositive=function(){return this.s>0},I.isZero=function(){return!!this.c&&0==this.c[0]},I.minus=function(t,e){var n,r,i,o,a=this,s=a.s;if(e=(t=new G(t,e)).s,!s||!e)return new G(NaN);if(s!=e)return t.s=-e,a.plus(t);var c=a.e/l,h=t.e/l,d=a.c,f=t.c;if(!c||!h){if(!d||!f)return d?(t.s=-e,t):new G(f?a:NaN);if(!d[0]||!f[0])return f[0]?(t.s=-e,t):new G(d[0]?a:3==O?-0:0)}if(c=p(c),h=p(h),d=d.slice(),s=c-h){for((o=s<0)?(s=-s,i=d):(h=c,i=f),i.reverse(),e=s;e--;i.push(0));i.reverse()}else for(r=(o=(s=d.length)<(e=f.length))?s:e,s=e=0;e<r;e++)if(d[e]!=f[e]){o=d[e]<f[e];break}if(o&&(i=d,d=f,f=i,t.s=-t.s),(e=(r=f.length)-(n=d.length))>0)for(;e--;d[n++]=0);for(e=u-1;r>s;){if(d[--r]<f[r]){for(n=r;n&&!d[--n];d[n]=e);--d[n],d[r]+=u}d[r]-=f[r]}for(;0==d[0];d.splice(0,1),--h);return d[0]?Y(t,d,h):(t.s=3==O?-1:1,t.c=[t.e=0],t)},I.modulo=I.mod=function(t,e){var r,i,o=this;return t=new G(t,e),!o.c||!t.s||t.c&&!t.c[0]?new G(NaN):!t.c||o.c&&!o.c[0]?new G(o):(9==B?(i=t.s,t.s=1,r=n(o,t,0,3),t.s=i,r.s*=i):r=n(o,t,0,B),(t=o.minus(r.times(t))).c[0]||1!=B||(t.s=o.s),t)},I.multipliedBy=I.times=function(t,e){var n,r,i,o,a,s,c,h,f,m,g,v,y,b,x,w=this,_=w.c,S=(t=new G(t,e)).c;if(!(_&&S&&_[0]&&S[0]))return!w.s||!t.s||_&&!_[0]&&!S||S&&!S[0]&&!_?t.c=t.e=t.s=null:(t.s*=w.s,_&&S?(t.c=[0],t.e=0):t.c=t.e=null),t;for(r=p(w.e/l)+p(t.e/l),t.s*=w.s,(c=_.length)<(m=S.length)&&(y=_,_=S,S=y,i=c,c=m,m=i),i=c+m,y=[];i--;y.push(0));for(b=u,x=d,i=m;--i>=0;){for(n=0,g=S[i]%x,v=S[i]/x|0,o=i+(a=c);o>i;)n=((h=g*(h=_[--a]%x)+(s=v*h+(f=_[a]/x|0)*g)%x*x+y[o]+n)/b|0)+(s/x|0)+v*f,y[o--]=h%b;y[o]=n}return n?++r:y.splice(0,1),Y(t,y,r)},I.negated=function(){var t=new G(this);return t.s=-t.s||null,t},I.plus=function(t,e){var n,r=this,i=r.s;if(e=(t=new G(t,e)).s,!i||!e)return new G(NaN);if(i!=e)return t.s=-e,r.minus(t);var o=r.e/l,a=t.e/l,s=r.c,c=t.c;if(!o||!a){if(!s||!c)return new G(i/0);if(!s[0]||!c[0])return c[0]?t:new G(s[0]?r:0*i)}if(o=p(o),a=p(a),s=s.slice(),i=o-a){for(i>0?(a=o,n=c):(i=-i,n=s),n.reverse();i--;n.push(0));n.reverse()}for((i=s.length)-(e=c.length)<0&&(n=c,c=s,s=n,e=i),i=0;e;)i=(s[--e]=s[e]+c[e]+i)/u|0,s[e]=u===s[e]?0:s[e]%u;return i&&(s=[i].concat(s),++a),Y(t,s,a)},I.precision=I.sd=function(t,e){var n,r,i,o=this;if(null!=t&&t!==!!t)return v(t,1,f),null==e?e=O:v(e,0,8),q(new G(o),t,e);if(!(n=o.c))return null;if(r=(i=n.length-1)*l+1,i=n[i]){for(;i%10==0;i/=10,r--);for(i=n[0];i>=10;i/=10,r++);}return t&&o.e+1>r&&(r=o.e+1),r},I.shiftedBy=function(t){return v(t,-9007199254740991,c),this.times("1e"+t)},I.squareRoot=I.sqrt=function(){var t,e,r,i,o,a=this,s=a.c,u=a.s,l=a.e,c=P+4,h=new G("0.5");if(1!==u||!s||!s[0])return new G(!u||u<0&&(!s||s[0])?NaN:s?a:1/0);if(0==(u=Math.sqrt(+$(a)))||u==1/0?(((e=m(s)).length+l)%2==0&&(e+="0"),u=Math.sqrt(+e),l=p((l+1)/2)-(l<0||l%2),r=new G(e=u==1/0?"5e"+l:(e=u.toExponential()).slice(0,e.indexOf("e")+1)+l)):r=new G(u+""),r.c[0])for((u=(l=r.e)+c)<3&&(u=0);;)if(o=r,r=h.times(o.plus(n(a,o,c,1))),m(o.c).slice(0,u)===(e=m(r.c)).slice(0,u)){if(r.e<l&&--u,"9999"!=(e=e.slice(u-3,u+1))&&(i||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(q(r,r.e+P+2,1),t=!r.times(r).eq(a));break}if(!i&&(q(o,o.e+P+2,0),o.times(o).eq(a))){r=o;break}c+=4,u+=4,i=1}return q(r,r.e+P+1,O,t)},I.toExponential=function(t,e){return null!=t&&(v(t,0,f),t++),W(this,t,e,1)},I.toFixed=function(t,e){return null!=t&&(v(t,0,f),t=t+this.e+1),W(this,t,e)},I.toFormat=function(t,e,n){var r,i=this;if(null==n)null!=t&&e&&"object"==typeof e?(n=e,e=null):t&&"object"==typeof t?(n=t,t=e=null):n=j;else if("object"!=typeof n)throw Error(a+"Argument not an object: "+n);if(r=i.toFixed(t,e),i.c){var o,s=r.split("."),u=+n.groupSize,l=+n.secondaryGroupSize,c=n.groupSeparator||"",h=s[0],d=s[1],f=i.s<0,p=f?h.slice(1):h,m=p.length;if(l&&(o=u,u=l,l=o,m-=o),u>0&&m>0){for(o=m%u||u,h=p.substr(0,o);o<m;o+=u)h+=c+p.substr(o,u);l>0&&(h+=c+p.slice(o)),f&&(h="-"+h)}r=d?h+(n.decimalSeparator||"")+((l=+n.fractionGroupSize)?d.replace(new RegExp("\\d{"+l+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):d):h}return(n.prefix||"")+r+(n.suffix||"")},I.toFraction=function(t){var e,r,i,o,s,u,c,d,f,p,g,v,y=this,b=y.c;if(null!=t&&(!(c=new G(t)).isInteger()&&(c.c||1!==c.s)||c.lt(N)))throw Error(a+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+$(c));if(!b)return new G(y);for(e=new G(N),f=r=new G(N),i=d=new G(N),v=m(b),s=e.e=v.length-y.e-1,e.c[0]=h[(u=s%l)<0?l+u:u],t=!t||c.comparedTo(e)>0?s>0?e:f:c,u=z,z=1/0,c=new G(v),d.c[0]=0;p=n(c,e,0,1),1!=(o=r.plus(p.times(i))).comparedTo(t);)r=i,i=o,f=d.plus(p.times(o=f)),d=o,e=c.minus(p.times(o=e)),c=o;return o=n(t.minus(r),i,0,1),d=d.plus(o.times(f)),r=r.plus(o.times(i)),d.s=f.s=y.s,g=n(f,i,s*=2,O).minus(y).abs().comparedTo(n(d,r,s,O).minus(y).abs())<1?[f,i]:[d,r],z=u,g},I.toNumber=function(){return+$(this)},I.toPrecision=function(t,e){return null!=t&&v(t,1,f),W(this,t,e,2)},I.toString=function(t){var e,n=this,r=n.s,i=n.e;return null===i?r?(e="Infinity",r<0&&(e="-"+e)):e="NaN":(null==t?e=i<=L||i>=R?b(m(n.c),i):x(m(n.c),i,"0"):10===t&&H?e=x(m((n=q(new G(n),P+i+1,O)).c),n.e,"0"):(v(t,2,V.length,"Base"),e=w(x(m(n.c),i,"0"),10,t,r,!0)),r<0&&n.c[0]&&(e="-"+e)),e},I.valueOf=I.toJSON=function(){return $(this)},I._isBigNumber=!0,I[Symbol.toStringTag]="BigNumber",I[Symbol.for("nodejs.util.inspect.custom")]=I.valueOf,null!=e&&G.set(e),G}();const _=w},83656:(t,e,n)=>{"use strict";n.d(e,{Ay:()=>_t});var r=1e-6,i=1e-12,o=Math.PI,a=o/2,s=o/4,u=2*o,l=180/o,c=o/180,h=Math.abs,d=Math.atan,f=Math.atan2,p=Math.cos,m=(Math.ceil,Math.exp),g=(Math.floor,Math.hypot,Math.log),v=(Math.pow,Math.sin),y=Math.sign||function(t){return t>0?1:t<0?-1:0},b=Math.sqrt,x=Math.tan;function w(t){return t>1?a:t<-1?-a:Math.asin(t)}function _(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function S(t,e){return h(t)>o&&(t-=Math.round(t/u)*u),[t,e]}function E(t,e,n){return(t%=u)?e||n?_(M(t),C(e,n)):M(t):e||n?C(e,n):S}function A(t){return function(e,n){return h(e+=t)>o&&(e-=Math.round(e/u)*u),[e,n]}}function M(t){var e=A(t);return e.invert=A(-t),e}function C(t,e){var n=p(t),r=v(t),i=p(e),o=v(e);function a(t,e){var a=p(e),s=p(t)*a,u=v(t)*a,l=v(e),c=l*n+s*r;return[f(u*i-c*o,s*n-l*r),w(c*i+u*o)]}return a.invert=function(t,e){var a=p(e),s=p(t)*a,u=v(t)*a,l=v(e),c=l*i-u*o;return[f(u*i+l*o,s*n+c*r),w(c*n-s*r)]},a}function T(){}function k(){var t,e=[];return{point:function(e,n,r){t.push([e,n,r])},lineStart:function(){e.push(t=[])},lineEnd:T,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function I(t,e){return h(t[0]-e[0])<r&&h(t[1]-e[1])<r}function N(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function P(t,e,n,i,o){var a,s,u=[],l=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],s=t[e];if(I(i,s)){if(!i[2]&&!s[2]){for(o.lineStart(),a=0;a<e;++a)o.point((i=t[a])[0],i[1]);return void o.lineEnd()}s[0]+=2*r}u.push(n=new N(i,t,null,!0)),l.push(n.o=new N(i,null,n,!1)),u.push(n=new N(s,t,null,!1)),l.push(n.o=new N(s,null,n,!0))}})),u.length){for(l.sort(e),O(u),O(l),a=0,s=l.length;a<s;++a)l[a].e=n=!n;for(var c,h,d=u[0];;){for(var f=d,p=!0;f.v;)if((f=f.n)===d)return;c=f.z,o.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(a=0,s=c.length;a<s;++a)o.point((h=c[a])[0],h[1]);else i(f.x,f.n.x,1,o);f=f.n}else{if(p)for(c=f.p.z,a=c.length-1;a>=0;--a)o.point((h=c[a])[0],h[1]);else i(f.x,f.p.x,-1,o);f=f.p}c=(f=f.o).z,p=!p}while(!f.v);o.lineEnd()}}}function O(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}S.invert=S;class L{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const i=e[r],o=t+i,a=Math.abs(t)<Math.abs(i)?t-(o-i):i-(o-t);a&&(e[n++]=a),t=o}return e[n]=t,this._n=n+1,this}valueOf(){const t=this._partials;let e,n,r,i=this._n,o=0;if(i>0){for(o=t[--i];i>0&&(e=o,n=t[--i],o=e+n,r=n-(o-e),!r););i>0&&(r<0&&t[i-1]<0||r>0&&t[i-1]>0)&&(n=2*r,e=o+n,n==e-o&&(o=e))}return o}}function R(t){return[f(t[1],t[0]),w(t[2])]}function D(t){var e=t[0],n=t[1],r=p(n);return[r*p(e),r*v(e),v(n)]}function z(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function F(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function B(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function U(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function j(t){var e=b(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function V(t){return h(t[0])<=o?t[0]:y(t[0])*((h(t[0])+o)%u-o)}function H(t){return Array.from(function*(t){for(const e of t)yield*e}(t))}function G(t,e,n,l){return function(c){var h,d,m,g=e(c),y=k(),b=e(y),x=!1,_={point:S,lineStart:A,lineEnd:M,polygonStart:function(){_.point=C,_.lineStart=T,_.lineEnd=I,d=[],h=[]},polygonEnd:function(){_.point=S,_.lineStart=A,_.lineEnd=M,d=H(d);var t=function(t,e){var n=V(e),l=e[1],c=v(l),h=[v(n),-p(n),0],d=0,m=0,g=new L;1===c?l=a+r:-1===c&&(l=-a-r);for(var y=0,b=t.length;y<b;++y)if(_=(x=t[y]).length)for(var x,_,S=x[_-1],E=V(S),A=S[1]/2+s,M=v(A),C=p(A),T=0;T<_;++T,E=I,M=P,C=O,S=k){var k=x[T],I=V(k),N=k[1]/2+s,P=v(N),O=p(N),R=I-E,z=R>=0?1:-1,B=z*R,U=B>o,H=M*P;if(g.add(f(H*z*v(B),C*O+H*p(B))),d+=U?R+z*u:R,U^E>=n^I>=n){var G=F(D(S),D(k));j(G);var W=F(h,G);j(W);var X=(U^R>=0?-1:1)*w(W[2]);(l>X||l===X&&(G[0]||G[1]))&&(m+=U^R>=0?1:-1)}}return(d<-r||d<r&&g<-i)^1&m}(h,l);d.length?(x||(c.polygonStart(),x=!0),P(d,X,t,n,c)):t&&(x||(c.polygonStart(),x=!0),c.lineStart(),n(null,null,1,c),c.lineEnd()),x&&(c.polygonEnd(),x=!1),d=h=null},sphere:function(){c.polygonStart(),c.lineStart(),n(null,null,1,c),c.lineEnd(),c.polygonEnd()}};function S(e,n){t(e,n)&&c.point(e,n)}function E(t,e){g.point(t,e)}function A(){_.point=E,g.lineStart()}function M(){_.point=S,g.lineEnd()}function C(t,e){m.push([t,e]),b.point(t,e)}function T(){b.lineStart(),m=[]}function I(){C(m[0][0],m[0][1]),b.lineEnd();var t,e,n,r,i=b.clean(),o=y.result(),a=o.length;if(m.pop(),h.push(m),m=null,a)if(1&i){if((e=(n=o[0]).length-1)>0){for(x||(c.polygonStart(),x=!0),c.lineStart(),t=0;t<e;++t)c.point((r=n[t])[0],r[1]);c.lineEnd()}}else a>1&&2&i&&o.push(o.pop().concat(o.shift())),d.push(o.filter(W))}return _}}function W(t){return t.length>1}function X(t,e){return((t=t.x)[0]<0?t[1]-a-r:a-t[1])-((e=e.x)[0]<0?e[1]-a-r:a-e[1])}const Y=G((function(){return!0}),(function(t){var e,n=NaN,i=NaN,s=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(u,l){var c=u>0?o:-o,f=h(u-n);h(f-o)<r?(t.point(n,i=(i+l)/2>0?a:-a),t.point(s,i),t.lineEnd(),t.lineStart(),t.point(c,i),t.point(u,i),e=0):s!==c&&f>=o&&(h(n-s)<r&&(n-=s*r),h(u-c)<r&&(u-=c*r),i=function(t,e,n,i){var o,a,s=v(t-n);return h(s)>r?d((v(e)*(a=p(i))*v(n)-v(i)*(o=p(e))*v(t))/(o*a*s)):(e+i)/2}(n,i,u,l),t.point(s,i),t.lineEnd(),t.lineStart(),t.point(c,i),e=0),t.point(n=u,i=l),s=c},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}}),(function(t,e,n,i){var s;if(null==t)s=n*a,i.point(-o,s),i.point(0,s),i.point(o,s),i.point(o,0),i.point(o,-s),i.point(0,-s),i.point(-o,-s),i.point(-o,0),i.point(-o,s);else if(h(t[0]-e[0])>r){var u=t[0]<e[0]?o:-o;s=n*u/2,i.point(-u,s),i.point(0,s),i.point(u,s)}else i.point(e[0],e[1])}),[-o,-a]);function q(t,e,n,r,i,o){if(n){var a=p(e),s=v(e),l=r*n;null==i?(i=e+r*u,o=e-l/2):(i=$(a,i),o=$(a,o),(r>0?i<o:i>o)&&(i+=r*u));for(var c,h=i;r>0?h>o:h<o;h-=l)c=R([a,-s*p(h),-s*v(h)]),t.point(c[0],c[1])}}function $(t,e){(e=D(e))[0]-=t,j(e);var n,i=(n=-e[1])>1?0:n<-1?o:Math.acos(n);return((-e[2]<0?-i:i)+u-r)%u}var K=1e9,Z=-K;function Q(t,e,n,i){function o(r,o){return t<=r&&r<=n&&e<=o&&o<=i}function a(r,o,a,u){var c=0,h=0;if(null==r||(c=s(r,a))!==(h=s(o,a))||l(r,o)<0^a>0)do{u.point(0===c||3===c?t:n,c>1?i:e)}while((c=(c+a+4)%4)!==h);else u.point(o[0],o[1])}function s(i,o){return h(i[0]-t)<r?o>0?0:3:h(i[0]-n)<r?o>0?2:1:h(i[1]-e)<r?o>0?1:0:o>0?3:2}function u(t,e){return l(t.x,e.x)}function l(t,e){var n=s(t,1),r=s(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(r){var s,l,c,h,d,f,p,m,g,v,y,b=r,x=k(),w={point:_,lineStart:function(){w.point=S,l&&l.push(c=[]);v=!0,g=!1,p=m=NaN},lineEnd:function(){s&&(S(h,d),f&&g&&x.rejoin(),s.push(x.result()));w.point=_,g&&b.lineEnd()},polygonStart:function(){b=x,s=[],l=[],y=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,r=l.length;n<r;++n)for(var o,a,s=l[n],u=1,c=s.length,h=s[0],d=h[0],f=h[1];u<c;++u)o=d,a=f,d=(h=s[u])[0],f=h[1],a<=i?f>i&&(d-o)*(i-a)>(f-a)*(t-o)&&++e:f<=i&&(d-o)*(i-a)<(f-a)*(t-o)&&--e;return e}(),n=y&&e,o=(s=H(s)).length;(n||o)&&(r.polygonStart(),n&&(r.lineStart(),a(null,null,1,r),r.lineEnd()),o&&P(s,u,e,a,r),r.polygonEnd());b=r,s=l=c=null}};function _(t,e){o(t,e)&&b.point(t,e)}function S(r,a){var s=o(r,a);if(l&&c.push([r,a]),v)h=r,d=a,f=s,v=!1,s&&(b.lineStart(),b.point(r,a));else if(s&&g)b.point(r,a);else{var u=[p=Math.max(Z,Math.min(K,p)),m=Math.max(Z,Math.min(K,m))],x=[r=Math.max(Z,Math.min(K,r)),a=Math.max(Z,Math.min(K,a))];!function(t,e,n,r,i,o){var a,s=t[0],u=t[1],l=0,c=1,h=e[0]-s,d=e[1]-u;if(a=n-s,h||!(a>0)){if(a/=h,h<0){if(a<l)return;a<c&&(c=a)}else if(h>0){if(a>c)return;a>l&&(l=a)}if(a=i-s,h||!(a<0)){if(a/=h,h<0){if(a>c)return;a>l&&(l=a)}else if(h>0){if(a<l)return;a<c&&(c=a)}if(a=r-u,d||!(a>0)){if(a/=d,d<0){if(a<l)return;a<c&&(c=a)}else if(d>0){if(a>c)return;a>l&&(l=a)}if(a=o-u,d||!(a<0)){if(a/=d,d<0){if(a>c)return;a>l&&(l=a)}else if(d>0){if(a<l)return;a<c&&(c=a)}return l>0&&(t[0]=s+l*h,t[1]=u+l*d),c<1&&(e[0]=s+c*h,e[1]=u+c*d),!0}}}}}(u,x,t,e,n,i)?s&&(b.lineStart(),b.point(r,a),y=!1):(g||(b.lineStart(),b.point(u[0],u[1])),b.point(x[0],x[1]),s||b.lineEnd(),y=!1)}p=r,m=a,g=s}return w}}const J=t=>t;function tt(t){return function(e){var n=new et;for(var r in t)n[r]=t[r];return n.stream=e,n}}function et(){}function nt(t,e){t&&it.hasOwnProperty(t.type)&&it[t.type](t,e)}et.prototype={constructor:et,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var rt={Feature:function(t,e){nt(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)nt(n[r].geometry,e)}},it={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){ot(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)ot(n[r],e,0)},Polygon:function(t,e){at(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)at(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)nt(n[r],e)}};function ot(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function at(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)ot(t[n],e,1);e.polygonEnd()}var st=1/0,ut=st,lt=-st,ct=lt,ht={point:function(t,e){t<st&&(st=t);t>lt&&(lt=t);e<ut&&(ut=e);e>ct&&(ct=e)},lineStart:T,lineEnd:T,polygonStart:T,polygonEnd:T,result:function(){var t=[[st,ut],[lt,ct]];return lt=ct=-(ut=st=1/0),t}};const dt=ht;function ft(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),function(t,e){t&&rt.hasOwnProperty(t.type)?rt[t.type](t,e):nt(t,e)}(n,t.stream(dt)),e(dt.result()),null!=r&&t.clipExtent(r),t}function pt(t,e,n){return ft(t,(function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+e[0][0]+(r-o*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(i-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([a,s])}),n)}var mt=16,gt=p(30*c);function vt(t,e){return+e?function(t,e){function n(i,o,a,s,u,l,c,d,p,m,g,v,y,x){var _=c-i,S=d-o,E=_*_+S*S;if(E>4*e&&y--){var A=s+m,M=u+g,C=l+v,T=b(A*A+M*M+C*C),k=w(C/=T),I=h(h(C)-1)<r||h(a-p)<r?(a+p)/2:f(M,A),N=t(I,k),P=N[0],O=N[1],L=P-i,R=O-o,D=S*L-_*R;(D*D/E>e||h((_*L+S*R)/E-.5)>.3||s*m+u*g+l*v<gt)&&(n(i,o,a,s,u,l,P,O,I,A/=T,M/=T,C,y,x),x.point(P,O),n(P,O,I,A,M,C,c,d,p,m,g,v,y,x))}}return function(e){var r,i,o,a,s,u,l,c,h,d,f,p,m={point:g,lineStart:v,lineEnd:b,polygonStart:function(){e.polygonStart(),m.lineStart=x},polygonEnd:function(){e.polygonEnd(),m.lineStart=v}};function g(n,r){n=t(n,r),e.point(n[0],n[1])}function v(){c=NaN,m.point=y,e.lineStart()}function y(r,i){var o=D([r,i]),a=t(r,i);n(c,h,l,d,f,p,c=a[0],h=a[1],l=r,d=o[0],f=o[1],p=o[2],mt,e),e.point(c,h)}function b(){m.point=g,e.lineEnd()}function x(){v(),m.point=w,m.lineEnd=_}function w(t,e){y(r=t,e),i=c,o=h,a=d,s=f,u=p,m.point=y}function _(){n(c,h,l,d,f,p,i,o,r,a,s,u,mt,e),m.lineEnd=b,b()}return m}}(t,e):function(t){return tt({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var yt=tt({point:function(t,e){this.stream.point(t*c,e*c)}});function bt(t,e,n,r,i,o){if(!o)return function(t,e,n,r,i){function o(o,a){return[e+t*(o*=r),n-t*(a*=i)]}return o.invert=function(o,a){return[(o-e)/t*r,(n-a)/t*i]},o}(t,e,n,r,i);var a=p(o),s=v(o),u=a*t,l=s*t,c=a/t,h=s/t,d=(s*n-a*e)/t,f=(s*e+a*n)/t;function m(t,o){return[u*(t*=r)-l*(o*=i)+e,n-l*t-u*o]}return m.invert=function(t,e){return[r*(c*t-h*e+d),i*(f-h*t-c*e)]},m}function xt(t){return function(t){var e,n,i,a,s,u,d,f,m,g,v=150,y=480,x=250,w=0,S=0,A=0,M=0,C=0,T=0,k=1,N=1,P=null,O=Y,L=null,j=J,V=.5;function H(t){return f(t[0]*c,t[1]*c)}function W(t){return(t=f.invert(t[0],t[1]))&&[t[0]*l,t[1]*l]}function X(){var t=bt(v,0,0,k,N,T).apply(null,e(w,S)),r=bt(v,y-t[0],x-t[1],k,N,T);return n=E(A,M,C),d=_(e,r),f=_(n,d),u=vt(d,V),$()}function $(){return m=g=null,H}return H.stream=function(t){return m&&g===t?m:m=yt(function(t){return tt({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(O(u(j(g=t)))))},H.preclip=function(t){return arguments.length?(O=t,P=void 0,$()):O},H.postclip=function(t){return arguments.length?(j=t,L=i=a=s=null,$()):j},H.clipAngle=function(t){return arguments.length?(O=+t?function(t){var e=p(t),n=2*c,i=e>0,a=h(e)>r;function s(t,n){return p(t)*p(n)>e}function u(t,n,i){var a=[1,0,0],s=F(D(t),D(n)),u=z(s,s),l=s[0],c=u-l*l;if(!c)return!i&&t;var d=e*u/c,f=-e*l/c,p=F(a,s),m=U(a,d);B(m,U(s,f));var g=p,v=z(m,g),y=z(g,g),x=v*v-y*(z(m,m)-1);if(!(x<0)){var w=b(x),_=U(g,(-v-w)/y);if(B(_,m),_=R(_),!i)return _;var S,E=t[0],A=n[0],M=t[1],C=n[1];A<E&&(S=E,E=A,A=S);var T=A-E,k=h(T-o)<r;if(!k&&C<M&&(S=M,M=C,C=S),k||T<r?k?M+C>0^_[1]<(h(_[0]-E)<r?M:C):M<=_[1]&&_[1]<=C:T>o^(E<=_[0]&&_[0]<=A)){var I=U(g,(-v+w)/y);return B(I,m),[_,R(I)]}}}function l(e,n){var r=i?t:o-t,a=0;return e<-r?a|=1:e>r&&(a|=2),n<-r?a|=4:n>r&&(a|=8),a}return G(s,(function(t){var e,n,r,c,h;return{lineStart:function(){c=r=!1,h=1},point:function(d,f){var p,m=[d,f],g=s(d,f),v=i?g?0:l(d,f):g?l(d+(d<0?o:-o),f):0;if(!e&&(c=r=g)&&t.lineStart(),g!==r&&(!(p=u(e,m))||I(e,p)||I(m,p))&&(m[2]=1),g!==r)h=0,g?(t.lineStart(),p=u(m,e),t.point(p[0],p[1])):(p=u(e,m),t.point(p[0],p[1],2),t.lineEnd()),e=p;else if(a&&e&&i^g){var y;v&n||!(y=u(m,e,!0))||(h=0,i?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1],3)))}!g||e&&I(e,m)||t.point(m[0],m[1]),e=m,r=g,n=v},lineEnd:function(){r&&t.lineEnd(),e=null},clean:function(){return h|(c&&r)<<1}}}),(function(e,r,i,o){q(o,t,n,i,e,r)}),i?[0,-t]:[-o,t-o])}(P=t*c):(P=null,Y),$()):P*l},H.clipExtent=function(t){return arguments.length?(j=null==t?(L=i=a=s=null,J):Q(L=+t[0][0],i=+t[0][1],a=+t[1][0],s=+t[1][1]),$()):null==L?null:[[L,i],[a,s]]},H.scale=function(t){return arguments.length?(v=+t,X()):v},H.translate=function(t){return arguments.length?(y=+t[0],x=+t[1],X()):[y,x]},H.center=function(t){return arguments.length?(w=t[0]%360*c,S=t[1]%360*c,X()):[w*l,S*l]},H.rotate=function(t){return arguments.length?(A=t[0]%360*c,M=t[1]%360*c,C=t.length>2?t[2]%360*c:0,X()):[A*l,M*l,C*l]},H.angle=function(t){return arguments.length?(T=t%360*c,X()):T*l},H.reflectX=function(t){return arguments.length?(k=t?-1:1,X()):k<0},H.reflectY=function(t){return arguments.length?(N=t?-1:1,X()):N<0},H.precision=function(t){return arguments.length?(u=vt(d,V=t*t),$()):b(V)},H.fitExtent=function(t,e){return pt(H,t,e)},H.fitSize=function(t,e){return function(t,e,n){return pt(t,[[0,0],e],n)}(H,t,e)},H.fitWidth=function(t,e){return function(t,e,n){return ft(t,(function(n){var r=+e,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];t.scale(150*i).translate([o,a])}),n)}(H,t,e)},H.fitHeight=function(t,e){return function(t,e,n){return ft(t,(function(n){var r=+e,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([o,a])}),n)}(H,t,e)},function(){return e=t.apply(this,arguments),H.invert=e.invert&&W,X()}}((function(){return t}))()}function wt(t,e){return[t,g(x((a+e)/2))]}function _t(){return function(t){var e,n,r,i=xt(t),a=i.center,s=i.scale,u=i.translate,h=i.clipExtent,d=null;function f(){var a=o*s(),u=i(function(t){function e(e){return(e=t(e[0]*c,e[1]*c))[0]*=l,e[1]*=l,e}return t=E(t[0]*c,t[1]*c,t.length>2?t[2]*c:0),e.invert=function(e){return(e=t.invert(e[0]*c,e[1]*c))[0]*=l,e[1]*=l,e},e}(i.rotate()).invert([0,0]));return h(null==d?[[u[0]-a,u[1]-a],[u[0]+a,u[1]+a]]:t===wt?[[Math.max(u[0]-a,d),e],[Math.min(u[0]+a,n),r]]:[[d,Math.max(u[1]-a,e)],[n,Math.min(u[1]+a,r)]])}return i.scale=function(t){return arguments.length?(s(t),f()):s()},i.translate=function(t){return arguments.length?(u(t),f()):u()},i.center=function(t){return arguments.length?(a(t),f()):a()},i.clipExtent=function(t){return arguments.length?(null==t?d=e=n=r=null:(d=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),f()):null==d?null:[[d,e],[n,r]]},f()}(wt).scale(961/u)}wt.invert=function(t,e){return[t,2*d(m(e))-a]}},75965:(t,e,n)=>{"use strict";n.d(e,{A:()=>vn});const r=function(){this.__data__=[],this.size=0};const i=function(t,e){return t===e||t!=t&&e!=e};const o=function(t,e){for(var n=t.length;n--;)if(i(t[n][0],e))return n;return-1};var a=Array.prototype.splice;const s=function(t){var e=this.__data__,n=o(e,t);return!(n<0)&&(n==e.length-1?e.pop():a.call(e,n,1),--this.size,!0)};const u=function(t){var e=this.__data__,n=o(e,t);return n<0?void 0:e[n][1]};const l=function(t){return o(this.__data__,t)>-1};const c=function(t,e){var n=this.__data__,r=o(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function h(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}h.prototype.clear=r,h.prototype.delete=s,h.prototype.get=u,h.prototype.has=l,h.prototype.set=c;const d=h;const f=function(){this.__data__=new d,this.size=0};const p=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n};const m=function(t){return this.__data__.get(t)};const g=function(t){return this.__data__.has(t)};const v="object"==typeof global&&global&&global.Object===Object&&global;var y="object"==typeof self&&self&&self.Object===Object&&self;const b=v||y||Function("return this")();const x=b.Symbol;var w=Object.prototype,_=w.hasOwnProperty,S=w.toString,E=x?x.toStringTag:void 0;const A=function(t){var e=_.call(t,E),n=t[E];try{t[E]=void 0;var r=!0}catch(t){}var i=S.call(t);return r&&(e?t[E]=n:delete t[E]),i};var M=Object.prototype.toString;const C=function(t){return M.call(t)};var T=x?x.toStringTag:void 0;const k=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":T&&T in Object(t)?A(t):C(t)};const I=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};const N=function(t){if(!I(t))return!1;var e=k(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e};const P=b["__core-js_shared__"];var O,L=(O=/[^.]+$/.exec(P&&P.keys&&P.keys.IE_PROTO||""))?"Symbol(src)_1."+O:"";const R=function(t){return!!L&&L in t};var D=Function.prototype.toString;const z=function(t){if(null!=t){try{return D.call(t)}catch(t){}try{return t+""}catch(t){}}return""};var F=/^\[object .+?Constructor\]$/,B=Function.prototype,U=Object.prototype,j=B.toString,V=U.hasOwnProperty,H=RegExp("^"+j.call(V).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const G=function(t){return!(!I(t)||R(t))&&(N(t)?H:F).test(z(t))};const W=function(t,e){return null==t?void 0:t[e]};const X=function(t,e){var n=W(t,e);return G(n)?n:void 0};const Y=X(b,"Map");const q=X(Object,"create");const $=function(){this.__data__=q?q(null):{},this.size=0};const K=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e};var Z=Object.prototype.hasOwnProperty;const Q=function(t){var e=this.__data__;if(q){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return Z.call(e,t)?e[t]:void 0};var J=Object.prototype.hasOwnProperty;const tt=function(t){var e=this.__data__;return q?void 0!==e[t]:J.call(e,t)};const et=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=q&&void 0===e?"__lodash_hash_undefined__":e,this};function nt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}nt.prototype.clear=$,nt.prototype.delete=K,nt.prototype.get=Q,nt.prototype.has=tt,nt.prototype.set=et;const rt=nt;const it=function(){this.size=0,this.__data__={hash:new rt,map:new(Y||d),string:new rt}};const ot=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};const at=function(t,e){var n=t.__data__;return ot(e)?n["string"==typeof e?"string":"hash"]:n.map};const st=function(t){var e=at(this,t).delete(t);return this.size-=e?1:0,e};const ut=function(t){return at(this,t).get(t)};const lt=function(t){return at(this,t).has(t)};const ct=function(t,e){var n=at(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function ht(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ht.prototype.clear=it,ht.prototype.delete=st,ht.prototype.get=ut,ht.prototype.has=lt,ht.prototype.set=ct;const dt=ht;const ft=function(t,e){var n=this.__data__;if(n instanceof d){var r=n.__data__;if(!Y||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new dt(r)}return n.set(t,e),this.size=n.size,this};function pt(t){var e=this.__data__=new d(t);this.size=e.size}pt.prototype.clear=f,pt.prototype.delete=p,pt.prototype.get=m,pt.prototype.has=g,pt.prototype.set=ft;const mt=pt;const gt=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t};const vt=function(){try{var t=X(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();const yt=function(t,e,n){"__proto__"==e&&vt?vt(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n};var bt=Object.prototype.hasOwnProperty;const xt=function(t,e,n){var r=t[e];bt.call(t,e)&&i(r,n)&&(void 0!==n||e in t)||yt(t,e,n)};const wt=function(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],u=r?r(n[s],t[s],s,n,t):void 0;void 0===u&&(u=t[s]),i?yt(n,s,u):xt(n,s,u)}return n};const _t=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r};const St=function(t){return null!=t&&"object"==typeof t};const Et=function(t){return St(t)&&"[object Arguments]"==k(t)};var At=Object.prototype,Mt=At.hasOwnProperty,Ct=At.propertyIsEnumerable;const Tt=Et(function(){return arguments}())?Et:function(t){return St(t)&&Mt.call(t,"callee")&&!Ct.call(t,"callee")};const kt=Array.isArray;const It=function(){return!1};var Nt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Pt=Nt&&"object"==typeof module&&module&&!module.nodeType&&module,Ot=Pt&&Pt.exports===Nt?b.Buffer:void 0;const Lt=(Ot?Ot.isBuffer:void 0)||It;var Rt=/^(?:0|[1-9]\d*)$/;const Dt=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&Rt.test(t))&&t>-1&&t%1==0&&t<e};const zt=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991};var Ft={};Ft["[object Float32Array]"]=Ft["[object Float64Array]"]=Ft["[object Int8Array]"]=Ft["[object Int16Array]"]=Ft["[object Int32Array]"]=Ft["[object Uint8Array]"]=Ft["[object Uint8ClampedArray]"]=Ft["[object Uint16Array]"]=Ft["[object Uint32Array]"]=!0,Ft["[object Arguments]"]=Ft["[object Array]"]=Ft["[object ArrayBuffer]"]=Ft["[object Boolean]"]=Ft["[object DataView]"]=Ft["[object Date]"]=Ft["[object Error]"]=Ft["[object Function]"]=Ft["[object Map]"]=Ft["[object Number]"]=Ft["[object Object]"]=Ft["[object RegExp]"]=Ft["[object Set]"]=Ft["[object String]"]=Ft["[object WeakMap]"]=!1;const Bt=function(t){return St(t)&&zt(t.length)&&!!Ft[k(t)]};const Ut=function(t){return function(e){return t(e)}};var jt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Vt=jt&&"object"==typeof module&&module&&!module.nodeType&&module,Ht=Vt&&Vt.exports===jt&&v.process;const Gt=function(){try{var t=Vt&&Vt.require&&Vt.require("util").types;return t||Ht&&Ht.binding&&Ht.binding("util")}catch(t){}}();var Wt=Gt&&Gt.isTypedArray;const Xt=Wt?Ut(Wt):Bt;var Yt=Object.prototype.hasOwnProperty;const qt=function(t,e){var n=kt(t),r=!n&&Tt(t),i=!n&&!r&&Lt(t),o=!n&&!r&&!i&&Xt(t),a=n||r||i||o,s=a?_t(t.length,String):[],u=s.length;for(var l in t)!e&&!Yt.call(t,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Dt(l,u))||s.push(l);return s};var $t=Object.prototype;const Kt=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||$t)};const Zt=function(t,e){return function(n){return t(e(n))}};const Qt=Zt(Object.keys,Object);var Jt=Object.prototype.hasOwnProperty;const te=function(t){if(!Kt(t))return Qt(t);var e=[];for(var n in Object(t))Jt.call(t,n)&&"constructor"!=n&&e.push(n);return e};const ee=function(t){return null!=t&&zt(t.length)&&!N(t)};const ne=function(t){return ee(t)?qt(t):te(t)};const re=function(t,e){return t&&wt(e,ne(e),t)};const ie=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e};var oe=Object.prototype.hasOwnProperty;const ae=function(t){if(!I(t))return ie(t);var e=Kt(t),n=[];for(var r in t)("constructor"!=r||!e&&oe.call(t,r))&&n.push(r);return n};const se=function(t){return ee(t)?qt(t,!0):ae(t)};const ue=function(t,e){return t&&wt(e,se(e),t)};var le="object"==typeof exports&&exports&&!exports.nodeType&&exports,ce=le&&"object"==typeof module&&module&&!module.nodeType&&module,he=ce&&ce.exports===le?b.Buffer:void 0,de=he?he.allocUnsafe:void 0;const fe=function(t,e){if(e)return t.slice();var n=t.length,r=de?de(n):new t.constructor(n);return t.copy(r),r};const pe=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e};const me=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o};const ge=function(){return[]};var ve=Object.prototype.propertyIsEnumerable,ye=Object.getOwnPropertySymbols;const be=ye?function(t){return null==t?[]:(t=Object(t),me(ye(t),(function(e){return ve.call(t,e)})))}:ge;const xe=function(t,e){return wt(t,be(t),e)};const we=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t};const _e=Zt(Object.getPrototypeOf,Object);const Se=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)we(e,be(t)),t=_e(t);return e}:ge;const Ee=function(t,e){return wt(t,Se(t),e)};const Ae=function(t,e,n){var r=e(t);return kt(t)?r:we(r,n(t))};const Me=function(t){return Ae(t,ne,be)};const Ce=function(t){return Ae(t,se,Se)};const Te=X(b,"DataView");const ke=X(b,"Promise");const Ie=X(b,"Set");const Ne=X(b,"WeakMap");var Pe="[object Map]",Oe="[object Promise]",Le="[object Set]",Re="[object WeakMap]",De="[object DataView]",ze=z(Te),Fe=z(Y),Be=z(ke),Ue=z(Ie),je=z(Ne),Ve=k;(Te&&Ve(new Te(new ArrayBuffer(1)))!=De||Y&&Ve(new Y)!=Pe||ke&&Ve(ke.resolve())!=Oe||Ie&&Ve(new Ie)!=Le||Ne&&Ve(new Ne)!=Re)&&(Ve=function(t){var e=k(t),n="[object Object]"==e?t.constructor:void 0,r=n?z(n):"";if(r)switch(r){case ze:return De;case Fe:return Pe;case Be:return Oe;case Ue:return Le;case je:return Re}return e});const He=Ve;var Ge=Object.prototype.hasOwnProperty;const We=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Ge.call(t,"index")&&(n.index=t.index,n.input=t.input),n};const Xe=b.Uint8Array;const Ye=function(t){var e=new t.constructor(t.byteLength);return new Xe(e).set(new Xe(t)),e};const qe=function(t,e){var n=e?Ye(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)};var $e=/\w*$/;const Ke=function(t){var e=new t.constructor(t.source,$e.exec(t));return e.lastIndex=t.lastIndex,e};var Ze=x?x.prototype:void 0,Qe=Ze?Ze.valueOf:void 0;const Je=function(t){return Qe?Object(Qe.call(t)):{}};const tn=function(t,e){var n=e?Ye(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)};const en=function(t,e,n){var r=t.constructor;switch(e){case"[object ArrayBuffer]":return Ye(t);case"[object Boolean]":case"[object Date]":return new r(+t);case"[object DataView]":return qe(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return tn(t,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(t);case"[object RegExp]":return Ke(t);case"[object Symbol]":return Je(t)}};var nn=Object.create;const rn=function(){function t(){}return function(e){if(!I(e))return{};if(nn)return nn(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();const on=function(t){return"function"!=typeof t.constructor||Kt(t)?{}:rn(_e(t))};const an=function(t){return St(t)&&"[object Map]"==He(t)};var sn=Gt&&Gt.isMap;const un=sn?Ut(sn):an;const ln=function(t){return St(t)&&"[object Set]"==He(t)};var cn=Gt&&Gt.isSet;const hn=cn?Ut(cn):ln;var dn="[object Arguments]",fn="[object Function]",pn="[object Object]",mn={};mn[dn]=mn["[object Array]"]=mn["[object ArrayBuffer]"]=mn["[object DataView]"]=mn["[object Boolean]"]=mn["[object Date]"]=mn["[object Float32Array]"]=mn["[object Float64Array]"]=mn["[object Int8Array]"]=mn["[object Int16Array]"]=mn["[object Int32Array]"]=mn["[object Map]"]=mn["[object Number]"]=mn[pn]=mn["[object RegExp]"]=mn["[object Set]"]=mn["[object String]"]=mn["[object Symbol]"]=mn["[object Uint8Array]"]=mn["[object Uint8ClampedArray]"]=mn["[object Uint16Array]"]=mn["[object Uint32Array]"]=!0,mn["[object Error]"]=mn[fn]=mn["[object WeakMap]"]=!1;const gn=function t(e,n,r,i,o,a){var s,u=1&n,l=2&n,c=4&n;if(r&&(s=o?r(e,i,o,a):r(e)),void 0!==s)return s;if(!I(e))return e;var h=kt(e);if(h){if(s=We(e),!u)return pe(e,s)}else{var d=He(e),f=d==fn||"[object GeneratorFunction]"==d;if(Lt(e))return fe(e,u);if(d==pn||d==dn||f&&!o){if(s=l||f?{}:on(e),!u)return l?Ee(e,ue(s,e)):xe(e,re(s,e))}else{if(!mn[d])return o?e:{};s=en(e,d,u)}}a||(a=new mt);var p=a.get(e);if(p)return p;a.set(e,s),hn(e)?e.forEach((function(i){s.add(t(i,n,r,i,e,a))})):un(e)&&e.forEach((function(i,o){s.set(o,t(i,n,r,o,e,a))}));var m=h?void 0:(c?l?Ce:Me:l?se:ne)(e);return gt(m||e,(function(i,o){m&&(i=e[o=i]),xt(s,o,t(i,n,r,o,e,a))})),s};const vn=function(t){return gn(t,5)}},3075:(t,e,n)=>{"use strict";n.d(e,{Ay:()=>vn});function r(t){let e=t.length;for(;--e>=0;)t[e]=0}const i=256,o=286,a=30,s=15,u=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),l=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),c=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),h=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),d=new Array(576);r(d);const f=new Array(60);r(f);const p=new Array(512);r(p);const m=new Array(256);r(m);const g=new Array(29);r(g);const v=new Array(a);function y(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}let b,x,w;function _(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}r(v);const S=t=>t<256?p[t]:p[256+(t>>>7)],E=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},A=(t,e,n)=>{t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,E(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)},M=(t,e,n)=>{A(t,n[2*e],n[2*e+1])},C=(t,e)=>{let n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1},T=(t,e,n)=>{const r=new Array(16);let i,o,a=0;for(i=1;i<=s;i++)a=a+n[i-1]<<1,r[i]=a;for(o=0;o<=e;o++){let e=t[2*o+1];0!==e&&(t[2*o]=C(r[e]++,e))}},k=t=>{let e;for(e=0;e<o;e++)t.dyn_ltree[2*e]=0;for(e=0;e<a;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},I=t=>{t.bi_valid>8?E(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},N=(t,e,n,r)=>{const i=2*e,o=2*n;return t[i]<t[o]||t[i]===t[o]&&r[e]<=r[n]},P=(t,e,n)=>{const r=t.heap[n];let i=n<<1;for(;i<=t.heap_len&&(i<t.heap_len&&N(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!N(e,r,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=r},O=(t,e,n)=>{let r,o,a,s,c=0;if(0!==t.sym_next)do{r=255&t.pending_buf[t.sym_buf+c++],r+=(255&t.pending_buf[t.sym_buf+c++])<<8,o=t.pending_buf[t.sym_buf+c++],0===r?M(t,o,e):(a=m[o],M(t,a+i+1,e),s=u[a],0!==s&&(o-=g[a],A(t,o,s)),r--,a=S(r),M(t,a,n),s=l[a],0!==s&&(r-=v[a],A(t,r,s)))}while(c<t.sym_next);M(t,256,e)},L=(t,e)=>{const n=e.dyn_tree,r=e.stat_desc.static_tree,i=e.stat_desc.has_stree,o=e.stat_desc.elems;let a,u,l,c=-1;for(t.heap_len=0,t.heap_max=573,a=0;a<o;a++)0!==n[2*a]?(t.heap[++t.heap_len]=c=a,t.depth[a]=0):n[2*a+1]=0;for(;t.heap_len<2;)l=t.heap[++t.heap_len]=c<2?++c:0,n[2*l]=1,t.depth[l]=0,t.opt_len--,i&&(t.static_len-=r[2*l+1]);for(e.max_code=c,a=t.heap_len>>1;a>=1;a--)P(t,n,a);l=o;do{a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],P(t,n,1),u=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=u,n[2*l]=n[2*a]+n[2*u],t.depth[l]=(t.depth[a]>=t.depth[u]?t.depth[a]:t.depth[u])+1,n[2*a+1]=n[2*u+1]=l,t.heap[1]=l++,P(t,n,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const n=e.dyn_tree,r=e.max_code,i=e.stat_desc.static_tree,o=e.stat_desc.has_stree,a=e.stat_desc.extra_bits,u=e.stat_desc.extra_base,l=e.stat_desc.max_length;let c,h,d,f,p,m,g=0;for(f=0;f<=s;f++)t.bl_count[f]=0;for(n[2*t.heap[t.heap_max]+1]=0,c=t.heap_max+1;c<573;c++)h=t.heap[c],f=n[2*n[2*h+1]+1]+1,f>l&&(f=l,g++),n[2*h+1]=f,h>r||(t.bl_count[f]++,p=0,h>=u&&(p=a[h-u]),m=n[2*h],t.opt_len+=m*(f+p),o&&(t.static_len+=m*(i[2*h+1]+p)));if(0!==g){do{for(f=l-1;0===t.bl_count[f];)f--;t.bl_count[f]--,t.bl_count[f+1]+=2,t.bl_count[l]--,g-=2}while(g>0);for(f=l;0!==f;f--)for(h=t.bl_count[f];0!==h;)d=t.heap[--c],d>r||(n[2*d+1]!==f&&(t.opt_len+=(f-n[2*d+1])*n[2*d],n[2*d+1]=f),h--)}})(t,e),T(n,c,t.bl_count)},R=(t,e,n)=>{let r,i,o=-1,a=e[1],s=0,u=7,l=4;for(0===a&&(u=138,l=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=e[2*(r+1)+1],++s<u&&i===a||(s<l?t.bl_tree[2*i]+=s:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[32]++):s<=10?t.bl_tree[34]++:t.bl_tree[36]++,s=0,o=i,0===a?(u=138,l=3):i===a?(u=6,l=3):(u=7,l=4))},D=(t,e,n)=>{let r,i,o=-1,a=e[1],s=0,u=7,l=4;for(0===a&&(u=138,l=3),r=0;r<=n;r++)if(i=a,a=e[2*(r+1)+1],!(++s<u&&i===a)){if(s<l)do{M(t,i,t.bl_tree)}while(0!=--s);else 0!==i?(i!==o&&(M(t,i,t.bl_tree),s--),M(t,16,t.bl_tree),A(t,s-3,2)):s<=10?(M(t,17,t.bl_tree),A(t,s-3,3)):(M(t,18,t.bl_tree),A(t,s-11,7));s=0,o=i,0===a?(u=138,l=3):i===a?(u=6,l=3):(u=7,l=4)}};let z=!1;const F=(t,e,n,r)=>{A(t,0+(r?1:0),3),I(t),E(t,n),E(t,~n),n&&t.pending_buf.set(t.window.subarray(e,e+n),t.pending),t.pending+=n};var B=(t,e,n,r)=>{let o,a,s=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<i;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),L(t,t.l_desc),L(t,t.d_desc),s=(t=>{let e;for(R(t,t.dyn_ltree,t.l_desc.max_code),R(t,t.dyn_dtree,t.d_desc.max_code),L(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*h[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),o=t.opt_len+3+7>>>3,a=t.static_len+3+7>>>3,a<=o&&(o=a)):o=a=n+5,n+4<=o&&-1!==e?F(t,e,n,r):4===t.strategy||a===o?(A(t,2+(r?1:0),3),O(t,d,f)):(A(t,4+(r?1:0),3),((t,e,n,r)=>{let i;for(A(t,e-257,5),A(t,n-1,5),A(t,r-4,4),i=0;i<r;i++)A(t,t.bl_tree[2*h[i]+1],3);D(t,t.dyn_ltree,e-1),D(t,t.dyn_dtree,n-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),O(t,t.dyn_ltree,t.dyn_dtree)),k(t),r&&I(t)},U={_tr_init:t=>{z||((()=>{let t,e,n,r,i;const h=new Array(16);for(n=0,r=0;r<28;r++)for(g[r]=n,t=0;t<1<<u[r];t++)m[n++]=r;for(m[n-1]=r,i=0,r=0;r<16;r++)for(v[r]=i,t=0;t<1<<l[r];t++)p[i++]=r;for(i>>=7;r<a;r++)for(v[r]=i<<7,t=0;t<1<<l[r]-7;t++)p[256+i++]=r;for(e=0;e<=s;e++)h[e]=0;for(t=0;t<=143;)d[2*t+1]=8,t++,h[8]++;for(;t<=255;)d[2*t+1]=9,t++,h[9]++;for(;t<=279;)d[2*t+1]=7,t++,h[7]++;for(;t<=287;)d[2*t+1]=8,t++,h[8]++;for(T(d,287,h),t=0;t<a;t++)f[2*t+1]=5,f[2*t]=C(t,5);b=new y(d,u,257,o,s),x=new y(f,l,0,a,s),w=new y(new Array(0),c,0,19,7)})(),z=!0),t.l_desc=new _(t.dyn_ltree,b),t.d_desc=new _(t.dyn_dtree,x),t.bl_desc=new _(t.bl_tree,w),t.bi_buf=0,t.bi_valid=0,k(t)},_tr_stored_block:F,_tr_flush_block:B,_tr_tally:(t,e,n)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=n,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(m[n]+i+1)]++,t.dyn_dtree[2*S(e)]++),t.sym_next===t.sym_end),_tr_align:t=>{A(t,2,3),M(t,256,d),(t=>{16===t.bi_valid?(E(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}};var j=(t,e,n,r)=>{let i=65535&t,o=t>>>16&65535,a=0;for(;0!==n;){a=n>2e3?2e3:n,n-=a;do{i=i+e[r++]|0,o=o+i|0}while(--a);i%=65521,o%=65521}return i|o<<16};const V=new Uint32Array((()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e})());var H=(t,e,n,r)=>{const i=V,o=r+n;t^=-1;for(let n=r;n<o;n++)t=t>>>8^i[255&(t^e[n])];return~t},G={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},W={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:X,_tr_stored_block:Y,_tr_flush_block:q,_tr_tally:$,_tr_align:K}=U,{Z_NO_FLUSH:Z,Z_PARTIAL_FLUSH:Q,Z_FULL_FLUSH:J,Z_FINISH:tt,Z_BLOCK:et,Z_OK:nt,Z_STREAM_END:rt,Z_STREAM_ERROR:it,Z_DATA_ERROR:ot,Z_BUF_ERROR:at,Z_DEFAULT_COMPRESSION:st,Z_FILTERED:ut,Z_HUFFMAN_ONLY:lt,Z_RLE:ct,Z_FIXED:ht,Z_DEFAULT_STRATEGY:dt,Z_UNKNOWN:ft,Z_DEFLATED:pt}=W,mt=258,gt=262,vt=42,yt=113,bt=666,xt=(t,e)=>(t.msg=G[e],e),wt=t=>2*t-(t>4?9:0),_t=t=>{let e=t.length;for(;--e>=0;)t[e]=0},St=t=>{let e,n,r,i=t.w_size;e=t.hash_size,r=e;do{n=t.head[--r],t.head[r]=n>=i?n-i:0}while(--e);e=i,r=e;do{n=t.prev[--r],t.prev[r]=n>=i?n-i:0}while(--e)};let Et=(t,e,n)=>(e<<t.hash_shift^n)&t.hash_mask;const At=t=>{const e=t.state;let n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+n),t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))},Mt=(t,e)=>{q(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,At(t.strm)},Ct=(t,e)=>{t.pending_buf[t.pending++]=e},Tt=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},kt=(t,e,n,r)=>{let i=t.avail_in;return i>r&&(i=r),0===i?0:(t.avail_in-=i,e.set(t.input.subarray(t.next_in,t.next_in+i),n),1===t.state.wrap?t.adler=j(t.adler,e,i,n):2===t.state.wrap&&(t.adler=H(t.adler,e,i,n)),t.next_in+=i,t.total_in+=i,i)},It=(t,e)=>{let n,r,i=t.max_chain_length,o=t.strstart,a=t.prev_length,s=t.nice_match;const u=t.strstart>t.w_size-gt?t.strstart-(t.w_size-gt):0,l=t.window,c=t.w_mask,h=t.prev,d=t.strstart+mt;let f=l[o+a-1],p=l[o+a];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do{if(n=e,l[n+a]===p&&l[n+a-1]===f&&l[n]===l[o]&&l[++n]===l[o+1]){o+=2,n++;do{}while(l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&o<d);if(r=mt-(d-o),o=d-mt,r>a){if(t.match_start=e,a=r,r>=s)break;f=l[o+a-1],p=l[o+a]}}}while((e=h[e&c])>u&&0!=--i);return a<=t.lookahead?a:t.lookahead},Nt=t=>{const e=t.w_size;let n,r,i;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-gt)&&(t.window.set(t.window.subarray(e,e+e-r),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),St(t),r+=e),0===t.strm.avail_in)break;if(n=kt(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=n,t.lookahead+t.insert>=3)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=Et(t,t.ins_h,t.window[i+1]);t.insert&&(t.ins_h=Et(t,t.ins_h,t.window[i+3-1]),t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<gt&&0!==t.strm.avail_in)},Pt=(t,e)=>{let n,r,i,o=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,a=0,s=t.strm.avail_in;do{if(n=65535,i=t.bi_valid+42>>3,t.strm.avail_out<i)break;if(i=t.strm.avail_out-i,r=t.strstart-t.block_start,n>r+t.strm.avail_in&&(n=r+t.strm.avail_in),n>i&&(n=i),n<o&&(0===n&&e!==tt||e===Z||n!==r+t.strm.avail_in))break;a=e===tt&&n===r+t.strm.avail_in?1:0,Y(t,0,0,a),t.pending_buf[t.pending-4]=n,t.pending_buf[t.pending-3]=n>>8,t.pending_buf[t.pending-2]=~n,t.pending_buf[t.pending-1]=~n>>8,At(t.strm),r&&(r>n&&(r=n),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+r),t.strm.next_out),t.strm.next_out+=r,t.strm.avail_out-=r,t.strm.total_out+=r,t.block_start+=r,n-=r),n&&(kt(t.strm,t.strm.output,t.strm.next_out,n),t.strm.next_out+=n,t.strm.avail_out-=n,t.strm.total_out+=n)}while(0===a);return s-=t.strm.avail_in,s&&(s>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=s&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-s,t.strm.next_in),t.strstart),t.strstart+=s,t.insert+=s>t.w_size-t.insert?t.w_size-t.insert:s),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),a?4:e!==Z&&e!==tt&&0===t.strm.avail_in&&t.strstart===t.block_start?2:(i=t.window_size-t.strstart,t.strm.avail_in>i&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,i+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),i>t.strm.avail_in&&(i=t.strm.avail_in),i&&(kt(t.strm,t.window,t.strstart,i),t.strstart+=i,t.insert+=i>t.w_size-t.insert?t.w_size-t.insert:i),t.high_water<t.strstart&&(t.high_water=t.strstart),i=t.bi_valid+42>>3,i=t.pending_buf_size-i>65535?65535:t.pending_buf_size-i,o=i>t.w_size?t.w_size:i,r=t.strstart-t.block_start,(r>=o||(r||e===tt)&&e!==Z&&0===t.strm.avail_in&&r<=i)&&(n=r>i?i:r,a=e===tt&&0===t.strm.avail_in&&n===r?1:0,Y(t,t.block_start,n,a),t.block_start+=n,At(t.strm)),a?3:1)},Ot=(t,e)=>{let n,r;for(;;){if(t.lookahead<gt){if(Nt(t),t.lookahead<gt&&e===Z)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=Et(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-gt&&(t.match_length=It(t,n)),t.match_length>=3)if(r=$(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=Et(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=Et(t,t.ins_h,t.window[t.strstart+1]);else r=$(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(Mt(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===tt?(Mt(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Mt(t,!1),0===t.strm.avail_out)?1:2},Lt=(t,e)=>{let n,r,i;for(;;){if(t.lookahead<gt){if(Nt(t),t.lookahead<gt&&e===Z)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=Et(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-gt&&(t.match_length=It(t,n),t.match_length<=5&&(t.strategy===ut||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-3,r=$(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=Et(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(Mt(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(r=$(t,0,t.window[t.strstart-1]),r&&Mt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=$(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===tt?(Mt(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Mt(t,!1),0===t.strm.avail_out)?1:2};function Rt(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}const Dt=[new Rt(0,0,0,0,Pt),new Rt(4,4,8,4,Ot),new Rt(4,5,16,8,Ot),new Rt(4,6,32,32,Ot),new Rt(4,4,16,16,Lt),new Rt(8,16,32,32,Lt),new Rt(8,16,128,128,Lt),new Rt(8,32,128,256,Lt),new Rt(32,128,258,1024,Lt),new Rt(32,258,258,4096,Lt)];function zt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=pt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),_t(this.dyn_ltree),_t(this.dyn_dtree),_t(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),_t(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),_t(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Ft=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.status!==vt&&57!==e.status&&69!==e.status&&73!==e.status&&91!==e.status&&103!==e.status&&e.status!==yt&&e.status!==bt?1:0},Bt=t=>{if(Ft(t))return xt(t,it);t.total_in=t.total_out=0,t.data_type=ft;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=2===e.wrap?57:e.wrap?vt:yt,t.adler=2===e.wrap?0:1,e.last_flush=-2,X(e),nt},Ut=t=>{const e=Bt(t);var n;return e===nt&&((n=t.state).window_size=2*n.w_size,_t(n.head),n.max_lazy_match=Dt[n.level].max_lazy,n.good_match=Dt[n.level].good_length,n.nice_match=Dt[n.level].nice_length,n.max_chain_length=Dt[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),e},jt=(t,e,n,r,i,o)=>{if(!t)return it;let a=1;if(e===st&&(e=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),i<1||i>9||n!==pt||r<8||r>15||e<0||e>9||o<0||o>ht||8===r&&1!==a)return xt(t,it);8===r&&(r=9);const s=new zt;return t.state=s,s.strm=t,s.status=vt,s.wrap=a,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=e,s.strategy=o,s.method=n,Ut(t)};var Vt={deflateInit:(t,e)=>jt(t,e,pt,15,8,dt),deflateInit2:jt,deflateReset:Ut,deflateResetKeep:Bt,deflateSetHeader:(t,e)=>Ft(t)||2!==t.state.wrap?it:(t.state.gzhead=e,nt),deflate:(t,e)=>{if(Ft(t)||e>et||e<0)return t?xt(t,it):it;const n=t.state;if(!t.output||0!==t.avail_in&&!t.input||n.status===bt&&e!==tt)return xt(t,0===t.avail_out?at:it);const r=n.last_flush;if(n.last_flush=e,0!==n.pending){if(At(t),0===t.avail_out)return n.last_flush=-1,nt}else if(0===t.avail_in&&wt(e)<=wt(r)&&e!==tt)return xt(t,at);if(n.status===bt&&0!==t.avail_in)return xt(t,at);if(n.status===vt&&0===n.wrap&&(n.status=yt),n.status===vt){let e=pt+(n.w_bits-8<<4)<<8,r=-1;if(r=n.strategy>=lt||n.level<2?0:n.level<6?1:6===n.level?2:3,e|=r<<6,0!==n.strstart&&(e|=32),e+=31-e%31,Tt(n,e),0!==n.strstart&&(Tt(n,t.adler>>>16),Tt(n,65535&t.adler)),t.adler=1,n.status=yt,At(t),0!==n.pending)return n.last_flush=-1,nt}if(57===n.status)if(t.adler=0,Ct(n,31),Ct(n,139),Ct(n,8),n.gzhead)Ct(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Ct(n,255&n.gzhead.time),Ct(n,n.gzhead.time>>8&255),Ct(n,n.gzhead.time>>16&255),Ct(n,n.gzhead.time>>24&255),Ct(n,9===n.level?2:n.strategy>=lt||n.level<2?4:0),Ct(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(Ct(n,255&n.gzhead.extra.length),Ct(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=H(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(Ct(n,0),Ct(n,0),Ct(n,0),Ct(n,0),Ct(n,0),Ct(n,9===n.level?2:n.strategy>=lt||n.level<2?4:0),Ct(n,3),n.status=yt,At(t),0!==n.pending)return n.last_flush=-1,nt;if(69===n.status){if(n.gzhead.extra){let e=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let i=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>e&&(t.adler=H(t.adler,n.pending_buf,n.pending-e,e)),n.gzindex+=i,At(t),0!==n.pending)return n.last_flush=-1,nt;e=0,r-=i}let i=new Uint8Array(n.gzhead.extra);n.pending_buf.set(i.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>e&&(t.adler=H(t.adler,n.pending_buf,n.pending-e,e)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let e,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(t.adler=H(t.adler,n.pending_buf,n.pending-r,r)),At(t),0!==n.pending)return n.last_flush=-1,nt;r=0}e=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,Ct(n,e)}while(0!==e);n.gzhead.hcrc&&n.pending>r&&(t.adler=H(t.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let e,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(t.adler=H(t.adler,n.pending_buf,n.pending-r,r)),At(t),0!==n.pending)return n.last_flush=-1,nt;r=0}e=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,Ct(n,e)}while(0!==e);n.gzhead.hcrc&&n.pending>r&&(t.adler=H(t.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(At(t),0!==n.pending))return n.last_flush=-1,nt;Ct(n,255&t.adler),Ct(n,t.adler>>8&255),t.adler=0}if(n.status=yt,At(t),0!==n.pending)return n.last_flush=-1,nt}if(0!==t.avail_in||0!==n.lookahead||e!==Z&&n.status!==bt){let r=0===n.level?Pt(n,e):n.strategy===lt?((t,e)=>{let n;for(;;){if(0===t.lookahead&&(Nt(t),0===t.lookahead)){if(e===Z)return 1;break}if(t.match_length=0,n=$(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(Mt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===tt?(Mt(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Mt(t,!1),0===t.strm.avail_out)?1:2})(n,e):n.strategy===ct?((t,e)=>{let n,r,i,o;const a=t.window;for(;;){if(t.lookahead<=mt){if(Nt(t),t.lookahead<=mt&&e===Z)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(i=t.strstart-1,r=a[i],r===a[++i]&&r===a[++i]&&r===a[++i])){o=t.strstart+mt;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);t.match_length=mt-(o-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=$(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=$(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(Mt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===tt?(Mt(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Mt(t,!1),0===t.strm.avail_out)?1:2})(n,e):Dt[n.level].func(n,e);if(3!==r&&4!==r||(n.status=bt),1===r||3===r)return 0===t.avail_out&&(n.last_flush=-1),nt;if(2===r&&(e===Q?K(n):e!==et&&(Y(n,0,0,!1),e===J&&(_t(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),At(t),0===t.avail_out))return n.last_flush=-1,nt}return e!==tt?nt:n.wrap<=0?rt:(2===n.wrap?(Ct(n,255&t.adler),Ct(n,t.adler>>8&255),Ct(n,t.adler>>16&255),Ct(n,t.adler>>24&255),Ct(n,255&t.total_in),Ct(n,t.total_in>>8&255),Ct(n,t.total_in>>16&255),Ct(n,t.total_in>>24&255)):(Tt(n,t.adler>>>16),Tt(n,65535&t.adler)),At(t),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?nt:rt)},deflateEnd:t=>{if(Ft(t))return it;const e=t.state.status;return t.state=null,e===yt?xt(t,ot):nt},deflateSetDictionary:(t,e)=>{let n=e.length;if(Ft(t))return it;const r=t.state,i=r.wrap;if(2===i||1===i&&r.status!==vt||r.lookahead)return it;if(1===i&&(t.adler=j(t.adler,e,n,0)),r.wrap=0,n>=r.w_size){0===i&&(_t(r.head),r.strstart=0,r.block_start=0,r.insert=0);let t=new Uint8Array(r.w_size);t.set(e.subarray(n-r.w_size,n),0),e=t,n=r.w_size}const o=t.avail_in,a=t.next_in,s=t.input;for(t.avail_in=n,t.next_in=0,t.input=e,Nt(r);r.lookahead>=3;){let t=r.strstart,e=r.lookahead-2;do{r.ins_h=Et(r,r.ins_h,r.window[t+3-1]),r.prev[t&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=t,t++}while(--e);r.strstart=t,r.lookahead=2,Nt(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=a,t.input=s,t.avail_in=o,r.wrap=i,nt},deflateInfo:"pako deflate (from Nodeca project)"};const Ht=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var Gt={assign:function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const e in n)Ht(n,e)&&(t[e]=n[e])}}return t},flattenChunks:t=>{let e=0;for(let n=0,r=t.length;n<r;n++)e+=t[n].length;const n=new Uint8Array(e);for(let e=0,r=0,i=t.length;e<i;e++){let i=t[e];n.set(i,r),r+=i.length}return n}};let Wt=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Wt=!1}const Xt=new Uint8Array(256);for(let t=0;t<256;t++)Xt[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Xt[254]=Xt[254]=1;var Yt={string2buf:t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,n,r,i,o,a=t.length,s=0;for(i=0;i<a;i++)n=t.charCodeAt(i),55296==(64512&n)&&i+1<a&&(r=t.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),s+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(s),o=0,i=0;o<s;i++)n=t.charCodeAt(i),55296==(64512&n)&&i+1<a&&(r=t.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?e[o++]=n:n<2048?(e[o++]=192|n>>>6,e[o++]=128|63&n):n<65536?(e[o++]=224|n>>>12,e[o++]=128|n>>>6&63,e[o++]=128|63&n):(e[o++]=240|n>>>18,e[o++]=128|n>>>12&63,e[o++]=128|n>>>6&63,e[o++]=128|63&n);return e},buf2string:(t,e)=>{const n=e||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,e));let r,i;const o=new Array(2*n);for(i=0,r=0;r<n;){let e=t[r++];if(e<128){o[i++]=e;continue}let a=Xt[e];if(a>4)o[i++]=65533,r+=a-1;else{for(e&=2===a?31:3===a?15:7;a>1&&r<n;)e=e<<6|63&t[r++],a--;a>1?o[i++]=65533:e<65536?o[i++]=e:(e-=65536,o[i++]=55296|e>>10&1023,o[i++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&Wt)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n})(o,i)},utf8border:(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let n=e-1;for(;n>=0&&128==(192&t[n]);)n--;return n<0||0===n?e:n+Xt[t[n]]>e?n:e}};var qt=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const $t=Object.prototype.toString,{Z_NO_FLUSH:Kt,Z_SYNC_FLUSH:Zt,Z_FULL_FLUSH:Qt,Z_FINISH:Jt,Z_OK:te,Z_STREAM_END:ee,Z_DEFAULT_COMPRESSION:ne,Z_DEFAULT_STRATEGY:re,Z_DEFLATED:ie}=W;function oe(t){this.options=Gt.assign({level:ne,method:ie,chunkSize:16384,windowBits:15,memLevel:8,strategy:re},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new qt,this.strm.avail_out=0;let n=Vt.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==te)throw new Error(G[n]);if(e.header&&Vt.deflateSetHeader(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?Yt.string2buf(e.dictionary):"[object ArrayBuffer]"===$t.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,n=Vt.deflateSetDictionary(this.strm,t),n!==te)throw new Error(G[n]);this._dict_set=!0}}function ae(t,e){const n=new oe(e);if(n.push(t,!0),n.err)throw n.msg||G[n.err];return n.result}oe.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize;let i,o;if(this.ended)return!1;for(o=e===~~e?e:!0===e?Jt:Kt,"string"==typeof t?n.input=Yt.string2buf(t):"[object ArrayBuffer]"===$t.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(o===Zt||o===Qt)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(i=Vt.deflate(n,o),i===ee)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=Vt.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===te;if(0!==n.avail_out){if(o>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},oe.prototype.onData=function(t){this.chunks.push(t)},oe.prototype.onEnd=function(t){t===te&&(this.result=Gt.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var se={Deflate:oe,deflate:ae,deflateRaw:function(t,e){return(e=e||{}).raw=!0,ae(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,ae(t,e)},constants:W};const ue=16209;var le=function(t,e){let n,r,i,o,a,s,u,l,c,h,d,f,p,m,g,v,y,b,x,w,_,S,E,A;const M=t.state;n=t.next_in,E=t.input,r=n+(t.avail_in-5),i=t.next_out,A=t.output,o=i-(e-t.avail_out),a=i+(t.avail_out-257),s=M.dmax,u=M.wsize,l=M.whave,c=M.wnext,h=M.window,d=M.hold,f=M.bits,p=M.lencode,m=M.distcode,g=(1<<M.lenbits)-1,v=(1<<M.distbits)-1;t:do{f<15&&(d+=E[n++]<<f,f+=8,d+=E[n++]<<f,f+=8),y=p[d&g];e:for(;;){if(b=y>>>24,d>>>=b,f-=b,b=y>>>16&255,0===b)A[i++]=65535&y;else{if(!(16&b)){if(64&b){if(32&b){M.mode=16191;break t}t.msg="invalid literal/length code",M.mode=ue;break t}y=p[(65535&y)+(d&(1<<b)-1)];continue e}for(x=65535&y,b&=15,b&&(f<b&&(d+=E[n++]<<f,f+=8),x+=d&(1<<b)-1,d>>>=b,f-=b),f<15&&(d+=E[n++]<<f,f+=8,d+=E[n++]<<f,f+=8),y=m[d&v];;){if(b=y>>>24,d>>>=b,f-=b,b=y>>>16&255,16&b){if(w=65535&y,b&=15,f<b&&(d+=E[n++]<<f,f+=8,f<b&&(d+=E[n++]<<f,f+=8)),w+=d&(1<<b)-1,w>s){t.msg="invalid distance too far back",M.mode=ue;break t}if(d>>>=b,f-=b,b=i-o,w>b){if(b=w-b,b>l&&M.sane){t.msg="invalid distance too far back",M.mode=ue;break t}if(_=0,S=h,0===c){if(_+=u-b,b<x){x-=b;do{A[i++]=h[_++]}while(--b);_=i-w,S=A}}else if(c<b){if(_+=u+c-b,b-=c,b<x){x-=b;do{A[i++]=h[_++]}while(--b);if(_=0,c<x){b=c,x-=b;do{A[i++]=h[_++]}while(--b);_=i-w,S=A}}}else if(_+=c-b,b<x){x-=b;do{A[i++]=h[_++]}while(--b);_=i-w,S=A}for(;x>2;)A[i++]=S[_++],A[i++]=S[_++],A[i++]=S[_++],x-=3;x&&(A[i++]=S[_++],x>1&&(A[i++]=S[_++]))}else{_=i-w;do{A[i++]=A[_++],A[i++]=A[_++],A[i++]=A[_++],x-=3}while(x>2);x&&(A[i++]=A[_++],x>1&&(A[i++]=A[_++]))}break}if(64&b){t.msg="invalid distance code",M.mode=ue;break t}y=m[(65535&y)+(d&(1<<b)-1)]}}break}}while(n<r&&i<a);x=f>>3,n-=x,f-=x<<3,d&=(1<<f)-1,t.next_in=n,t.next_out=i,t.avail_in=n<r?r-n+5:5-(n-r),t.avail_out=i<a?a-i+257:257-(i-a),M.hold=d,M.bits=f};const ce=15,he=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),de=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),fe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),pe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var me=(t,e,n,r,i,o,a,s)=>{const u=s.bits;let l,c,h,d,f,p,m=0,g=0,v=0,y=0,b=0,x=0,w=0,_=0,S=0,E=0,A=null;const M=new Uint16Array(16),C=new Uint16Array(16);let T,k,I,N=null;for(m=0;m<=ce;m++)M[m]=0;for(g=0;g<r;g++)M[e[n+g]]++;for(b=u,y=ce;y>=1&&0===M[y];y--);if(b>y&&(b=y),0===y)return i[o++]=20971520,i[o++]=20971520,s.bits=1,0;for(v=1;v<y&&0===M[v];v++);for(b<v&&(b=v),_=1,m=1;m<=ce;m++)if(_<<=1,_-=M[m],_<0)return-1;if(_>0&&(0===t||1!==y))return-1;for(C[1]=0,m=1;m<ce;m++)C[m+1]=C[m]+M[m];for(g=0;g<r;g++)0!==e[n+g]&&(a[C[e[n+g]]++]=g);if(0===t?(A=N=a,p=20):1===t?(A=he,N=de,p=257):(A=fe,N=pe,p=0),E=0,g=0,m=v,f=o,x=b,w=0,h=-1,S=1<<b,d=S-1,1===t&&S>852||2===t&&S>592)return 1;for(;;){T=m-w,a[g]+1<p?(k=0,I=a[g]):a[g]>=p?(k=N[a[g]-p],I=A[a[g]-p]):(k=96,I=0),l=1<<m-w,c=1<<x,v=c;do{c-=l,i[f+(E>>w)+c]=T<<24|k<<16|I}while(0!==c);for(l=1<<m-1;E&l;)l>>=1;if(0!==l?(E&=l-1,E+=l):E=0,g++,0==--M[m]){if(m===y)break;m=e[n+a[g]]}if(m>b&&(E&d)!==h){for(0===w&&(w=b),f+=v,x=m-w,_=1<<x;x+w<y&&(_-=M[x+w],!(_<=0));)x++,_<<=1;if(S+=1<<x,1===t&&S>852||2===t&&S>592)return 1;h=E&d,i[h]=b<<24|x<<16|f-o}}return 0!==E&&(i[f+E]=m-w<<24|64<<16),s.bits=b,0};const{Z_FINISH:ge,Z_BLOCK:ve,Z_TREES:ye,Z_OK:be,Z_STREAM_END:xe,Z_NEED_DICT:we,Z_STREAM_ERROR:_e,Z_DATA_ERROR:Se,Z_MEM_ERROR:Ee,Z_BUF_ERROR:Ae,Z_DEFLATED:Me}=W,Ce=16180,Te=16190,ke=16191,Ie=16192,Ne=16194,Pe=16199,Oe=16200,Le=16206,Re=16209,De=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function ze(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Fe=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<Ce||e.mode>16211?1:0},Be=t=>{if(Fe(t))return _e;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=Ce,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,be},Ue=t=>{if(Fe(t))return _e;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,Be(t)},je=(t,e)=>{let n;if(Fe(t))return _e;const r=t.state;return e<0?(n=0,e=-e):(n=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?_e:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,Ue(t))},Ve=(t,e)=>{if(!t)return _e;const n=new ze;t.state=n,n.strm=t,n.window=null,n.mode=Ce;const r=je(t,e);return r!==be&&(t.state=null),r};let He,Ge,We=!0;const Xe=t=>{if(We){He=new Int32Array(512),Ge=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(me(1,t.lens,0,288,He,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;me(2,t.lens,0,32,Ge,0,t.work,{bits:5}),We=!1}t.lencode=He,t.lenbits=9,t.distcode=Ge,t.distbits=5},Ye=(t,e,n,r)=>{let i;const o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(o.window.set(e.subarray(n-o.wsize,n),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),o.window.set(e.subarray(n-r,n-r+i),o.wnext),(r-=i)?(o.window.set(e.subarray(n-r,n),0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0};var qe={inflateReset:Ue,inflateReset2:je,inflateResetKeep:Be,inflateInit:t=>Ve(t,15),inflateInit2:Ve,inflate:(t,e)=>{let n,r,i,o,a,s,u,l,c,h,d,f,p,m,g,v,y,b,x,w,_,S,E=0;const A=new Uint8Array(4);let M,C;const T=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Fe(t)||!t.output||!t.input&&0!==t.avail_in)return _e;n=t.state,n.mode===ke&&(n.mode=Ie),a=t.next_out,i=t.output,u=t.avail_out,o=t.next_in,r=t.input,s=t.avail_in,l=n.hold,c=n.bits,h=s,d=u,S=be;t:for(;;)switch(n.mode){case Ce:if(0===n.wrap){n.mode=Ie;break}for(;c<16;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}if(2&n.wrap&&35615===l){0===n.wbits&&(n.wbits=15),n.check=0,A[0]=255&l,A[1]=l>>>8&255,n.check=H(n.check,A,2,0),l=0,c=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&l)<<8)+(l>>8))%31){t.msg="incorrect header check",n.mode=Re;break}if((15&l)!==Me){t.msg="unknown compression method",n.mode=Re;break}if(l>>>=4,c-=4,_=8+(15&l),0===n.wbits&&(n.wbits=_),_>15||_>n.wbits){t.msg="invalid window size",n.mode=Re;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=512&l?16189:ke,l=0,c=0;break;case 16181:for(;c<16;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}if(n.flags=l,(255&n.flags)!==Me){t.msg="unknown compression method",n.mode=Re;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=Re;break}n.head&&(n.head.text=l>>8&1),512&n.flags&&4&n.wrap&&(A[0]=255&l,A[1]=l>>>8&255,n.check=H(n.check,A,2,0)),l=0,c=0,n.mode=16182;case 16182:for(;c<32;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}n.head&&(n.head.time=l),512&n.flags&&4&n.wrap&&(A[0]=255&l,A[1]=l>>>8&255,A[2]=l>>>16&255,A[3]=l>>>24&255,n.check=H(n.check,A,4,0)),l=0,c=0,n.mode=16183;case 16183:for(;c<16;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}n.head&&(n.head.xflags=255&l,n.head.os=l>>8),512&n.flags&&4&n.wrap&&(A[0]=255&l,A[1]=l>>>8&255,n.check=H(n.check,A,2,0)),l=0,c=0,n.mode=16184;case 16184:if(1024&n.flags){for(;c<16;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}n.length=l,n.head&&(n.head.extra_len=l),512&n.flags&&4&n.wrap&&(A[0]=255&l,A[1]=l>>>8&255,n.check=H(n.check,A,2,0)),l=0,c=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(f=n.length,f>s&&(f=s),f&&(n.head&&(_=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(o,o+f),_)),512&n.flags&&4&n.wrap&&(n.check=H(n.check,r,f,o)),s-=f,o+=f,n.length-=f),n.length))break t;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===s)break t;f=0;do{_=r[o+f++],n.head&&_&&n.length<65536&&(n.head.name+=String.fromCharCode(_))}while(_&&f<s);if(512&n.flags&&4&n.wrap&&(n.check=H(n.check,r,f,o)),s-=f,o+=f,_)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===s)break t;f=0;do{_=r[o+f++],n.head&&_&&n.length<65536&&(n.head.comment+=String.fromCharCode(_))}while(_&&f<s);if(512&n.flags&&4&n.wrap&&(n.check=H(n.check,r,f,o)),s-=f,o+=f,_)break t}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;c<16;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}if(4&n.wrap&&l!==(65535&n.check)){t.msg="header crc mismatch",n.mode=Re;break}l=0,c=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=ke;break;case 16189:for(;c<32;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}t.adler=n.check=De(l),l=0,c=0,n.mode=Te;case Te:if(0===n.havedict)return t.next_out=a,t.avail_out=u,t.next_in=o,t.avail_in=s,n.hold=l,n.bits=c,we;t.adler=n.check=1,n.mode=ke;case ke:if(e===ve||e===ye)break t;case Ie:if(n.last){l>>>=7&c,c-=7&c,n.mode=Le;break}for(;c<3;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}switch(n.last=1&l,l>>>=1,c-=1,3&l){case 0:n.mode=16193;break;case 1:if(Xe(n),n.mode=Pe,e===ye){l>>>=2,c-=2;break t}break;case 2:n.mode=16196;break;case 3:t.msg="invalid block type",n.mode=Re}l>>>=2,c-=2;break;case 16193:for(l>>>=7&c,c-=7&c;c<32;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}if((65535&l)!=(l>>>16^65535)){t.msg="invalid stored block lengths",n.mode=Re;break}if(n.length=65535&l,l=0,c=0,n.mode=Ne,e===ye)break t;case Ne:n.mode=16195;case 16195:if(f=n.length,f){if(f>s&&(f=s),f>u&&(f=u),0===f)break t;i.set(r.subarray(o,o+f),a),s-=f,o+=f,u-=f,a+=f,n.length-=f;break}n.mode=ke;break;case 16196:for(;c<14;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}if(n.nlen=257+(31&l),l>>>=5,c-=5,n.ndist=1+(31&l),l>>>=5,c-=5,n.ncode=4+(15&l),l>>>=4,c-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=Re;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;c<3;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}n.lens[T[n.have++]]=7&l,l>>>=3,c-=3}for(;n.have<19;)n.lens[T[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,M={bits:n.lenbits},S=me(0,n.lens,0,19,n.lencode,0,n.work,M),n.lenbits=M.bits,S){t.msg="invalid code lengths set",n.mode=Re;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;E=n.lencode[l&(1<<n.lenbits)-1],g=E>>>24,v=E>>>16&255,y=65535&E,!(g<=c);){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}if(y<16)l>>>=g,c-=g,n.lens[n.have++]=y;else{if(16===y){for(C=g+2;c<C;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}if(l>>>=g,c-=g,0===n.have){t.msg="invalid bit length repeat",n.mode=Re;break}_=n.lens[n.have-1],f=3+(3&l),l>>>=2,c-=2}else if(17===y){for(C=g+3;c<C;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}l>>>=g,c-=g,_=0,f=3+(7&l),l>>>=3,c-=3}else{for(C=g+7;c<C;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}l>>>=g,c-=g,_=0,f=11+(127&l),l>>>=7,c-=7}if(n.have+f>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=Re;break}for(;f--;)n.lens[n.have++]=_}}if(n.mode===Re)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=Re;break}if(n.lenbits=9,M={bits:n.lenbits},S=me(1,n.lens,0,n.nlen,n.lencode,0,n.work,M),n.lenbits=M.bits,S){t.msg="invalid literal/lengths set",n.mode=Re;break}if(n.distbits=6,n.distcode=n.distdyn,M={bits:n.distbits},S=me(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,M),n.distbits=M.bits,S){t.msg="invalid distances set",n.mode=Re;break}if(n.mode=Pe,e===ye)break t;case Pe:n.mode=Oe;case Oe:if(s>=6&&u>=258){t.next_out=a,t.avail_out=u,t.next_in=o,t.avail_in=s,n.hold=l,n.bits=c,le(t,d),a=t.next_out,i=t.output,u=t.avail_out,o=t.next_in,r=t.input,s=t.avail_in,l=n.hold,c=n.bits,n.mode===ke&&(n.back=-1);break}for(n.back=0;E=n.lencode[l&(1<<n.lenbits)-1],g=E>>>24,v=E>>>16&255,y=65535&E,!(g<=c);){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}if(v&&!(240&v)){for(b=g,x=v,w=y;E=n.lencode[w+((l&(1<<b+x)-1)>>b)],g=E>>>24,v=E>>>16&255,y=65535&E,!(b+g<=c);){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}l>>>=b,c-=b,n.back+=b}if(l>>>=g,c-=g,n.back+=g,n.length=y,0===v){n.mode=16205;break}if(32&v){n.back=-1,n.mode=ke;break}if(64&v){t.msg="invalid literal/length code",n.mode=Re;break}n.extra=15&v,n.mode=16201;case 16201:if(n.extra){for(C=n.extra;c<C;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,c-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;E=n.distcode[l&(1<<n.distbits)-1],g=E>>>24,v=E>>>16&255,y=65535&E,!(g<=c);){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}if(!(240&v)){for(b=g,x=v,w=y;E=n.distcode[w+((l&(1<<b+x)-1)>>b)],g=E>>>24,v=E>>>16&255,y=65535&E,!(b+g<=c);){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}l>>>=b,c-=b,n.back+=b}if(l>>>=g,c-=g,n.back+=g,64&v){t.msg="invalid distance code",n.mode=Re;break}n.offset=y,n.extra=15&v,n.mode=16203;case 16203:if(n.extra){for(C=n.extra;c<C;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,c-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=Re;break}n.mode=16204;case 16204:if(0===u)break t;if(f=d-u,n.offset>f){if(f=n.offset-f,f>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=Re;break}f>n.wnext?(f-=n.wnext,p=n.wsize-f):p=n.wnext-f,f>n.length&&(f=n.length),m=n.window}else m=i,p=a-n.offset,f=n.length;f>u&&(f=u),u-=f,n.length-=f;do{i[a++]=m[p++]}while(--f);0===n.length&&(n.mode=Oe);break;case 16205:if(0===u)break t;i[a++]=n.length,u--,n.mode=Oe;break;case Le:if(n.wrap){for(;c<32;){if(0===s)break t;s--,l|=r[o++]<<c,c+=8}if(d-=u,t.total_out+=d,n.total+=d,4&n.wrap&&d&&(t.adler=n.check=n.flags?H(n.check,i,d,a-d):j(n.check,i,d,a-d)),d=u,4&n.wrap&&(n.flags?l:De(l))!==n.check){t.msg="incorrect data check",n.mode=Re;break}l=0,c=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;c<32;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}if(4&n.wrap&&l!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=Re;break}l=0,c=0}n.mode=16208;case 16208:S=xe;break t;case Re:S=Se;break t;case 16210:return Ee;default:return _e}return t.next_out=a,t.avail_out=u,t.next_in=o,t.avail_in=s,n.hold=l,n.bits=c,(n.wsize||d!==t.avail_out&&n.mode<Re&&(n.mode<Le||e!==ge))&&Ye(t,t.output,t.next_out,d-t.avail_out),h-=t.avail_in,d-=t.avail_out,t.total_in+=h,t.total_out+=d,n.total+=d,4&n.wrap&&d&&(t.adler=n.check=n.flags?H(n.check,i,d,t.next_out-d):j(n.check,i,d,t.next_out-d)),t.data_type=n.bits+(n.last?64:0)+(n.mode===ke?128:0)+(n.mode===Pe||n.mode===Ne?256:0),(0===h&&0===d||e===ge)&&S===be&&(S=Ae),S},inflateEnd:t=>{if(Fe(t))return _e;let e=t.state;return e.window&&(e.window=null),t.state=null,be},inflateGetHeader:(t,e)=>{if(Fe(t))return _e;const n=t.state;return 2&n.wrap?(n.head=e,e.done=!1,be):_e},inflateSetDictionary:(t,e)=>{const n=e.length;let r,i,o;return Fe(t)?_e:(r=t.state,0!==r.wrap&&r.mode!==Te?_e:r.mode===Te&&(i=1,i=j(i,e,n,0),i!==r.check)?Se:(o=Ye(t,e,n,n),o?(r.mode=16210,Ee):(r.havedict=1,be)))},inflateInfo:"pako inflate (from Nodeca project)"};var $e=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Ke=Object.prototype.toString,{Z_NO_FLUSH:Ze,Z_FINISH:Qe,Z_OK:Je,Z_STREAM_END:tn,Z_NEED_DICT:en,Z_STREAM_ERROR:nn,Z_DATA_ERROR:rn,Z_MEM_ERROR:on}=W;function an(t){this.options=Gt.assign({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(15&e.windowBits||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new qt,this.strm.avail_out=0;let n=qe.inflateInit2(this.strm,e.windowBits);if(n!==Je)throw new Error(G[n]);if(this.header=new $e,qe.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=Yt.string2buf(e.dictionary):"[object ArrayBuffer]"===Ke.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=qe.inflateSetDictionary(this.strm,e.dictionary),n!==Je)))throw new Error(G[n])}function sn(t,e){const n=new an(e);if(n.push(t),n.err)throw n.msg||G[n.err];return n.result}an.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let o,a,s;if(this.ended)return!1;for(a=e===~~e?e:!0===e?Qe:Ze,"[object ArrayBuffer]"===Ke.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),o=qe.inflate(n,a),o===en&&i&&(o=qe.inflateSetDictionary(n,i),o===Je?o=qe.inflate(n,a):o===rn&&(o=en));n.avail_in>0&&o===tn&&n.state.wrap>0&&0!==t[n.next_in];)qe.inflateReset(n),o=qe.inflate(n,a);switch(o){case nn:case rn:case en:case on:return this.onEnd(o),this.ended=!0,!1}if(s=n.avail_out,n.next_out&&(0===n.avail_out||o===tn))if("string"===this.options.to){let t=Yt.utf8border(n.output,n.next_out),e=n.next_out-t,i=Yt.buf2string(n.output,t);n.next_out=e,n.avail_out=r-e,e&&n.output.set(n.output.subarray(t,t+e),0),this.onData(i)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(o!==Je||0!==s){if(o===tn)return o=qe.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},an.prototype.onData=function(t){this.chunks.push(t)},an.prototype.onEnd=function(t){t===Je&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Gt.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var un={Inflate:an,inflate:sn,inflateRaw:function(t,e){return(e=e||{}).raw=!0,sn(t,e)},ungzip:sn,constants:W};const{Deflate:ln,deflate:cn,deflateRaw:hn,gzip:dn}=se,{Inflate:fn,inflate:pn,inflateRaw:mn,ungzip:gn}=un;var vn={Deflate:ln,deflate:cn,deflateRaw:hn,gzip:dn,Inflate:fn,inflate:pn,inflateRaw:mn,ungzip:gn,constants:W}},75862:(t,e,n)=>{"use strict";function r(t){return null!==t&&"object"==typeof t&&"constructor"in t&&t.constructor===Object}function i(t={},e={}){Object.keys(e).forEach((n=>{void 0===t[n]?t[n]=e[n]:r(e[n])&&r(t[n])&&Object.keys(e[n]).length>0&&i(t[n],e[n])}))}n.d(e,{Ay:()=>Z});const o={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector:()=>null,querySelectorAll:()=>[],getElementById:()=>null,createEvent:()=>({initEvent(){}}),createElement:()=>({children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName:()=>[]}),createElementNS:()=>({}),importNode:()=>null,location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function a(){const t="undefined"!=typeof document?document:{};return i(t,o),t}const s={document:o,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle:()=>({getPropertyValue:()=>""}),Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia:()=>({}),requestAnimationFrame:t=>"undefined"==typeof setTimeout?(t(),null):setTimeout(t,0),cancelAnimationFrame(t){"undefined"!=typeof setTimeout&&clearTimeout(t)}};function u(){const t="undefined"!=typeof window?window:{};return i(t,s),t}function l(t,e=0){return setTimeout(t,e)}function c(){return Date.now()}function h(t,e="x"){const n=u();let r,i,o;const a=function(t){const e=u();let n;return e.getComputedStyle&&(n=e.getComputedStyle(t,null)),!n&&t.currentStyle&&(n=t.currentStyle),n||(n=t.style),n}(t);return n.WebKitCSSMatrix?(i=a.transform||a.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map((t=>t.replace(",","."))).join(", ")),o=new n.WebKitCSSMatrix("none"===i?"":i)):(o=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),r=o.toString().split(",")),"x"===e&&(i=n.WebKitCSSMatrix?o.m41:16===r.length?parseFloat(r[12]):parseFloat(r[4])),"y"===e&&(i=n.WebKitCSSMatrix?o.m42:16===r.length?parseFloat(r[13]):parseFloat(r[5])),i||0}function d(t){return"object"==typeof t&&null!==t&&t.constructor&&"Object"===Object.prototype.toString.call(t).slice(8,-1)}function f(...t){const e=Object(t[0]),n=["__proto__","constructor","prototype"];for(let i=1;i<t.length;i+=1){const o=t[i];if(null!=o&&(r=o,!("undefined"!=typeof window&&void 0!==window.HTMLElement?r instanceof HTMLElement:r&&(1===r.nodeType||11===r.nodeType)))){const t=Object.keys(Object(o)).filter((t=>n.indexOf(t)<0));for(let n=0,r=t.length;n<r;n+=1){const r=t[n],i=Object.getOwnPropertyDescriptor(o,r);void 0!==i&&i.enumerable&&(d(e[r])&&d(o[r])?o[r].__swiper__?e[r]=o[r]:f(e[r],o[r]):!d(e[r])&&d(o[r])?(e[r]={},o[r].__swiper__?e[r]=o[r]:f(e[r],o[r])):e[r]=o[r])}}}var r;return e}function p(t,e,n){t.style.setProperty(e,n)}function m({swiper:t,targetPosition:e,side:n}){const r=u(),i=-t.translate;let o,a=null;const s=t.params.speed;t.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(t.cssModeFrameID);const l=e>i?"next":"prev",c=(t,e)=>"next"===l&&t>=e||"prev"===l&&t<=e,h=()=>{o=(new Date).getTime(),null===a&&(a=o);const u=Math.max(Math.min((o-a)/s,1),0),l=.5-Math.cos(u*Math.PI)/2;let d=i+l*(e-i);if(c(d,e)&&(d=e),t.wrapperEl.scrollTo({[n]:d}),c(d,e))return t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout((()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[n]:d})})),void r.cancelAnimationFrame(t.cssModeFrameID);t.cssModeFrameID=r.requestAnimationFrame(h)};h()}function g(t,e=""){return[...t.children].filter((t=>t.matches(e)))}function v(t,e){return u().getComputedStyle(t,null).getPropertyValue(e)}function y(t){let e,n=t;if(n){for(e=0;null!==(n=n.previousSibling);)1===n.nodeType&&(e+=1);return e}}function b(t,e,n){const r=u();return n?t["width"===e?"offsetWidth":"offsetHeight"]+parseFloat(r.getComputedStyle(t,null).getPropertyValue("width"===e?"margin-right":"margin-top"))+parseFloat(r.getComputedStyle(t,null).getPropertyValue("width"===e?"margin-left":"margin-bottom")):t.offsetWidth}let x,w,_;function S(){return x||(x=function(){const t=u(),e=a();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch)}}()),x}function E(t={}){return w||(w=function({userAgent:t}={}){const e=S(),n=u(),r=n.navigator.platform,i=t||n.navigator.userAgent,o={ios:!1,android:!1},a=n.screen.width,s=n.screen.height,l=i.match(/(Android);?[\s\/]+([\d.]+)?/);let c=i.match(/(iPad).*OS\s([\d_]+)/);const h=i.match(/(iPod)(.*OS\s([\d_]+))?/),d=!c&&i.match(/(iPhone\sOS|iOS)\s([\d_]+)/),f="Win32"===r;let p="MacIntel"===r;return!c&&p&&e.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(`${a}x${s}`)>=0&&(c=i.match(/(Version)\/([\d.]+)/),c||(c=[0,1,"13_0_0"]),p=!1),l&&!f&&(o.os="android",o.android=!0),(c||d||h)&&(o.os="ios",o.ios=!0),o}(t)),w}function A(){return _||(_=function(){const t=u();let e=!1;function n(){const e=t.navigator.userAgent.toLowerCase();return e.indexOf("safari")>=0&&e.indexOf("chrome")<0&&e.indexOf("android")<0}if(n()){const n=String(t.navigator.userAgent);if(n.includes("Version/")){const[t,r]=n.split("Version/")[1].split(" ")[0].split(".").map((t=>Number(t)));e=t<16||16===t&&r<2}}return{isSafari:e||n(),needPerspectiveFix:e,isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent)}}()),_}const M={on(t,e,n){const r=this;if(!r.eventsListeners||r.destroyed)return r;if("function"!=typeof e)return r;const i=n?"unshift":"push";return t.split(" ").forEach((t=>{r.eventsListeners[t]||(r.eventsListeners[t]=[]),r.eventsListeners[t][i](e)})),r},once(t,e,n){const r=this;if(!r.eventsListeners||r.destroyed)return r;if("function"!=typeof e)return r;function i(...n){r.off(t,i),i.__emitterProxy&&delete i.__emitterProxy,e.apply(r,n)}return i.__emitterProxy=e,r.on(t,i,n)},onAny(t,e){const n=this;if(!n.eventsListeners||n.destroyed)return n;if("function"!=typeof t)return n;const r=e?"unshift":"push";return n.eventsAnyListeners.indexOf(t)<0&&n.eventsAnyListeners[r](t),n},offAny(t){const e=this;if(!e.eventsListeners||e.destroyed)return e;if(!e.eventsAnyListeners)return e;const n=e.eventsAnyListeners.indexOf(t);return n>=0&&e.eventsAnyListeners.splice(n,1),e},off(t,e){const n=this;return!n.eventsListeners||n.destroyed?n:n.eventsListeners?(t.split(" ").forEach((t=>{void 0===e?n.eventsListeners[t]=[]:n.eventsListeners[t]&&n.eventsListeners[t].forEach(((r,i)=>{(r===e||r.__emitterProxy&&r.__emitterProxy===e)&&n.eventsListeners[t].splice(i,1)}))})),n):n},emit(...t){const e=this;if(!e.eventsListeners||e.destroyed)return e;if(!e.eventsListeners)return e;let n,r,i;"string"==typeof t[0]||Array.isArray(t[0])?(n=t[0],r=t.slice(1,t.length),i=e):(n=t[0].events,r=t[0].data,i=t[0].context||e),r.unshift(i);return(Array.isArray(n)?n:n.split(" ")).forEach((t=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach((e=>{e.apply(i,[t,...r])})),e.eventsListeners&&e.eventsListeners[t]&&e.eventsListeners[t].forEach((t=>{t.apply(i,r)}))})),e}};const C=(t,e)=>{if(!t||t.destroyed||!t.params)return;const n=e.closest(t.isElement?"swiper-slide":`.${t.params.slideClass}`);if(n){const e=n.querySelector(`.${t.params.lazyPreloaderClass}`);e&&e.remove()}},T=(t,e)=>{if(!t.slides[e])return;const n=t.slides[e].querySelector('[loading="lazy"]');n&&n.removeAttribute("loading")},k=t=>{if(!t||t.destroyed||!t.params)return;let e=t.params.lazyPreloadPrevNext;const n=t.slides.length;if(!n||!e||e<0)return;e=Math.min(e,n);const r="auto"===t.params.slidesPerView?t.slidesPerViewDynamic():Math.ceil(t.params.slidesPerView),i=t.activeIndex;if(t.params.grid&&t.params.grid.rows>1){const n=i,o=[n-e];return o.push(...Array.from({length:e}).map(((t,e)=>n+r+e))),void t.slides.forEach(((e,n)=>{o.includes(e.column)&&T(t,n)}))}const o=i+r-1;if(t.params.rewind||t.params.loop)for(let r=i-e;r<=o+e;r+=1){const e=(r%n+n)%n;(e<i||e>o)&&T(t,e)}else for(let r=Math.max(i-e,0);r<=Math.min(o+e,n-1);r+=1)r!==i&&(r>o||r<i)&&T(t,r)};const I={updateSize:function(){const t=this;let e,n;const r=t.el;e=void 0!==t.params.width&&null!==t.params.width?t.params.width:r.clientWidth,n=void 0!==t.params.height&&null!==t.params.height?t.params.height:r.clientHeight,0===e&&t.isHorizontal()||0===n&&t.isVertical()||(e=e-parseInt(v(r,"padding-left")||0,10)-parseInt(v(r,"padding-right")||0,10),n=n-parseInt(v(r,"padding-top")||0,10)-parseInt(v(r,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(n)&&(n=0),Object.assign(t,{width:e,height:n,size:t.isHorizontal()?e:n}))},updateSlides:function(){const t=this;function e(e){return t.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}function n(t,n){return parseFloat(t.getPropertyValue(e(n))||0)}const r=t.params,{wrapperEl:i,slidesEl:o,size:a,rtlTranslate:s,wrongRTL:u}=t,l=t.virtual&&r.virtual.enabled,c=l?t.virtual.slides.length:t.slides.length,h=g(o,`.${t.params.slideClass}, swiper-slide`),d=l?t.virtual.slides.length:h.length;let f=[];const m=[],y=[];let x=r.slidesOffsetBefore;"function"==typeof x&&(x=r.slidesOffsetBefore.call(t));let w=r.slidesOffsetAfter;"function"==typeof w&&(w=r.slidesOffsetAfter.call(t));const _=t.snapGrid.length,S=t.slidesGrid.length;let E=r.spaceBetween,A=-x,M=0,C=0;if(void 0===a)return;"string"==typeof E&&E.indexOf("%")>=0?E=parseFloat(E.replace("%",""))/100*a:"string"==typeof E&&(E=parseFloat(E)),t.virtualSize=-E,h.forEach((t=>{s?t.style.marginLeft="":t.style.marginRight="",t.style.marginBottom="",t.style.marginTop=""})),r.centeredSlides&&r.cssMode&&(p(i,"--swiper-centered-offset-before",""),p(i,"--swiper-centered-offset-after",""));const T=r.grid&&r.grid.rows>1&&t.grid;let k;T&&t.grid.initSlides(d);const I="auto"===r.slidesPerView&&r.breakpoints&&Object.keys(r.breakpoints).filter((t=>void 0!==r.breakpoints[t].slidesPerView)).length>0;for(let i=0;i<d;i+=1){let o;if(k=0,h[i]&&(o=h[i]),T&&t.grid.updateSlide(i,o,d,e),!h[i]||"none"!==v(o,"display")){if("auto"===r.slidesPerView){I&&(h[i].style[e("width")]="");const a=getComputedStyle(o),s=o.style.transform,u=o.style.webkitTransform;if(s&&(o.style.transform="none"),u&&(o.style.webkitTransform="none"),r.roundLengths)k=t.isHorizontal()?b(o,"width",!0):b(o,"height",!0);else{const t=n(a,"width"),e=n(a,"padding-left"),r=n(a,"padding-right"),i=n(a,"margin-left"),s=n(a,"margin-right"),u=a.getPropertyValue("box-sizing");if(u&&"border-box"===u)k=t+i+s;else{const{clientWidth:n,offsetWidth:a}=o;k=t+e+r+i+s+(a-n)}}s&&(o.style.transform=s),u&&(o.style.webkitTransform=u),r.roundLengths&&(k=Math.floor(k))}else k=(a-(r.slidesPerView-1)*E)/r.slidesPerView,r.roundLengths&&(k=Math.floor(k)),h[i]&&(h[i].style[e("width")]=`${k}px`);h[i]&&(h[i].swiperSlideSize=k),y.push(k),r.centeredSlides?(A=A+k/2+M/2+E,0===M&&0!==i&&(A=A-a/2-E),0===i&&(A=A-a/2-E),Math.abs(A)<.001&&(A=0),r.roundLengths&&(A=Math.floor(A)),C%r.slidesPerGroup==0&&f.push(A),m.push(A)):(r.roundLengths&&(A=Math.floor(A)),(C-Math.min(t.params.slidesPerGroupSkip,C))%t.params.slidesPerGroup==0&&f.push(A),m.push(A),A=A+k+E),t.virtualSize+=k+E,M=k,C+=1}}if(t.virtualSize=Math.max(t.virtualSize,a)+w,s&&u&&("slide"===r.effect||"coverflow"===r.effect)&&(i.style.width=`${t.virtualSize+E}px`),r.setWrapperSize&&(i.style[e("width")]=`${t.virtualSize+E}px`),T&&t.grid.updateWrapperSize(k,f,e),!r.centeredSlides){const e=[];for(let n=0;n<f.length;n+=1){let i=f[n];r.roundLengths&&(i=Math.floor(i)),f[n]<=t.virtualSize-a&&e.push(i)}f=e,Math.floor(t.virtualSize-a)-Math.floor(f[f.length-1])>1&&f.push(t.virtualSize-a)}if(l&&r.loop){const e=y[0]+E;if(r.slidesPerGroup>1){const n=Math.ceil((t.virtual.slidesBefore+t.virtual.slidesAfter)/r.slidesPerGroup),i=e*r.slidesPerGroup;for(let t=0;t<n;t+=1)f.push(f[f.length-1]+i)}for(let n=0;n<t.virtual.slidesBefore+t.virtual.slidesAfter;n+=1)1===r.slidesPerGroup&&f.push(f[f.length-1]+e),m.push(m[m.length-1]+e),t.virtualSize+=e}if(0===f.length&&(f=[0]),0!==E){const n=t.isHorizontal()&&s?"marginLeft":e("marginRight");h.filter(((t,e)=>!(r.cssMode&&!r.loop)||e!==h.length-1)).forEach((t=>{t.style[n]=`${E}px`}))}if(r.centeredSlides&&r.centeredSlidesBounds){let t=0;y.forEach((e=>{t+=e+(E||0)})),t-=E;const e=t-a;f=f.map((t=>t<=0?-x:t>e?e+w:t))}if(r.centerInsufficientSlides){let t=0;if(y.forEach((e=>{t+=e+(E||0)})),t-=E,t<a){const e=(a-t)/2;f.forEach(((t,n)=>{f[n]=t-e})),m.forEach(((t,n)=>{m[n]=t+e}))}}if(Object.assign(t,{slides:h,snapGrid:f,slidesGrid:m,slidesSizesGrid:y}),r.centeredSlides&&r.cssMode&&!r.centeredSlidesBounds){p(i,"--swiper-centered-offset-before",-f[0]+"px"),p(i,"--swiper-centered-offset-after",t.size/2-y[y.length-1]/2+"px");const e=-t.snapGrid[0],n=-t.slidesGrid[0];t.snapGrid=t.snapGrid.map((t=>t+e)),t.slidesGrid=t.slidesGrid.map((t=>t+n))}if(d!==c&&t.emit("slidesLengthChange"),f.length!==_&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),m.length!==S&&t.emit("slidesGridLengthChange"),r.watchSlidesProgress&&t.updateSlidesOffset(),!(l||r.cssMode||"slide"!==r.effect&&"fade"!==r.effect)){const e=`${r.containerModifierClass}backface-hidden`,n=t.el.classList.contains(e);d<=r.maxBackfaceHiddenSlides?n||t.el.classList.add(e):n&&t.el.classList.remove(e)}},updateAutoHeight:function(t){const e=this,n=[],r=e.virtual&&e.params.virtual.enabled;let i,o=0;"number"==typeof t?e.setTransition(t):!0===t&&e.setTransition(e.params.speed);const a=t=>r?e.slides[e.getSlideIndexByData(t)]:e.slides[t];if("auto"!==e.params.slidesPerView&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach((t=>{n.push(t)}));else for(i=0;i<Math.ceil(e.params.slidesPerView);i+=1){const t=e.activeIndex+i;if(t>e.slides.length&&!r)break;n.push(a(t))}else n.push(a(e.activeIndex));for(i=0;i<n.length;i+=1)if(void 0!==n[i]){const t=n[i].offsetHeight;o=t>o?t:o}(o||0===o)&&(e.wrapperEl.style.height=`${o}px`)},updateSlidesOffset:function(){const t=this,e=t.slides,n=t.isElement?t.isHorizontal()?t.wrapperEl.offsetLeft:t.wrapperEl.offsetTop:0;for(let r=0;r<e.length;r+=1)e[r].swiperSlideOffset=(t.isHorizontal()?e[r].offsetLeft:e[r].offsetTop)-n-t.cssOverflowAdjustment()},updateSlidesProgress:function(t=this&&this.translate||0){const e=this,n=e.params,{slides:r,rtlTranslate:i,snapGrid:o}=e;if(0===r.length)return;void 0===r[0].swiperSlideOffset&&e.updateSlidesOffset();let a=-t;i&&(a=t),r.forEach((t=>{t.classList.remove(n.slideVisibleClass)})),e.visibleSlidesIndexes=[],e.visibleSlides=[];let s=n.spaceBetween;"string"==typeof s&&s.indexOf("%")>=0?s=parseFloat(s.replace("%",""))/100*e.size:"string"==typeof s&&(s=parseFloat(s));for(let t=0;t<r.length;t+=1){const u=r[t];let l=u.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(l-=r[0].swiperSlideOffset);const c=(a+(n.centeredSlides?e.minTranslate():0)-l)/(u.swiperSlideSize+s),h=(a-o[0]+(n.centeredSlides?e.minTranslate():0)-l)/(u.swiperSlideSize+s),d=-(a-l),f=d+e.slidesSizesGrid[t];(d>=0&&d<e.size-1||f>1&&f<=e.size||d<=0&&f>=e.size)&&(e.visibleSlides.push(u),e.visibleSlidesIndexes.push(t),r[t].classList.add(n.slideVisibleClass)),u.progress=i?-c:c,u.originalProgress=i?-h:h}},updateProgress:function(t){const e=this;if(void 0===t){const n=e.rtlTranslate?-1:1;t=e&&e.translate&&e.translate*n||0}const n=e.params,r=e.maxTranslate()-e.minTranslate();let{progress:i,isBeginning:o,isEnd:a,progressLoop:s}=e;const u=o,l=a;if(0===r)i=0,o=!0,a=!0;else{i=(t-e.minTranslate())/r;const n=Math.abs(t-e.minTranslate())<1,s=Math.abs(t-e.maxTranslate())<1;o=n||i<=0,a=s||i>=1,n&&(i=0),s&&(i=1)}if(n.loop){const n=e.getSlideIndexByData(0),r=e.getSlideIndexByData(e.slides.length-1),i=e.slidesGrid[n],o=e.slidesGrid[r],a=e.slidesGrid[e.slidesGrid.length-1],u=Math.abs(t);s=u>=i?(u-i)/a:(u+a-o)/a,s>1&&(s-=1)}Object.assign(e,{progress:i,progressLoop:s,isBeginning:o,isEnd:a}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&e.updateSlidesProgress(t),o&&!u&&e.emit("reachBeginning toEdge"),a&&!l&&e.emit("reachEnd toEdge"),(u&&!o||l&&!a)&&e.emit("fromEdge"),e.emit("progress",i)},updateSlidesClasses:function(){const t=this,{slides:e,params:n,slidesEl:r,activeIndex:i}=t,o=t.virtual&&n.virtual.enabled,a=t=>g(r,`.${n.slideClass}${t}, swiper-slide${t}`)[0];let s;if(e.forEach((t=>{t.classList.remove(n.slideActiveClass,n.slideNextClass,n.slidePrevClass)})),o)if(n.loop){let e=i-t.virtual.slidesBefore;e<0&&(e=t.virtual.slides.length+e),e>=t.virtual.slides.length&&(e-=t.virtual.slides.length),s=a(`[data-swiper-slide-index="${e}"]`)}else s=a(`[data-swiper-slide-index="${i}"]`);else s=e[i];if(s){s.classList.add(n.slideActiveClass);let t=function(t,e){const n=[];for(;t.nextElementSibling;){const r=t.nextElementSibling;e?r.matches(e)&&n.push(r):n.push(r),t=r}return n}(s,`.${n.slideClass}, swiper-slide`)[0];n.loop&&!t&&(t=e[0]),t&&t.classList.add(n.slideNextClass);let r=function(t,e){const n=[];for(;t.previousElementSibling;){const r=t.previousElementSibling;e?r.matches(e)&&n.push(r):n.push(r),t=r}return n}(s,`.${n.slideClass}, swiper-slide`)[0];n.loop&&0===!r&&(r=e[e.length-1]),r&&r.classList.add(n.slidePrevClass)}t.emitSlidesClasses()},updateActiveIndex:function(t){const e=this,n=e.rtlTranslate?e.translate:-e.translate,{snapGrid:r,params:i,activeIndex:o,realIndex:a,snapIndex:s}=e;let u,l=t;const c=t=>{let n=t-e.virtual.slidesBefore;return n<0&&(n=e.virtual.slides.length+n),n>=e.virtual.slides.length&&(n-=e.virtual.slides.length),n};if(void 0===l&&(l=function(t){const{slidesGrid:e,params:n}=t,r=t.rtlTranslate?t.translate:-t.translate;let i;for(let t=0;t<e.length;t+=1)void 0!==e[t+1]?r>=e[t]&&r<e[t+1]-(e[t+1]-e[t])/2?i=t:r>=e[t]&&r<e[t+1]&&(i=t+1):r>=e[t]&&(i=t);return n.normalizeSlideIndex&&(i<0||void 0===i)&&(i=0),i}(e)),r.indexOf(n)>=0)u=r.indexOf(n);else{const t=Math.min(i.slidesPerGroupSkip,l);u=t+Math.floor((l-t)/i.slidesPerGroup)}if(u>=r.length&&(u=r.length-1),l===o)return u!==s&&(e.snapIndex=u,e.emit("snapIndexChange")),void(e.params.loop&&e.virtual&&e.params.virtual.enabled&&(e.realIndex=c(l)));let h;h=e.virtual&&i.virtual.enabled&&i.loop?c(l):e.slides[l]?parseInt(e.slides[l].getAttribute("data-swiper-slide-index")||l,10):l,Object.assign(e,{previousSnapIndex:s,snapIndex:u,previousRealIndex:a,realIndex:h,previousIndex:o,activeIndex:l}),e.initialized&&k(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),a!==h&&e.emit("realIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&e.emit("slideChange")},updateClickedSlide:function(t){const e=this,n=e.params,r=t.closest(`.${n.slideClass}, swiper-slide`);let i,o=!1;if(r)for(let t=0;t<e.slides.length;t+=1)if(e.slides[t]===r){o=!0,i=t;break}if(!r||!o)return e.clickedSlide=void 0,void(e.clickedIndex=void 0);e.clickedSlide=r,e.virtual&&e.params.virtual.enabled?e.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):e.clickedIndex=i,n.slideToClickedSlide&&void 0!==e.clickedIndex&&e.clickedIndex!==e.activeIndex&&e.slideToClickedSlide()}};const N={getTranslate:function(t=(this.isHorizontal()?"x":"y")){const{params:e,rtlTranslate:n,translate:r,wrapperEl:i}=this;if(e.virtualTranslate)return n?-r:r;if(e.cssMode)return r;let o=h(i,t);return o+=this.cssOverflowAdjustment(),n&&(o=-o),o||0},setTranslate:function(t,e){const n=this,{rtlTranslate:r,params:i,wrapperEl:o,progress:a}=n;let s,u=0,l=0;n.isHorizontal()?u=r?-t:t:l=t,i.roundLengths&&(u=Math.floor(u),l=Math.floor(l)),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?u:l,i.cssMode?o[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-u:-l:i.virtualTranslate||(n.isHorizontal()?u-=n.cssOverflowAdjustment():l-=n.cssOverflowAdjustment(),o.style.transform=`translate3d(${u}px, ${l}px, 0px)`);const c=n.maxTranslate()-n.minTranslate();s=0===c?0:(t-n.minTranslate())/c,s!==a&&n.updateProgress(t),n.emit("setTranslate",n.translate,e)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(t=0,e=this.params.speed,n=!0,r=!0,i){const o=this,{params:a,wrapperEl:s}=o;if(o.animating&&a.preventInteractionOnTransition)return!1;const u=o.minTranslate(),l=o.maxTranslate();let c;if(c=r&&t>u?u:r&&t<l?l:t,o.updateProgress(c),a.cssMode){const t=o.isHorizontal();if(0===e)s[t?"scrollLeft":"scrollTop"]=-c;else{if(!o.support.smoothScroll)return m({swiper:o,targetPosition:-c,side:t?"left":"top"}),!0;s.scrollTo({[t?"left":"top"]:-c,behavior:"smooth"})}return!0}return 0===e?(o.setTransition(0),o.setTranslate(c),n&&(o.emit("beforeTransitionStart",e,i),o.emit("transitionEnd"))):(o.setTransition(e),o.setTranslate(c),n&&(o.emit("beforeTransitionStart",e,i),o.emit("transitionStart")),o.animating||(o.animating=!0,o.onTranslateToWrapperTransitionEnd||(o.onTranslateToWrapperTransitionEnd=function(t){o&&!o.destroyed&&t.target===this&&(o.wrapperEl.removeEventListener("transitionend",o.onTranslateToWrapperTransitionEnd),o.onTranslateToWrapperTransitionEnd=null,delete o.onTranslateToWrapperTransitionEnd,n&&o.emit("transitionEnd"))}),o.wrapperEl.addEventListener("transitionend",o.onTranslateToWrapperTransitionEnd))),!0}};function P({swiper:t,runCallbacks:e,direction:n,step:r}){const{activeIndex:i,previousIndex:o}=t;let a=n;if(a||(a=i>o?"next":i<o?"prev":"reset"),t.emit(`transition${r}`),e&&i!==o){if("reset"===a)return void t.emit(`slideResetTransition${r}`);t.emit(`slideChangeTransition${r}`),"next"===a?t.emit(`slideNextTransition${r}`):t.emit(`slidePrevTransition${r}`)}}const O={slideTo:function(t=0,e=this.params.speed,n=!0,r,i){"string"==typeof t&&(t=parseInt(t,10));const o=this;let a=t;a<0&&(a=0);const{params:s,snapGrid:u,slidesGrid:l,previousIndex:c,activeIndex:h,rtlTranslate:d,wrapperEl:f,enabled:p}=o;if(o.animating&&s.preventInteractionOnTransition||!p&&!r&&!i)return!1;const g=Math.min(o.params.slidesPerGroupSkip,a);let v=g+Math.floor((a-g)/o.params.slidesPerGroup);v>=u.length&&(v=u.length-1);const y=-u[v];if(s.normalizeSlideIndex)for(let t=0;t<l.length;t+=1){const e=-Math.floor(100*y),n=Math.floor(100*l[t]),r=Math.floor(100*l[t+1]);void 0!==l[t+1]?e>=n&&e<r-(r-n)/2?a=t:e>=n&&e<r&&(a=t+1):e>=n&&(a=t)}if(o.initialized&&a!==h){if(!o.allowSlideNext&&(d?y>o.translate&&y>o.minTranslate():y<o.translate&&y<o.minTranslate()))return!1;if(!o.allowSlidePrev&&y>o.translate&&y>o.maxTranslate()&&(h||0)!==a)return!1}let b;if(a!==(c||0)&&n&&o.emit("beforeSlideChangeStart"),o.updateProgress(y),b=a>h?"next":a<h?"prev":"reset",d&&-y===o.translate||!d&&y===o.translate)return o.updateActiveIndex(a),s.autoHeight&&o.updateAutoHeight(),o.updateSlidesClasses(),"slide"!==s.effect&&o.setTranslate(y),"reset"!==b&&(o.transitionStart(n,b),o.transitionEnd(n,b)),!1;if(s.cssMode){const t=o.isHorizontal(),n=d?y:-y;if(0===e){const e=o.virtual&&o.params.virtual.enabled;e&&(o.wrapperEl.style.scrollSnapType="none",o._immediateVirtual=!0),e&&!o._cssModeVirtualInitialSet&&o.params.initialSlide>0?(o._cssModeVirtualInitialSet=!0,requestAnimationFrame((()=>{f[t?"scrollLeft":"scrollTop"]=n}))):f[t?"scrollLeft":"scrollTop"]=n,e&&requestAnimationFrame((()=>{o.wrapperEl.style.scrollSnapType="",o._immediateVirtual=!1}))}else{if(!o.support.smoothScroll)return m({swiper:o,targetPosition:n,side:t?"left":"top"}),!0;f.scrollTo({[t?"left":"top"]:n,behavior:"smooth"})}return!0}return o.setTransition(e),o.setTranslate(y),o.updateActiveIndex(a),o.updateSlidesClasses(),o.emit("beforeTransitionStart",e,r),o.transitionStart(n,b),0===e?o.transitionEnd(n,b):o.animating||(o.animating=!0,o.onSlideToWrapperTransitionEnd||(o.onSlideToWrapperTransitionEnd=function(t){o&&!o.destroyed&&t.target===this&&(o.wrapperEl.removeEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.onSlideToWrapperTransitionEnd=null,delete o.onSlideToWrapperTransitionEnd,o.transitionEnd(n,b))}),o.wrapperEl.addEventListener("transitionend",o.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function(t=0,e=this.params.speed,n=!0,r){if("string"==typeof t){t=parseInt(t,10)}const i=this;let o=t;return i.params.loop&&(i.virtual&&i.params.virtual.enabled?o+=i.virtual.slidesBefore:o=i.getSlideIndexByData(o)),i.slideTo(o,e,n,r)},slideNext:function(t=this.params.speed,e=!0,n){const r=this,{enabled:i,params:o,animating:a}=r;if(!i)return r;let s=o.slidesPerGroup;"auto"===o.slidesPerView&&1===o.slidesPerGroup&&o.slidesPerGroupAuto&&(s=Math.max(r.slidesPerViewDynamic("current",!0),1));const u=r.activeIndex<o.slidesPerGroupSkip?1:s,l=r.virtual&&o.virtual.enabled;if(o.loop){if(a&&!l&&o.loopPreventsSliding)return!1;r.loopFix({direction:"next"}),r._clientLeft=r.wrapperEl.clientLeft}return o.rewind&&r.isEnd?r.slideTo(0,t,e,n):r.slideTo(r.activeIndex+u,t,e,n)},slidePrev:function(t=this.params.speed,e=!0,n){const r=this,{params:i,snapGrid:o,slidesGrid:a,rtlTranslate:s,enabled:u,animating:l}=r;if(!u)return r;const c=r.virtual&&i.virtual.enabled;if(i.loop){if(l&&!c&&i.loopPreventsSliding)return!1;r.loopFix({direction:"prev"}),r._clientLeft=r.wrapperEl.clientLeft}function h(t){return t<0?-Math.floor(Math.abs(t)):Math.floor(t)}const d=h(s?r.translate:-r.translate),f=o.map((t=>h(t)));let p=o[f.indexOf(d)-1];if(void 0===p&&i.cssMode){let t;o.forEach(((e,n)=>{d>=e&&(t=n)})),void 0!==t&&(p=o[t>0?t-1:t])}let m=0;if(void 0!==p&&(m=a.indexOf(p),m<0&&(m=r.activeIndex-1),"auto"===i.slidesPerView&&1===i.slidesPerGroup&&i.slidesPerGroupAuto&&(m=m-r.slidesPerViewDynamic("previous",!0)+1,m=Math.max(m,0))),i.rewind&&r.isBeginning){const i=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1;return r.slideTo(i,t,e,n)}return r.slideTo(m,t,e,n)},slideReset:function(t=this.params.speed,e=!0,n){return this.slideTo(this.activeIndex,t,e,n)},slideToClosest:function(t=this.params.speed,e=!0,n,r=.5){const i=this;let o=i.activeIndex;const a=Math.min(i.params.slidesPerGroupSkip,o),s=a+Math.floor((o-a)/i.params.slidesPerGroup),u=i.rtlTranslate?i.translate:-i.translate;if(u>=i.snapGrid[s]){const t=i.snapGrid[s];u-t>(i.snapGrid[s+1]-t)*r&&(o+=i.params.slidesPerGroup)}else{const t=i.snapGrid[s-1];u-t<=(i.snapGrid[s]-t)*r&&(o-=i.params.slidesPerGroup)}return o=Math.max(o,0),o=Math.min(o,i.slidesGrid.length-1),i.slideTo(o,t,e,n)},slideToClickedSlide:function(){const t=this,{params:e,slidesEl:n}=t,r="auto"===e.slidesPerView?t.slidesPerViewDynamic():e.slidesPerView;let i,o=t.clickedIndex;const a=t.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(t.animating)return;i=parseInt(t.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?o<t.loopedSlides-r/2||o>t.slides.length-t.loopedSlides+r/2?(t.loopFix(),o=t.getSlideIndex(g(n,`${a}[data-swiper-slide-index="${i}"]`)[0]),l((()=>{t.slideTo(o)}))):t.slideTo(o):o>t.slides.length-r?(t.loopFix(),o=t.getSlideIndex(g(n,`${a}[data-swiper-slide-index="${i}"]`)[0]),l((()=>{t.slideTo(o)}))):t.slideTo(o)}else t.slideTo(o)}};const L={loopCreate:function(t){const e=this,{params:n,slidesEl:r}=e;if(!n.loop||e.virtual&&e.params.virtual.enabled)return;g(r,`.${n.slideClass}, swiper-slide`).forEach(((t,e)=>{t.setAttribute("data-swiper-slide-index",e)})),e.loopFix({slideRealIndex:t,direction:n.centeredSlides?void 0:"next"})},loopFix:function({slideRealIndex:t,slideTo:e=!0,direction:n,setTranslate:r,activeSlideIndex:i,byController:o,byMousewheel:a}={}){const s=this;if(!s.params.loop)return;s.emit("beforeLoopFix");const{slides:u,allowSlidePrev:l,allowSlideNext:c,slidesEl:h,params:d}=s;if(s.allowSlidePrev=!0,s.allowSlideNext=!0,s.virtual&&d.virtual.enabled)return e&&(d.centeredSlides||0!==s.snapIndex?d.centeredSlides&&s.snapIndex<d.slidesPerView?s.slideTo(s.virtual.slides.length+s.snapIndex,0,!1,!0):s.snapIndex===s.snapGrid.length-1&&s.slideTo(s.virtual.slidesBefore,0,!1,!0):s.slideTo(s.virtual.slides.length,0,!1,!0)),s.allowSlidePrev=l,s.allowSlideNext=c,void s.emit("loopFix");const f="auto"===d.slidesPerView?s.slidesPerViewDynamic():Math.ceil(parseFloat(d.slidesPerView,10));let p=d.loopedSlides||f;p%d.slidesPerGroup!=0&&(p+=d.slidesPerGroup-p%d.slidesPerGroup),s.loopedSlides=p;const m=[],g=[];let v=s.activeIndex;void 0===i?i=s.getSlideIndex(s.slides.filter((t=>t.classList.contains(d.slideActiveClass)))[0]):v=i;const y="next"===n||!n,b="prev"===n||!n;let x=0,w=0;if(i<p){x=Math.max(p-i,d.slidesPerGroup);for(let t=0;t<p-i;t+=1){const e=t-Math.floor(t/u.length)*u.length;m.push(u.length-e-1)}}else if(i>s.slides.length-2*p){w=Math.max(i-(s.slides.length-2*p),d.slidesPerGroup);for(let t=0;t<w;t+=1){const e=t-Math.floor(t/u.length)*u.length;g.push(e)}}if(b&&m.forEach((t=>{s.slides[t].swiperLoopMoveDOM=!0,h.prepend(s.slides[t]),s.slides[t].swiperLoopMoveDOM=!1})),y&&g.forEach((t=>{s.slides[t].swiperLoopMoveDOM=!0,h.append(s.slides[t]),s.slides[t].swiperLoopMoveDOM=!1})),s.recalcSlides(),"auto"===d.slidesPerView&&s.updateSlides(),d.watchSlidesProgress&&s.updateSlidesOffset(),e)if(m.length>0&&b)if(void 0===t){const t=s.slidesGrid[v],e=s.slidesGrid[v+x]-t;a?s.setTranslate(s.translate-e):(s.slideTo(v+x,0,!1,!0),r&&(s.touches[s.isHorizontal()?"startX":"startY"]+=e))}else r&&s.slideToLoop(t,0,!1,!0);else if(g.length>0&&y)if(void 0===t){const t=s.slidesGrid[v],e=s.slidesGrid[v-w]-t;a?s.setTranslate(s.translate-e):(s.slideTo(v-w,0,!1,!0),r&&(s.touches[s.isHorizontal()?"startX":"startY"]+=e))}else s.slideToLoop(t,0,!1,!0);if(s.allowSlidePrev=l,s.allowSlideNext=c,s.controller&&s.controller.control&&!o){const e={slideRealIndex:t,slideTo:!1,direction:n,setTranslate:r,activeSlideIndex:i,byController:!0};Array.isArray(s.controller.control)?s.controller.control.forEach((t=>{!t.destroyed&&t.params.loop&&t.loopFix(e)})):s.controller.control instanceof s.constructor&&s.controller.control.params.loop&&s.controller.control.loopFix(e)}s.emit("loopFix")},loopDestroy:function(){const t=this,{params:e,slidesEl:n}=t;if(!e.loop||t.virtual&&t.params.virtual.enabled)return;t.recalcSlides();const r=[];t.slides.forEach((t=>{const e=void 0===t.swiperSlideIndex?1*t.getAttribute("data-swiper-slide-index"):t.swiperSlideIndex;r[e]=t})),t.slides.forEach((t=>{t.removeAttribute("data-swiper-slide-index")})),r.forEach((t=>{n.append(t)})),t.recalcSlides(),t.slideTo(t.realIndex,0)}};function R(t){const e=this,n=a(),r=u(),i=e.touchEventsData;i.evCache.push(t);const{params:o,touches:s,enabled:l}=e;if(!l)return;if(!o.simulateTouch&&"mouse"===t.pointerType)return;if(e.animating&&o.preventInteractionOnTransition)return;!e.animating&&o.cssMode&&o.loop&&e.loopFix();let h=t;h.originalEvent&&(h=h.originalEvent);let d=h.target;if("wrapper"===o.touchEventsTarget&&!e.wrapperEl.contains(d))return;if("which"in h&&3===h.which)return;if("button"in h&&h.button>0)return;if(i.isTouched&&i.isMoved)return;const f=!!o.noSwipingClass&&""!==o.noSwipingClass,p=t.composedPath?t.composedPath():t.path;f&&h.target&&h.target.shadowRoot&&p&&(d=p[0]);const m=o.noSwipingSelector?o.noSwipingSelector:`.${o.noSwipingClass}`,g=!(!h.target||!h.target.shadowRoot);if(o.noSwiping&&(g?function(t,e=this){return function e(n){if(!n||n===a()||n===u())return null;n.assignedSlot&&(n=n.assignedSlot);const r=n.closest(t);return r||n.getRootNode?r||e(n.getRootNode().host):null}(e)}(m,d):d.closest(m)))return void(e.allowClick=!0);if(o.swipeHandler&&!d.closest(o.swipeHandler))return;s.currentX=h.pageX,s.currentY=h.pageY;const v=s.currentX,y=s.currentY,b=o.edgeSwipeDetection||o.iOSEdgeSwipeDetection,x=o.edgeSwipeThreshold||o.iOSEdgeSwipeThreshold;if(b&&(v<=x||v>=r.innerWidth-x)){if("prevent"!==b)return;t.preventDefault()}Object.assign(i,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),s.startX=v,s.startY=y,i.touchStartTime=c(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,o.threshold>0&&(i.allowThresholdMove=!1);let w=!0;d.matches(i.focusableElements)&&(w=!1,"SELECT"===d.nodeName&&(i.isTouched=!1)),n.activeElement&&n.activeElement.matches(i.focusableElements)&&n.activeElement!==d&&n.activeElement.blur();const _=w&&e.allowTouchMove&&o.touchStartPreventDefault;!o.touchStartForcePreventDefault&&!_||d.isContentEditable||h.preventDefault(),o.freeMode&&o.freeMode.enabled&&e.freeMode&&e.animating&&!o.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",h)}function D(t){const e=a(),n=this,r=n.touchEventsData,{params:i,touches:o,rtlTranslate:s,enabled:u}=n;if(!u)return;if(!i.simulateTouch&&"mouse"===t.pointerType)return;let l=t;if(l.originalEvent&&(l=l.originalEvent),!r.isTouched)return void(r.startMoving&&r.isScrolling&&n.emit("touchMoveOpposite",l));const h=r.evCache.findIndex((t=>t.pointerId===l.pointerId));h>=0&&(r.evCache[h]=l);const d=r.evCache.length>1?r.evCache[0]:l,f=d.pageX,p=d.pageY;if(l.preventedByNestedSwiper)return o.startX=f,void(o.startY=p);if(!n.allowTouchMove)return l.target.matches(r.focusableElements)||(n.allowClick=!1),void(r.isTouched&&(Object.assign(o,{startX:f,startY:p,prevX:n.touches.currentX,prevY:n.touches.currentY,currentX:f,currentY:p}),r.touchStartTime=c()));if(i.touchReleaseOnEdges&&!i.loop)if(n.isVertical()){if(p<o.startY&&n.translate<=n.maxTranslate()||p>o.startY&&n.translate>=n.minTranslate())return r.isTouched=!1,void(r.isMoved=!1)}else if(f<o.startX&&n.translate<=n.maxTranslate()||f>o.startX&&n.translate>=n.minTranslate())return;if(e.activeElement&&l.target===e.activeElement&&l.target.matches(r.focusableElements))return r.isMoved=!0,void(n.allowClick=!1);if(r.allowTouchCallbacks&&n.emit("touchMove",l),l.targetTouches&&l.targetTouches.length>1)return;o.currentX=f,o.currentY=p;const m=o.currentX-o.startX,g=o.currentY-o.startY;if(n.params.threshold&&Math.sqrt(m**2+g**2)<n.params.threshold)return;if(void 0===r.isScrolling){let t;n.isHorizontal()&&o.currentY===o.startY||n.isVertical()&&o.currentX===o.startX?r.isScrolling=!1:m*m+g*g>=25&&(t=180*Math.atan2(Math.abs(g),Math.abs(m))/Math.PI,r.isScrolling=n.isHorizontal()?t>i.touchAngle:90-t>i.touchAngle)}if(r.isScrolling&&n.emit("touchMoveOpposite",l),void 0===r.startMoving&&(o.currentX===o.startX&&o.currentY===o.startY||(r.startMoving=!0)),r.isScrolling||n.zoom&&n.params.zoom&&n.params.zoom.enabled&&r.evCache.length>1)return void(r.isTouched=!1);if(!r.startMoving)return;n.allowClick=!1,!i.cssMode&&l.cancelable&&l.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&l.stopPropagation();let v=n.isHorizontal()?m:g,y=n.isHorizontal()?o.currentX-o.previousX:o.currentY-o.previousY;i.oneWayMovement&&(v=Math.abs(v)*(s?1:-1),y=Math.abs(y)*(s?1:-1)),o.diff=v,v*=i.touchRatio,s&&(v=-v,y=-y);const b=n.touchesDirection;n.swipeDirection=v>0?"prev":"next",n.touchesDirection=y>0?"prev":"next";const x=n.params.loop&&!i.cssMode;if(!r.isMoved){if(x&&n.loopFix({direction:n.swipeDirection}),r.startTranslate=n.getTranslate(),n.setTransition(0),n.animating){const t=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});n.wrapperEl.dispatchEvent(t)}r.allowMomentumBounce=!1,!i.grabCursor||!0!==n.allowSlideNext&&!0!==n.allowSlidePrev||n.setGrabCursor(!0),n.emit("sliderFirstMove",l)}let w;r.isMoved&&b!==n.touchesDirection&&x&&Math.abs(v)>=1&&(n.loopFix({direction:n.swipeDirection,setTranslate:!0}),w=!0),n.emit("sliderMove",l),r.isMoved=!0,r.currentTranslate=v+r.startTranslate;let _=!0,S=i.resistanceRatio;if(i.touchReleaseOnEdges&&(S=0),v>0?(x&&!w&&r.currentTranslate>(i.centeredSlides?n.minTranslate()-n.size/2:n.minTranslate())&&n.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),r.currentTranslate>n.minTranslate()&&(_=!1,i.resistance&&(r.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+r.startTranslate+v)**S))):v<0&&(x&&!w&&r.currentTranslate<(i.centeredSlides?n.maxTranslate()+n.size/2:n.maxTranslate())&&n.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:n.slides.length-("auto"===i.slidesPerView?n.slidesPerViewDynamic():Math.ceil(parseFloat(i.slidesPerView,10)))}),r.currentTranslate<n.maxTranslate()&&(_=!1,i.resistance&&(r.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-r.startTranslate-v)**S))),_&&(l.preventedByNestedSwiper=!0),!n.allowSlideNext&&"next"===n.swipeDirection&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!n.allowSlidePrev&&"prev"===n.swipeDirection&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),n.allowSlidePrev||n.allowSlideNext||(r.currentTranslate=r.startTranslate),i.threshold>0){if(!(Math.abs(v)>i.threshold||r.allowThresholdMove))return void(r.currentTranslate=r.startTranslate);if(!r.allowThresholdMove)return r.allowThresholdMove=!0,o.startX=o.currentX,o.startY=o.currentY,r.currentTranslate=r.startTranslate,void(o.diff=n.isHorizontal()?o.currentX-o.startX:o.currentY-o.startY)}i.followFinger&&!i.cssMode&&((i.freeMode&&i.freeMode.enabled&&n.freeMode||i.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),i.freeMode&&i.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(r.currentTranslate),n.setTranslate(r.currentTranslate))}function z(t){const e=this,n=e.touchEventsData,r=n.evCache.findIndex((e=>e.pointerId===t.pointerId));if(r>=0&&n.evCache.splice(r,1),["pointercancel","pointerout","pointerleave"].includes(t.type)){if(!("pointercancel"===t.type&&(e.browser.isSafari||e.browser.isWebView)))return}const{params:i,touches:o,rtlTranslate:a,slidesGrid:s,enabled:u}=e;if(!u)return;if(!i.simulateTouch&&"mouse"===t.pointerType)return;let h=t;if(h.originalEvent&&(h=h.originalEvent),n.allowTouchCallbacks&&e.emit("touchEnd",h),n.allowTouchCallbacks=!1,!n.isTouched)return n.isMoved&&i.grabCursor&&e.setGrabCursor(!1),n.isMoved=!1,void(n.startMoving=!1);i.grabCursor&&n.isMoved&&n.isTouched&&(!0===e.allowSlideNext||!0===e.allowSlidePrev)&&e.setGrabCursor(!1);const d=c(),f=d-n.touchStartTime;if(e.allowClick){const t=h.path||h.composedPath&&h.composedPath();e.updateClickedSlide(t&&t[0]||h.target),e.emit("tap click",h),f<300&&d-n.lastClickTime<300&&e.emit("doubleTap doubleClick",h)}if(n.lastClickTime=c(),l((()=>{e.destroyed||(e.allowClick=!0)})),!n.isTouched||!n.isMoved||!e.swipeDirection||0===o.diff||n.currentTranslate===n.startTranslate)return n.isTouched=!1,n.isMoved=!1,void(n.startMoving=!1);let p;if(n.isTouched=!1,n.isMoved=!1,n.startMoving=!1,p=i.followFinger?a?e.translate:-e.translate:-n.currentTranslate,i.cssMode)return;if(i.freeMode&&i.freeMode.enabled)return void e.freeMode.onTouchEnd({currentPos:p});let m=0,g=e.slidesSizesGrid[0];for(let t=0;t<s.length;t+=t<i.slidesPerGroupSkip?1:i.slidesPerGroup){const e=t<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;void 0!==s[t+e]?p>=s[t]&&p<s[t+e]&&(m=t,g=s[t+e]-s[t]):p>=s[t]&&(m=t,g=s[s.length-1]-s[s.length-2])}let v=null,y=null;i.rewind&&(e.isBeginning?y=i.virtual&&i.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(v=0));const b=(p-s[m])/g,x=m<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;if(f>i.longSwipesMs){if(!i.longSwipes)return void e.slideTo(e.activeIndex);"next"===e.swipeDirection&&(b>=i.longSwipesRatio?e.slideTo(i.rewind&&e.isEnd?v:m+x):e.slideTo(m)),"prev"===e.swipeDirection&&(b>1-i.longSwipesRatio?e.slideTo(m+x):null!==y&&b<0&&Math.abs(b)>i.longSwipesRatio?e.slideTo(y):e.slideTo(m))}else{if(!i.shortSwipes)return void e.slideTo(e.activeIndex);e.navigation&&(h.target===e.navigation.nextEl||h.target===e.navigation.prevEl)?h.target===e.navigation.nextEl?e.slideTo(m+x):e.slideTo(m):("next"===e.swipeDirection&&e.slideTo(null!==v?v:m+x),"prev"===e.swipeDirection&&e.slideTo(null!==y?y:m))}}function F(){const t=this,{params:e,el:n}=t;if(n&&0===n.offsetWidth)return;e.breakpoints&&t.setBreakpoint();const{allowSlideNext:r,allowSlidePrev:i,snapGrid:o}=t,a=t.virtual&&t.params.virtual.enabled;t.allowSlideNext=!0,t.allowSlidePrev=!0,t.updateSize(),t.updateSlides(),t.updateSlidesClasses();const s=a&&e.loop;!("auto"===e.slidesPerView||e.slidesPerView>1)||!t.isEnd||t.isBeginning||t.params.centeredSlides||s?t.params.loop&&!a?t.slideToLoop(t.realIndex,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0):t.slideTo(t.slides.length-1,0,!1,!0),t.autoplay&&t.autoplay.running&&t.autoplay.paused&&(clearTimeout(t.autoplay.resizeTimeout),t.autoplay.resizeTimeout=setTimeout((()=>{t.autoplay&&t.autoplay.running&&t.autoplay.paused&&t.autoplay.resume()}),500)),t.allowSlidePrev=i,t.allowSlideNext=r,t.params.watchOverflow&&o!==t.snapGrid&&t.checkOverflow()}function B(t){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&t.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(t.stopPropagation(),t.stopImmediatePropagation())))}function U(){const t=this,{wrapperEl:e,rtlTranslate:n,enabled:r}=t;if(!r)return;let i;t.previousTranslate=t.translate,t.isHorizontal()?t.translate=-e.scrollLeft:t.translate=-e.scrollTop,0===t.translate&&(t.translate=0),t.updateActiveIndex(),t.updateSlidesClasses();const o=t.maxTranslate()-t.minTranslate();i=0===o?0:(t.translate-t.minTranslate())/o,i!==t.progress&&t.updateProgress(n?-t.translate:t.translate),t.emit("setTranslate",t.translate,!1)}function j(t){const e=this;C(e,t.target),e.params.cssMode||"auto"!==e.params.slidesPerView&&!e.params.autoHeight||e.update()}let V=!1;function H(){}const G=(t,e)=>{const n=a(),{params:r,el:i,wrapperEl:o,device:s}=t,u=!!r.nested,l="on"===e?"addEventListener":"removeEventListener",c=e;i[l]("pointerdown",t.onTouchStart,{passive:!1}),n[l]("pointermove",t.onTouchMove,{passive:!1,capture:u}),n[l]("pointerup",t.onTouchEnd,{passive:!0}),n[l]("pointercancel",t.onTouchEnd,{passive:!0}),n[l]("pointerout",t.onTouchEnd,{passive:!0}),n[l]("pointerleave",t.onTouchEnd,{passive:!0}),(r.preventClicks||r.preventClicksPropagation)&&i[l]("click",t.onClick,!0),r.cssMode&&o[l]("scroll",t.onScroll),r.updateOnWindowResize?t[c](s.ios||s.android?"resize orientationchange observerUpdate":"resize observerUpdate",F,!0):t[c]("observerUpdate",F,!0),i[l]("load",t.onLoad,{capture:!0})};const W=(t,e)=>t.grid&&e.grid&&e.grid.rows>1;const X={init:!0,direction:"horizontal",oneWayMovement:!1,touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopedSlides:null,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function Y(t,e){return function(n={}){const r=Object.keys(n)[0],i=n[r];"object"==typeof i&&null!==i?(["navigation","pagination","scrollbar"].indexOf(r)>=0&&!0===t[r]&&(t[r]={auto:!0}),r in t&&"enabled"in i?(!0===t[r]&&(t[r]={enabled:!0}),"object"!=typeof t[r]||"enabled"in t[r]||(t[r].enabled=!0),t[r]||(t[r]={enabled:!1}),f(e,n)):f(e,n)):f(e,n)}}const q={eventsEmitter:M,update:I,translate:N,transition:{setTransition:function(t,e){const n=this;n.params.cssMode||(n.wrapperEl.style.transitionDuration=`${t}ms`),n.emit("setTransition",t,e)},transitionStart:function(t=!0,e){const n=this,{params:r}=n;r.cssMode||(r.autoHeight&&n.updateAutoHeight(),P({swiper:n,runCallbacks:t,direction:e,step:"Start"}))},transitionEnd:function(t=!0,e){const n=this,{params:r}=n;n.animating=!1,r.cssMode||(n.setTransition(0),P({swiper:n,runCallbacks:t,direction:e,step:"End"}))}},slide:O,loop:L,grabCursor:{setGrabCursor:function(t){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const n="container"===e.params.touchEventsTarget?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),n.style.cursor="move",n.style.cursor=t?"grabbing":"grab",e.isElement&&requestAnimationFrame((()=>{e.__preventObserver__=!1}))},unsetGrabCursor:function(){const t=this;t.params.watchOverflow&&t.isLocked||t.params.cssMode||(t.isElement&&(t.__preventObserver__=!0),t["container"===t.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="",t.isElement&&requestAnimationFrame((()=>{t.__preventObserver__=!1})))}},events:{attachEvents:function(){const t=this,e=a(),{params:n}=t;t.onTouchStart=R.bind(t),t.onTouchMove=D.bind(t),t.onTouchEnd=z.bind(t),n.cssMode&&(t.onScroll=U.bind(t)),t.onClick=B.bind(t),t.onLoad=j.bind(t),V||(e.addEventListener("touchstart",H),V=!0),G(t,"on")},detachEvents:function(){G(this,"off")}},breakpoints:{setBreakpoint:function(){const t=this,{realIndex:e,initialized:n,params:r,el:i}=t,o=r.breakpoints;if(!o||o&&0===Object.keys(o).length)return;const a=t.getBreakpoint(o,t.params.breakpointsBase,t.el);if(!a||t.currentBreakpoint===a)return;const s=(a in o?o[a]:void 0)||t.originalParams,u=W(t,r),l=W(t,s),c=r.enabled;u&&!l?(i.classList.remove(`${r.containerModifierClass}grid`,`${r.containerModifierClass}grid-column`),t.emitContainerClasses()):!u&&l&&(i.classList.add(`${r.containerModifierClass}grid`),(s.grid.fill&&"column"===s.grid.fill||!s.grid.fill&&"column"===r.grid.fill)&&i.classList.add(`${r.containerModifierClass}grid-column`),t.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach((e=>{if(void 0===s[e])return;const n=r[e]&&r[e].enabled,i=s[e]&&s[e].enabled;n&&!i&&t[e].disable(),!n&&i&&t[e].enable()}));const h=s.direction&&s.direction!==r.direction,d=r.loop&&(s.slidesPerView!==r.slidesPerView||h);h&&n&&t.changeDirection(),f(t.params,s);const p=t.params.enabled;Object.assign(t,{allowTouchMove:t.params.allowTouchMove,allowSlideNext:t.params.allowSlideNext,allowSlidePrev:t.params.allowSlidePrev}),c&&!p?t.disable():!c&&p&&t.enable(),t.currentBreakpoint=a,t.emit("_beforeBreakpoint",s),d&&n&&(t.loopDestroy(),t.loopCreate(e),t.updateSlides()),t.emit("breakpoint",s)},getBreakpoint:function(t,e="window",n){if(!t||"container"===e&&!n)return;let r=!1;const i=u(),o="window"===e?i.innerHeight:n.clientHeight,a=Object.keys(t).map((t=>{if("string"==typeof t&&0===t.indexOf("@")){const e=parseFloat(t.substr(1));return{value:o*e,point:t}}return{value:t,point:t}}));a.sort(((t,e)=>parseInt(t.value,10)-parseInt(e.value,10)));for(let t=0;t<a.length;t+=1){const{point:o,value:s}=a[t];"window"===e?i.matchMedia(`(min-width: ${s}px)`).matches&&(r=o):s<=n.clientWidth&&(r=o)}return r||"max"}},checkOverflow:{checkOverflow:function(){const t=this,{isLocked:e,params:n}=t,{slidesOffsetBefore:r}=n;if(r){const e=t.slides.length-1,n=t.slidesGrid[e]+t.slidesSizesGrid[e]+2*r;t.isLocked=t.size>n}else t.isLocked=1===t.snapGrid.length;!0===n.allowSlideNext&&(t.allowSlideNext=!t.isLocked),!0===n.allowSlidePrev&&(t.allowSlidePrev=!t.isLocked),e&&e!==t.isLocked&&(t.isEnd=!1),e!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock")}},classes:{addClasses:function(){const t=this,{classNames:e,params:n,rtl:r,el:i,device:o}=t,a=function(t,e){const n=[];return t.forEach((t=>{"object"==typeof t?Object.keys(t).forEach((r=>{t[r]&&n.push(e+r)})):"string"==typeof t&&n.push(e+t)})),n}(["initialized",n.direction,{"free-mode":t.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:r},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&"column"===n.grid.fill},{android:o.android},{ios:o.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);e.push(...a),i.classList.add(...e),t.emitContainerClasses()},removeClasses:function(){const{el:t,classNames:e}=this;t.classList.remove(...e),this.emitContainerClasses()}}},$={};class K{constructor(...t){let e,n;1===t.length&&t[0].constructor&&"Object"===Object.prototype.toString.call(t[0]).slice(8,-1)?n=t[0]:[e,n]=t,n||(n={}),n=f({},n),e&&!n.el&&(n.el=e);const r=a();if(n.el&&"string"==typeof n.el&&r.querySelectorAll(n.el).length>1){const t=[];return r.querySelectorAll(n.el).forEach((e=>{const r=f({},n,{el:e});t.push(new K(r))})),t}const i=this;i.__swiper__=!0,i.support=S(),i.device=E({userAgent:n.userAgent}),i.browser=A(),i.eventsListeners={},i.eventsAnyListeners=[],i.modules=[...i.__modules__],n.modules&&Array.isArray(n.modules)&&i.modules.push(...n.modules);const o={};i.modules.forEach((t=>{t({params:n,swiper:i,extendParams:Y(n,o),on:i.on.bind(i),once:i.once.bind(i),off:i.off.bind(i),emit:i.emit.bind(i)})}));const s=f({},X,o);return i.params=f({},s,$,n),i.originalParams=f({},i.params),i.passedParams=f({},n),i.params&&i.params.on&&Object.keys(i.params.on).forEach((t=>{i.on(t,i.params.on[t])})),i.params&&i.params.onAny&&i.onAny(i.params.onAny),Object.assign(i,{enabled:i.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:()=>"horizontal"===i.params.direction,isVertical:()=>"vertical"===i.params.direction,activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:i.params.allowSlideNext,allowSlidePrev:i.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:i.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,evCache:[]},allowClick:!0,allowTouchMove:i.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),i.emit("_swiper"),i.params.init&&i.init(),i}getSlideIndex(t){const{slidesEl:e,params:n}=this,r=y(g(e,`.${n.slideClass}, swiper-slide`)[0]);return y(t)-r}getSlideIndexByData(t){return this.getSlideIndex(this.slides.filter((e=>1*e.getAttribute("data-swiper-slide-index")===t))[0])}recalcSlides(){const{slidesEl:t,params:e}=this;this.slides=g(t,`.${e.slideClass}, swiper-slide`)}enable(){const t=this;t.enabled||(t.enabled=!0,t.params.grabCursor&&t.setGrabCursor(),t.emit("enable"))}disable(){const t=this;t.enabled&&(t.enabled=!1,t.params.grabCursor&&t.unsetGrabCursor(),t.emit("disable"))}setProgress(t,e){const n=this;t=Math.min(Math.max(t,0),1);const r=n.minTranslate(),i=(n.maxTranslate()-r)*t+r;n.translateTo(i,void 0===e?0:e),n.updateActiveIndex(),n.updateSlidesClasses()}emitContainerClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const e=t.el.className.split(" ").filter((e=>0===e.indexOf("swiper")||0===e.indexOf(t.params.containerModifierClass)));t.emit("_containerClasses",e.join(" "))}getSlideClasses(t){const e=this;return e.destroyed?"":t.className.split(" ").filter((t=>0===t.indexOf("swiper-slide")||0===t.indexOf(e.params.slideClass))).join(" ")}emitSlidesClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const e=[];t.slides.forEach((n=>{const r=t.getSlideClasses(n);e.push({slideEl:n,classNames:r}),t.emit("_slideClass",n,r)})),t.emit("_slideClasses",e)}slidesPerViewDynamic(t="current",e=!1){const{params:n,slides:r,slidesGrid:i,slidesSizesGrid:o,size:a,activeIndex:s}=this;let u=1;if(n.centeredSlides){let t,e=r[s]?r[s].swiperSlideSize:0;for(let n=s+1;n<r.length;n+=1)r[n]&&!t&&(e+=r[n].swiperSlideSize,u+=1,e>a&&(t=!0));for(let n=s-1;n>=0;n-=1)r[n]&&!t&&(e+=r[n].swiperSlideSize,u+=1,e>a&&(t=!0))}else if("current"===t)for(let t=s+1;t<r.length;t+=1){(e?i[t]+o[t]-i[s]<a:i[t]-i[s]<a)&&(u+=1)}else for(let t=s-1;t>=0;t-=1){i[s]-i[t]<a&&(u+=1)}return u}update(){const t=this;if(!t||t.destroyed)return;const{snapGrid:e,params:n}=t;function r(){const e=t.rtlTranslate?-1*t.translate:t.translate,n=Math.min(Math.max(e,t.maxTranslate()),t.minTranslate());t.setTranslate(n),t.updateActiveIndex(),t.updateSlidesClasses()}let i;if(n.breakpoints&&t.setBreakpoint(),[...t.el.querySelectorAll('[loading="lazy"]')].forEach((e=>{e.complete&&C(t,e)})),t.updateSize(),t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),n.freeMode&&n.freeMode.enabled&&!n.cssMode)r(),n.autoHeight&&t.updateAutoHeight();else{if(("auto"===n.slidesPerView||n.slidesPerView>1)&&t.isEnd&&!n.centeredSlides){const e=t.virtual&&n.virtual.enabled?t.virtual.slides:t.slides;i=t.slideTo(e.length-1,0,!1,!0)}else i=t.slideTo(t.activeIndex,0,!1,!0);i||r()}n.watchOverflow&&e!==t.snapGrid&&t.checkOverflow(),t.emit("update")}changeDirection(t,e=!0){const n=this,r=n.params.direction;return t||(t="horizontal"===r?"vertical":"horizontal"),t===r||"horizontal"!==t&&"vertical"!==t||(n.el.classList.remove(`${n.params.containerModifierClass}${r}`),n.el.classList.add(`${n.params.containerModifierClass}${t}`),n.emitContainerClasses(),n.params.direction=t,n.slides.forEach((e=>{"vertical"===t?e.style.width="":e.style.height=""})),n.emit("changeDirection"),e&&n.update()),n}changeLanguageDirection(t){const e=this;e.rtl&&"rtl"===t||!e.rtl&&"ltr"===t||(e.rtl="rtl"===t,e.rtlTranslate="horizontal"===e.params.direction&&e.rtl,e.rtl?(e.el.classList.add(`${e.params.containerModifierClass}rtl`),e.el.dir="rtl"):(e.el.classList.remove(`${e.params.containerModifierClass}rtl`),e.el.dir="ltr"),e.update())}mount(t){const e=this;if(e.mounted)return!0;let n=t||e.params.el;if("string"==typeof n&&(n=document.querySelector(n)),!n)return!1;n.swiper=e,n.shadowEl&&(e.isElement=!0);const r=()=>`.${(e.params.wrapperClass||"").trim().split(" ").join(".")}`;let i=(()=>{if(n&&n.shadowRoot&&n.shadowRoot.querySelector){return n.shadowRoot.querySelector(r())}return g(n,r())[0]})();return!i&&e.params.createElements&&(i=function(t,e=[]){const n=document.createElement(t);return n.classList.add(...Array.isArray(e)?e:[e]),n}("div",e.params.wrapperClass),n.append(i),g(n,`.${e.params.slideClass}`).forEach((t=>{i.append(t)}))),Object.assign(e,{el:n,wrapperEl:i,slidesEl:e.isElement?n:i,mounted:!0,rtl:"rtl"===n.dir.toLowerCase()||"rtl"===v(n,"direction"),rtlTranslate:"horizontal"===e.params.direction&&("rtl"===n.dir.toLowerCase()||"rtl"===v(n,"direction")),wrongRTL:"-webkit-box"===v(i,"display")}),!0}init(t){const e=this;if(e.initialized)return e;return!1===e.mount(t)||(e.emit("beforeInit"),e.params.breakpoints&&e.setBreakpoint(),e.addClasses(),e.updateSize(),e.updateSlides(),e.params.watchOverflow&&e.checkOverflow(),e.params.grabCursor&&e.enabled&&e.setGrabCursor(),e.params.loop&&e.virtual&&e.params.virtual.enabled?e.slideTo(e.params.initialSlide+e.virtual.slidesBefore,0,e.params.runCallbacksOnInit,!1,!0):e.slideTo(e.params.initialSlide,0,e.params.runCallbacksOnInit,!1,!0),e.params.loop&&e.loopCreate(),e.attachEvents(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach((t=>{t.complete?C(e,t):t.addEventListener("load",(t=>{C(e,t.target)}))})),k(e),e.initialized=!0,k(e),e.emit("init"),e.emit("afterInit")),e}destroy(t=!0,e=!0){const n=this,{params:r,el:i,wrapperEl:o,slides:a}=n;return void 0===n.params||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),r.loop&&n.loopDestroy(),e&&(n.removeClasses(),i.removeAttribute("style"),o.removeAttribute("style"),a&&a.length&&a.forEach((t=>{t.classList.remove(r.slideVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass),t.removeAttribute("style"),t.removeAttribute("data-swiper-slide-index")}))),n.emit("destroy"),Object.keys(n.eventsListeners).forEach((t=>{n.off(t)})),!1!==t&&(n.el.swiper=null,function(t){const e=t;Object.keys(e).forEach((t=>{try{e[t]=null}catch(t){}try{delete e[t]}catch(t){}}))}(n)),n.destroyed=!0),null}static extendDefaults(t){f($,t)}static get extendedDefaults(){return $}static get defaults(){return X}static installModule(t){K.prototype.__modules__||(K.prototype.__modules__=[]);const e=K.prototype.__modules__;"function"==typeof t&&e.indexOf(t)<0&&e.push(t)}static use(t){return Array.isArray(t)?(t.forEach((t=>K.installModule(t))),K):(K.installModule(t),K)}}Object.keys(q).forEach((t=>{Object.keys(q[t]).forEach((e=>{K.prototype[e]=q[t][e]}))})),K.use([function({swiper:t,on:e,emit:n}){const r=u();let i=null,o=null;const a=()=>{t&&!t.destroyed&&t.initialized&&(n("beforeResize"),n("resize"))},s=()=>{t&&!t.destroyed&&t.initialized&&n("orientationchange")};e("init",(()=>{t.params.resizeObserver&&void 0!==r.ResizeObserver?t&&!t.destroyed&&t.initialized&&(i=new ResizeObserver((e=>{o=r.requestAnimationFrame((()=>{const{width:n,height:r}=t;let i=n,o=r;e.forEach((({contentBoxSize:e,contentRect:n,target:r})=>{r&&r!==t.el||(i=n?n.width:(e[0]||e).inlineSize,o=n?n.height:(e[0]||e).blockSize)})),i===n&&o===r||a()}))})),i.observe(t.el)):(r.addEventListener("resize",a),r.addEventListener("orientationchange",s))})),e("destroy",(()=>{o&&r.cancelAnimationFrame(o),i&&i.unobserve&&t.el&&(i.unobserve(t.el),i=null),r.removeEventListener("resize",a),r.removeEventListener("orientationchange",s)}))},function({swiper:t,extendParams:e,on:n,emit:r}){const i=[],o=u(),a=(e,n={})=>{const a=new(o.MutationObserver||o.WebkitMutationObserver)((e=>{if(t.__preventObserver__)return;if(1===e.length)return void r("observerUpdate",e[0]);const n=function(){r("observerUpdate",e[0])};o.requestAnimationFrame?o.requestAnimationFrame(n):o.setTimeout(n,0)}));a.observe(e,{attributes:void 0===n.attributes||n.attributes,childList:void 0===n.childList||n.childList,characterData:void 0===n.characterData||n.characterData}),i.push(a)};e({observer:!1,observeParents:!1,observeSlideChildren:!1}),n("init",(()=>{if(t.params.observer){if(t.params.observeParents){const e=function(t,e){const n=[];let r=t.parentElement;for(;r;)e?r.matches(e)&&n.push(r):n.push(r),r=r.parentElement;return n}(t.el);for(let t=0;t<e.length;t+=1)a(e[t])}a(t.el,{childList:t.params.observeSlideChildren}),a(t.wrapperEl,{attributes:!1})}})),n("destroy",(()=>{i.forEach((t=>{t.disconnect()})),i.splice(0,i.length)}))}]);const Z=K},39437:(t,e,n)=>{"use strict";n.d(e,{$EB:()=>h,$Kf:()=>Ua,$_I:()=>q,$p8:()=>ul,B69:()=>dn,BH$:()=>hs,BKk:()=>yr,Cfg:()=>W,DXC:()=>ls,EAD:()=>Ga,FCc:()=>cs,GJx:()=>U,GOR:()=>ys,Gu$:()=>mu,HiM:()=>ol,Hit:()=>Pu,I46:()=>Ba,I9Y:()=>jt,JeP:()=>da,KPJ:()=>Uu,Kzg:()=>cl,LoY:()=>Yn,MBL:()=>Lu,N1A:()=>as,NRn:()=>fe,Nwf:()=>vl,O49:()=>mt,ONl:()=>gs,PJ3:()=>lt,PTz:()=>le,Pq0:()=>ce,Q1f:()=>Nn,QCA:()=>fu,Qev:()=>Mt,RJ4:()=>pt,RiT:()=>Du,RoJ:()=>va,S2Q:()=>yt,THS:()=>Dn,Tap:()=>Yu,V9B:()=>On,Y9S:()=>Wu,YHV:()=>wl,YJl:()=>ia,Z58:()=>fa,ZLX:()=>Ja,Zr2:()=>xt,ZyN:()=>sl,_4j:()=>vu,aHM:()=>Vu,bdM:()=>Lr,cj9:()=>Ut,eB$:()=>pa,eHs:()=>ga,eaF:()=>hr,er$:()=>bt,fTw:()=>_l,gPd:()=>ie,ghU:()=>j,hB5:()=>l,hxR:()=>H,iNn:()=>fr,ibB:()=>ws,imn:()=>Mn,iyt:()=>Ne,k6q:()=>X,kBv:()=>i,kRr:()=>Y,kTW:()=>V,kn4:()=>Ue,kxk:()=>Na,lGw:()=>Au,ljd:()=>ut,mrM:()=>ts,nCl:()=>tl,pHI:()=>G,q2:()=>gu,qUd:()=>Wr,r6x:()=>ll,rYR:()=>gt,tBo:()=>yl,tz3:()=>zu,uSd:()=>yu,ubm:()=>xr,wtR:()=>o,ypk:()=>Fs});
/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */
const r="151",i={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},o={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},a=1,s=2,u=3,l=0,c=1,h=2,d=100,f=101,p=102,m=200,g=201,v=202,y=203,b=204,x=205,w=206,_=207,S=208,E=209,A=210,M=0,C=1,T=2,k=0,I=1,N=2,P=3,O=4,L=5,R=301,D=302,z=303,F=304,B=306,U=1e3,j=1001,V=1002,H=1003,G=1004,W=1005,X=1006,Y=1007,q=1008,$=1009,K=1014,Z=1015,Q=1016,J=1020,tt=1023,et=1026,nt=1027,rt=33776,it=33777,ot=33778,at=33779,st=36492,ut=2300,lt=2301,ct=2302,ht=2400,dt=2401,ft=2402,pt=0,mt=1,gt=2,vt=3e3,yt=3001,bt="srgb",xt="srgb-linear",wt="display-p3",_t=7680,St=35044,Et="300 es",At=1035;class Mt{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const n=this._listeners[t];if(void 0!==n){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const n=e.slice(0);for(let e=0,r=n.length;e<r;e++)n[e].call(this,t);t.target=null}}}const Ct=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Tt=1234567;const kt=Math.PI/180,It=180/Math.PI;function Nt(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Ct[255&t]+Ct[t>>8&255]+Ct[t>>16&255]+Ct[t>>24&255]+"-"+Ct[255&e]+Ct[e>>8&255]+"-"+Ct[e>>16&15|64]+Ct[e>>24&255]+"-"+Ct[63&n|128]+Ct[n>>8&255]+"-"+Ct[n>>16&255]+Ct[n>>24&255]+Ct[255&r]+Ct[r>>8&255]+Ct[r>>16&255]+Ct[r>>24&255]).toLowerCase()}function Pt(t,e,n){return Math.max(e,Math.min(n,t))}function Ot(t,e){return(t%e+e)%e}function Lt(t,e,n){return(1-n)*t+n*e}function Rt(t){return!(t&t-1)&&0!==t}function Dt(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function zt(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function Ft(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Bt(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}}const Ut={DEG2RAD:kt,RAD2DEG:It,generateUUID:Nt,clamp:Pt,euclideanModulo:Ot,mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},inverseLerp:function(t,e,n){return t!==e?(n-t)/(e-t):0},lerp:Lt,damp:function(t,e,n,r){return Lt(t,e,1-Math.exp(-n*r))},pingpong:function(t,e=1){return e-Math.abs(Ot(t,2*e)-e)},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){void 0!==t&&(Tt=t);let e=Tt+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296},degToRad:function(t){return t*kt},radToDeg:function(t){return t*It},isPowerOfTwo:Rt,ceilPowerOfTwo:Dt,floorPowerOfTwo:zt,setQuaternionFromProperEuler:function(t,e,n,r,i){const o=Math.cos,a=Math.sin,s=o(n/2),u=a(n/2),l=o((e+r)/2),c=a((e+r)/2),h=o((e-r)/2),d=a((e-r)/2),f=o((r-e)/2),p=a((r-e)/2);switch(i){case"XYX":t.set(s*c,u*h,u*d,s*l);break;case"YZY":t.set(u*d,s*c,u*h,s*l);break;case"ZXZ":t.set(u*h,u*d,s*c,s*l);break;case"XZX":t.set(s*c,u*p,u*f,s*l);break;case"YXY":t.set(u*f,s*c,u*p,s*l);break;case"ZYZ":t.set(u*p,u*f,s*c,s*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}},normalize:Bt,denormalize:Ft};class jt{constructor(t=0,e=0){jt.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(Pt(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,o=this.y-t.y;return this.x=i*n-o*r+t.x,this.y=i*r+o*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Vt{constructor(){Vt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(t,e,n,r,i,o,a,s,u){const l=this.elements;return l[0]=t,l[1]=r,l[2]=a,l[3]=e,l[4]=i,l[5]=s,l[6]=n,l[7]=o,l[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[3],s=n[6],u=n[1],l=n[4],c=n[7],h=n[2],d=n[5],f=n[8],p=r[0],m=r[3],g=r[6],v=r[1],y=r[4],b=r[7],x=r[2],w=r[5],_=r[8];return i[0]=o*p+a*v+s*x,i[3]=o*m+a*y+s*w,i[6]=o*g+a*b+s*_,i[1]=u*p+l*v+c*x,i[4]=u*m+l*y+c*w,i[7]=u*g+l*b+c*_,i[2]=h*p+d*v+f*x,i[5]=h*m+d*y+f*w,i[8]=h*g+d*b+f*_,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],l=t[8];return e*o*l-e*a*u-n*i*l+n*a*s+r*i*u-r*o*s}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],l=t[8],c=l*o-a*u,h=a*s-l*i,d=u*i-o*s,f=e*c+n*h+r*d;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);const p=1/f;return t[0]=c*p,t[1]=(r*u-l*n)*p,t[2]=(a*n-r*o)*p,t[3]=h*p,t[4]=(l*e-r*s)*p,t[5]=(r*i-a*e)*p,t[6]=d*p,t[7]=(n*s-u*e)*p,t[8]=(o*e-n*i)*p,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,r,i,o,a){const s=Math.cos(i),u=Math.sin(i);return this.set(n*s,n*u,-n*(s*o+u*a)+o+t,-r*u,r*s,-r*(-u*o+s*a)+a+e,0,0,1),this}scale(t,e){return this.premultiply(Ht.makeScale(t,e)),this}rotate(t){return this.premultiply(Ht.makeRotation(-t)),this}translate(t,e){return this.premultiply(Ht.makeTranslation(t,e)),this}makeTranslation(t,e){return this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,n=t.elements;for(let t=0;t<9;t++)if(e[t]!==n[t])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const Ht=new Vt;function Gt(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;function Wt(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function Xt(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function Yt(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}const qt=(new Vt).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),$t=(new Vt).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);const Kt={[xt]:t=>t,[bt]:t=>t.convertSRGBToLinear(),[wt]:function(t){return t.convertSRGBToLinear().applyMatrix3($t)}},Zt={[xt]:t=>t,[bt]:t=>t.convertLinearToSRGB(),[wt]:function(t){return t.applyMatrix3(qt).convertLinearToSRGB()}},Qt={enabled:!1,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(t){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!t},get workingColorSpace(){return xt},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,n){if(!1===this.enabled||e===n||!e||!n)return t;const r=Kt[e],i=Zt[n];if(void 0===r||void 0===i)throw new Error(`Unsupported color space conversion, "${e}" to "${n}".`);return i(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}};let Jt;class te{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===Jt&&(Jt=Wt("canvas")),Jt.width=t.width,Jt.height=t.height;const n=Jt.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=Jt}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const e=Wt("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const r=n.getImageData(0,0,t.width,t.height),i=r.data;for(let t=0;t<i.length;t++)i[t]=255*Xt(i[t]/255);return n.putImageData(r,0,0),e}if(t.data){const e=t.data.slice(0);for(let t=0;t<e.length;t++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[t]=Math.floor(255*Xt(e[t]/255)):e[t]=Xt(e[t]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}class ee{constructor(t=null){this.isSource=!0,this.uuid=Nt(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let t;if(Array.isArray(r)){t=[];for(let e=0,n=r.length;e<n;e++)r[e].isDataTexture?t.push(ne(r[e].image)):t.push(ne(r[e]))}else t=ne(r);n.url=t}return e||(t.images[this.uuid]=n),n}}function ne(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?te.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let re=0;class ie extends Mt{constructor(t=ie.DEFAULT_IMAGE,e=ie.DEFAULT_MAPPING,n=j,r=j,i=X,o=q,a=1023,s=1009,u=ie.DEFAULT_ANISOTROPY,l=vt){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:re++}),this.uuid=Nt(),this.name="",this.source=new ee(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=s,this.offset=new jt(0,0),this.repeat=new jt(1,1),this.center=new jt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Vt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=l,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case U:t.x=t.x-Math.floor(t.x);break;case j:t.x=t.x<0?0:1;break;case V:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case U:t.y=t.y-Math.floor(t.y);break;case j:t.y=t.y<0?0:1;break;case V:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}ie.DEFAULT_IMAGE=null,ie.DEFAULT_MAPPING=300,ie.DEFAULT_ANISOTROPY=1;class oe{constructor(t=0,e=0,n=0,r=1){oe.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,i=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*i,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,r,i;const o=.01,a=.1,s=t.elements,u=s[0],l=s[4],c=s[8],h=s[1],d=s[5],f=s[9],p=s[2],m=s[6],g=s[10];if(Math.abs(l-h)<o&&Math.abs(c-p)<o&&Math.abs(f-m)<o){if(Math.abs(l+h)<a&&Math.abs(c+p)<a&&Math.abs(f+m)<a&&Math.abs(u+d+g-3)<a)return this.set(1,0,0,0),this;e=Math.PI;const t=(u+1)/2,s=(d+1)/2,v=(g+1)/2,y=(l+h)/4,b=(c+p)/4,x=(f+m)/4;return t>s&&t>v?t<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(t),r=y/n,i=b/n):s>v?s<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(s),n=y/r,i=x/r):v<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(v),n=b/i,r=x/i),this.set(n,r,i,e),this}let v=Math.sqrt((m-f)*(m-f)+(c-p)*(c-p)+(h-l)*(h-l));return Math.abs(v)<.001&&(v=1),this.x=(m-f)/v,this.y=(c-p)/v,this.z=(h-l)/v,this.w=Math.acos((u+d+g-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class ae extends Mt{constructor(t=1,e=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new oe(0,0,t,e),this.scissorTest=!1,this.viewport=new oe(0,0,t,e);const r={width:t,height:e,depth:1};this.texture=new ie(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:X,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(t,e,n=1){this.width===t&&this.height===e&&this.depth===n||(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new ee(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class se extends ie{constructor(t=null,e=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=H,this.minFilter=H,this.wrapR=j,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ue extends ie{constructor(t=null,e=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=H,this.minFilter=H,this.wrapR=j,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class le{constructor(t=0,e=0,n=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=r}static slerpFlat(t,e,n,r,i,o,a){let s=n[r+0],u=n[r+1],l=n[r+2],c=n[r+3];const h=i[o+0],d=i[o+1],f=i[o+2],p=i[o+3];if(0===a)return t[e+0]=s,t[e+1]=u,t[e+2]=l,void(t[e+3]=c);if(1===a)return t[e+0]=h,t[e+1]=d,t[e+2]=f,void(t[e+3]=p);if(c!==p||s!==h||u!==d||l!==f){let t=1-a;const e=s*h+u*d+l*f+c*p,n=e>=0?1:-1,r=1-e*e;if(r>Number.EPSILON){const i=Math.sqrt(r),o=Math.atan2(i,e*n);t=Math.sin(t*o)/i,a=Math.sin(a*o)/i}const i=a*n;if(s=s*t+h*i,u=u*t+d*i,l=l*t+f*i,c=c*t+p*i,t===1-a){const t=1/Math.sqrt(s*s+u*u+l*l+c*c);s*=t,u*=t,l*=t,c*=t}}t[e]=s,t[e+1]=u,t[e+2]=l,t[e+3]=c}static multiplyQuaternionsFlat(t,e,n,r,i,o){const a=n[r],s=n[r+1],u=n[r+2],l=n[r+3],c=i[o],h=i[o+1],d=i[o+2],f=i[o+3];return t[e]=a*f+l*c+s*d-u*h,t[e+1]=s*f+l*h+u*c-a*d,t[e+2]=u*f+l*d+a*h-s*c,t[e+3]=l*f-a*c-s*h-u*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){const n=t._x,r=t._y,i=t._z,o=t._order,a=Math.cos,s=Math.sin,u=a(n/2),l=a(r/2),c=a(i/2),h=s(n/2),d=s(r/2),f=s(i/2);switch(o){case"XYZ":this._x=h*l*c+u*d*f,this._y=u*d*c-h*l*f,this._z=u*l*f+h*d*c,this._w=u*l*c-h*d*f;break;case"YXZ":this._x=h*l*c+u*d*f,this._y=u*d*c-h*l*f,this._z=u*l*f-h*d*c,this._w=u*l*c+h*d*f;break;case"ZXY":this._x=h*l*c-u*d*f,this._y=u*d*c+h*l*f,this._z=u*l*f+h*d*c,this._w=u*l*c-h*d*f;break;case"ZYX":this._x=h*l*c-u*d*f,this._y=u*d*c+h*l*f,this._z=u*l*f-h*d*c,this._w=u*l*c+h*d*f;break;case"YZX":this._x=h*l*c+u*d*f,this._y=u*d*c+h*l*f,this._z=u*l*f-h*d*c,this._w=u*l*c-h*d*f;break;case"XZY":this._x=h*l*c-u*d*f,this._y=u*d*c-h*l*f,this._z=u*l*f+h*d*c,this._w=u*l*c+h*d*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],r=e[4],i=e[8],o=e[1],a=e[5],s=e[9],u=e[2],l=e[6],c=e[10],h=n+a+c;if(h>0){const t=.5/Math.sqrt(h+1);this._w=.25/t,this._x=(l-s)*t,this._y=(i-u)*t,this._z=(o-r)*t}else if(n>a&&n>c){const t=2*Math.sqrt(1+n-a-c);this._w=(l-s)/t,this._x=.25*t,this._y=(r+o)/t,this._z=(i+u)/t}else if(a>c){const t=2*Math.sqrt(1+a-n-c);this._w=(i-u)/t,this._x=(r+o)/t,this._y=.25*t,this._z=(s+l)/t}else{const t=2*Math.sqrt(1+c-n-a);this._w=(o-r)/t,this._x=(i+u)/t,this._y=(s+l)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Pt(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const r=Math.min(1,e/n);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,r=t._y,i=t._z,o=t._w,a=e._x,s=e._y,u=e._z,l=e._w;return this._x=n*l+o*a+r*u-i*s,this._y=r*l+o*s+i*a-n*u,this._z=i*l+o*u+n*s-r*a,this._w=o*l-n*a-r*s-i*u,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,r=this._y,i=this._z,o=this._w;let a=o*t._w+n*t._x+r*t._y+i*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;const s=1-a*a;if(s<=Number.EPSILON){const t=1-e;return this._w=t*o+e*this._w,this._x=t*n+e*this._x,this._y=t*r+e*this._y,this._z=t*i+e*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(s),l=Math.atan2(u,a),c=Math.sin((1-e)*l)/u,h=Math.sin(e*l)/u;return this._w=o*c+this._w*h,this._x=n*c+this._x*h,this._y=r*c+this._y*h,this._z=i*c+this._z*h,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(e*Math.cos(r),n*Math.sin(i),n*Math.cos(i),e*Math.sin(r))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ce{constructor(t=0,e=0,n=0){ce.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(de.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(de.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,i=t.elements,o=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*o,this}applyQuaternion(t){const e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,a=t.z,s=t.w,u=s*e+o*r-a*n,l=s*n+a*e-i*r,c=s*r+i*n-o*e,h=-i*e-o*n-a*r;return this.x=u*s+h*-i+l*-a-c*-o,this.y=l*s+h*-o+c*-i-u*-a,this.z=c*s+h*-a+u*-o-l*-i,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,r=t.y,i=t.z,o=e.x,a=e.y,s=e.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return he.copy(this).projectOnVector(t),this.sub(he)}reflect(t){return this.sub(he.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(Pt(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const he=new ce,de=new le;class fe{constructor(t=new ce(1/0,1/0,1/0),e=new ce(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e+=3)this.expandByPoint(me.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,n=t.count;e<n;e++)this.expandByPoint(me.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=me.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){if(t.updateWorldMatrix(!1,!1),void 0!==t.boundingBox)null===t.boundingBox&&t.computeBoundingBox(),ge.copy(t.boundingBox),ge.applyMatrix4(t.matrixWorld),this.union(ge);else{const n=t.geometry;if(void 0!==n)if(e&&void 0!==n.attributes&&void 0!==n.attributes.position){const e=n.attributes.position;for(let n=0,r=e.count;n<r;n++)me.fromBufferAttribute(e,n).applyMatrix4(t.matrixWorld),this.expandByPoint(me)}else null===n.boundingBox&&n.computeBoundingBox(),ge.copy(n.boundingBox),ge.applyMatrix4(t.matrixWorld),this.union(ge)}const n=t.children;for(let t=0,r=n.length;t<r;t++)this.expandByObject(n[t],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,me),me.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Se),Ee.subVectors(this.max,Se),ve.subVectors(t.a,Se),ye.subVectors(t.b,Se),be.subVectors(t.c,Se),xe.subVectors(ye,ve),we.subVectors(be,ye),_e.subVectors(ve,be);let e=[0,-xe.z,xe.y,0,-we.z,we.y,0,-_e.z,_e.y,xe.z,0,-xe.x,we.z,0,-we.x,_e.z,0,-_e.x,-xe.y,xe.x,0,-we.y,we.x,0,-_e.y,_e.x,0];return!!Ce(e,ve,ye,be,Ee)&&(e=[1,0,0,0,1,0,0,0,1],!!Ce(e,ve,ye,be,Ee)&&(Ae.crossVectors(xe,we),e=[Ae.x,Ae.y,Ae.z],Ce(e,ve,ye,be,Ee)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,me).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(me).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(pe[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),pe[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),pe[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),pe[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),pe[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),pe[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),pe[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),pe[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(pe)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const pe=[new ce,new ce,new ce,new ce,new ce,new ce,new ce,new ce],me=new ce,ge=new fe,ve=new ce,ye=new ce,be=new ce,xe=new ce,we=new ce,_e=new ce,Se=new ce,Ee=new ce,Ae=new ce,Me=new ce;function Ce(t,e,n,r,i){for(let o=0,a=t.length-3;o<=a;o+=3){Me.fromArray(t,o);const a=i.x*Math.abs(Me.x)+i.y*Math.abs(Me.y)+i.z*Math.abs(Me.z),s=e.dot(Me),u=n.dot(Me),l=r.dot(Me);if(Math.max(-Math.max(s,u,l),Math.min(s,u,l))>a)return!1}return!0}const Te=new fe,ke=new ce,Ie=new ce;class Ne{constructor(t=new ce,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):Te.setFromPoints(t).getCenter(n);let r=0;for(let e=0,i=t.length;e<i;e++)r=Math.max(r,n.distanceToSquared(t[e]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;ke.subVectors(t,this.center);const e=ke.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),n=.5*(t-this.radius);this.center.addScaledVector(ke,n/t),this.radius+=n}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(Ie.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(ke.copy(t.center).add(Ie)),this.expandByPoint(ke.copy(t.center).sub(Ie))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Pe=new ce,Oe=new ce,Le=new ce,Re=new ce,De=new ce,ze=new ce,Fe=new ce;class Be{constructor(t=new ce,e=new ce(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Pe)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=Pe.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Pe.copy(this.origin).addScaledVector(this.direction,e),Pe.distanceToSquared(t))}distanceSqToSegment(t,e,n,r){Oe.copy(t).add(e).multiplyScalar(.5),Le.copy(e).sub(t).normalize(),Re.copy(this.origin).sub(Oe);const i=.5*t.distanceTo(e),o=-this.direction.dot(Le),a=Re.dot(this.direction),s=-Re.dot(Le),u=Re.lengthSq(),l=Math.abs(1-o*o);let c,h,d,f;if(l>0)if(c=o*s-a,h=o*a-s,f=i*l,c>=0)if(h>=-f)if(h<=f){const t=1/l;c*=t,h*=t,d=c*(c+o*h+2*a)+h*(o*c+h+2*s)+u}else h=i,c=Math.max(0,-(o*h+a)),d=-c*c+h*(h+2*s)+u;else h=-i,c=Math.max(0,-(o*h+a)),d=-c*c+h*(h+2*s)+u;else h<=-f?(c=Math.max(0,-(-o*i+a)),h=c>0?-i:Math.min(Math.max(-i,-s),i),d=-c*c+h*(h+2*s)+u):h<=f?(c=0,h=Math.min(Math.max(-i,-s),i),d=h*(h+2*s)+u):(c=Math.max(0,-(o*i+a)),h=c>0?i:Math.min(Math.max(-i,-s),i),d=-c*c+h*(h+2*s)+u);else h=o>0?-i:i,c=Math.max(0,-(o*h+a)),d=-c*c+h*(h+2*s)+u;return n&&n.copy(this.origin).addScaledVector(this.direction,c),r&&r.copy(Oe).addScaledVector(Le,h),d}intersectSphere(t,e){Pe.subVectors(t.center,this.origin);const n=Pe.dot(this.direction),r=Pe.dot(Pe)-n*n,i=t.radius*t.radius;if(r>i)return null;const o=Math.sqrt(i-r),a=n-o,s=n+o;return s<0?null:a<0?this.at(s,e):this.at(a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);if(0===e)return!0;return t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,r,i,o,a,s;const u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,h=this.origin;return u>=0?(n=(t.min.x-h.x)*u,r=(t.max.x-h.x)*u):(n=(t.max.x-h.x)*u,r=(t.min.x-h.x)*u),l>=0?(i=(t.min.y-h.y)*l,o=(t.max.y-h.y)*l):(i=(t.max.y-h.y)*l,o=(t.min.y-h.y)*l),n>o||i>r?null:((i>n||isNaN(n))&&(n=i),(o<r||isNaN(r))&&(r=o),c>=0?(a=(t.min.z-h.z)*c,s=(t.max.z-h.z)*c):(a=(t.max.z-h.z)*c,s=(t.min.z-h.z)*c),n>s||a>r?null:((a>n||n!=n)&&(n=a),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,e)))}intersectsBox(t){return null!==this.intersectBox(t,Pe)}intersectTriangle(t,e,n,r,i){De.subVectors(e,t),ze.subVectors(n,t),Fe.crossVectors(De,ze);let o,a=this.direction.dot(Fe);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}Re.subVectors(this.origin,t);const s=o*this.direction.dot(ze.crossVectors(Re,ze));if(s<0)return null;const u=o*this.direction.dot(De.cross(Re));if(u<0)return null;if(s+u>a)return null;const l=-o*Re.dot(Fe);return l<0?null:this.at(l/a,i)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Ue{constructor(){Ue.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,e,n,r,i,o,a,s,u,l,c,h,d,f,p,m){const g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=a,g[13]=s,g[2]=u,g[6]=l,g[10]=c,g[14]=h,g[3]=d,g[7]=f,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Ue).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,r=1/je.setFromMatrixColumn(t,0).length(),i=1/je.setFromMatrixColumn(t,1).length(),o=1/je.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,r=t.y,i=t.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),u=Math.sin(r),l=Math.cos(i),c=Math.sin(i);if("XYZ"===t.order){const t=o*l,n=o*c,r=a*l,i=a*c;e[0]=s*l,e[4]=-s*c,e[8]=u,e[1]=n+r*u,e[5]=t-i*u,e[9]=-a*s,e[2]=i-t*u,e[6]=r+n*u,e[10]=o*s}else if("YXZ"===t.order){const t=s*l,n=s*c,r=u*l,i=u*c;e[0]=t+i*a,e[4]=r*a-n,e[8]=o*u,e[1]=o*c,e[5]=o*l,e[9]=-a,e[2]=n*a-r,e[6]=i+t*a,e[10]=o*s}else if("ZXY"===t.order){const t=s*l,n=s*c,r=u*l,i=u*c;e[0]=t-i*a,e[4]=-o*c,e[8]=r+n*a,e[1]=n+r*a,e[5]=o*l,e[9]=i-t*a,e[2]=-o*u,e[6]=a,e[10]=o*s}else if("ZYX"===t.order){const t=o*l,n=o*c,r=a*l,i=a*c;e[0]=s*l,e[4]=r*u-n,e[8]=t*u+i,e[1]=s*c,e[5]=i*u+t,e[9]=n*u-r,e[2]=-u,e[6]=a*s,e[10]=o*s}else if("YZX"===t.order){const t=o*s,n=o*u,r=a*s,i=a*u;e[0]=s*l,e[4]=i-t*c,e[8]=r*c+n,e[1]=c,e[5]=o*l,e[9]=-a*l,e[2]=-u*l,e[6]=n*c+r,e[10]=t-i*c}else if("XZY"===t.order){const t=o*s,n=o*u,r=a*s,i=a*u;e[0]=s*l,e[4]=-c,e[8]=u*l,e[1]=t*c+i,e[5]=o*l,e[9]=n*c-r,e[2]=r*c-n,e[6]=a*l,e[10]=i*c+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(He,t,Ge)}lookAt(t,e,n){const r=this.elements;return Ye.subVectors(t,e),0===Ye.lengthSq()&&(Ye.z=1),Ye.normalize(),We.crossVectors(n,Ye),0===We.lengthSq()&&(1===Math.abs(n.z)?Ye.x+=1e-4:Ye.z+=1e-4,Ye.normalize(),We.crossVectors(n,Ye)),We.normalize(),Xe.crossVectors(Ye,We),r[0]=We.x,r[4]=Xe.x,r[8]=Ye.x,r[1]=We.y,r[5]=Xe.y,r[9]=Ye.y,r[2]=We.z,r[6]=Xe.z,r[10]=Ye.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[4],s=n[8],u=n[12],l=n[1],c=n[5],h=n[9],d=n[13],f=n[2],p=n[6],m=n[10],g=n[14],v=n[3],y=n[7],b=n[11],x=n[15],w=r[0],_=r[4],S=r[8],E=r[12],A=r[1],M=r[5],C=r[9],T=r[13],k=r[2],I=r[6],N=r[10],P=r[14],O=r[3],L=r[7],R=r[11],D=r[15];return i[0]=o*w+a*A+s*k+u*O,i[4]=o*_+a*M+s*I+u*L,i[8]=o*S+a*C+s*N+u*R,i[12]=o*E+a*T+s*P+u*D,i[1]=l*w+c*A+h*k+d*O,i[5]=l*_+c*M+h*I+d*L,i[9]=l*S+c*C+h*N+d*R,i[13]=l*E+c*T+h*P+d*D,i[2]=f*w+p*A+m*k+g*O,i[6]=f*_+p*M+m*I+g*L,i[10]=f*S+p*C+m*N+g*R,i[14]=f*E+p*T+m*P+g*D,i[3]=v*w+y*A+b*k+x*O,i[7]=v*_+y*M+b*I+x*L,i[11]=v*S+y*C+b*N+x*R,i[15]=v*E+y*T+b*P+x*D,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],o=t[1],a=t[5],s=t[9],u=t[13],l=t[2],c=t[6],h=t[10],d=t[14];return t[3]*(+i*s*c-r*u*c-i*a*h+n*u*h+r*a*d-n*s*d)+t[7]*(+e*s*d-e*u*h+i*o*h-r*o*d+r*u*l-i*s*l)+t[11]*(+e*u*c-e*a*d-i*o*c+n*o*d+i*a*l-n*u*l)+t[15]*(-r*a*l-e*s*c+e*a*h+r*o*c-n*o*h+n*s*l)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],l=t[8],c=t[9],h=t[10],d=t[11],f=t[12],p=t[13],m=t[14],g=t[15],v=c*m*u-p*h*u+p*s*d-a*m*d-c*s*g+a*h*g,y=f*h*u-l*m*u-f*s*d+o*m*d+l*s*g-o*h*g,b=l*p*u-f*c*u+f*a*d-o*p*d-l*a*g+o*c*g,x=f*c*s-l*p*s-f*a*h+o*p*h+l*a*m-o*c*m,w=e*v+n*y+r*b+i*x;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const _=1/w;return t[0]=v*_,t[1]=(p*h*i-c*m*i-p*r*d+n*m*d+c*r*g-n*h*g)*_,t[2]=(a*m*i-p*s*i+p*r*u-n*m*u-a*r*g+n*s*g)*_,t[3]=(c*s*i-a*h*i-c*r*u+n*h*u+a*r*d-n*s*d)*_,t[4]=y*_,t[5]=(l*m*i-f*h*i+f*r*d-e*m*d-l*r*g+e*h*g)*_,t[6]=(f*s*i-o*m*i-f*r*u+e*m*u+o*r*g-e*s*g)*_,t[7]=(o*h*i-l*s*i+l*r*u-e*h*u-o*r*d+e*s*d)*_,t[8]=b*_,t[9]=(f*c*i-l*p*i-f*n*d+e*p*d+l*n*g-e*c*g)*_,t[10]=(o*p*i-f*a*i+f*n*u-e*p*u-o*n*g+e*a*g)*_,t[11]=(l*a*i-o*c*i-l*n*u+e*c*u+o*n*d-e*a*d)*_,t[12]=x*_,t[13]=(l*p*r-f*c*r+f*n*h-e*p*h-l*n*m+e*c*m)*_,t[14]=(f*a*r-o*p*r-f*n*s+e*p*s+o*n*m-e*a*m)*_,t[15]=(o*c*r-l*a*r+l*n*s-e*c*s-o*n*h+e*a*h)*_,this}scale(t){const e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))}makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),r=Math.sin(e),i=1-n,o=t.x,a=t.y,s=t.z,u=i*o,l=i*a;return this.set(u*o+n,u*a-r*s,u*s+r*a,0,u*a+r*s,l*a+n,l*s-r*o,0,u*s-r*a,l*s+r*o,i*s*s+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,r,i,o){return this.set(1,n,i,0,t,1,o,0,e,r,1,0,0,0,0,1),this}compose(t,e,n){const r=this.elements,i=e._x,o=e._y,a=e._z,s=e._w,u=i+i,l=o+o,c=a+a,h=i*u,d=i*l,f=i*c,p=o*l,m=o*c,g=a*c,v=s*u,y=s*l,b=s*c,x=n.x,w=n.y,_=n.z;return r[0]=(1-(p+g))*x,r[1]=(d+b)*x,r[2]=(f-y)*x,r[3]=0,r[4]=(d-b)*w,r[5]=(1-(h+g))*w,r[6]=(m+v)*w,r[7]=0,r[8]=(f+y)*_,r[9]=(m-v)*_,r[10]=(1-(h+p))*_,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,n){const r=this.elements;let i=je.set(r[0],r[1],r[2]).length();const o=je.set(r[4],r[5],r[6]).length(),a=je.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),t.x=r[12],t.y=r[13],t.z=r[14],Ve.copy(this);const s=1/i,u=1/o,l=1/a;return Ve.elements[0]*=s,Ve.elements[1]*=s,Ve.elements[2]*=s,Ve.elements[4]*=u,Ve.elements[5]*=u,Ve.elements[6]*=u,Ve.elements[8]*=l,Ve.elements[9]*=l,Ve.elements[10]*=l,e.setFromRotationMatrix(Ve),n.x=i,n.y=o,n.z=a,this}makePerspective(t,e,n,r,i,o){const a=this.elements,s=2*i/(e-t),u=2*i/(n-r),l=(e+t)/(e-t),c=(n+r)/(n-r),h=-(o+i)/(o-i),d=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=l,a[12]=0,a[1]=0,a[5]=u,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,e,n,r,i,o){const a=this.elements,s=1/(e-t),u=1/(n-r),l=1/(o-i),c=(e+t)*s,h=(n+r)*u,d=(o+i)*l;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*l,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let t=0;t<16;t++)if(e[t]!==n[t])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const je=new ce,Ve=new Ue,He=new ce(0,0,0),Ge=new ce(1,1,1),We=new ce,Xe=new ce,Ye=new ce,qe=new Ue,$e=new le;class Ke{constructor(t=0,e=0,n=0,r=Ke.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,r=this._order){return this._x=t,this._y=e,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const r=t.elements,i=r[0],o=r[4],a=r[8],s=r[1],u=r[5],l=r[9],c=r[2],h=r[6],d=r[10];switch(e){case"XYZ":this._y=Math.asin(Pt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-l,d),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Pt(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(s,u)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(Pt(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-c,d),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-Pt(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(Pt(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-l,u),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-Pt(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-l,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return qe.makeRotationFromQuaternion(t),this.setFromRotationMatrix(qe,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return $e.setFromEuler(this),this.setFromQuaternion($e,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ke.DEFAULT_ORDER="XYZ";class Ze{constructor(){this.mask=1}set(t){this.mask=1<<t>>>0}enable(t){this.mask|=1<<t}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t}disable(t){this.mask&=~(1<<t)}disableAll(){this.mask=0}test(t){return!!(this.mask&t.mask)}isEnabled(t){return!!(this.mask&1<<t)}}let Qe=0;const Je=new ce,tn=new le,en=new Ue,nn=new ce,rn=new ce,on=new ce,an=new le,sn=new ce(1,0,0),un=new ce(0,1,0),ln=new ce(0,0,1),cn={type:"added"},hn={type:"removed"};class dn extends Mt{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Qe++}),this.uuid=Nt(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=dn.DEFAULT_UP.clone();const t=new ce,e=new Ke,n=new le,r=new ce(1,1,1);e._onChange((function(){n.setFromEuler(e,!1)})),n._onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Ue},normalMatrix:{value:new Vt}}),this.matrix=new Ue,this.matrixWorld=new Ue,this.matrixAutoUpdate=dn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=dn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Ze,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return tn.setFromAxisAngle(t,e),this.quaternion.multiply(tn),this}rotateOnWorldAxis(t,e){return tn.setFromAxisAngle(t,e),this.quaternion.premultiply(tn),this}rotateX(t){return this.rotateOnAxis(sn,t)}rotateY(t){return this.rotateOnAxis(un,t)}rotateZ(t){return this.rotateOnAxis(ln,t)}translateOnAxis(t,e){return Je.copy(t).applyQuaternion(this.quaternion),this.position.add(Je.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(sn,t)}translateY(t){return this.translateOnAxis(un,t)}translateZ(t){return this.translateOnAxis(ln,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(en.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?nn.copy(t):nn.set(t,e,n);const r=this.parent;this.updateWorldMatrix(!0,!1),rn.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?en.lookAt(rn,nn,this.up):en.lookAt(nn,rn,this.up),this.quaternion.setFromRotationMatrix(en),r&&(en.extractRotation(r.matrixWorld),tn.setFromRotationMatrix(en),this.quaternion.premultiply(tn.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(cn)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(hn)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(hn)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),en.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),en.multiply(t.parent.matrixWorld)),t.applyMatrix4(en),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(t,e);if(void 0!==r)return r}}getObjectsByProperty(t,e){let n=[];this[t]===e&&n.push(this);for(let r=0,i=this.children.length;r<i;r++){const i=this.children[r].getObjectsByProperty(t,e);i.length>0&&(n=n.concat(i))}return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(rn,t,on),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(rn,an,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,r=e.length;n<r;n++){const r=e[n];!0!==r.matrixWorldAutoUpdate&&!0!==t||r.updateMatrixWorld(t)}}updateWorldMatrix(t,e){const n=this.parent;if(!0===t&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,n=t.length;e<n;e++){const n=t[e];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(t){const e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function i(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const n=e.shapes;if(Array.isArray(n))for(let e=0,r=n.length;e<r;e++){const r=n[e];i(t.shapes,r)}else i(t.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let n=0,r=this.material.length;n<r;n++)e.push(i(t.materials,this.material[n]));r.material=e}else r.material=i(t.materials,this.material);if(this.children.length>0){r.children=[];for(let e=0;e<this.children.length;e++)r.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(let e=0;e<this.animations.length;e++){const n=this.animations[e];r.animations.push(i(t.animations,n))}}if(e){const e=o(t.geometries),r=o(t.materials),i=o(t.textures),a=o(t.images),s=o(t.shapes),u=o(t.skeletons),l=o(t.animations),c=o(t.nodes);e.length>0&&(n.geometries=e),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),a.length>0&&(n.images=a),s.length>0&&(n.shapes=s),u.length>0&&(n.skeletons=u),l.length>0&&(n.animations=l),c.length>0&&(n.nodes=c)}return n.object=r,n;function o(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let e=0;e<t.children.length;e++){const n=t.children[e];this.add(n.clone())}return this}}dn.DEFAULT_UP=new ce(0,1,0),dn.DEFAULT_MATRIX_AUTO_UPDATE=!0,dn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const fn=new ce,pn=new ce,mn=new ce,gn=new ce,vn=new ce,yn=new ce,bn=new ce,xn=new ce,wn=new ce,_n=new ce;let Sn=!1;class En{constructor(t=new ce,e=new ce,n=new ce){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,r){r.subVectors(n,e),fn.subVectors(t,e),r.cross(fn);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(t,e,n,r,i){fn.subVectors(r,e),pn.subVectors(n,e),mn.subVectors(t,e);const o=fn.dot(fn),a=fn.dot(pn),s=fn.dot(mn),u=pn.dot(pn),l=pn.dot(mn),c=o*u-a*a;if(0===c)return i.set(-2,-1,-1);const h=1/c,d=(u*s-a*l)*h,f=(o*l-a*s)*h;return i.set(1-d-f,f,d)}static containsPoint(t,e,n,r){return this.getBarycoord(t,e,n,r,gn),gn.x>=0&&gn.y>=0&&gn.x+gn.y<=1}static getUV(t,e,n,r,i,o,a,s){return!1===Sn&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Sn=!0),this.getInterpolation(t,e,n,r,i,o,a,s)}static getInterpolation(t,e,n,r,i,o,a,s){return this.getBarycoord(t,e,n,r,gn),s.setScalar(0),s.addScaledVector(i,gn.x),s.addScaledVector(o,gn.y),s.addScaledVector(a,gn.z),s}static isFrontFacing(t,e,n,r){return fn.subVectors(n,e),pn.subVectors(t,e),fn.cross(pn).dot(r)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,n,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return fn.subVectors(this.c,this.b),pn.subVectors(this.a,this.b),.5*fn.cross(pn).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return En.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return En.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,r,i){return!1===Sn&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Sn=!0),En.getInterpolation(t,this.a,this.b,this.c,e,n,r,i)}getInterpolation(t,e,n,r,i){return En.getInterpolation(t,this.a,this.b,this.c,e,n,r,i)}containsPoint(t){return En.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return En.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,r=this.b,i=this.c;let o,a;vn.subVectors(r,n),yn.subVectors(i,n),xn.subVectors(t,n);const s=vn.dot(xn),u=yn.dot(xn);if(s<=0&&u<=0)return e.copy(n);wn.subVectors(t,r);const l=vn.dot(wn),c=yn.dot(wn);if(l>=0&&c<=l)return e.copy(r);const h=s*c-l*u;if(h<=0&&s>=0&&l<=0)return o=s/(s-l),e.copy(n).addScaledVector(vn,o);_n.subVectors(t,i);const d=vn.dot(_n),f=yn.dot(_n);if(f>=0&&d<=f)return e.copy(i);const p=d*u-s*f;if(p<=0&&u>=0&&f<=0)return a=u/(u-f),e.copy(n).addScaledVector(yn,a);const m=l*f-d*c;if(m<=0&&c-l>=0&&d-f>=0)return bn.subVectors(i,r),a=(c-l)/(c-l+(d-f)),e.copy(r).addScaledVector(bn,a);const g=1/(m+p+h);return o=p*g,a=h*g,e.copy(n).addScaledVector(vn,o).addScaledVector(yn,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let An=0;class Mn extends Mt{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:An++}),this.uuid=Nt(),this.name="",this.type="Material",this.blending=1,this.side=l,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=d,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=_t,this.stencilZFail=_t,this.stencilZPass=_t,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`)}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),this.side!==l&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(n.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),e){const e=r(t.textures),i=r(t.images);e.length>0&&(n.textures=e),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const t=e.length;n=new Array(t);for(let r=0;r!==t;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}const Cn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Tn={h:0,s:0,l:0},kn={h:0,s:0,l:0};function In(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}class Nn{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=bt){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,Qt.toWorkingColorSpace(this,e),this}setRGB(t,e,n,r=Qt.workingColorSpace){return this.r=t,this.g=e,this.b=n,Qt.toWorkingColorSpace(this,r),this}setHSL(t,e,n,r=Qt.workingColorSpace){if(t=Ot(t,1),e=Pt(e,0,1),n=Pt(n,0,1),0===e)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+e):n+e-n*e,i=2*n-r;this.r=In(i,r,t+1/3),this.g=In(i,r,t),this.b=In(i,r,t-1/3)}return Qt.toWorkingColorSpace(this,r),this}setStyle(t,e=bt){function n(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(t)){let i;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,Qt.toWorkingColorSpace(this,e),n(i[4]),this;if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,Qt.toWorkingColorSpace(this,e),n(i[4]),this;break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const t=parseFloat(i[1])/360,r=parseFloat(i[2])/100,o=parseFloat(i[3])/100;return n(i[4]),this.setHSL(t,r,o,e)}break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){const n=r[1],i=n.length;if(3===i)return this.setRGB(parseInt(n.charAt(0),16)/15,parseInt(n.charAt(1),16)/15,parseInt(n.charAt(2),16)/15,e);if(6===i)return this.setHex(parseInt(n,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=bt){const n=Cn[t.toLowerCase()];return void 0!==n?this.setHex(n,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Xt(t.r),this.g=Xt(t.g),this.b=Xt(t.b),this}copyLinearToSRGB(t){return this.r=Yt(t.r),this.g=Yt(t.g),this.b=Yt(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=bt){return Qt.fromWorkingColorSpace(Pn.copy(this),t),Pt(255*Pn.r,0,255)<<16^Pt(255*Pn.g,0,255)<<8^Pt(255*Pn.b,0,255)}getHexString(t=bt){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=Qt.workingColorSpace){Qt.fromWorkingColorSpace(Pn.copy(this),e);const n=Pn.r,r=Pn.g,i=Pn.b,o=Math.max(n,r,i),a=Math.min(n,r,i);let s,u;const l=(a+o)/2;if(a===o)s=0,u=0;else{const t=o-a;switch(u=l<=.5?t/(o+a):t/(2-o-a),o){case n:s=(r-i)/t+(r<i?6:0);break;case r:s=(i-n)/t+2;break;case i:s=(n-r)/t+4}s/=6}return t.h=s,t.s=u,t.l=l,t}getRGB(t,e=Qt.workingColorSpace){return Qt.fromWorkingColorSpace(Pn.copy(this),e),t.r=Pn.r,t.g=Pn.g,t.b=Pn.b,t}getStyle(t=bt){Qt.fromWorkingColorSpace(Pn.copy(this),t);const e=Pn.r,n=Pn.g,r=Pn.b;return t!==bt?`color(${t} ${e.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${255*e|0},${255*n|0},${255*r|0})`}offsetHSL(t,e,n){return this.getHSL(Tn),Tn.h+=t,Tn.s+=e,Tn.l+=n,this.setHSL(Tn.h,Tn.s,Tn.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(Tn),t.getHSL(kn);const n=Lt(Tn.h,kn.h,e),r=Lt(Tn.s,kn.s,e),i=Lt(Tn.l,kn.l,e);return this.setHSL(n,r,i),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,n=this.g,r=this.b,i=t.elements;return this.r=i[0]*e+i[3]*n+i[6]*r,this.g=i[1]*e+i[4]*n+i[7]*r,this.b=i[2]*e+i[5]*n+i[8]*r,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Pn=new Nn;Nn.NAMES=Cn;class On extends Mn{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Nn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=M,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const Ln=new ce,Rn=new jt;class Dn{constructor(t,e,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=n,this.usage=St,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)Rn.fromBufferAttribute(this,e),Rn.applyMatrix3(t),this.setXY(e,Rn.x,Rn.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)Ln.fromBufferAttribute(this,e),Ln.applyMatrix3(t),this.setXYZ(e,Ln.x,Ln.y,Ln.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)Ln.fromBufferAttribute(this,e),Ln.applyMatrix4(t),this.setXYZ(e,Ln.x,Ln.y,Ln.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Ln.fromBufferAttribute(this,e),Ln.applyNormalMatrix(t),this.setXYZ(e,Ln.x,Ln.y,Ln.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Ln.fromBufferAttribute(this,e),Ln.transformDirection(t),this.setXYZ(e,Ln.x,Ln.y,Ln.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=Ft(e,this.array)),e}setX(t,e){return this.normalized&&(e=Bt(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=Ft(e,this.array)),e}setY(t,e){return this.normalized&&(e=Bt(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=Ft(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Bt(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=Ft(e,this.array)),e}setW(t,e){return this.normalized&&(e=Bt(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=Bt(e,this.array),n=Bt(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,r){return t*=this.itemSize,this.normalized&&(e=Bt(e,this.array),n=Bt(n,this.array),r=Bt(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this}setXYZW(t,e,n,r,i){return t*=this.itemSize,this.normalized&&(e=Bt(e,this.array),n=Bt(n,this.array),r=Bt(r,this.array),i=Bt(i,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==St&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class zn extends Dn{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class Fn extends Dn{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class Bn extends Dn{constructor(t,e,n){super(new Float32Array(t),e,n)}}let Un=0;const jn=new Ue,Vn=new dn,Hn=new ce,Gn=new fe,Wn=new fe,Xn=new ce;class Yn extends Mt{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Un++}),this.uuid=Nt(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(Gt(t)?Fn:zn)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const e=(new Vt).getNormalMatrix(t);n.applyNormalMatrix(e),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return jn.makeRotationFromQuaternion(t),this.applyMatrix4(jn),this}rotateX(t){return jn.makeRotationX(t),this.applyMatrix4(jn),this}rotateY(t){return jn.makeRotationY(t),this.applyMatrix4(jn),this}rotateZ(t){return jn.makeRotationZ(t),this.applyMatrix4(jn),this}translate(t,e,n){return jn.makeTranslation(t,e,n),this.applyMatrix4(jn),this}scale(t,e,n){return jn.makeScale(t,e,n),this.applyMatrix4(jn),this}lookAt(t){return Vn.lookAt(t),Vn.updateMatrix(),this.applyMatrix4(Vn.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Hn).negate(),this.translate(Hn.x,Hn.y,Hn.z),this}setFromPoints(t){const e=[];for(let n=0,r=t.length;n<r;n++){const r=t[n];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Bn(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new fe);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new ce(-1/0,-1/0,-1/0),new ce(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){const n=e[t];Gn.setFromBufferAttribute(n),this.morphTargetsRelative?(Xn.addVectors(this.boundingBox.min,Gn.min),this.boundingBox.expandByPoint(Xn),Xn.addVectors(this.boundingBox.max,Gn.max),this.boundingBox.expandByPoint(Xn)):(this.boundingBox.expandByPoint(Gn.min),this.boundingBox.expandByPoint(Gn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Ne);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new ce,1/0);if(t){const n=this.boundingSphere.center;if(Gn.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){const n=e[t];Wn.setFromBufferAttribute(n),this.morphTargetsRelative?(Xn.addVectors(Gn.min,Wn.min),Gn.expandByPoint(Xn),Xn.addVectors(Gn.max,Wn.max),Gn.expandByPoint(Xn)):(Gn.expandByPoint(Wn.min),Gn.expandByPoint(Wn.max))}Gn.getCenter(n);let r=0;for(let e=0,i=t.count;e<i;e++)Xn.fromBufferAttribute(t,e),r=Math.max(r,n.distanceToSquared(Xn));if(e)for(let i=0,o=e.length;i<o;i++){const o=e[i],a=this.morphTargetsRelative;for(let e=0,i=o.count;e<i;e++)Xn.fromBufferAttribute(o,e),a&&(Hn.fromBufferAttribute(t,e),Xn.add(Hn)),r=Math.max(r,n.distanceToSquared(Xn))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.array,r=e.position.array,i=e.normal.array,o=e.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Dn(new Float32Array(4*a),4));const s=this.getAttribute("tangent").array,u=[],l=[];for(let t=0;t<a;t++)u[t]=new ce,l[t]=new ce;const c=new ce,h=new ce,d=new ce,f=new jt,p=new jt,m=new jt,g=new ce,v=new ce;function y(t,e,n){c.fromArray(r,3*t),h.fromArray(r,3*e),d.fromArray(r,3*n),f.fromArray(o,2*t),p.fromArray(o,2*e),m.fromArray(o,2*n),h.sub(c),d.sub(c),p.sub(f),m.sub(f);const i=1/(p.x*m.y-m.x*p.y);isFinite(i)&&(g.copy(h).multiplyScalar(m.y).addScaledVector(d,-p.y).multiplyScalar(i),v.copy(d).multiplyScalar(p.x).addScaledVector(h,-m.x).multiplyScalar(i),u[t].add(g),u[e].add(g),u[n].add(g),l[t].add(v),l[e].add(v),l[n].add(v))}let b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(let t=0,e=b.length;t<e;++t){const e=b[t],r=e.start;for(let t=r,i=r+e.count;t<i;t+=3)y(n[t+0],n[t+1],n[t+2])}const x=new ce,w=new ce,_=new ce,S=new ce;function E(t){_.fromArray(i,3*t),S.copy(_);const e=u[t];x.copy(e),x.sub(_.multiplyScalar(_.dot(e))).normalize(),w.crossVectors(S,e);const n=w.dot(l[t])<0?-1:1;s[4*t]=x.x,s[4*t+1]=x.y,s[4*t+2]=x.z,s[4*t+3]=n}for(let t=0,e=b.length;t<e;++t){const e=b[t],r=e.start;for(let t=r,i=r+e.count;t<i;t+=3)E(n[t+0]),E(n[t+1]),E(n[t+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new Dn(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let t=0,e=n.count;t<e;t++)n.setXYZ(t,0,0,0);const r=new ce,i=new ce,o=new ce,a=new ce,s=new ce,u=new ce,l=new ce,c=new ce;if(t)for(let h=0,d=t.count;h<d;h+=3){const d=t.getX(h+0),f=t.getX(h+1),p=t.getX(h+2);r.fromBufferAttribute(e,d),i.fromBufferAttribute(e,f),o.fromBufferAttribute(e,p),l.subVectors(o,i),c.subVectors(r,i),l.cross(c),a.fromBufferAttribute(n,d),s.fromBufferAttribute(n,f),u.fromBufferAttribute(n,p),a.add(l),s.add(l),u.add(l),n.setXYZ(d,a.x,a.y,a.z),n.setXYZ(f,s.x,s.y,s.z),n.setXYZ(p,u.x,u.y,u.z)}else for(let t=0,a=e.count;t<a;t+=3)r.fromBufferAttribute(e,t+0),i.fromBufferAttribute(e,t+1),o.fromBufferAttribute(e,t+2),l.subVectors(o,i),c.subVectors(r,i),l.cross(c),n.setXYZ(t+0,l.x,l.y,l.z),n.setXYZ(t+1,l.x,l.y,l.z),n.setXYZ(t+2,l.x,l.y,l.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)Xn.fromBufferAttribute(t,e),Xn.normalize(),t.setXYZ(e,Xn.x,Xn.y,Xn.z)}toNonIndexed(){function t(t,e){const n=t.array,r=t.itemSize,i=t.normalized,o=new n.constructor(e.length*r);let a=0,s=0;for(let i=0,u=e.length;i<u;i++){a=t.isInterleavedBufferAttribute?e[i]*t.data.stride+t.offset:e[i]*r;for(let t=0;t<r;t++)o[s++]=n[a++]}return new Dn(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new Yn,n=this.index.array,r=this.attributes;for(const i in r){const o=t(r[i],n);e.setAttribute(i,o)}const i=this.morphAttributes;for(const r in i){const o=[],a=i[r];for(let e=0,r=a.length;e<r;e++){const r=t(a[e],n);o.push(r)}e.morphAttributes[r]=o}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let t=0,n=o.length;t<n;t++){const n=o[t];e.addGroup(n.start,n.count,n.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const e in n){const r=n[e];t.data.attributes[e]=r.toJSON(t.data)}const r={};let i=!1;for(const e in this.morphAttributes){const n=this.morphAttributes[e],o=[];for(let e=0,r=n.length;e<r;e++){const r=n[e];o.push(r.toJSON(t.data))}o.length>0&&(r[e]=o,i=!0)}i&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const r=t.attributes;for(const t in r){const n=r[t];this.setAttribute(t,n.clone(e))}const i=t.morphAttributes;for(const t in i){const n=[],r=i[t];for(let t=0,i=r.length;t<i;t++)n.push(r[t].clone(e));this.morphAttributes[t]=n}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let t=0,e=o.length;t<e;t++){const e=o[t];this.addGroup(e.start,e.count,e.materialIndex)}const a=t.boundingBox;null!==a&&(this.boundingBox=a.clone());const s=t.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const qn=new Ue,$n=new Be,Kn=new Ne,Zn=new ce,Qn=new ce,Jn=new ce,tr=new ce,er=new ce,nr=new ce,rr=new jt,ir=new jt,or=new jt,ar=new ce,sr=new ce,ur=new ce,lr=new ce,cr=new ce;class hr extends dn{constructor(t=new Yn,e=new On){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}getVertexPosition(t,e){const n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,o=n.morphTargetsRelative;e.fromBufferAttribute(r,t);const a=this.morphTargetInfluences;if(i&&a){nr.set(0,0,0);for(let n=0,r=i.length;n<r;n++){const r=a[n],s=i[n];0!==r&&(er.fromBufferAttribute(s,t),o?nr.addScaledVector(er,r):nr.addScaledVector(er.sub(e),r))}e.add(nr)}return this.isSkinnedMesh&&this.applyBoneTransform(t,e),e}raycast(t,e){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),Kn.copy(n.boundingSphere),Kn.applyMatrix4(i),$n.copy(t.ray).recast(t.near),!1===Kn.containsPoint($n.origin)){if(null===$n.intersectSphere(Kn,Zn))return;if($n.origin.distanceToSquared(Zn)>(t.far-t.near)**2)return}if(qn.copy(i).invert(),$n.copy(t.ray).applyMatrix4(qn),null!==n.boundingBox&&!1===$n.intersectsBox(n.boundingBox))return;let o;const a=n.index,s=n.attributes.position,u=n.attributes.uv,l=n.attributes.uv2,c=n.attributes.normal,h=n.groups,d=n.drawRange;if(null!==a)if(Array.isArray(r))for(let n=0,i=h.length;n<i;n++){const i=h[n],s=r[i.materialIndex];for(let n=Math.max(i.start,d.start),r=Math.min(a.count,Math.min(i.start+i.count,d.start+d.count));n<r;n+=3){const r=a.getX(n),h=a.getX(n+1),d=a.getX(n+2);o=dr(this,s,t,$n,u,l,c,r,h,d),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=i.materialIndex,e.push(o))}}else{for(let n=Math.max(0,d.start),i=Math.min(a.count,d.start+d.count);n<i;n+=3){const i=a.getX(n),s=a.getX(n+1),h=a.getX(n+2);o=dr(this,r,t,$n,u,l,c,i,s,h),o&&(o.faceIndex=Math.floor(n/3),e.push(o))}}else if(void 0!==s)if(Array.isArray(r))for(let n=0,i=h.length;n<i;n++){const i=h[n],a=r[i.materialIndex];for(let n=Math.max(i.start,d.start),r=Math.min(s.count,Math.min(i.start+i.count,d.start+d.count));n<r;n+=3){o=dr(this,a,t,$n,u,l,c,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=i.materialIndex,e.push(o))}}else{for(let n=Math.max(0,d.start),i=Math.min(s.count,d.start+d.count);n<i;n+=3){o=dr(this,r,t,$n,u,l,c,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),e.push(o))}}}}function dr(t,e,n,r,i,o,a,s,u,h){t.getVertexPosition(s,Qn),t.getVertexPosition(u,Jn),t.getVertexPosition(h,tr);const d=function(t,e,n,r,i,o,a,s){let u;if(u=e.side===c?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,e.side===l,s),null===u)return null;cr.copy(s),cr.applyMatrix4(t.matrixWorld);const h=n.ray.origin.distanceTo(cr);return h<n.near||h>n.far?null:{distance:h,point:cr.clone(),object:t}}(t,e,n,r,Qn,Jn,tr,lr);if(d){i&&(rr.fromBufferAttribute(i,s),ir.fromBufferAttribute(i,u),or.fromBufferAttribute(i,h),d.uv=En.getInterpolation(lr,Qn,Jn,tr,rr,ir,or,new jt)),o&&(rr.fromBufferAttribute(o,s),ir.fromBufferAttribute(o,u),or.fromBufferAttribute(o,h),d.uv2=En.getInterpolation(lr,Qn,Jn,tr,rr,ir,or,new jt)),a&&(ar.fromBufferAttribute(a,s),sr.fromBufferAttribute(a,u),ur.fromBufferAttribute(a,h),d.normal=En.getInterpolation(lr,Qn,Jn,tr,ar,sr,ur,new ce),d.normal.dot(r.direction)>0&&d.normal.multiplyScalar(-1));const t={a:s,b:u,c:h,normal:new ce,materialIndex:0};En.getNormal(Qn,Jn,tr,t.normal),d.face=t}return d}class fr extends Yn{constructor(t=1,e=1,n=1,r=1,i=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};const a=this;r=Math.floor(r),i=Math.floor(i),o=Math.floor(o);const s=[],u=[],l=[],c=[];let h=0,d=0;function f(t,e,n,r,i,o,f,p,m,g,v){const y=o/m,b=f/g,x=o/2,w=f/2,_=p/2,S=m+1,E=g+1;let A=0,M=0;const C=new ce;for(let o=0;o<E;o++){const a=o*b-w;for(let s=0;s<S;s++){const h=s*y-x;C[t]=h*r,C[e]=a*i,C[n]=_,u.push(C.x,C.y,C.z),C[t]=0,C[e]=0,C[n]=p>0?1:-1,l.push(C.x,C.y,C.z),c.push(s/m),c.push(1-o/g),A+=1}}for(let t=0;t<g;t++)for(let e=0;e<m;e++){const n=h+e+S*t,r=h+e+S*(t+1),i=h+(e+1)+S*(t+1),o=h+(e+1)+S*t;s.push(n,r,o),s.push(r,i,o),M+=6}a.addGroup(d,M,v),d+=M,h+=A}f("z","y","x",-1,-1,n,e,t,o,i,0),f("z","y","x",1,-1,n,e,-t,o,i,1),f("x","z","y",1,1,t,n,e,r,o,2),f("x","z","y",1,-1,t,n,-e,r,o,3),f("x","y","z",1,-1,t,e,n,r,i,4),f("x","y","z",-1,-1,t,e,-n,r,i,5),this.setIndex(s),this.setAttribute("position",new Bn(u,3)),this.setAttribute("normal",new Bn(l,3)),this.setAttribute("uv",new Bn(c,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new fr(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function pr(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function mr(t){const e={};for(let n=0;n<t.length;n++){const r=pr(t[n]);for(const t in r)e[t]=r[t]}return e}function gr(t){return null===t.getRenderTarget()&&t.outputEncoding===yt?bt:xt}const vr={clone:pr,merge:mr};class yr extends Mn{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=pr(t.uniforms),this.uniformsGroups=function(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const n in this.uniforms){const r=this.uniforms[n].value;r&&r.isTexture?e.uniforms[n]={type:"t",value:r.toJSON(t).uuid}:r&&r.isColor?e.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?e.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?e.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?e.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?e.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?e.uniforms[n]={type:"m4",value:r.toArray()}:e.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const n={};for(const t in this.extensions)!0===this.extensions[t]&&(n[t]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}class br extends dn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ue,this.projectionMatrix=new Ue,this.projectionMatrixInverse=new Ue}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class xr extends br{constructor(t=50,e=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*It*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*kt*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*It*Math.atan(Math.tan(.5*kt*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,n,r,i,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*kt*this.fov)/this.zoom,n=2*e,r=this.aspect*n,i=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const t=o.fullWidth,a=o.fullHeight;i+=o.offsetX*r/t,e-=o.offsetY*n/a,r*=o.width/t,n*=o.height/a}const a=this.filmOffset;0!==a&&(i+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const wr=-90;class _r extends dn{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n;const r=new xr(wr,1,t,e);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);const i=new xr(wr,1,t,e);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(-1,0,0),this.add(i);const o=new xr(wr,1,t,e);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const a=new xr(wr,1,t,e);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const s=new xr(wr,1,t,e);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(0,0,1),this.add(s);const u=new xr(wr,1,t,e);u.layers=this.layers,u.up.set(0,1,0),u.lookAt(0,0,-1),this.add(u)}update(t,e){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,i,o,a,s,u]=this.children,l=t.getRenderTarget(),c=t.toneMapping,h=t.xr.enabled;t.toneMapping=k,t.xr.enabled=!1;const d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,r),t.setRenderTarget(n,1),t.render(e,i),t.setRenderTarget(n,2),t.render(e,o),t.setRenderTarget(n,3),t.render(e,a),t.setRenderTarget(n,4),t.render(e,s),n.texture.generateMipmaps=d,t.setRenderTarget(n,5),t.render(e,u),t.setRenderTarget(l),t.toneMapping=c,t.xr.enabled=h,n.texture.needsPMREMUpdate=!0}}class Sr extends ie{constructor(t,e,n,r,i,o,a,s,u,l){super(t=void 0!==t?t:[],e=void 0!==e?e:R,n,r,i,o,a,s,u,l),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class Er extends ae{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1},r=[n,n,n,n,n,n];this.texture=new Sr(r,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:X}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new fr(5,5,5),i=new yr({name:"CubemapFromEquirect",uniforms:pr(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:c,blending:0});i.uniforms.tEquirect.value=e;const o=new hr(r,i),a=e.minFilter;e.minFilter===q&&(e.minFilter=X);return new _r(1,10,this).update(t,o),e.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(t,e,n,r){const i=t.getRenderTarget();for(let i=0;i<6;i++)t.setRenderTarget(this,i),t.clear(e,n,r);t.setRenderTarget(i)}}const Ar=new ce,Mr=new ce,Cr=new Vt;class Tr{constructor(t=new ce(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const r=Ar.subVectors(n,e).cross(Mr.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const n=t.delta(Ar),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const i=-(t.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:e.copy(t.start).addScaledVector(n,i)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||Cr.getNormalMatrix(t),r=this.coplanarPoint(Ar).applyMatrix4(t),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const kr=new Ne,Ir=new ce;class Nr{constructor(t=new Tr,e=new Tr,n=new Tr,r=new Tr,i=new Tr,o=new Tr){this.planes=[t,e,n,r,i,o]}set(t,e,n,r,i,o){const a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){const e=this.planes,n=t.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],l=n[6],c=n[7],h=n[8],d=n[9],f=n[10],p=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return e[0].setComponents(a-r,c-s,p-h,y-m).normalize(),e[1].setComponents(a+r,c+s,p+h,y+m).normalize(),e[2].setComponents(a+i,c+u,p+d,y+g).normalize(),e[3].setComponents(a-i,c-u,p-d,y-g).normalize(),e[4].setComponents(a-o,c-l,p-f,y-v).normalize(),e[5].setComponents(a+o,c+l,p+f,y+v).normalize(),this}intersectsObject(t){if(void 0!==t.boundingSphere)null===t.boundingSphere&&t.computeBoundingSphere(),kr.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;null===e.boundingSphere&&e.computeBoundingSphere(),kr.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(kr)}intersectsSprite(t){return kr.center.set(0,0,0),kr.radius=.7071067811865476,kr.applyMatrix4(t.matrixWorld),this.intersectsSphere(kr)}intersectsSphere(t){const e=this.planes,n=t.center,r=-t.radius;for(let t=0;t<6;t++){if(e[t].distanceToPoint(n)<r)return!1}return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const r=e[n];if(Ir.x=r.normal.x>0?t.max.x:t.min.x,Ir.y=r.normal.y>0?t.max.y:t.min.y,Ir.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(Ir)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Pr(){let t=null,e=!1,n=null,r=null;function i(e,o){n(e,o),r=t.requestAnimationFrame(i)}return{start:function(){!0!==e&&null!==n&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function Or(t,e){const n=e.isWebGL2,r=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),r.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);const n=r.get(e);n&&(t.deleteBuffer(n.buffer),r.delete(e))},update:function(e,i){if(e.isGLBufferAttribute){const t=r.get(e);return void((!t||t.version<e.version)&&r.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version}))}e.isInterleavedBufferAttribute&&(e=e.data);const o=r.get(e);void 0===o?r.set(e,function(e,r){const i=e.array,o=e.usage,a=t.createBuffer();let s;if(t.bindBuffer(r,a),t.bufferData(r,i,o),e.onUploadCallback(),i instanceof Float32Array)s=5126;else if(i instanceof Uint16Array)if(e.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");s=5131}else s=5123;else if(i instanceof Int16Array)s=5122;else if(i instanceof Uint32Array)s=5125;else if(i instanceof Int32Array)s=5124;else if(i instanceof Int8Array)s=5120;else if(i instanceof Uint8Array)s=5121;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);s=5121}return{buffer:a,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}}(e,i)):o.version<e.version&&(!function(e,r,i){const o=r.array,a=r.updateRange;t.bindBuffer(i,e),-1===a.count?t.bufferSubData(i,0,o):(n?t.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):t.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1),r.onUploadCallback()}(o.buffer,e,i),o.version=e.version)}}}class Lr extends Yn{constructor(t=1,e=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};const i=t/2,o=e/2,a=Math.floor(n),s=Math.floor(r),u=a+1,l=s+1,c=t/a,h=e/s,d=[],f=[],p=[],m=[];for(let t=0;t<l;t++){const e=t*h-o;for(let n=0;n<u;n++){const r=n*c-i;f.push(r,-e,0),p.push(0,0,1),m.push(n/a),m.push(1-t/s)}}for(let t=0;t<s;t++)for(let e=0;e<a;e++){const n=e+u*t,r=e+u*(t+1),i=e+1+u*(t+1),o=e+1+u*t;d.push(n,r,o),d.push(r,i,o)}this.setIndex(d),this.setAttribute("position",new Bn(f,3)),this.setAttribute("normal",new Bn(p,3)),this.setAttribute("uv",new Bn(m,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Lr(t.width,t.height,t.widthSegments,t.heightSegments)}}const Rr={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_NORMALMAP_TANGENTSPACE\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\t\n\t\tvec2 lodFudge = pow( 1.95, lod ) / fullSize;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec2 fullSize = vec2( textureSize( sampler, 0 ) );\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_UV2\n\tattribute vec2 uv2;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Dr={common:{diffuse:{value:new Nn(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Vt},alphaMap:{value:null},alphaMapTransform:{value:new Vt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Vt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Vt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Vt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Vt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Vt},normalScale:{value:new jt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Vt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Vt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Vt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Vt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Nn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Nn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Vt}},sprite:{diffuse:{value:new Nn(16777215)},opacity:{value:1},center:{value:new jt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Vt},alphaMap:{value:null},alphaTest:{value:0}}},zr={basic:{uniforms:mr([Dr.common,Dr.specularmap,Dr.envmap,Dr.aomap,Dr.lightmap,Dr.fog]),vertexShader:Rr.meshbasic_vert,fragmentShader:Rr.meshbasic_frag},lambert:{uniforms:mr([Dr.common,Dr.specularmap,Dr.envmap,Dr.aomap,Dr.lightmap,Dr.emissivemap,Dr.bumpmap,Dr.normalmap,Dr.displacementmap,Dr.fog,Dr.lights,{emissive:{value:new Nn(0)}}]),vertexShader:Rr.meshlambert_vert,fragmentShader:Rr.meshlambert_frag},phong:{uniforms:mr([Dr.common,Dr.specularmap,Dr.envmap,Dr.aomap,Dr.lightmap,Dr.emissivemap,Dr.bumpmap,Dr.normalmap,Dr.displacementmap,Dr.fog,Dr.lights,{emissive:{value:new Nn(0)},specular:{value:new Nn(1118481)},shininess:{value:30}}]),vertexShader:Rr.meshphong_vert,fragmentShader:Rr.meshphong_frag},standard:{uniforms:mr([Dr.common,Dr.envmap,Dr.aomap,Dr.lightmap,Dr.emissivemap,Dr.bumpmap,Dr.normalmap,Dr.displacementmap,Dr.roughnessmap,Dr.metalnessmap,Dr.fog,Dr.lights,{emissive:{value:new Nn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Rr.meshphysical_vert,fragmentShader:Rr.meshphysical_frag},toon:{uniforms:mr([Dr.common,Dr.aomap,Dr.lightmap,Dr.emissivemap,Dr.bumpmap,Dr.normalmap,Dr.displacementmap,Dr.gradientmap,Dr.fog,Dr.lights,{emissive:{value:new Nn(0)}}]),vertexShader:Rr.meshtoon_vert,fragmentShader:Rr.meshtoon_frag},matcap:{uniforms:mr([Dr.common,Dr.bumpmap,Dr.normalmap,Dr.displacementmap,Dr.fog,{matcap:{value:null}}]),vertexShader:Rr.meshmatcap_vert,fragmentShader:Rr.meshmatcap_frag},points:{uniforms:mr([Dr.points,Dr.fog]),vertexShader:Rr.points_vert,fragmentShader:Rr.points_frag},dashed:{uniforms:mr([Dr.common,Dr.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Rr.linedashed_vert,fragmentShader:Rr.linedashed_frag},depth:{uniforms:mr([Dr.common,Dr.displacementmap]),vertexShader:Rr.depth_vert,fragmentShader:Rr.depth_frag},normal:{uniforms:mr([Dr.common,Dr.bumpmap,Dr.normalmap,Dr.displacementmap,{opacity:{value:1}}]),vertexShader:Rr.meshnormal_vert,fragmentShader:Rr.meshnormal_frag},sprite:{uniforms:mr([Dr.sprite,Dr.fog]),vertexShader:Rr.sprite_vert,fragmentShader:Rr.sprite_frag},background:{uniforms:{uvTransform:{value:new Vt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Rr.background_vert,fragmentShader:Rr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Rr.backgroundCube_vert,fragmentShader:Rr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Rr.cube_vert,fragmentShader:Rr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Rr.equirect_vert,fragmentShader:Rr.equirect_frag},distanceRGBA:{uniforms:mr([Dr.common,Dr.displacementmap,{referencePosition:{value:new ce},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Rr.distanceRGBA_vert,fragmentShader:Rr.distanceRGBA_frag},shadow:{uniforms:mr([Dr.lights,Dr.fog,{color:{value:new Nn(0)},opacity:{value:1}}]),vertexShader:Rr.shadow_vert,fragmentShader:Rr.shadow_frag}};zr.physical={uniforms:mr([zr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Vt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Vt},clearcoatNormalScale:{value:new jt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Vt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Vt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Vt},sheen:{value:0},sheenColor:{value:new Nn(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Vt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Vt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Vt},transmissionSamplerSize:{value:new jt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Vt},attenuationDistance:{value:0},attenuationColor:{value:new Nn(0)},specularColor:{value:new Nn(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Vt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Vt}}]),vertexShader:Rr.meshphysical_vert,fragmentShader:Rr.meshphysical_frag};const Fr={r:0,b:0,g:0};function Br(t,e,n,r,i,o,a){const s=new Nn(0);let u,h,d=!0===o?0:1,f=null,p=0,m=null;function g(e,n){e.getRGB(Fr,gr(t)),r.buffers.color.setClear(Fr.r,Fr.g,Fr.b,n,a)}return{getClearColor:function(){return s},setClearColor:function(t,e=1){s.set(t),d=e,g(s,d)},getClearAlpha:function(){return d},setClearAlpha:function(t){d=t,g(s,d)},render:function(r,o){let a=!1,v=!0===o.isScene?o.background:null;if(v&&v.isTexture){v=(o.backgroundBlurriness>0?n:e).get(v)}const y=t.xr,b=y.getSession&&y.getSession();b&&"additive"===b.environmentBlendMode&&(v=null),null===v?g(s,d):v&&v.isColor&&(g(v,1),a=!0),(t.autoClear||a)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),v&&(v.isCubeTexture||v.mapping===B)?(void 0===h&&(h=new hr(new fr(1,1,1),new yr({name:"BackgroundCubeMaterial",uniforms:pr(zr.backgroundCube.uniforms),vertexShader:zr.backgroundCube.vertexShader,fragmentShader:zr.backgroundCube.fragmentShader,side:c,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(h)),h.material.uniforms.envMap.value=v,h.material.uniforms.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,h.material.uniforms.backgroundBlurriness.value=o.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=o.backgroundIntensity,h.material.toneMapped=v.encoding!==yt,f===v&&p===v.version&&m===t.toneMapping||(h.material.needsUpdate=!0,f=v,p=v.version,m=t.toneMapping),h.layers.enableAll(),r.unshift(h,h.geometry,h.material,0,0,null)):v&&v.isTexture&&(void 0===u&&(u=new hr(new Lr(2,2),new yr({name:"BackgroundMaterial",uniforms:pr(zr.background.uniforms),vertexShader:zr.background.vertexShader,fragmentShader:zr.background.fragmentShader,side:l,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=v,u.material.uniforms.backgroundIntensity.value=o.backgroundIntensity,u.material.toneMapped=v.encoding!==yt,!0===v.matrixAutoUpdate&&v.updateMatrix(),u.material.uniforms.uvTransform.value.copy(v.matrix),f===v&&p===v.version&&m===t.toneMapping||(u.material.needsUpdate=!0,f=v,p=v.version,m=t.toneMapping),u.layers.enableAll(),r.unshift(u,u.geometry,u.material,0,0,null))}}}function Ur(t,e,n,r){const i=t.getParameter(34921),o=r.isWebGL2?null:e.get("OES_vertex_array_object"),a=r.isWebGL2||null!==o,s={},u=f(null);let l=u,c=!1;function h(e){return r.isWebGL2?t.bindVertexArray(e):o.bindVertexArrayOES(e)}function d(e){return r.isWebGL2?t.deleteVertexArray(e):o.deleteVertexArrayOES(e)}function f(t){const e=[],n=[],r=[];for(let t=0;t<i;t++)e[t]=0,n[t]=0,r[t]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:r,object:t,attributes:{},index:null}}function p(){const t=l.newAttributes;for(let e=0,n=t.length;e<n;e++)t[e]=0}function m(t){g(t,0)}function g(n,i){const o=l.newAttributes,a=l.enabledAttributes,s=l.attributeDivisors;if(o[n]=1,0===a[n]&&(t.enableVertexAttribArray(n),a[n]=1),s[n]!==i){(r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i}}function v(){const e=l.newAttributes,n=l.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==e[r]&&(t.disableVertexAttribArray(r),n[r]=0)}function y(e,n,i,o,a,s){!0!==r.isWebGL2||5124!==i&&5125!==i?t.vertexAttribPointer(e,n,i,o,a,s):t.vertexAttribIPointer(e,n,i,a,s)}function b(){x(),c=!0,l!==u&&(l=u,h(l.object))}function x(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:function(i,u,d,b,x){let w=!1;if(a){const e=function(e,n,i){const a=!0===i.wireframe;let u=s[e.id];void 0===u&&(u={},s[e.id]=u);let l=u[n.id];void 0===l&&(l={},u[n.id]=l);let c=l[a];void 0===c&&(c=f(r.isWebGL2?t.createVertexArray():o.createVertexArrayOES()),l[a]=c);return c}(b,d,u);l!==e&&(l=e,h(l.object)),w=function(t,e,n,r){const i=l.attributes,o=e.attributes;let a=0;const s=n.getAttributes();for(const e in s){if(s[e].location>=0){const n=i[e];let r=o[e];if(void 0===r&&("instanceMatrix"===e&&t.instanceMatrix&&(r=t.instanceMatrix),"instanceColor"===e&&t.instanceColor&&(r=t.instanceColor)),void 0===n)return!0;if(n.attribute!==r)return!0;if(r&&n.data!==r.data)return!0;a++}}return l.attributesNum!==a||l.index!==r}(i,b,d,x),w&&function(t,e,n,r){const i={},o=e.attributes;let a=0;const s=n.getAttributes();for(const e in s){if(s[e].location>=0){let n=o[e];void 0===n&&("instanceMatrix"===e&&t.instanceMatrix&&(n=t.instanceMatrix),"instanceColor"===e&&t.instanceColor&&(n=t.instanceColor));const r={};r.attribute=n,n&&n.data&&(r.data=n.data),i[e]=r,a++}}l.attributes=i,l.attributesNum=a,l.index=r}(i,b,d,x)}else{const t=!0===u.wireframe;l.geometry===b.id&&l.program===d.id&&l.wireframe===t||(l.geometry=b.id,l.program=d.id,l.wireframe=t,w=!0)}null!==x&&n.update(x,34963),(w||c)&&(c=!1,function(i,o,a,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;p();const u=s.attributes,l=a.getAttributes(),c=o.defaultAttributeValues;for(const e in l){const r=l[e];if(r.location>=0){let o=u[e];if(void 0===o&&("instanceMatrix"===e&&i.instanceMatrix&&(o=i.instanceMatrix),"instanceColor"===e&&i.instanceColor&&(o=i.instanceColor)),void 0!==o){const e=o.normalized,a=o.itemSize,u=n.get(o);if(void 0===u)continue;const l=u.buffer,c=u.type,h=u.bytesPerElement;if(o.isInterleavedBufferAttribute){const n=o.data,u=n.stride,d=o.offset;if(n.isInstancedInterleavedBuffer){for(let t=0;t<r.locationSize;t++)g(r.location+t,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let t=0;t<r.locationSize;t++)m(r.location+t);t.bindBuffer(34962,l);for(let t=0;t<r.locationSize;t++)y(r.location+t,a/r.locationSize,c,e,u*h,(d+a/r.locationSize*t)*h)}else{if(o.isInstancedBufferAttribute){for(let t=0;t<r.locationSize;t++)g(r.location+t,o.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=o.meshPerAttribute*o.count)}else for(let t=0;t<r.locationSize;t++)m(r.location+t);t.bindBuffer(34962,l);for(let t=0;t<r.locationSize;t++)y(r.location+t,a/r.locationSize,c,e,a*h,a/r.locationSize*t*h)}}else if(void 0!==c){const n=c[e];if(void 0!==n)switch(n.length){case 2:t.vertexAttrib2fv(r.location,n);break;case 3:t.vertexAttrib3fv(r.location,n);break;case 4:t.vertexAttrib4fv(r.location,n);break;default:t.vertexAttrib1fv(r.location,n)}}}}v()}(i,u,d,b),null!==x&&t.bindBuffer(34963,n.get(x).buffer))},reset:b,resetDefaultState:x,dispose:function(){b();for(const t in s){const e=s[t];for(const t in e){const n=e[t];for(const t in n)d(n[t].object),delete n[t];delete e[t]}delete s[t]}},releaseStatesOfGeometry:function(t){if(void 0===s[t.id])return;const e=s[t.id];for(const t in e){const n=e[t];for(const t in n)d(n[t].object),delete n[t];delete e[t]}delete s[t.id]},releaseStatesOfProgram:function(t){for(const e in s){const n=s[e];if(void 0===n[t.id])continue;const r=n[t.id];for(const t in r)d(r[t].object),delete r[t];delete n[t.id]}},initAttributes:p,enableAttribute:m,disableUnusedAttributes:v}}function jr(t,e,n,r){const i=r.isWebGL2;let o;this.setMode=function(t){o=t},this.render=function(e,r){t.drawArrays(o,e,r),n.update(r,o,1)},this.renderInstances=function(r,a,s){if(0===s)return;let u,l;if(i)u=t,l="drawArraysInstanced";else if(u=e.get("ANGLE_instanced_arrays"),l="drawArraysInstancedANGLE",null===u)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[l](o,r,a,s),n.update(a,o,s)}}function Vr(t,e,n){let r;function i(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o="undefined"!=typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===t.constructor.name;let a=void 0!==n.precision?n.precision:"highp";const s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);const u=o||e.has("WEBGL_draw_buffers"),l=!0===n.logarithmicDepthBuffer,c=t.getParameter(34930),h=t.getParameter(35660),d=t.getParameter(3379),f=t.getParameter(34076),p=t.getParameter(34921),m=t.getParameter(36347),g=t.getParameter(36348),v=t.getParameter(36349),y=h>0,b=o||e.has("OES_texture_float");return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const n=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:f,maxAttributes:p,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:y&&b,maxSamples:o?t.getParameter(36183):0}}function Hr(t){const e=this;let n=null,r=0,i=!1,o=!1;const a=new Tr,s=new Vt,u={value:null,needsUpdate:!1};function l(t,n,r,i){const o=null!==t?t.length:0;let l=null;if(0!==o){if(l=u.value,!0!==i||null===l){const e=r+4*o,i=n.matrixWorldInverse;s.getNormalMatrix(i),(null===l||l.length<e)&&(l=new Float32Array(e));for(let e=0,n=r;e!==o;++e,n+=4)a.copy(t[e]).applyMatrix4(i,s),a.normal.toArray(l,n),l[n+3]=a.constant}u.value=l,u.needsUpdate=!0}return e.numPlanes=o,e.numIntersection=0,l}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e){const n=0!==t.length||e||0!==r||i;return i=e,r=t.length,n},this.beginShadows=function(){o=!0,l(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(t,e){n=l(t,e,0)},this.setState=function(a,s,c){const h=a.clippingPlanes,d=a.clipIntersection,f=a.clipShadows,p=t.get(a);if(!i||null===h||0===h.length||o&&!f)o?l(null):function(){u.value!==n&&(u.value=n,u.needsUpdate=r>0);e.numPlanes=r,e.numIntersection=0}();else{const t=o?0:r,e=4*t;let i=p.clippingState||null;u.value=i,i=l(h,s,e,c);for(let t=0;t!==e;++t)i[t]=n[t];p.clippingState=i,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=t}}}function Gr(t){let e=new WeakMap;function n(t,e){return e===z?t.mapping=R:e===F&&(t.mapping=D),t}function r(t){const n=t.target;n.removeEventListener("dispose",r);const i=e.get(n);void 0!==i&&(e.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){const o=i.mapping;if(o===z||o===F){if(e.has(i)){return n(e.get(i).texture,i.mapping)}{const o=i.image;if(o&&o.height>0){const a=new Er(o.height/2);return a.fromEquirectangularTexture(t,i),e.set(i,a),i.addEventListener("dispose",r),n(a.texture,i.mapping)}return null}}}return i},dispose:function(){e=new WeakMap}}}class Wr extends br{constructor(t=-1,e=1,n=1,r=-1,i=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=i,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-t,o=n+t,a=r+e,s=r-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=t*this.view.offsetX,o=i+t*this.view.width,a-=e*this.view.offsetY,s=a-e*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}const Xr=[.125,.215,.35,.446,.526,.582],Yr=20,qr=new Wr,$r=new Nn;let Kr=null;const Zr=(1+Math.sqrt(5))/2,Qr=1/Zr,Jr=[new ce(1,1,1),new ce(-1,1,1),new ce(1,1,-1),new ce(-1,1,-1),new ce(0,Zr,Qr),new ce(0,Zr,-Qr),new ce(Qr,0,Zr),new ce(-Qr,0,Zr),new ce(Zr,Qr,0),new ce(-Zr,Qr,0)];class ti{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,r=100){Kr=this._renderer.getRenderTarget(),this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(t,n,r,i),e>0&&this._blur(i,0,0,e),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=ii(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=ri(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(Kr),t.scissorTest=!1,ni(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===R||t.mapping===D?this._setSize(0===t.image.length?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),Kr=this._renderer.getRenderTarget();const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:X,minFilter:X,generateMipmaps:!1,type:Q,format:tt,encoding:vt,depthBuffer:!1},r=ei(t,e,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=ei(t,e,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(t){const e=[],n=[],r=[];let i=t;const o=t-4+1+Xr.length;for(let a=0;a<o;a++){const o=Math.pow(2,i);n.push(o);let s=1/o;a>t-4?s=Xr[a-t+4-1]:0===a&&(s=0),r.push(s);const u=1/(o-2),l=-u,c=1+u,h=[l,l,c,l,c,c,l,l,c,c,l,c],d=6,f=6,p=3,m=2,g=1,v=new Float32Array(p*f*d),y=new Float32Array(m*f*d),b=new Float32Array(g*f*d);for(let t=0;t<d;t++){const e=t%3*2/3-1,n=t>2?0:-1,r=[e,n,0,e+2/3,n,0,e+2/3,n+1,0,e,n,0,e+2/3,n+1,0,e,n+1,0];v.set(r,p*f*t),y.set(h,m*f*t);const i=[t,t,t,t,t,t];b.set(i,g*f*t)}const x=new Yn;x.setAttribute("position",new Dn(v,p)),x.setAttribute("uv",new Dn(y,m)),x.setAttribute("faceIndex",new Dn(b,g)),e.push(x),i>4&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(t,e,n){const r=new Float32Array(Yr),i=new ce(0,1,0),o=new yr({name:"SphericalGaussianBlur",defines:{n:Yr,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:oi(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1});return o}(r,t,e)}return r}_compileMaterial(t){const e=new hr(this._lodPlanes[0],t);this._renderer.compile(e,qr)}_sceneToCubeUV(t,e,n,r){const i=new xr(90,1,e,n),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],s=this._renderer,u=s.autoClear,l=s.toneMapping;s.getClearColor($r),s.toneMapping=k,s.autoClear=!1;const h=new On({name:"PMREM.Background",side:c,depthWrite:!1,depthTest:!1}),d=new hr(new fr,h);let f=!1;const p=t.background;p?p.isColor&&(h.color.copy(p),t.background=null,f=!0):(h.color.copy($r),f=!0);for(let e=0;e<6;e++){const n=e%3;0===n?(i.up.set(0,o[e],0),i.lookAt(a[e],0,0)):1===n?(i.up.set(0,0,o[e]),i.lookAt(0,a[e],0)):(i.up.set(0,o[e],0),i.lookAt(0,0,a[e]));const u=this._cubeSize;ni(r,n*u,e>2?u:0,u,u),s.setRenderTarget(r),f&&s.render(d,i),s.render(t,i)}d.geometry.dispose(),d.material.dispose(),s.toneMapping=l,s.autoClear=u,t.background=p}_textureToCubeUV(t,e){const n=this._renderer,r=t.mapping===R||t.mapping===D;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=ii()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=ri());const i=r?this._cubemapMaterial:this._equirectMaterial,o=new hr(this._lodPlanes[0],i);i.uniforms.envMap.value=t;const a=this._cubeSize;ni(e,0,0,3*a,2*a),n.setRenderTarget(e),n.render(o,qr)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let e=1;e<this._lodPlanes.length;e++){const n=Math.sqrt(this._sigmas[e]*this._sigmas[e]-this._sigmas[e-1]*this._sigmas[e-1]),r=Jr[(e-1)%Jr.length];this._blur(t,e-1,e,n,r)}e.autoClear=n}_blur(t,e,n,r,i){const o=this._pingPongRenderTarget;this._halfBlur(t,o,e,n,r,"latitudinal",i),this._halfBlur(o,t,n,n,r,"longitudinal",i)}_halfBlur(t,e,n,r,i,o,a){const s=this._renderer,u=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const l=new hr(this._lodPlanes[r],u),c=u.uniforms,h=this._sizeLods[n]-1,d=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,f=i/d,p=isFinite(i)?1+Math.floor(3*f):Yr;p>Yr&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${p} samples when the maximum is set to 20`);const m=[];let g=0;for(let t=0;t<Yr;++t){const e=t/f,n=Math.exp(-e*e/2);m.push(n),0===t?g+=n:t<p&&(g+=2*n)}for(let t=0;t<m.length;t++)m[t]=m[t]/g;c.envMap.value=t.texture,c.samples.value=p,c.weights.value=m,c.latitudinal.value="latitudinal"===o,a&&(c.poleAxis.value=a);const{_lodMax:v}=this;c.dTheta.value=d,c.mipInt.value=v-n;const y=this._sizeLods[r];ni(e,3*y*(r>v-4?r-v+4:0),4*(this._cubeSize-y),3*y,2*y),s.setRenderTarget(e),s.render(l,qr)}}function ei(t,e,n){const r=new ae(t,e,n);return r.texture.mapping=B,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function ni(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function ri(){return new yr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:oi(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function ii(){return new yr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:oi(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function oi(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function ai(t){let e=new WeakMap,n=null;function r(t){const n=t.target;n.removeEventListener("dispose",r);const i=e.get(n);void 0!==i&&(e.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const o=i.mapping,a=o===z||o===F,s=o===R||o===D;if(a||s){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;let r=e.get(i);return null===n&&(n=new ti(t)),r=a?n.fromEquirectangular(i,r):n.fromCubemap(i,r),e.set(i,r),r.texture}if(e.has(i))return e.get(i).texture;{const o=i.image;if(a&&o&&o.height>0||s&&o&&function(t){let e=0;const n=6;for(let r=0;r<n;r++)void 0!==t[r]&&e++;return e===n}(o)){null===n&&(n=new ti(t));const o=a?n.fromEquirectangular(i):n.fromCubemap(i);return e.set(i,o),i.addEventListener("dispose",r),o.texture}return null}}}return i},dispose:function(){e=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function si(t){const e={};function n(n){if(void 0!==e[n])return e[n];let r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(n)}return e[n]=r,r}return{has:function(t){return null!==n(t)},init:function(t){t.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(t){const e=n(t);return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function ui(t,e,n,r){const i={},o=new WeakMap;function a(t){const s=t.target;null!==s.index&&e.remove(s.index);for(const t in s.attributes)e.remove(s.attributes[t]);s.removeEventListener("dispose",a),delete i[s.id];const u=o.get(s);u&&(e.remove(u),o.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(t){const n=[],r=t.index,i=t.attributes.position;let a=0;if(null!==r){const t=r.array;a=r.version;for(let e=0,r=t.length;e<r;e+=3){const r=t[e+0],i=t[e+1],o=t[e+2];n.push(r,i,i,o,o,r)}}else{const t=i.array;a=i.version;for(let e=0,r=t.length/3-1;e<r;e+=3){const t=e+0,r=e+1,i=e+2;n.push(t,r,r,i,i,t)}}const s=new(Gt(n)?Fn:zn)(n,1);s.version=a;const u=o.get(t);u&&e.remove(u),o.set(t,s)}return{get:function(t,e){return!0===i[e.id]||(e.addEventListener("dispose",a),i[e.id]=!0,n.memory.geometries++),e},update:function(t){const n=t.attributes;for(const t in n)e.update(n[t],34962);const r=t.morphAttributes;for(const t in r){const n=r[t];for(let t=0,r=n.length;t<r;t++)e.update(n[t],34962)}},getWireframeAttribute:function(t){const e=o.get(t);if(e){const n=t.index;null!==n&&e.version<n.version&&s(t)}else s(t);return o.get(t)}}}function li(t,e,n,r){const i=r.isWebGL2;let o,a,s;this.setMode=function(t){o=t},this.setIndex=function(t){a=t.type,s=t.bytesPerElement},this.render=function(e,r){t.drawElements(o,r,a,e*s),n.update(r,o,1)},this.renderInstances=function(r,u,l){if(0===l)return;let c,h;if(i)c=t,h="drawElementsInstanced";else if(c=e.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===c)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[h](o,u,a,r*s,l),n.update(u,o,l)}}function ci(t){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,r){switch(e.calls++,n){case 4:e.triangles+=r*(t/3);break;case 1:e.lines+=r*(t/2);break;case 3:e.lines+=r*(t-1);break;case 2:e.lines+=r*t;break;case 0:e.points+=r*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function hi(t,e){return t[0]-e[0]}function di(t,e){return Math.abs(e[1])-Math.abs(t[1])}function fi(t,e,n){const r={},i=new Float32Array(8),o=new WeakMap,a=new oe,s=[];for(let t=0;t<8;t++)s[t]=[t,0];return{update:function(u,l,c){const h=u.morphTargetInfluences;if(!0===e.isWebGL2){const d=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,f=void 0!==d?d.length:0;let p=o.get(l);if(void 0===p||p.count!==f){void 0!==p&&p.texture.dispose();const v=void 0!==l.morphAttributes.position,y=void 0!==l.morphAttributes.normal,b=void 0!==l.morphAttributes.color,x=l.morphAttributes.position||[],w=l.morphAttributes.normal||[],_=l.morphAttributes.color||[];let S=0;!0===v&&(S=1),!0===y&&(S=2),!0===b&&(S=3);let E=l.attributes.position.count*S,A=1;E>e.maxTextureSize&&(A=Math.ceil(E/e.maxTextureSize),E=e.maxTextureSize);const M=new Float32Array(E*A*4*f),C=new se(M,E,A,f);C.type=Z,C.needsUpdate=!0;const T=4*S;for(let I=0;I<f;I++){const N=x[I],P=w[I],O=_[I],L=E*A*4*I;for(let R=0;R<N.count;R++){const D=R*T;!0===v&&(a.fromBufferAttribute(N,R),M[L+D+0]=a.x,M[L+D+1]=a.y,M[L+D+2]=a.z,M[L+D+3]=0),!0===y&&(a.fromBufferAttribute(P,R),M[L+D+4]=a.x,M[L+D+5]=a.y,M[L+D+6]=a.z,M[L+D+7]=0),!0===b&&(a.fromBufferAttribute(O,R),M[L+D+8]=a.x,M[L+D+9]=a.y,M[L+D+10]=a.z,M[L+D+11]=4===O.itemSize?a.w:1)}}function k(){C.dispose(),o.delete(l),l.removeEventListener("dispose",k)}p={count:f,texture:C,size:new jt(E,A)},o.set(l,p),l.addEventListener("dispose",k)}let m=0;for(let z=0;z<h.length;z++)m+=h[z];const g=l.morphTargetsRelative?1:1-m;c.getUniforms().setValue(t,"morphTargetBaseInfluence",g),c.getUniforms().setValue(t,"morphTargetInfluences",h),c.getUniforms().setValue(t,"morphTargetsTexture",p.texture,n),c.getUniforms().setValue(t,"morphTargetsTextureSize",p.size)}else{const F=void 0===h?0:h.length;let B=r[l.id];if(void 0===B||B.length!==F){B=[];for(let G=0;G<F;G++)B[G]=[G,0];r[l.id]=B}for(let W=0;W<F;W++){const X=B[W];X[0]=W,X[1]=h[W]}B.sort(di);for(let Y=0;Y<8;Y++)Y<F&&B[Y][1]?(s[Y][0]=B[Y][0],s[Y][1]=B[Y][1]):(s[Y][0]=Number.MAX_SAFE_INTEGER,s[Y][1]=0);s.sort(hi);const U=l.morphAttributes.position,j=l.morphAttributes.normal;let V=0;for(let q=0;q<8;q++){const $=s[q],K=$[0],Q=$[1];K!==Number.MAX_SAFE_INTEGER&&Q?(U&&l.getAttribute("morphTarget"+q)!==U[K]&&l.setAttribute("morphTarget"+q,U[K]),j&&l.getAttribute("morphNormal"+q)!==j[K]&&l.setAttribute("morphNormal"+q,j[K]),i[q]=Q,V+=Q):(U&&!0===l.hasAttribute("morphTarget"+q)&&l.deleteAttribute("morphTarget"+q),j&&!0===l.hasAttribute("morphNormal"+q)&&l.deleteAttribute("morphNormal"+q),i[q]=0)}const H=l.morphTargetsRelative?1:1-V;c.getUniforms().setValue(t,"morphTargetBaseInfluence",H),c.getUniforms().setValue(t,"morphTargetInfluences",i)}}}}function pi(t,e,n,r){let i=new WeakMap;function o(t){const e=t.target;e.removeEventListener("dispose",o),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:function(t){const a=r.render.frame,s=t.geometry,u=e.get(t,s);return i.get(u)!==a&&(e.update(u),i.set(u,a)),t.isInstancedMesh&&(!1===t.hasEventListener("dispose",o)&&t.addEventListener("dispose",o),n.update(t.instanceMatrix,34962),null!==t.instanceColor&&n.update(t.instanceColor,34962)),u},dispose:function(){i=new WeakMap}}}const mi=new ie,gi=new se,vi=new ue,yi=new Sr,bi=[],xi=[],wi=new Float32Array(16),_i=new Float32Array(9),Si=new Float32Array(4);function Ei(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let o=bi[i];if(void 0===o&&(o=new Float32Array(i),bi[i]=o),0!==e){r.toArray(o,0);for(let r=1,i=0;r!==e;++r)i+=n,t[r].toArray(o,i)}return o}function Ai(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Mi(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function Ci(t,e){let n=xi[e];void 0===n&&(n=new Int32Array(e),xi[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function Ti(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function ki(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ai(n,e))return;t.uniform2fv(this.addr,e),Mi(n,e)}}function Ii(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Ai(n,e))return;t.uniform3fv(this.addr,e),Mi(n,e)}}function Ni(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ai(n,e))return;t.uniform4fv(this.addr,e),Mi(n,e)}}function Pi(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(Ai(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Mi(n,e)}else{if(Ai(n,r))return;Si.set(r),t.uniformMatrix2fv(this.addr,!1,Si),Mi(n,r)}}function Oi(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(Ai(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Mi(n,e)}else{if(Ai(n,r))return;_i.set(r),t.uniformMatrix3fv(this.addr,!1,_i),Mi(n,r)}}function Li(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(Ai(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Mi(n,e)}else{if(Ai(n,r))return;wi.set(r),t.uniformMatrix4fv(this.addr,!1,wi),Mi(n,r)}}function Ri(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Di(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ai(n,e))return;t.uniform2iv(this.addr,e),Mi(n,e)}}function zi(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Ai(n,e))return;t.uniform3iv(this.addr,e),Mi(n,e)}}function Fi(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ai(n,e))return;t.uniform4iv(this.addr,e),Mi(n,e)}}function Bi(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Ui(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ai(n,e))return;t.uniform2uiv(this.addr,e),Mi(n,e)}}function ji(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Ai(n,e))return;t.uniform3uiv(this.addr,e),Mi(n,e)}}function Vi(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ai(n,e))return;t.uniform4uiv(this.addr,e),Mi(n,e)}}function Hi(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(e||mi,i)}function Gi(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||vi,i)}function Wi(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||yi,i)}function Xi(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||gi,i)}function Yi(t,e){t.uniform1fv(this.addr,e)}function qi(t,e){const n=Ei(e,this.size,2);t.uniform2fv(this.addr,n)}function $i(t,e){const n=Ei(e,this.size,3);t.uniform3fv(this.addr,n)}function Ki(t,e){const n=Ei(e,this.size,4);t.uniform4fv(this.addr,n)}function Zi(t,e){const n=Ei(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function Qi(t,e){const n=Ei(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function Ji(t,e){const n=Ei(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function to(t,e){t.uniform1iv(this.addr,e)}function eo(t,e){t.uniform2iv(this.addr,e)}function no(t,e){t.uniform3iv(this.addr,e)}function ro(t,e){t.uniform4iv(this.addr,e)}function io(t,e){t.uniform1uiv(this.addr,e)}function oo(t,e){t.uniform2uiv(this.addr,e)}function ao(t,e){t.uniform3uiv(this.addr,e)}function so(t,e){t.uniform4uiv(this.addr,e)}function uo(t,e,n){const r=this.cache,i=e.length,o=Ci(n,i);Ai(r,o)||(t.uniform1iv(this.addr,o),Mi(r,o));for(let t=0;t!==i;++t)n.setTexture2D(e[t]||mi,o[t])}function lo(t,e,n){const r=this.cache,i=e.length,o=Ci(n,i);Ai(r,o)||(t.uniform1iv(this.addr,o),Mi(r,o));for(let t=0;t!==i;++t)n.setTexture3D(e[t]||vi,o[t])}function co(t,e,n){const r=this.cache,i=e.length,o=Ci(n,i);Ai(r,o)||(t.uniform1iv(this.addr,o),Mi(r,o));for(let t=0;t!==i;++t)n.setTextureCube(e[t]||yi,o[t])}function ho(t,e,n){const r=this.cache,i=e.length,o=Ci(n,i);Ai(r,o)||(t.uniform1iv(this.addr,o),Mi(r,o));for(let t=0;t!==i;++t)n.setTexture2DArray(e[t]||gi,o[t])}class fo{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return Ti;case 35664:return ki;case 35665:return Ii;case 35666:return Ni;case 35674:return Pi;case 35675:return Oi;case 35676:return Li;case 5124:case 35670:return Ri;case 35667:case 35671:return Di;case 35668:case 35672:return zi;case 35669:case 35673:return Fi;case 5125:return Bi;case 36294:return Ui;case 36295:return ji;case 36296:return Vi;case 35678:case 36198:case 36298:case 36306:case 35682:return Hi;case 35679:case 36299:case 36307:return Gi;case 35680:case 36300:case 36308:case 36293:return Wi;case 36289:case 36303:case 36311:case 36292:return Xi}}(e.type)}}class po{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return Yi;case 35664:return qi;case 35665:return $i;case 35666:return Ki;case 35674:return Zi;case 35675:return Qi;case 35676:return Ji;case 5124:case 35670:return to;case 35667:case 35671:return eo;case 35668:case 35672:return no;case 35669:case 35673:return ro;case 5125:return io;case 36294:return oo;case 36295:return ao;case 36296:return so;case 35678:case 36198:case 36298:case 36306:case 35682:return uo;case 35679:case 36299:case 36307:return lo;case 35680:case 36300:case 36308:case 36293:return co;case 36289:case 36303:case 36311:case 36292:return ho}}(e.type)}}class mo{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const o=r[i];o.setValue(t,e[o.id],n)}}}const go=/(\w+)(\])?(\[|\.)?/g;function vo(t,e){t.seq.push(e),t.map[e.id]=e}function yo(t,e,n){const r=t.name,i=r.length;for(go.lastIndex=0;;){const o=go.exec(r),a=go.lastIndex;let s=o[1];const u="]"===o[2],l=o[3];if(u&&(s|=0),void 0===l||"["===l&&a+2===i){vo(n,void 0===l?new fo(s,t,e):new po(s,t,e));break}{let t=n.map[s];void 0===t&&(t=new mo(s),vo(n,t)),n=t}}}class bo{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,35718);for(let r=0;r<n;++r){const n=t.getActiveUniform(e,r);yo(n,t.getUniformLocation(e,n.name),this)}}setValue(t,e,n,r){const i=this.map[e];void 0!==i&&i.setValue(t,n,r)}setOptional(t,e,n){const r=e[n];void 0!==r&&this.setValue(t,n,r)}static upload(t,e,n,r){for(let i=0,o=e.length;i!==o;++i){const o=e[i],a=n[o.id];!1!==a.needsUpdate&&o.setValue(t,a.value,r)}}static seqWithValue(t,e){const n=[];for(let r=0,i=t.length;r!==i;++r){const i=t[r];i.id in e&&n.push(i)}return n}}function xo(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}let wo=0;function _o(t,e,n){const r=t.getShaderParameter(e,35713),i=t.getShaderInfoLog(e).trim();if(r&&""===i)return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const r=parseInt(o[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(t,e){const n=t.split("\n"),r=[],i=Math.max(e-6,0),o=Math.min(e+6,n.length);for(let t=i;t<o;t++){const i=t+1;r.push(`${i===e?">":" "} ${i}: ${n[t]}`)}return r.join("\n")}(t.getShaderSource(e),r)}return i}function So(t,e){const n=function(t){switch(t){case vt:return["Linear","( value )"];case yt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Eo(t,e){let n;switch(e){case I:n="Linear";break;case N:n="Reinhard";break;case P:n="OptimizedCineon";break;case O:n="ACESFilmic";break;case L:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Ao(t){return""!==t}function Mo(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Co(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const To=/^[ \t]*#include +<([\w\d./]+)>/gm;function ko(t){return t.replace(To,Io)}function Io(t,e){const n=Rr[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return ko(n)}const No=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Po(t){return t.replace(No,Oo)}function Oo(t,e,n,r){let i="";for(let t=parseInt(e);t<parseInt(n);t++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+t+" ]").replace(/UNROLLED_LOOP_INDEX/g,t);return i}function Lo(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function Ro(t,e,n,r){const i=t.getContext(),o=n.defines;let l=n.vertexShader,c=n.fragmentShader;const h=function(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===a?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===s?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===u&&(e="SHADOWMAP_TYPE_VSM"),e}(n),d=function(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case R:case D:e="ENVMAP_TYPE_CUBE";break;case B:e="ENVMAP_TYPE_CUBE_UV"}return e}(n),f=function(t){let e="ENVMAP_MODE_REFLECTION";t.envMap&&t.envMapMode===D&&(e="ENVMAP_MODE_REFRACTION");return e}(n),p=function(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case M:e="ENVMAP_BLENDING_MULTIPLY";break;case C:e="ENVMAP_BLENDING_MIX";break;case T:e="ENVMAP_BLENDING_ADD"}return e}(n),m=function(t){const e=t.envMapCubeUVHeight;if(null===e)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),g=n.isWebGL2?"":function(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ao).join("\n")}(n),v=function(t){const e=[];for(const n in t){const r=t[n];!1!==r&&e.push("#define "+n+" "+r)}return e.join("\n")}(o),y=i.createProgram();let b,x,w=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(b=[v].filter(Ao).join("\n"),b.length>0&&(b+="\n"),x=[g,v].filter(Ao).join("\n"),x.length>0&&(x+="\n")):(b=[Lo(n),"#define SHADER_NAME "+n.shaderName,v,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs2?"#define USE_UV2":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+h:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Ao).join("\n"),x=[g,Lo(n),"#define SHADER_NAME "+n.shaderName,v,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.envMap?"#define "+f:"",n.envMap?"#define "+p:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs2?"#define USE_UV2":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+h:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==k?"#define TONE_MAPPING":"",n.toneMapping!==k?Rr.tonemapping_pars_fragment:"",n.toneMapping!==k?Eo("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Rr.encodings_pars_fragment,So("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Ao).join("\n")),l=ko(l),l=Mo(l,n),l=Co(l,n),c=ko(c),c=Mo(c,n),c=Co(c,n),l=Po(l),c=Po(c),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(w="#version 300 es\n",b=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+b,x=["#define varying in",n.glslVersion===Et?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Et?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+x);const _=w+x+c,S=xo(i,35633,w+b+l),E=xo(i,35632,_);if(i.attachShader(y,S),i.attachShader(y,E),void 0!==n.index0AttributeName?i.bindAttribLocation(y,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y),t.debug.checkShaderErrors){const e=i.getProgramInfoLog(y).trim(),n=i.getShaderInfoLog(S).trim(),r=i.getShaderInfoLog(E).trim();let o=!0,a=!0;if(!1===i.getProgramParameter(y,35714))if(o=!1,"function"==typeof t.debug.onShaderError)t.debug.onShaderError(i,y,S,E);else{const t=_o(i,S,"vertex"),n=_o(i,E,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(y,35715)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+n)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):""!==n&&""!==r||(a=!1);a&&(this.diagnostics={runnable:o,programLog:e,vertexShader:{log:n,prefix:b},fragmentShader:{log:r,prefix:x}})}let A,I;return i.deleteShader(S),i.deleteShader(E),this.getUniforms=function(){return void 0===A&&(A=new bo(i,y)),A},this.getAttributes=function(){return void 0===I&&(I=function(t,e){const n={},r=t.getProgramParameter(e,35721);for(let i=0;i<r;i++){const r=t.getActiveAttrib(e,i),o=r.name;let a=1;35674===r.type&&(a=2),35675===r.type&&(a=3),35676===r.type&&(a=4),n[o]={type:r.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}(i,y)),I},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(y),this.program=void 0},this.name=n.shaderName,this.id=wo++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=S,this.fragmentShader=E,this}let Do=0;class zo{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,n=t.fragmentShader,r=this._getShaderStage(e),i=this._getShaderStage(n),o=this._getShaderCacheForMaterial(t);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(i)&&(o.add(i),i.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const t of e)t.usedTimes--,0===t.usedTimes&&this.shaderCache.delete(t.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return void 0===n&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){const e=this.shaderCache;let n=e.get(t);return void 0===n&&(n=new Fo(t),e.set(t,n)),n}}class Fo{constructor(t){this.id=Do++,this.code=t,this.usedTimes=0}}function Bo(t,e,n,r,i,o,a){const s=new Ze,u=new zo,l=[],d=i.isWebGL2,f=i.logarithmicDepthBuffer,p=i.vertexTextures;let m=i.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(t){return 1===t?"uv2":"uv"}return{getParameters:function(o,s,l,y,b){const x=y.fog,w=b.geometry,_=o.isMeshStandardMaterial?y.environment:null,S=(o.isMeshStandardMaterial?n:e).get(o.envMap||_),E=S&&S.mapping===B?S.image.height:null,A=g[o.type];null!==o.precision&&(m=i.getMaxPrecision(o.precision),m!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",m,"instead."));const M=w.morphAttributes.position||w.morphAttributes.normal||w.morphAttributes.color,C=void 0!==M?M.length:0;let T,I,N,P,O=0;if(void 0!==w.morphAttributes.position&&(O=1),void 0!==w.morphAttributes.normal&&(O=2),void 0!==w.morphAttributes.color&&(O=3),A){const t=zr[A];T=t.vertexShader,I=t.fragmentShader}else T=o.vertexShader,I=o.fragmentShader,u.update(o),N=u.getVertexShaderID(o),P=u.getFragmentShaderID(o);const L=t.getRenderTarget(),R=!0===b.isInstancedMesh,D=!!o.map,z=!!o.matcap,F=!!S,U=!!o.aoMap,j=!!o.lightMap,V=!!o.bumpMap,H=!!o.normalMap,G=!!o.displacementMap,W=!!o.emissiveMap,X=!!o.metalnessMap,Y=!!o.roughnessMap,q=o.clearcoat>0,$=o.iridescence>0,K=o.sheen>0,Z=o.transmission>0,Q=q&&!!o.clearcoatMap,J=q&&!!o.clearcoatNormalMap,tt=q&&!!o.clearcoatRoughnessMap,et=$&&!!o.iridescenceMap,nt=$&&!!o.iridescenceThicknessMap,rt=K&&!!o.sheenColorMap,it=K&&!!o.sheenRoughnessMap,ot=!!o.specularMap,at=!!o.specularColorMap,st=!!o.specularIntensityMap,ut=Z&&!!o.transmissionMap,lt=Z&&!!o.thicknessMap,ct=!!o.gradientMap,ht=!!o.alphaMap,dt=o.alphaTest>0,ft=!!o.extensions,pt=!!w.attributes.uv2;return{isWebGL2:d,shaderID:A,shaderName:o.type,vertexShader:T,fragmentShader:I,defines:o.defines,customVertexShaderID:N,customFragmentShaderID:P,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:m,instancing:R,instancingColor:R&&null!==b.instanceColor,supportsVertexTextures:p,outputEncoding:null===L?t.outputEncoding:!0===L.isXRRenderTarget?L.texture.encoding:vt,map:D,matcap:z,envMap:F,envMapMode:F&&S.mapping,envMapCubeUVHeight:E,aoMap:U,lightMap:j,bumpMap:V,normalMap:H,displacementMap:p&&G,emissiveMap:W,normalMapObjectSpace:H&&1===o.normalMapType,normalMapTangentSpace:H&&0===o.normalMapType,decodeVideoTexture:D&&!0===o.map.isVideoTexture&&o.map.encoding===yt,metalnessMap:X,roughnessMap:Y,clearcoat:q,clearcoatMap:Q,clearcoatNormalMap:J,clearcoatRoughnessMap:tt,iridescence:$,iridescenceMap:et,iridescenceThicknessMap:nt,sheen:K,sheenColorMap:rt,sheenRoughnessMap:it,specularMap:ot,specularColorMap:at,specularIntensityMap:st,transmission:Z,transmissionMap:ut,thicknessMap:lt,gradientMap:ct,opaque:!1===o.transparent&&1===o.blending,alphaMap:ht,alphaTest:dt,combine:o.combine,mapUv:D&&v(o.map.channel),aoMapUv:U&&v(o.aoMap.channel),lightMapUv:j&&v(o.lightMap.channel),bumpMapUv:V&&v(o.bumpMap.channel),normalMapUv:H&&v(o.normalMap.channel),displacementMapUv:G&&v(o.displacementMap.channel),emissiveMapUv:W&&v(o.emissiveMap.channel),metalnessMapUv:X&&v(o.metalnessMap.channel),roughnessMapUv:Y&&v(o.roughnessMap.channel),clearcoatMapUv:Q&&v(o.clearcoatMap.channel),clearcoatNormalMapUv:J&&v(o.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:tt&&v(o.clearcoatRoughnessMap.channel),iridescenceMapUv:et&&v(o.iridescenceMap.channel),iridescenceThicknessMapUv:nt&&v(o.iridescenceThicknessMap.channel),sheenColorMapUv:rt&&v(o.sheenColorMap.channel),sheenRoughnessMapUv:it&&v(o.sheenRoughnessMap.channel),specularMapUv:ot&&v(o.specularMap.channel),specularColorMapUv:at&&v(o.specularColorMap.channel),specularIntensityMapUv:st&&v(o.specularIntensityMap.channel),transmissionMapUv:ut&&v(o.transmissionMap.channel),thicknessMapUv:lt&&v(o.thicknessMap.channel),alphaMapUv:ht&&v(o.alphaMap.channel),vertexTangents:H&&!!w.attributes.tangent,vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!w.attributes.color&&4===w.attributes.color.itemSize,vertexUvs2:pt,pointsUvs:!0===b.isPoints&&!!w.attributes.uv&&(D||ht),fog:!!x,useFog:!0===o.fog,fogExp2:x&&x.isFogExp2,flatShading:!0===o.flatShading,sizeAttenuation:!0===o.sizeAttenuation,logarithmicDepthBuffer:f,skinning:!0===b.isSkinnedMesh,morphTargets:void 0!==w.morphAttributes.position,morphNormals:void 0!==w.morphAttributes.normal,morphColors:void 0!==w.morphAttributes.color,morphTargetsCount:C,morphTextureStride:O,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numSpotLightMaps:s.spotLightMap.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numSpotLightShadowsWithMaps:s.numSpotLightShadowsWithMaps,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:o.dithering,shadowMapEnabled:t.shadowMap.enabled&&l.length>0,shadowMapType:t.shadowMap.type,toneMapping:o.toneMapped?t.toneMapping:k,useLegacyLights:t.useLegacyLights,premultipliedAlpha:o.premultipliedAlpha,doubleSided:o.side===h,flipSided:o.side===c,useDepthPacking:o.depthPacking>=0,depthPacking:o.depthPacking||0,index0AttributeName:o.index0AttributeName,extensionDerivatives:ft&&!0===o.extensions.derivatives,extensionFragDepth:ft&&!0===o.extensions.fragDepth,extensionDrawBuffers:ft&&!0===o.extensions.drawBuffers,extensionShaderTextureLOD:ft&&!0===o.extensions.shaderTextureLOD,rendererExtensionFragDepth:d||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||r.has("EXT_shader_texture_lod"),customProgramCacheKey:o.customProgramCacheKey()}},getProgramCacheKey:function(e){const n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.customVertexShaderID),n.push(e.customFragmentShaderID)),void 0!==e.defines)for(const t in e.defines)n.push(t),n.push(e.defines[t]);return!1===e.isRawShaderMaterial&&(!function(t,e){t.push(e.precision),t.push(e.outputEncoding),t.push(e.envMapMode),t.push(e.envMapCubeUVHeight),t.push(e.mapUv),t.push(e.alphaMapUv),t.push(e.lightMapUv),t.push(e.aoMapUv),t.push(e.bumpMapUv),t.push(e.normalMapUv),t.push(e.displacementMapUv),t.push(e.emissiveMapUv),t.push(e.metalnessMapUv),t.push(e.roughnessMapUv),t.push(e.clearcoatMapUv),t.push(e.clearcoatNormalMapUv),t.push(e.clearcoatRoughnessMapUv),t.push(e.iridescenceMapUv),t.push(e.iridescenceThicknessMapUv),t.push(e.sheenColorMapUv),t.push(e.sheenRoughnessMapUv),t.push(e.specularMapUv),t.push(e.specularColorMapUv),t.push(e.specularIntensityMapUv),t.push(e.transmissionMapUv),t.push(e.thicknessMapUv),t.push(e.combine),t.push(e.fogExp2),t.push(e.sizeAttenuation),t.push(e.morphTargetsCount),t.push(e.morphAttributeCount),t.push(e.numDirLights),t.push(e.numPointLights),t.push(e.numSpotLights),t.push(e.numSpotLightMaps),t.push(e.numHemiLights),t.push(e.numRectAreaLights),t.push(e.numDirLightShadows),t.push(e.numPointLightShadows),t.push(e.numSpotLightShadows),t.push(e.numSpotLightShadowsWithMaps),t.push(e.shadowMapType),t.push(e.toneMapping),t.push(e.numClippingPlanes),t.push(e.numClipIntersection),t.push(e.depthPacking)}(n,e),function(t,e){s.disableAll(),e.isWebGL2&&s.enable(0);e.supportsVertexTextures&&s.enable(1);e.instancing&&s.enable(2);e.instancingColor&&s.enable(3);e.matcap&&s.enable(4);e.envMap&&s.enable(5);e.normalMapObjectSpace&&s.enable(6);e.normalMapTangentSpace&&s.enable(7);e.clearcoat&&s.enable(8);e.iridescence&&s.enable(9);e.alphaTest&&s.enable(10);e.vertexColors&&s.enable(11);e.vertexAlphas&&s.enable(12);e.vertexUvs2&&s.enable(13);e.vertexTangents&&s.enable(14);t.push(s.mask),s.disableAll(),e.fog&&s.enable(0);e.useFog&&s.enable(1);e.flatShading&&s.enable(2);e.logarithmicDepthBuffer&&s.enable(3);e.skinning&&s.enable(4);e.morphTargets&&s.enable(5);e.morphNormals&&s.enable(6);e.morphColors&&s.enable(7);e.premultipliedAlpha&&s.enable(8);e.shadowMapEnabled&&s.enable(9);e.useLegacyLights&&s.enable(10);e.doubleSided&&s.enable(11);e.flipSided&&s.enable(12);e.useDepthPacking&&s.enable(13);e.dithering&&s.enable(14);e.transmission&&s.enable(15);e.sheen&&s.enable(16);e.decodeVideoTexture&&s.enable(17);e.opaque&&s.enable(18);e.pointsUvs&&s.enable(19);t.push(s.mask)}(n,e),n.push(t.outputEncoding)),n.push(e.customProgramCacheKey),n.join()},getUniforms:function(t){const e=g[t.type];let n;if(e){const t=zr[e];n=vr.clone(t.uniforms)}else n=t.uniforms;return n},acquireProgram:function(e,n){let r;for(let t=0,e=l.length;t<e;t++){const e=l[t];if(e.cacheKey===n){r=e,++r.usedTimes;break}}return void 0===r&&(r=new Ro(t,n,e,o),l.push(r)),r},releaseProgram:function(t){if(0==--t.usedTimes){const e=l.indexOf(t);l[e]=l[l.length-1],l.pop(),t.destroy()}},releaseShaderCache:function(t){u.remove(t)},programs:l,dispose:function(){u.dispose()}}}function Uo(){let t=new WeakMap;return{get:function(e){let n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,r){t.get(e)[n]=r},dispose:function(){t=new WeakMap}}}function jo(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Vo(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Ho(){const t=[];let e=0;const n=[],r=[],i=[];function o(n,r,i,o,a,s){let u=t[e];return void 0===u?(u={id:n.id,object:n,geometry:r,material:i,groupOrder:o,renderOrder:n.renderOrder,z:a,group:s},t[e]=u):(u.id=n.id,u.object=n,u.geometry=r,u.material=i,u.groupOrder=o,u.renderOrder=n.renderOrder,u.z=a,u.group=s),e++,u}return{opaque:n,transmissive:r,transparent:i,init:function(){e=0,n.length=0,r.length=0,i.length=0},push:function(t,e,a,s,u,l){const c=o(t,e,a,s,u,l);a.transmission>0?r.push(c):!0===a.transparent?i.push(c):n.push(c)},unshift:function(t,e,a,s,u,l){const c=o(t,e,a,s,u,l);a.transmission>0?r.unshift(c):!0===a.transparent?i.unshift(c):n.unshift(c)},finish:function(){for(let n=e,r=t.length;n<r;n++){const e=t[n];if(null===e.id)break;e.id=null,e.object=null,e.geometry=null,e.material=null,e.group=null}},sort:function(t,e){n.length>1&&n.sort(t||jo),r.length>1&&r.sort(e||Vo),i.length>1&&i.sort(e||Vo)}}}function Go(){let t=new WeakMap;return{get:function(e,n){const r=t.get(e);let i;return void 0===r?(i=new Ho,t.set(e,[i])):n>=r.length?(i=new Ho,r.push(i)):i=r[n],i},dispose:function(){t=new WeakMap}}}function Wo(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new ce,color:new Nn};break;case"SpotLight":n={position:new ce,direction:new ce,color:new Nn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new ce,color:new Nn,distance:0,decay:0};break;case"HemisphereLight":n={direction:new ce,skyColor:new Nn,groundColor:new Nn};break;case"RectAreaLight":n={color:new Nn,position:new ce,halfWidth:new ce,halfHeight:new ce}}return t[e.id]=n,n}}}let Xo=0;function Yo(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function qo(t,e){const n=new Wo,r=function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new jt};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new jt,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let t=0;t<9;t++)i.probe.push(new ce);const o=new ce,a=new Ue,s=new Ue;return{setup:function(o,a){let s=0,u=0,l=0;for(let t=0;t<9;t++)i.probe[t].set(0,0,0);let c=0,h=0,d=0,f=0,p=0,m=0,g=0,v=0,y=0,b=0;o.sort(Yo);const x=!0===a?Math.PI:1;for(let t=0,e=o.length;t<e;t++){const e=o[t],a=e.color,w=e.intensity,_=e.distance,S=e.shadow&&e.shadow.map?e.shadow.map.texture:null;if(e.isAmbientLight)s+=a.r*w*x,u+=a.g*w*x,l+=a.b*w*x;else if(e.isLightProbe)for(let t=0;t<9;t++)i.probe[t].addScaledVector(e.sh.coefficients[t],w);else if(e.isDirectionalLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*x),e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,i.directionalShadow[c]=n,i.directionalShadowMap[c]=S,i.directionalShadowMatrix[c]=e.shadow.matrix,m++}i.directional[c]=t,c++}else if(e.isSpotLight){const t=n.get(e);t.position.setFromMatrixPosition(e.matrixWorld),t.color.copy(a).multiplyScalar(w*x),t.distance=_,t.coneCos=Math.cos(e.angle),t.penumbraCos=Math.cos(e.angle*(1-e.penumbra)),t.decay=e.decay,i.spot[d]=t;const o=e.shadow;if(e.map&&(i.spotLightMap[y]=e.map,y++,o.updateMatrices(e),e.castShadow&&b++),i.spotLightMatrix[d]=o.matrix,e.castShadow){const t=r.get(e);t.shadowBias=o.bias,t.shadowNormalBias=o.normalBias,t.shadowRadius=o.radius,t.shadowMapSize=o.mapSize,i.spotShadow[d]=t,i.spotShadowMap[d]=S,v++}d++}else if(e.isRectAreaLight){const t=n.get(e);t.color.copy(a).multiplyScalar(w),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),i.rectArea[f]=t,f++}else if(e.isPointLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*x),t.distance=e.distance,t.decay=e.decay,e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,n.shadowCameraNear=t.camera.near,n.shadowCameraFar=t.camera.far,i.pointShadow[h]=n,i.pointShadowMap[h]=S,i.pointShadowMatrix[h]=e.shadow.matrix,g++}i.point[h]=t,h++}else if(e.isHemisphereLight){const t=n.get(e);t.skyColor.copy(e.color).multiplyScalar(w*x),t.groundColor.copy(e.groundColor).multiplyScalar(w*x),i.hemi[p]=t,p++}}f>0&&(e.isWebGL2||!0===t.has("OES_texture_float_linear")?(i.rectAreaLTC1=Dr.LTC_FLOAT_1,i.rectAreaLTC2=Dr.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=Dr.LTC_HALF_1,i.rectAreaLTC2=Dr.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=s,i.ambient[1]=u,i.ambient[2]=l;const w=i.hash;w.directionalLength===c&&w.pointLength===h&&w.spotLength===d&&w.rectAreaLength===f&&w.hemiLength===p&&w.numDirectionalShadows===m&&w.numPointShadows===g&&w.numSpotShadows===v&&w.numSpotMaps===y||(i.directional.length=c,i.spot.length=d,i.rectArea.length=f,i.point.length=h,i.hemi.length=p,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=v,i.spotShadowMap.length=v,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=g,i.spotLightMatrix.length=v+y-b,i.spotLightMap.length=y,i.numSpotLightShadowsWithMaps=b,w.directionalLength=c,w.pointLength=h,w.spotLength=d,w.rectAreaLength=f,w.hemiLength=p,w.numDirectionalShadows=m,w.numPointShadows=g,w.numSpotShadows=v,w.numSpotMaps=y,i.version=Xo++)},setupView:function(t,e){let n=0,r=0,u=0,l=0,c=0;const h=e.matrixWorldInverse;for(let e=0,d=t.length;e<d;e++){const d=t[e];if(d.isDirectionalLight){const t=i.directional[n];t.direction.setFromMatrixPosition(d.matrixWorld),o.setFromMatrixPosition(d.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(h),n++}else if(d.isSpotLight){const t=i.spot[u];t.position.setFromMatrixPosition(d.matrixWorld),t.position.applyMatrix4(h),t.direction.setFromMatrixPosition(d.matrixWorld),o.setFromMatrixPosition(d.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(h),u++}else if(d.isRectAreaLight){const t=i.rectArea[l];t.position.setFromMatrixPosition(d.matrixWorld),t.position.applyMatrix4(h),s.identity(),a.copy(d.matrixWorld),a.premultiply(h),s.extractRotation(a),t.halfWidth.set(.5*d.width,0,0),t.halfHeight.set(0,.5*d.height,0),t.halfWidth.applyMatrix4(s),t.halfHeight.applyMatrix4(s),l++}else if(d.isPointLight){const t=i.point[r];t.position.setFromMatrixPosition(d.matrixWorld),t.position.applyMatrix4(h),r++}else if(d.isHemisphereLight){const t=i.hemi[c];t.direction.setFromMatrixPosition(d.matrixWorld),t.direction.transformDirection(h),c++}}},state:i}}function $o(t,e){const n=new qo(t,e),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(t){n.setup(r,t)},setupLightsView:function(t){n.setupView(r,t)},pushLight:function(t){r.push(t)},pushShadow:function(t){i.push(t)}}}function Ko(t,e){let n=new WeakMap;return{get:function(r,i=0){const o=n.get(r);let a;return void 0===o?(a=new $o(t,e),n.set(r,[a])):i>=o.length?(a=new $o(t,e),o.push(a)):a=o[i],a},dispose:function(){n=new WeakMap}}}class Zo extends Mn{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class Qo extends Mn{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}function Jo(t,e,n){let r=new Nr;const i=new jt,o=new jt,s=new oe,d=new Zo({depthPacking:3201}),f=new Qo,p={},m=n.maxTextureSize,g={[l]:c,[c]:l,[h]:h},v=new yr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new jt},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),y=v.clone();y.defines.HORIZONTAL_PASS=1;const b=new Yn;b.setAttribute("position",new Dn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new hr(b,v),w=this;function _(n,r){const o=e.update(x);v.defines.VSM_SAMPLES!==n.blurSamples&&(v.defines.VSM_SAMPLES=n.blurSamples,y.defines.VSM_SAMPLES=n.blurSamples,v.needsUpdate=!0,y.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new ae(i.x,i.y)),v.uniforms.shadow_pass.value=n.map.texture,v.uniforms.resolution.value=n.mapSize,v.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(r,null,o,v,x,null),y.uniforms.shadow_pass.value=n.mapPass.texture,y.uniforms.resolution.value=n.mapSize,y.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(r,null,o,y,x,null)}function S(e,n,r,i){let o=null;const a=!0===r.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(void 0!==a)o=a;else if(o=!0===r.isPointLight?f:d,t.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const t=o.uuid,e=n.uuid;let r=p[t];void 0===r&&(r={},p[t]=r);let i=r[e];void 0===i&&(i=o.clone(),r[e]=i),o=i}if(o.visible=n.visible,o.wireframe=n.wireframe,o.side=i===u?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:g[n.side],o.alphaMap=n.alphaMap,o.alphaTest=n.alphaTest,o.map=n.map,o.clipShadows=n.clipShadows,o.clippingPlanes=n.clippingPlanes,o.clipIntersection=n.clipIntersection,o.displacementMap=n.displacementMap,o.displacementScale=n.displacementScale,o.displacementBias=n.displacementBias,o.wireframeLinewidth=n.wireframeLinewidth,o.linewidth=n.linewidth,!0===r.isPointLight&&!0===o.isMeshDistanceMaterial){t.properties.get(o).light=r}return o}function E(n,i,o,a,s){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===u)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const r=e.update(n),i=n.material;if(Array.isArray(i)){const e=r.groups;for(let u=0,l=e.length;u<l;u++){const l=e[u],c=i[l.materialIndex];if(c&&c.visible){const e=S(n,c,a,s);t.renderBufferDirect(o,null,r,e,n,l)}}}else if(i.visible){const e=S(n,i,a,s);t.renderBufferDirect(o,null,r,e,n,null)}}const l=n.children;for(let t=0,e=l.length;t<e;t++)E(l[t],i,o,a,s)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=a,this.render=function(e,n,a){if(!1===w.enabled)return;if(!1===w.autoUpdate&&!1===w.needsUpdate)return;if(0===e.length)return;const l=t.getRenderTarget(),c=t.getActiveCubeFace(),h=t.getActiveMipmapLevel(),d=t.state;d.setBlending(0),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(let l=0,c=e.length;l<c;l++){const c=e[l],h=c.shadow;if(void 0===h){console.warn("THREE.WebGLShadowMap:",c,"has no shadow.");continue}if(!1===h.autoUpdate&&!1===h.needsUpdate)continue;i.copy(h.mapSize);const f=h.getFrameExtents();if(i.multiply(f),o.copy(h.mapSize),(i.x>m||i.y>m)&&(i.x>m&&(o.x=Math.floor(m/f.x),i.x=o.x*f.x,h.mapSize.x=o.x),i.y>m&&(o.y=Math.floor(m/f.y),i.y=o.y*f.y,h.mapSize.y=o.y)),null===h.map){const t=this.type!==u?{minFilter:H,magFilter:H}:{};h.map=new ae(i.x,i.y,t),h.map.texture.name=c.name+".shadowMap",h.camera.updateProjectionMatrix()}t.setRenderTarget(h.map),t.clear();const p=h.getViewportCount();for(let t=0;t<p;t++){const e=h.getViewport(t);s.set(o.x*e.x,o.y*e.y,o.x*e.z,o.y*e.w),d.viewport(s),h.updateMatrices(c,t),r=h.getFrustum(),E(n,a,h.camera,c,this.type)}!0!==h.isPointLightShadow&&this.type===u&&_(h,a),h.needsUpdate=!1}w.needsUpdate=!1,t.setRenderTarget(l,c,h)}}function ta(t,e,n){const r=n.isWebGL2;const i=new function(){let e=!1;const n=new oe;let r=null;const i=new oe(0,0,0,0);return{setMask:function(n){r===n||e||(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,r,o,a,s){!0===s&&(e*=a,r*=a,o*=a),n.set(e,r,o,a),!1===i.equals(n)&&(t.clearColor(e,r,o,a),i.copy(n))},reset:function(){e=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){let e=!1,n=null,r=null,i=null;return{setTest:function(t){t?nt(2929):rt(2929)},setMask:function(r){n===r||e||(t.depthMask(r),n=r)},setFunc:function(e){if(r!==e){switch(e){case 0:t.depthFunc(512);break;case 1:t.depthFunc(519);break;case 2:t.depthFunc(513);break;case 3:default:t.depthFunc(515);break;case 4:t.depthFunc(514);break;case 5:t.depthFunc(518);break;case 6:t.depthFunc(516);break;case 7:t.depthFunc(517)}r=e}},setLocked:function(t){e=t},setClear:function(e){i!==e&&(t.clearDepth(e),i=e)},reset:function(){e=!1,n=null,r=null,i=null}}},a=new function(){let e=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,l=null;return{setTest:function(t){e||(t?nt(2960):rt(2960))},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,a){r===e&&i===n&&o===a||(t.stencilFunc(e,n,a),r=e,i=n,o=a)},setOp:function(e,n,r){a===e&&s===n&&u===r||(t.stencilOp(e,n,r),a=e,s=n,u=r)},setLocked:function(t){e=t},setClear:function(e){l!==e&&(t.clearStencil(e),l=e)},reset:function(){e=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,l=null}}},s=new WeakMap,u=new WeakMap;let l={},M={},C=new WeakMap,T=[],k=null,I=!1,N=null,P=null,O=null,L=null,R=null,D=null,z=null,F=!1,B=null,U=null,j=null,V=null,H=null;const G=t.getParameter(35661);let W=!1,X=0;const Y=t.getParameter(7938);-1!==Y.indexOf("WebGL")?(X=parseFloat(/^WebGL (\d)/.exec(Y)[1]),W=X>=1):-1!==Y.indexOf("OpenGL ES")&&(X=parseFloat(/^OpenGL ES (\d)/.exec(Y)[1]),W=X>=2);let q=null,$={};const K=t.getParameter(3088),Z=t.getParameter(2978),Q=(new oe).fromArray(K),J=(new oe).fromArray(Z);function tt(e,n,r){const i=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(let e=0;e<r;e++)t.texImage2D(n+e,0,6408,1,1,0,6408,5121,i);return o}const et={};function nt(e){!0!==l[e]&&(t.enable(e),l[e]=!0)}function rt(e){!1!==l[e]&&(t.disable(e),l[e]=!1)}et[3553]=tt(3553,3553,1),et[34067]=tt(34067,34069,6),i.setClear(0,0,0,1),o.setClear(1),a.setClear(0),nt(2929),o.setFunc(3),st(!1),ut(1),nt(2884),at(0);const it={[d]:32774,[f]:32778,[p]:32779};if(r)it[103]=32775,it[104]=32776;else{const t=e.get("EXT_blend_minmax");null!==t&&(it[103]=t.MIN_EXT,it[104]=t.MAX_EXT)}const ot={[m]:0,[g]:1,[v]:768,[b]:770,[A]:776,[S]:774,[w]:772,[y]:769,[x]:771,[E]:775,[_]:773};function at(e,n,r,i,o,a,s,u){if(0!==e){if(!1===I&&(nt(3042),I=!0),5===e)o=o||n,a=a||r,s=s||i,n===P&&o===R||(t.blendEquationSeparate(it[n],it[o]),P=n,R=o),r===O&&i===L&&a===D&&s===z||(t.blendFuncSeparate(ot[r],ot[i],ot[a],ot[s]),O=r,L=i,D=a,z=s),N=e,F=!1;else if(e!==N||u!==F){if(P===d&&R===d||(t.blendEquation(32774),P=d,R=d),u)switch(e){case 1:t.blendFuncSeparate(1,771,1,771);break;case 2:t.blendFunc(1,1);break;case 3:t.blendFuncSeparate(0,769,0,1);break;case 4:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case 1:t.blendFuncSeparate(770,771,1,771);break;case 2:t.blendFunc(770,1);break;case 3:t.blendFuncSeparate(0,769,0,1);break;case 4:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}O=null,L=null,D=null,z=null,N=e,F=u}}else!0===I&&(rt(3042),I=!1)}function st(e){B!==e&&(e?t.frontFace(2304):t.frontFace(2305),B=e)}function ut(e){0!==e?(nt(2884),e!==U&&(1===e?t.cullFace(1029):2===e?t.cullFace(1028):t.cullFace(1032))):rt(2884),U=e}function lt(e,n,r){e?(nt(32823),V===n&&H===r||(t.polygonOffset(n,r),V=n,H=r)):rt(32823)}return{buffers:{color:i,depth:o,stencil:a},enable:nt,disable:rt,bindFramebuffer:function(e,n){return M[e]!==n&&(t.bindFramebuffer(e,n),M[e]=n,r&&(36009===e&&(M[36160]=n),36160===e&&(M[36009]=n)),!0)},drawBuffers:function(r,i){let o=T,a=!1;if(r)if(o=C.get(i),void 0===o&&(o=[],C.set(i,o)),r.isWebGLMultipleRenderTargets){const t=r.texture;if(o.length!==t.length||36064!==o[0]){for(let e=0,n=t.length;e<n;e++)o[e]=36064+e;o.length=t.length,a=!0}}else 36064!==o[0]&&(o[0]=36064,a=!0);else 1029!==o[0]&&(o[0]=1029,a=!0);a&&(n.isWebGL2?t.drawBuffers(o):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(o))},useProgram:function(e){return k!==e&&(t.useProgram(e),k=e,!0)},setBlending:at,setMaterial:function(t,e){t.side===h?rt(2884):nt(2884);let n=t.side===c;e&&(n=!n),st(n),1===t.blending&&!1===t.transparent?at(0):at(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),o.setFunc(t.depthFunc),o.setTest(t.depthTest),o.setMask(t.depthWrite),i.setMask(t.colorWrite);const r=t.stencilWrite;a.setTest(r),r&&(a.setMask(t.stencilWriteMask),a.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),a.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),lt(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?nt(32926):rt(32926)},setFlipSided:st,setCullFace:ut,setLineWidth:function(e){e!==j&&(W&&t.lineWidth(e),j=e)},setPolygonOffset:lt,setScissorTest:function(t){t?nt(3089):rt(3089)},activeTexture:function(e){void 0===e&&(e=33984+G-1),q!==e&&(t.activeTexture(e),q=e)},bindTexture:function(e,n,r){void 0===r&&(r=null===q?33984+G-1:q);let i=$[r];void 0===i&&(i={type:void 0,texture:void 0},$[r]=i),i.type===e&&i.texture===n||(q!==r&&(t.activeTexture(r),q=r),t.bindTexture(e,n||et[e]),i.type=e,i.texture=n)},unbindTexture:function(){const e=$[q];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexImage3D:function(){try{t.compressedTexImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},updateUBOMapping:function(e,n){let r=u.get(n);void 0===r&&(r=new WeakMap,u.set(n,r));let i=r.get(e);void 0===i&&(i=t.getUniformBlockIndex(n,e.name),r.set(e,i))},uniformBlockBinding:function(e,n){const r=u.get(n).get(e);s.get(n)!==r&&(t.uniformBlockBinding(n,r,e.__bindingPointIndex),s.set(n,r))},texStorage2D:function(){try{t.texStorage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{t.texStorage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{t.texSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{t.texSubImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage3D:function(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===Q.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),Q.copy(e))},viewport:function(e){!1===J.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),J.copy(e))},reset:function(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),!0===r&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),l={},q=null,$={},M={},C=new WeakMap,T=[],k=null,I=!1,N=null,P=null,O=null,L=null,R=null,D=null,z=null,F=!1,B=null,U=null,j=null,V=null,H=null,Q.set(0,0,t.canvas.width,t.canvas.height),J.set(0,0,t.canvas.width,t.canvas.height),i.reset(),o.reset(),a.reset()}}}function ea(t,e,n,r,i,o,a){const s=i.isWebGL2,u=i.maxTextures,l=i.maxCubemapSize,c=i.maxTextureSize,h=i.maxSamples,d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let m;const g=new WeakMap;let v=!1;try{v="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(t){}function y(t,e){return v?new OffscreenCanvas(t,e):Wt("canvas")}function b(t,e,n,r){let i=1;if((t.width>r||t.height>r)&&(i=r/Math.max(t.width,t.height)),i<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const r=e?zt:Math.floor,o=r(i*t.width),a=r(i*t.height);void 0===m&&(m=y(o,a));const s=n?y(o,a):m;s.width=o,s.height=a;return s.getContext("2d").drawImage(t,0,0,o,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+o+"x"+a+")."),s}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function x(t){return Rt(t.width)&&Rt(t.height)}function w(t,e){return t.generateMipmaps&&e&&t.minFilter!==H&&t.minFilter!==X}function _(e){t.generateMipmap(e)}function S(n,r,i,o,a=!1){if(!1===s)return r;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let u=r;return 6403===r&&(5126===i&&(u=33326),5131===i&&(u=33325),5121===i&&(u=33321)),33319===r&&(5126===i&&(u=33328),5131===i&&(u=33327),5121===i&&(u=33323)),6408===r&&(5126===i&&(u=34836),5131===i&&(u=34842),5121===i&&(u=o===yt&&!1===a?35907:32856),32819===i&&(u=32854),32820===i&&(u=32855)),33325!==u&&33326!==u&&33327!==u&&33328!==u&&34842!==u&&34836!==u||e.get("EXT_color_buffer_float"),u}function E(t,e,n){return!0===w(t,n)||t.isFramebufferTexture&&t.minFilter!==H&&t.minFilter!==X?Math.log2(Math.max(e.width,e.height))+1:void 0!==t.mipmaps&&t.mipmaps.length>0?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?e.mipmaps.length:1}function A(t){return t===H||t===G||t===W?9728:9729}function M(t){const e=t.target;e.removeEventListener("dispose",M),function(t){const e=r.get(t);if(void 0===e.__webglInit)return;const n=t.source,i=g.get(n);if(i){const r=i[e.__cacheKey];r.usedTimes--,0===r.usedTimes&&T(t),0===Object.keys(i).length&&g.delete(n)}r.remove(t)}(e),e.isVideoTexture&&p.delete(e)}function C(e){const n=e.target;n.removeEventListener("dispose",C),function(e){const n=e.texture,i=r.get(e),o=r.get(n);void 0!==o.__webglTexture&&(t.deleteTexture(o.__webglTexture),a.memory.textures--);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLCubeRenderTarget)for(let e=0;e<6;e++)t.deleteFramebuffer(i.__webglFramebuffer[e]),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer[e]);else{if(t.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&t.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(let e=0;e<i.__webglColorRenderbuffer.length;e++)i.__webglColorRenderbuffer[e]&&t.deleteRenderbuffer(i.__webglColorRenderbuffer[e]);i.__webglDepthRenderbuffer&&t.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(e.isWebGLMultipleRenderTargets)for(let e=0,i=n.length;e<i;e++){const i=r.get(n[e]);i.__webglTexture&&(t.deleteTexture(i.__webglTexture),a.memory.textures--),r.remove(n[e])}r.remove(n),r.remove(e)}(n)}function T(e){const n=r.get(e);t.deleteTexture(n.__webglTexture);const i=e.source;delete g.get(i)[n.__cacheKey],a.memory.textures--}let k=0;function I(t,e){const i=r.get(t);if(t.isVideoTexture&&function(t){const e=a.render.frame;p.get(t)!==e&&(p.set(t,e),t.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&i.__version!==t.version){const n=t.image;if(null===n)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==n.complete)return void R(i,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(3553,i.__webglTexture,33984+e)}const N={[U]:10497,[j]:33071,[V]:33648},P={[H]:9728,[G]:9984,[W]:9986,[X]:9729,[Y]:9985,[q]:9987};function O(n,o,a){if(a?(t.texParameteri(n,10242,N[o.wrapS]),t.texParameteri(n,10243,N[o.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,N[o.wrapR]),t.texParameteri(n,10240,P[o.magFilter]),t.texParameteri(n,10241,P[o.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),o.wrapS===j&&o.wrapT===j||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,A(o.magFilter)),t.texParameteri(n,10241,A(o.minFilter)),o.minFilter!==H&&o.minFilter!==X&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const a=e.get("EXT_texture_filter_anisotropic");if(o.magFilter===H)return;if(o.minFilter!==W&&o.minFilter!==q)return;if(o.type===Z&&!1===e.has("OES_texture_float_linear"))return;if(!1===s&&o.type===Q&&!1===e.has("OES_texture_half_float_linear"))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(t.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function L(e,n){let r=!1;void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",M));const i=n.source;let o=g.get(i);void 0===o&&(o={},g.set(i,o));const s=function(t){const e=[];return e.push(t.wrapS),e.push(t.wrapT),e.push(t.wrapR||0),e.push(t.magFilter),e.push(t.minFilter),e.push(t.anisotropy),e.push(t.internalFormat),e.push(t.format),e.push(t.type),e.push(t.generateMipmaps),e.push(t.premultiplyAlpha),e.push(t.flipY),e.push(t.unpackAlignment),e.push(t.encoding),e.join()}(n);if(s!==e.__cacheKey){void 0===o[s]&&(o[s]={texture:t.createTexture(),usedTimes:0},a.memory.textures++,r=!0),o[s].usedTimes++;const i=o[e.__cacheKey];void 0!==i&&(o[e.__cacheKey].usedTimes--,0===i.usedTimes&&T(n)),e.__cacheKey=s,e.__webglTexture=o[s].texture}return r}function R(e,i,a){let u=3553;(i.isDataArrayTexture||i.isCompressedArrayTexture)&&(u=35866),i.isData3DTexture&&(u=32879);const l=L(e,i),h=i.source;n.bindTexture(u,e.__webglTexture,33984+a);const d=r.get(h);if(h.version!==d.__version||!0===l){n.activeTexture(33984+a),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment),t.pixelStorei(37443,0);const e=function(t){return!s&&(t.wrapS!==j||t.wrapT!==j||t.minFilter!==H&&t.minFilter!==X)}(i)&&!1===x(i.image);let r=b(i.image,e,!1,c);r=it(i,r);const f=x(r)||s,p=o.convert(i.format,i.encoding);let m,g=o.convert(i.type),v=S(i.internalFormat,p,g,i.encoding,i.isVideoTexture);O(u,i,f);const y=i.mipmaps,A=s&&!0!==i.isVideoTexture,M=void 0===d.__version||!0===l,C=E(i,r,f);if(i.isDepthTexture)v=6402,s?v=i.type===Z?36012:i.type===K?33190:i.type===J?35056:33189:i.type===Z&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===et&&6402===v&&1012!==i.type&&i.type!==K&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=K,g=o.convert(i.type)),i.format===nt&&6402===v&&(v=34041,i.type!==J&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=J,g=o.convert(i.type))),M&&(A?n.texStorage2D(3553,1,v,r.width,r.height):n.texImage2D(3553,0,v,r.width,r.height,0,p,g,null));else if(i.isDataTexture)if(y.length>0&&f){A&&M&&n.texStorage2D(3553,C,v,y[0].width,y[0].height);for(let t=0,e=y.length;t<e;t++)m=y[t],A?n.texSubImage2D(3553,t,0,0,m.width,m.height,p,g,m.data):n.texImage2D(3553,t,v,m.width,m.height,0,p,g,m.data);i.generateMipmaps=!1}else A?(M&&n.texStorage2D(3553,C,v,r.width,r.height),n.texSubImage2D(3553,0,0,0,r.width,r.height,p,g,r.data)):n.texImage2D(3553,0,v,r.width,r.height,0,p,g,r.data);else if(i.isCompressedTexture)if(i.isCompressedArrayTexture){A&&M&&n.texStorage3D(35866,C,v,y[0].width,y[0].height,r.depth);for(let t=0,e=y.length;t<e;t++)m=y[t],i.format!==tt?null!==p?A?n.compressedTexSubImage3D(35866,t,0,0,0,m.width,m.height,r.depth,p,m.data,0,0):n.compressedTexImage3D(35866,t,v,m.width,m.height,r.depth,0,m.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):A?n.texSubImage3D(35866,t,0,0,0,m.width,m.height,r.depth,p,g,m.data):n.texImage3D(35866,t,v,m.width,m.height,r.depth,0,p,g,m.data)}else{A&&M&&n.texStorage2D(3553,C,v,y[0].width,y[0].height);for(let t=0,e=y.length;t<e;t++)m=y[t],i.format!==tt?null!==p?A?n.compressedTexSubImage2D(3553,t,0,0,m.width,m.height,p,m.data):n.compressedTexImage2D(3553,t,v,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):A?n.texSubImage2D(3553,t,0,0,m.width,m.height,p,g,m.data):n.texImage2D(3553,t,v,m.width,m.height,0,p,g,m.data)}else if(i.isDataArrayTexture)A?(M&&n.texStorage3D(35866,C,v,r.width,r.height,r.depth),n.texSubImage3D(35866,0,0,0,0,r.width,r.height,r.depth,p,g,r.data)):n.texImage3D(35866,0,v,r.width,r.height,r.depth,0,p,g,r.data);else if(i.isData3DTexture)A?(M&&n.texStorage3D(32879,C,v,r.width,r.height,r.depth),n.texSubImage3D(32879,0,0,0,0,r.width,r.height,r.depth,p,g,r.data)):n.texImage3D(32879,0,v,r.width,r.height,r.depth,0,p,g,r.data);else if(i.isFramebufferTexture){if(M)if(A)n.texStorage2D(3553,C,v,r.width,r.height);else{let t=r.width,e=r.height;for(let r=0;r<C;r++)n.texImage2D(3553,r,v,t,e,0,p,g,null),t>>=1,e>>=1}}else if(y.length>0&&f){A&&M&&n.texStorage2D(3553,C,v,y[0].width,y[0].height);for(let t=0,e=y.length;t<e;t++)m=y[t],A?n.texSubImage2D(3553,t,0,0,p,g,m):n.texImage2D(3553,t,v,p,g,m);i.generateMipmaps=!1}else A?(M&&n.texStorage2D(3553,C,v,r.width,r.height),n.texSubImage2D(3553,0,0,0,p,g,r)):n.texImage2D(3553,0,v,p,g,r);w(i,f)&&_(u),d.__version=h.version,i.onUpdate&&i.onUpdate(i)}e.__version=i.version}function D(e,i,a,s,u){const l=o.convert(a.format,a.encoding),c=o.convert(a.type),h=S(a.internalFormat,l,c,a.encoding);r.get(i).__hasExternalTextures||(32879===u||35866===u?n.texImage3D(u,0,h,i.width,i.height,i.depth,0,l,c,null):n.texImage2D(u,0,h,i.width,i.height,0,l,c,null)),n.bindFramebuffer(36160,e),rt(i)?d.framebufferTexture2DMultisampleEXT(36160,s,u,r.get(a).__webglTexture,0,B(i)):(3553===u||u>=34069&&u<=34074)&&t.framebufferTexture2D(36160,s,u,r.get(a).__webglTexture,0),n.bindFramebuffer(36160,null)}function z(e,n,r){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){let i=33189;if(r||rt(n)){const e=n.depthTexture;e&&e.isDepthTexture&&(e.type===Z?i=36012:e.type===K&&(i=33190));const r=B(n);rt(n)?d.renderbufferStorageMultisampleEXT(36161,r,i,n.width,n.height):t.renderbufferStorageMultisample(36161,r,i,n.width,n.height)}else t.renderbufferStorage(36161,i,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){const i=B(n);r&&!1===rt(n)?t.renderbufferStorageMultisample(36161,i,35056,n.width,n.height):rt(n)?d.renderbufferStorageMultisampleEXT(36161,i,35056,n.width,n.height):t.renderbufferStorage(36161,34041,n.width,n.height),t.framebufferRenderbuffer(36160,33306,36161,e)}else{const e=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let i=0;i<e.length;i++){const a=e[i],s=o.convert(a.format,a.encoding),u=o.convert(a.type),l=S(a.internalFormat,s,u,a.encoding),c=B(n);r&&!1===rt(n)?t.renderbufferStorageMultisample(36161,c,l,n.width,n.height):rt(n)?d.renderbufferStorageMultisampleEXT(36161,c,l,n.width,n.height):t.renderbufferStorage(36161,l,n.width,n.height)}}t.bindRenderbuffer(36161,null)}function F(e){const i=r.get(e),o=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture&&!i.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,e),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),I(i.depthTexture,0);const o=r.get(i.depthTexture).__webglTexture,a=B(i);if(i.depthTexture.format===et)rt(i)?d.framebufferTexture2DMultisampleEXT(36160,36096,3553,o,0,a):t.framebufferTexture2D(36160,36096,3553,o,0);else{if(i.depthTexture.format!==nt)throw new Error("Unknown depthTexture format");rt(i)?d.framebufferTexture2DMultisampleEXT(36160,33306,3553,o,0,a):t.framebufferTexture2D(36160,33306,3553,o,0)}}(i.__webglFramebuffer,e)}else if(o){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(36160,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=t.createRenderbuffer(),z(i.__webglDepthbuffer[r],e,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=t.createRenderbuffer(),z(i.__webglDepthbuffer,e,!1);n.bindFramebuffer(36160,null)}function B(t){return Math.min(h,t.samples)}function rt(t){const n=r.get(t);return s&&t.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function it(t,n){const r=t.encoding,i=t.format,o=t.type;return!0===t.isCompressedTexture||!0===t.isVideoTexture||t.format===At||r!==vt&&(r===yt?!1===s?!0===e.has("EXT_sRGB")&&i===tt?(t.format=At,t.minFilter=X,t.generateMipmaps=!1):n=te.sRGBToLinear(n):i===tt&&o===$||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",r)),n}this.allocateTextureUnit=function(){const t=k;return t>=u&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+u),k+=1,t},this.resetTextureUnits=function(){k=0},this.setTexture2D=I,this.setTexture2DArray=function(t,e){const i=r.get(t);t.version>0&&i.__version!==t.version?R(i,t,e):n.bindTexture(35866,i.__webglTexture,33984+e)},this.setTexture3D=function(t,e){const i=r.get(t);t.version>0&&i.__version!==t.version?R(i,t,e):n.bindTexture(32879,i.__webglTexture,33984+e)},this.setTextureCube=function(e,i){const a=r.get(e);e.version>0&&a.__version!==e.version?function(e,i,a){if(6!==i.image.length)return;const u=L(e,i),c=i.source;n.bindTexture(34067,e.__webglTexture,33984+a);const h=r.get(c);if(c.version!==h.__version||!0===u){n.activeTexture(33984+a),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment),t.pixelStorei(37443,0);const e=i.isCompressedTexture||i.image[0].isCompressedTexture,r=i.image[0]&&i.image[0].isDataTexture,d=[];for(let t=0;t<6;t++)d[t]=e||r?r?i.image[t].image:i.image[t]:b(i.image[t],!1,!0,l),d[t]=it(i,d[t]);const f=d[0],p=x(f)||s,m=o.convert(i.format,i.encoding),g=o.convert(i.type),v=S(i.internalFormat,m,g,i.encoding),y=s&&!0!==i.isVideoTexture,A=void 0===h.__version||!0===u;let M,C=E(i,f,p);if(O(34067,i,p),e){y&&A&&n.texStorage2D(34067,C,v,f.width,f.height);for(let t=0;t<6;t++){M=d[t].mipmaps;for(let e=0;e<M.length;e++){const r=M[e];i.format!==tt?null!==m?y?n.compressedTexSubImage2D(34069+t,e,0,0,r.width,r.height,m,r.data):n.compressedTexImage2D(34069+t,e,v,r.width,r.height,0,r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):y?n.texSubImage2D(34069+t,e,0,0,r.width,r.height,m,g,r.data):n.texImage2D(34069+t,e,v,r.width,r.height,0,m,g,r.data)}}}else{M=i.mipmaps,y&&A&&(M.length>0&&C++,n.texStorage2D(34067,C,v,d[0].width,d[0].height));for(let t=0;t<6;t++)if(r){y?n.texSubImage2D(34069+t,0,0,0,d[t].width,d[t].height,m,g,d[t].data):n.texImage2D(34069+t,0,v,d[t].width,d[t].height,0,m,g,d[t].data);for(let e=0;e<M.length;e++){const r=M[e].image[t].image;y?n.texSubImage2D(34069+t,e+1,0,0,r.width,r.height,m,g,r.data):n.texImage2D(34069+t,e+1,v,r.width,r.height,0,m,g,r.data)}}else{y?n.texSubImage2D(34069+t,0,0,0,m,g,d[t]):n.texImage2D(34069+t,0,v,m,g,d[t]);for(let e=0;e<M.length;e++){const r=M[e];y?n.texSubImage2D(34069+t,e+1,0,0,m,g,r.image[t]):n.texImage2D(34069+t,e+1,v,m,g,r.image[t])}}}w(i,p)&&_(34067),h.__version=c.version,i.onUpdate&&i.onUpdate(i)}e.__version=i.version}(a,e,i):n.bindTexture(34067,a.__webglTexture,33984+i)},this.rebindTextures=function(t,e,n){const i=r.get(t);void 0!==e&&D(i.__webglFramebuffer,t,t.texture,36064,3553),void 0!==n&&F(t)},this.setupRenderTarget=function(e){const u=e.texture,l=r.get(e),c=r.get(u);e.addEventListener("dispose",C),!0!==e.isWebGLMultipleRenderTargets&&(void 0===c.__webglTexture&&(c.__webglTexture=t.createTexture()),c.__version=u.version,a.memory.textures++);const h=!0===e.isWebGLCubeRenderTarget,d=!0===e.isWebGLMultipleRenderTargets,f=x(e)||s;if(h){l.__webglFramebuffer=[];for(let e=0;e<6;e++)l.__webglFramebuffer[e]=t.createFramebuffer()}else{if(l.__webglFramebuffer=t.createFramebuffer(),d)if(i.drawBuffers){const n=e.texture;for(let e=0,i=n.length;e<i;e++){const i=r.get(n[e]);void 0===i.__webglTexture&&(i.__webglTexture=t.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(s&&e.samples>0&&!1===rt(e)){const r=d?u:[u];l.__webglMultisampledFramebuffer=t.createFramebuffer(),l.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,l.__webglMultisampledFramebuffer);for(let n=0;n<r.length;n++){const i=r[n];l.__webglColorRenderbuffer[n]=t.createRenderbuffer(),t.bindRenderbuffer(36161,l.__webglColorRenderbuffer[n]);const a=o.convert(i.format,i.encoding),s=o.convert(i.type),u=S(i.internalFormat,a,s,i.encoding,!0===e.isXRRenderTarget),c=B(e);t.renderbufferStorageMultisample(36161,c,u,e.width,e.height),t.framebufferRenderbuffer(36160,36064+n,36161,l.__webglColorRenderbuffer[n])}t.bindRenderbuffer(36161,null),e.depthBuffer&&(l.__webglDepthRenderbuffer=t.createRenderbuffer(),z(l.__webglDepthRenderbuffer,e,!0)),n.bindFramebuffer(36160,null)}}if(h){n.bindTexture(34067,c.__webglTexture),O(34067,u,f);for(let t=0;t<6;t++)D(l.__webglFramebuffer[t],e,u,36064,34069+t);w(u,f)&&_(34067),n.unbindTexture()}else if(d){const t=e.texture;for(let i=0,o=t.length;i<o;i++){const o=t[i],a=r.get(o);n.bindTexture(3553,a.__webglTexture),O(3553,o,f),D(l.__webglFramebuffer,e,o,36064+i,3553),w(o,f)&&_(3553)}n.unbindTexture()}else{let t=3553;(e.isWebGL3DRenderTarget||e.isWebGLArrayRenderTarget)&&(s?t=e.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(t,c.__webglTexture),O(t,u,f),D(l.__webglFramebuffer,e,u,36064,t),w(u,f)&&_(t),n.unbindTexture()}e.depthBuffer&&F(e)},this.updateRenderTargetMipmap=function(t){const e=x(t)||s,i=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let o=0,a=i.length;o<a;o++){const a=i[o];if(w(a,e)){const e=t.isWebGLCubeRenderTarget?34067:3553,i=r.get(a).__webglTexture;n.bindTexture(e,i),_(e),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(e){if(s&&e.samples>0&&!1===rt(e)){const i=e.isWebGLMultipleRenderTargets?e.texture:[e.texture],o=e.width,a=e.height;let s=16384;const u=[],l=e.stencilBuffer?33306:36096,c=r.get(e),h=!0===e.isWebGLMultipleRenderTargets;if(h)for(let e=0;e<i.length;e++)n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+e,36161,null),n.bindFramebuffer(36160,c.__webglFramebuffer),t.framebufferTexture2D(36009,36064+e,3553,null,0);n.bindFramebuffer(36008,c.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,c.__webglFramebuffer);for(let n=0;n<i.length;n++){u.push(36064+n),e.depthBuffer&&u.push(l);const d=void 0!==c.__ignoreDepthValues&&c.__ignoreDepthValues;if(!1===d&&(e.depthBuffer&&(s|=256),e.stencilBuffer&&(s|=1024)),h&&t.framebufferRenderbuffer(36008,36064,36161,c.__webglColorRenderbuffer[n]),!0===d&&(t.invalidateFramebuffer(36008,[l]),t.invalidateFramebuffer(36009,[l])),h){const e=r.get(i[n]).__webglTexture;t.framebufferTexture2D(36009,36064,3553,e,0)}t.blitFramebuffer(0,0,o,a,0,0,o,a,s,9728),f&&t.invalidateFramebuffer(36008,u)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),h)for(let e=0;e<i.length;e++){n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+e,36161,c.__webglColorRenderbuffer[e]);const o=r.get(i[e]).__webglTexture;n.bindFramebuffer(36160,c.__webglFramebuffer),t.framebufferTexture2D(36009,36064+e,3553,o,0)}n.bindFramebuffer(36009,c.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=F,this.setupFrameBufferTexture=D,this.useMultisampledRTT=rt}function na(t,e,n){const r=n.isWebGL2;return{convert:function(n,i=null){let o;if(n===$)return 5121;if(1017===n)return 32819;if(1018===n)return 32820;if(1010===n)return 5120;if(1011===n)return 5122;if(1012===n)return 5123;if(1013===n)return 5124;if(n===K)return 5125;if(n===Z)return 5126;if(n===Q)return r?5131:(o=e.get("OES_texture_half_float"),null!==o?o.HALF_FLOAT_OES:null);if(1021===n)return 6406;if(n===tt)return 6408;if(1024===n)return 6409;if(1025===n)return 6410;if(n===et)return 6402;if(n===nt)return 34041;if(n===At)return o=e.get("EXT_sRGB"),null!==o?o.SRGB_ALPHA_EXT:null;if(1028===n)return 6403;if(1029===n)return 36244;if(1030===n)return 33319;if(1031===n)return 33320;if(1033===n)return 36249;if(n===rt||n===it||n===ot||n===at)if(i===yt){if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===o)return null;if(n===rt)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===it)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===ot)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===at)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(o=e.get("WEBGL_compressed_texture_s3tc"),null===o)return null;if(n===rt)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===it)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===ot)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===at)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===n||35841===n||35842===n||35843===n){if(o=e.get("WEBGL_compressed_texture_pvrtc"),null===o)return null;if(35840===n)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===n)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===n)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===n)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===n)return o=e.get("WEBGL_compressed_texture_etc1"),null!==o?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===n||37496===n){if(o=e.get("WEBGL_compressed_texture_etc"),null===o)return null;if(37492===n)return i===yt?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(37496===n)return i===yt?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}if(37808===n||37809===n||37810===n||37811===n||37812===n||37813===n||37814===n||37815===n||37816===n||37817===n||37818===n||37819===n||37820===n||37821===n){if(o=e.get("WEBGL_compressed_texture_astc"),null===o)return null;if(37808===n)return i===yt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===n)return i===yt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===n)return i===yt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===n)return i===yt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===n)return i===yt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===n)return i===yt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===n)return i===yt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===n)return i===yt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===n)return i===yt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===n)return i===yt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===n)return i===yt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===n)return i===yt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===n)return i===yt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===n)return i===yt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===st){if(o=e.get("EXT_texture_compression_bptc"),null===o)return null;if(n===st)return i===yt?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(36283===n||36284===n||36285===n||36286===n){if(o=e.get("EXT_texture_compression_rgtc"),null===o)return null;if(n===st)return o.COMPRESSED_RED_RGTC1_EXT;if(36284===n)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===n)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===n)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===J?r?34042:(o=e.get("WEBGL_depth_texture"),null!==o?o.UNSIGNED_INT_24_8_WEBGL:null):void 0!==t[n]?t[n]:null}}}class ra extends xr{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class ia extends dn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const oa={type:"move"};class aa{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new ia,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new ia,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ce,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ce),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new ia,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ce,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ce),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let r=null,i=null,o=null;const a=this._targetRay,s=this._grip,u=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(u&&t.hand){o=!0;for(const r of t.hand.values()){const t=e.getJointPose(r,n),i=this._getHandJoint(u,r);null!==t&&(i.matrix.fromArray(t.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.jointRadius=t.radius),i.visible=null!==t}const r=u.joints["index-finger-tip"],i=u.joints["thumb-tip"],a=r.position.distanceTo(i.position),s=.02,l=.005;u.inputState.pinching&&a>s+l?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!u.inputState.pinching&&a<=s-l&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==s&&t.gripSpace&&(i=e.getPose(t.gripSpace,n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1));null!==a&&(r=e.getPose(t.targetRaySpace,n),null===r&&null!==i&&(r=i),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(oa)))}return null!==a&&(a.visible=null!==r),null!==s&&(s.visible=null!==i),null!==u&&(u.visible=null!==o),this}_getHandJoint(t,e){if(void 0===t.joints[e.jointName]){const n=new ia;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}}class sa extends ie{constructor(t,e,n,r,i,o,a,s,u,l){if((l=void 0!==l?l:et)!==et&&l!==nt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&l===et&&(n=K),void 0===n&&l===nt&&(n=J),super(null,r,i,o,a,s,l,n,u),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==a?a:H,this.minFilter=void 0!==s?s:H,this.flipY=!1,this.generateMipmaps=!1}}class ua extends Mt{constructor(t,e){super();const n=this;let r=null,i=1,o=null,a="local-floor",s=1,u=null,l=null,c=null,h=null,d=null,f=null;const p=e.getContextAttributes();let m=null,g=null;const v=[],y=[],b=new Set,x=new Map,w=new xr;w.layers.enable(1),w.viewport=new oe;const _=new xr;_.layers.enable(2),_.viewport=new oe;const S=[w,_],E=new ra;E.layers.enable(1),E.layers.enable(2);let A=null,M=null;function C(t){const e=y.indexOf(t.inputSource);if(-1===e)return;const n=v[e];void 0!==n&&n.dispatchEvent({type:t.type,data:t.inputSource})}function T(){r.removeEventListener("select",C),r.removeEventListener("selectstart",C),r.removeEventListener("selectend",C),r.removeEventListener("squeeze",C),r.removeEventListener("squeezestart",C),r.removeEventListener("squeezeend",C),r.removeEventListener("end",T),r.removeEventListener("inputsourceschange",k);for(let t=0;t<v.length;t++){const e=y[t];null!==e&&(y[t]=null,v[t].disconnect(e))}A=null,M=null,t.setRenderTarget(m),d=null,h=null,c=null,r=null,g=null,L.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function k(t){for(let e=0;e<t.removed.length;e++){const n=t.removed[e],r=y.indexOf(n);r>=0&&(y[r]=null,v[r].disconnect(n))}for(let e=0;e<t.added.length;e++){const n=t.added[e];let r=y.indexOf(n);if(-1===r){for(let t=0;t<v.length;t++){if(t>=y.length){y.push(n),r=t;break}if(null===y[t]){y[t]=n,r=t;break}}if(-1===r)break}const i=v[r];i&&i.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=v[t];return void 0===e&&(e=new aa,v[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=v[t];return void 0===e&&(e=new aa,v[t]=e),e.getGripSpace()},this.getHand=function(t){let e=v[t];return void 0===e&&(e=new aa,v[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){i=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){a=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(t){u=t},this.getBaseLayer=function(){return null!==h?h:d},this.getBinding=function(){return c},this.getFrame=function(){return f},this.getSession=function(){return r},this.setSession=async function(l){if(r=l,null!==r){if(m=t.getRenderTarget(),r.addEventListener("select",C),r.addEventListener("selectstart",C),r.addEventListener("selectend",C),r.addEventListener("squeeze",C),r.addEventListener("squeezestart",C),r.addEventListener("squeezeend",C),r.addEventListener("end",T),r.addEventListener("inputsourceschange",k),!0!==p.xrCompatible&&await e.makeXRCompatible(),void 0===r.renderState.layers||!1===t.capabilities.isWebGL2){const n={antialias:void 0!==r.renderState.layers||p.antialias,alpha:p.alpha,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:i};d=new XRWebGLLayer(r,e,n),r.updateRenderState({baseLayer:d}),g=new ae(d.framebufferWidth,d.framebufferHeight,{format:tt,type:$,encoding:t.outputEncoding,stencilBuffer:p.stencil})}else{let n=null,o=null,a=null;p.depth&&(a=p.stencil?35056:33190,n=p.stencil?nt:et,o=p.stencil?J:K);const s={colorFormat:32856,depthFormat:a,scaleFactor:i};c=new XRWebGLBinding(r,e),h=c.createProjectionLayer(s),r.updateRenderState({layers:[h]}),g=new ae(h.textureWidth,h.textureHeight,{format:tt,type:$,depthTexture:new sa(h.textureWidth,h.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:p.stencil,encoding:t.outputEncoding,samples:p.antialias?4:0});t.properties.get(g).__ignoreDepthValues=h.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(s),u=null,o=await r.requestReferenceSpace(a),L.setContext(r),L.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const I=new ce,N=new ce;function P(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.updateCamera=function(t){if(null===r)return;E.near=_.near=w.near=t.near,E.far=_.far=w.far=t.far,A===E.near&&M===E.far||(r.updateRenderState({depthNear:E.near,depthFar:E.far}),A=E.near,M=E.far);const e=t.parent,n=E.cameras;P(E,e);for(let t=0;t<n.length;t++)P(n[t],e);2===n.length?function(t,e,n){I.setFromMatrixPosition(e.matrixWorld),N.setFromMatrixPosition(n.matrixWorld);const r=I.distanceTo(N),i=e.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),u=(i[9]+1)/i[5],l=(i[9]-1)/i[5],c=(i[8]-1)/i[0],h=(o[8]+1)/o[0],d=a*c,f=a*h,p=r/(-c+h),m=p*-c;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(p),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();const g=a+p,v=s+p,y=d-m,b=f+(r-m),x=u*s/v*g,w=l*s/v*g;t.projectionMatrix.makePerspective(y,b,x,w,g,v),t.projectionMatrixInverse.copy(t.projectionMatrix).invert()}(E,w,_):E.projectionMatrix.copy(w.projectionMatrix),function(t,e,n){null===n?t.matrix.copy(e.matrixWorld):(t.matrix.copy(n.matrixWorld),t.matrix.invert(),t.matrix.multiply(e.matrixWorld));t.matrix.decompose(t.position,t.quaternion,t.scale),t.updateMatrixWorld(!0);const r=t.children;for(let t=0,e=r.length;t<e;t++)r[t].updateMatrixWorld(!0);t.projectionMatrix.copy(e.projectionMatrix),t.projectionMatrixInverse.copy(e.projectionMatrixInverse),t.isPerspectiveCamera&&(t.fov=2*It*Math.atan(1/t.projectionMatrix.elements[5]),t.zoom=1)}(t,E,e)},this.getCamera=function(){return E},this.getFoveation=function(){if(null!==h||null!==d)return s},this.setFoveation=function(t){s=t,null!==h&&(h.fixedFoveation=t),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=t)},this.getPlanes=function(){return b};let O=null;const L=new Pr;L.setAnimationLoop((function(e,r){if(l=r.getViewerPose(u||o),f=r,null!==l){const e=l.views;null!==d&&(t.setRenderTargetFramebuffer(g,d.framebuffer),t.setRenderTarget(g));let n=!1;e.length!==E.cameras.length&&(E.cameras.length=0,n=!0);for(let r=0;r<e.length;r++){const i=e[r];let o=null;if(null!==d)o=d.getViewport(i);else{const e=c.getViewSubImage(h,i);o=e.viewport,0===r&&(t.setRenderTargetTextures(g,e.colorTexture,h.ignoreDepthValues?void 0:e.depthStencilTexture),t.setRenderTarget(g))}let a=S[r];void 0===a&&(a=new xr,a.layers.enable(r),a.viewport=new oe,S[r]=a),a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.quaternion,a.scale),a.projectionMatrix.fromArray(i.projectionMatrix),a.projectionMatrixInverse.copy(a.projectionMatrix).invert(),a.viewport.set(o.x,o.y,o.width,o.height),0===r&&(E.matrix.copy(a.matrix),E.matrix.decompose(E.position,E.quaternion,E.scale)),!0===n&&E.cameras.push(a)}}for(let t=0;t<v.length;t++){const e=y[t],n=v[t];null!==e&&void 0!==n&&n.update(e,r,u||o)}if(O&&O(e,r),r.detectedPlanes){n.dispatchEvent({type:"planesdetected",data:r.detectedPlanes});let t=null;for(const e of b)r.detectedPlanes.has(e)||(null===t&&(t=[]),t.push(e));if(null!==t)for(const e of t)b.delete(e),x.delete(e),n.dispatchEvent({type:"planeremoved",data:e});for(const t of r.detectedPlanes)if(b.has(t)){const e=x.get(t);t.lastChangedTime>e&&(x.set(t,t.lastChangedTime),n.dispatchEvent({type:"planechanged",data:t}))}else b.add(t),x.set(t,r.lastChangedTime),n.dispatchEvent({type:"planeadded",data:t})}f=null})),this.setAnimationLoop=function(t){O=t},this.dispose=function(){}}}function la(t,e){function n(t,e){!0===t.matrixAutoUpdate&&t.updateMatrix(),e.value.copy(t.matrix)}function r(r,i){r.opacity.value=i.opacity,i.color&&r.diffuse.value.copy(i.color),i.emissive&&r.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(r.map.value=i.map,n(i.map,r.mapTransform)),i.alphaMap&&(r.alphaMap.value=i.alphaMap,n(i.alphaMap,r.alphaMapTransform)),i.bumpMap&&(r.bumpMap.value=i.bumpMap,n(i.bumpMap,r.bumpMapTransform),r.bumpScale.value=i.bumpScale,i.side===c&&(r.bumpScale.value*=-1)),i.normalMap&&(r.normalMap.value=i.normalMap,n(i.normalMap,r.normalMapTransform),r.normalScale.value.copy(i.normalScale),i.side===c&&r.normalScale.value.negate()),i.displacementMap&&(r.displacementMap.value=i.displacementMap,n(i.displacementMap,r.displacementMapTransform),r.displacementScale.value=i.displacementScale,r.displacementBias.value=i.displacementBias),i.emissiveMap&&(r.emissiveMap.value=i.emissiveMap,n(i.emissiveMap,r.emissiveMapTransform)),i.specularMap&&(r.specularMap.value=i.specularMap,n(i.specularMap,r.specularMapTransform)),i.alphaTest>0&&(r.alphaTest.value=i.alphaTest);const o=e.get(i).envMap;if(o&&(r.envMap.value=o,r.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,r.reflectivity.value=i.reflectivity,r.ior.value=i.ior,r.refractionRatio.value=i.refractionRatio),i.lightMap){r.lightMap.value=i.lightMap;const e=!0===t.useLegacyLights?Math.PI:1;r.lightMapIntensity.value=i.lightMapIntensity*e,n(i.lightMap,r.lightMapTransform)}i.aoMap&&(r.aoMap.value=i.aoMap,r.aoMapIntensity.value=i.aoMapIntensity,n(i.aoMap,r.aoMapTransform))}return{refreshFogUniforms:function(e,n){n.color.getRGB(e.fogColor.value,gr(t)),n.isFog?(e.fogNear.value=n.near,e.fogFar.value=n.far):n.isFogExp2&&(e.fogDensity.value=n.density)},refreshMaterialUniforms:function(t,i,o,a,s){i.isMeshBasicMaterial||i.isMeshLambertMaterial?r(t,i):i.isMeshToonMaterial?(r(t,i),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap)}(t,i)):i.isMeshPhongMaterial?(r(t,i),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4)}(t,i)):i.isMeshStandardMaterial?(r(t,i),function(t,r){t.metalness.value=r.metalness,r.metalnessMap&&(t.metalnessMap.value=r.metalnessMap,n(r.metalnessMap,t.metalnessMapTransform));t.roughness.value=r.roughness,r.roughnessMap&&(t.roughnessMap.value=r.roughnessMap,n(r.roughnessMap,t.roughnessMapTransform));const i=e.get(r).envMap;i&&(t.envMapIntensity.value=r.envMapIntensity)}(t,i),i.isMeshPhysicalMaterial&&function(t,e,r){t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap,n(e.sheenColorMap,t.sheenColorMapTransform)),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap,n(e.sheenRoughnessMap,t.sheenRoughnessMapTransform)));e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap,n(e.clearcoatMap,t.clearcoatMapTransform)),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap,n(e.clearcoatRoughnessMap,t.clearcoatRoughnessMapTransform)),e.clearcoatNormalMap&&(t.clearcoatNormalMap.value=e.clearcoatNormalMap,n(e.clearcoatNormalMap,t.clearcoatNormalMapTransform),t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),e.side===c&&t.clearcoatNormalScale.value.negate()));e.iridescence>0&&(t.iridescence.value=e.iridescence,t.iridescenceIOR.value=e.iridescenceIOR,t.iridescenceThicknessMinimum.value=e.iridescenceThicknessRange[0],t.iridescenceThicknessMaximum.value=e.iridescenceThicknessRange[1],e.iridescenceMap&&(t.iridescenceMap.value=e.iridescenceMap,n(e.iridescenceMap,t.iridescenceMapTransform)),e.iridescenceThicknessMap&&(t.iridescenceThicknessMap.value=e.iridescenceThicknessMap,n(e.iridescenceThicknessMap,t.iridescenceThicknessMapTransform)));e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=r.texture,t.transmissionSamplerSize.value.set(r.width,r.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap,n(e.transmissionMap,t.transmissionMapTransform)),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap,n(e.thicknessMap,t.thicknessMapTransform)),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor));t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap,n(e.specularColorMap,t.specularColorMapTransform));e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap,n(e.specularIntensityMap,t.specularIntensityMapTransform))}(t,i,s)):i.isMeshMatcapMaterial?(r(t,i),function(t,e){e.matcap&&(t.matcap.value=e.matcap)}(t,i)):i.isMeshDepthMaterial?r(t,i):i.isMeshDistanceMaterial?(r(t,i),function(t,n){const r=e.get(n).light;t.referencePosition.value.setFromMatrixPosition(r.matrixWorld),t.nearDistance.value=r.shadow.camera.near,t.farDistance.value=r.shadow.camera.far}(t,i)):i.isMeshNormalMaterial?r(t,i):i.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,e.map&&(t.map.value=e.map,n(e.map,t.mapTransform))}(t,i),i.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,i)):i.isPointsMaterial?function(t,e,r,i){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*r,t.scale.value=.5*i,e.map&&(t.map.value=e.map,n(e.map,t.uvTransform));e.alphaMap&&(t.alphaMap.value=e.alphaMap);e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}(t,i,o,a):i.isSpriteMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map,n(e.map,t.mapTransform));e.alphaMap&&(t.alphaMap.value=e.alphaMap);e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}(t,i):i.isShadowMaterial?(t.color.value.copy(i.color),t.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function ca(t,e,n,r){let i={},o={},a=[];const s=n.isWebGL2?t.getParameter(35375):0;function u(t,e,n){const r=t.value;if(void 0===n[e]){if("number"==typeof r)n[e]=r;else{const t=Array.isArray(r)?r:[r],i=[];for(let e=0;e<t.length;e++)i.push(t[e].clone());n[e]=i}return!0}if("number"==typeof r){if(n[e]!==r)return n[e]=r,!0}else{const t=Array.isArray(n[e])?n[e]:[n[e]],i=Array.isArray(r)?r:[r];for(let e=0;e<t.length;e++){const n=t[e];if(!1===n.equals(i[e]))return n.copy(i[e]),!0}}return!1}function l(t){const e={boundary:0,storage:0};return"number"==typeof t?(e.boundary=4,e.storage=4):t.isVector2?(e.boundary=8,e.storage=8):t.isVector3||t.isColor?(e.boundary=16,e.storage=12):t.isVector4?(e.boundary=16,e.storage=16):t.isMatrix3?(e.boundary=48,e.storage=48):t.isMatrix4?(e.boundary=64,e.storage=64):t.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",t),e}function c(e){const n=e.target;n.removeEventListener("dispose",c);const r=a.indexOf(n.__bindingPointIndex);a.splice(r,1),t.deleteBuffer(i[n.id]),delete i[n.id],delete o[n.id]}return{bind:function(t,e){const n=e.program;r.uniformBlockBinding(t,n)},update:function(n,h){let d=i[n.id];void 0===d&&(!function(t){const e=t.uniforms;let n=0;const r=16;let i=0;for(let t=0,o=e.length;t<o;t++){const o=e[t],a={boundary:0,storage:0},s=Array.isArray(o.value)?o.value:[o.value];for(let t=0,e=s.length;t<e;t++){const e=l(s[t]);a.boundary+=e.boundary,a.storage+=e.storage}if(o.__data=new Float32Array(a.storage/Float32Array.BYTES_PER_ELEMENT),o.__offset=n,t>0){i=n%r;0!==i&&r-i-a.boundary<0&&(n+=r-i,o.__offset=n)}n+=a.storage}i=n%r,i>0&&(n+=r-i);t.__size=n,t.__cache={}}(n),d=function(e){const n=function(){for(let t=0;t<s;t++)if(-1===a.indexOf(t))return a.push(t),t;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();e.__bindingPointIndex=n;const r=t.createBuffer(),i=e.__size,o=e.usage;return t.bindBuffer(35345,r),t.bufferData(35345,i,o),t.bindBuffer(35345,null),t.bindBufferBase(35345,n,r),r}(n),i[n.id]=d,n.addEventListener("dispose",c));const f=h.program;r.updateUBOMapping(n,f);const p=e.render.frame;o[n.id]!==p&&(!function(e){const n=i[e.id],r=e.uniforms,o=e.__cache;t.bindBuffer(35345,n);for(let e=0,n=r.length;e<n;e++){const n=r[e];if(!0===u(n,e,o)){const e=n.__offset,r=Array.isArray(n.value)?n.value:[n.value];let i=0;for(let o=0;o<r.length;o++){const a=r[o],s=l(a);"number"==typeof a?(n.__data[0]=a,t.bufferSubData(35345,e+i,n.__data)):a.isMatrix3?(n.__data[0]=a.elements[0],n.__data[1]=a.elements[1],n.__data[2]=a.elements[2],n.__data[3]=a.elements[0],n.__data[4]=a.elements[3],n.__data[5]=a.elements[4],n.__data[6]=a.elements[5],n.__data[7]=a.elements[0],n.__data[8]=a.elements[6],n.__data[9]=a.elements[7],n.__data[10]=a.elements[8],n.__data[11]=a.elements[0]):(a.toArray(n.__data,i),i+=s.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(35345,e,n.__data)}}t.bindBuffer(35345,null)}(n),o[n.id]=p)},dispose:function(){for(const e in i)t.deleteBuffer(i[e]);a=[],i={},o={}}}}function ha(){const t=Wt("canvas");return t.style.display="block",t}class da{constructor(t={}){const{canvas:e=ha(),context:n=null,depth:i=!0,stencil:o=!0,alpha:a=!1,antialias:s=!1,premultipliedAlpha:u=!0,preserveDrawingBuffer:d=!1,powerPreference:f="default",failIfMajorPerformanceCaveat:p=!1}=t;let m;this.isWebGLRenderer=!0,m=null!==n?n.getContextAttributes().alpha:a;let g=null,v=null;const y=[],b=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=vt,this.useLegacyLights=!0,this.toneMapping=k,this.toneMappingExposure=1;const x=this;let w=!1,_=0,S=0,E=null,A=-1,M=null;const C=new oe,T=new oe;let I=null,N=e.width,P=e.height,O=1,L=null,R=null;const D=new oe(0,0,N,P),z=new oe(0,0,N,P);let F=!1;const B=new Nr;let U=!1,j=!1,V=null;const H=new Ue,G=new ce,W={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function X(){return null===E?O:1}let Y,K,J,et,nt,rt,it,ot,at,st,ut,lt,ct,ht,dt,ft,pt,mt,gt,yt,bt,xt,wt,_t,St=n;function Et(t,n){for(let r=0;r<t.length;r++){const i=t[r],o=e.getContext(i,n);if(null!==o)return o}return null}try{const t={alpha:!0,depth:i,stencil:o,antialias:s,premultipliedAlpha:u,preserveDrawingBuffer:d,powerPreference:f,failIfMajorPerformanceCaveat:p};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${r}`),e.addEventListener("webglcontextlost",Ct,!1),e.addEventListener("webglcontextrestored",Tt,!1),e.addEventListener("webglcontextcreationerror",kt,!1),null===St){const e=["webgl2","webgl","experimental-webgl"];if(!0===x.isWebGL1Renderer&&e.shift(),St=Et(e,t),null===St)throw Et(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===St.getShaderPrecisionFormat&&(St.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}function At(){Y=new si(St),K=new Vr(St,Y,t),Y.init(K),xt=new na(St,Y,K),J=new ta(St,Y,K),et=new ci,nt=new Uo,rt=new ea(St,Y,J,nt,K,xt,et),it=new Gr(x),ot=new ai(x),at=new Or(St,K),wt=new Ur(St,Y,at,K),st=new ui(St,at,et,wt),ut=new pi(St,st,at,et),gt=new fi(St,K,rt),ft=new Hr(nt),lt=new Bo(x,it,ot,Y,K,wt,ft),ct=new la(x,nt),ht=new Go,dt=new Ko(Y,K),mt=new Br(x,it,ot,J,ut,m,u),pt=new Jo(x,ut,K),_t=new ca(St,et,K,J),yt=new jr(St,Y,et,K),bt=new li(St,Y,et,K),et.programs=lt.programs,x.capabilities=K,x.extensions=Y,x.properties=nt,x.renderLists=ht,x.shadowMap=pt,x.state=J,x.info=et}At();const Mt=new ua(x,St);function Ct(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function Tt(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const t=et.autoReset,e=pt.enabled,n=pt.autoUpdate,r=pt.needsUpdate,i=pt.type;At(),et.autoReset=t,pt.enabled=e,pt.autoUpdate=n,pt.needsUpdate=r,pt.type=i}function kt(t){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",t.statusMessage)}function It(t){const e=t.target;e.removeEventListener("dispose",It),function(t){(function(t){const e=nt.get(t).programs;void 0!==e&&(e.forEach((function(t){lt.releaseProgram(t)})),t.isShaderMaterial&&lt.releaseShaderCache(t))})(t),nt.remove(t)}(e)}this.xr=Mt,this.getContext=function(){return St},this.getContextAttributes=function(){return St.getContextAttributes()},this.forceContextLoss=function(){const t=Y.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=Y.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return O},this.setPixelRatio=function(t){void 0!==t&&(O=t,this.setSize(N,P,!1))},this.getSize=function(t){return t.set(N,P)},this.setSize=function(t,n,r=!0){Mt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(N=t,P=n,e.width=Math.floor(t*O),e.height=Math.floor(n*O),!0===r&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return t.set(N*O,P*O).floor()},this.setDrawingBufferSize=function(t,n,r){N=t,P=n,O=r,e.width=Math.floor(t*r),e.height=Math.floor(n*r),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return t.copy(C)},this.getViewport=function(t){return t.copy(D)},this.setViewport=function(t,e,n,r){t.isVector4?D.set(t.x,t.y,t.z,t.w):D.set(t,e,n,r),J.viewport(C.copy(D).multiplyScalar(O).floor())},this.getScissor=function(t){return t.copy(z)},this.setScissor=function(t,e,n,r){t.isVector4?z.set(t.x,t.y,t.z,t.w):z.set(t,e,n,r),J.scissor(T.copy(z).multiplyScalar(O).floor())},this.getScissorTest=function(){return F},this.setScissorTest=function(t){J.setScissorTest(F=t)},this.setOpaqueSort=function(t){L=t},this.setTransparentSort=function(t){R=t},this.getClearColor=function(t){return t.copy(mt.getClearColor())},this.setClearColor=function(){mt.setClearColor.apply(mt,arguments)},this.getClearAlpha=function(){return mt.getClearAlpha()},this.setClearAlpha=function(){mt.setClearAlpha.apply(mt,arguments)},this.clear=function(t=!0,e=!0,n=!0){let r=0;t&&(r|=16384),e&&(r|=256),n&&(r|=1024),St.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Ct,!1),e.removeEventListener("webglcontextrestored",Tt,!1),e.removeEventListener("webglcontextcreationerror",kt,!1),ht.dispose(),dt.dispose(),nt.dispose(),it.dispose(),ot.dispose(),ut.dispose(),wt.dispose(),_t.dispose(),lt.dispose(),Mt.dispose(),Mt.removeEventListener("sessionstart",Pt),Mt.removeEventListener("sessionend",Ot),V&&(V.dispose(),V=null),Lt.stop()},this.renderBufferDirect=function(t,e,n,r,i,o){null===e&&(e=W);const a=i.isMesh&&i.matrixWorld.determinant()<0,s=function(t,e,n,r,i){!0!==e.isScene&&(e=W);rt.resetTextureUnits();const o=e.fog,a=r.isMeshStandardMaterial?e.environment:null,s=null===E?x.outputEncoding:!0===E.isXRRenderTarget?E.texture.encoding:vt,u=(r.isMeshStandardMaterial?ot:it).get(r.envMap||a),l=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!r.normalMap&&!!n.attributes.tangent,h=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,f=!!n.morphAttributes.color,p=r.toneMapped?x.toneMapping:k,m=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,g=void 0!==m?m.length:0,y=nt.get(r),b=v.state.lights;if(!0===U&&(!0===j||t!==M)){const e=t===M&&r.id===A;ft.setState(r,t,e)}let w=!1;r.version===y.__version?y.needsLights&&y.lightsStateVersion!==b.state.version||y.outputEncoding!==s||i.isInstancedMesh&&!1===y.instancing?w=!0:i.isInstancedMesh||!0!==y.instancing?i.isSkinnedMesh&&!1===y.skinning?w=!0:i.isSkinnedMesh||!0!==y.skinning?y.envMap!==u||!0===r.fog&&y.fog!==o?w=!0:void 0===y.numClippingPlanes||y.numClippingPlanes===ft.numPlanes&&y.numIntersection===ft.numIntersection?(y.vertexAlphas!==l||y.vertexTangents!==c||y.morphTargets!==h||y.morphNormals!==d||y.morphColors!==f||y.toneMapping!==p||!0===K.isWebGL2&&y.morphTargetsCount!==g)&&(w=!0):w=!0:w=!0:w=!0:(w=!0,y.__version=r.version);let _=y.currentProgram;!0===w&&(_=Bt(r,e,i));let S=!1,C=!1,T=!1;const I=_.getUniforms(),N=y.uniforms;J.useProgram(_.program)&&(S=!0,C=!0,T=!0);r.id!==A&&(A=r.id,C=!0);if(S||M!==t){if(I.setValue(St,"projectionMatrix",t.projectionMatrix),K.logarithmicDepthBuffer&&I.setValue(St,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),M!==t&&(M=t,C=!0,T=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){const e=I.map.cameraPosition;void 0!==e&&e.setValue(St,G.setFromMatrixPosition(t.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&I.setValue(St,"isOrthographic",!0===t.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&I.setValue(St,"viewMatrix",t.matrixWorldInverse)}if(i.isSkinnedMesh){I.setOptional(St,i,"bindMatrix"),I.setOptional(St,i,"bindMatrixInverse");const t=i.skeleton;t&&(K.floatVertexTextures?(null===t.boneTexture&&t.computeBoneTexture(),I.setValue(St,"boneTexture",t.boneTexture,rt),I.setValue(St,"boneTextureSize",t.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const L=n.morphAttributes;(void 0!==L.position||void 0!==L.normal||void 0!==L.color&&!0===K.isWebGL2)&&gt.update(i,n,_);(C||y.receiveShadow!==i.receiveShadow)&&(y.receiveShadow=i.receiveShadow,I.setValue(St,"receiveShadow",i.receiveShadow));r.isMeshGouraudMaterial&&null!==r.envMap&&(N.envMap.value=u,N.flipEnvMap.value=u.isCubeTexture&&!1===u.isRenderTargetTexture?-1:1);C&&(I.setValue(St,"toneMappingExposure",x.toneMappingExposure),y.needsLights&&(D=T,(R=N).ambientLightColor.needsUpdate=D,R.lightProbe.needsUpdate=D,R.directionalLights.needsUpdate=D,R.directionalLightShadows.needsUpdate=D,R.pointLights.needsUpdate=D,R.pointLightShadows.needsUpdate=D,R.spotLights.needsUpdate=D,R.spotLightShadows.needsUpdate=D,R.rectAreaLights.needsUpdate=D,R.hemisphereLights.needsUpdate=D),o&&!0===r.fog&&ct.refreshFogUniforms(N,o),ct.refreshMaterialUniforms(N,r,O,P,V),bo.upload(St,y.uniformsList,N,rt));var R,D;r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(bo.upload(St,y.uniformsList,N,rt),r.uniformsNeedUpdate=!1);r.isSpriteMaterial&&I.setValue(St,"center",i.center);if(I.setValue(St,"modelViewMatrix",i.modelViewMatrix),I.setValue(St,"normalMatrix",i.normalMatrix),I.setValue(St,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const t=r.uniformsGroups;for(let e=0,n=t.length;e<n;e++)if(K.isWebGL2){const n=t[e];_t.update(n,_),_t.bind(n,_)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return _}(t,e,n,r,i);J.setMaterial(r,a);let u=n.index,l=1;!0===r.wireframe&&(u=st.getWireframeAttribute(n),l=2);const c=n.drawRange,h=n.attributes.position;let d=c.start*l,f=(c.start+c.count)*l;null!==o&&(d=Math.max(d,o.start*l),f=Math.min(f,(o.start+o.count)*l)),null!==u?(d=Math.max(d,0),f=Math.min(f,u.count)):null!=h&&(d=Math.max(d,0),f=Math.min(f,h.count));const p=f-d;if(p<0||p===1/0)return;let m;wt.setup(i,r,s,n,u);let g=yt;if(null!==u&&(m=at.get(u),g=bt,g.setIndex(m)),i.isMesh)!0===r.wireframe?(J.setLineWidth(r.wireframeLinewidth*X()),g.setMode(1)):g.setMode(4);else if(i.isLine){let t=r.linewidth;void 0===t&&(t=1),J.setLineWidth(t*X()),i.isLineSegments?g.setMode(1):i.isLineLoop?g.setMode(2):g.setMode(3)}else i.isPoints?g.setMode(0):i.isSprite&&g.setMode(4);if(i.isInstancedMesh)g.renderInstances(d,p,i.count);else if(n.isInstancedBufferGeometry){const t=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,e=Math.min(n.instanceCount,t);g.renderInstances(d,p,e)}else g.render(d,p)},this.compile=function(t,e){function n(t,e,n){!0===t.transparent&&t.side===h&&!1===t.forceSinglePass?(t.side=c,t.needsUpdate=!0,Bt(t,e,n),t.side=l,t.needsUpdate=!0,Bt(t,e,n),t.side=h):Bt(t,e,n)}v=dt.get(t),v.init(),b.push(v),t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(v.pushLight(t),t.castShadow&&v.pushShadow(t))})),v.setupLights(x.useLegacyLights),t.traverse((function(e){const r=e.material;if(r)if(Array.isArray(r))for(let i=0;i<r.length;i++){n(r[i],t,e)}else n(r,t,e)})),b.pop(),v=null};let Nt=null;function Pt(){Lt.stop()}function Ot(){Lt.start()}const Lt=new Pr;function Rt(t,e,n,r){if(!1===t.visible)return;if(t.layers.test(e.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)v.pushLight(t),t.castShadow&&v.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||B.intersectsSprite(t)){r&&G.setFromMatrixPosition(t.matrixWorld).applyMatrix4(H);const e=ut.update(t),i=t.material;i.visible&&g.push(t,e,i,n,G.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==et.render.frame&&(t.skeleton.update(),t.skeleton.frame=et.render.frame),!t.frustumCulled||B.intersectsObject(t))){r&&G.setFromMatrixPosition(t.matrixWorld).applyMatrix4(H);const e=ut.update(t),i=t.material;if(Array.isArray(i)){const r=e.groups;for(let o=0,a=r.length;o<a;o++){const a=r[o],s=i[a.materialIndex];s&&s.visible&&g.push(t,e,s,n,G.z,a)}}else i.visible&&g.push(t,e,i,n,G.z,null)}const i=t.children;for(let t=0,o=i.length;t<o;t++)Rt(i[t],e,n,r)}function Dt(t,e,n,r){const i=t.opaque,o=t.transmissive,a=t.transparent;v.setupLightsView(n),!0===U&&ft.setGlobalState(x.clippingPlanes,n),o.length>0&&function(t,e,n,r){if(null===V){const t=K.isWebGL2;V=new ae(1024,1024,{generateMipmaps:!0,type:Y.has("EXT_color_buffer_half_float")?Q:$,minFilter:q,samples:t&&!0===s?4:0})}const i=x.getRenderTarget();x.setRenderTarget(V),x.clear();const o=x.toneMapping;x.toneMapping=k,zt(t,n,r),rt.updateMultisampleRenderTarget(V),rt.updateRenderTargetMipmap(V);let a=!1;for(let t=0,i=e.length;t<i;t++){const i=e[t],o=i.object,s=i.geometry,u=i.material,l=i.group;if(u.side===h&&o.layers.test(r.layers)){const t=u.side;u.side=c,u.needsUpdate=!0,Ft(o,n,r,s,u,l),u.side=t,u.needsUpdate=!0,a=!0}}!0===a&&(rt.updateMultisampleRenderTarget(V),rt.updateRenderTargetMipmap(V));x.setRenderTarget(i),x.toneMapping=o}(i,o,e,n),r&&J.viewport(C.copy(r)),i.length>0&&zt(i,e,n),o.length>0&&zt(o,e,n),a.length>0&&zt(a,e,n),J.buffers.depth.setTest(!0),J.buffers.depth.setMask(!0),J.buffers.color.setMask(!0),J.setPolygonOffset(!1)}function zt(t,e,n){const r=!0===e.isScene?e.overrideMaterial:null;for(let i=0,o=t.length;i<o;i++){const o=t[i],a=o.object,s=o.geometry,u=null===r?o.material:r,l=o.group;a.layers.test(n.layers)&&Ft(a,e,n,s,u,l)}}function Ft(t,e,n,r,i,o){t.onBeforeRender(x,e,n,r,i,o),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),i.onBeforeRender(x,e,n,r,t,o),!0===i.transparent&&i.side===h&&!1===i.forceSinglePass?(i.side=c,i.needsUpdate=!0,x.renderBufferDirect(n,e,r,i,t,o),i.side=l,i.needsUpdate=!0,x.renderBufferDirect(n,e,r,i,t,o),i.side=h):x.renderBufferDirect(n,e,r,i,t,o),t.onAfterRender(x,e,n,r,i,o)}function Bt(t,e,n){!0!==e.isScene&&(e=W);const r=nt.get(t),i=v.state.lights,o=v.state.shadowsArray,a=i.state.version,s=lt.getParameters(t,i.state,o,e,n),u=lt.getProgramCacheKey(s);let l=r.programs;r.environment=t.isMeshStandardMaterial?e.environment:null,r.fog=e.fog,r.envMap=(t.isMeshStandardMaterial?ot:it).get(t.envMap||r.environment),void 0===l&&(t.addEventListener("dispose",It),l=new Map,r.programs=l);let c=l.get(u);if(void 0!==c){if(r.currentProgram===c&&r.lightsStateVersion===a)return Ut(t,s),c}else s.uniforms=lt.getUniforms(t),t.onBuild(n,s,x),t.onBeforeCompile(s,x),c=lt.acquireProgram(s,u),l.set(u,c),r.uniforms=s.uniforms;const h=r.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(h.clippingPlanes=ft.uniform),Ut(t,s),r.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),r.lightsStateVersion=a,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotLightMatrix.value=i.state.spotLightMatrix,h.spotLightMap.value=i.state.spotLightMap,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);const d=c.getUniforms(),f=bo.seqWithValue(d.seq,h);return r.currentProgram=c,r.uniformsList=f,c}function Ut(t,e){const n=nt.get(t);n.outputEncoding=e.outputEncoding,n.instancing=e.instancing,n.skinning=e.skinning,n.morphTargets=e.morphTargets,n.morphNormals=e.morphNormals,n.morphColors=e.morphColors,n.morphTargetsCount=e.morphTargetsCount,n.numClippingPlanes=e.numClippingPlanes,n.numIntersection=e.numClipIntersection,n.vertexAlphas=e.vertexAlphas,n.vertexTangents=e.vertexTangents,n.toneMapping=e.toneMapping}Lt.setAnimationLoop((function(t){Nt&&Nt(t)})),"undefined"!=typeof self&&Lt.setContext(self),this.setAnimationLoop=function(t){Nt=t,Mt.setAnimationLoop(t),null===t?Lt.stop():Lt.start()},Mt.addEventListener("sessionstart",Pt),Mt.addEventListener("sessionend",Ot),this.render=function(t,e){if(void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===w)return;!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),null===e.parent&&!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),!0===Mt.enabled&&!0===Mt.isPresenting&&(!0===Mt.cameraAutoUpdate&&Mt.updateCamera(e),e=Mt.getCamera()),!0===t.isScene&&t.onBeforeRender(x,t,e,E),v=dt.get(t,b.length),v.init(),b.push(v),H.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),B.setFromProjectionMatrix(H),j=this.localClippingEnabled,U=ft.init(this.clippingPlanes,j),g=ht.get(t,y.length),g.init(),y.push(g),Rt(t,e,0,x.sortObjects),g.finish(),!0===x.sortObjects&&g.sort(L,R),!0===U&&ft.beginShadows();const n=v.state.shadowsArray;if(pt.render(n,t,e),!0===U&&ft.endShadows(),!0===this.info.autoReset&&this.info.reset(),mt.render(g,t),v.setupLights(x.useLegacyLights),e.isArrayCamera){const n=e.cameras;for(let e=0,r=n.length;e<r;e++){const r=n[e];Dt(g,t,r,r.viewport)}}else Dt(g,t,e);null!==E&&(rt.updateMultisampleRenderTarget(E),rt.updateRenderTargetMipmap(E)),!0===t.isScene&&t.onAfterRender(x,t,e),wt.resetDefaultState(),A=-1,M=null,b.pop(),v=b.length>0?b[b.length-1]:null,y.pop(),g=y.length>0?y[y.length-1]:null},this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return E},this.setRenderTargetTextures=function(t,e,n){nt.get(t.texture).__webglTexture=e,nt.get(t.depthTexture).__webglTexture=n;const r=nt.get(t);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===Y.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(t,e){const n=nt.get(t);n.__webglFramebuffer=e,n.__useDefaultFramebuffer=void 0===e},this.setRenderTarget=function(t,e=0,n=0){E=t,_=e,S=n;let r=!0,i=null,o=!1,a=!1;if(t){const n=nt.get(t);void 0!==n.__useDefaultFramebuffer?(J.bindFramebuffer(36160,null),r=!1):void 0===n.__webglFramebuffer?rt.setupRenderTarget(t):n.__hasExternalTextures&&rt.rebindTextures(t,nt.get(t.texture).__webglTexture,nt.get(t.depthTexture).__webglTexture);const s=t.texture;(s.isData3DTexture||s.isDataArrayTexture||s.isCompressedArrayTexture)&&(a=!0);const u=nt.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(i=u[e],o=!0):i=K.isWebGL2&&t.samples>0&&!1===rt.useMultisampledRTT(t)?nt.get(t).__webglMultisampledFramebuffer:u,C.copy(t.viewport),T.copy(t.scissor),I=t.scissorTest}else C.copy(D).multiplyScalar(O).floor(),T.copy(z).multiplyScalar(O).floor(),I=F;if(J.bindFramebuffer(36160,i)&&K.drawBuffers&&r&&J.drawBuffers(t,i),J.viewport(C),J.scissor(T),J.setScissorTest(I),o){const r=nt.get(t.texture);St.framebufferTexture2D(36160,36064,34069+e,r.__webglTexture,n)}else if(a){const r=nt.get(t.texture),i=e||0;St.framebufferTextureLayer(36160,36064,r.__webglTexture,n||0,i)}A=-1},this.readRenderTargetPixels=function(t,e,n,r,i,o,a){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=nt.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){J.bindFramebuffer(36160,s);try{const a=t.texture,s=a.format,u=a.type;if(s!==tt&&xt.convert(s)!==St.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const l=u===Q&&(Y.has("EXT_color_buffer_half_float")||K.isWebGL2&&Y.has("EXT_color_buffer_float"));if(!(u===$||xt.convert(u)===St.getParameter(35738)||u===Z&&(K.isWebGL2||Y.has("OES_texture_float")||Y.has("WEBGL_color_buffer_float"))||l))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");e>=0&&e<=t.width-r&&n>=0&&n<=t.height-i&&St.readPixels(e,n,r,i,xt.convert(s),xt.convert(u),o)}finally{const t=null!==E?nt.get(E).__webglFramebuffer:null;J.bindFramebuffer(36160,t)}}},this.copyFramebufferToTexture=function(t,e,n=0){const r=Math.pow(2,-n),i=Math.floor(e.image.width*r),o=Math.floor(e.image.height*r);rt.setTexture2D(e,0),St.copyTexSubImage2D(3553,n,0,0,t.x,t.y,i,o),J.unbindTexture()},this.copyTextureToTexture=function(t,e,n,r=0){const i=e.image.width,o=e.image.height,a=xt.convert(n.format),s=xt.convert(n.type);rt.setTexture2D(n,0),St.pixelStorei(37440,n.flipY),St.pixelStorei(37441,n.premultiplyAlpha),St.pixelStorei(3317,n.unpackAlignment),e.isDataTexture?St.texSubImage2D(3553,r,t.x,t.y,i,o,a,s,e.image.data):e.isCompressedTexture?St.compressedTexSubImage2D(3553,r,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,a,e.mipmaps[0].data):St.texSubImage2D(3553,r,t.x,t.y,a,s,e.image),0===r&&n.generateMipmaps&&St.generateMipmap(3553),J.unbindTexture()},this.copyTextureToTexture3D=function(t,e,n,r,i=0){if(x.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const o=t.max.x-t.min.x+1,a=t.max.y-t.min.y+1,s=t.max.z-t.min.z+1,u=xt.convert(r.format),l=xt.convert(r.type);let c;if(r.isData3DTexture)rt.setTexture3D(r,0),c=32879;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");rt.setTexture2DArray(r,0),c=35866}St.pixelStorei(37440,r.flipY),St.pixelStorei(37441,r.premultiplyAlpha),St.pixelStorei(3317,r.unpackAlignment);const h=St.getParameter(3314),d=St.getParameter(32878),f=St.getParameter(3316),p=St.getParameter(3315),m=St.getParameter(32877),g=n.isCompressedTexture?n.mipmaps[0]:n.image;St.pixelStorei(3314,g.width),St.pixelStorei(32878,g.height),St.pixelStorei(3316,t.min.x),St.pixelStorei(3315,t.min.y),St.pixelStorei(32877,t.min.z),n.isDataTexture||n.isData3DTexture?St.texSubImage3D(c,i,e.x,e.y,e.z,o,a,s,u,l,g.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),St.compressedTexSubImage3D(c,i,e.x,e.y,e.z,o,a,s,u,g.data)):St.texSubImage3D(c,i,e.x,e.y,e.z,o,a,s,u,l,g),St.pixelStorei(3314,h),St.pixelStorei(32878,d),St.pixelStorei(3316,f),St.pixelStorei(3315,p),St.pixelStorei(32877,m),0===i&&r.generateMipmaps&&St.generateMipmap(c),J.unbindTexture()},this.initTexture=function(t){t.isCubeTexture?rt.setTextureCube(t,0):t.isData3DTexture?rt.setTexture3D(t,0):t.isDataArrayTexture||t.isCompressedArrayTexture?rt.setTexture2DArray(t,0):rt.setTexture2D(t,0),J.unbindTexture()},this.resetState=function(){_=0,S=0,E=null,J.reset(),wt.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(t){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!t}}(class extends da{}).prototype.isWebGL1Renderer=!0;class fa extends dn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(e.object.backgroundIntensity=this.backgroundIntensity),e}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(t){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=t}}class pa{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=St,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Nt()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let r=0,i=this.stride;r<i;r++)this.array[t+r]=e.array[n+r];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Nt()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Nt()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ma=new ce;class ga{constructor(t,e,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)ma.fromBufferAttribute(this,e),ma.applyMatrix4(t),this.setXYZ(e,ma.x,ma.y,ma.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)ma.fromBufferAttribute(this,e),ma.applyNormalMatrix(t),this.setXYZ(e,ma.x,ma.y,ma.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)ma.fromBufferAttribute(this,e),ma.transformDirection(t),this.setXYZ(e,ma.x,ma.y,ma.z);return this}setX(t,e){return this.normalized&&(e=Bt(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=Bt(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=Bt(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=Bt(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=Ft(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=Ft(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=Ft(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=Ft(e,this.array)),e}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=Bt(e,this.array),n=Bt(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=Bt(e,this.array),n=Bt(n,this.array),r=Bt(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this}setXYZW(t,e,n,r,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=Bt(e,this.array),n=Bt(n,this.array),r=Bt(r,this.array),i=Bt(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=i,this}clone(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return new Dn(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new ga(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class va extends Mn{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Nn(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let ya;const ba=new ce,xa=new ce,wa=new ce,_a=new jt,Sa=new jt,Ea=new Ue,Aa=new ce,Ma=new ce,Ca=new ce,Ta=new jt,ka=new jt,Ia=new jt;class Na extends dn{constructor(t){if(super(),this.isSprite=!0,this.type="Sprite",void 0===ya){ya=new Yn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),e=new pa(t,5);ya.setIndex([0,1,2,0,2,3]),ya.setAttribute("position",new ga(e,3,0,!1)),ya.setAttribute("uv",new ga(e,2,3,!1))}this.geometry=ya,this.material=void 0!==t?t:new va,this.center=new jt(.5,.5)}raycast(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),xa.setFromMatrixScale(this.matrixWorld),Ea.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),wa.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&xa.multiplyScalar(-wa.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const o=this.center;Pa(Aa.set(-.5,-.5,0),wa,o,xa,r,i),Pa(Ma.set(.5,-.5,0),wa,o,xa,r,i),Pa(Ca.set(.5,.5,0),wa,o,xa,r,i),Ta.set(0,0),ka.set(1,0),Ia.set(1,1);let a=t.ray.intersectTriangle(Aa,Ma,Ca,!1,ba);if(null===a&&(Pa(Ma.set(-.5,.5,0),wa,o,xa,r,i),ka.set(0,1),a=t.ray.intersectTriangle(Aa,Ca,Ma,!1,ba),null===a))return;const s=t.ray.origin.distanceTo(ba);s<t.near||s>t.far||e.push({distance:s,point:ba.clone(),uv:En.getInterpolation(ba,Aa,Ma,Ca,Ta,ka,Ia,new jt),face:null,object:this})}copy(t,e){return super.copy(t,e),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}}function Pa(t,e,n,r,i,o){_a.subVectors(t,n).addScalar(.5).multiply(r),void 0!==i?(Sa.x=o*_a.x-i*_a.y,Sa.y=i*_a.x+o*_a.y):Sa.copy(_a),t.copy(e),t.x+=Sa.x,t.y+=Sa.y,t.applyMatrix4(Ea)}const Oa=new ce,La=new oe,Ra=new oe,Da=new ce,za=new Ue,Fa=new ce;class Ba extends hr{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ue,this.bindMatrixInverse=new Ue,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;null===this.boundingBox&&(this.boundingBox=new fe),this.boundingBox.makeEmpty();const e=t.getAttribute("position");for(let t=0;t<e.count;t++)Fa.fromBufferAttribute(e,t),this.applyBoneTransform(t,Fa),this.boundingBox.expandByPoint(Fa)}computeBoundingSphere(){const t=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new Ne),this.boundingSphere.makeEmpty();const e=t.getAttribute("position");for(let t=0;t<e.count;t++)Fa.fromBufferAttribute(e,t),this.applyBoneTransform(t,Fa),this.boundingSphere.expandByPoint(Fa)}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this}bind(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new oe,e=this.geometry.attributes.skinWeight;for(let n=0,r=e.count;n<r;n++){t.fromBufferAttribute(e,n);const r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,e){const n=this.skeleton,r=this.geometry;La.fromBufferAttribute(r.attributes.skinIndex,t),Ra.fromBufferAttribute(r.attributes.skinWeight,t),Oa.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let t=0;t<4;t++){const r=Ra.getComponent(t);if(0!==r){const i=La.getComponent(t);za.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),e.addScaledVector(Da.copy(Oa).applyMatrix4(za),r)}}return e.applyMatrix4(this.bindMatrixInverse)}boneTransform(t,e){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(t,e)}}class Ua extends dn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class ja extends ie{constructor(t=null,e=1,n=1,r,i,o,a,s,u=H,l=H,c,h){super(null,o,a,s,u,l,r,i,c,h),this.isDataTexture=!0,this.image={data:t,width:e,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Va=new Ue,Ha=new Ue;class Ga{constructor(t=[],e=[]){this.uuid=Nt(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new Ue)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const e=new Ue;this.bones[t]&&e.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(e)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&e.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&(e.parent&&e.parent.isBone?(e.matrix.copy(e.parent.matrixWorld).invert(),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let r=0,i=t.length;r<i;r++){const i=t[r]?t[r].matrixWorld:Ha;Va.multiplyMatrices(i,e[r]),Va.toArray(n,16*r)}null!==r&&(r.needsUpdate=!0)}clone(){return new Ga(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length);t=Dt(t),t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new ja(e,t,t,tt,Z);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this.boneTextureSize=t,this}getBoneByName(t){for(let e=0,n=this.bones.length;e<n;e++){const n=this.bones[e];if(n.name===t)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let n=0,r=t.bones.length;n<r;n++){const r=t.bones[n];let i=e[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new Ua),this.bones.push(i),this.boneInverses.push((new Ue).fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let r=0,i=e.length;r<i;r++){const i=e[r];t.bones.push(i.uuid);const o=n[r];t.boneInverses.push(o.toArray())}return t}}class Wa extends Dn{constructor(t,e,n,r=1){super(t,e,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const Xa=new Ue,Ya=new Ue,qa=[],$a=new fe,Ka=new Ue,Za=new hr,Qa=new Ne;class Ja extends hr{constructor(t,e,n){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new Wa(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let t=0;t<n;t++)this.setMatrixAt(t,Ka)}computeBoundingBox(){const t=this.geometry,e=this.count;null===this.boundingBox&&(this.boundingBox=new fe),null===t.boundingBox&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,Xa),$a.copy(t.boundingBox).applyMatrix4(Xa),this.boundingBox.union($a)}computeBoundingSphere(){const t=this.geometry,e=this.count;null===this.boundingSphere&&(this.boundingSphere=new Ne),null===t.boundingSphere&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,Xa),Qa.copy(t.boundingSphere).applyMatrix4(Xa),this.boundingSphere.union(Qa)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,this}getColorAt(t,e){e.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,16*t)}raycast(t,e){const n=this.matrixWorld,r=this.count;if(Za.geometry=this.geometry,Za.material=this.material,void 0!==Za.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Qa.copy(this.boundingSphere),Qa.applyMatrix4(n),!1!==t.ray.intersectsSphere(Qa)))for(let i=0;i<r;i++){this.getMatrixAt(i,Xa),Ya.multiplyMatrices(n,Xa),Za.matrixWorld=Ya,Za.raycast(t,qa);for(let t=0,n=qa.length;t<n;t++){const n=qa[t];n.instanceId=i,n.object=this,e.push(n)}qa.length=0}}setColorAt(t,e){null===this.instanceColor&&(this.instanceColor=new Wa(new Float32Array(3*this.instanceMatrix.count),3)),e.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,16*t)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class ts extends Mn{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Nn(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const es=new ce,ns=new ce,rs=new Ue,is=new Be,os=new Ne;class as extends dn{constructor(t=new Yn,e=new ts){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[0];for(let t=1,r=e.count;t<r;t++)es.fromBufferAttribute(e,t-1),ns.fromBufferAttribute(e,t),n[t]=n[t-1],n[t]+=es.distanceTo(ns);t.setAttribute("lineDistance",new Bn(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,i=t.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),os.copy(n.boundingSphere),os.applyMatrix4(r),os.radius+=i,!1===t.ray.intersectsSphere(os))return;rs.copy(r).invert(),is.copy(t.ray).applyMatrix4(rs);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,u=new ce,l=new ce,c=new ce,h=new ce,d=this.isLineSegments?2:1,f=n.index,p=n.attributes.position;if(null!==f){for(let n=Math.max(0,o.start),r=Math.min(f.count,o.start+o.count)-1;n<r;n+=d){const r=f.getX(n),i=f.getX(n+1);u.fromBufferAttribute(p,r),l.fromBufferAttribute(p,i);if(is.distanceSqToSegment(u,l,h,c)>s)continue;h.applyMatrix4(this.matrixWorld);const o=t.ray.origin.distanceTo(h);o<t.near||o>t.far||e.push({distance:o,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else{for(let n=Math.max(0,o.start),r=Math.min(p.count,o.start+o.count)-1;n<r;n+=d){u.fromBufferAttribute(p,n),l.fromBufferAttribute(p,n+1);if(is.distanceSqToSegment(u,l,h,c)>s)continue;h.applyMatrix4(this.matrixWorld);const r=t.ray.origin.distanceTo(h);r<t.near||r>t.far||e.push({distance:r,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}}const ss=new ce,us=new ce;class ls extends as{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[];for(let t=0,r=e.count;t<r;t+=2)ss.fromBufferAttribute(e,t),us.fromBufferAttribute(e,t+1),n[t]=0===t?0:n[t-1],n[t+1]=n[t]+ss.distanceTo(us);t.setAttribute("lineDistance",new Bn(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class cs extends as{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}class hs extends Mn{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Nn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const ds=new Ue,fs=new Be,ps=new Ne,ms=new ce;class gs extends dn{constructor(t=new Yn,e=new hs){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,i=t.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),ps.copy(n.boundingSphere),ps.applyMatrix4(r),ps.radius+=i,!1===t.ray.intersectsSphere(ps))return;ds.copy(r).invert(),fs.copy(t.ray).applyMatrix4(ds);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,u=n.index,l=n.attributes.position;if(null!==u){for(let n=Math.max(0,o.start),i=Math.min(u.count,o.start+o.count);n<i;n++){const i=u.getX(n);ms.fromBufferAttribute(l,i),vs(ms,i,s,r,t,e,this)}}else{for(let n=Math.max(0,o.start),i=Math.min(l.count,o.start+o.count);n<i;n++)ms.fromBufferAttribute(l,n),vs(ms,n,s,r,t,e,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}}function vs(t,e,n,r,i,o,a){const s=fs.distanceSqToPoint(t);if(s<n){const n=new ce;fs.closestPointToPoint(t,n),n.applyMatrix4(r);const u=i.ray.origin.distanceTo(n);if(u<i.near||u>i.far)return;o.push({distance:u,distanceToRay:Math.sqrt(s),point:n,index:e,face:null,object:a})}}class ys extends ie{constructor(t,e,n,r,i,o,a,s,u){super(t,e,n,r,i,o,a,s,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class bs{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,r=this.getPoint(0),i=0;e.push(0);for(let o=1;o<=t;o++)n=this.getPoint(o/t),i+=n.distanceTo(r),e.push(i),r=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const n=this.getLengths();let r=0;const i=n.length;let o;o=e||t*n[i-1];let a,s=0,u=i-1;for(;s<=u;)if(r=Math.floor(s+(u-s)/2),a=n[r]-o,a<0)s=r+1;else{if(!(a>0)){u=r;break}u=r-1}if(r=u,n[r]===o)return r/(i-1);const l=n[r];return(r+(o-l)/(n[r+1]-l))/(i-1)}getTangent(t,e){const n=1e-4;let r=t-n,i=t+n;r<0&&(r=0),i>1&&(i=1);const o=this.getPoint(r),a=this.getPoint(i),s=e||(o.isVector2?new jt:new ce);return s.copy(a).sub(o).normalize(),s}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e){const n=new ce,r=[],i=[],o=[],a=new ce,s=new Ue;for(let e=0;e<=t;e++){const n=e/t;r[e]=this.getTangentAt(n,new ce)}i[0]=new ce,o[0]=new ce;let u=Number.MAX_VALUE;const l=Math.abs(r[0].x),c=Math.abs(r[0].y),h=Math.abs(r[0].z);l<=u&&(u=l,n.set(1,0,0)),c<=u&&(u=c,n.set(0,1,0)),h<=u&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],a),o[0].crossVectors(r[0],i[0]);for(let e=1;e<=t;e++){if(i[e]=i[e-1].clone(),o[e]=o[e-1].clone(),a.crossVectors(r[e-1],r[e]),a.length()>Number.EPSILON){a.normalize();const t=Math.acos(Pt(r[e-1].dot(r[e]),-1,1));i[e].applyMatrix4(s.makeRotationAxis(a,t))}o[e].crossVectors(r[e],i[e])}if(!0===e){let e=Math.acos(Pt(i[0].dot(i[t]),-1,1));e/=t,r[0].dot(a.crossVectors(i[0],i[t]))>0&&(e=-e);for(let n=1;n<=t;n++)i[n].applyMatrix4(s.makeRotationAxis(r[n],e*n)),o[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class xs extends bs{constructor(t=0,e=0,n=1,r=1,i=0,o=2*Math.PI,a=!1,s=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=a,this.aRotation=s}getPoint(t,e){const n=e||new jt,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const o=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);const a=this.aStartAngle+t*i;let s=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),n=s-this.aX,r=u-this.aY;s=n*t-r*e+this.aX,u=n*e+r*t+this.aY}return n.set(s,u)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class ws extends xs{constructor(t,e,n,r,i,o){super(t,e,n,n,r,i,o),this.isArcCurve=!0,this.type="ArcCurve"}}function _s(){let t=0,e=0,n=0,r=0;function i(i,o,a,s){t=i,e=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(t,e,n,r,o){i(e,n,o*(n-t),o*(r-e))},initNonuniformCatmullRom:function(t,e,n,r,o,a,s){let u=(e-t)/o-(n-t)/(o+a)+(n-e)/a,l=(n-e)/a-(r-e)/(a+s)+(r-n)/s;u*=a,l*=a,i(e,n,u,l)},calc:function(i){const o=i*i;return t+e*i+n*o+r*(o*i)}}}const Ss=new ce,Es=new _s,As=new _s,Ms=new _s;function Cs(t,e,n,r,i){const o=.5*(r-e),a=.5*(i-n),s=t*t;return(2*n-2*r+o+a)*(t*s)+(-3*n+3*r-2*o-a)*s+o*t+n}function Ts(t,e,n,r){return function(t,e){const n=1-t;return n*n*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,n)+function(t,e){return t*t*e}(t,r)}function ks(t,e,n,r,i){return function(t,e){const n=1-t;return n*n*n*e}(t,e)+function(t,e){const n=1-t;return 3*n*n*t*e}(t,n)+function(t,e){return 3*(1-t)*t*t*e}(t,r)+function(t,e){return t*t*t*e}(t,i)}class Is extends bs{constructor(t=new jt,e=new jt,n=new jt,r=new jt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new jt){const n=e,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(ks(t,r.x,i.x,o.x,a.x),ks(t,r.y,i.y,o.y,a.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class Ns extends bs{constructor(t=new jt,e=new jt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new jt){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new jt){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Ps extends bs{constructor(t=new jt,e=new jt,n=new jt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new jt){const n=e,r=this.v0,i=this.v1,o=this.v2;return n.set(Ts(t,r.x,i.x,o.x),Ts(t,r.y,i.y,o.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Os extends bs{constructor(t=new ce,e=new ce,n=new ce){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new ce){const n=e,r=this.v0,i=this.v1,o=this.v2;return n.set(Ts(t,r.x,i.x,o.x),Ts(t,r.y,i.y,o.y),Ts(t,r.z,i.z,o.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Ls extends bs{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new jt){const n=e,r=this.points,i=(r.length-1)*t,o=Math.floor(i),a=i-o,s=r[0===o?o:o-1],u=r[o],l=r[o>r.length-2?r.length-1:o+1],c=r[o>r.length-3?r.length-1:o+2];return n.set(Cs(a,s.x,u.x,l.x,c.x),Cs(a,s.y,u.y,l.y,c.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new jt).fromArray(n))}return this}}var Rs=Object.freeze({__proto__:null,ArcCurve:ws,CatmullRomCurve3:class extends bs{constructor(t=[],e=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=r}getPoint(t,e=new ce){const n=e,r=this.points,i=r.length,o=(i-(this.closed?0:1))*t;let a,s,u=Math.floor(o),l=o-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/i)+1)*i:0===l&&u===i-1&&(u=i-2,l=1),this.closed||u>0?a=r[(u-1)%i]:(Ss.subVectors(r[0],r[1]).add(r[0]),a=Ss);const c=r[u%i],h=r[(u+1)%i];if(this.closed||u+2<i?s=r[(u+2)%i]:(Ss.subVectors(r[i-1],r[i-2]).add(r[i-1]),s=Ss),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let e=Math.pow(a.distanceToSquared(c),t),n=Math.pow(c.distanceToSquared(h),t),r=Math.pow(h.distanceToSquared(s),t);n<1e-4&&(n=1),e<1e-4&&(e=n),r<1e-4&&(r=n),Es.initNonuniformCatmullRom(a.x,c.x,h.x,s.x,e,n,r),As.initNonuniformCatmullRom(a.y,c.y,h.y,s.y,e,n,r),Ms.initNonuniformCatmullRom(a.z,c.z,h.z,s.z,e,n,r)}else"catmullrom"===this.curveType&&(Es.initCatmullRom(a.x,c.x,h.x,s.x,this.tension),As.initCatmullRom(a.y,c.y,h.y,s.y,this.tension),Ms.initCatmullRom(a.z,c.z,h.z,s.z,this.tension));return n.set(Es.calc(l),As.calc(l),Ms.calc(l)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new ce).fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}},CubicBezierCurve:Is,CubicBezierCurve3:class extends bs{constructor(t=new ce,e=new ce,n=new ce,r=new ce){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new ce){const n=e,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(ks(t,r.x,i.x,o.x,a.x),ks(t,r.y,i.y,o.y,a.y),ks(t,r.z,i.z,o.z,a.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}},EllipseCurve:xs,LineCurve:Ns,LineCurve3:class extends bs{constructor(t=new ce,e=new ce){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new ce){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new ce){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},QuadraticBezierCurve:Ps,QuadraticBezierCurve3:Os,SplineCurve:Ls});class Ds extends bs{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Ns(e,t))}getPoint(t,e){const n=t*this.getLength(),r=this.getCurveLengths();let i=0;for(;i<r.length;){if(r[i]>=n){const t=r[i]-n,o=this.curves[i],a=o.getLength(),s=0===a?0:1-t/a;return o.getPointAt(s,e)}i++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const o=i[r],a=o.isEllipseCurve?2*t:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?t*o.points.length:t,s=o.getPoints(a);for(let t=0;t<s.length;t++){const r=s[t];n&&n.equals(r)||(e.push(r),n=r)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push(n.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){const n=this.curves[e];t.curves.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push((new Rs[n.type]).fromJSON(n))}return this}}class zs extends Ds{constructor(t){super(),this.type="Path",this.currentPoint=new jt,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new Ns(this.currentPoint.clone(),new jt(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,r){const i=new Ps(this.currentPoint.clone(),new jt(t,e),new jt(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(t,e,n,r,i,o){const a=new Is(this.currentPoint.clone(),new jt(t,e),new jt(n,r),new jt(i,o));return this.curves.push(a),this.currentPoint.set(i,o),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new Ls(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,r,i,o){const a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(t+a,e+s,n,r,i,o),this}absarc(t,e,n,r,i,o){return this.absellipse(t,e,n,n,r,i,o),this}ellipse(t,e,n,r,i,o,a,s){const u=this.currentPoint.x,l=this.currentPoint.y;return this.absellipse(t+u,e+l,n,r,i,o,a,s),this}absellipse(t,e,n,r,i,o,a,s){const u=new xs(t,e,n,r,i,o,a,s);if(this.curves.length>0){const t=u.getPoint(0);t.equals(this.currentPoint)||this.lineTo(t.x,t.y)}this.curves.push(u);const l=u.getPoint(1);return this.currentPoint.copy(l),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class Fs extends zs{constructor(t){super(t),this.uuid=Nt(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){const n=this.holes[e];t.holes.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push((new zs).fromJSON(n))}return this}}const Bs=function(t,e,n=2){const r=e&&e.length,i=r?e[0]*n:t.length;let o=Us(t,0,i,n,!0);const a=[];if(!o||o.next===o.prev)return a;let s,u,l,c,h,d,f;if(r&&(o=function(t,e,n,r){const i=[];let o,a,s,u,l;for(o=0,a=e.length;o<a;o++)s=e[o]*r,u=o<a-1?e[o+1]*r:t.length,l=Us(t,s,u,r,!1),l===l.next&&(l.steiner=!0),i.push(Zs(l));for(i.sort(Ys),o=0;o<i.length;o++)n=qs(i[o],n);return n}(t,e,o,n)),t.length>80*n){s=l=t[0],u=c=t[1];for(let e=n;e<i;e+=n)h=t[e],d=t[e+1],h<s&&(s=h),d<u&&(u=d),h>l&&(l=h),d>c&&(c=d);f=Math.max(l-s,c-u),f=0!==f?32767/f:0}return Vs(o,a,n,s,u,f,0),a};function Us(t,e,n,r,i){let o,a;if(i===function(t,e,n,r){let i=0;for(let o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}(t,e,n,r)>0)for(o=e;o<n;o+=r)a=su(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=su(o,t[o],t[o+1],a);return a&&eu(a,a.next)&&(uu(a),a=a.next),a}function js(t,e){if(!t)return t;e||(e=t);let n,r=t;do{if(n=!1,r.steiner||!eu(r,r.next)&&0!==tu(r.prev,r,r.next))r=r.next;else{if(uu(r),r=e=r.prev,r===r.next)break;n=!0}}while(n||r!==e);return e}function Vs(t,e,n,r,i,o,a){if(!t)return;!a&&o&&function(t,e,n,r){let i=t;do{0===i.z&&(i.z=Ks(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){let e,n,r,i,o,a,s,u,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<l&&(s++,r=r.nextZ,r);e++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(t,r,i,o);let s,u,l=t;for(;t.prev!==t.next;)if(s=t.prev,u=t.next,o?Gs(t,r,i,o):Hs(t))e.push(s.i/n|0),e.push(t.i/n|0),e.push(u.i/n|0),uu(t),t=u.next,l=u.next;else if((t=u)===l){a?1===a?Vs(t=Ws(js(t),e,n),e,n,r,i,o,2):2===a&&Xs(t,e,n,r,i,o):Vs(js(t),e,n,r,i,o,1);break}}function Hs(t){const e=t.prev,n=t,r=t.next;if(tu(e,n,r)>=0)return!1;const i=e.x,o=n.x,a=r.x,s=e.y,u=n.y,l=r.y,c=i<o?i<a?i:a:o<a?o:a,h=s<u?s<l?s:l:u<l?u:l,d=i>o?i>a?i:a:o>a?o:a,f=s>u?s>l?s:l:u>l?u:l;let p=r.next;for(;p!==e;){if(p.x>=c&&p.x<=d&&p.y>=h&&p.y<=f&&Qs(i,s,o,u,a,l,p.x,p.y)&&tu(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Gs(t,e,n,r){const i=t.prev,o=t,a=t.next;if(tu(i,o,a)>=0)return!1;const s=i.x,u=o.x,l=a.x,c=i.y,h=o.y,d=a.y,f=s<u?s<l?s:l:u<l?u:l,p=c<h?c<d?c:d:h<d?h:d,m=s>u?s>l?s:l:u>l?u:l,g=c>h?c>d?c:d:h>d?h:d,v=Ks(f,p,e,n,r),y=Ks(m,g,e,n,r);let b=t.prevZ,x=t.nextZ;for(;b&&b.z>=v&&x&&x.z<=y;){if(b.x>=f&&b.x<=m&&b.y>=p&&b.y<=g&&b!==i&&b!==a&&Qs(s,c,u,h,l,d,b.x,b.y)&&tu(b.prev,b,b.next)>=0)return!1;if(b=b.prevZ,x.x>=f&&x.x<=m&&x.y>=p&&x.y<=g&&x!==i&&x!==a&&Qs(s,c,u,h,l,d,x.x,x.y)&&tu(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;b&&b.z>=v;){if(b.x>=f&&b.x<=m&&b.y>=p&&b.y<=g&&b!==i&&b!==a&&Qs(s,c,u,h,l,d,b.x,b.y)&&tu(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;x&&x.z<=y;){if(x.x>=f&&x.x<=m&&x.y>=p&&x.y<=g&&x!==i&&x!==a&&Qs(s,c,u,h,l,d,x.x,x.y)&&tu(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function Ws(t,e,n){let r=t;do{const i=r.prev,o=r.next.next;!eu(i,o)&&nu(i,r,r.next,o)&&ou(i,o)&&ou(o,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(o.i/n|0),uu(r),uu(r.next),r=t=o),r=r.next}while(r!==t);return js(r)}function Xs(t,e,n,r,i,o){let a=t;do{let t=a.next.next;for(;t!==a.prev;){if(a.i!==t.i&&Js(a,t)){let s=au(a,t);return a=js(a,a.next),s=js(s,s.next),Vs(a,e,n,r,i,o,0),void Vs(s,e,n,r,i,o,0)}t=t.next}a=a.next}while(a!==t)}function Ys(t,e){return t.x-e.x}function qs(t,e){const n=function(t,e){let n,r=e,i=-1/0;const o=t.x,a=t.y;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){const t=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(t<=o&&t>i&&(i=t,n=r.x<r.next.x?r:r.next,t===o))return n}r=r.next}while(r!==e);if(!n)return null;const s=n,u=n.x,l=n.y;let c,h=1/0;r=n;do{o>=r.x&&r.x>=u&&o!==r.x&&Qs(a<l?o:i,a,u,l,a<l?i:o,a,r.x,r.y)&&(c=Math.abs(a-r.y)/(o-r.x),ou(r,t)&&(c<h||c===h&&(r.x>n.x||r.x===n.x&&$s(n,r)))&&(n=r,h=c)),r=r.next}while(r!==s);return n}(t,e);if(!n)return e;const r=au(n,t);return js(r,r.next),js(n,n.next)}function $s(t,e){return tu(t.prev,t,e.prev)<0&&tu(e.next,t,t.next)<0}function Ks(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Zs(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function Qs(t,e,n,r,i,o,a,s){return(i-a)*(e-s)>=(t-a)*(o-s)&&(t-a)*(r-s)>=(n-a)*(e-s)&&(n-a)*(o-s)>=(i-a)*(r-s)}function Js(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&nu(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(ou(t,e)&&ou(e,t)&&function(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(tu(t.prev,t,e.prev)||tu(t,e.prev,e))||eu(t,e)&&tu(t.prev,t,t.next)>0&&tu(e.prev,e,e.next)>0)}function tu(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function eu(t,e){return t.x===e.x&&t.y===e.y}function nu(t,e,n,r){const i=iu(tu(t,e,n)),o=iu(tu(t,e,r)),a=iu(tu(n,r,t)),s=iu(tu(n,r,e));return i!==o&&a!==s||(!(0!==i||!ru(t,n,e))||(!(0!==o||!ru(t,r,e))||(!(0!==a||!ru(n,t,r))||!(0!==s||!ru(n,e,r)))))}function ru(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function iu(t){return t>0?1:t<0?-1:0}function ou(t,e){return tu(t.prev,t,t.next)<0?tu(t,e,t.next)>=0&&tu(t,t.prev,e)>=0:tu(t,e,t.prev)<0||tu(t,t.next,e)<0}function au(t,e){const n=new lu(t.i,t.x,t.y),r=new lu(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function su(t,e,n,r){const i=new lu(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function uu(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function lu(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class cu{static area(t){const e=t.length;let n=0;for(let r=e-1,i=0;i<e;r=i++)n+=t[r].x*t[i].y-t[i].x*t[r].y;return.5*n}static isClockWise(t){return cu.area(t)<0}static triangulateShape(t,e){const n=[],r=[],i=[];hu(t),du(n,t);let o=t.length;e.forEach(hu);for(let t=0;t<e.length;t++)r.push(o),o+=e[t].length,du(n,e[t]);const a=Bs(n,r);for(let t=0;t<a.length;t+=3)i.push(a.slice(t,t+3));return i}}function hu(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function du(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class fu extends Yn{constructor(t=new Fs([new jt(.5,.5),new jt(-.5,.5),new jt(-.5,-.5),new jt(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,r=[],i=[];for(let e=0,n=t.length;e<n;e++){o(t[e])}function o(t){const o=[],a=void 0!==e.curveSegments?e.curveSegments:12,s=void 0!==e.steps?e.steps:1,u=void 0!==e.depth?e.depth:1;let l=void 0===e.bevelEnabled||e.bevelEnabled,c=void 0!==e.bevelThickness?e.bevelThickness:.2,h=void 0!==e.bevelSize?e.bevelSize:c-.1,d=void 0!==e.bevelOffset?e.bevelOffset:0,f=void 0!==e.bevelSegments?e.bevelSegments:3;const p=e.extrudePath,m=void 0!==e.UVGenerator?e.UVGenerator:pu;let g,v,y,b,x,w=!1;p&&(g=p.getSpacedPoints(s),w=!0,l=!1,v=p.computeFrenetFrames(s,!1),y=new ce,b=new ce,x=new ce),l||(f=0,c=0,h=0,d=0);const _=t.extractPoints(a);let S=_.shape;const E=_.holes;if(!cu.isClockWise(S)){S=S.reverse();for(let t=0,e=E.length;t<e;t++){const e=E[t];cu.isClockWise(e)&&(E[t]=e.reverse())}}const A=cu.triangulateShape(S,E),M=S;for(let t=0,e=E.length;t<e;t++){const e=E[t];S=S.concat(e)}function C(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().addScaledVector(e,n)}const T=S.length,k=A.length;function I(t,e,n){let r,i,o;const a=t.x-e.x,s=t.y-e.y,u=n.x-t.x,l=n.y-t.y,c=a*a+s*s,h=a*l-s*u;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(c),d=Math.sqrt(u*u+l*l),f=e.x-s/h,p=e.y+a/h,m=((n.x-l/d-f)*l-(n.y+u/d-p)*u)/(a*l-s*u);r=f+a*m-t.x,i=p+s*m-t.y;const g=r*r+i*i;if(g<=2)return new jt(r,i);o=Math.sqrt(g/2)}else{let t=!1;a>Number.EPSILON?u>Number.EPSILON&&(t=!0):a<-Number.EPSILON?u<-Number.EPSILON&&(t=!0):Math.sign(s)===Math.sign(l)&&(t=!0),t?(r=-s,i=a,o=Math.sqrt(c)):(r=a,i=s,o=Math.sqrt(c/2))}return new jt(r/o,i/o)}const N=[];for(let t=0,e=M.length,n=e-1,r=t+1;t<e;t++,n++,r++)n===e&&(n=0),r===e&&(r=0),N[t]=I(M[t],M[n],M[r]);const P=[];let O,L=N.concat();for(let t=0,e=E.length;t<e;t++){const e=E[t];O=[];for(let t=0,n=e.length,r=n-1,i=t+1;t<n;t++,r++,i++)r===n&&(r=0),i===n&&(i=0),O[t]=I(e[t],e[r],e[i]);P.push(O),L=L.concat(O)}for(let t=0;t<f;t++){const e=t/f,n=c*Math.cos(e*Math.PI/2),r=h*Math.sin(e*Math.PI/2)+d;for(let t=0,e=M.length;t<e;t++){const e=C(M[t],N[t],r);z(e.x,e.y,-n)}for(let t=0,e=E.length;t<e;t++){const e=E[t];O=P[t];for(let t=0,i=e.length;t<i;t++){const i=C(e[t],O[t],r);z(i.x,i.y,-n)}}}const R=h+d;for(let t=0;t<T;t++){const e=l?C(S[t],L[t],R):S[t];w?(b.copy(v.normals[0]).multiplyScalar(e.x),y.copy(v.binormals[0]).multiplyScalar(e.y),x.copy(g[0]).add(b).add(y),z(x.x,x.y,x.z)):z(e.x,e.y,0)}for(let t=1;t<=s;t++)for(let e=0;e<T;e++){const n=l?C(S[e],L[e],R):S[e];w?(b.copy(v.normals[t]).multiplyScalar(n.x),y.copy(v.binormals[t]).multiplyScalar(n.y),x.copy(g[t]).add(b).add(y),z(x.x,x.y,x.z)):z(n.x,n.y,u/s*t)}for(let t=f-1;t>=0;t--){const e=t/f,n=c*Math.cos(e*Math.PI/2),r=h*Math.sin(e*Math.PI/2)+d;for(let t=0,e=M.length;t<e;t++){const e=C(M[t],N[t],r);z(e.x,e.y,u+n)}for(let t=0,e=E.length;t<e;t++){const e=E[t];O=P[t];for(let t=0,i=e.length;t<i;t++){const i=C(e[t],O[t],r);w?z(i.x,i.y+g[s-1].y,g[s-1].x+n):z(i.x,i.y,u+n)}}}function D(t,e){let n=t.length;for(;--n>=0;){const r=n;let i=n-1;i<0&&(i=t.length-1);for(let t=0,n=s+2*f;t<n;t++){const n=T*t,o=T*(t+1);B(e+r+n,e+i+n,e+i+o,e+r+o)}}}function z(t,e,n){o.push(t),o.push(e),o.push(n)}function F(t,e,i){U(t),U(e),U(i);const o=r.length/3,a=m.generateTopUV(n,r,o-3,o-2,o-1);j(a[0]),j(a[1]),j(a[2])}function B(t,e,i,o){U(t),U(e),U(o),U(e),U(i),U(o);const a=r.length/3,s=m.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);j(s[0]),j(s[1]),j(s[3]),j(s[1]),j(s[2]),j(s[3])}function U(t){r.push(o[3*t+0]),r.push(o[3*t+1]),r.push(o[3*t+2])}function j(t){i.push(t.x),i.push(t.y)}!function(){const t=r.length/3;if(l){let t=0,e=T*t;for(let t=0;t<k;t++){const n=A[t];F(n[2]+e,n[1]+e,n[0]+e)}t=s+2*f,e=T*t;for(let t=0;t<k;t++){const n=A[t];F(n[0]+e,n[1]+e,n[2]+e)}}else{for(let t=0;t<k;t++){const e=A[t];F(e[2],e[1],e[0])}for(let t=0;t<k;t++){const e=A[t];F(e[0]+T*s,e[1]+T*s,e[2]+T*s)}}n.addGroup(t,r.length/3-t,0)}(),function(){const t=r.length/3;let e=0;D(M,e),e+=M.length;for(let t=0,n=E.length;t<n;t++){const n=E[t];D(n,e),e+=n.length}n.addGroup(t,r.length/3-t,1)}()}this.setAttribute("position",new Bn(r,3)),this.setAttribute("uv",new Bn(i,2)),this.computeVertexNormals()}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return function(t,e,n){if(n.shapes=[],Array.isArray(t))for(let e=0,r=t.length;e<r;e++){const r=t[e];n.shapes.push(r.uuid)}else n.shapes.push(t.uuid);n.options=Object.assign({},e),void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,t)}static fromJSON(t,e){const n=[];for(let r=0,i=t.shapes.length;r<i;r++){const i=e[t.shapes[r]];n.push(i)}const r=t.options.extrudePath;return void 0!==r&&(t.options.extrudePath=(new Rs[r.type]).fromJSON(r)),new fu(n,t.options)}}const pu={generateTopUV:function(t,e,n,r,i){const o=e[3*n],a=e[3*n+1],s=e[3*r],u=e[3*r+1],l=e[3*i],c=e[3*i+1];return[new jt(o,a),new jt(s,u),new jt(l,c)]},generateSideWallUV:function(t,e,n,r,i,o){const a=e[3*n],s=e[3*n+1],u=e[3*n+2],l=e[3*r],c=e[3*r+1],h=e[3*r+2],d=e[3*i],f=e[3*i+1],p=e[3*i+2],m=e[3*o],g=e[3*o+1],v=e[3*o+2];return Math.abs(s-c)<Math.abs(a-l)?[new jt(a,1-u),new jt(l,1-h),new jt(d,1-p),new jt(m,1-v)]:[new jt(s,1-u),new jt(c,1-h),new jt(f,1-p),new jt(g,1-v)]}};class mu extends Yn{constructor(t=1,e=32,n=16,r=0,i=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const s=Math.min(o+a,Math.PI);let u=0;const l=[],c=new ce,h=new ce,d=[],f=[],p=[],m=[];for(let d=0;d<=n;d++){const g=[],v=d/n;let y=0;0===d&&0===o?y=.5/e:d===n&&s===Math.PI&&(y=-.5/e);for(let n=0;n<=e;n++){const s=n/e;c.x=-t*Math.cos(r+s*i)*Math.sin(o+v*a),c.y=t*Math.cos(o+v*a),c.z=t*Math.sin(r+s*i)*Math.sin(o+v*a),f.push(c.x,c.y,c.z),h.copy(c).normalize(),p.push(h.x,h.y,h.z),m.push(s+y,1-v),g.push(u++)}l.push(g)}for(let t=0;t<n;t++)for(let r=0;r<e;r++){const e=l[t][r+1],i=l[t][r],a=l[t+1][r],u=l[t+1][r+1];(0!==t||o>0)&&d.push(e,i,u),(t!==n-1||s<Math.PI)&&d.push(i,a,u)}this.setIndex(d),this.setAttribute("position",new Bn(f,3)),this.setAttribute("normal",new Bn(p,3)),this.setAttribute("uv",new Bn(m,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new mu(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class gu extends Mn{constructor(t){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Nn(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}}class vu extends Mn{constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Nn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Nn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new jt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class yu extends vu{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new jt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Pt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Nn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Nn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Nn(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(t)}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}function bu(t,e,n){return wu(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)}function xu(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)}function wu(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function _u(t){const e=t.length,n=new Array(e);for(let t=0;t!==e;++t)n[t]=t;return n.sort((function(e,n){return t[e]-t[n]})),n}function Su(t,e,n){const r=t.length,i=new t.constructor(r);for(let o=0,a=0;a!==r;++o){const r=n[o]*e;for(let n=0;n!==e;++n)i[a++]=t[r+n]}return i}function Eu(t,e,n,r){let i=1,o=t[0];for(;void 0!==o&&void 0===o[r];)o=t[i++];if(void 0===o)return;let a=o[r];if(void 0!==a)if(Array.isArray(a))do{a=o[r],void 0!==a&&(e.push(o.time),n.push.apply(n,a)),o=t[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[r],void 0!==a&&(e.push(o.time),a.toArray(n,n.length)),o=t[i++]}while(void 0!==o);else do{a=o[r],void 0!==a&&(e.push(o.time),n.push(a)),o=t[i++]}while(void 0!==o)}class Au{constructor(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,r=e[n],i=e[n-1];t:{e:{let o;n:{r:if(!(t<r)){for(let o=n+2;;){if(void 0===r){if(t<i)break r;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(i=r,r=e[++n],t<r)break e}o=e.length;break n}if(t>=i)break t;{const a=e[1];t<a&&(n=2,i=a);for(let o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===o)break;if(r=i,i=e[--n-1],t>=i)break e}o=n,n=0}}for(;n<o;){const r=n+o>>>1;t<e[r]?o=r:n=r+1}if(r=e[n],i=e[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r;for(let t=0;t!==r;++t)e[t]=n[i+t];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Mu extends Au{constructor(t,e,n,r){super(t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ht,endingEnd:ht}}intervalChanged_(t,e,n){const r=this.parameterPositions;let i=t-2,o=t+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case dt:i=t,a=2*e-n;break;case ft:i=r.length-2,a=e+r[i]-r[i+1];break;default:i=t,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case dt:o=t,s=2*n-e;break;case ft:o=1,s=n+r[1]-r[0];break;default:o=t-1,s=e}const u=.5*(n-e),l=this.valueSize;this._weightPrev=u/(e-a),this._weightNext=u/(s-n),this._offsetPrev=i*l,this._offsetNext=o*l}interpolate_(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,u=s-a,l=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(n-e)/(r-e),p=f*f,m=p*f,g=-h*m+2*h*p-h*f,v=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*f+1,y=(-1-d)*m+(1.5+d)*p+.5*f,b=d*m-d*p;for(let t=0;t!==a;++t)i[t]=g*o[l+t]+v*o[u+t]+y*o[s+t]+b*o[c+t];return i}}class Cu extends Au{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,u=s-a,l=(n-e)/(r-e),c=1-l;for(let t=0;t!==a;++t)i[t]=o[u+t]*c+o[s+t]*l;return i}}class Tu extends Au{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class ku{constructor(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=xu(e,this.TimeBufferType),this.values=xu(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:xu(t.times,Array),values:xu(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(n.interpolation=e)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new Tu(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new Cu(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new Mu(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case ut:e=this.InterpolantFactoryMethodDiscrete;break;case lt:e=this.InterpolantFactoryMethodLinear;break;case ct:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ut;case this.InterpolantFactoryMethodLinear:return lt;case this.InterpolantFactoryMethodSmooth:return ct}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]*=t}return this}trim(t,e){const n=this.times,r=n.length;let i=0,o=r-1;for(;i!==r&&n[i]<t;)++i;for(;-1!==o&&n[o]>e;)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);const t=this.getValueSize();this.times=bu(n,i,o),this.values=bu(this.values,i*t,o*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let e=0;e!==i;e++){const r=n[e];if("number"==typeof r&&isNaN(r)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,e,r),t=!1;break}if(null!==o&&o>r){console.error("THREE.KeyframeTrack: Out of order keys.",this,e,r,o),t=!1;break}o=r}if(void 0!==r&&wu(r))for(let e=0,n=r.length;e!==n;++e){const n=r[e];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,e,n),t=!1;break}}return t}optimize(){const t=bu(this.times),e=bu(this.values),n=this.getValueSize(),r=this.getInterpolation()===ct,i=t.length-1;let o=1;for(let a=1;a<i;++a){let i=!1;const s=t[a];if(s!==t[a+1]&&(1!==a||s!==t[0]))if(r)i=!0;else{const t=a*n,r=t-n,o=t+n;for(let a=0;a!==n;++a){const n=e[t+a];if(n!==e[r+a]||n!==e[o+a]){i=!0;break}}}if(i){if(a!==o){t[o]=t[a];const r=a*n,i=o*n;for(let t=0;t!==n;++t)e[i+t]=e[r+t]}++o}}if(i>0){t[o]=t[i];for(let t=i*n,r=o*n,a=0;a!==n;++a)e[r+a]=e[t+a];++o}return o!==t.length?(this.times=bu(t,0,o),this.values=bu(e,0,o*n)):(this.times=t,this.values=e),this}clone(){const t=bu(this.times,0),e=bu(this.values,0),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}ku.prototype.TimeBufferType=Float32Array,ku.prototype.ValueBufferType=Float32Array,ku.prototype.DefaultInterpolation=lt;class Iu extends ku{}Iu.prototype.ValueTypeName="bool",Iu.prototype.ValueBufferType=Array,Iu.prototype.DefaultInterpolation=ut,Iu.prototype.InterpolantFactoryMethodLinear=void 0,Iu.prototype.InterpolantFactoryMethodSmooth=void 0;class Nu extends ku{}Nu.prototype.ValueTypeName="color";class Pu extends ku{}Pu.prototype.ValueTypeName="number";class Ou extends Au{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-e)/(r-e);let u=t*a;for(let t=u+a;u!==t;u+=4)le.slerpFlat(i,0,o,u-a,o,u,s);return i}}class Lu extends ku{InterpolantFactoryMethodLinear(t){return new Ou(this.times,this.values,this.getValueSize(),t)}}Lu.prototype.ValueTypeName="quaternion",Lu.prototype.DefaultInterpolation=lt,Lu.prototype.InterpolantFactoryMethodSmooth=void 0;class Ru extends ku{}Ru.prototype.ValueTypeName="string",Ru.prototype.ValueBufferType=Array,Ru.prototype.DefaultInterpolation=ut,Ru.prototype.InterpolantFactoryMethodLinear=void 0,Ru.prototype.InterpolantFactoryMethodSmooth=void 0;class Du extends ku{}Du.prototype.ValueTypeName="vector";class zu{constructor(t,e=-1,n,r=2500){this.name=t,this.tracks=n,this.duration=e,this.blendMode=r,this.uuid=Nt(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,r=1/(t.fps||1);for(let t=0,i=n.length;t!==i;++t)e.push(Fu(n[t]).scale(r));const i=new this(t.name,t.duration,e,t.blendMode);return i.uuid=t.uuid,i}static toJSON(t){const e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let t=0,r=n.length;t!==r;++t)e.push(ku.toJSON(n[t]));return r}static CreateFromMorphTargetSequence(t,e,n,r){const i=e.length,o=[];for(let t=0;t<i;t++){let a=[],s=[];a.push((t+i-1)%i,t,(t+1)%i),s.push(0,1,0);const u=_u(a);a=Su(a,1,u),s=Su(s,1,u),r||0!==a[0]||(a.push(i),s.push(s[0])),o.push(new Pu(".morphTargetInfluences["+e[t].name+"]",a,s).scale(1/n))}return new this(t,-1,o)}static findByName(t,e){let n=t;if(!Array.isArray(t)){const e=t;n=e.geometry&&e.geometry.animations||e.animations}for(let t=0;t<n.length;t++)if(n[t].name===e)return n[t];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let e=0,n=t.length;e<n;e++){const n=t[e],o=n.name.match(i);if(o&&o.length>1){const t=o[1];let e=r[t];e||(r[t]=e=[]),e.push(n)}}const o=[];for(const t in r)o.push(this.CreateFromMorphTargetSequence(t,r[t],e,n));return o}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(t,e,n,r,i){if(0!==n.length){const o=[],a=[];Eu(n,o,a,r),0!==o.length&&i.push(new t(e,o,a))}},r=[],i=t.name||"default",o=t.fps||30,a=t.blendMode;let s=t.length||-1;const u=t.hierarchy||[];for(let t=0;t<u.length;t++){const i=u[t].keys;if(i&&0!==i.length)if(i[0].morphTargets){const t={};let e;for(e=0;e<i.length;e++)if(i[e].morphTargets)for(let n=0;n<i[e].morphTargets.length;n++)t[i[e].morphTargets[n]]=-1;for(const n in t){const t=[],o=[];for(let r=0;r!==i[e].morphTargets.length;++r){const r=i[e];t.push(r.time),o.push(r.morphTarget===n?1:0)}r.push(new Pu(".morphTargetInfluence["+n+"]",t,o))}s=t.length*o}else{const o=".bones["+e[t].name+"]";n(Du,o+".position",i,"pos",r),n(Lu,o+".quaternion",i,"rot",r),n(Du,o+".scale",i,"scl",r)}}if(0===r.length)return null;return new this(i,s,r,a)}resetDuration(){let t=0;for(let e=0,n=this.tracks.length;e!==n;++e){const n=this.tracks[e];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Fu(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Pu;case"vector":case"vector2":case"vector3":case"vector4":return Du;case"color":return Nu;case"quaternion":return Lu;case"bool":case"boolean":return Iu;case"string":return Ru}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){const e=[],n=[];Eu(t.keys,e,n,"value"),t.times=e,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const Bu={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class Uu{constructor(t,e,n){const r=this;let i,o=!1,a=0,s=0;const u=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){s++,!1===o&&void 0!==r.onStart&&r.onStart(t,a,s),o=!0},this.itemEnd=function(t){a++,void 0!==r.onProgress&&r.onProgress(t,a,s),a===s&&(o=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return i?i(t):t},this.setURLModifier=function(t){return i=t,this},this.addHandler=function(t,e){return u.push(t,e),this},this.removeHandler=function(t){const e=u.indexOf(t);return-1!==e&&u.splice(e,2),this},this.getHandler=function(t){for(let e=0,n=u.length;e<n;e+=2){const n=u[e],r=u[e+1];if(n.global&&(n.lastIndex=0),n.test(t))return r}return null}}}const ju=new Uu;class Vu{constructor(t){this.manager=void 0!==t?t:ju,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise((function(r,i){n.load(t,r,e,i)}))}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}const Hu={};class Gu extends Error{constructor(t,e){super(t),this.response=e}}class Wu extends Vu{constructor(t){super(t)}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=Bu.get(t);if(void 0!==i)return this.manager.itemStart(t),setTimeout((()=>{e&&e(i),this.manager.itemEnd(t)}),0),i;if(void 0!==Hu[t])return void Hu[t].push({onLoad:e,onProgress:n,onError:r});Hu[t]=[],Hu[t].push({onLoad:e,onProgress:n,onError:r});const o=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,s=this.responseType;fetch(o).then((e=>{if(200===e.status||0===e.status){if(0===e.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===e.body||void 0===e.body.getReader)return e;const n=Hu[t],r=e.body.getReader(),i=e.headers.get("Content-Length")||e.headers.get("X-File-Size"),o=i?parseInt(i):0,a=0!==o;let s=0;const u=new ReadableStream({start(t){!function e(){r.read().then((({done:r,value:i})=>{if(r)t.close();else{s+=i.byteLength;const r=new ProgressEvent("progress",{lengthComputable:a,loaded:s,total:o});for(let t=0,e=n.length;t<e;t++){const e=n[t];e.onProgress&&e.onProgress(r)}t.enqueue(i),e()}}))}()}});return new Response(u)}throw new Gu(`fetch for "${e.url}" responded with ${e.status}: ${e.statusText}`,e)})).then((t=>{switch(s){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"document":return t.text().then((t=>(new DOMParser).parseFromString(t,a)));case"json":return t.json();default:if(void 0===a)return t.text();{const e=/charset="?([^;"\s]*)"?/i.exec(a),n=e&&e[1]?e[1].toLowerCase():void 0,r=new TextDecoder(n);return t.arrayBuffer().then((t=>r.decode(t)))}}})).then((e=>{Bu.add(t,e);const n=Hu[t];delete Hu[t];for(let t=0,r=n.length;t<r;t++){const r=n[t];r.onLoad&&r.onLoad(e)}})).catch((e=>{const n=Hu[t];if(void 0===n)throw this.manager.itemError(t),e;delete Hu[t];for(let t=0,r=n.length;t<r;t++){const r=n[t];r.onError&&r.onError(e)}this.manager.itemError(t)})).finally((()=>{this.manager.itemEnd(t)})),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class Xu extends Vu{constructor(t){super(t)}load(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=this,o=Bu.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;const a=Wt("img");function s(){l(),Bu.add(t,this),e&&e(this),i.manager.itemEnd(t)}function u(e){l(),r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}function l(){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",s,!1),a.addEventListener("error",u,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(t),a.src=t,a}}class Yu extends Vu{constructor(t){super(t)}load(t,e,n,r){const i=new ie,o=new Xu(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,(function(t){i.image=t,i.needsUpdate=!0,void 0!==e&&e(i)}),n,r),i}}class qu extends dn{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new Nn(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}const $u=new Ue,Ku=new ce,Zu=new ce;class Qu{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new jt(512,512),this.map=null,this.mapPass=null,this.matrix=new Ue,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Nr,this._frameExtents=new jt(1,1),this._viewportCount=1,this._viewports=[new oe(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;Ku.setFromMatrixPosition(t.matrixWorld),e.position.copy(Ku),Zu.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(Zu),e.updateMatrixWorld(),$u.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix($u),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply($u)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class Ju extends Qu{constructor(){super(new xr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,n=2*It*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=t.distance||e.far;n===e.fov&&r===e.aspect&&i===e.far||(e.fov=n,e.aspect=r,e.far=i,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class tl extends qu{constructor(t,e,n=0,r=Math.PI/3,i=0,o=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(dn.DEFAULT_UP),this.updateMatrix(),this.target=new dn,this.distance=n,this.angle=r,this.penumbra=i,this.decay=o,this.map=null,this.shadow=new Ju}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const el=new Ue,nl=new ce,rl=new ce;class il extends Qu{constructor(){super(new xr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new jt(4,2),this._viewportCount=6,this._viewports=[new oe(2,1,1,1),new oe(0,1,1,1),new oe(3,1,1,1),new oe(1,1,1,1),new oe(3,0,1,1),new oe(1,0,1,1)],this._cubeDirections=[new ce(1,0,0),new ce(-1,0,0),new ce(0,0,1),new ce(0,0,-1),new ce(0,1,0),new ce(0,-1,0)],this._cubeUps=[new ce(0,1,0),new ce(0,1,0),new ce(0,1,0),new ce(0,1,0),new ce(0,0,1),new ce(0,0,-1)]}updateMatrices(t,e=0){const n=this.camera,r=this.matrix,i=t.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),nl.setFromMatrixPosition(t.matrixWorld),n.position.copy(nl),rl.copy(n.position),rl.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(rl),n.updateMatrixWorld(),r.makeTranslation(-nl.x,-nl.y,-nl.z),el.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(el)}}class ol extends qu{constructor(t,e,n=0,r=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new il}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class al extends Qu{constructor(){super(new Wr(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class sl extends qu{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(dn.DEFAULT_UP),this.updateMatrix(),this.target=new dn,this.shadow=new al}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class ul extends qu{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class ll{static decodeText(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);let e="";for(let n=0,r=t.length;n<r;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(t){return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return-1===e?"./":t.slice(0,e+1)}static resolveURL(t,e){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class cl extends Vu{constructor(t){super(t),this.isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=this,o=Bu.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(t,a).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){Bu.add(t,n),e&&e(n),i.manager.itemEnd(t)})).catch((function(e){r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)})),i.manager.itemStart(t)}}const hl="\\[\\]\\.:\\/",dl=new RegExp("["+hl+"]","g"),fl="[^"+hl+"]",pl="[^"+hl.replace("\\.","")+"]",ml=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",fl)+/(WCOD+)?/.source.replace("WCOD",pl)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",fl)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",fl)+"$"),gl=["material","materials","bones","map"];class vl{constructor(t,e,n){this.path=e,this.parsedPath=n||vl.parseTrackName(e),this.node=vl.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new vl.Composite(t,e,n):new vl(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(dl,"")}static parseTrackName(t){const e=ml.exec(t);if(null===e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const t=n.nodeName.substring(r+1);-1!==gl.indexOf(t)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=t)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(void 0===e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){const n=function(t){for(let r=0;r<t.length;r++){const i=t[r];if(i.name===e||i.uuid===e)return i;const o=n(i.children);if(o)return o}return null},r=n(t.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)t[e++]=n[r]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,r=e.propertyName;let i=e.propertyIndex;if(t||(t=vl.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===r){r=e;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==r){if(void 0===t[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[r]}}const o=t[r];if(void 0===o){const n=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",t)}let a=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[i]&&(i=t.morphTargetDictionary[i])}s=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(s=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}vl.Composite=class{constructor(t,e,n){const r=n||vl.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}},vl.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},vl.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},vl.prototype.GetterByBindingType=[vl.prototype._getValue_direct,vl.prototype._getValue_array,vl.prototype._getValue_arrayElement,vl.prototype._getValue_toArray],vl.prototype.SetterByBindingTypeAndVersioning=[[vl.prototype._setValue_direct,vl.prototype._setValue_direct_setNeedsUpdate,vl.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[vl.prototype._setValue_array,vl.prototype._setValue_array_setNeedsUpdate,vl.prototype._setValue_array_setMatrixWorldNeedsUpdate],[vl.prototype._setValue_arrayElement,vl.prototype._setValue_arrayElement_setNeedsUpdate,vl.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[vl.prototype._setValue_fromArray,vl.prototype._setValue_fromArray_setNeedsUpdate,vl.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];new Float32Array(1);class yl{constructor(t,e,n=0,r=1/0){this.ray=new Be(t,e),this.near=n,this.far=r,this.camera=null,this.layers=new Ze,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}intersectObject(t,e=!0,n=[]){return xl(t,this,n,e),n.sort(bl),n}intersectObjects(t,e=!0,n=[]){for(let r=0,i=t.length;r<i;r++)xl(t[r],this,n,e);return n.sort(bl),n}}function bl(t,e){return t.distance-e.distance}function xl(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),!0===r){const r=t.children;for(let t=0,i=r.length;t<i;t++)xl(r[t],e,n,!0)}}class wl{constructor(t=1,e=0,n=0){return this.radius=t,this.phi=e,this.theta=n,this}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){const t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(Pt(e/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class _l extends ls{constructor(t=10,e=10,n=4473924,r=8947848){n=new Nn(n),r=new Nn(r);const i=e/2,o=t/e,a=t/2,s=[],u=[];for(let t=0,l=0,c=-a;t<=e;t++,c+=o){s.push(-a,0,c,a,0,c),s.push(c,0,-a,c,0,a);const e=t===i?n:r;e.toArray(u,l),l+=3,e.toArray(u,l),l+=3,e.toArray(u,l),l+=3,e.toArray(u,l),l+=3}const l=new Yn;l.setAttribute("position",new Bn(s,3)),l.setAttribute("color",new Bn(u,3));super(l,new ts({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:r}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=r)},17024:(t,e,n)=>{"use strict";n.d(e,{N:()=>s});var r=n(39437);const i={type:"change"},o={type:"start"},a={type:"end"};class s extends r.Qev{constructor(t,e){super(),this.object=t,this.domElement=e,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new r.Pq0,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:r.kBv.ROTATE,MIDDLE:r.kBv.DOLLY,RIGHT:r.kBv.PAN},this.touches={ONE:r.wtR.ROTATE,TWO:r.wtR.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return c.phi},this.getAzimuthalAngle=function(){return c.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(t){t.addEventListener("keydown",X),this._domElementKeyEvents=t},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",X),this._domElementKeyEvents=null},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(i),n.update(),u=s.NONE},this.update=function(){const e=new r.Pq0,o=(new r.PTz).setFromUnitVectors(t.up,new r.Pq0(0,1,0)),a=o.clone().invert(),m=new r.Pq0,g=new r.PTz,v=2*Math.PI;return function(){const t=n.object.position;e.copy(t).sub(n.target),e.applyQuaternion(o),c.setFromVector3(e),n.autoRotate&&u===s.NONE&&C(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(c.theta+=h.theta*n.dampingFactor,c.phi+=h.phi*n.dampingFactor):(c.theta+=h.theta,c.phi+=h.phi);let r=n.minAzimuthAngle,y=n.maxAzimuthAngle;return isFinite(r)&&isFinite(y)&&(r<-Math.PI?r+=v:r>Math.PI&&(r-=v),y<-Math.PI?y+=v:y>Math.PI&&(y-=v),c.theta=r<=y?Math.max(r,Math.min(y,c.theta)):c.theta>(r+y)/2?Math.max(r,c.theta):Math.min(y,c.theta)),c.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,c.phi)),c.makeSafe(),c.radius*=d,c.radius=Math.max(n.minDistance,Math.min(n.maxDistance,c.radius)),!0===n.enableDamping?n.target.addScaledVector(f,n.dampingFactor):n.target.add(f),e.setFromSpherical(c),e.applyQuaternion(a),t.copy(n.target).add(e),n.object.lookAt(n.target),!0===n.enableDamping?(h.theta*=1-n.dampingFactor,h.phi*=1-n.dampingFactor,f.multiplyScalar(1-n.dampingFactor)):(h.set(0,0,0),f.set(0,0,0)),d=1,!!(p||m.distanceToSquared(n.object.position)>l||8*(1-g.dot(n.object.quaternion))>l)&&(n.dispatchEvent(i),m.copy(n.object.position),g.copy(n.object.quaternion),p=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",Y),n.domElement.removeEventListener("pointerdown",V),n.domElement.removeEventListener("pointercancel",G),n.domElement.removeEventListener("wheel",W),n.domElement.removeEventListener("pointermove",H),n.domElement.removeEventListener("pointerup",G),null!==n._domElementKeyEvents&&(n._domElementKeyEvents.removeEventListener("keydown",X),n._domElementKeyEvents=null)};const n=this,s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let u=s.NONE;const l=1e-6,c=new r.YHV,h=new r.YHV;let d=1;const f=new r.Pq0;let p=!1;const m=new r.I9Y,g=new r.I9Y,v=new r.I9Y,y=new r.I9Y,b=new r.I9Y,x=new r.I9Y,w=new r.I9Y,_=new r.I9Y,S=new r.I9Y,E=[],A={};function M(){return Math.pow(.95,n.zoomSpeed)}function C(t){h.theta-=t}function T(t){h.phi-=t}const k=function(){const t=new r.Pq0;return function(e,n){t.setFromMatrixColumn(n,0),t.multiplyScalar(-e),f.add(t)}}(),I=function(){const t=new r.Pq0;return function(e,r){!0===n.screenSpacePanning?t.setFromMatrixColumn(r,1):(t.setFromMatrixColumn(r,0),t.crossVectors(n.object.up,t)),t.multiplyScalar(e),f.add(t)}}(),N=function(){const t=new r.Pq0;return function(e,r){const i=n.domElement;if(n.object.isPerspectiveCamera){const o=n.object.position;t.copy(o).sub(n.target);let a=t.length();a*=Math.tan(n.object.fov/2*Math.PI/180),k(2*e*a/i.clientHeight,n.object.matrix),I(2*r*a/i.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(k(e*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),I(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function P(t){n.object.isPerspectiveCamera?d/=t:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*t)),n.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function O(t){n.object.isPerspectiveCamera?d*=t:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/t)),n.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function L(t){m.set(t.clientX,t.clientY)}function R(t){y.set(t.clientX,t.clientY)}function D(){if(1===E.length)m.set(E[0].pageX,E[0].pageY);else{const t=.5*(E[0].pageX+E[1].pageX),e=.5*(E[0].pageY+E[1].pageY);m.set(t,e)}}function z(){if(1===E.length)y.set(E[0].pageX,E[0].pageY);else{const t=.5*(E[0].pageX+E[1].pageX),e=.5*(E[0].pageY+E[1].pageY);y.set(t,e)}}function F(){const t=E[0].pageX-E[1].pageX,e=E[0].pageY-E[1].pageY,n=Math.sqrt(t*t+e*e);w.set(0,n)}function B(t){if(1==E.length)g.set(t.pageX,t.pageY);else{const e=$(t),n=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);g.set(n,r)}v.subVectors(g,m).multiplyScalar(n.rotateSpeed);const e=n.domElement;C(2*Math.PI*v.x/e.clientHeight),T(2*Math.PI*v.y/e.clientHeight),m.copy(g)}function U(t){if(1===E.length)b.set(t.pageX,t.pageY);else{const e=$(t),n=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);b.set(n,r)}x.subVectors(b,y).multiplyScalar(n.panSpeed),N(x.x,x.y),y.copy(b)}function j(t){const e=$(t),r=t.pageX-e.x,i=t.pageY-e.y,o=Math.sqrt(r*r+i*i);_.set(0,o),S.set(0,Math.pow(_.y/w.y,n.zoomSpeed)),P(S.y),w.copy(_)}function V(t){!1!==n.enabled&&(0===E.length&&(n.domElement.setPointerCapture(t.pointerId),n.domElement.addEventListener("pointermove",H),n.domElement.addEventListener("pointerup",G)),function(t){E.push(t)}(t),"touch"===t.pointerType?function(t){switch(q(t),E.length){case 1:switch(n.touches.ONE){case r.wtR.ROTATE:if(!1===n.enableRotate)return;D(),u=s.TOUCH_ROTATE;break;case r.wtR.PAN:if(!1===n.enablePan)return;z(),u=s.TOUCH_PAN;break;default:u=s.NONE}break;case 2:switch(n.touches.TWO){case r.wtR.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&F(),n.enablePan&&z(),u=s.TOUCH_DOLLY_PAN;break;case r.wtR.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&F(),n.enableRotate&&D(),u=s.TOUCH_DOLLY_ROTATE;break;default:u=s.NONE}break;default:u=s.NONE}u!==s.NONE&&n.dispatchEvent(o)}(t):function(t){let e;switch(t.button){case 0:e=n.mouseButtons.LEFT;break;case 1:e=n.mouseButtons.MIDDLE;break;case 2:e=n.mouseButtons.RIGHT;break;default:e=-1}switch(e){case r.kBv.DOLLY:if(!1===n.enableZoom)return;!function(t){w.set(t.clientX,t.clientY)}(t),u=s.DOLLY;break;case r.kBv.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===n.enablePan)return;R(t),u=s.PAN}else{if(!1===n.enableRotate)return;L(t),u=s.ROTATE}break;case r.kBv.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===n.enableRotate)return;L(t),u=s.ROTATE}else{if(!1===n.enablePan)return;R(t),u=s.PAN}break;default:u=s.NONE}u!==s.NONE&&n.dispatchEvent(o)}(t))}function H(t){!1!==n.enabled&&("touch"===t.pointerType?function(t){switch(q(t),u){case s.TOUCH_ROTATE:if(!1===n.enableRotate)return;B(t),n.update();break;case s.TOUCH_PAN:if(!1===n.enablePan)return;U(t),n.update();break;case s.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(t){n.enableZoom&&j(t),n.enablePan&&U(t)}(t),n.update();break;case s.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(t){n.enableZoom&&j(t),n.enableRotate&&B(t)}(t),n.update();break;default:u=s.NONE}}(t):function(t){switch(u){case s.ROTATE:if(!1===n.enableRotate)return;!function(t){g.set(t.clientX,t.clientY),v.subVectors(g,m).multiplyScalar(n.rotateSpeed);const e=n.domElement;C(2*Math.PI*v.x/e.clientHeight),T(2*Math.PI*v.y/e.clientHeight),m.copy(g),n.update()}(t);break;case s.DOLLY:if(!1===n.enableZoom)return;!function(t){_.set(t.clientX,t.clientY),S.subVectors(_,w),S.y>0?P(M()):S.y<0&&O(M()),w.copy(_),n.update()}(t);break;case s.PAN:if(!1===n.enablePan)return;!function(t){b.set(t.clientX,t.clientY),x.subVectors(b,y).multiplyScalar(n.panSpeed),N(x.x,x.y),y.copy(b),n.update()}(t)}}(t))}function G(t){!function(t){delete A[t.pointerId];for(let e=0;e<E.length;e++)if(E[e].pointerId==t.pointerId)return void E.splice(e,1)}(t),0===E.length&&(n.domElement.releasePointerCapture(t.pointerId),n.domElement.removeEventListener("pointermove",H),n.domElement.removeEventListener("pointerup",G)),n.dispatchEvent(a),u=s.NONE}function W(t){!1!==n.enabled&&!1!==n.enableZoom&&u===s.NONE&&(t.preventDefault(),n.dispatchEvent(o),function(t){t.deltaY<0?O(M()):t.deltaY>0&&P(M()),n.update()}(t),n.dispatchEvent(a))}function X(t){!1!==n.enabled&&!1!==n.enablePan&&function(t){let e=!1;switch(t.code){case n.keys.UP:t.ctrlKey||t.metaKey||t.shiftKey?T(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):N(0,n.keyPanSpeed),e=!0;break;case n.keys.BOTTOM:t.ctrlKey||t.metaKey||t.shiftKey?T(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):N(0,-n.keyPanSpeed),e=!0;break;case n.keys.LEFT:t.ctrlKey||t.metaKey||t.shiftKey?C(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):N(n.keyPanSpeed,0),e=!0;break;case n.keys.RIGHT:t.ctrlKey||t.metaKey||t.shiftKey?C(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):N(-n.keyPanSpeed,0),e=!0}e&&(t.preventDefault(),n.update())}(t)}function Y(t){!1!==n.enabled&&t.preventDefault()}function q(t){let e=A[t.pointerId];void 0===e&&(e=new r.I9Y,A[t.pointerId]=e),e.set(t.pageX,t.pageY)}function $(t){const e=t.pointerId===E[0].pointerId?E[1]:E[0];return A[e.pointerId]}n.domElement.addEventListener("contextmenu",Y),n.domElement.addEventListener("pointerdown",V),n.domElement.addEventListener("pointercancel",G),n.domElement.addEventListener("wheel",W,{passive:!1}),this.update()}}},53912:(t,e,n)=>{"use strict";n.d(e,{j:()=>a});var r=n(39437);const i=new r.Pq0;function o(t,e,n,r,o,a){const s=2*Math.PI*o/4,u=Math.max(a-2*o,0),l=Math.PI/4;i.copy(e),i[r]=0,i.normalize();const c=.5*s/(s+u),h=1-i.angleTo(t)/l;if(1===Math.sign(i[n]))return h*c;return u/(s+u)+c+c*(1-h)}class a extends r.iNn{constructor(t=1,e=1,n=1,i=2,a=.1){if(i=2*i+1,a=Math.min(t/2,e/2,n/2,a),super(1,1,1,i,i,i),1===i)return;const s=this.toNonIndexed();this.index=null,this.attributes.position=s.attributes.position,this.attributes.normal=s.attributes.normal,this.attributes.uv=s.attributes.uv;const u=new r.Pq0,l=new r.Pq0,c=new r.Pq0(t,e,n).divideScalar(2).subScalar(a),h=this.attributes.position.array,d=this.attributes.normal.array,f=this.attributes.uv.array,p=h.length/6,m=new r.Pq0,g=.5/i;for(let r=0,i=0;r<h.length;r+=3,i+=2){u.fromArray(h,r),l.copy(u),l.x-=Math.sign(l.x)*g,l.y-=Math.sign(l.y)*g,l.z-=Math.sign(l.z)*g,l.normalize(),h[r+0]=c.x*Math.sign(u.x)+l.x*a,h[r+1]=c.y*Math.sign(u.y)+l.y*a,h[r+2]=c.z*Math.sign(u.z)+l.z*a,d[r+0]=l.x,d[r+1]=l.y,d[r+2]=l.z;switch(Math.floor(r/p)){case 0:m.set(1,0,0),f[i+0]=o(m,l,"z","y",a,n),f[i+1]=1-o(m,l,"y","z",a,e);break;case 1:m.set(-1,0,0),f[i+0]=1-o(m,l,"z","y",a,n),f[i+1]=1-o(m,l,"y","z",a,e);break;case 2:m.set(0,1,0),f[i+0]=1-o(m,l,"x","z",a,t),f[i+1]=o(m,l,"z","x",a,n);break;case 3:m.set(0,-1,0),f[i+0]=1-o(m,l,"x","z",a,t),f[i+1]=1-o(m,l,"z","x",a,n);break;case 4:m.set(0,0,1),f[i+0]=1-o(m,l,"x","y",a,t),f[i+1]=1-o(m,l,"y","x",a,e);break;case 5:m.set(0,0,-1),f[i+0]=o(m,l,"x","y",a,t),f[i+1]=1-o(m,l,"y","x",a,e)}}}}},61728:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var r=n(39437);const i=new WeakMap;class o extends r.aHM{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,e,n,i){const o=new r.Y9S(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,(t=>{this.parse(t,e,i)}),n,i)}parse(t,e,n){this.decodeDracoFile(t,e,null,null,r.er$).catch(n)}decodeDracoFile(t,e,n,i,o=r.Zr2){const a={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!n,vertexColorSpace:o};return this.decodeGeometry(t,a).then(e)}decodeGeometry(t,e){const n=JSON.stringify(e);if(i.has(t)){const e=i.get(t);if(e.key===n)return e.promise;if(0===t.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const o=this.workerNextTaskID++,a=t.byteLength,s=this._getWorker(o,a).then((n=>(r=n,new Promise(((n,i)=>{r._callbacks[o]={resolve:n,reject:i},r.postMessage({type:"decode",id:o,taskConfig:e,buffer:t},[t])}))))).then((t=>this._createGeometry(t.geometry)));return s.catch((()=>!0)).then((()=>{r&&o&&this._releaseTask(r,o)})),i.set(t,{key:n,promise:s}),s}_createGeometry(t){const e=new r.LoY;t.index&&e.setIndex(new r.THS(t.index.array,1));for(let n=0;n<t.attributes.length;n++){const i=t.attributes[n],o=i.name,a=i.array,s=i.itemSize,u=new r.THS(a,s);"color"===o&&this._assignVertexColorSpace(u,i.vertexColorSpace),e.setAttribute(o,u)}return e}_assignVertexColorSpace(t,e){if(e!==r.er$)return;const n=new r.Q1f;for(let e=0,r=t.count;e<r;e++)n.fromBufferAttribute(t,e).convertSRGBToLinear(),t.setXYZ(e,n.r,n.g,n.b)}_loadLibrary(t,e){const n=new r.Y9S(this.manager);return n.setPath(this.decoderPath),n.setResponseType(e),n.setWithCredentials(this.withCredentials),new Promise(((e,r)=>{n.load(t,e,void 0,r)}))}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const t="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,e=[];return t?e.push(this._loadLibrary("draco_decoder.js","text")):(e.push(this._loadLibrary("draco_wasm_wrapper.js","text")),e.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(e).then((e=>{const n=e[0];t||(this.decoderConfig.wasmBinary=e[1]);const r=a.toString(),i=["/* draco decoder */",n,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([i]))})),this.decoderPending}_getWorker(t,e){return this._initDecoder().then((()=>{if(this.workerPool.length<this.workerLimit){const t=new Worker(this.workerSourceURL);t._callbacks={},t._taskCosts={},t._taskLoad=0,t.postMessage({type:"init",decoderConfig:this.decoderConfig}),t.onmessage=function(e){const n=e.data;switch(n.type){case"decode":t._callbacks[n.id].resolve(n);break;case"error":t._callbacks[n.id].reject(n);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+n.type+'"')}},this.workerPool.push(t)}else this.workerPool.sort((function(t,e){return t._taskLoad>e._taskLoad?-1:1}));const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[t]=e,n._taskLoad+=e,n}))}_releaseTask(t,e){t._taskLoad-=t._taskCosts[e],delete t._callbacks[e],delete t._taskCosts[e]}debug(){console.log("Task load: ",this.workerPool.map((t=>t._taskLoad)))}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,""!==this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),this}}function a(){let t,e;function n(t,e,n,r,i,o){const a=o.num_components(),s=n.num_points()*a,u=s*i.BYTES_PER_ELEMENT,l=function(t,e){switch(e){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32}}(t,i),c=t._malloc(u);e.GetAttributeDataArrayForAllPoints(n,o,l,u,c);const h=new i(t.HEAPF32.buffer,c,s).slice();return t._free(c),{name:r,array:h,itemSize:a}}onmessage=function(r){const i=r.data;switch(i.type){case"init":t=i.decoderConfig,e=new Promise((function(e){t.onModuleLoaded=function(t){e({draco:t})},DracoDecoderModule(t)}));break;case"decode":const r=i.buffer,o=i.taskConfig;e.then((t=>{const e=t.draco,a=new e.Decoder;try{const t=function(t,e,r,i){const o=i.attributeIDs,a=i.attributeTypes;let s,u;const l=e.GetEncodedGeometryType(r);if(l===t.TRIANGULAR_MESH)s=new t.Mesh,u=e.DecodeArrayToMesh(r,r.byteLength,s);else{if(l!==t.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");s=new t.PointCloud,u=e.DecodeArrayToPointCloud(r,r.byteLength,s)}if(!u.ok()||0===s.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+u.error_msg());const c={index:null,attributes:[]};for(const r in o){const u=self[a[r]];let l,h;if(i.useUniqueIDs)h=o[r],l=e.GetAttributeByUniqueId(s,h);else{if(h=e.GetAttributeId(s,t[o[r]]),-1===h)continue;l=e.GetAttribute(s,h)}const d=n(t,e,s,r,u,l);"color"===r&&(d.vertexColorSpace=i.vertexColorSpace),c.attributes.push(d)}l===t.TRIANGULAR_MESH&&(c.index=function(t,e,n){const r=n.num_faces(),i=3*r,o=4*i,a=t._malloc(o);e.GetTrianglesUInt32Array(n,o,a);const s=new Uint32Array(t.HEAPF32.buffer,a,i).slice();return t._free(a),{array:s,itemSize:1}}(t,e,s));return t.destroy(s),c}(e,a,new Int8Array(r),o),s=t.attributes.map((t=>t.array.buffer));t.index&&s.push(t.index.array.buffer),self.postMessage({type:"decode",id:i.id,geometry:t},s)}catch(t){console.error(t),self.postMessage({type:"error",id:i.id,error:t.message})}finally{e.destroy(a)}}))}}}},64092:(t,e,n)=>{"use strict";n.d(e,{B:()=>o});var r=n(39437);function i(t,e){if(e===r.RJ4)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),t;if(e===r.rYR||e===r.O49){let n=t.getIndex();if(null===n){const e=[],r=t.getAttribute("position");if(void 0===r)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t;for(let t=0;t<r.count;t++)e.push(t);t.setIndex(e),n=t.getIndex()}const i=n.count-2,o=[];if(e===r.rYR)for(let t=1;t<=i;t++)o.push(n.getX(0)),o.push(n.getX(t)),o.push(n.getX(t+1));else for(let t=0;t<i;t++)t%2==0?(o.push(n.getX(t)),o.push(n.getX(t+1)),o.push(n.getX(t+2))):(o.push(n.getX(t+2)),o.push(n.getX(t+1)),o.push(n.getX(t)));o.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const a=t.clone();return a.setIndex(o),a.clearGroups(),a}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),t}class o extends r.aHM{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(t){return new h(t)})),this.register((function(t){return new y(t)})),this.register((function(t){return new b(t)})),this.register((function(t){return new x(t)})),this.register((function(t){return new f(t)})),this.register((function(t){return new p(t)})),this.register((function(t){return new m(t)})),this.register((function(t){return new g(t)})),this.register((function(t){return new c(t)})),this.register((function(t){return new v(t)})),this.register((function(t){return new d(t)})),this.register((function(t){return new u(t)})),this.register((function(t){return new w(t)})),this.register((function(t){return new _(t)}))}load(t,e,n,i){const o=this;let a;a=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:r.r6x.extractUrlBase(t),this.manager.itemStart(t);const s=function(e){i?i(e):console.error(e),o.manager.itemError(t),o.manager.itemEnd(t)},u=new r.Y9S(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(t,(function(n){try{o.parse(n,a,(function(n){e(n),o.manager.itemEnd(t)}),s)}catch(t){s(t)}}),n,s)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return-1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this}unregister(t){return-1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,n,r){let i;const o={},a={},u=new TextDecoder;if("string"==typeof t)i=JSON.parse(t);else if(t instanceof ArrayBuffer){if(u.decode(new Uint8Array(t,0,4))===S){try{o[s.KHR_BINARY_GLTF]=new M(t)}catch(t){return void(r&&r(t))}i=JSON.parse(o[s.KHR_BINARY_GLTF].content)}else i=JSON.parse(u.decode(t))}else i=t;if(void 0===i.asset||i.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const c=new Z(i,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let t=0;t<this.pluginCallbacks.length;t++){const e=this.pluginCallbacks[t](c);a[e.name]=e,o[e.name]=!0}if(i.extensionsUsed)for(let t=0;t<i.extensionsUsed.length;++t){const e=i.extensionsUsed[t],n=i.extensionsRequired||[];switch(e){case s.KHR_MATERIALS_UNLIT:o[e]=new l;break;case s.KHR_DRACO_MESH_COMPRESSION:o[e]=new C(i,this.dracoLoader);break;case s.KHR_TEXTURE_TRANSFORM:o[e]=new T;break;case s.KHR_MESH_QUANTIZATION:o[e]=new k;break;default:n.indexOf(e)>=0&&void 0===a[e]&&console.warn('THREE.GLTFLoader: Unknown extension "'+e+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(n,r)}parseAsync(t,e){const n=this;return new Promise((function(r,i){n.parse(t,e,r,i)}))}}function a(){let t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const s={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class u{constructor(t){this.parser=t,this.name=s.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,e=this.parser.json.nodes||[];for(let n=0,r=e.length;n<r;n++){const r=e[n];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&t._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(t){const e=this.parser,n="light:"+t;let i=e.cache.get(n);if(i)return i;const o=e.json,a=((o.extensions&&o.extensions[this.name]||{}).lights||[])[t];let s;const u=new r.Q1f(16777215);void 0!==a.color&&u.fromArray(a.color);const l=void 0!==a.range?a.range:0;switch(a.type){case"directional":s=new r.ZyN(u),s.target.position.set(0,0,-1),s.add(s.target);break;case"point":s=new r.HiM(u),s.distance=l;break;case"spot":s=new r.nCl(u),s.distance=l,a.spot=a.spot||{},a.spot.innerConeAngle=void 0!==a.spot.innerConeAngle?a.spot.innerConeAngle:0,a.spot.outerConeAngle=void 0!==a.spot.outerConeAngle?a.spot.outerConeAngle:Math.PI/4,s.angle=a.spot.outerConeAngle,s.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,s.target.position.set(0,0,-1),s.add(s.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+a.type)}return s.position.set(0,0,0),s.decay=2,W(s,a),void 0!==a.intensity&&(s.intensity=a.intensity),s.name=e.createUniqueName(a.name||"light_"+t),i=Promise.resolve(s),e.cache.add(n,i),i}getDependency(t,e){if("light"===t)return this._loadLight(e)}createNodeAttachment(t){const e=this,n=this.parser,r=n.json.nodes[t],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then((function(t){return n._getNodeRef(e.cache,i,t)}))}}class l{constructor(){this.name=s.KHR_MATERIALS_UNLIT}getMaterialType(){return r.V9B}extendParams(t,e,n){const i=[];t.color=new r.Q1f(1,1,1),t.opacity=1;const o=e.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){const e=o.baseColorFactor;t.color.fromArray(e),t.opacity=e[3]}void 0!==o.baseColorTexture&&i.push(n.assignTexture(t,"map",o.baseColorTexture,r.S2Q))}return Promise.all(i)}}class c{constructor(t){this.parser=t,this.name=s.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,e){const n=this.parser.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name].emissiveStrength;return void 0!==r&&(e.emissiveIntensity=r),Promise.resolve()}}class h{constructor(t){this.parser=t,this.name=s.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?r.uSd:null}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[],a=i.extensions[this.name];if(void 0!==a.clearcoatFactor&&(e.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&o.push(n.assignTexture(e,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(e.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&o.push(n.assignTexture(e,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(o.push(n.assignTexture(e,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){const t=a.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new r.I9Y(t,t)}return Promise.all(o)}}class d{constructor(t){this.parser=t,this.name=s.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?r.uSd:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];return void 0!==o.iridescenceFactor&&(e.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&i.push(n.assignTexture(e,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(e.iridescenceIOR=o.iridescenceIor),void 0===e.iridescenceThicknessRange&&(e.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(e.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(e.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&i.push(n.assignTexture(e,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(i)}}class f{constructor(t){this.parser=t,this.name=s.KHR_MATERIALS_SHEEN}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?r.uSd:null}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[];e.sheenColor=new r.Q1f(0,0,0),e.sheenRoughness=0,e.sheen=1;const a=i.extensions[this.name];return void 0!==a.sheenColorFactor&&e.sheenColor.fromArray(a.sheenColorFactor),void 0!==a.sheenRoughnessFactor&&(e.sheenRoughness=a.sheenRoughnessFactor),void 0!==a.sheenColorTexture&&o.push(n.assignTexture(e,"sheenColorMap",a.sheenColorTexture,r.S2Q)),void 0!==a.sheenRoughnessTexture&&o.push(n.assignTexture(e,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(o)}}class p{constructor(t){this.parser=t,this.name=s.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?r.uSd:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(e.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&i.push(n.assignTexture(e,"transmissionMap",o.transmissionTexture)),Promise.all(i)}}class m{constructor(t){this.parser=t,this.name=s.KHR_MATERIALS_VOLUME}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?r.uSd:null}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[],a=i.extensions[this.name];e.thickness=void 0!==a.thicknessFactor?a.thicknessFactor:0,void 0!==a.thicknessTexture&&o.push(n.assignTexture(e,"thicknessMap",a.thicknessTexture)),e.attenuationDistance=a.attenuationDistance||1/0;const s=a.attenuationColor||[1,1,1];return e.attenuationColor=new r.Q1f(s[0],s[1],s[2]),Promise.all(o)}}class g{constructor(t){this.parser=t,this.name=s.KHR_MATERIALS_IOR}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?r.uSd:null}extendMaterialParams(t,e){const n=this.parser.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name];return e.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}class v{constructor(t){this.parser=t,this.name=s.KHR_MATERIALS_SPECULAR}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?r.uSd:null}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[],a=i.extensions[this.name];e.specularIntensity=void 0!==a.specularFactor?a.specularFactor:1,void 0!==a.specularTexture&&o.push(n.assignTexture(e,"specularIntensityMap",a.specularTexture));const s=a.specularColorFactor||[1,1,1];return e.specularColor=new r.Q1f(s[0],s[1],s[2]),void 0!==a.specularColorTexture&&o.push(n.assignTexture(e,"specularColorMap",a.specularColorTexture,r.S2Q)),Promise.all(o)}}class y{constructor(t){this.parser=t,this.name=s.KHR_TEXTURE_BASISU}loadTexture(t){const e=this.parser,n=e.json,r=n.textures[t];if(!r.extensions||!r.extensions[this.name])return null;const i=r.extensions[this.name],o=e.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,i.source,o)}}class b{constructor(t){this.parser=t,this.name=s.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,r=n.json,i=r.textures[t];if(!i.extensions||!i.extensions[e])return null;const o=i.extensions[e],a=r.images[o.source];let s=n.textureLoader;if(a.uri){const t=n.options.manager.getHandler(a.uri);null!==t&&(s=t)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(t,o.source,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(t)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(t){const e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(1===e.height)}}))),this.isSupported}}class x{constructor(t){this.parser=t,this.name=s.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,r=n.json,i=r.textures[t];if(!i.extensions||!i.extensions[e])return null;const o=i.extensions[e],a=r.images[o.source];let s=n.textureLoader;if(a.uri){const t=n.options.manager.getHandler(a.uri);null!==t&&(s=t)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(t,o.source,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(t)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(t){const e=new Image;e.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",e.onload=e.onerror=function(){t(1===e.height)}}))),this.isSupported}}class w{constructor(t){this.name=s.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const e=this.parser.json,n=e.bufferViews[t];if(n.extensions&&n.extensions[this.name]){const t=n.extensions[this.name],r=this.parser.getDependency("buffer",t.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then((function(e){const n=t.byteOffset||0,r=t.byteLength||0,o=t.count,a=t.byteStride,s=new Uint8Array(e,n,r);return i.decodeGltfBufferAsync?i.decodeGltfBufferAsync(o,a,s,t.mode,t.filter).then((function(t){return t.buffer})):i.ready.then((function(){const e=new ArrayBuffer(o*a);return i.decodeGltfBuffer(new Uint8Array(e),o,a,s,t.mode,t.filter),e}))}))}return null}}class _{constructor(t){this.name=s.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const e=this.parser.json,n=e.nodes[t];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;const i=e.meshes[n.mesh];for(const t of i.primitives)if(t.mode!==O.TRIANGLES&&t.mode!==O.TRIANGLE_STRIP&&t.mode!==O.TRIANGLE_FAN&&void 0!==t.mode)return null;const o=n.extensions[this.name].attributes,a=[],s={};for(const t in o)a.push(this.parser.getDependency("accessor",o[t]).then((e=>(s[t]=e,s[t]))));return a.length<1?null:(a.push(this.parser.createNodeMesh(t)),Promise.all(a).then((t=>{const e=t.pop(),n=e.isGroup?e.children:[e],i=t[0].count,o=[];for(const t of n){const e=new r.kn4,n=new r.Pq0,a=new r.PTz,u=new r.Pq0(1,1,1),l=new r.ZLX(t.geometry,t.material,i);for(let t=0;t<i;t++)s.TRANSLATION&&n.fromBufferAttribute(s.TRANSLATION,t),s.ROTATION&&a.fromBufferAttribute(s.ROTATION,t),s.SCALE&&u.fromBufferAttribute(s.SCALE,t),l.setMatrixAt(t,e.compose(n,a,u));for(const e in s)"TRANSLATION"!==e&&"ROTATION"!==e&&"SCALE"!==e&&t.geometry.setAttribute(e,s[e]);r.B69.prototype.copy.call(l,t),this.parser.assignFinalMaterial(l),o.push(l)}return e.isGroup?(e.clear(),e.add(...o),e):o[0]})))}}const S="glTF",E=1313821514,A=5130562;class M{constructor(t){this.name=s.KHR_BINARY_GLTF,this.content=null,this.body=null;const e=new DataView(t,0,12),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==S)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-12,i=new DataView(t,12);let o=0;for(;o<r;){const e=i.getUint32(o,!0);o+=4;const r=i.getUint32(o,!0);if(o+=4,r===E){const r=new Uint8Array(t,12+o,e);this.content=n.decode(r)}else if(r===A){const n=12+o;this.body=t.slice(n,n+e)}o+=e}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class C{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=s.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){const n=this.json,r=this.dracoLoader,i=t.extensions[this.name].bufferView,o=t.extensions[this.name].attributes,a={},s={},u={};for(const t in o){const e=F[t]||t.toLowerCase();a[e]=o[t]}for(const e in t.attributes){const r=F[e]||e.toLowerCase();if(void 0!==o[e]){const i=n.accessors[t.attributes[e]],o=L[i.componentType];u[r]=o.name,s[r]=!0===i.normalized}}return e.getDependency("bufferView",i).then((function(t){return new Promise((function(e){r.decodeDracoFile(t,(function(t){for(const e in t.attributes){const n=t.attributes[e],r=s[e];void 0!==r&&(n.normalized=r)}e(t)}),a,u)}))}))}}class T{constructor(){this.name=s.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return void 0!==e.texCoord&&e.texCoord!==t.channel||void 0!==e.offset||void 0!==e.rotation||void 0!==e.scale?(t=t.clone(),void 0!==e.texCoord&&(t.channel=e.texCoord),void 0!==e.offset&&t.offset.fromArray(e.offset),void 0!==e.rotation&&(t.rotation=e.rotation),void 0!==e.scale&&t.repeat.fromArray(e.scale),t.needsUpdate=!0,t):t}}class k{constructor(){this.name=s.KHR_MESH_QUANTIZATION}}class I extends r.lGw{constructor(t,e,n,r){super(t,e,n,r)}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r*3+r;for(let t=0;t!==r;t++)e[t]=n[i+t];return e}interpolate_(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=2*a,u=3*a,l=r-e,c=(n-e)/l,h=c*c,d=h*c,f=t*u,p=f-u,m=-2*d+3*h,g=d-h,v=1-m,y=g-h+c;for(let t=0;t!==a;t++){const e=o[p+t+a],n=o[p+t+s]*l,r=o[f+t+a],u=o[f+t]*l;i[t]=v*e+y*n+m*r+g*u}return i}}const N=new r.PTz;class P extends I{interpolate_(t,e,n,r){const i=super.interpolate_(t,e,n,r);return N.fromArray(i).normalize().toArray(i),i}}const O={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},L={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},R={9728:r.hxR,9729:r.k6q,9984:r.pHI,9985:r.kRr,9986:r.Cfg,9987:r.$_I},D={33071:r.ghU,33648:r.kTW,10497:r.GJx},z={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},F={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},B={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},U={CUBICSPLINE:void 0,LINEAR:r.PJ3,STEP:r.ljd},j="OPAQUE",V="MASK",H="BLEND";function G(t,e,n){for(const r in n.extensions)void 0===t[r]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=n.extensions[r])}function W(t,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function X(t,e){if(t.updateMorphTargets(),void 0!==e.weights)for(let n=0,r=e.weights.length;n<r;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(t.morphTargetInfluences.length===n.length){t.morphTargetDictionary={};for(let e=0,r=n.length;e<r;e++)t.morphTargetDictionary[n[e]]=e}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Y(t){const e=t.extensions&&t.extensions[s.KHR_DRACO_MESH_COMPRESSION];let n;return n=e?"draco:"+e.bufferView+":"+e.indices+":"+q(e.attributes):t.indices+":"+q(t.attributes)+":"+t.mode,n}function q(t){let e="";const n=Object.keys(t).sort();for(let r=0,i=n.length;r<i;r++)e+=n[r]+":"+t[n[r]]+";";return e}function $(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const K=new r.kn4;class Z{constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new a,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,i=!1,o=-1;"undefined"!=typeof navigator&&(n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),i=navigator.userAgent.indexOf("Firefox")>-1,o=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"==typeof createImageBitmap||n||i&&o<98?this.textureLoader=new r.Tap(this.options.manager):this.textureLoader=new r.Kzg(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new r.Y9S(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){const n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll((function(t){return t._markDefs&&t._markDefs()})),Promise.all(this._invokeAll((function(t){return t.beforeRoot&&t.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(e){const o={scene:e[0][r.scene||0],scenes:e[0],animations:e[1],cameras:e[2],asset:r.asset,parser:n,userData:{}};G(i,o,r),W(o,r),Promise.all(n._invokeAll((function(t){return t.afterRoot&&t.afterRoot(o)}))).then((function(){t(o)}))})).catch(e)}_markDefs(){const t=this.json.nodes||[],e=this.json.skins||[],n=this.json.meshes||[];for(let n=0,r=e.length;n<r;n++){const r=e[n].joints;for(let e=0,n=r.length;e<n;e++)t[r[e]].isBone=!0}for(let e=0,r=t.length;e<r;e++){const r=t[e];void 0!==r.mesh&&(this._addNodeRef(this.meshCache,r.mesh),void 0!==r.skin&&(n[r.mesh].isSkinnedMesh=!0)),void 0!==r.camera&&this._addNodeRef(this.cameraCache,r.camera)}}_addNodeRef(t,e){void 0!==e&&(void 0===t.refs[e]&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,n){if(t.refs[e]<=1)return n;const r=n.clone(),i=(t,e)=>{const n=this.associations.get(t);null!=n&&this.associations.set(e,n);for(const[n,r]of t.children.entries())i(r,e.children[n])};return i(n,r),r.name+="_instance_"+t.uses[e]++,r}_invokeOne(t){const e=Object.values(this.plugins);e.push(this);for(let n=0;n<e.length;n++){const r=t(e[n]);if(r)return r}return null}_invokeAll(t){const e=Object.values(this.plugins);e.unshift(this);const n=[];for(let r=0;r<e.length;r++){const i=t(e[r]);i&&n.push(i)}return n}getDependency(t,e){const n=t+":"+e;let r=this.cache.get(n);if(!r){switch(t){case"scene":r=this.loadScene(e);break;case"node":r=this._invokeOne((function(t){return t.loadNode&&t.loadNode(e)}));break;case"mesh":r=this._invokeOne((function(t){return t.loadMesh&&t.loadMesh(e)}));break;case"accessor":r=this.loadAccessor(e);break;case"bufferView":r=this._invokeOne((function(t){return t.loadBufferView&&t.loadBufferView(e)}));break;case"buffer":r=this.loadBuffer(e);break;case"material":r=this._invokeOne((function(t){return t.loadMaterial&&t.loadMaterial(e)}));break;case"texture":r=this._invokeOne((function(t){return t.loadTexture&&t.loadTexture(e)}));break;case"skin":r=this.loadSkin(e);break;case"animation":r=this._invokeOne((function(t){return t.loadAnimation&&t.loadAnimation(e)}));break;case"camera":r=this.loadCamera(e);break;default:if(r=this._invokeOne((function(n){return n!=this&&n.getDependency&&n.getDependency(t,e)})),!r)throw new Error("Unknown type: "+t)}this.cache.add(n,r)}return r}getDependencies(t){let e=this.cache.get(t);if(!e){const n=this,r=this.json[t+("mesh"===t?"es":"s")]||[];e=Promise.all(r.map((function(e,r){return n.getDependency(t,r)}))),this.cache.add(t,e)}return e}loadBuffer(t){const e=this.json.buffers[t],n=this.fileLoader;if(e.type&&"arraybuffer"!==e.type)throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(void 0===e.uri&&0===t)return Promise.resolve(this.extensions[s.KHR_BINARY_GLTF].body);const i=this.options;return new Promise((function(t,o){n.load(r.r6x.resolveURL(e.uri,i.path),t,void 0,(function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))}))}))}loadBufferView(t){const e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then((function(t){const n=e.byteLength||0,r=e.byteOffset||0;return t.slice(r,r+n)}))}loadAccessor(t){const e=this,n=this.json,i=this.json.accessors[t];if(void 0===i.bufferView&&void 0===i.sparse){const t=z[i.type],e=L[i.componentType],n=!0===i.normalized,o=new e(i.count*t);return Promise.resolve(new r.THS(o,t,n))}const o=[];return void 0!==i.bufferView?o.push(this.getDependency("bufferView",i.bufferView)):o.push(null),void 0!==i.sparse&&(o.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(o).then((function(t){const o=t[0],a=z[i.type],s=L[i.componentType],u=s.BYTES_PER_ELEMENT,l=u*a,c=i.byteOffset||0,h=void 0!==i.bufferView?n.bufferViews[i.bufferView].byteStride:void 0,d=!0===i.normalized;let f,p;if(h&&h!==l){const t=Math.floor(c/h),n="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+t+":"+i.count;let l=e.cache.get(n);l||(f=new s(o,t*h,i.count*h/u),l=new r.eB$(f,h/u),e.cache.add(n,l)),p=new r.eHs(l,a,c%h/u,d)}else f=null===o?new s(i.count*a):new s(o,c,i.count*a),p=new r.THS(f,a,d);if(void 0!==i.sparse){const e=z.SCALAR,n=L[i.sparse.indices.componentType],u=i.sparse.indices.byteOffset||0,l=i.sparse.values.byteOffset||0,c=new n(t[1],u,i.sparse.count*e),h=new s(t[2],l,i.sparse.count*a);null!==o&&(p=new r.THS(p.array.slice(),p.itemSize,p.normalized));for(let t=0,e=c.length;t<e;t++){const e=c[t];if(p.setX(e,h[t*a]),a>=2&&p.setY(e,h[t*a+1]),a>=3&&p.setZ(e,h[t*a+2]),a>=4&&p.setW(e,h[t*a+3]),a>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return p}))}loadTexture(t){const e=this.json,n=this.options,r=e.textures[t].source,i=e.images[r];let o=this.textureLoader;if(i.uri){const t=n.manager.getHandler(i.uri);null!==t&&(o=t)}return this.loadTextureImage(t,r,o)}loadTextureImage(t,e,n){const i=this,o=this.json,a=o.textures[t],s=o.images[e],u=(s.uri||s.bufferView)+":"+a.sampler;if(this.textureCache[u])return this.textureCache[u];const l=this.loadImageSource(e,n).then((function(e){e.flipY=!1,e.name=a.name||s.name||"",""===e.name&&"string"==typeof s.uri&&!1===s.uri.startsWith("data:image/")&&(e.name=s.uri);const n=(o.samplers||{})[a.sampler]||{};return e.magFilter=R[n.magFilter]||r.k6q,e.minFilter=R[n.minFilter]||r.$_I,e.wrapS=D[n.wrapS]||r.GJx,e.wrapT=D[n.wrapT]||r.GJx,i.associations.set(e,{textures:t}),e})).catch((function(){return null}));return this.textureCache[u]=l,l}loadImageSource(t,e){const n=this,i=this.json,o=this.options;if(void 0!==this.sourceCache[t])return this.sourceCache[t].then((t=>t.clone()));const a=i.images[t],s=self.URL||self.webkitURL;let u=a.uri||"",l=!1;if(void 0!==a.bufferView)u=n.getDependency("bufferView",a.bufferView).then((function(t){l=!0;const e=new Blob([t],{type:a.mimeType});return u=s.createObjectURL(e),u}));else if(void 0===a.uri)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const c=Promise.resolve(u).then((function(t){return new Promise((function(n,i){let a=n;!0===e.isImageBitmapLoader&&(a=function(t){const e=new r.gPd(t);e.needsUpdate=!0,n(e)}),e.load(r.r6x.resolveURL(t,o.path),a,void 0,i)}))})).then((function(t){var e;return!0===l&&s.revokeObjectURL(u),t.userData.mimeType=a.mimeType||((e=a.uri).search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/)?"image/jpeg":e.search(/\.webp($|\?)/i)>0||0===e.search(/^data\:image\/webp/)?"image/webp":"image/png"),t})).catch((function(t){throw console.error("THREE.GLTFLoader: Couldn't load texture",u),t}));return this.sourceCache[t]=c,c}assignTexture(t,e,n,r){const i=this;return this.getDependency("texture",n.index).then((function(o){if(!o)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((o=o.clone()).channel=n.texCoord),i.extensions[s.KHR_TEXTURE_TRANSFORM]){const t=void 0!==n.extensions?n.extensions[s.KHR_TEXTURE_TRANSFORM]:void 0;if(t){const e=i.associations.get(o);o=i.extensions[s.KHR_TEXTURE_TRANSFORM].extendTexture(o,t),i.associations.set(o,e)}}return void 0!==r&&(o.encoding=r),t[e]=o,o}))}assignFinalMaterial(t){const e=t.geometry;let n=t.material;const i=void 0===e.attributes.tangent,o=void 0!==e.attributes.color,a=void 0===e.attributes.normal;if(t.isPoints){const t="PointsMaterial:"+n.uuid;let e=this.cache.get(t);e||(e=new r.BH$,r.imn.prototype.copy.call(e,n),e.color.copy(n.color),e.map=n.map,e.sizeAttenuation=!1,this.cache.add(t,e)),n=e}else if(t.isLine){const t="LineBasicMaterial:"+n.uuid;let e=this.cache.get(t);e||(e=new r.mrM,r.imn.prototype.copy.call(e,n),e.color.copy(n.color),e.map=n.map,this.cache.add(t,e)),n=e}if(i||o||a){let t="ClonedMaterial:"+n.uuid+":";i&&(t+="derivative-tangents:"),o&&(t+="vertex-colors:"),a&&(t+="flat-shading:");let e=this.cache.get(t);e||(e=n.clone(),o&&(e.vertexColors=!0),a&&(e.flatShading=!0),i&&(e.normalScale&&(e.normalScale.y*=-1),e.clearcoatNormalScale&&(e.clearcoatNormalScale.y*=-1)),this.cache.add(t,e),this.associations.set(e,this.associations.get(n))),n=e}t.material=n}getMaterialType(){return r._4j}loadMaterial(t){const e=this,n=this.json,i=this.extensions,o=n.materials[t];let a;const u={},l=[];if((o.extensions||{})[s.KHR_MATERIALS_UNLIT]){const t=i[s.KHR_MATERIALS_UNLIT];a=t.getMaterialType(),l.push(t.extendParams(u,o,e))}else{const n=o.pbrMetallicRoughness||{};if(u.color=new r.Q1f(1,1,1),u.opacity=1,Array.isArray(n.baseColorFactor)){const t=n.baseColorFactor;u.color.fromArray(t),u.opacity=t[3]}void 0!==n.baseColorTexture&&l.push(e.assignTexture(u,"map",n.baseColorTexture,r.S2Q)),u.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,u.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(l.push(e.assignTexture(u,"metalnessMap",n.metallicRoughnessTexture)),l.push(e.assignTexture(u,"roughnessMap",n.metallicRoughnessTexture))),a=this._invokeOne((function(e){return e.getMaterialType&&e.getMaterialType(t)})),l.push(Promise.all(this._invokeAll((function(e){return e.extendMaterialParams&&e.extendMaterialParams(t,u)}))))}!0===o.doubleSided&&(u.side=r.$EB);const c=o.alphaMode||j;if(c===H?(u.transparent=!0,u.depthWrite=!1):(u.transparent=!1,c===V&&(u.alphaTest=void 0!==o.alphaCutoff?o.alphaCutoff:.5)),void 0!==o.normalTexture&&a!==r.V9B&&(l.push(e.assignTexture(u,"normalMap",o.normalTexture)),u.normalScale=new r.I9Y(1,1),void 0!==o.normalTexture.scale)){const t=o.normalTexture.scale;u.normalScale.set(t,t)}return void 0!==o.occlusionTexture&&a!==r.V9B&&(l.push(e.assignTexture(u,"aoMap",o.occlusionTexture)),void 0!==o.occlusionTexture.strength&&(u.aoMapIntensity=o.occlusionTexture.strength)),void 0!==o.emissiveFactor&&a!==r.V9B&&(u.emissive=(new r.Q1f).fromArray(o.emissiveFactor)),void 0!==o.emissiveTexture&&a!==r.V9B&&l.push(e.assignTexture(u,"emissiveMap",o.emissiveTexture,r.S2Q)),Promise.all(l).then((function(){const n=new a(u);return o.name&&(n.name=o.name),W(n,o),e.associations.set(n,{materials:t}),o.extensions&&G(i,n,o),n}))}createUniqueName(t){const e=r.Nwf.sanitizeNodeName(t||"");let n=e;for(let t=1;this.nodeNamesUsed[n];++t)n=e+"_"+t;return this.nodeNamesUsed[n]=!0,n}loadGeometries(t){const e=this,n=this.extensions,i=this.primitiveCache;function o(t){return n[s.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(t,e).then((function(n){return Q(n,t,e)}))}const a=[];for(let n=0,u=t.length;n<u;n++){const u=t[n],l=Y(u),c=i[l];if(c)a.push(c.promise);else{let t;t=u.extensions&&u.extensions[s.KHR_DRACO_MESH_COMPRESSION]?o(u):Q(new r.LoY,u,e),i[l]={primitive:u,promise:t},a.push(t)}}return Promise.all(a)}loadMesh(t){const e=this,n=this.json,o=this.extensions,a=n.meshes[t],s=a.primitives,u=[];for(let t=0,e=s.length;t<e;t++){const e=void 0===s[t].material?(void 0===(l=this.cache).DefaultMaterial&&(l.DefaultMaterial=new r._4j({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:r.hB5})),l.DefaultMaterial):this.getDependency("material",s[t].material);u.push(e)}var l;return u.push(e.loadGeometries(s)),Promise.all(u).then((function(n){const u=n.slice(0,n.length-1),l=n[n.length-1],c=[];for(let n=0,h=l.length;n<h;n++){const h=l[n],d=s[n];let f;const p=u[n];if(d.mode===O.TRIANGLES||d.mode===O.TRIANGLE_STRIP||d.mode===O.TRIANGLE_FAN||void 0===d.mode)f=!0===a.isSkinnedMesh?new r.I46(h,p):new r.eaF(h,p),!0===f.isSkinnedMesh&&f.normalizeSkinWeights(),d.mode===O.TRIANGLE_STRIP?f.geometry=i(f.geometry,r.O49):d.mode===O.TRIANGLE_FAN&&(f.geometry=i(f.geometry,r.rYR));else if(d.mode===O.LINES)f=new r.DXC(h,p);else if(d.mode===O.LINE_STRIP)f=new r.N1A(h,p);else if(d.mode===O.LINE_LOOP)f=new r.FCc(h,p);else{if(d.mode!==O.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+d.mode);f=new r.ONl(h,p)}Object.keys(f.geometry.morphAttributes).length>0&&X(f,a),f.name=e.createUniqueName(a.name||"mesh_"+t),W(f,a),d.extensions&&G(o,f,d),e.assignFinalMaterial(f),c.push(f)}for(let n=0,r=c.length;n<r;n++)e.associations.set(c[n],{meshes:t,primitives:n});if(1===c.length)return c[0];const h=new r.YJl;e.associations.set(h,{meshes:t});for(let t=0,e=c.length;t<e;t++)h.add(c[t]);return h}))}loadCamera(t){let e;const n=this.json.cameras[t],i=n[n.type];if(i)return"perspective"===n.type?e=new r.ubm(r.cj9.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(e=new r.qUd(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(e.name=this.createUniqueName(n.name)),W(e,n),Promise.resolve(e);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(t){const e=this.json.skins[t],n=[];for(let t=0,r=e.joints.length;t<r;t++)n.push(this._loadNodeShallow(e.joints[t]));return void 0!==e.inverseBindMatrices?n.push(this.getDependency("accessor",e.inverseBindMatrices)):n.push(null),Promise.all(n).then((function(t){const n=t.pop(),i=t,o=[],a=[];for(let t=0,s=i.length;t<s;t++){const s=i[t];if(s){o.push(s);const e=new r.kn4;null!==n&&e.fromArray(n.array,16*t),a.push(e)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[t])}return new r.EAD(o,a)}))}loadAnimation(t){const e=this.json.animations[t],n=e.name?e.name:"animation_"+t,i=[],o=[],a=[],s=[],u=[];for(let t=0,n=e.channels.length;t<n;t++){const n=e.channels[t],r=e.samplers[n.sampler],l=n.target,c=l.node,h=void 0!==e.parameters?e.parameters[r.input]:r.input,d=void 0!==e.parameters?e.parameters[r.output]:r.output;void 0!==l.node&&(i.push(this.getDependency("node",c)),o.push(this.getDependency("accessor",h)),a.push(this.getDependency("accessor",d)),s.push(r),u.push(l))}return Promise.all([Promise.all(i),Promise.all(o),Promise.all(a),Promise.all(s),Promise.all(u)]).then((function(t){const e=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=[];for(let t=0,n=e.length;t<n;t++){const n=e[t],l=i[t],c=o[t],h=a[t],d=s[t];if(void 0===n)continue;let f;switch(n.updateMatrix(),B[d.path]){case B.weights:f=r.Hit;break;case B.rotation:f=r.MBL;break;default:f=r.RiT}const p=n.name?n.name:n.uuid,m=void 0!==h.interpolation?U[h.interpolation]:r.PJ3,g=[];B[d.path]===B.weights?n.traverse((function(t){t.morphTargetInfluences&&g.push(t.name?t.name:t.uuid)})):g.push(p);let v=c.array;if(c.normalized){const t=$(v.constructor),e=new Float32Array(v.length);for(let n=0,r=v.length;n<r;n++)e[n]=v[n]*t;v=e}for(let t=0,e=g.length;t<e;t++){const e=new f(g[t]+"."+B[d.path],l.array,v,m);"CUBICSPLINE"===h.interpolation&&(e.createInterpolant=function(t){return new(this instanceof r.MBL?P:I)(this.times,this.values,this.getValueSize()/3,t)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),u.push(e)}}return new r.tz3(n,void 0,u)}))}createNodeMesh(t){const e=this.json,n=this,r=e.nodes[t];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then((function(t){const e=n._getNodeRef(n.meshCache,r.mesh,t);return void 0!==r.weights&&e.traverse((function(t){if(t.isMesh)for(let e=0,n=r.weights.length;e<n;e++)t.morphTargetInfluences[e]=r.weights[e]})),e}))}loadNode(t){const e=this,n=this.json.nodes[t],r=e._loadNodeShallow(t),i=[],o=n.children||[];for(let t=0,n=o.length;t<n;t++)i.push(e.getDependency("node",o[t]));const a=void 0===n.skin?Promise.resolve(null):e.getDependency("skin",n.skin);return Promise.all([r,Promise.all(i),a]).then((function(t){const e=t[0],n=t[1],r=t[2];null!==r&&e.traverse((function(t){t.isSkinnedMesh&&t.bind(r,K)}));for(let t=0,r=n.length;t<r;t++)e.add(n[t]);return e}))}_loadNodeShallow(t){const e=this.json,n=this.extensions,i=this;if(void 0!==this.nodeCache[t])return this.nodeCache[t];const o=e.nodes[t],a=o.name?i.createUniqueName(o.name):"",s=[],u=i._invokeOne((function(e){return e.createNodeMesh&&e.createNodeMesh(t)}));return u&&s.push(u),void 0!==o.camera&&s.push(i.getDependency("camera",o.camera).then((function(t){return i._getNodeRef(i.cameraCache,o.camera,t)}))),i._invokeAll((function(e){return e.createNodeAttachment&&e.createNodeAttachment(t)})).forEach((function(t){s.push(t)})),this.nodeCache[t]=Promise.all(s).then((function(e){let s;if(s=!0===o.isBone?new r.$Kf:e.length>1?new r.YJl:1===e.length?e[0]:new r.B69,s!==e[0])for(let t=0,n=e.length;t<n;t++)s.add(e[t]);if(o.name&&(s.userData.name=o.name,s.name=a),W(s,o),o.extensions&&G(n,s,o),void 0!==o.matrix){const t=new r.kn4;t.fromArray(o.matrix),s.applyMatrix4(t)}else void 0!==o.translation&&s.position.fromArray(o.translation),void 0!==o.rotation&&s.quaternion.fromArray(o.rotation),void 0!==o.scale&&s.scale.fromArray(o.scale);return i.associations.has(s)||i.associations.set(s,{}),i.associations.get(s).nodes=t,s})),this.nodeCache[t]}loadScene(t){const e=this.extensions,n=this.json.scenes[t],i=this,o=new r.YJl;n.name&&(o.name=i.createUniqueName(n.name)),W(o,n),n.extensions&&G(e,o,n);const a=n.nodes||[],s=[];for(let t=0,e=a.length;t<e;t++)s.push(i.getDependency("node",a[t]));return Promise.all(s).then((function(t){for(let e=0,n=t.length;e<n;e++)o.add(t[e]);return i.associations=(t=>{const e=new Map;for(const[t,n]of i.associations)(t instanceof r.imn||t instanceof r.gPd)&&e.set(t,n);return t.traverse((t=>{const n=i.associations.get(t);null!=n&&e.set(t,n)})),e})(o),o}))}}function Q(t,e,n){const i=e.attributes,o=[];function a(e,r){return n.getDependency("accessor",e).then((function(e){t.setAttribute(r,e)}))}for(const e in i){const n=F[e]||e.toLowerCase();n in t.attributes||o.push(a(i[e],n))}if(void 0!==e.indices&&!t.index){const r=n.getDependency("accessor",e.indices).then((function(e){t.setIndex(e)}));o.push(r)}return W(t,e),function(t,e,n){const i=e.attributes,o=new r.NRn;if(void 0===i.POSITION)return;{const t=n.json.accessors[i.POSITION],e=t.min,a=t.max;if(void 0===e||void 0===a)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(o.set(new r.Pq0(e[0],e[1],e[2]),new r.Pq0(a[0],a[1],a[2])),t.normalized){const e=$(L[t.componentType]);o.min.multiplyScalar(e),o.max.multiplyScalar(e)}}const a=e.targets;if(void 0!==a){const t=new r.Pq0,e=new r.Pq0;for(let r=0,i=a.length;r<i;r++){const i=a[r];if(void 0!==i.POSITION){const r=n.json.accessors[i.POSITION],o=r.min,a=r.max;if(void 0!==o&&void 0!==a){if(e.setX(Math.max(Math.abs(o[0]),Math.abs(a[0]))),e.setY(Math.max(Math.abs(o[1]),Math.abs(a[1]))),e.setZ(Math.max(Math.abs(o[2]),Math.abs(a[2]))),r.normalized){const t=$(L[r.componentType]);e.multiplyScalar(t)}t.max(e)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}o.expandByVector(t)}t.boundingBox=o;const s=new r.iyt;o.getCenter(s.center),s.radius=o.min.distanceTo(o.max)/2,t.boundingSphere=s}(t,e,n),Promise.all(o).then((function(){return void 0!==e.targets?function(t,e,n){let r=!1,i=!1,o=!1;for(let t=0,n=e.length;t<n;t++){const n=e[t];if(void 0!==n.POSITION&&(r=!0),void 0!==n.NORMAL&&(i=!0),void 0!==n.COLOR_0&&(o=!0),r&&i&&o)break}if(!r&&!i&&!o)return Promise.resolve(t);const a=[],s=[],u=[];for(let l=0,c=e.length;l<c;l++){const c=e[l];if(r){const e=void 0!==c.POSITION?n.getDependency("accessor",c.POSITION):t.attributes.position;a.push(e)}if(i){const e=void 0!==c.NORMAL?n.getDependency("accessor",c.NORMAL):t.attributes.normal;s.push(e)}if(o){const e=void 0!==c.COLOR_0?n.getDependency("accessor",c.COLOR_0):t.attributes.color;u.push(e)}}return Promise.all([Promise.all(a),Promise.all(s),Promise.all(u)]).then((function(e){const n=e[0],a=e[1],s=e[2];return r&&(t.morphAttributes.position=n),i&&(t.morphAttributes.normal=a),o&&(t.morphAttributes.color=s),t.morphTargetsRelative=!0,t}))}(t,e.targets,n):t}))}},31635:(t,e,n)=>{"use strict";n.r(e),n.d(e,{__addDisposableResource:()=>L,__assign:()=>o,__asyncDelegator:()=>A,__asyncGenerator:()=>E,__asyncValues:()=>M,__await:()=>S,__awaiter:()=>p,__classPrivateFieldGet:()=>N,__classPrivateFieldIn:()=>O,__classPrivateFieldSet:()=>P,__createBinding:()=>g,__decorate:()=>s,__disposeResources:()=>D,__esDecorate:()=>l,__exportStar:()=>v,__extends:()=>i,__generator:()=>m,__importDefault:()=>I,__importStar:()=>k,__makeTemplateObject:()=>C,__metadata:()=>f,__param:()=>u,__propKey:()=>h,__read:()=>b,__rest:()=>a,__runInitializers:()=>c,__setFunctionName:()=>d,__spread:()=>x,__spreadArray:()=>_,__spreadArrays:()=>w,__values:()=>y,default:()=>z});var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function u(t,e){return function(n,r){e(n,r,t)}}function l(t,e,n,r,i,o){function a(t){if(void 0!==t&&"function"!=typeof t)throw new TypeError("Function expected");return t}for(var s,u=r.kind,l="getter"===u?"get":"setter"===u?"set":"value",c=!e&&t?r.static?t:t.prototype:null,h=e||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),d=!1,f=n.length-1;f>=0;f--){var p={};for(var m in r)p[m]="access"===m?{}:r[m];for(var m in r.access)p.access[m]=r.access[m];p.addInitializer=function(t){if(d)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(t||null))};var g=(0,n[f])("accessor"===u?{get:h.get,set:h.set}:h[l],p);if("accessor"===u){if(void 0===g)continue;if(null===g||"object"!=typeof g)throw new TypeError("Object expected");(s=a(g.get))&&(h.get=s),(s=a(g.set))&&(h.set=s),(s=a(g.init))&&i.unshift(s)}else(s=a(g))&&("field"===u?i.unshift(s):h[l]=s)}c&&Object.defineProperty(c,r.name,h),d=!0}function c(t,e,n){for(var r=arguments.length>2,i=0;i<e.length;i++)n=r?e[i].call(t,n):e[i].call(t);return r?n:void 0}function h(t){return"symbol"==typeof t?t:"".concat(t)}function d(t,e,n){return"symbol"==typeof e&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function f(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function p(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function m(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}var g=Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]};function v(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||g(e,t,n)}function y(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function x(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(b(arguments[e]));return t}function w(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function _(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function S(t){return this instanceof S?(this.v=t,this):new S(t)}function E(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){o.push([t,e,n,r])>1||s(t,e)}))})}function s(t,e){try{(n=i[t](e)).value instanceof S?Promise.resolve(n.value.v).then(u,l):c(o[0][2],n)}catch(t){c(o[0][3],t)}var n}function u(t){s("next",t)}function l(t){s("throw",t)}function c(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}}function A(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:S(t[r](e)),done:!1}:i?i(e):e}:i}}function M(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=y(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){(function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)})(r,i,(e=t[n](e)).done,e.value)}))}}}function C(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var T=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function k(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&g(e,t,n);return T(e,t),e}function I(t){return t&&t.__esModule?t:{default:t}}function N(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}function P(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n}function O(t,e){if(null===e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof t?e===t:t.has(e)}function L(t,e,n){if(null!=e){if("object"!=typeof e&&"function"!=typeof e)throw new TypeError("Object expected.");var r;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(void 0===r){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose]}if("function"!=typeof r)throw new TypeError("Object not disposable.");t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var R="function"==typeof SuppressedError?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function D(t){function e(e){t.error=t.hasError?new R(e,t.error,"An error was suppressed during disposal."):e,t.hasError=!0}return function n(){for(;t.stack.length;){var r=t.stack.pop();try{var i=r.dispose&&r.dispose.call(r.value);if(r.async)return Promise.resolve(i).then(n,(function(t){return e(t),n()}))}catch(t){e(t)}}if(t.hasError)throw t.error}()}const z={__extends:i,__assign:o,__rest:a,__decorate:s,__param:u,__metadata:f,__awaiter:p,__generator:m,__createBinding:g,__exportStar:v,__values:y,__read:b,__spread:x,__spreadArrays:w,__spreadArray:_,__await:S,__asyncGenerator:E,__asyncDelegator:A,__asyncValues:M,__makeTemplateObject:C,__importStar:k,__importDefault:I,__classPrivateFieldGet:N,__classPrivateFieldSet:P,__classPrivateFieldIn:O,__addDisposableResource:L,__disposeResources:D}},72902:(t,e,n)=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r.apply(this,arguments)}n.d(e,{A:()=>s});var i={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,smartBackspace:!0,shuffle:!1,backDelay:700,fadeOut:!1,fadeOutClass:"typed-fade-out",fadeOutDelay:500,loop:!1,loopCount:1/0,showCursor:!0,cursorChar:"|",autoInsertCss:!0,attr:null,bindInputFocusEvents:!1,contentType:"html",onBegin:function(t){},onComplete:function(t){},preStringTyped:function(t,e){},onStringTyped:function(t,e){},onLastStringBackspaced:function(t){},onTypingPaused:function(t,e){},onTypingResumed:function(t,e){},onReset:function(t){},onStop:function(t,e){},onStart:function(t,e){},onDestroy:function(t){}},o=new(function(){function t(){}var e=t.prototype;return e.load=function(t,e,n){if(t.el="string"==typeof n?document.querySelector(n):n,t.options=r({},i,e),t.isInput="input"===t.el.tagName.toLowerCase(),t.attr=t.options.attr,t.bindInputFocusEvents=t.options.bindInputFocusEvents,t.showCursor=!t.isInput&&t.options.showCursor,t.cursorChar=t.options.cursorChar,t.cursorBlinking=!0,t.elContent=t.attr?t.el.getAttribute(t.attr):t.el.textContent,t.contentType=t.options.contentType,t.typeSpeed=t.options.typeSpeed,t.startDelay=t.options.startDelay,t.backSpeed=t.options.backSpeed,t.smartBackspace=t.options.smartBackspace,t.backDelay=t.options.backDelay,t.fadeOut=t.options.fadeOut,t.fadeOutClass=t.options.fadeOutClass,t.fadeOutDelay=t.options.fadeOutDelay,t.isPaused=!1,t.strings=t.options.strings.map((function(t){return t.trim()})),t.stringsElement="string"==typeof t.options.stringsElement?document.querySelector(t.options.stringsElement):t.options.stringsElement,t.stringsElement){t.strings=[],t.stringsElement.style.cssText="clip: rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px;";var o=Array.prototype.slice.apply(t.stringsElement.children),a=o.length;if(a)for(var s=0;s<a;s+=1)t.strings.push(o[s].innerHTML.trim())}for(var u in t.strPos=0,t.currentElContent=this.getCurrentElContent(t),t.currentElContent&&t.currentElContent.length>0&&(t.strPos=t.currentElContent.length-1,t.strings.unshift(t.currentElContent)),t.sequence=[],t.strings)t.sequence[u]=u;t.arrayPos=0,t.stopNum=0,t.loop=t.options.loop,t.loopCount=t.options.loopCount,t.curLoop=0,t.shuffle=t.options.shuffle,t.pause={status:!1,typewrite:!0,curString:"",curStrPos:0},t.typingComplete=!1,t.autoInsertCss=t.options.autoInsertCss,t.autoInsertCss&&(this.appendCursorAnimationCss(t),this.appendFadeOutAnimationCss(t))},e.getCurrentElContent=function(t){return t.attr?t.el.getAttribute(t.attr):t.isInput?t.el.value:"html"===t.contentType?t.el.innerHTML:t.el.textContent},e.appendCursorAnimationCss=function(t){var e="data-typed-js-cursor-css";if(t.showCursor&&!document.querySelector("["+e+"]")){var n=document.createElement("style");n.setAttribute(e,"true"),n.innerHTML="\n        .typed-cursor{\n          opacity: 1;\n        }\n        .typed-cursor.typed-cursor--blink{\n          animation: typedjsBlink 0.7s infinite;\n          -webkit-animation: typedjsBlink 0.7s infinite;\n                  animation: typedjsBlink 0.7s infinite;\n        }\n        @keyframes typedjsBlink{\n          50% { opacity: 0.0; }\n        }\n        @-webkit-keyframes typedjsBlink{\n          0% { opacity: 1; }\n          50% { opacity: 0.0; }\n          100% { opacity: 1; }\n        }\n      ",document.body.appendChild(n)}},e.appendFadeOutAnimationCss=function(t){var e="data-typed-fadeout-js-css";if(t.fadeOut&&!document.querySelector("["+e+"]")){var n=document.createElement("style");n.setAttribute(e,"true"),n.innerHTML="\n        .typed-fade-out{\n          opacity: 0;\n          transition: opacity .25s;\n        }\n        .typed-cursor.typed-cursor--blink.typed-fade-out{\n          -webkit-animation: 0;\n          animation: 0;\n        }\n      ",document.body.appendChild(n)}},t}()),a=new(function(){function t(){}var e=t.prototype;return e.typeHtmlChars=function(t,e,n){if("html"!==n.contentType)return e;var r=t.substring(e).charAt(0);if("<"===r||"&"===r){var i;for(i="<"===r?">":";";t.substring(e+1).charAt(0)!==i&&!(1+ ++e>t.length););e++}return e},e.backSpaceHtmlChars=function(t,e,n){if("html"!==n.contentType)return e;var r=t.substring(e).charAt(0);if(">"===r||";"===r){var i;for(i=">"===r?"<":"&";t.substring(e-1).charAt(0)!==i&&!(--e<0););e--}return e},t}()),s=function(){function t(t,e){o.load(this,e,t),this.begin()}var e=t.prototype;return e.toggle=function(){this.pause.status?this.start():this.stop()},e.stop=function(){this.typingComplete||this.pause.status||(this.toggleBlinking(!0),this.pause.status=!0,this.options.onStop(this.arrayPos,this))},e.start=function(){this.typingComplete||this.pause.status&&(this.pause.status=!1,this.pause.typewrite?this.typewrite(this.pause.curString,this.pause.curStrPos):this.backspace(this.pause.curString,this.pause.curStrPos),this.options.onStart(this.arrayPos,this))},e.destroy=function(){this.reset(!1),this.options.onDestroy(this)},e.reset=function(t){void 0===t&&(t=!0),clearInterval(this.timeout),this.replaceText(""),this.cursor&&this.cursor.parentNode&&(this.cursor.parentNode.removeChild(this.cursor),this.cursor=null),this.strPos=0,this.arrayPos=0,this.curLoop=0,t&&(this.insertCursor(),this.options.onReset(this),this.begin())},e.begin=function(){var t=this;this.options.onBegin(this),this.typingComplete=!1,this.shuffleStringsIfNeeded(this),this.insertCursor(),this.bindInputFocusEvents&&this.bindFocusEvents(),this.timeout=setTimeout((function(){0===t.strPos?t.typewrite(t.strings[t.sequence[t.arrayPos]],t.strPos):t.backspace(t.strings[t.sequence[t.arrayPos]],t.strPos)}),this.startDelay)},e.typewrite=function(t,e){var n=this;this.fadeOut&&this.el.classList.contains(this.fadeOutClass)&&(this.el.classList.remove(this.fadeOutClass),this.cursor&&this.cursor.classList.remove(this.fadeOutClass));var r=this.humanizer(this.typeSpeed),i=1;!0!==this.pause.status?this.timeout=setTimeout((function(){e=a.typeHtmlChars(t,e,n);var r=0,o=t.substring(e);if("^"===o.charAt(0)&&/^\^\d+/.test(o)){var s=1;s+=(o=/\d+/.exec(o)[0]).length,r=parseInt(o),n.temporaryPause=!0,n.options.onTypingPaused(n.arrayPos,n),t=t.substring(0,e)+t.substring(e+s),n.toggleBlinking(!0)}if("`"===o.charAt(0)){for(;"`"!==t.substring(e+i).charAt(0)&&(i++,!(e+i>t.length)););var u=t.substring(0,e),l=t.substring(u.length+1,e+i),c=t.substring(e+i+1);t=u+l+c,i--}n.timeout=setTimeout((function(){n.toggleBlinking(!1),e>=t.length?n.doneTyping(t,e):n.keepTyping(t,e,i),n.temporaryPause&&(n.temporaryPause=!1,n.options.onTypingResumed(n.arrayPos,n))}),r)}),r):this.setPauseStatus(t,e,!0)},e.keepTyping=function(t,e,n){0===e&&(this.toggleBlinking(!1),this.options.preStringTyped(this.arrayPos,this));var r=t.substring(0,e+=n);this.replaceText(r),this.typewrite(t,e)},e.doneTyping=function(t,e){var n=this;this.options.onStringTyped(this.arrayPos,this),this.toggleBlinking(!0),this.arrayPos===this.strings.length-1&&(this.complete(),!1===this.loop||this.curLoop===this.loopCount)||(this.timeout=setTimeout((function(){n.backspace(t,e)}),this.backDelay))},e.backspace=function(t,e){var n=this;if(!0!==this.pause.status){if(this.fadeOut)return this.initFadeOut();this.toggleBlinking(!1);var r=this.humanizer(this.backSpeed);this.timeout=setTimeout((function(){e=a.backSpaceHtmlChars(t,e,n);var r=t.substring(0,e);if(n.replaceText(r),n.smartBackspace){var i=n.strings[n.arrayPos+1];n.stopNum=i&&r===i.substring(0,e)?e:0}e>n.stopNum?(e--,n.backspace(t,e)):e<=n.stopNum&&(n.arrayPos++,n.arrayPos===n.strings.length?(n.arrayPos=0,n.options.onLastStringBackspaced(),n.shuffleStringsIfNeeded(),n.begin()):n.typewrite(n.strings[n.sequence[n.arrayPos]],e))}),r)}else this.setPauseStatus(t,e,!1)},e.complete=function(){this.options.onComplete(this),this.loop?this.curLoop++:this.typingComplete=!0},e.setPauseStatus=function(t,e,n){this.pause.typewrite=n,this.pause.curString=t,this.pause.curStrPos=e},e.toggleBlinking=function(t){this.cursor&&(this.pause.status||this.cursorBlinking!==t&&(this.cursorBlinking=t,t?this.cursor.classList.add("typed-cursor--blink"):this.cursor.classList.remove("typed-cursor--blink")))},e.humanizer=function(t){return Math.round(Math.random()*t/2)+t},e.shuffleStringsIfNeeded=function(){this.shuffle&&(this.sequence=this.sequence.sort((function(){return Math.random()-.5})))},e.initFadeOut=function(){var t=this;return this.el.className+=" "+this.fadeOutClass,this.cursor&&(this.cursor.className+=" "+this.fadeOutClass),setTimeout((function(){t.arrayPos++,t.replaceText(""),t.strings.length>t.arrayPos?t.typewrite(t.strings[t.sequence[t.arrayPos]],0):(t.typewrite(t.strings[0],0),t.arrayPos=0)}),this.fadeOutDelay)},e.replaceText=function(t){this.attr?this.el.setAttribute(this.attr,t):this.isInput?this.el.value=t:"html"===this.contentType?this.el.innerHTML=t:this.el.textContent=t},e.bindFocusEvents=function(){var t=this;this.isInput&&(this.el.addEventListener("focus",(function(e){t.stop()})),this.el.addEventListener("blur",(function(e){t.el.value&&0!==t.el.value.length||t.start()})))},e.insertCursor=function(){this.showCursor&&(this.cursor||(this.cursor=document.createElement("span"),this.cursor.className="typed-cursor",this.cursor.setAttribute("aria-hidden",!0),this.cursor.innerHTML=this.cursorChar,this.el.parentNode&&this.el.parentNode.insertBefore(this.cursor,this.el.nextSibling)))},t}()},62454:(t,e,n)=>{"use strict";n.d(e,{A:()=>_});var r=n(92836),i=n(84722),o=n(29308),a=n(57861),s=n(45558),u=n(98026),l=n(73098),c=n(47698),h=n(56448),d="__zr_normal__",f=r.Wx.concat(["ignore"]),p=(0,u.reduce)(r.Wx,(function(t,e){return t[e]=!0,t}),{ignore:!1}),m={},g=new o.A(0,0,0,0),v=function(){function t(t){this.id=(0,u.guid)(),this.animators=[],this.currentStates=[],this.states={},this._init(t)}return t.prototype._init=function(t){this.attr(t)},t.prototype.drift=function(t,e,n){switch(this.draggable){case"horizontal":e=0;break;case"vertical":t=0}var r=this.transform;r||(r=this.transform=[1,0,0,1,0,0]),r[4]+=t,r[5]+=e,this.decomposeTransform(),this.markRedraw()},t.prototype.beforeUpdate=function(){},t.prototype.afterUpdate=function(){},t.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},t.prototype.updateInnerText=function(t){var e=this._textContent;if(e&&(!e.ignore||t)){this.textConfig||(this.textConfig={});var n=this.textConfig,r=n.local,i=e.innerTransformable,o=void 0,a=void 0,u=!1;i.parent=r?this:null;var l=!1;if(i.copyTransform(e),null!=n.position){var c=g;n.layoutRect?c.copy(n.layoutRect):c.copy(this.getBoundingRect()),r||c.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(m,n,c):(0,s.X4)(m,n,c),i.x=m.x,i.y=m.y,o=m.align,a=m.verticalAlign;var d=n.origin;if(d&&null!=n.rotation){var f=void 0,p=void 0;"center"===d?(f=.5*c.width,p=.5*c.height):(f=(0,s.lo)(d[0],c.width),p=(0,s.lo)(d[1],c.height)),l=!0,i.originX=-i.x+f+(r?0:c.x),i.originY=-i.y+p+(r?0:c.y)}}null!=n.rotation&&(i.rotation=n.rotation);var v=n.offset;v&&(i.x+=v[0],i.y+=v[1],l||(i.originX=-v[0],i.originY=-v[1]));var y=null==n.inside?"string"==typeof n.position&&n.position.indexOf("inside")>=0:n.inside,b=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),x=void 0,w=void 0,_=void 0;y&&this.canBeInsideText()?(x=n.insideFill,w=n.insideStroke,null!=x&&"auto"!==x||(x=this.getInsideTextFill()),null!=w&&"auto"!==w||(w=this.getInsideTextStroke(x),_=!0)):(x=n.outsideFill,w=n.outsideStroke,null!=x&&"auto"!==x||(x=this.getOutsideFill()),null!=w&&"auto"!==w||(w=this.getOutsideStroke(x),_=!0)),(x=x||"#000")===b.fill&&w===b.stroke&&_===b.autoStroke&&o===b.align&&a===b.verticalAlign||(u=!0,b.fill=x,b.stroke=w,b.autoStroke=_,b.align=o,b.verticalAlign=a,e.setDefaultTextStyle(b)),e.__dirty|=h.M,u&&e.dirtyStyle(!0)}},t.prototype.canBeInsideText=function(){return!0},t.prototype.getInsideTextFill=function(){return"#fff"},t.prototype.getInsideTextStroke=function(t){return"#000"},t.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?l.el:l._S},t.prototype.getOutsideStroke=function(t){var e=this.__zr&&this.__zr.getBackgroundColor(),n="string"==typeof e&&(0,c.parse)(e);n||(n=[255,255,255,1]);for(var r=n[3],i=this.__zr.isDarkMode(),o=0;o<3;o++)n[o]=n[o]*r+(i?0:255)*(1-r);return n[3]=1,(0,c.stringify)(n,"rgba")},t.prototype.traverse=function(t,e){},t.prototype.attrKV=function(t,e){"textConfig"===t?this.setTextConfig(e):"textContent"===t?this.setTextContent(e):"clipPath"===t?this.setClipPath(e):"extra"===t?(this.extra=this.extra||{},(0,u.extend)(this.extra,e)):this[t]=e},t.prototype.hide=function(){this.ignore=!0,this.markRedraw()},t.prototype.show=function(){this.ignore=!1,this.markRedraw()},t.prototype.attr=function(t,e){if("string"==typeof t)this.attrKV(t,e);else if((0,u.isObject)(t))for(var n=t,r=(0,u.keys)(n),i=0;i<r.length;i++){var o=r[i];this.attrKV(o,t[o])}return this.markRedraw(),this},t.prototype.saveCurrentToNormalState=function(t){this._innerSaveToNormal(t);for(var e=this._normalState,n=0;n<this.animators.length;n++){var r=this.animators[n],i=r.__fromStateTransition;if(!(r.getLoop()||i&&i!==d)){var o=r.targetName,a=o?e[o]:e;r.saveTo(a)}}},t.prototype._innerSaveToNormal=function(t){var e=this._normalState;e||(e=this._normalState={}),t.textConfig&&!e.textConfig&&(e.textConfig=this.textConfig),this._savePrimaryToNormal(t,e,f)},t.prototype._savePrimaryToNormal=function(t,e,n){for(var r=0;r<n.length;r++){var i=n[r];null==t[i]||i in e||(e[i]=this[i])}},t.prototype.hasState=function(){return this.currentStates.length>0},t.prototype.getState=function(t){return this.states[t]},t.prototype.ensureState=function(t){var e=this.states;return e[t]||(e[t]={}),e[t]},t.prototype.clearStates=function(t){this.useState(d,!1,t)},t.prototype.useState=function(t,e,n,r){var i=t===d;if(this.hasState()||!i){var o=this.currentStates,a=this.stateTransition;if(!((0,u.indexOf)(o,t)>=0)||!e&&1!==o.length){var s;if(this.stateProxy&&!i&&(s=this.stateProxy(t)),s||(s=this.states&&this.states[t]),s||i){i||this.saveCurrentToNormalState(s);var l=!!(s&&s.hoverLayer||r);l&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,s,this._normalState,e,!n&&!this.__inHover&&a&&a.duration>0,a);var c=this._textContent,f=this._textGuide;return c&&c.useState(t,e,n,l),f&&f.useState(t,e,n,l),i?(this.currentStates=[],this._normalState={}):e?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!l&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~h.M),s}(0,u.logError)("State "+t+" not exists.")}}},t.prototype.useStates=function(t,e,n){if(t.length){var r=[],i=this.currentStates,o=t.length,a=o===i.length;if(a)for(var s=0;s<o;s++)if(t[s]!==i[s]){a=!1;break}if(a)return;for(s=0;s<o;s++){var u=t[s],l=void 0;this.stateProxy&&(l=this.stateProxy(u,t)),l||(l=this.states[u]),l&&r.push(l)}var c=r[o-1],d=!!(c&&c.hoverLayer||n);d&&this._toggleHoverLayerFlag(!0);var f=this._mergeStates(r),p=this.stateTransition;this.saveCurrentToNormalState(f),this._applyStateObj(t.join(","),f,this._normalState,!1,!e&&!this.__inHover&&p&&p.duration>0,p);var m=this._textContent,g=this._textGuide;m&&m.useStates(t,e,d),g&&g.useStates(t,e,d),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!d&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~h.M)}else this.clearStates()},t.prototype.isSilent=function(){for(var t=this.silent,e=this.parent;!t&&e;){if(e.silent){t=!0;break}e=e.parent}return t},t.prototype._updateAnimationTargets=function(){for(var t=0;t<this.animators.length;t++){var e=this.animators[t];e.targetName&&e.changeTarget(this[e.targetName])}},t.prototype.removeState=function(t){var e=(0,u.indexOf)(this.currentStates,t);if(e>=0){var n=this.currentStates.slice();n.splice(e,1),this.useStates(n)}},t.prototype.replaceState=function(t,e,n){var r=this.currentStates.slice(),i=(0,u.indexOf)(r,t),o=(0,u.indexOf)(r,e)>=0;i>=0?o?r.splice(i,1):r[i]=e:n&&!o&&r.push(e),this.useStates(r)},t.prototype.toggleState=function(t,e){e?this.useState(t,!0):this.removeState(t)},t.prototype._mergeStates=function(t){for(var e,n={},r=0;r<t.length;r++){var i=t[r];(0,u.extend)(n,i),i.textConfig&&(e=e||{},(0,u.extend)(e,i.textConfig))}return e&&(n.textConfig=e),n},t.prototype._applyStateObj=function(t,e,n,r,i,o){var a=!(e&&r);e&&e.textConfig?(this.textConfig=(0,u.extend)({},r?this.textConfig:n.textConfig),(0,u.extend)(this.textConfig,e.textConfig)):a&&n.textConfig&&(this.textConfig=n.textConfig);for(var s={},l=!1,c=0;c<f.length;c++){var h=f[c],d=i&&p[h];e&&null!=e[h]?d?(l=!0,s[h]=e[h]):this[h]=e[h]:a&&null!=n[h]&&(d?(l=!0,s[h]=n[h]):this[h]=n[h])}if(!i)for(c=0;c<this.animators.length;c++){var m=this.animators[c],g=m.targetName;m.getLoop()||m.__changeFinalValue(g?(e||n)[g]:e||n)}l&&this._transitionState(t,s,o)},t.prototype._attachComponent=function(t){if((!t.__zr||t.__hostTarget)&&t!==this){var e=this.__zr;e&&t.addSelfToZr(e),t.__zr=e,t.__hostTarget=this}},t.prototype._detachComponent=function(t){t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__hostTarget=null},t.prototype.getClipPath=function(){return this._clipPath},t.prototype.setClipPath=function(t){this._clipPath&&this._clipPath!==t&&this.removeClipPath(),this._attachComponent(t),this._clipPath=t,this.markRedraw()},t.prototype.removeClipPath=function(){var t=this._clipPath;t&&(this._detachComponent(t),this._clipPath=null,this.markRedraw())},t.prototype.getTextContent=function(){return this._textContent},t.prototype.setTextContent=function(t){var e=this._textContent;e!==t&&(e&&e!==t&&this.removeTextContent(),t.innerTransformable=new r.Ay,this._attachComponent(t),this._textContent=t,this.markRedraw())},t.prototype.setTextConfig=function(t){this.textConfig||(this.textConfig={}),(0,u.extend)(this.textConfig,t),this.markRedraw()},t.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},t.prototype.removeTextContent=function(){var t=this._textContent;t&&(t.innerTransformable=null,this._detachComponent(t),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},t.prototype.getTextGuideLine=function(){return this._textGuide},t.prototype.setTextGuideLine=function(t){this._textGuide&&this._textGuide!==t&&this.removeTextGuideLine(),this._attachComponent(t),this._textGuide=t,this.markRedraw()},t.prototype.removeTextGuideLine=function(){var t=this._textGuide;t&&(this._detachComponent(t),this._textGuide=null,this.markRedraw())},t.prototype.markRedraw=function(){this.__dirty|=h.M;var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},t.prototype.dirty=function(){this.markRedraw()},t.prototype._toggleHoverLayerFlag=function(t){this.__inHover=t;var e=this._textContent,n=this._textGuide;e&&(e.__inHover=t),n&&(n.__inHover=t)},t.prototype.addSelfToZr=function(t){if(this.__zr!==t){this.__zr=t;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.addAnimator(e[n]);this._clipPath&&this._clipPath.addSelfToZr(t),this._textContent&&this._textContent.addSelfToZr(t),this._textGuide&&this._textGuide.addSelfToZr(t)}},t.prototype.removeSelfFromZr=function(t){if(this.__zr){this.__zr=null;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.removeAnimator(e[n]);this._clipPath&&this._clipPath.removeSelfFromZr(t),this._textContent&&this._textContent.removeSelfFromZr(t),this._textGuide&&this._textGuide.removeSelfFromZr(t)}},t.prototype.animate=function(t,e,n){var r=t?this[t]:this;var o=new i.A(r,e,n);return t&&(o.targetName=t),this.addAnimator(o,t),o},t.prototype.addAnimator=function(t,e){var n=this.__zr,r=this;t.during((function(){r.updateDuringAnimation(e)})).done((function(){var e=r.animators,n=(0,u.indexOf)(e,t);n>=0&&e.splice(n,1)})),this.animators.push(t),n&&n.animation.addAnimator(t),n&&n.wakeUp()},t.prototype.updateDuringAnimation=function(t){this.markRedraw()},t.prototype.stopAnimation=function(t,e){for(var n=this.animators,r=n.length,i=[],o=0;o<r;o++){var a=n[o];t&&t!==a.scope?i.push(a):a.stop(e)}return this.animators=i,this},t.prototype.animateTo=function(t,e,n){y(this,t,e,n)},t.prototype.animateFrom=function(t,e,n){y(this,t,e,n,!0)},t.prototype._transitionState=function(t,e,n,r){for(var i=y(this,e,n,r),o=0;o<i.length;o++)i[o].__fromStateTransition=t},t.prototype.getBoundingRect=function(){return null},t.prototype.getPaintRect=function(){return null},t.initDefaultProps=function(){var e=t.prototype;e.type="element",e.name="",e.ignore=e.silent=e.isGroup=e.draggable=e.dragging=e.ignoreClip=e.__inHover=!1,e.__dirty=h.M;function n(t,n,r,i){function o(t,e){Object.defineProperty(e,0,{get:function(){return t[r]},set:function(e){t[r]=e}}),Object.defineProperty(e,1,{get:function(){return t[i]},set:function(e){t[i]=e}})}Object.defineProperty(e,t,{get:function(){this[n]||o(this,this[n]=[]);return this[n]},set:function(t){this[r]=t[0],this[i]=t[1],this[n]=t,o(this,t)}})}Object.defineProperty&&(n("position","_legacyPos","x","y"),n("scale","_legacyScale","scaleX","scaleY"),n("origin","_legacyOrigin","originX","originY"))}(),t}();function y(t,e,n,r,i){var o=[];w(t,"",t,e,n=n||{},r,o,i);var a=o.length,s=!1,u=n.done,l=n.aborted,c=function(){s=!0,--a<=0&&(s?u&&u():l&&l())},h=function(){--a<=0&&(s?u&&u():l&&l())};a||u&&u(),o.length>0&&n.during&&o[0].during((function(t,e){n.during(e)}));for(var d=0;d<o.length;d++){var f=o[d];c&&f.done(c),h&&f.aborted(h),n.force&&f.duration(n.duration),f.start(n.easing)}return o}function b(t,e,n){for(var r=0;r<n;r++)t[r]=e[r]}function x(t,e,n){if((0,u.isArrayLike)(e[n]))if((0,u.isArrayLike)(t[n])||(t[n]=[]),(0,u.isTypedArray)(e[n])){var r=e[n].length;t[n].length!==r&&(t[n]=new e[n].constructor(r),b(t[n],e[n],r))}else{var i=e[n],o=t[n],a=i.length;if(c=i,(0,u.isArrayLike)(c[0]))for(var s=i[0].length,l=0;l<a;l++)o[l]?b(o[l],i[l],s):o[l]=Array.prototype.slice.call(i[l]);else b(o,i,a);o.length=i.length}else t[n]=e[n];var c}function w(t,e,n,r,o,a,s,l){for(var c=(0,u.keys)(r),h=o.duration,d=o.delay,f=o.additive,p=o.setToFinal,m=!(0,u.isObject)(a),g=t.animators,v=[],y=0;y<c.length;y++){var b=c[y],_=r[b];if(null!=_&&null!=n[b]&&(m||a[b]))if(!(0,u.isObject)(_)||(0,u.isArrayLike)(_)||(0,u.isGradientObject)(_))v.push(b);else{if(e){l||(n[b]=_,t.updateDuringAnimation(e));continue}w(t,b,n[b],_,o,a&&a[b],s,l)}else l||(n[b]=_,t.updateDuringAnimation(e),v.push(b))}var S=v.length;if(!f&&S)for(var E=0;E<g.length;E++){if((M=g[E]).targetName===e)if(M.stopTracks(v)){var A=(0,u.indexOf)(g,M);g.splice(A,1)}}if(o.force||(v=(0,u.filter)(v,(function(t){return e=r[t],i=n[t],!(e===i||(0,u.isArrayLike)(e)&&(0,u.isArrayLike)(i)&&function(t,e){var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}(e,i));var e,i})),S=v.length),S>0||o.force&&!s.length){var M,C=void 0,T=void 0,k=void 0;if(l){T={},p&&(C={});for(E=0;E<S;E++){T[b=v[E]]=n[b],p?C[b]=r[b]:n[b]=r[b]}}else if(p){k={};for(E=0;E<S;E++){k[b=v[E]]=(0,i.F)(n[b]),x(n,r,b)}}(M=new i.A(n,!1,!1,f?(0,u.filter)(g,(function(t){return t.targetName===e})):null)).targetName=e,o.scope&&(M.scope=o.scope),p&&C&&M.whenWithKeys(0,C,v),k&&M.whenWithKeys(0,k,v),M.whenWithKeys(null==h?500:h,l?T:r,v).delay(d||0),t.addAnimator(M,e),s.push(M)}}(0,u.mixin)(v,a.A),(0,u.mixin)(v,r.Ay);const _=v},84722:(t,e,n)=>{"use strict";n.d(e,{F:()=>b,A:()=>A});var r={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return.5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},exponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))},elasticOut:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)},elasticInOut:function(t){var e,n=.1,r=.4;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=r*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)*.5+1)},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},backInOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)},bounceIn:function(t){return 1-r.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?.5*r.bounceIn(2*t):.5*r.bounceOut(2*t-1)+.5}};const i=r;var o=n(98026),a=n(89259),s=/cubic-bezier\(([0-9,\.e ]+)\)/;function u(t){var e=t&&s.exec(t);if(e){var n=e[1].split(","),r=+(0,o.trim)(n[0]),i=+(0,o.trim)(n[1]),u=+(0,o.trim)(n[2]),l=+(0,o.trim)(n[3]);if(isNaN(r+i+u+l))return;var c=[];return function(t){return t<=0?0:t>=1?1:(0,a._E)(0,r,u,1,t,c)&&(0,a.Yb)(0,i,l,1,c[0])}}}const l=function(){function t(t){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=t.life||1e3,this._delay=t.delay||0,this.loop=t.loop||!1,this.onframe=t.onframe||o.noop,this.ondestroy=t.ondestroy||o.noop,this.onrestart=t.onrestart||o.noop,t.easing&&this.setEasing(t.easing)}return t.prototype.step=function(t,e){if(this._inited||(this._startTime=t+this._delay,this._inited=!0),!this._paused){var n=this._life,r=t-this._startTime-this._pausedTime,i=r/n;i<0&&(i=0),i=Math.min(i,1);var o=this.easingFunc,a=o?o(i):i;if(this.onframe(a),1===i){if(!this.loop)return!0;var s=r%n;this._startTime=t-s,this._pausedTime=0,this.onrestart()}return!1}this._pausedTime+=e},t.prototype.pause=function(){this._paused=!0},t.prototype.resume=function(){this._paused=!1},t.prototype.setEasing=function(t){this.easing=t,this.easingFunc=(0,o.isFunction)(t)?t:i[t]||u(t)},t}();var c=n(47698),h=n(38123);Math.round;h.A.hasGlobalWindow&&(0,o.isFunction)(window.btoa);var d=Array.prototype.slice;function f(t,e,n){return(e-t)*n+t}function p(t,e,n,r){for(var i=e.length,o=0;o<i;o++)t[o]=f(e[o],n[o],r);return t}function m(t,e,n,r){for(var i=e.length,o=0;o<i;o++)t[o]=e[o]+n[o]*r;return t}function g(t,e,n,r){for(var i=e.length,o=i&&e[0].length,a=0;a<i;a++){t[a]||(t[a]=[]);for(var s=0;s<o;s++)t[a][s]=e[a][s]+n[a][s]*r}return t}function v(t,e){for(var n=t.length,r=e.length,i=n>r?e:t,o=Math.min(n,r),a=i[o-1]||{color:[0,0,0,0],offset:0},s=o;s<Math.max(n,r);s++)i.push({offset:a.offset,color:a.color.slice()})}function y(t,e,n){var r=t,i=e;if(r.push&&i.push){var o=r.length,a=i.length;if(o!==a)if(o>a)r.length=a;else for(var s=o;s<a;s++)r.push(1===n?i[s]:d.call(i[s]));var u=r[0]&&r[0].length;for(s=0;s<r.length;s++)if(1===n)isNaN(r[s])&&(r[s]=i[s]);else for(var l=0;l<u;l++)isNaN(r[s][l])&&(r[s][l]=i[s][l])}}function b(t){if((0,o.isArrayLike)(t)){var e=t.length;if((0,o.isArrayLike)(t[0])){for(var n=[],r=0;r<e;r++)n.push(d.call(t[r]));return n}return d.call(t)}return t}function x(t){return t[0]=Math.floor(t[0])||0,t[1]=Math.floor(t[1])||0,t[2]=Math.floor(t[2])||0,t[3]=null==t[3]?1:t[3],"rgba("+t.join(",")+")"}function w(t){return 4===t||5===t}function _(t){return 1===t||2===t}var S=[0,0,0,0],E=function(){function t(t){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=t}return t.prototype.isFinished=function(){return this._finished},t.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},t.prototype.needsAnimate=function(){return this.keyframes.length>=1},t.prototype.getAdditiveTrack=function(){return this._additiveTrack},t.prototype.addKeyframe=function(t,e,n){this._needsSort=!0;var r=this.keyframes,a=r.length,s=!1,l=6,h=e;if((0,o.isArrayLike)(e)){var d=function(t){return(0,o.isArrayLike)(t&&t[0])?2:1}(e);l=d,(1===d&&!(0,o.isNumber)(e[0])||2===d&&!(0,o.isNumber)(e[0][0]))&&(s=!0)}else if((0,o.isNumber)(e)&&!(0,o.eqNaN)(e))l=0;else if((0,o.isString)(e))if(isNaN(+e)){var f=c.parse(e);f&&(h=f,l=3)}else l=0;else if((0,o.isGradientObject)(e)){var p=(0,o.extend)({},h);p.colorStops=(0,o.map)(e.colorStops,(function(t){return{offset:t.offset,color:c.parse(t.color)}})),"linear"===e.type?l=4:function(t){return"radial"===t.type}(e)&&(l=5),h=p}0===a?this.valType=l:l===this.valType&&6!==l||(s=!0),this.discrete=this.discrete||s;var m={time:t,value:h,rawValue:e,percent:0};return n&&(m.easing=n,m.easingFunc=(0,o.isFunction)(n)?n:i[n]||u(n)),r.push(m),m},t.prototype.prepare=function(t,e){var n=this.keyframes;this._needsSort&&n.sort((function(t,e){return t.time-e.time}));for(var r=this.valType,i=n.length,o=n[i-1],a=this.discrete,s=_(r),u=w(r),l=0;l<i;l++){var c=n[l],h=c.value,d=o.value;c.percent=c.time/t,a||(s&&l!==i-1?y(h,d,r):u&&v(h.colorStops,d.colorStops))}if(!a&&5!==r&&e&&this.needsAnimate()&&e.needsAnimate()&&r===e.valType&&!e._finished){this._additiveTrack=e;var f=n[0].value;for(l=0;l<i;l++)0===r?n[l].additiveValue=n[l].value-f:3===r?n[l].additiveValue=m([],n[l].value,f,-1):_(r)&&(n[l].additiveValue=1===r?m([],n[l].value,f,-1):g([],n[l].value,f,-1))}},t.prototype.step=function(t,e){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var n,r,i,a=null!=this._additiveTrack,s=a?"additiveValue":"value",u=this.valType,l=this.keyframes,c=l.length,h=this.propName,d=3===u,m=this._lastFr,g=Math.min;if(1===c)r=i=l[0];else{if(e<0)n=0;else if(e<this._lastFrP){for(n=g(m+1,c-1);n>=0&&!(l[n].percent<=e);n--);n=g(n,c-2)}else{for(n=m;n<c&&!(l[n].percent>e);n++);n=g(n-1,c-2)}i=l[n+1],r=l[n]}if(r&&i){this._lastFr=n,this._lastFrP=e;var v=i.percent-r.percent,y=0===v?1:g((e-r.percent)/v,1);i.easingFunc&&(y=i.easingFunc(y));var b=a?this._additiveValue:d?S:t[h];if(!_(u)&&!d||b||(b=this._additiveValue=[]),this.discrete)t[h]=y<1?r.rawValue:i.rawValue;else if(_(u))1===u?p(b,r[s],i[s],y):function(t,e,n,r){for(var i=e.length,o=i&&e[0].length,a=0;a<i;a++){t[a]||(t[a]=[]);for(var s=0;s<o;s++)t[a][s]=f(e[a][s],n[a][s],r)}}(b,r[s],i[s],y);else if(w(u)){var E=r[s],A=i[s],M=4===u;t[h]={type:M?"linear":"radial",x:f(E.x,A.x,y),y:f(E.y,A.y,y),colorStops:(0,o.map)(E.colorStops,(function(t,e){var n=A.colorStops[e];return{offset:f(t.offset,n.offset,y),color:x(p([],t.color,n.color,y))}})),global:A.global},M?(t[h].x2=f(E.x2,A.x2,y),t[h].y2=f(E.y2,A.y2,y)):t[h].r=f(E.r,A.r,y)}else if(d)p(b,r[s],i[s],y),a||(t[h]=x(b));else{var C=f(r[s],i[s],y);a?this._additiveValue=C:t[h]=C}a&&this._addToTarget(t)}}},t.prototype._addToTarget=function(t){var e=this.valType,n=this.propName,r=this._additiveValue;0===e?t[n]=t[n]+r:3===e?(c.parse(t[n],S),m(S,S,r,1),t[n]=x(S)):1===e?m(t[n],t[n],r,1):2===e&&g(t[n],t[n],r,1)},t}();const A=function(){function t(t,e,n,r){this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=t,this._loop=e,e&&r?(0,o.logError)("Can' use additive animation on looped animation."):(this._additiveAnimators=r,this._allowDiscrete=n)}return t.prototype.getMaxTime=function(){return this._maxTime},t.prototype.getDelay=function(){return this._delay},t.prototype.getLoop=function(){return this._loop},t.prototype.getTarget=function(){return this._target},t.prototype.changeTarget=function(t){this._target=t},t.prototype.when=function(t,e,n){return this.whenWithKeys(t,e,(0,o.keys)(e),n)},t.prototype.whenWithKeys=function(t,e,n,r){for(var i=this._tracks,o=0;o<n.length;o++){var a=n[o],s=i[a];if(!s){s=i[a]=new E(a);var u=void 0,l=this._getAdditiveTrack(a);if(l){var c=l.keyframes,h=c[c.length-1];u=h&&h.value,3===l.valType&&u&&(u=x(u))}else u=this._target[a];if(null==u)continue;t>0&&s.addKeyframe(0,b(u),r),this._trackKeys.push(a)}s.addKeyframe(t,b(e[a]),r)}return this._maxTime=Math.max(this._maxTime,t),this},t.prototype.pause=function(){this._clip.pause(),this._paused=!0},t.prototype.resume=function(){this._clip.resume(),this._paused=!1},t.prototype.isPaused=function(){return!!this._paused},t.prototype.duration=function(t){return this._maxTime=t,this._force=!0,this},t.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var t=this._doneCbs;if(t)for(var e=t.length,n=0;n<e;n++)t[n].call(this)},t.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,e=this._abortedCbs;if(t&&t.removeClip(this._clip),this._clip=null,e)for(var n=0;n<e.length;n++)e[n].call(this)},t.prototype._setTracksFinished=function(){for(var t=this._tracks,e=this._trackKeys,n=0;n<e.length;n++)t[e[n]].setFinished()},t.prototype._getAdditiveTrack=function(t){var e,n=this._additiveAnimators;if(n)for(var r=0;r<n.length;r++){var i=n[r].getTrack(t);i&&(e=i)}return e},t.prototype.start=function(t){if(!(this._started>0)){this._started=1;for(var e=this,n=[],r=this._maxTime||0,i=0;i<this._trackKeys.length;i++){var o=this._trackKeys[i],a=this._tracks[o],s=this._getAdditiveTrack(o),u=a.keyframes,c=u.length;if(a.prepare(r,s),a.needsAnimate())if(!this._allowDiscrete&&a.discrete){var h=u[c-1];h&&(e._target[a.propName]=h.rawValue),a.setFinished()}else n.push(a)}if(n.length||this._force){var d=new l({life:r,loop:this._loop,delay:this._delay||0,onframe:function(t){e._started=2;var r=e._additiveAnimators;if(r){for(var i=!1,o=0;o<r.length;o++)if(r[o]._clip){i=!0;break}i||(e._additiveAnimators=null)}for(o=0;o<n.length;o++)n[o].step(e._target,t);var a=e._onframeCbs;if(a)for(o=0;o<a.length;o++)a[o](e._target,t)},ondestroy:function(){e._doneCallback()}});this._clip=d,this.animation&&this.animation.addClip(d),t&&d.setEasing(t)}else this._doneCallback();return this}},t.prototype.stop=function(t){if(this._clip){var e=this._clip;t&&e.onframe(1),this._abortedCallback()}},t.prototype.delay=function(t){return this._delay=t,this},t.prototype.during=function(t){return t&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(t)),this},t.prototype.done=function(t){return t&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(t)),this},t.prototype.aborted=function(t){return t&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(t)),this},t.prototype.getClip=function(){return this._clip},t.prototype.getTrack=function(t){return this._tracks[t]},t.prototype.getTracks=function(){var t=this;return(0,o.map)(this._trackKeys,(function(e){return t._tracks[e]}))},t.prototype.stopTracks=function(t,e){if(!t.length||!this._clip)return!0;for(var n=this._tracks,r=this._trackKeys,i=0;i<t.length;i++){var o=n[t[i]];o&&!o.isFinished()&&(e?o.step(this._target,1):1===this._started&&o.step(this._target,0),o.setFinished())}var a=!0;for(i=0;i<r.length;i++)if(!n[r[i]].isFinished()){a=!1;break}return a&&this._abortedCallback(),a},t.prototype.saveTo=function(t,e,n){if(t){e=e||this._trackKeys;for(var r=0;r<e.length;r++){var i=e[r],o=this._tracks[i];if(o&&!o.isFinished()){var a=o.keyframes,s=a[n?0:a.length-1];s&&(t[i]=b(s.rawValue))}}}},t.prototype.__changeFinalValue=function(t,e){e=e||(0,o.keys)(t);for(var n=0;n<e.length;n++){var r=e[n],i=this._tracks[r];if(i){var a=i.keyframes;if(a.length>1){var s=a.pop();i.addKeyframe(s.time,t[r]),i.prepare(this._maxTime,i.getAdditiveTrack())}}}},t}()},45825:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r=n(38123).A.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){return setTimeout(t,16)}},30536:(t,e,n)=>{"use strict";n.d(e,{A:()=>x});var r=n(73098),i=n(98026),o=n(15727),a=n(57861),s=n(53479),u=n(16104),l=n(29308),c=n(56448),h=n(59741);function d(t,e,n){var r=h.yh.createCanvas(),i=e.getWidth(),o=e.getHeight(),a=r.style;return a&&(a.position="absolute",a.left="0",a.top="0",a.width=i+"px",a.height=o+"px",r.setAttribute("data-zr-dom-id",t)),r.width=i*n,r.height=o*n,r}const f=function(t){function e(e,n,o){var a,s=t.call(this)||this;s.motionBlur=!1,s.lastFrameAlpha=.7,s.dpr=1,s.virtual=!1,s.config={},s.incremental=!1,s.zlevel=0,s.maxRepaintRectCount=5,s.__dirty=!0,s.__firstTimePaint=!0,s.__used=!1,s.__drawIndex=0,s.__startIndex=0,s.__endIndex=0,s.__prevStartIndex=null,s.__prevEndIndex=null,o=o||r.Y5,"string"==typeof e?a=d(e,n,o):i.isObject(e)&&(e=(a=e).id),s.id=e,s.dom=a;var u=a.style;return u&&(i.disableUserSelect(a),a.onselectstart=function(){return!1},u.padding="0",u.margin="0",u.borderWidth="0"),s.painter=n,s.dpr=o,s}return(0,o.C6)(e,t),e.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},e.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},e.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},e.prototype.setUnpainted=function(){this.__firstTimePaint=!0},e.prototype.createBackBuffer=function(){var t=this.dpr;this.domBack=d("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),1!==t&&this.ctxBack.scale(t,t)},e.prototype.createRepaintRects=function(t,e,n,r){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var i,o=[],a=this.maxRepaintRectCount,s=!1,u=new l.A(0,0,0,0);function h(t){if(t.isFinite()&&!t.isZero())if(0===o.length){(e=new l.A(0,0,0,0)).copy(t),o.push(e)}else{for(var e,n=!1,r=1/0,i=0,c=0;c<o.length;++c){var h=o[c];if(h.intersect(t)){var d=new l.A(0,0,0,0);d.copy(h),d.union(t),o[c]=d,n=!0;break}if(s){u.copy(t),u.union(h);var f=t.width*t.height,p=h.width*h.height,m=u.width*u.height-f-p;m<r&&(r=m,i=c)}}if(s&&(o[i].union(t),n=!0),!n)(e=new l.A(0,0,0,0)).copy(t),o.push(e);s||(s=o.length>=a)}}for(var d=this.__startIndex;d<this.__endIndex;++d){if(m=t[d]){var f=m.shouldBePainted(n,r,!0,!0);(g=m.__isRendered&&(m.__dirty&c.M||!f)?m.getPrevPaintRect():null)&&h(g);var p=f&&(m.__dirty&c.M||!m.__isRendered)?m.getPaintRect():null;p&&h(p)}}for(d=this.__prevStartIndex;d<this.__prevEndIndex;++d){var m,g;f=(m=e[d])&&m.shouldBePainted(n,r,!0,!0);if(m&&(!f||!m.__zr)&&m.__isRendered)(g=m.getPrevPaintRect())&&h(g)}do{i=!1;for(d=0;d<o.length;)if(o[d].isZero())o.splice(d,1);else{for(var v=d+1;v<o.length;)o[d].intersect(o[v])?(i=!0,o[d].union(o[v]),o.splice(v,1)):v++;d++}}while(i);return this._paintRects=o,o},e.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},e.prototype.resize=function(t,e){var n=this.dpr,r=this.dom,i=r.style,o=this.domBack;i&&(i.width=t+"px",i.height=e+"px"),r.width=t*n,r.height=e*n,o&&(o.width=t*n,o.height=e*n,1!==n&&this.ctxBack.scale(n,n))},e.prototype.clear=function(t,e,n){var r=this.dom,o=this.ctx,a=r.width,l=r.height;e=e||this.clearColor;var c=this.motionBlur&&!t,h=this.lastFrameAlpha,d=this.dpr,f=this;c&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(r,0,0,a/d,l/d));var p=this.domBack;function m(t,n,r,a){if(o.clearRect(t,n,r,a),e&&"transparent"!==e){var l=void 0;if(i.isGradientObject(e))l=(e.global||e.__width===r&&e.__height===a)&&e.__canvasGradient||(0,s.Ff)(o,e,{x:0,y:0,width:r,height:a}),e.__canvasGradient=l,e.__width=r,e.__height=a;else i.isImagePatternObject(e)&&(e.scaleX=e.scaleX||d,e.scaleY=e.scaleY||d,l=(0,u.ZQ)(o,e,{dirty:function(){f.setUnpainted(),f.painter.refresh()}}));o.save(),o.fillStyle=l||e,o.fillRect(t,n,r,a),o.restore()}c&&(o.save(),o.globalAlpha=h,o.drawImage(p,t,n,r,a),o.restore())}!n||c?m(0,0,a,l):n.length&&i.each(n,(function(t){m(t.x*d,t.y*d,t.width*d,t.height*d)}))},e}(a.A);var p=n(45825),m=n(38123),g=1e5,v=314159,y=.01;var b=function(){function t(t,e,n,o){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var a=!t.nodeName||"CANVAS"===t.nodeName.toUpperCase();this._opts=n=i.extend({},n||{}),this.dpr=n.devicePixelRatio||r.Y5,this._singleCanvas=a,this.root=t,t.style&&(i.disableUserSelect(t),t.innerHTML=""),this.storage=e;var u=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(a){var c=t,h=c.width,d=c.height;null!=n.width&&(h=n.width),null!=n.height&&(d=n.height),this.dpr=n.devicePixelRatio||1,c.width=h*this.dpr,c.height=d*this.dpr,this._width=h,this._height=d;var p=new f(c,this,this.dpr);p.__builtin__=!0,p.initContext(),l[314159]=p,p.zlevel=v,u.push(v),this._domRoot=t}else{this._width=(0,s.YC)(t,0,n),this._height=(0,s.YC)(t,1,n);var m=this._domRoot=function(t,e){var n=document.createElement("div");return n.style.cssText=["position:relative","width:"+t+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",n}(this._width,this._height);t.appendChild(m)}}return t.prototype.getType=function(){return"canvas"},t.prototype.isSingleCanvas=function(){return this._singleCanvas},t.prototype.getViewportRoot=function(){return this._domRoot},t.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},t.prototype.refresh=function(t){var e=this.storage.getDisplayList(!0),n=this._prevDisplayList,r=this._zlevelList;this._redrawId=Math.random(),this._paintList(e,n,t,this._redrawId);for(var i=0;i<r.length;i++){var o=r[i],a=this._layers[o];if(!a.__builtin__&&a.refresh){var s=0===i?this._backgroundColor:null;a.refresh(s)}}return this._opts.useDirtyRect&&(this._prevDisplayList=e.slice()),this},t.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},t.prototype._paintHoverList=function(t){var e=t.length,n=this._hoverlayer;if(n&&n.clear(),e){for(var r,i={inHover:!0,viewWidth:this._width,viewHeight:this._height},o=0;o<e;o++){var a=t[o];a.__inHover&&(n||(n=this._hoverlayer=this.getLayer(g)),r||(r=n.ctx).save(),(0,u.V$)(r,a,i,o===e-1))}r&&r.restore()}},t.prototype.getHoverLayer=function(){return this.getLayer(g)},t.prototype.paintOne=function(t,e){(0,u.Xi)(t,e)},t.prototype._paintList=function(t,e,n,r){if(this._redrawId===r){n=n||!1,this._updateLayerStatus(t);var i=this._doPaintList(t,e,n),o=i.finished,a=i.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),a&&this._paintHoverList(t),o)this.eachLayer((function(t){t.afterBrush&&t.afterBrush()}));else{var s=this;(0,p.A)((function(){s._paintList(t,e,n,r)}))}}},t.prototype._compositeManually=function(){var t=this.getLayer(v).ctx,e=this._domRoot.width,n=this._domRoot.height;t.clearRect(0,0,e,n),this.eachBuiltinLayer((function(r){r.virtual&&t.drawImage(r.dom,0,0,e,n)}))},t.prototype._doPaintList=function(t,e,n){for(var r=this,o=[],a=this._opts.useDirtyRect,s=0;s<this._zlevelList.length;s++){var u=this._zlevelList[s],l=this._layers[u];l.__builtin__&&l!==this._hoverlayer&&(l.__dirty||n)&&o.push(l)}for(var c=!0,h=!1,d=function(i){var s,u=o[i],l=u.ctx,d=a&&u.createRepaintRects(t,e,f._width,f._height),p=n?u.__startIndex:u.__drawIndex,m=!n&&u.incremental&&Date.now,g=m&&Date.now(),v=u.zlevel===f._zlevelList[0]?f._backgroundColor:null;if(u.__startIndex===u.__endIndex)u.clear(!1,v,d);else if(p===u.__startIndex){var y=t[p];y.incremental&&y.notClear&&!n||u.clear(!1,v,d)}-1===p&&(console.error("For some unknown reason. drawIndex is -1"),p=u.__startIndex);var b=function(e){var n={inHover:!1,allClipped:!1,prevEl:null,viewWidth:r._width,viewHeight:r._height};for(s=p;s<u.__endIndex;s++){var i=t[s];if(i.__inHover&&(h=!0),r._doPaintEl(i,u,a,e,n,s===u.__endIndex-1),m)if(Date.now()-g>15)break}n.prevElClipPaths&&l.restore()};if(d)if(0===d.length)s=u.__endIndex;else for(var x=f.dpr,w=0;w<d.length;++w){var _=d[w];l.save(),l.beginPath(),l.rect(_.x*x,_.y*x,_.width*x,_.height*x),l.clip(),b(_),l.restore()}else l.save(),b(),l.restore();u.__drawIndex=s,u.__drawIndex<u.__endIndex&&(c=!1)},f=this,p=0;p<o.length;p++)d(p);return m.A.wxa&&i.each(this._layers,(function(t){t&&t.ctx&&t.ctx.draw&&t.ctx.draw()})),{finished:c,needsRefreshHover:h}},t.prototype._doPaintEl=function(t,e,n,r,i,o){var a=e.ctx;if(n){var s=t.getPaintRect();(!r||s&&s.intersect(r))&&((0,u.V$)(a,t,i,o),t.setPrevPaintRect(s))}else(0,u.V$)(a,t,i,o)},t.prototype.getLayer=function(t,e){this._singleCanvas&&!this._needsManuallyCompositing&&(t=v);var n=this._layers[t];return n||((n=new f("zr_"+t,this,this.dpr)).zlevel=t,n.__builtin__=!0,this._layerConfig[t]?i.merge(n,this._layerConfig[t],!0):this._layerConfig[t-y]&&i.merge(n,this._layerConfig[t-y],!0),e&&(n.virtual=e),this.insertLayer(t,n),n.initContext()),n},t.prototype.insertLayer=function(t,e){var n=this._layers,r=this._zlevelList,i=r.length,o=this._domRoot,a=null,s=-1;if(!n[t]&&function(t){return!!t&&(!!t.__builtin__||"function"==typeof t.resize&&"function"==typeof t.refresh)}(e)){if(i>0&&t>r[0]){for(s=0;s<i-1&&!(r[s]<t&&r[s+1]>t);s++);a=n[r[s]]}if(r.splice(s+1,0,t),n[t]=e,!e.virtual)if(a){var u=a.dom;u.nextSibling?o.insertBefore(e.dom,u.nextSibling):o.appendChild(e.dom)}else o.firstChild?o.insertBefore(e.dom,o.firstChild):o.appendChild(e.dom);e.painter||(e.painter=this)}},t.prototype.eachLayer=function(t,e){for(var n=this._zlevelList,r=0;r<n.length;r++){var i=n[r];t.call(e,this._layers[i],i)}},t.prototype.eachBuiltinLayer=function(t,e){for(var n=this._zlevelList,r=0;r<n.length;r++){var i=n[r],o=this._layers[i];o.__builtin__&&t.call(e,o,i)}},t.prototype.eachOtherLayer=function(t,e){for(var n=this._zlevelList,r=0;r<n.length;r++){var i=n[r],o=this._layers[i];o.__builtin__||t.call(e,o,i)}},t.prototype.getLayers=function(){return this._layers},t.prototype._updateLayerStatus=function(t){function e(t){a&&(a.__endIndex!==t&&(a.__dirty=!0),a.__endIndex=t)}if(this.eachBuiltinLayer((function(t,e){t.__dirty=t.__used=!1})),this._singleCanvas)for(var n=1;n<t.length;n++){if((u=t[n]).zlevel!==t[n-1].zlevel||u.incremental){this._needsManuallyCompositing=!0;break}}var r,o,a=null,s=0;for(o=0;o<t.length;o++){var u,l=(u=t[o]).zlevel,h=void 0;r!==l&&(r=l,s=0),u.incremental?((h=this.getLayer(l+.001,this._needsManuallyCompositing)).incremental=!0,s=1):h=this.getLayer(l+(s>0?y:0),this._needsManuallyCompositing),h.__builtin__||i.logError("ZLevel "+l+" has been used by unkown layer "+h.id),h!==a&&(h.__used=!0,h.__startIndex!==o&&(h.__dirty=!0),h.__startIndex=o,h.incremental?h.__drawIndex=-1:h.__drawIndex=o,e(o),a=h),u.__dirty&c.M&&!u.__inHover&&(h.__dirty=!0,h.incremental&&h.__drawIndex<0&&(h.__drawIndex=o))}e(o),this.eachBuiltinLayer((function(t,e){!t.__used&&t.getElementCount()>0&&(t.__dirty=!0,t.__startIndex=t.__endIndex=t.__drawIndex=0),t.__dirty&&t.__drawIndex<0&&(t.__drawIndex=t.__startIndex)}))},t.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},t.prototype._clearLayer=function(t){t.clear()},t.prototype.setBackgroundColor=function(t){this._backgroundColor=t,i.each(this._layers,(function(t){t.setUnpainted()}))},t.prototype.configLayer=function(t,e){if(e){var n=this._layerConfig;n[t]?i.merge(n[t],e,!0):n[t]=e;for(var r=0;r<this._zlevelList.length;r++){var o=this._zlevelList[r];if(o===t||o===t+y){var a=this._layers[o];i.merge(a,n[t],!0)}}}},t.prototype.delLayer=function(t){var e=this._layers,n=this._zlevelList,r=e[t];r&&(r.dom.parentNode.removeChild(r.dom),delete e[t],n.splice(i.indexOf(n,t),1))},t.prototype.resize=function(t,e){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var r=this._opts,i=this.root;if(null!=t&&(r.width=t),null!=e&&(r.height=e),t=(0,s.YC)(i,0,r),e=(0,s.YC)(i,1,r),n.style.display="",this._width!==t||e!==this._height){for(var o in n.style.width=t+"px",n.style.height=e+"px",this._layers)this._layers.hasOwnProperty(o)&&this._layers[o].resize(t,e);this.refresh(!0)}this._width=t,this._height=e}else{if(null==t||null==e)return;this._width=t,this._height=e,this.getLayer(v).resize(t,e)}return this},t.prototype.clearLayer=function(t){var e=this._layers[t];e&&e.clear()},t.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},t.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[314159].dom;var e=new f("image",this,t.pixelRatio||this.dpr);e.initContext(),e.clear(!1,t.backgroundColor||this._backgroundColor);var n=e.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var r=e.dom.width,i=e.dom.height;this.eachLayer((function(t){t.__builtin__?n.drawImage(t.dom,0,0,r,i):t.renderToCanvas&&(n.save(),t.renderToCanvas(n),n.restore())}))}else for(var o={inHover:!1,viewWidth:this._width,viewHeight:this._height},a=this.storage.getDisplayList(!0),s=0,l=a.length;s<l;s++){var c=a[s];(0,u.V$)(n,c,o,s===l-1)}return e.dom},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t}();const x=b},16104:(t,e,n)=>{"use strict";n.d(e,{V$:()=>O,Xi:()=>P,ZQ:()=>x});var r=n(71519),i=n(68717),o=n(12191),a=n(53479),s=n(69099),u=n(90540),l=n(19845),c=n(98026);function h(t){var e,n,r=t.style,i=r.lineDash&&r.lineWidth>0&&(e=r.lineDash,n=r.lineWidth,e&&"solid"!==e&&n>0?"dashed"===e?[4*n,2*n]:"dotted"===e?[n]:(0,c.isNumber)(e)?[e]:(0,c.isArray)(e)?e:null:null),o=r.lineDashOffset;if(i){var a=r.strokeNoScale&&t.getLineScale?t.getLineScale():1;a&&1!==a&&(i=(0,c.map)(i,(function(t){return t/a})),o/=a)}return[i,o]}var d=n(56448),f=n(59741),p=new i.A(!0);function m(t){var e=t.stroke;return!(null==e||"none"===e||!(t.lineWidth>0))}function g(t){return"string"==typeof t&&"none"!==t}function v(t){var e=t.fill;return null!=e&&"none"!==e}function y(t,e){if(null!=e.fillOpacity&&1!==e.fillOpacity){var n=t.globalAlpha;t.globalAlpha=e.fillOpacity*e.opacity,t.fill(),t.globalAlpha=n}else t.fill()}function b(t,e){if(null!=e.strokeOpacity&&1!==e.strokeOpacity){var n=t.globalAlpha;t.globalAlpha=e.strokeOpacity*e.opacity,t.stroke(),t.globalAlpha=n}else t.stroke()}function x(t,e,n){var r=(0,o.OD)(e.image,e.__image,n);if((0,o.xA)(r)){var i=t.createPattern(r,e.repeat||"repeat");if("function"==typeof DOMMatrix&&i&&i.setTransform){var a=new DOMMatrix;a.translateSelf(e.x||0,e.y||0),a.rotateSelf(0,0,(e.rotation||0)*c.RADIAN_TO_DEGREE),a.scaleSelf(e.scaleX||1,e.scaleY||1),i.setTransform(a)}return i}}var w=["shadowBlur","shadowOffsetX","shadowOffsetY"],_=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function S(t,e,n,i,o){var a=!1;if(!i&&e===(n=n||{}))return!1;if(i||e.opacity!==n.opacity){I(t,o),a=!0;var s=Math.max(Math.min(e.opacity,1),0);t.globalAlpha=isNaN(s)?r.oN.opacity:s}(i||e.blend!==n.blend)&&(a||(I(t,o),a=!0),t.globalCompositeOperation=e.blend||r.oN.blend);for(var u=0;u<w.length;u++){var l=w[u];(i||e[l]!==n[l])&&(a||(I(t,o),a=!0),t[l]=t.dpr*(e[l]||0))}return(i||e.shadowColor!==n.shadowColor)&&(a||(I(t,o),a=!0),t.shadowColor=e.shadowColor||r.oN.shadowColor),a}function E(t,e,n,r,i){var o=N(e,i.inHover),a=r?null:n&&N(n,i.inHover)||{};if(o===a)return!1;var s=S(t,o,a,r,i);if((r||o.fill!==a.fill)&&(s||(I(t,i),s=!0),g(o.fill)&&(t.fillStyle=o.fill)),(r||o.stroke!==a.stroke)&&(s||(I(t,i),s=!0),g(o.stroke)&&(t.strokeStyle=o.stroke)),(r||o.opacity!==a.opacity)&&(s||(I(t,i),s=!0),t.globalAlpha=null==o.opacity?1:o.opacity),e.hasStroke()){var u=o.lineWidth/(o.strokeNoScale&&e.getLineScale?e.getLineScale():1);t.lineWidth!==u&&(s||(I(t,i),s=!0),t.lineWidth=u)}for(var l=0;l<_.length;l++){var c=_[l],h=c[0];(r||o[h]!==a[h])&&(s||(I(t,i),s=!0),t[h]=o[h]||c[1])}return s}function A(t,e){var n=e.transform,r=t.dpr||1;n?t.setTransform(r*n[0],r*n[1],r*n[2],r*n[3],r*n[4],r*n[5]):t.setTransform(r,0,0,r,0,0)}var M=1,C=2,T=3,k=4;function I(t,e){e.batchFill&&t.fill(),e.batchStroke&&t.stroke(),e.batchFill="",e.batchStroke=""}function N(t,e){return e&&t.__hoverStyle||t.style}function P(t,e){O(t,e,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function O(t,e,n,r){var i=e.transform;if(!e.shouldBePainted(n.viewWidth,n.viewHeight,!1,!1))return e.__dirty&=~d.M,void(e.__isRendered=!1);var c=e.__clipPaths,g=n.prevElClipPaths,w=!1,_=!1;if(g&&!(0,a.KU)(c,g)||(g&&g.length&&(I(t,n),t.restore(),_=w=!0,n.prevElClipPaths=null,n.allClipped=!1,n.prevEl=null),c&&c.length&&(I(t,n),t.save(),function(t,e,n){for(var r=!1,i=0;i<t.length;i++){var o=t[i];r=r||o.isZeroArea(),A(e,o),e.beginPath(),o.buildPath(e,o.shape),e.clip()}n.allClipped=r}(c,t,n),w=!0),n.prevElClipPaths=c),n.allClipped)e.__isRendered=!1;else{e.beforeBrush&&e.beforeBrush(),e.innerBeforeBrush();var P=n.prevEl;P||(_=w=!0);var L,R,D=e instanceof s.Ay&&e.autoBatch&&function(t){var e=v(t),n=m(t);return!(t.lineDash||!(+e^+n)||e&&"string"!=typeof t.fill||n&&"string"!=typeof t.stroke||t.strokePercent<1||t.strokeOpacity<1||t.fillOpacity<1)}(e.style);w||(L=i,R=P.transform,L&&R?L[0]!==R[0]||L[1]!==R[1]||L[2]!==R[2]||L[3]!==R[3]||L[4]!==R[4]||L[5]!==R[5]:L||R)?(I(t,n),A(t,e)):D||I(t,n);var z=N(e,n.inHover);e instanceof s.Ay?(n.lastDrawType!==M&&(_=!0,n.lastDrawType=M),E(t,e,P,_,n),D&&(n.batchFill||n.batchStroke)||t.beginPath(),function(t,e,n,r){var i,o=m(n),s=v(n),u=n.strokePercent,l=u<1,c=!e.path;e.silent&&!l||!c||e.createPathProxy();var f=e.path||p,g=e.__dirty;if(!r){var w=n.fill,_=n.stroke,S=s&&!!w.colorStops,E=o&&!!_.colorStops,A=s&&!!w.image,M=o&&!!_.image,C=void 0,T=void 0,k=void 0,I=void 0,N=void 0;(S||E)&&(N=e.getBoundingRect()),S&&(C=g?(0,a.Ff)(t,w,N):e.__canvasFillGradient,e.__canvasFillGradient=C),E&&(T=g?(0,a.Ff)(t,_,N):e.__canvasStrokeGradient,e.__canvasStrokeGradient=T),A&&(k=g||!e.__canvasFillPattern?x(t,w,e):e.__canvasFillPattern,e.__canvasFillPattern=k),M&&(I=g||!e.__canvasStrokePattern?x(t,_,e):e.__canvasStrokePattern,e.__canvasStrokePattern=k),S?t.fillStyle=C:A&&(k?t.fillStyle=k:s=!1),E?t.strokeStyle=T:M&&(I?t.strokeStyle=I:o=!1)}var P,O,L=e.getGlobalScale();f.setScale(L[0],L[1],e.segmentIgnoreThreshold),t.setLineDash&&n.lineDash&&(P=(i=h(e))[0],O=i[1]);var R=!0;(c||g&d.Dl)&&(f.setDPR(t.dpr),l?f.setContext(null):(f.setContext(t),R=!1),f.reset(),e.buildPath(f,e.shape,r),f.toStatic(),e.pathUpdated()),R&&f.rebuildPath(t,l?u:1),P&&(t.setLineDash(P),t.lineDashOffset=O),r||(n.strokeFirst?(o&&b(t,n),s&&y(t,n)):(s&&y(t,n),o&&b(t,n))),P&&t.setLineDash([])}(t,e,z,D),D&&(n.batchFill=z.fill||"",n.batchStroke=z.stroke||"")):e instanceof l.A?(n.lastDrawType!==T&&(_=!0,n.lastDrawType=T),E(t,e,P,_,n),function(t,e,n){var r,i=n.text;if(null!=i&&(i+=""),i){t.font=n.font||f.OH,t.textAlign=n.textAlign,t.textBaseline=n.textBaseline;var o=void 0,a=void 0;t.setLineDash&&n.lineDash&&(o=(r=h(e))[0],a=r[1]),o&&(t.setLineDash(o),t.lineDashOffset=a),n.strokeFirst?(m(n)&&t.strokeText(i,n.x,n.y),v(n)&&t.fillText(i,n.x,n.y)):(v(n)&&t.fillText(i,n.x,n.y),m(n)&&t.strokeText(i,n.x,n.y)),o&&t.setLineDash([])}}(t,e,z)):e instanceof u.Ay?(n.lastDrawType!==C&&(_=!0,n.lastDrawType=C),function(t,e,n,r,i){S(t,N(e,i.inHover),n&&N(n,i.inHover),r,i)}(t,e,P,_,n),function(t,e,n){var r=e.__image=(0,o.OD)(n.image,e.__image,e,e.onload);if(r&&(0,o.xA)(r)){var i=n.x||0,a=n.y||0,s=e.getWidth(),u=e.getHeight(),l=r.width/r.height;if(null==s&&null!=u?s=u*l:null==u&&null!=s?u=s/l:null==s&&null==u&&(s=r.width,u=r.height),n.sWidth&&n.sHeight){var c=n.sx||0,h=n.sy||0;t.drawImage(r,c,h,n.sWidth,n.sHeight,i,a,s,u)}else if(n.sx&&n.sy){var d=s-(c=n.sx),f=u-(h=n.sy);t.drawImage(r,c,h,d,f,i,a,s,u)}else t.drawImage(r,i,a,s,u)}}(t,e,z)):e.getTemporalDisplayables&&(n.lastDrawType!==k&&(_=!0,n.lastDrawType=k),function(t,e,n){var r=e.getDisplayables(),i=e.getTemporalDisplayables();t.save();var o,a,s={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:n.viewWidth,viewHeight:n.viewHeight,inHover:n.inHover};for(o=e.getCursor(),a=r.length;o<a;o++){(c=r[o]).beforeBrush&&c.beforeBrush(),c.innerBeforeBrush(),O(t,c,s,o===a-1),c.innerAfterBrush(),c.afterBrush&&c.afterBrush(),s.prevEl=c}for(var u=0,l=i.length;u<l;u++){var c;(c=i[u]).beforeBrush&&c.beforeBrush(),c.innerBeforeBrush(),O(t,c,s,u===l-1),c.innerAfterBrush(),c.afterBrush&&c.afterBrush(),s.prevEl=c}e.clearTemporalDisplayables(),e.notClear=!0,t.restore()}(t,e,n)),D&&r&&I(t,n),e.innerAfterBrush(),e.afterBrush&&e.afterBrush(),n.prevEl=e,e.__dirty=0,e.__isRendered=!0}}},53479:(t,e,n)=>{"use strict";function r(t){return isFinite(t)}function i(t,e,n){for(var i="radial"===e.type?function(t,e,n){var i=n.width,o=n.height,a=Math.min(i,o),s=null==e.x?.5:e.x,u=null==e.y?.5:e.y,l=null==e.r?.5:e.r;return e.global||(s=s*i+n.x,u=u*o+n.y,l*=a),s=r(s)?s:.5,u=r(u)?u:.5,l=l>=0&&r(l)?l:.5,t.createRadialGradient(s,u,0,s,u,l)}(t,e,n):function(t,e,n){var i=null==e.x?0:e.x,o=null==e.x2?1:e.x2,a=null==e.y?0:e.y,s=null==e.y2?0:e.y2;return e.global||(i=i*n.width+n.x,o=o*n.width+n.x,a=a*n.height+n.y,s=s*n.height+n.y),i=r(i)?i:0,o=r(o)?o:1,a=r(a)?a:0,s=r(s)?s:0,t.createLinearGradient(i,a,o,s)}(t,e,n),o=e.colorStops,a=0;a<o.length;a++)i.addColorStop(o[a].offset,o[a].color);return i}function o(t,e){if(t===e||!t&&!e)return!1;if(!t||!e||t.length!==e.length)return!0;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!0;return!1}function a(t){return parseInt(t,10)}function s(t,e,n){var r=["width","height"][e],i=["clientWidth","clientHeight"][e],o=["paddingLeft","paddingTop"][e],s=["paddingRight","paddingBottom"][e];if(null!=n[r]&&"auto"!==n[r])return parseFloat(n[r]);var u=document.defaultView.getComputedStyle(t);return(t[i]||a(u[r])||a(t.style[r]))-(a(u[o])||0)-(a(u[s])||0)|0}n.d(e,{Ff:()=>i,KU:()=>o,YC:()=>s})},73098:(t,e,n)=>{"use strict";n.d(e,{Y5:()=>i,_S:()=>a,el:()=>s,ps:()=>o,tY:()=>u});var r=1;n(38123).A.hasGlobalWindow&&(r=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var i=r,o=.4,a="#333",s="#ccc",u="#eee"},51183:(t,e,n)=>{"use strict";n.d(e,{l:()=>a});var r=n(76873),i=1e-8;function o(t,e){return Math.abs(t-e)<i}function a(t,e,n){var i=0,a=t[0];if(!a)return!1;for(var s=1;s<t.length;s++){var u=t[s];i+=(0,r.A)(a[0],a[1],u[0],u[1],e,n),a=u}var l=t[0];return o(a[0],l[0])&&o(a[1],l[1])||(i+=(0,r.A)(a[0],a[1],l[0],l[1],e,n)),0!==i}},45558:(t,e,n)=>{"use strict";n.d(e,{NO:()=>l,RG:()=>s,X4:()=>p,ks:()=>d,ll:()=>c,lo:()=>f,sZ:()=>h});var r=n(29308),i=n(60501),o=n(59741),a={};function s(t,e){e=e||o.OH;var n=a[e];n||(n=a[e]=new i.Ay(500));var r=n.get(t);return null==r&&(r=o.yh.measureText(t,e).width,n.put(t,r)),r}function u(t,e,n,i){var o=s(t,e),a=d(e),u=c(0,o,n),l=h(0,a,i);return new r.A(u,l,o,a)}function l(t,e,n,i){var o=((t||"")+"").split("\n");if(1===o.length)return u(o[0],e,n,i);for(var a=new r.A(0,0,0,0),s=0;s<o.length;s++){var l=u(o[s],e,n,i);0===s?a.copy(l):a.union(l)}return a}function c(t,e,n){return"right"===n?t-=e:"center"===n&&(t-=e/2),t}function h(t,e,n){return"middle"===n?t-=e/2:"bottom"===n&&(t-=e),t}function d(t){return s("",t)}function f(t,e){return"string"==typeof t?t.lastIndexOf("%")>=0?parseFloat(t)/100*e:parseFloat(t):t}function p(t,e,n){var r=e.position||"inside",i=null!=e.distance?e.distance:5,o=n.height,a=n.width,s=o/2,u=n.x,l=n.y,c="left",h="top";if(r instanceof Array)u+=f(r[0],n.width),l+=f(r[1],n.height),c=null,h=null;else switch(r){case"left":u-=i,l+=s,c="right",h="middle";break;case"right":u+=i+a,l+=s,h="middle";break;case"top":u+=a/2,l-=i,c="center",h="bottom";break;case"bottom":u+=a/2,l+=o+i,c="center";break;case"inside":u+=a/2,l+=s,c="center",h="middle";break;case"insideLeft":u+=i,l+=s,h="middle";break;case"insideRight":u+=a-i,l+=s,c="right",h="middle";break;case"insideTop":u+=a/2,l+=i,c="center";break;case"insideBottom":u+=a/2,l+=o-i,c="center",h="bottom";break;case"insideTopLeft":u+=i,l+=i;break;case"insideTopRight":u+=a-i,l+=i,c="right";break;case"insideBottomLeft":u+=i,l+=o-i,h="bottom";break;case"insideBottomRight":u+=a-i,l+=o-i,c="right",h="bottom"}return(t=t||{}).x=u,t.y=l,t.align=c,t.verticalAlign=h,t}},41589:(t,e,n)=>{"use strict";n.d(e,{n:()=>i});var r=2*Math.PI;function i(t){return(t%=r)<0&&(t+=r),t}},76873:(t,e,n)=>{"use strict";function r(t,e,n,r,i,o){if(o>e&&o>r||o<e&&o<r)return 0;if(r===e)return 0;var a=(o-e)/(r-e),s=r<e?1:-1;1!==a&&0!==a||(s=r<e?.5:-.5);var u=a*(n-t)+t;return u===i?1/0:u>i?s:0}n.d(e,{A:()=>r})},29308:(t,e,n)=>{"use strict";n.d(e,{A:()=>f});var r=n(45587),i=n(26346),o=Math.min,a=Math.max,s=new i.A,u=new i.A,l=new i.A,c=new i.A,h=new i.A,d=new i.A;const f=function(){function t(t,e,n,r){n<0&&(t+=n,n=-n),r<0&&(e+=r,r=-r),this.x=t,this.y=e,this.width=n,this.height=r}return t.prototype.union=function(t){var e=o(t.x,this.x),n=o(t.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=a(t.x+t.width,this.x+this.width)-e:this.width=t.width,isFinite(this.y)&&isFinite(this.height)?this.height=a(t.y+t.height,this.y+this.height)-n:this.height=t.height,this.x=e,this.y=n},t.prototype.applyTransform=function(e){t.applyTransform(this,this,e)},t.prototype.calculateTransform=function(t){var e=this,n=t.width/e.width,i=t.height/e.height,o=r.create();return r.translate(o,o,[-e.x,-e.y]),r.scale(o,o,[n,i]),r.translate(o,o,[t.x,t.y]),o},t.prototype.intersect=function(e,n){if(!e)return!1;e instanceof t||(e=t.create(e));var r=this,o=r.x,a=r.x+r.width,s=r.y,u=r.y+r.height,l=e.x,c=e.x+e.width,f=e.y,p=e.y+e.height,m=!(a<l||c<o||u<f||p<s);if(n){var g=1/0,v=0,y=Math.abs(a-l),b=Math.abs(c-o),x=Math.abs(u-f),w=Math.abs(p-s),_=Math.min(y,b),S=Math.min(x,w);a<l||c<o?_>v&&(v=_,y<b?i.A.set(d,-y,0):i.A.set(d,b,0)):_<g&&(g=_,y<b?i.A.set(h,y,0):i.A.set(h,-b,0)),u<f||p<s?S>v&&(v=S,x<w?i.A.set(d,0,-x):i.A.set(d,0,w)):_<g&&(g=_,x<w?i.A.set(h,0,x):i.A.set(h,0,-w))}return n&&i.A.copy(n,m?h:d),m},t.prototype.contain=function(t,e){var n=this;return t>=n.x&&t<=n.x+n.width&&e>=n.y&&e<=n.y+n.height},t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(e){t.copy(this,e)},t.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},t.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},t.prototype.isZero=function(){return 0===this.width||0===this.height},t.create=function(e){return new t(e.x,e.y,e.width,e.height)},t.copy=function(t,e){t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height},t.applyTransform=function(e,n,r){if(r){if(r[1]<1e-5&&r[1]>-1e-5&&r[2]<1e-5&&r[2]>-1e-5){var i=r[0],h=r[3],d=r[4],f=r[5];return e.x=n.x*i+d,e.y=n.y*h+f,e.width=n.width*i,e.height=n.height*h,e.width<0&&(e.x+=e.width,e.width=-e.width),void(e.height<0&&(e.y+=e.height,e.height=-e.height))}s.x=l.x=n.x,s.y=c.y=n.y,u.x=c.x=n.x+n.width,u.y=l.y=n.y+n.height,s.transform(r),c.transform(r),u.transform(r),l.transform(r),e.x=o(s.x,u.x,l.x,c.x),e.y=o(s.y,u.y,l.y,c.y);var p=a(s.x,u.x,l.x,c.x),m=a(s.y,u.y,l.y,c.y);e.width=p-e.x,e.height=m-e.y}else e!==n&&t.copy(e,n)},t}()},57861:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r=function(){function t(t){t&&(this._$eventProcessor=t)}return t.prototype.on=function(t,e,n,r){this._$handlers||(this._$handlers={});var i=this._$handlers;if("function"==typeof e&&(r=n,n=e,e=null),!n||!t)return this;var o=this._$eventProcessor;null!=e&&o&&o.normalizeQuery&&(e=o.normalizeQuery(e)),i[t]||(i[t]=[]);for(var a=0;a<i[t].length;a++)if(i[t][a].h===n)return this;var s={h:n,query:e,ctx:r||this,callAtLast:n.zrEventfulCallAtLast},u=i[t].length-1,l=i[t][u];return l&&l.callAtLast?i[t].splice(u,0,s):i[t].push(s),this},t.prototype.isSilent=function(t){var e=this._$handlers;return!e||!e[t]||!e[t].length},t.prototype.off=function(t,e){var n=this._$handlers;if(!n)return this;if(!t)return this._$handlers={},this;if(e){if(n[t]){for(var r=[],i=0,o=n[t].length;i<o;i++)n[t][i].h!==e&&r.push(n[t][i]);n[t]=r}n[t]&&0===n[t].length&&delete n[t]}else delete n[t];return this},t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!this._$handlers)return this;var r=this._$handlers[t],i=this._$eventProcessor;if(r)for(var o=e.length,a=r.length,s=0;s<a;s++){var u=r[s];if(!i||!i.filter||null==u.query||i.filter(t,u.query))switch(o){case 0:u.h.call(u.ctx);break;case 1:u.h.call(u.ctx,e[0]);break;case 2:u.h.call(u.ctx,e[0],e[1]);break;default:u.h.apply(u.ctx,e)}}return i&&i.afterTrigger&&i.afterTrigger(t),this},t.prototype.triggerWithContext=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!this._$handlers)return this;var r=this._$handlers[t],i=this._$eventProcessor;if(r)for(var o=e.length,a=e[o-1],s=r.length,u=0;u<s;u++){var l=r[u];if(!i||!i.filter||null==l.query||i.filter(t,l.query))switch(o){case 0:l.h.call(a);break;case 1:l.h.call(a,e[0]);break;case 2:l.h.call(a,e[0],e[1]);break;default:l.h.apply(a,e.slice(1,o-1))}}return i&&i.afterTrigger&&i.afterTrigger(t),this},t}()},60501:(t,e,n)=>{"use strict";n.d(e,{Ay:()=>o});var r=function(t){this.value=t},i=function(){function t(){this._len=0}return t.prototype.insert=function(t){var e=new r(t);return this.insertEntry(e),e},t.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},t.prototype.remove=function(t){var e=t.prev,n=t.next;e?e.next=n:this.head=n,n?n.prev=e:this.tail=e,t.next=t.prev=null,this._len--},t.prototype.len=function(){return this._len},t.prototype.clear=function(){this.head=this.tail=null,this._len=0},t}();const o=function(){function t(t){this._list=new i,this._maxSize=10,this._map={},this._maxSize=t}return t.prototype.put=function(t,e){var n=this._list,i=this._map,o=null;if(null==i[t]){var a=n.len(),s=this._lastRemovedEntry;if(a>=this._maxSize&&a>0){var u=n.head;n.remove(u),delete i[u.key],o=u.value,this._lastRemovedEntry=u}s?s.value=e:s=new r(e),s.key=t,n.insertEntry(s),i[t]=s}return o},t.prototype.get=function(t){var e=this._map[t],n=this._list;if(null!=e)return e!==n.tail&&(n.remove(e),n.insertEntry(e)),e.value},t.prototype.clear=function(){this._list.clear(),this._map={}},t.prototype.len=function(){return this._list.len()},t}()},84716:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(26346),i=[0,0],o=[0,0],a=new r.A,s=new r.A;const u=function(){function t(t,e){this._corners=[],this._axes=[],this._origin=[0,0];for(var n=0;n<4;n++)this._corners[n]=new r.A;for(n=0;n<2;n++)this._axes[n]=new r.A;t&&this.fromBoundingRect(t,e)}return t.prototype.fromBoundingRect=function(t,e){var n=this._corners,i=this._axes,o=t.x,a=t.y,s=o+t.width,u=a+t.height;if(n[0].set(o,a),n[1].set(s,a),n[2].set(s,u),n[3].set(o,u),e)for(var l=0;l<4;l++)n[l].transform(e);r.A.sub(i[0],n[1],n[0]),r.A.sub(i[1],n[3],n[0]),i[0].normalize(),i[1].normalize();for(l=0;l<2;l++)this._origin[l]=i[l].dot(n[0])},t.prototype.intersect=function(t,e){var n=!0,i=!e;return a.set(1/0,1/0),s.set(0,0),!this._intersectCheckOneSide(this,t,a,s,i,1)&&(n=!1,i)||!this._intersectCheckOneSide(t,this,a,s,i,-1)&&(n=!1,i)||i||r.A.copy(e,n?a:s),n},t.prototype._intersectCheckOneSide=function(t,e,n,a,s,u){for(var l=!0,c=0;c<2;c++){var h=this._axes[c];if(this._getProjMinMaxOnAxis(c,t._corners,i),this._getProjMinMaxOnAxis(c,e._corners,o),i[1]<o[0]||i[0]>o[1]){if(l=!1,s)return l;var d=Math.abs(o[0]-i[1]),f=Math.abs(i[0]-o[1]);Math.min(d,f)>a.len()&&(d<f?r.A.scale(a,h,-d*u):r.A.scale(a,h,f*u))}else if(n){d=Math.abs(o[0]-i[1]),f=Math.abs(i[0]-o[1]);Math.min(d,f)<n.len()&&(d<f?r.A.scale(n,h,d*u):r.A.scale(n,h,-f*u))}}return l},t.prototype._getProjMinMaxOnAxis=function(t,e,n){for(var r=this._axes[t],i=this._origin,o=e[0].dot(r)+i[t],a=o,s=o,u=1;u<e.length;u++){var l=e[u].dot(r)+i[t];a=Math.min(l,a),s=Math.max(l,s)}n[0]=a,n[1]=s},t}()},68717:(t,e,n)=>{"use strict";n.d(e,{A:()=>M,q:()=>A});var r=n(83509),i=n(29308),o=n(73098),a=n(48813),s=n(89259),u={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},l=[],c=[],h=[],d=[],f=[],p=[],m=Math.min,g=Math.max,v=Math.cos,y=Math.sin,b=Math.abs,x=Math.PI,w=2*x,_="undefined"!=typeof Float32Array,S=[];function E(t){return Math.round(t/x*1e8)/1e8%2*x}function A(t,e){var n=E(t[0]);n<0&&(n+=w);var r=n-t[0],i=t[1];i+=r,!e&&i-n>=w?i=n+w:e&&n-i>=w?i=n-w:!e&&n>i?i=n+(w-E(n-i)):e&&n<i&&(i=n-(w-E(i-n))),t[0]=n,t[1]=i}const M=function(){function t(t){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,t&&(this._saveData=!1),this._saveData&&(this.data=[])}var e;return t.prototype.increaseVersion=function(){this._version++},t.prototype.getVersion=function(){return this._version},t.prototype.setScale=function(t,e,n){(n=n||0)>0&&(this._ux=b(n/o.Y5/t)||0,this._uy=b(n/o.Y5/e)||0)},t.prototype.setDPR=function(t){this.dpr=t},t.prototype.setContext=function(t){this._ctx=t},t.prototype.getContext=function(){return this._ctx},t.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},t.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},t.prototype.moveTo=function(t,e){return this._drawPendingPt(),this.addData(u.M,t,e),this._ctx&&this._ctx.moveTo(t,e),this._x0=t,this._y0=e,this._xi=t,this._yi=e,this},t.prototype.lineTo=function(t,e){var n=b(t-this._xi),r=b(e-this._yi),i=n>this._ux||r>this._uy;if(this.addData(u.L,t,e),this._ctx&&i&&this._ctx.lineTo(t,e),i)this._xi=t,this._yi=e,this._pendingPtDist=0;else{var o=n*n+r*r;o>this._pendingPtDist&&(this._pendingPtX=t,this._pendingPtY=e,this._pendingPtDist=o)}return this},t.prototype.bezierCurveTo=function(t,e,n,r,i,o){return this._drawPendingPt(),this.addData(u.C,t,e,n,r,i,o),this._ctx&&this._ctx.bezierCurveTo(t,e,n,r,i,o),this._xi=i,this._yi=o,this},t.prototype.quadraticCurveTo=function(t,e,n,r){return this._drawPendingPt(),this.addData(u.Q,t,e,n,r),this._ctx&&this._ctx.quadraticCurveTo(t,e,n,r),this._xi=n,this._yi=r,this},t.prototype.arc=function(t,e,n,r,i,o){this._drawPendingPt(),S[0]=r,S[1]=i,A(S,o),r=S[0];var a=(i=S[1])-r;return this.addData(u.A,t,e,n,n,r,a,0,o?0:1),this._ctx&&this._ctx.arc(t,e,n,r,i,o),this._xi=v(i)*n+t,this._yi=y(i)*n+e,this},t.prototype.arcTo=function(t,e,n,r,i){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(t,e,n,r,i),this},t.prototype.rect=function(t,e,n,r){return this._drawPendingPt(),this._ctx&&this._ctx.rect(t,e,n,r),this.addData(u.R,t,e,n,r),this},t.prototype.closePath=function(){this._drawPendingPt(),this.addData(u.Z);var t=this._ctx,e=this._x0,n=this._y0;return t&&t.closePath(),this._xi=e,this._yi=n,this},t.prototype.fill=function(t){t&&t.fill(),this.toStatic()},t.prototype.stroke=function(t){t&&t.stroke(),this.toStatic()},t.prototype.len=function(){return this._len},t.prototype.setData=function(t){var e=t.length;this.data&&this.data.length===e||!_||(this.data=new Float32Array(e));for(var n=0;n<e;n++)this.data[n]=t[n];this._len=e},t.prototype.appendPath=function(t){t instanceof Array||(t=[t]);for(var e=t.length,n=0,r=this._len,i=0;i<e;i++)n+=t[i].len();_&&this.data instanceof Float32Array&&(this.data=new Float32Array(r+n));for(i=0;i<e;i++)for(var o=t[i].data,a=0;a<o.length;a++)this.data[r++]=o[a];this._len=r},t.prototype.addData=function(t,e,n,r,i,o,a,s,u){if(this._saveData){var l=this.data;this._len+arguments.length>l.length&&(this._expandData(),l=this.data);for(var c=0;c<arguments.length;c++)l[this._len++]=arguments[c]}},t.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},t.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var t=[],e=0;e<this._len;e++)t[e]=this.data[e];this.data=t}},t.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var t=this.data;t instanceof Array&&(t.length=this._len,_&&this._len>11&&(this.data=new Float32Array(t)))}},t.prototype.getBoundingRect=function(){h[0]=h[1]=f[0]=f[1]=Number.MAX_VALUE,d[0]=d[1]=p[0]=p[1]=-Number.MAX_VALUE;var t,e=this.data,n=0,o=0,s=0,l=0;for(t=0;t<this._len;){var c=e[t++],m=1===t;switch(m&&(s=n=e[t],l=o=e[t+1]),c){case u.M:n=s=e[t++],o=l=e[t++],f[0]=s,f[1]=l,p[0]=s,p[1]=l;break;case u.L:(0,a.j6)(n,o,e[t],e[t+1],f,p),n=e[t++],o=e[t++];break;case u.C:(0,a.BM)(n,o,e[t++],e[t++],e[t++],e[t++],e[t],e[t+1],f,p),n=e[t++],o=e[t++];break;case u.Q:(0,a.tW)(n,o,e[t++],e[t++],e[t],e[t+1],f,p),n=e[t++],o=e[t++];break;case u.A:var g=e[t++],b=e[t++],x=e[t++],w=e[t++],_=e[t++],S=e[t++]+_;t+=1;var E=!e[t++];m&&(s=v(_)*x+g,l=y(_)*w+b),(0,a.$s)(g,b,x,w,_,S,E,f,p),n=v(S)*x+g,o=y(S)*w+b;break;case u.R:s=n=e[t++],l=o=e[t++];var A=e[t++],M=e[t++];(0,a.j6)(s,l,s+A,l+M,f,p);break;case u.Z:n=s,o=l}r.min(h,h,f),r.max(d,d,p)}return 0===t&&(h[0]=h[1]=d[0]=d[1]=0),new i.A(h[0],h[1],d[0]-h[0],d[1]-h[1])},t.prototype._calculateLength=function(){var t=this.data,e=this._len,n=this._ux,r=this._uy,i=0,o=0,a=0,l=0;this._pathSegLen||(this._pathSegLen=[]);for(var c=this._pathSegLen,h=0,d=0,f=0;f<e;){var p=t[f++],x=1===f;x&&(a=i=t[f],l=o=t[f+1]);var _=-1;switch(p){case u.M:i=a=t[f++],o=l=t[f++];break;case u.L:var S=t[f++],E=(C=t[f++])-o;(b(z=S-i)>n||b(E)>r||f===e-1)&&(_=Math.sqrt(z*z+E*E),i=S,o=C);break;case u.C:var A=t[f++],M=t[f++],C=(S=t[f++],t[f++]),T=t[f++],k=t[f++];_=(0,s.h0)(i,o,A,M,S,C,T,k,10),i=T,o=k;break;case u.Q:A=t[f++],M=t[f++],S=t[f++],C=t[f++];_=(0,s.d8)(i,o,A,M,S,C,10),i=S,o=C;break;case u.A:var I=t[f++],N=t[f++],P=t[f++],O=t[f++],L=t[f++],R=t[f++],D=R+L;f+=1,x&&(a=v(L)*P+I,l=y(L)*O+N),_=g(P,O)*m(w,Math.abs(R)),i=v(D)*P+I,o=y(D)*O+N;break;case u.R:a=i=t[f++],l=o=t[f++],_=2*t[f++]+2*t[f++];break;case u.Z:var z=a-i;E=l-o;_=Math.sqrt(z*z+E*E),i=a,o=l}_>=0&&(c[d++]=_,h+=_)}return this._pathLen=h,h},t.prototype.rebuildPath=function(t,e){var n,r,i,o,a,h,d,f,p,x,w=this.data,_=this._ux,S=this._uy,E=this._len,A=e<1,M=0,C=0,T=0;if(!A||(this._pathSegLen||this._calculateLength(),d=this._pathSegLen,f=e*this._pathLen))t:for(var k=0;k<E;){var I=w[k++],N=1===k;switch(N&&(n=i=w[k],r=o=w[k+1]),I!==u.L&&T>0&&(t.lineTo(p,x),T=0),I){case u.M:n=i=w[k++],r=o=w[k++],t.moveTo(i,o);break;case u.L:a=w[k++],h=w[k++];var P=b(a-i),O=b(h-o);if(P>_||O>S){if(A){if(M+(rt=d[C++])>f){var L=(f-M)/rt;t.lineTo(i*(1-L)+a*L,o*(1-L)+h*L);break t}M+=rt}t.lineTo(a,h),i=a,o=h,T=0}else{var R=P*P+O*O;R>T&&(p=a,x=h,T=R)}break;case u.C:var D=w[k++],z=w[k++],F=w[k++],B=w[k++],U=w[k++],j=w[k++];if(A){if(M+(rt=d[C++])>f){L=(f-M)/rt;(0,s.YT)(i,D,F,U,L,l),(0,s.YT)(o,z,B,j,L,c),t.bezierCurveTo(l[1],c[1],l[2],c[2],l[3],c[3]);break t}M+=rt}t.bezierCurveTo(D,z,F,B,U,j),i=U,o=j;break;case u.Q:D=w[k++],z=w[k++],F=w[k++],B=w[k++];if(A){if(M+(rt=d[C++])>f){L=(f-M)/rt;(0,s.kx)(i,D,F,L,l),(0,s.kx)(o,z,B,L,c),t.quadraticCurveTo(l[1],c[1],l[2],c[2]);break t}M+=rt}t.quadraticCurveTo(D,z,F,B),i=F,o=B;break;case u.A:var V=w[k++],H=w[k++],G=w[k++],W=w[k++],X=w[k++],Y=w[k++],q=w[k++],$=!w[k++],K=G>W?G:W,Z=b(G-W)>.001,Q=X+Y,J=!1;if(A)M+(rt=d[C++])>f&&(Q=X+Y*(f-M)/rt,J=!0),M+=rt;if(Z&&t.ellipse?t.ellipse(V,H,G,W,q,X,Q,$):t.arc(V,H,K,X,Q,$),J)break t;N&&(n=v(X)*G+V,r=y(X)*W+H),i=v(Q)*G+V,o=y(Q)*W+H;break;case u.R:n=i=w[k],r=o=w[k+1],a=w[k++],h=w[k++];var tt=w[k++],et=w[k++];if(A){if(M+(rt=d[C++])>f){var nt=f-M;t.moveTo(a,h),t.lineTo(a+m(nt,tt),h),(nt-=tt)>0&&t.lineTo(a+tt,h+m(nt,et)),(nt-=et)>0&&t.lineTo(a+g(tt-nt,0),h+et),(nt-=tt)>0&&t.lineTo(a,h+g(et-nt,0));break t}M+=rt}t.rect(a,h,tt,et);break;case u.Z:if(A){var rt;if(M+(rt=d[C++])>f){L=(f-M)/rt;t.lineTo(i*(1-L)+n*L,o*(1-L)+r*L);break t}M+=rt}t.closePath(),i=n,o=r}}},t.prototype.clone=function(){var e=new t,n=this.data;return e.data=n.slice?n.slice():Array.prototype.slice.call(n),e._len=this._len,e},t.CMD=u,t.initDefaultProps=((e=t.prototype)._saveData=!0,e._ux=0,e._uy=0,e._pendingPtDist=0,void(e._version=0)),t}()},26346:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r=function(){function t(t,e){this.x=t||0,this.y=e||0}return t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.set=function(t,e){return this.x=t,this.y=e,this},t.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.scale=function(t){this.x*=t,this.y*=t},t.prototype.scaleAndAdd=function(t,e){this.x+=t.x*e,this.y+=t.y*e},t.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},t.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},t.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},t.prototype.distanceSquare=function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},t.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.transform=function(t){if(t){var e=this.x,n=this.y;return this.x=t[0]*e+t[2]*n+t[4],this.y=t[1]*e+t[3]*n+t[5],this}},t.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},t.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},t.set=function(t,e,n){t.x=e,t.y=n},t.copy=function(t,e){t.x=e.x,t.y=e.y},t.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},t.lenSquare=function(t){return t.x*t.x+t.y*t.y},t.dot=function(t,e){return t.x*e.x+t.y*e.y},t.add=function(t,e,n){t.x=e.x+n.x,t.y=e.y+n.y},t.sub=function(t,e,n){t.x=e.x-n.x,t.y=e.y-n.y},t.scale=function(t,e,n){t.x=e.x*n,t.y=e.y*n},t.scaleAndAdd=function(t,e,n,r){t.x=e.x+n.x*r,t.y=e.y+n.y*r},t.lerp=function(t,e,n,r){var i=1-r;t.x=i*e.x+r*n.x,t.y=i*e.y+r*n.y},t}()},92836:(t,e,n)=>{"use strict";n.d(e,{Ay:()=>p,Wx:()=>f});var r=n(45587),i=n(83509),o=r.identity,a=5e-5;function s(t){return t>a||t<-5e-5}var u=[],l=[],c=r.create(),h=Math.abs,d=function(){function t(){}var e;return t.prototype.getLocalTransform=function(e){return t.getLocalTransform(this,e)},t.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},t.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},t.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},t.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},t.prototype.needLocalTransform=function(){return s(this.rotation)||s(this.x)||s(this.y)||s(this.scaleX-1)||s(this.scaleY-1)||s(this.skewX)||s(this.skewY)},t.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,e=this.needLocalTransform(),n=this.transform;e||t?(n=n||r.create(),e?this.getLocalTransform(n):o(n),t&&(e?r.mul(n,t,n):r.copy(n,t)),this.transform=n,this._resolveGlobalScaleRatio(n)):n&&(o(n),this.invTransform=null)},t.prototype._resolveGlobalScaleRatio=function(t){var e=this.globalScaleRatio;if(null!=e&&1!==e){this.getGlobalScale(u);var n=u[0]<0?-1:1,i=u[1]<0?-1:1,o=((u[0]-n)*e+n)/u[0]||0,a=((u[1]-i)*e+i)/u[1]||0;t[0]*=o,t[1]*=o,t[2]*=a,t[3]*=a}this.invTransform=this.invTransform||r.create(),r.invert(this.invTransform,t)},t.prototype.getComputedTransform=function(){for(var t=this,e=[];t;)e.push(t),t=t.parent;for(;t=e.pop();)t.updateTransform();return this.transform},t.prototype.setLocalTransform=function(t){if(t){var e=t[0]*t[0]+t[1]*t[1],n=t[2]*t[2]+t[3]*t[3],r=Math.atan2(t[1],t[0]),i=Math.PI/2+r-Math.atan2(t[3],t[2]);n=Math.sqrt(n)*Math.cos(i),e=Math.sqrt(e),this.skewX=i,this.skewY=0,this.rotation=-r,this.x=+t[4],this.y=+t[5],this.scaleX=e,this.scaleY=n,this.originX=0,this.originY=0}},t.prototype.decomposeTransform=function(){if(this.transform){var t=this.parent,e=this.transform;t&&t.transform&&(t.invTransform=t.invTransform||r.create(),r.mul(l,t.invTransform,e),e=l);var n=this.originX,i=this.originY;(n||i)&&(c[4]=n,c[5]=i,r.mul(l,e,c),l[4]-=n,l[5]-=i,e=l),this.setLocalTransform(e)}},t.prototype.getGlobalScale=function(t){var e=this.transform;return t=t||[],e?(t[0]=Math.sqrt(e[0]*e[0]+e[1]*e[1]),t[1]=Math.sqrt(e[2]*e[2]+e[3]*e[3]),e[0]<0&&(t[0]=-t[0]),e[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},t.prototype.transformCoordToLocal=function(t,e){var n=[t,e],r=this.invTransform;return r&&i.applyTransform(n,n,r),n},t.prototype.transformCoordToGlobal=function(t,e){var n=[t,e],r=this.transform;return r&&i.applyTransform(n,n,r),n},t.prototype.getLineScale=function(){var t=this.transform;return t&&h(t[0]-1)>1e-10&&h(t[3]-1)>1e-10?Math.sqrt(h(t[0]*t[3]-t[2]*t[1])):1},t.prototype.copyTransform=function(t){!function(t,e){for(var n=0;n<f.length;n++){var r=f[n];t[r]=e[r]}}(this,t)},t.getLocalTransform=function(t,e){e=e||[];var n=t.originX||0,i=t.originY||0,o=t.scaleX,a=t.scaleY,s=t.anchorX,u=t.anchorY,l=t.rotation||0,c=t.x,h=t.y,d=t.skewX?Math.tan(t.skewX):0,f=t.skewY?Math.tan(-t.skewY):0;if(n||i||s||u){var p=n+s,m=i+u;e[4]=-p*o-d*m*a,e[5]=-m*a-f*p*o}else e[4]=e[5]=0;return e[0]=o,e[3]=a,e[1]=f*o,e[2]=d*a,l&&r.rotate(e,e,l),e[4]+=n+c,e[5]+=i+h,e},t.initDefaultProps=((e=t.prototype).scaleX=e.scaleY=e.globalScaleRatio=1,void(e.x=e.y=e.originX=e.originY=e.skewX=e.skewY=e.rotation=e.anchorX=e.anchorY=0)),t}(),f=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];const p=d},73430:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var r=Math.round(9*Math.random()),i="function"==typeof Object.defineProperty;const o=function(){function t(){this._id="__ec_inner_"+r++}return t.prototype.get=function(t){return this._guard(t)[this._id]},t.prototype.set=function(t,e){var n=this._guard(t);return i?Object.defineProperty(n,this._id,{value:e,enumerable:!1,configurable:!0}):n[this._id]=e,this},t.prototype.delete=function(t){return!!this.has(t)&&(delete this._guard(t)[this._id],!0)},t.prototype.has=function(t){return!!this._guard(t)[this._id]},t.prototype._guard=function(t){if(t!==Object(t))throw TypeError("Value of WeakMap is not a non-null object.");return t},t}()},48813:(t,e,n)=>{"use strict";n.d(e,{$s:()=>b,BM:()=>v,Cr:()=>f,j6:()=>p,tW:()=>y});var r=n(83509),i=n(89259),o=Math.min,a=Math.max,s=Math.sin,u=Math.cos,l=2*Math.PI,c=r.create(),h=r.create(),d=r.create();function f(t,e,n){if(0!==t.length){for(var r=t[0],i=r[0],s=r[0],u=r[1],l=r[1],c=1;c<t.length;c++)r=t[c],i=o(i,r[0]),s=a(s,r[0]),u=o(u,r[1]),l=a(l,r[1]);e[0]=i,e[1]=u,n[0]=s,n[1]=l}}function p(t,e,n,r,i,s){i[0]=o(t,n),i[1]=o(e,r),s[0]=a(t,n),s[1]=a(e,r)}var m=[],g=[];function v(t,e,n,r,s,u,l,c,h,d){var f=i.lX,p=i.Yb,v=f(t,n,s,l,m);h[0]=1/0,h[1]=1/0,d[0]=-1/0,d[1]=-1/0;for(var y=0;y<v;y++){var b=p(t,n,s,l,m[y]);h[0]=o(b,h[0]),d[0]=a(b,d[0])}v=f(e,r,u,c,g);for(y=0;y<v;y++){var x=p(e,r,u,c,g[y]);h[1]=o(x,h[1]),d[1]=a(x,d[1])}h[0]=o(t,h[0]),d[0]=a(t,d[0]),h[0]=o(l,h[0]),d[0]=a(l,d[0]),h[1]=o(e,h[1]),d[1]=a(e,d[1]),h[1]=o(c,h[1]),d[1]=a(c,d[1])}function y(t,e,n,r,s,u,l,c){var h=i.gC,d=i.k3,f=a(o(h(t,n,s),1),0),p=a(o(h(e,r,u),1),0),m=d(t,n,s,f),g=d(e,r,u,p);l[0]=o(t,s,m),l[1]=o(e,u,g),c[0]=a(t,s,m),c[1]=a(e,u,g)}function b(t,e,n,i,o,a,f,p,m){var g=r.min,v=r.max,y=Math.abs(o-a);if(y%l<1e-4&&y>1e-4)return p[0]=t-n,p[1]=e-i,m[0]=t+n,void(m[1]=e+i);if(c[0]=u(o)*n+t,c[1]=s(o)*i+e,h[0]=u(a)*n+t,h[1]=s(a)*i+e,g(p,c,h),v(m,c,h),(o%=l)<0&&(o+=l),(a%=l)<0&&(a+=l),o>a&&!f?a+=l:o<a&&f&&(o+=l),f){var b=a;a=o,o=b}for(var x=0;x<a;x+=Math.PI/2)x>o&&(d[0]=u(x)*n+t,d[1]=s(x)*i+e,g(p,d,p),v(m,d,m))}},89259:(t,e,n)=>{"use strict";n.d(e,{Et:()=>x,YT:()=>b,Yb:()=>m,_E:()=>v,d8:()=>T,gC:()=>A,h0:()=>w,k3:()=>_,kh:()=>C,kx:()=>M,lX:()=>y,qY:()=>E,rD:()=>g,z7:()=>S});var r=n(83509),i=Math.pow,o=Math.sqrt,a=1e-8,s=1e-4,u=o(3),l=1/3,c=(0,r.create)(),h=(0,r.create)(),d=(0,r.create)();function f(t){return t>-a&&t<a}function p(t){return t>a||t<-a}function m(t,e,n,r,i){var o=1-i;return o*o*(o*t+3*i*e)+i*i*(i*r+3*o*n)}function g(t,e,n,r,i){var o=1-i;return 3*(((e-t)*o+2*(n-e)*i)*o+(r-n)*i*i)}function v(t,e,n,r,a,s){var c=r+3*(e-n)-t,h=3*(n-2*e+t),d=3*(e-t),p=t-a,m=h*h-3*c*d,g=h*d-9*c*p,v=d*d-3*h*p,y=0;if(f(m)&&f(g)){if(f(h))s[0]=0;else(k=-d/h)>=0&&k<=1&&(s[y++]=k)}else{var b=g*g-4*m*v;if(f(b)){var x=g/m,w=-x/2;(k=-h/c+x)>=0&&k<=1&&(s[y++]=k),w>=0&&w<=1&&(s[y++]=w)}else if(b>0){var _=o(b),S=m*h+1.5*c*(-g+_),E=m*h+1.5*c*(-g-_);(k=(-h-((S=S<0?-i(-S,l):i(S,l))+(E=E<0?-i(-E,l):i(E,l))))/(3*c))>=0&&k<=1&&(s[y++]=k)}else{var A=(2*m*h-3*c*g)/(2*o(m*m*m)),M=Math.acos(A)/3,C=o(m),T=Math.cos(M),k=(-h-2*C*T)/(3*c),I=(w=(-h+C*(T+u*Math.sin(M)))/(3*c),(-h+C*(T-u*Math.sin(M)))/(3*c));k>=0&&k<=1&&(s[y++]=k),w>=0&&w<=1&&(s[y++]=w),I>=0&&I<=1&&(s[y++]=I)}}return y}function y(t,e,n,r,i){var a=6*n-12*e+6*t,s=9*e+3*r-3*t-9*n,u=3*e-3*t,l=0;if(f(s)){if(p(a))(h=-u/a)>=0&&h<=1&&(i[l++]=h)}else{var c=a*a-4*s*u;if(f(c))i[0]=-a/(2*s);else if(c>0){var h,d=o(c),m=(-a-d)/(2*s);(h=(-a+d)/(2*s))>=0&&h<=1&&(i[l++]=h),m>=0&&m<=1&&(i[l++]=m)}}return l}function b(t,e,n,r,i,o){var a=(e-t)*i+t,s=(n-e)*i+e,u=(r-n)*i+n,l=(s-a)*i+a,c=(u-s)*i+s,h=(c-l)*i+l;o[0]=t,o[1]=a,o[2]=l,o[3]=h,o[4]=h,o[5]=c,o[6]=u,o[7]=r}function x(t,e,n,i,a,u,l,f,p,g,v){var y,b,x,w,_,S=.005,E=1/0;c[0]=p,c[1]=g;for(var A=0;A<1;A+=.05)h[0]=m(t,n,a,l,A),h[1]=m(e,i,u,f,A),(w=(0,r.distSquare)(c,h))<E&&(y=A,E=w);E=1/0;for(var M=0;M<32&&!(S<s);M++)b=y-S,x=y+S,h[0]=m(t,n,a,l,b),h[1]=m(e,i,u,f,b),w=(0,r.distSquare)(h,c),b>=0&&w<E?(y=b,E=w):(d[0]=m(t,n,a,l,x),d[1]=m(e,i,u,f,x),_=(0,r.distSquare)(d,c),x<=1&&_<E?(y=x,E=_):S*=.5);return v&&(v[0]=m(t,n,a,l,y),v[1]=m(e,i,u,f,y)),o(E)}function w(t,e,n,r,i,o,a,s,u){for(var l=t,c=e,h=0,d=1/u,f=1;f<=u;f++){var p=f*d,g=m(t,n,i,a,p),v=m(e,r,o,s,p),y=g-l,b=v-c;h+=Math.sqrt(y*y+b*b),l=g,c=v}return h}function _(t,e,n,r){var i=1-r;return i*(i*t+2*r*e)+r*r*n}function S(t,e,n,r){return 2*((1-r)*(e-t)+r*(n-e))}function E(t,e,n,r,i){var a=t-2*e+n,s=2*(e-t),u=t-r,l=0;if(f(a)){if(p(s))(h=-u/s)>=0&&h<=1&&(i[l++]=h)}else{var c=s*s-4*a*u;if(f(c))(h=-s/(2*a))>=0&&h<=1&&(i[l++]=h);else if(c>0){var h,d=o(c),m=(-s-d)/(2*a);(h=(-s+d)/(2*a))>=0&&h<=1&&(i[l++]=h),m>=0&&m<=1&&(i[l++]=m)}}return l}function A(t,e,n){var r=t+n-2*e;return 0===r?.5:(t-e)/r}function M(t,e,n,r,i){var o=(e-t)*r+t,a=(n-e)*r+e,s=(a-o)*r+o;i[0]=t,i[1]=o,i[2]=s,i[3]=s,i[4]=a,i[5]=n}function C(t,e,n,i,a,u,l,f,p){var m,g=.005,v=1/0;c[0]=l,c[1]=f;for(var y=0;y<1;y+=.05){h[0]=_(t,n,a,y),h[1]=_(e,i,u,y),(S=(0,r.distSquare)(c,h))<v&&(m=y,v=S)}v=1/0;for(var b=0;b<32&&!(g<s);b++){var x=m-g,w=m+g;h[0]=_(t,n,a,x),h[1]=_(e,i,u,x);var S=(0,r.distSquare)(h,c);if(x>=0&&S<v)m=x,v=S;else{d[0]=_(t,n,a,w),d[1]=_(e,i,u,w);var E=(0,r.distSquare)(d,c);w<=1&&E<v?(m=w,v=E):g*=.5}}return p&&(p[0]=_(t,n,a,m),p[1]=_(e,i,u,m)),o(v)}function T(t,e,n,r,i,o,a){for(var s=t,u=e,l=0,c=1/a,h=1;h<=a;h++){var d=h*c,f=_(t,n,i,d),p=_(e,r,o,d),m=f-s,g=p-u;l+=Math.sqrt(m*m+g*g),s=f,u=p}return l}},29687:(t,e,n)=>{"use strict";n.d(e,{Me:()=>p,ot:()=>h,oq:()=>c,lJ:()=>l});var r=n(38123),i=Math.log(2);function o(t,e,n,r,a,s){var u=r+"-"+a,l=t.length;if(s.hasOwnProperty(u))return s[u];if(1===e){var c=Math.round(Math.log((1<<l)-1&~a)/i);return t[n][c]}for(var h=r|1<<n,d=n+1;r&1<<d;)d++;for(var f=0,p=0,m=0;p<l;p++){var g=1<<p;g&a||(f+=(m%2?-1:1)*t[n][p]*o(t,e-1,d,h,a|g,s),m++)}return s[u]=f,f}function a(t,e){var n=[[t[0],t[1],1,0,0,0,-e[0]*t[0],-e[0]*t[1]],[0,0,0,t[0],t[1],1,-e[1]*t[0],-e[1]*t[1]],[t[2],t[3],1,0,0,0,-e[2]*t[2],-e[2]*t[3]],[0,0,0,t[2],t[3],1,-e[3]*t[2],-e[3]*t[3]],[t[4],t[5],1,0,0,0,-e[4]*t[4],-e[4]*t[5]],[0,0,0,t[4],t[5],1,-e[5]*t[4],-e[5]*t[5]],[t[6],t[7],1,0,0,0,-e[6]*t[6],-e[6]*t[7]],[0,0,0,t[6],t[7],1,-e[7]*t[6],-e[7]*t[7]]],r={},i=o(n,8,0,0,0,r);if(0!==i){for(var a=[],s=0;s<8;s++)for(var u=0;u<8;u++)null==a[u]&&(a[u]=0),a[u]+=((s+u)%2?-1:1)*o(n,7,0===s?1:0,1<<s,1<<u,r)/i*e[s];return function(t,e,n){var r=e*a[6]+n*a[7]+1;t[0]=(e*a[0]+n*a[1]+a[2])/r,t[1]=(e*a[3]+n*a[4]+a[5])/r}}}var s="___zrEVENTSAVED",u=[];function l(t,e,n,r,i){return c(u,e,r,i,!0)&&c(t,n,u[0],u[1])}function c(t,e,n,i,o){if(e.getBoundingClientRect&&r.A.domSupported&&!h(e)){var u=e[s]||(e[s]={}),l=function(t,e){var n=e.markers;if(n)return n;n=e.markers=[];for(var r=["left","right"],i=["top","bottom"],o=0;o<4;o++){var a=document.createElement("div"),s=o%2,u=(o>>1)%2;a.style.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",r[s]+":0",i[u]+":0",r[1-s]+":auto",i[1-u]+":auto",""].join("!important;"),t.appendChild(a),n.push(a)}return n}(e,u),c=function(t,e,n){for(var r=n?"invTrans":"trans",i=e[r],o=e.srcCoords,s=[],u=[],l=!0,c=0;c<4;c++){var h=t[c].getBoundingClientRect(),d=2*c,f=h.left,p=h.top;s.push(f,p),l=l&&o&&f===o[d]&&p===o[d+1],u.push(t[c].offsetLeft,t[c].offsetTop)}return l&&i?i:(e.srcCoords=s,e[r]=n?a(u,s):a(s,u))}(l,u,o);if(c)return c(t,n,i),!0}return!1}function h(t){return"CANVAS"===t.nodeName.toUpperCase()}var d=/([&<>"'])/g,f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function p(t){return null==t?"":(t+"").replace(d,(function(t,e){return f[e]}))}},38123:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var r=function(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1},i=new function(){this.browser=new r,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow="undefined"!=typeof window};"object"==typeof wx&&"function"==typeof wx.getSystemInfoSync?(i.wxa=!0,i.touchEventsSupported=!0):"undefined"==typeof document&&"undefined"!=typeof self?i.worker=!0:"undefined"==typeof navigator||0===navigator.userAgent.indexOf("Node.js")?(i.node=!0,i.svgSupported=!0):function(t,e){var n=e.browser,r=t.match(/Firefox\/([\d.]+)/),i=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),o=t.match(/Edge?\/([\d.]+)/),a=/micromessenger/i.test(t);r&&(n.firefox=!0,n.version=r[1]);i&&(n.ie=!0,n.version=i[1]);o&&(n.edge=!0,n.version=o[1],n.newEdge=+o[1].split(".")[0]>18);a&&(n.weChat=!0);e.svgSupported="undefined"!=typeof SVGRect,e.touchEventsSupported="ontouchstart"in window&&!n.ie&&!n.edge,e.pointerEventsSupported="onpointerdown"in window&&(n.edge||n.ie&&+n.version>=11),e.domSupported="undefined"!=typeof document;var s=document.documentElement.style;e.transform3dSupported=(n.ie&&"transition"in s||n.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in s)&&!("OTransition"in s),e.transformSupported=e.transform3dSupported||n.ie&&+n.version>=9}(navigator.userAgent,i);const o=i},35452:(t,e,n)=>{"use strict";n.d(e,{W5:()=>m,Yo:()=>u,ds:()=>p,e0:()=>h,f:()=>f,mK:()=>c,q2:()=>d});var r=n(38123),i=n(29687),o=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,a=[],s=r.A.browser.firefox&&+r.A.browser.version.split(".")[0]<39;function u(t,e,n,r){return n=n||{},r?l(t,e,n):s&&null!=e.layerX&&e.layerX!==e.offsetX?(n.zrX=e.layerX,n.zrY=e.layerY):null!=e.offsetX?(n.zrX=e.offsetX,n.zrY=e.offsetY):l(t,e,n),n}function l(t,e,n){if(r.A.domSupported&&t.getBoundingClientRect){var o=e.clientX,s=e.clientY;if((0,i.ot)(t)){var u=t.getBoundingClientRect();return n.zrX=o-u.left,void(n.zrY=s-u.top)}if((0,i.oq)(a,t,o,s))return n.zrX=a[0],void(n.zrY=a[1])}n.zrX=n.zrY=0}function c(t){return t||window.event}function h(t,e,n){if(null!=(e=c(e)).zrX)return e;var r=e.type;if(r&&r.indexOf("touch")>=0){var i="touchend"!==r?e.targetTouches[0]:e.changedTouches[0];i&&u(t,i,e,n)}else{u(t,e,e,n);var a=function(t){var e=t.wheelDelta;if(e)return e;var n=t.deltaX,r=t.deltaY;if(null==n||null==r)return e;return 3*(0!==r?Math.abs(r):Math.abs(n))*(r>0?-1:r<0?1:n>0?-1:1)}(e);e.zrDelta=a?a/120:-(e.detail||0)/3}var s=e.button;return null==e.which&&void 0!==s&&o.test(e.type)&&(e.which=1&s?1:2&s?3:4&s?2:0),e}function d(t,e,n,r){t.addEventListener(e,n,r)}function f(t,e,n,r){t.removeEventListener(e,n,r)}var p=function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0};function m(t){return 2===t.which||3===t.which}},45587:(t,e,n)=>{"use strict";function r(){return[1,0,0,1,0,0]}function i(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function a(t,e,n){var r=e[0]*n[0]+e[2]*n[1],i=e[1]*n[0]+e[3]*n[1],o=e[0]*n[2]+e[2]*n[3],a=e[1]*n[2]+e[3]*n[3],s=e[0]*n[4]+e[2]*n[5]+e[4],u=e[1]*n[4]+e[3]*n[5]+e[5];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t}function s(t,e,n){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+n[0],t[5]=e[5]+n[1],t}function u(t,e,n,r){void 0===r&&(r=[0,0]);var i=e[0],o=e[2],a=e[4],s=e[1],u=e[3],l=e[5],c=Math.sin(n),h=Math.cos(n);return t[0]=i*h+s*c,t[1]=-i*c+s*h,t[2]=o*h+u*c,t[3]=-o*c+h*u,t[4]=h*(a-r[0])+c*(l-r[1])+r[0],t[5]=h*(l-r[1])-c*(a-r[0])+r[1],t}function l(t,e,n){var r=n[0],i=n[1];return t[0]=e[0]*r,t[1]=e[1]*i,t[2]=e[2]*r,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*i,t}function c(t,e){var n=e[0],r=e[2],i=e[4],o=e[1],a=e[3],s=e[5],u=n*a-o*r;return u?(u=1/u,t[0]=a*u,t[1]=-o*u,t[2]=-r*u,t[3]=n*u,t[4]=(r*s-a*i)*u,t[5]=(o*i-n*s)*u,t):null}function h(t){var e=[1,0,0,1,0,0];return o(e,t),e}n.r(e),n.d(e,{clone:()=>h,copy:()=>o,create:()=>r,identity:()=>i,invert:()=>c,mul:()=>a,rotate:()=>u,scale:()=>l,translate:()=>s})},59741:(t,e,n)=>{"use strict";n.d(e,{Gs:()=>l,OH:()=>i,gI:()=>r,yh:()=>u});var r=12,i=r+"px sans-serif";var o,a,s=function(t){var e={};if("undefined"==typeof JSON)return e;for(var n=0;n<t.length;n++){var r=String.fromCharCode(n+32),i=(t.charCodeAt(n)-20)/100;e[r]=i}return e}("007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N"),u={createCanvas:function(){return"undefined"!=typeof document&&document.createElement("canvas")},measureText:function(t,e){if(!o){var n=u.createCanvas();o=n&&n.getContext("2d")}if(o)return a!==e&&(a=o.font=e||i),o.measureText(t);t=t||"";var l=/(\d+)px/.exec(e=e||i),c=l&&+l[1]||r,h=0;if(e.indexOf("mono")>=0)h=c*t.length;else for(var d=0;d<t.length;d++){var f=s[t[d]];h+=null==f?c:f*c}return{width:h}},loadImage:function(t,e,n){var r=new Image;return r.onload=e,r.onerror=n,r.src=t,r}};function l(t){for(var e in u)t[e]&&(u[e]=t[e])}},83470:(t,e,n)=>{"use strict";n.d(e,{A:()=>c});var r=32,i=7;function o(t,e,n,r){var i=e+1;if(i===n)return 1;if(r(t[i++],t[e])<0){for(;i<n&&r(t[i],t[i-1])<0;)i++;!function(t,e,n){n--;for(;e<n;){var r=t[e];t[e++]=t[n],t[n--]=r}}(t,e,i)}else for(;i<n&&r(t[i],t[i-1])>=0;)i++;return i-e}function a(t,e,n,r,i){for(r===e&&r++;r<n;r++){for(var o,a=t[r],s=e,u=r;s<u;)i(a,t[o=s+u>>>1])<0?u=o:s=o+1;var l=r-s;switch(l){case 3:t[s+3]=t[s+2];case 2:t[s+2]=t[s+1];case 1:t[s+1]=t[s];break;default:for(;l>0;)t[s+l]=t[s+l-1],l--}t[s]=a}}function s(t,e,n,r,i,o){var a=0,s=0,u=1;if(o(t,e[n+i])>0){for(s=r-i;u<s&&o(t,e[n+i+u])>0;)a=u,(u=1+(u<<1))<=0&&(u=s);u>s&&(u=s),a+=i,u+=i}else{for(s=i+1;u<s&&o(t,e[n+i-u])<=0;)a=u,(u=1+(u<<1))<=0&&(u=s);u>s&&(u=s);var l=a;a=i-u,u=i-l}for(a++;a<u;){var c=a+(u-a>>>1);o(t,e[n+c])>0?a=c+1:u=c}return u}function u(t,e,n,r,i,o){var a=0,s=0,u=1;if(o(t,e[n+i])<0){for(s=i+1;u<s&&o(t,e[n+i-u])<0;)a=u,(u=1+(u<<1))<=0&&(u=s);u>s&&(u=s);var l=a;a=i-u,u=i-l}else{for(s=r-i;u<s&&o(t,e[n+i+u])>=0;)a=u,(u=1+(u<<1))<=0&&(u=s);u>s&&(u=s),a+=i,u+=i}for(a++;a<u;){var c=a+(u-a>>>1);o(t,e[n+c])<0?u=c:a=c+1}return u}function l(t,e){var n,r,o=i,a=0,l=[];function c(c){var h=n[c],d=r[c],f=n[c+1],p=r[c+1];r[c]=d+p,c===a-3&&(n[c+1]=n[c+2],r[c+1]=r[c+2]),a--;var m=u(t[f],t,h,d,0,e);h+=m,0!==(d-=m)&&0!==(p=s(t[h+d-1],t,f,p,p-1,e))&&(d<=p?function(n,r,a,c){var h=0;for(h=0;h<r;h++)l[h]=t[n+h];var d=0,f=a,p=n;if(t[p++]=t[f++],0==--c){for(h=0;h<r;h++)t[p+h]=l[d+h];return}if(1===r){for(h=0;h<c;h++)t[p+h]=t[f+h];return void(t[p+c]=l[d])}var m,g,v,y=o;for(;;){m=0,g=0,v=!1;do{if(e(t[f],l[d])<0){if(t[p++]=t[f++],g++,m=0,0==--c){v=!0;break}}else if(t[p++]=l[d++],m++,g=0,1==--r){v=!0;break}}while((m|g)<y);if(v)break;do{if(0!==(m=u(t[f],l,d,r,0,e))){for(h=0;h<m;h++)t[p+h]=l[d+h];if(p+=m,d+=m,(r-=m)<=1){v=!0;break}}if(t[p++]=t[f++],0==--c){v=!0;break}if(0!==(g=s(l[d],t,f,c,0,e))){for(h=0;h<g;h++)t[p+h]=t[f+h];if(p+=g,f+=g,0===(c-=g)){v=!0;break}}if(t[p++]=l[d++],1==--r){v=!0;break}y--}while(m>=i||g>=i);if(v)break;y<0&&(y=0),y+=2}if((o=y)<1&&(o=1),1===r){for(h=0;h<c;h++)t[p+h]=t[f+h];t[p+c]=l[d]}else{if(0===r)throw new Error;for(h=0;h<r;h++)t[p+h]=l[d+h]}}(h,d,f,p):function(n,r,a,c){var h=0;for(h=0;h<c;h++)l[h]=t[a+h];var d=n+r-1,f=c-1,p=a+c-1,m=0,g=0;if(t[p--]=t[d--],0==--r){for(m=p-(c-1),h=0;h<c;h++)t[m+h]=l[h];return}if(1===c){for(g=(p-=r)+1,m=(d-=r)+1,h=r-1;h>=0;h--)t[g+h]=t[m+h];return void(t[p]=l[f])}var v=o;for(;;){var y=0,b=0,x=!1;do{if(e(l[f],t[d])<0){if(t[p--]=t[d--],y++,b=0,0==--r){x=!0;break}}else if(t[p--]=l[f--],b++,y=0,1==--c){x=!0;break}}while((y|b)<v);if(x)break;do{if(0!==(y=r-u(l[f],t,n,r,r-1,e))){for(r-=y,g=(p-=y)+1,m=(d-=y)+1,h=y-1;h>=0;h--)t[g+h]=t[m+h];if(0===r){x=!0;break}}if(t[p--]=l[f--],1==--c){x=!0;break}if(0!==(b=c-s(t[d],l,0,c,c-1,e))){for(c-=b,g=(p-=b)+1,m=(f-=b)+1,h=0;h<b;h++)t[g+h]=l[m+h];if(c<=1){x=!0;break}}if(t[p--]=t[d--],0==--r){x=!0;break}v--}while(y>=i||b>=i);if(x)break;v<0&&(v=0),v+=2}(o=v)<1&&(o=1);if(1===c){for(g=(p-=r)+1,m=(d-=r)+1,h=r-1;h>=0;h--)t[g+h]=t[m+h];t[p]=l[f]}else{if(0===c)throw new Error;for(m=p-(c-1),h=0;h<c;h++)t[m+h]=l[h]}}(h,d,f,p))}return n=[],r=[],{mergeRuns:function(){for(;a>1;){var t=a-2;if(t>=1&&r[t-1]<=r[t]+r[t+1]||t>=2&&r[t-2]<=r[t]+r[t-1])r[t-1]<r[t+1]&&t--;else if(r[t]>r[t+1])break;c(t)}},forceMergeRuns:function(){for(;a>1;){var t=a-2;t>0&&r[t-1]<r[t+1]&&t--,c(t)}},pushRun:function(t,e){n[a]=t,r[a]=e,a+=1}}}function c(t,e,n,i){n||(n=0),i||(i=t.length);var s=i-n;if(!(s<2)){var u=0;if(s<r)a(t,n,i,n+(u=o(t,n,i,e)),e);else{var c=l(t,e),h=function(t){for(var e=0;t>=r;)e|=1&t,t>>=1;return t+e}(s);do{if((u=o(t,n,i,e))<h){var d=s;d>h&&(d=h),a(t,n,n+d,n+u,e),u=d}c.pushRun(n,u),c.mergeRuns(),s-=u,n+=u}while(0!==s);c.forceMergeRuns()}}}},98026:(t,e,n)=>{"use strict";n.r(e),n.d(e,{HashMap:()=>st,RADIAN_TO_DEGREE:()=>pt,assert:()=>tt,bind:()=>L,clone:()=>y,concatArray:()=>lt,createCanvas:()=>S,createHashMap:()=>ut,createObject:()=>ct,curry:()=>R,defaults:()=>_,disableUserSelect:()=>ht,each:()=>T,eqNaN:()=>q,extend:()=>w,filter:()=>N,find:()=>P,guid:()=>g,hasOwn:()=>dt,indexOf:()=>E,inherits:()=>A,isArray:()=>D,isArrayLike:()=>C,isBuiltInObject:()=>V,isDom:()=>G,isFunction:()=>z,isGradientObject:()=>W,isImagePatternObject:()=>X,isNumber:()=>U,isObject:()=>j,isPrimitive:()=>it,isRegExp:()=>Y,isString:()=>F,isStringSafe:()=>B,isTypedArray:()=>H,keys:()=>O,logError:()=>v,map:()=>k,merge:()=>b,mergeAll:()=>x,mixin:()=>M,noop:()=>ft,normalizeCssArray:()=>J,reduce:()=>I,retrieve:()=>$,retrieve2:()=>K,retrieve3:()=>Z,setAsPrimitive:()=>rt,slice:()=>Q,trim:()=>et});var r=n(59741),i=I(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],(function(t,e){return t["[object "+e+"]"]=!0,t}),{}),o=I(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],(function(t,e){return t["[object "+e+"Array]"]=!0,t}),{}),a=Object.prototype.toString,s=Array.prototype,u=s.forEach,l=s.filter,c=s.slice,h=s.map,d=function(){}.constructor,f=d?d.prototype:null,p="__proto__",m=2311;function g(){return m++}function v(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];"undefined"!=typeof console&&console.error.apply(console,t)}function y(t){if(null==t||"object"!=typeof t)return t;var e=t,n=a.call(t);if("[object Array]"===n){if(!it(t)){e=[];for(var r=0,s=t.length;r<s;r++)e[r]=y(t[r])}}else if(o[n]){if(!it(t)){var u=t.constructor;if(u.from)e=u.from(t);else{e=new u(t.length);for(r=0,s=t.length;r<s;r++)e[r]=t[r]}}}else if(!i[n]&&!it(t)&&!G(t))for(var l in e={},t)t.hasOwnProperty(l)&&l!==p&&(e[l]=y(t[l]));return e}function b(t,e,n){if(!j(e)||!j(t))return n?y(e):t;for(var r in e)if(e.hasOwnProperty(r)&&r!==p){var i=t[r],o=e[r];!j(o)||!j(i)||D(o)||D(i)||G(o)||G(i)||V(o)||V(i)||it(o)||it(i)?!n&&r in t||(t[r]=y(e[r])):b(i,o,n)}return t}function x(t,e){for(var n=t[0],r=1,i=t.length;r<i;r++)n=b(n,t[r],e);return n}function w(t,e){if(Object.assign)Object.assign(t,e);else for(var n in e)e.hasOwnProperty(n)&&n!==p&&(t[n]=e[n]);return t}function _(t,e,n){for(var r=O(e),i=0;i<r.length;i++){var o=r[i];(n?null!=e[o]:null==t[o])&&(t[o]=e[o])}return t}var S=r.yh.createCanvas;function E(t,e){if(t){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n}return-1}function A(t,e){var n=t.prototype;function r(){}for(var i in r.prototype=e.prototype,t.prototype=new r,n)n.hasOwnProperty(i)&&(t.prototype[i]=n[i]);t.prototype.constructor=t,t.superClass=e}function M(t,e,n){if(t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,Object.getOwnPropertyNames)for(var r=Object.getOwnPropertyNames(e),i=0;i<r.length;i++){var o=r[i];"constructor"!==o&&(n?null!=e[o]:null==t[o])&&(t[o]=e[o])}else _(t,e,n)}function C(t){return!!t&&("string"!=typeof t&&"number"==typeof t.length)}function T(t,e,n){if(t&&e)if(t.forEach&&t.forEach===u)t.forEach(e,n);else if(t.length===+t.length)for(var r=0,i=t.length;r<i;r++)e.call(n,t[r],r,t);else for(var o in t)t.hasOwnProperty(o)&&e.call(n,t[o],o,t)}function k(t,e,n){if(!t)return[];if(!e)return Q(t);if(t.map&&t.map===h)return t.map(e,n);for(var r=[],i=0,o=t.length;i<o;i++)r.push(e.call(n,t[i],i,t));return r}function I(t,e,n,r){if(t&&e){for(var i=0,o=t.length;i<o;i++)n=e.call(r,n,t[i],i,t);return n}}function N(t,e,n){if(!t)return[];if(!e)return Q(t);if(t.filter&&t.filter===l)return t.filter(e,n);for(var r=[],i=0,o=t.length;i<o;i++)e.call(n,t[i],i,t)&&r.push(t[i]);return r}function P(t,e,n){if(t&&e)for(var r=0,i=t.length;r<i;r++)if(e.call(n,t[r],r,t))return t[r]}function O(t){if(!t)return[];if(Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}var L=f&&z(f.bind)?f.call.bind(f.bind):function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return function(){return t.apply(e,n.concat(c.call(arguments)))}};function R(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){return t.apply(this,e.concat(c.call(arguments)))}}function D(t){return Array.isArray?Array.isArray(t):"[object Array]"===a.call(t)}function z(t){return"function"==typeof t}function F(t){return"string"==typeof t}function B(t){return"[object String]"===a.call(t)}function U(t){return"number"==typeof t}function j(t){var e=typeof t;return"function"===e||!!t&&"object"===e}function V(t){return!!i[a.call(t)]}function H(t){return!!o[a.call(t)]}function G(t){return"object"==typeof t&&"number"==typeof t.nodeType&&"object"==typeof t.ownerDocument}function W(t){return null!=t.colorStops}function X(t){return null!=t.image}function Y(t){return"[object RegExp]"===a.call(t)}function q(t){return t!=t}function $(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,r=t.length;n<r;n++)if(null!=t[n])return t[n]}function K(t,e){return null!=t?t:e}function Z(t,e,n){return null!=t?t:null!=e?e:n}function Q(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return c.apply(t,e)}function J(t){if("number"==typeof t)return[t,t,t,t];var e=t.length;return 2===e?[t[0],t[1],t[0],t[1]]:3===e?[t[0],t[1],t[2],t[1]]:t}function tt(t,e){if(!t)throw new Error(e)}function et(t){return null==t?null:"function"==typeof t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var nt="__ec_primitive__";function rt(t){t[nt]=!0}function it(t){return t[nt]}var ot=function(){function t(){this.data={}}return t.prototype.delete=function(t){var e=this.has(t);return e&&delete this.data[t],e},t.prototype.has=function(t){return this.data.hasOwnProperty(t)},t.prototype.get=function(t){return this.data[t]},t.prototype.set=function(t,e){return this.data[t]=e,this},t.prototype.keys=function(){return O(this.data)},t.prototype.forEach=function(t){var e=this.data;for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)},t}(),at="function"==typeof Map;var st=function(){function t(e){var n=D(e);this.data=at?new Map:new ot;var r=this;function i(t,e){n?r.set(t,e):r.set(e,t)}e instanceof t?e.each(i):e&&T(e,i)}return t.prototype.hasKey=function(t){return this.data.has(t)},t.prototype.get=function(t){return this.data.get(t)},t.prototype.set=function(t,e){return this.data.set(t,e),e},t.prototype.each=function(t,e){this.data.forEach((function(n,r){t.call(e,n,r)}))},t.prototype.keys=function(){var t=this.data.keys();return at?Array.from(t):t},t.prototype.removeKey=function(t){this.data.delete(t)},t}();function ut(t){return new st(t)}function lt(t,e){for(var n=new t.constructor(t.length+e.length),r=0;r<t.length;r++)n[r]=t[r];var i=t.length;for(r=0;r<e.length;r++)n[r+i]=e[r];return n}function ct(t,e){var n;if(Object.create)n=Object.create(t);else{var r=function(){};r.prototype=t,n=new r}return e&&w(n,e),n}function ht(t){var e=t.style;e.webkitUserSelect="none",e.userSelect="none",e.webkitTapHighlightColor="rgba(0,0,0,0)",e["-webkit-touch-callout"]="none"}function dt(t,e){return t.hasOwnProperty(e)}function ft(){}var pt=180/Math.PI},83509:(t,e,n)=>{"use strict";function r(t,e){return null==t&&(t=0),null==e&&(e=0),[t,e]}function i(t,e){return t[0]=e[0],t[1]=e[1],t}function o(t){return[t[0],t[1]]}function a(t,e,n){return t[0]=e,t[1]=n,t}function s(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function u(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function l(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function c(t){return Math.sqrt(d(t))}n.r(e),n.d(e,{add:()=>s,applyTransform:()=>A,clone:()=>o,copy:()=>i,create:()=>r,dist:()=>x,distSquare:()=>_,distance:()=>b,distanceSquare:()=>w,div:()=>m,dot:()=>g,len:()=>c,lenSquare:()=>d,length:()=>h,lengthSquare:()=>f,lerp:()=>E,max:()=>C,min:()=>M,mul:()=>p,negate:()=>S,normalize:()=>y,scale:()=>v,scaleAndAdd:()=>u,set:()=>a,sub:()=>l});var h=c;function d(t){return t[0]*t[0]+t[1]*t[1]}var f=d;function p(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function m(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function g(t,e){return t[0]*e[0]+t[1]*e[1]}function v(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function y(t,e){var n=c(e);return 0===n?(t[0]=0,t[1]=0):(t[0]=e[0]/n,t[1]=e[1]/n),t}function b(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var x=b;function w(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}var _=w;function S(t,e){return t[0]=-e[0],t[1]=-e[1],t}function E(t,e,n,r){return t[0]=e[0]+r*(n[0]-e[0]),t[1]=e[1]+r*(n[1]-e[1]),t}function A(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function M(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function C(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}},82591:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var r=n(15727),i=n(69099);const o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="compound",e}return(0,r.C6)(e,t),e.prototype._updatePathDirty=function(){for(var t=this.shape.paths,e=this.shapeChanged(),n=0;n<t.length;n++)e=e||t[n].shapeChanged();e&&this.dirtyShape()},e.prototype.beforeBrush=function(){this._updatePathDirty();for(var t=this.shape.paths||[],e=this.getGlobalScale(),n=0;n<t.length;n++)t[n].path||t[n].createPathProxy(),t[n].path.setScale(e[0],e[1],t[n].segmentIgnoreThreshold)},e.prototype.buildPath=function(t,e){for(var n=e.paths||[],r=0;r<n.length;r++)n[r].buildPath(t,n[r].shape,!0)},e.prototype.afterBrush=function(){for(var t=this.shape.paths||[],e=0;e<t.length;e++)t[e].pathUpdated()},e.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),i.Ay.prototype.getBoundingRect.call(this)},e}(i.Ay)},71519:(t,e,n)=>{"use strict";n.d(e,{Ay:()=>g,oN:()=>l,sW:()=>c});var r=n(15727),i=n(62454),o=n(29308),a=n(98026),s=n(56448),u="__zr_style_"+Math.round(10*Math.random()),l={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},c={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};l[u]=!0;var h=["z","z2","invisible"],d=["invisible"],f=function(t){function e(e){return t.call(this,e)||this}var n;return(0,r.C6)(e,t),e.prototype._init=function(e){for(var n=(0,a.keys)(e),r=0;r<n.length;r++){var i=n[r];"style"===i?this.useStyle(e[i]):t.prototype.attrKV.call(this,i,e[i])}this.style||this.useStyle({})},e.prototype.beforeBrush=function(){},e.prototype.afterBrush=function(){},e.prototype.innerBeforeBrush=function(){},e.prototype.innerAfterBrush=function(){},e.prototype.shouldBePainted=function(t,e,n,r){var i=this.transform;if(this.ignore||this.invisible||0===this.style.opacity||this.culling&&function(t,e,n){p.copy(t.getBoundingRect()),t.transform&&p.applyTransform(t.transform);return m.width=e,m.height=n,!p.intersect(m)}(this,t,e)||i&&!i[0]&&!i[3])return!1;if(n&&this.__clipPaths)for(var o=0;o<this.__clipPaths.length;++o)if(this.__clipPaths[o].isZeroArea())return!1;if(r&&this.parent)for(var a=this.parent;a;){if(a.ignore)return!1;a=a.parent}return!0},e.prototype.contain=function(t,e){return this.rectContain(t,e)},e.prototype.traverse=function(t,e){t.call(e,this)},e.prototype.rectContain=function(t,e){var n=this.transformCoordToLocal(t,e);return this.getBoundingRect().contain(n[0],n[1])},e.prototype.getPaintRect=function(){var t=this._paintRect;if(!this._paintRect||this.__dirty){var e=this.transform,n=this.getBoundingRect(),r=this.style,i=r.shadowBlur||0,a=r.shadowOffsetX||0,s=r.shadowOffsetY||0;t=this._paintRect||(this._paintRect=new o.A(0,0,0,0)),e?o.A.applyTransform(t,n,e):t.copy(n),(i||a||s)&&(t.width+=2*i+Math.abs(a),t.height+=2*i+Math.abs(s),t.x=Math.min(t.x,t.x+a-i),t.y=Math.min(t.y,t.y+s-i));var u=this.dirtyRectTolerance;t.isZero()||(t.x=Math.floor(t.x-u),t.y=Math.floor(t.y-u),t.width=Math.ceil(t.width+1+2*u),t.height=Math.ceil(t.height+1+2*u))}return t},e.prototype.setPrevPaintRect=function(t){t?(this._prevPaintRect=this._prevPaintRect||new o.A(0,0,0,0),this._prevPaintRect.copy(t)):this._prevPaintRect=null},e.prototype.getPrevPaintRect=function(){return this._prevPaintRect},e.prototype.animateStyle=function(t){return this.animate("style",t)},e.prototype.updateDuringAnimation=function(t){"style"===t?this.dirtyStyle():this.markRedraw()},e.prototype.attrKV=function(e,n){"style"!==e?t.prototype.attrKV.call(this,e,n):this.style?this.setStyle(n):this.useStyle(n)},e.prototype.setStyle=function(t,e){return"string"==typeof t?this.style[t]=e:(0,a.extend)(this.style,t),this.dirtyStyle(),this},e.prototype.dirtyStyle=function(t){t||this.markRedraw(),this.__dirty|=s.pO,this._rect&&(this._rect=null)},e.prototype.dirty=function(){this.dirtyStyle()},e.prototype.styleChanged=function(){return!!(this.__dirty&s.pO)},e.prototype.styleUpdated=function(){this.__dirty&=~s.pO},e.prototype.createStyle=function(t){return(0,a.createObject)(l,t)},e.prototype.useStyle=function(t){t[u]||(t=this.createStyle(t)),this.__inHover?this.__hoverStyle=t:this.style=t,this.dirtyStyle()},e.prototype.isStyleObject=function(t){return t[u]},e.prototype._innerSaveToNormal=function(e){t.prototype._innerSaveToNormal.call(this,e);var n=this._normalState;e.style&&!n.style&&(n.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(e,n,h)},e.prototype._applyStateObj=function(e,n,r,i,o,s){t.prototype._applyStateObj.call(this,e,n,r,i,o,s);var u,l=!(n&&i);if(n&&n.style?o?i?u=n.style:(u=this._mergeStyle(this.createStyle(),r.style),this._mergeStyle(u,n.style)):(u=this._mergeStyle(this.createStyle(),i?this.style:r.style),this._mergeStyle(u,n.style)):l&&(u=r.style),u)if(o){var c=this.style;if(this.style=this.createStyle(l?{}:c),l)for(var f=(0,a.keys)(c),p=0;p<f.length;p++){(g=f[p])in u&&(u[g]=u[g],this.style[g]=c[g])}var m=(0,a.keys)(u);for(p=0;p<m.length;p++){var g=m[p];this.style[g]=this.style[g]}this._transitionState(e,{style:u},s,this.getAnimationStyleProps())}else this.useStyle(u);var v=this.__inHover?d:h;for(p=0;p<v.length;p++){g=v[p];n&&null!=n[g]?this[g]=n[g]:l&&null!=r[g]&&(this[g]=r[g])}},e.prototype._mergeStates=function(e){for(var n,r=t.prototype._mergeStates.call(this,e),i=0;i<e.length;i++){var o=e[i];o.style&&(n=n||{},this._mergeStyle(n,o.style))}return n&&(r.style=n),r},e.prototype._mergeStyle=function(t,e){return(0,a.extend)(t,e),t},e.prototype.getAnimationStyleProps=function(){return c},e.initDefaultProps=((n=e.prototype).type="displayable",n.invisible=!1,n.z=0,n.z2=0,n.zlevel=0,n.culling=!1,n.cursor="pointer",n.rectHover=!1,n.incremental=!1,n._rect=null,n.dirtyRectTolerance=0,void(n.__dirty=s.M|s.pO)),e}(i.A),p=new o.A(0,0,0,0),m=new o.A(0,0,0,0);const g=f},11793:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r=function(){function t(t){this.colorStops=t||[]}return t.prototype.addColorStop=function(t,e){this.colorStops.push({offset:t,color:e})},t}()},43870:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(15727),i=n(98026),o=n(62454),a=n(29308),s=function(t){function e(e){var n=t.call(this)||this;return n.isGroup=!0,n._children=[],n.attr(e),n}return(0,r.C6)(e,t),e.prototype.childrenRef=function(){return this._children},e.prototype.children=function(){return this._children.slice()},e.prototype.childAt=function(t){return this._children[t]},e.prototype.childOfName=function(t){for(var e=this._children,n=0;n<e.length;n++)if(e[n].name===t)return e[n]},e.prototype.childCount=function(){return this._children.length},e.prototype.add=function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},e.prototype.addBefore=function(t,e){if(t&&t!==this&&t.parent!==this&&e&&e.parent===this){var n=this._children,r=n.indexOf(e);r>=0&&(n.splice(r,0,t),this._doAdd(t))}return this},e.prototype.replace=function(t,e){var n=i.indexOf(this._children,t);return n>=0&&this.replaceAt(e,n),this},e.prototype.replaceAt=function(t,e){var n=this._children,r=n[e];if(t&&t!==this&&t.parent!==this&&t!==r){n[e]=t,r.parent=null;var i=this.__zr;i&&r.removeSelfFromZr(i),this._doAdd(t)}return this},e.prototype._doAdd=function(t){t.parent&&t.parent.remove(t),t.parent=this;var e=this.__zr;e&&e!==t.__zr&&t.addSelfToZr(e),e&&e.refresh()},e.prototype.remove=function(t){var e=this.__zr,n=this._children,r=i.indexOf(n,t);return r<0||(n.splice(r,1),t.parent=null,e&&t.removeSelfFromZr(e),e&&e.refresh()),this},e.prototype.removeAll=function(){for(var t=this._children,e=this.__zr,n=0;n<t.length;n++){var r=t[n];e&&r.removeSelfFromZr(e),r.parent=null}return t.length=0,this},e.prototype.eachChild=function(t,e){for(var n=this._children,r=0;r<n.length;r++){var i=n[r];t.call(e,i,r)}return this},e.prototype.traverse=function(t,e){for(var n=0;n<this._children.length;n++){var r=this._children[n],i=t.call(e,r);r.isGroup&&!i&&r.traverse(t,e)}return this},e.prototype.addSelfToZr=function(e){t.prototype.addSelfToZr.call(this,e);for(var n=0;n<this._children.length;n++){this._children[n].addSelfToZr(e)}},e.prototype.removeSelfFromZr=function(e){t.prototype.removeSelfFromZr.call(this,e);for(var n=0;n<this._children.length;n++){this._children[n].removeSelfFromZr(e)}},e.prototype.getBoundingRect=function(t){for(var e=new a.A(0,0,0,0),n=t||this._children,r=[],i=null,o=0;o<n.length;o++){var s=n[o];if(!s.ignore&&!s.invisible){var u=s.getBoundingRect(),l=s.getLocalTransform(r);l?(a.A.applyTransform(e,u,l),(i=i||e.clone()).union(e)):(i=i||u.clone()).union(u)}}return i||e},e}(o.A);s.prototype.type="group";const u=s},90540:(t,e,n)=>{"use strict";n.d(e,{Ay:()=>c});var r=n(15727),i=n(71519),o=n(29308),a=n(98026),s=(0,a.defaults)({x:0,y:0},i.oN),u={style:(0,a.defaults)({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},i.sW.style)};var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.C6)(e,t),e.prototype.createStyle=function(t){return(0,a.createObject)(s,t)},e.prototype._getSize=function(t){var e=this.style,n=e[t];if(null!=n)return n;var r,i=(r=e.image)&&"string"!=typeof r&&r.width&&r.height?e.image:this.__image;if(!i)return 0;var o="width"===t?"height":"width",a=e[o];return null==a?i[t]:i[t]/i[o]*a},e.prototype.getWidth=function(){return this._getSize("width")},e.prototype.getHeight=function(){return this._getSize("height")},e.prototype.getAnimationStyleProps=function(){return u},e.prototype.getBoundingRect=function(){var t=this.style;return this._rect||(this._rect=new o.A(t.x||0,t.y||0,this.getWidth(),this.getHeight())),this._rect},e}(i.Ay);l.prototype.type="image";const c=l},2995:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var r=n(15727),i=n(71519),o=n(29308),a=[];const s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.notClear=!0,e.incremental=!0,e._displayables=[],e._temporaryDisplayables=[],e._cursor=0,e}return(0,r.C6)(e,t),e.prototype.traverse=function(t,e){t.call(e,this)},e.prototype.useStyle=function(){this.style={}},e.prototype.getCursor=function(){return this._cursor},e.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},e.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},e.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},e.prototype.addDisplayable=function(t,e){e?this._temporaryDisplayables.push(t):this._displayables.push(t),this.markRedraw()},e.prototype.addDisplayables=function(t,e){e=e||!1;for(var n=0;n<t.length;n++)this.addDisplayable(t[n],e)},e.prototype.getDisplayables=function(){return this._displayables},e.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},e.prototype.eachPendingDisplayable=function(t){for(var e=this._cursor;e<this._displayables.length;e++)t&&t(this._displayables[e]);for(e=0;e<this._temporaryDisplayables.length;e++)t&&t(this._temporaryDisplayables[e])},e.prototype.update=function(){this.updateTransform();for(var t=this._cursor;t<this._displayables.length;t++){(e=this._displayables[t]).parent=this,e.update(),e.parent=null}for(t=0;t<this._temporaryDisplayables.length;t++){var e;(e=this._temporaryDisplayables[t]).parent=this,e.update(),e.parent=null}},e.prototype.getBoundingRect=function(){if(!this._rect){for(var t=new o.A(1/0,1/0,-1/0,-1/0),e=0;e<this._displayables.length;e++){var n=this._displayables[e],r=n.getBoundingRect().clone();n.needLocalTransform()&&r.applyTransform(n.getLocalTransform(a)),t.union(r)}this._rect=t}return this._rect},e.prototype.contain=function(t,e){var n=this.transformCoordToLocal(t,e);if(this.getBoundingRect().contain(n[0],n[1]))for(var r=0;r<this._displayables.length;r++){if(this._displayables[r].contain(t,e))return!0}return!1},e}(i.Ay)},29668:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});var r=n(15727);const i=function(t){function e(e,n,r,i,o,a){var s=t.call(this,o)||this;return s.x=null==e?0:e,s.y=null==n?0:n,s.x2=null==r?1:r,s.y2=null==i?0:i,s.type="linear",s.global=a||!1,s}return(0,r.C6)(e,t),e}(n(11793).A)},69099:(t,e,n)=>{"use strict";n.d(e,{MW:()=>T,Ay:()=>N});var r=n(15727),i=n(71519),o=n(68717);function a(t,e,n,r,i,o,a){if(0===i)return!1;var s=i,u=0;if(a>e+s&&a>r+s||a<e-s&&a<r-s||o>t+s&&o>n+s||o<t-s&&o<n-s)return!1;if(t===n)return Math.abs(o-t)<=s/2;var l=(u=(e-r)/(t-n))*o-a+(t*r-n*e)/(t-n);return l*l/(u*u+1)<=s/2*s/2}var s=n(89259);function u(t,e,n,r,i,o,a,u,l,c,h){if(0===l)return!1;var d=l;return!(h>e+d&&h>r+d&&h>o+d&&h>u+d||h<e-d&&h<r-d&&h<o-d&&h<u-d||c>t+d&&c>n+d&&c>i+d&&c>a+d||c<t-d&&c<n-d&&c<i-d&&c<a-d)&&s.Et(t,e,n,r,i,o,a,u,c,h,null)<=d/2}function l(t,e,n,r,i,o,a,u,l){if(0===a)return!1;var c=a;return!(l>e+c&&l>r+c&&l>o+c||l<e-c&&l<r-c&&l<o-c||u>t+c&&u>n+c&&u>i+c||u<t-c&&u<n-c&&u<i-c)&&(0,s.kh)(t,e,n,r,i,o,u,l,null)<=c/2}var c=n(41589),h=2*Math.PI;function d(t,e,n,r,i,o,a,s,u){if(0===a)return!1;var l=a;s-=t,u-=e;var d=Math.sqrt(s*s+u*u);if(d-l>n||d+l<n)return!1;if(Math.abs(r-i)%h<1e-4)return!0;if(o){var f=r;r=(0,c.n)(i),i=(0,c.n)(f)}else r=(0,c.n)(r),i=(0,c.n)(i);r>i&&(i+=h);var p=Math.atan2(u,s);return p<0&&(p+=h),p>=r&&p<=i||p+h>=r&&p+h<=i}var f=n(76873),p=o.A.CMD,m=2*Math.PI,g=1e-4;var v=[-1,-1,-1],y=[-1,-1];function b(t,e,n,r,i,o,a,u,l,c){if(c>e&&c>r&&c>o&&c>u||c<e&&c<r&&c<o&&c<u)return 0;var h,d=s._E(e,r,o,u,c,v);if(0===d)return 0;for(var f=0,p=-1,m=void 0,g=void 0,b=0;b<d;b++){var x=v[b],w=0===x||1===x?.5:1;s.Yb(t,n,i,a,x)<l||(p<0&&(p=s.lX(e,r,o,u,y),y[1]<y[0]&&p>1&&(h=void 0,h=y[0],y[0]=y[1],y[1]=h),m=s.Yb(e,r,o,u,y[0]),p>1&&(g=s.Yb(e,r,o,u,y[1]))),2===p?x<y[0]?f+=m<e?w:-w:x<y[1]?f+=g<m?w:-w:f+=u<g?w:-w:x<y[0]?f+=m<e?w:-w:f+=u<m?w:-w)}return f}function x(t,e,n,r,i,o,a,u){if(u>e&&u>r&&u>o||u<e&&u<r&&u<o)return 0;var l=s.qY(e,r,o,u,v);if(0===l)return 0;var c=s.gC(e,r,o);if(c>=0&&c<=1){for(var h=0,d=s.k3(e,r,o,c),f=0;f<l;f++){var p=0===v[f]||1===v[f]?.5:1;s.k3(t,n,i,v[f])<a||(v[f]<c?h+=d<e?p:-p:h+=o<d?p:-p)}return h}p=0===v[0]||1===v[0]?.5:1;return s.k3(t,n,i,v[0])<a?0:o<e?p:-p}function w(t,e,n,r,i,o,a,s){if((s-=e)>n||s<-n)return 0;var u=Math.sqrt(n*n-s*s);v[0]=-u,v[1]=u;var l=Math.abs(r-i);if(l<1e-4)return 0;if(l>=m-1e-4){r=0,i=m;var c=o?1:-1;return a>=v[0]+t&&a<=v[1]+t?c:0}if(r>i){var h=r;r=i,i=h}r<0&&(r+=m,i+=m);for(var d=0,f=0;f<2;f++){var p=v[f];if(p+t>a){var g=Math.atan2(s,p);c=o?1:-1;g<0&&(g=m+g),(g>=r&&g<=i||g+m>=r&&g+m<=i)&&(g>Math.PI/2&&g<1.5*Math.PI&&(c=-c),d+=c)}}return d}function _(t,e,n,r,i){for(var o,s,c,h,m=t.data,v=t.len(),y=0,_=0,S=0,E=0,A=0,M=0;M<v;){var C=m[M++],T=1===M;switch(C===p.M&&M>1&&(n||(y+=(0,f.A)(_,S,E,A,r,i))),T&&(E=_=m[M],A=S=m[M+1]),C){case p.M:_=E=m[M++],S=A=m[M++];break;case p.L:if(n){if(a(_,S,m[M],m[M+1],e,r,i))return!0}else y+=(0,f.A)(_,S,m[M],m[M+1],r,i)||0;_=m[M++],S=m[M++];break;case p.C:if(n){if(u(_,S,m[M++],m[M++],m[M++],m[M++],m[M],m[M+1],e,r,i))return!0}else y+=b(_,S,m[M++],m[M++],m[M++],m[M++],m[M],m[M+1],r,i)||0;_=m[M++],S=m[M++];break;case p.Q:if(n){if(l(_,S,m[M++],m[M++],m[M],m[M+1],e,r,i))return!0}else y+=x(_,S,m[M++],m[M++],m[M],m[M+1],r,i)||0;_=m[M++],S=m[M++];break;case p.A:var k=m[M++],I=m[M++],N=m[M++],P=m[M++],O=m[M++],L=m[M++];M+=1;var R=!!(1-m[M++]);o=Math.cos(O)*N+k,s=Math.sin(O)*P+I,T?(E=o,A=s):y+=(0,f.A)(_,S,o,s,r,i);var D=(r-k)*P/N+k;if(n){if(d(k,I,P,O,O+L,R,e,D,i))return!0}else y+=w(k,I,P,O,O+L,R,D,i);_=Math.cos(O+L)*N+k,S=Math.sin(O+L)*P+I;break;case p.R:if(E=_=m[M++],A=S=m[M++],o=E+m[M++],s=A+m[M++],n){if(a(E,A,o,A,e,r,i)||a(o,A,o,s,e,r,i)||a(o,s,E,s,e,r,i)||a(E,s,E,A,e,r,i))return!0}else y+=(0,f.A)(o,A,o,s,r,i),y+=(0,f.A)(E,s,E,A,r,i);break;case p.Z:if(n){if(a(_,S,E,A,e,r,i))return!0}else y+=(0,f.A)(_,S,E,A,r,i);_=E,S=A}}return n||(c=S,h=A,Math.abs(c-h)<g)||(y+=(0,f.A)(_,S,E,A,r,i)||0),0!==y}var S=n(98026),E=n(47698),A=n(73098),M=n(56448),C=n(92836),T=(0,S.defaults)({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},i.oN),k={style:(0,S.defaults)({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},i.sW.style)},I=C.Wx.concat(["invisible","culling","z","z2","zlevel","parent"]);const N=function(t){function e(e){return t.call(this,e)||this}var n;return(0,r.C6)(e,t),e.prototype.update=function(){var n=this;t.prototype.update.call(this);var r=this.style;if(r.decal){var i=this._decalEl=this._decalEl||new e;i.buildPath===e.prototype.buildPath&&(i.buildPath=function(t){n.buildPath(t,n.shape)}),i.silent=!0;var o=i.style;for(var a in r)o[a]!==r[a]&&(o[a]=r[a]);o.fill=r.fill?r.decal:null,o.decal=null,o.shadowColor=null,r.strokeFirst&&(o.stroke=null);for(var s=0;s<I.length;++s)i[I[s]]=this[I[s]];i.__dirty|=M.M}else this._decalEl&&(this._decalEl=null)},e.prototype.getDecalElement=function(){return this._decalEl},e.prototype._init=function(e){var n=(0,S.keys)(e);this.shape=this.getDefaultShape();var r=this.getDefaultStyle();r&&this.useStyle(r);for(var i=0;i<n.length;i++){var o=n[i],a=e[o];"style"===o?this.style?(0,S.extend)(this.style,a):this.useStyle(a):"shape"===o?(0,S.extend)(this.shape,a):t.prototype.attrKV.call(this,o,a)}this.style||this.useStyle({})},e.prototype.getDefaultStyle=function(){return null},e.prototype.getDefaultShape=function(){return{}},e.prototype.canBeInsideText=function(){return this.hasFill()},e.prototype.getInsideTextFill=function(){var t=this.style.fill;if("none"!==t){if((0,S.isString)(t)){var e=(0,E.lum)(t,0);return e>.5?A._S:e>.2?A.tY:A.el}if(t)return A.el}return A._S},e.prototype.getInsideTextStroke=function(t){var e=this.style.fill;if((0,S.isString)(e)){var n=this.__zr;if(!(!n||!n.isDarkMode())===(0,E.lum)(t,0)<A.ps)return e}},e.prototype.buildPath=function(t,e,n){},e.prototype.pathUpdated=function(){this.__dirty&=~M.Dl},e.prototype.getUpdatedPathProxy=function(t){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,t),this.path},e.prototype.createPathProxy=function(){this.path=new o.A(!1)},e.prototype.hasStroke=function(){var t=this.style,e=t.stroke;return!(null==e||"none"===e||!(t.lineWidth>0))},e.prototype.hasFill=function(){var t=this.style.fill;return null!=t&&"none"!==t},e.prototype.getBoundingRect=function(){var t=this._rect,e=this.style,n=!t;if(n){var r=!1;this.path||(r=!0,this.createPathProxy());var i=this.path;(r||this.__dirty&M.Dl)&&(i.beginPath(),this.buildPath(i,this.shape,!1),this.pathUpdated()),t=i.getBoundingRect()}if(this._rect=t,this.hasStroke()&&this.path&&this.path.len()>0){var o=this._rectStroke||(this._rectStroke=t.clone());if(this.__dirty||n){o.copy(t);var a=e.strokeNoScale?this.getLineScale():1,s=e.lineWidth;if(!this.hasFill()){var u=this.strokeContainThreshold;s=Math.max(s,null==u?4:u)}a>1e-10&&(o.width+=s/a,o.height+=s/a,o.x-=s/a/2,o.y-=s/a/2)}return o}return t},e.prototype.contain=function(t,e){var n=this.transformCoordToLocal(t,e),r=this.getBoundingRect(),i=this.style;if(t=n[0],e=n[1],r.contain(t,e)){var o=this.path;if(this.hasStroke()){var a=i.lineWidth,s=i.strokeNoScale?this.getLineScale():1;if(s>1e-10&&(this.hasFill()||(a=Math.max(a,this.strokeContainThreshold)),function(t,e,n,r){return _(t,e,!0,n,r)}(o,a/s,t,e)))return!0}if(this.hasFill())return function(t,e,n){return _(t,0,!1,e,n)}(o,t,e)}return!1},e.prototype.dirtyShape=function(){this.__dirty|=M.Dl,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},e.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},e.prototype.animateShape=function(t){return this.animate("shape",t)},e.prototype.updateDuringAnimation=function(t){"style"===t?this.dirtyStyle():"shape"===t?this.dirtyShape():this.markRedraw()},e.prototype.attrKV=function(e,n){"shape"===e?this.setShape(n):t.prototype.attrKV.call(this,e,n)},e.prototype.setShape=function(t,e){var n=this.shape;return n||(n=this.shape={}),"string"==typeof t?n[t]=e:(0,S.extend)(n,t),this.dirtyShape(),this},e.prototype.shapeChanged=function(){return!!(this.__dirty&M.Dl)},e.prototype.createStyle=function(t){return(0,S.createObject)(T,t)},e.prototype._innerSaveToNormal=function(e){t.prototype._innerSaveToNormal.call(this,e);var n=this._normalState;e.shape&&!n.shape&&(n.shape=(0,S.extend)({},this.shape))},e.prototype._applyStateObj=function(e,n,r,i,o,a){t.prototype._applyStateObj.call(this,e,n,r,i,o,a);var s,u=!(n&&i);if(n&&n.shape?o?i?s=n.shape:(s=(0,S.extend)({},r.shape),(0,S.extend)(s,n.shape)):(s=(0,S.extend)({},i?this.shape:r.shape),(0,S.extend)(s,n.shape)):u&&(s=r.shape),s)if(o){this.shape=(0,S.extend)({},this.shape);for(var l={},c=(0,S.keys)(s),h=0;h<c.length;h++){var d=c[h];"object"==typeof s[d]?this.shape[d]=s[d]:l[d]=s[d]}this._transitionState(e,{shape:l},a)}else this.shape=s,this.dirtyShape()},e.prototype._mergeStates=function(e){for(var n,r=t.prototype._mergeStates.call(this,e),i=0;i<e.length;i++){var o=e[i];o.shape&&(n=n||{},this._mergeStyle(n,o.shape))}return n&&(r.shape=n),r},e.prototype.getAnimationStyleProps=function(){return k},e.prototype.isZeroArea=function(){return!1},e.extend=function(t){var n=function(e){function n(n){var r=e.call(this,n)||this;return t.init&&t.init.call(r,n),r}return(0,r.C6)(n,e),n.prototype.getDefaultStyle=function(){return(0,S.clone)(t.style)},n.prototype.getDefaultShape=function(){return(0,S.clone)(t.shape)},n}(e);for(var i in t)"function"==typeof t[i]&&(n.prototype[i]=t[i]);return n},e.initDefaultProps=((n=e.prototype).type="path",n.strokeContainThreshold=5,n.segmentIgnoreThreshold=0,n.subPixelOptimize=!1,n.autoBatch=!1,void(n.__dirty=M.M|M.pO|M.Dl)),e}(i.Ay)},82250:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});var r=n(15727);const i=function(t){function e(e,n,r,i,o){var a=t.call(this,i)||this;return a.x=null==e?.5:e,a.y=null==n?.5:n,a.r=null==r?.5:r,a.type="radial",a.global=o||!1,a}return(0,r.C6)(e,t),e}(n(11793).A)},19845:(t,e,n)=>{"use strict";n.d(e,{A:()=>h});var r=n(15727),i=n(71519),o=n(45558),a=n(69099),s=n(98026),u=n(59741),l=(0,s.defaults)({strokeFirst:!0,font:u.OH,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},a.MW),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.C6)(e,t),e.prototype.hasStroke=function(){var t=this.style,e=t.stroke;return null!=e&&"none"!==e&&t.lineWidth>0},e.prototype.hasFill=function(){var t=this.style.fill;return null!=t&&"none"!==t},e.prototype.createStyle=function(t){return(0,s.createObject)(l,t)},e.prototype.setBoundingRect=function(t){this._rect=t},e.prototype.getBoundingRect=function(){var t=this.style;if(!this._rect){var e=t.text;null!=e?e+="":e="";var n=(0,o.NO)(e,t.font,t.textAlign,t.textBaseline);if(n.x+=t.x||0,n.y+=t.y||0,this.hasStroke()){var r=t.lineWidth;n.x-=r/2,n.y-=r/2,n.width+=r,n.height+=r}this._rect=n}return this._rect},e.initDefaultProps=void(e.prototype.dirtyRectTolerance=10),e}(i.Ay);c.prototype.type="tspan";const h=c},32322:(t,e,n)=>{"use strict";n.d(e,{Ay:()=>C});var r=n(15727),i=n(62406),o=n(19845),a=n(98026),s=n(45558),u=n(90540),l=n(30010),c=n(29308),h=n(71519),d=n(59741),f={fill:"#000"},p={style:(0,a.defaults)({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},h.sW.style)},m=function(t){function e(e){var n=t.call(this)||this;return n.type="text",n._children=[],n._defaultStyle=f,n.attr(e),n}return(0,r.C6)(e,t),e.prototype.childrenRef=function(){return this._children},e.prototype.update=function(){t.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var e=0;e<this._children.length;e++){var n=this._children[e];n.zlevel=this.zlevel,n.z=this.z,n.z2=this.z2,n.culling=this.culling,n.cursor=this.cursor,n.invisible=this.invisible}},e.prototype.updateTransform=function(){var e=this.innerTransformable;e?(e.updateTransform(),e.transform&&(this.transform=e.transform)):t.prototype.updateTransform.call(this)},e.prototype.getLocalTransform=function(e){var n=this.innerTransformable;return n?n.getLocalTransform(e):t.prototype.getLocalTransform.call(this,e)},e.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),t.prototype.getComputedTransform.call(this)},e.prototype._updateSubTexts=function(){var t;this._childCursor=0,w(t=this.style),(0,a.each)(t.rich,w),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},e.prototype.addSelfToZr=function(e){t.prototype.addSelfToZr.call(this,e);for(var n=0;n<this._children.length;n++)this._children[n].__zr=e},e.prototype.removeSelfFromZr=function(e){t.prototype.removeSelfFromZr.call(this,e);for(var n=0;n<this._children.length;n++)this._children[n].__zr=null},e.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var t=new c.A(0,0,0,0),e=this._children,n=[],r=null,i=0;i<e.length;i++){var o=e[i],a=o.getBoundingRect(),s=o.getLocalTransform(n);s?(t.copy(a),t.applyTransform(s),(r=r||t.clone()).union(t)):(r=r||a.clone()).union(a)}this._rect=r||t}return this._rect},e.prototype.setDefaultTextStyle=function(t){this._defaultStyle=t||f},e.prototype.setTextContent=function(t){0},e.prototype._mergeStyle=function(t,e){if(!e)return t;var n=e.rich,r=t.rich||n&&{};return(0,a.extend)(t,e),n&&r?(this._mergeRich(r,n),t.rich=r):r&&(t.rich=r),t},e.prototype._mergeRich=function(t,e){for(var n=(0,a.keys)(e),r=0;r<n.length;r++){var i=n[r];t[i]=t[i]||{},(0,a.extend)(t[i],e[i])}},e.prototype.getAnimationStyleProps=function(){return p},e.prototype._getOrCreateChild=function(t){var e=this._children[this._childCursor];return e&&e instanceof t||(e=new t),this._children[this._childCursor++]=e,e.__zr=this.__zr,e.parent=this,e},e.prototype._updatePlainTexts=function(){var t=this.style,e=t.font||d.OH,n=t.padding,r=A(t),a=(0,i.j_)(r,t),u=M(t),l=!!t.backgroundColor,h=a.outerHeight,f=a.outerWidth,p=a.contentWidth,m=a.lines,g=a.lineHeight,v=this._defaultStyle,y=t.x||0,b=t.y||0,w=t.align||v.align||"left",C=t.verticalAlign||v.verticalAlign||"top",T=y,k=(0,s.sZ)(b,a.contentHeight,C);if(u||n){var I=(0,s.ll)(y,f,w),N=(0,s.sZ)(b,h,C);u&&this._renderBackground(t,t,I,N,f,h)}k+=g/2,n&&(T=E(y,w,n),"top"===C?k+=n[0]:"bottom"===C&&(k-=n[2]));for(var P=0,O=!1,L=(S("fill"in t?t.fill:(O=!0,v.fill))),R=(_("stroke"in t?t.stroke:l||v.autoStroke&&!O?null:(P=2,v.stroke))),D=t.textShadowBlur>0,z=null!=t.width&&("truncate"===t.overflow||"break"===t.overflow||"breakAll"===t.overflow),F=a.calculatedLineHeight,B=0;B<m.length;B++){var U=this._getOrCreateChild(o.A),j=U.createStyle();U.useStyle(j),j.text=m[B],j.x=T,j.y=k,w&&(j.textAlign=w),j.textBaseline="middle",j.opacity=t.opacity,j.strokeFirst=!0,D&&(j.shadowBlur=t.textShadowBlur||0,j.shadowColor=t.textShadowColor||"transparent",j.shadowOffsetX=t.textShadowOffsetX||0,j.shadowOffsetY=t.textShadowOffsetY||0),j.stroke=R,j.fill=L,R&&(j.lineWidth=t.lineWidth||P,j.lineDash=t.lineDash,j.lineDashOffset=t.lineDashOffset||0),j.font=e,x(j,t),k+=g,z&&U.setBoundingRect(new c.A((0,s.ll)(j.x,t.width,j.textAlign),(0,s.sZ)(j.y,F,j.textBaseline),p,F))}},e.prototype._updateRichTexts=function(){var t=this.style,e=A(t),n=(0,i.FQ)(e,t),r=n.width,o=n.outerWidth,a=n.outerHeight,u=t.padding,l=t.x||0,c=t.y||0,h=this._defaultStyle,d=t.align||h.align,f=t.verticalAlign||h.verticalAlign,p=(0,s.ll)(l,o,d),m=(0,s.sZ)(c,a,f),g=p,v=m;u&&(g+=u[3],v+=u[0]);var y=g+r;M(t)&&this._renderBackground(t,t,p,m,o,a);for(var b=!!t.backgroundColor,x=0;x<n.lines.length;x++){for(var w=n.lines[x],_=w.tokens,S=_.length,E=w.lineHeight,C=w.width,T=0,k=g,I=y,N=S-1,P=void 0;T<S&&(!(P=_[T]).align||"left"===P.align);)this._placeToken(P,t,E,v,k,"left",b),C-=P.width,k+=P.width,T++;for(;N>=0&&"right"===(P=_[N]).align;)this._placeToken(P,t,E,v,I,"right",b),C-=P.width,I-=P.width,N--;for(k+=(r-(k-g)-(y-I)-C)/2;T<=N;)P=_[T],this._placeToken(P,t,E,v,k+P.width/2,"center",b),k+=P.width,T++;v+=E}},e.prototype._placeToken=function(t,e,n,r,i,u,l){var h=e.rich[t.styleName]||{};h.text=t.text;var f=t.verticalAlign,p=r+n/2;"top"===f?p=r+t.height/2:"bottom"===f&&(p=r+n-t.height/2),!t.isLineHolder&&M(h)&&this._renderBackground(h,e,"right"===u?i-t.width:"center"===u?i-t.width/2:i,p-t.height/2,t.width,t.height);var m=!!h.backgroundColor,g=t.textPadding;g&&(i=E(i,u,g),p-=t.height/2-g[0]-t.innerHeight/2);var v=this._getOrCreateChild(o.A),y=v.createStyle();v.useStyle(y);var b=this._defaultStyle,w=!1,A=0,C=S("fill"in h?h.fill:"fill"in e?e.fill:(w=!0,b.fill)),T=_("stroke"in h?h.stroke:"stroke"in e?e.stroke:m||l||b.autoStroke&&!w?null:(A=2,b.stroke)),k=h.textShadowBlur>0||e.textShadowBlur>0;y.text=t.text,y.x=i,y.y=p,k&&(y.shadowBlur=h.textShadowBlur||e.textShadowBlur||0,y.shadowColor=h.textShadowColor||e.textShadowColor||"transparent",y.shadowOffsetX=h.textShadowOffsetX||e.textShadowOffsetX||0,y.shadowOffsetY=h.textShadowOffsetY||e.textShadowOffsetY||0),y.textAlign=u,y.textBaseline="middle",y.font=t.font||d.OH,y.opacity=(0,a.retrieve3)(h.opacity,e.opacity,1),x(y,h),T&&(y.lineWidth=(0,a.retrieve3)(h.lineWidth,e.lineWidth,A),y.lineDash=(0,a.retrieve2)(h.lineDash,e.lineDash),y.lineDashOffset=e.lineDashOffset||0,y.stroke=T),C&&(y.fill=C);var I=t.contentWidth,N=t.contentHeight;v.setBoundingRect(new c.A((0,s.ll)(y.x,I,y.textAlign),(0,s.sZ)(y.y,N,y.textBaseline),I,N))},e.prototype._renderBackground=function(t,e,n,r,i,o){var s,c,h,d=t.backgroundColor,f=t.borderWidth,p=t.borderColor,m=d&&d.image,g=d&&!m,v=t.borderRadius,y=this;if(g||t.lineHeight||f&&p){(s=this._getOrCreateChild(l.A)).useStyle(s.createStyle()),s.style.fill=null;var b=s.shape;b.x=n,b.y=r,b.width=i,b.height=o,b.r=v,s.dirtyShape()}if(g)(h=s.style).fill=d||null,h.fillOpacity=(0,a.retrieve2)(t.fillOpacity,1);else if(m){(c=this._getOrCreateChild(u.Ay)).onload=function(){y.dirtyStyle()};var x=c.style;x.image=d.image,x.x=n,x.y=r,x.width=i,x.height=o}f&&p&&((h=s.style).lineWidth=f,h.stroke=p,h.strokeOpacity=(0,a.retrieve2)(t.strokeOpacity,1),h.lineDash=t.borderDash,h.lineDashOffset=t.borderDashOffset||0,s.strokeContainThreshold=0,s.hasFill()&&s.hasStroke()&&(h.strokeFirst=!0,h.lineWidth*=2));var w=(s||c).style;w.shadowBlur=t.shadowBlur||0,w.shadowColor=t.shadowColor||"transparent",w.shadowOffsetX=t.shadowOffsetX||0,w.shadowOffsetY=t.shadowOffsetY||0,w.opacity=(0,a.retrieve3)(t.opacity,e.opacity,1)},e.makeFont=function(t){var e="";return function(t){return null!=t.fontSize||t.fontFamily||t.fontWeight}(t)&&(e=[t.fontStyle,t.fontWeight,b(t.fontSize),t.fontFamily||"sans-serif"].join(" ")),e&&(0,a.trim)(e)||t.textFont||t.font},e}(h.Ay),g={left:!0,right:1,center:1},v={top:1,bottom:1,middle:1},y=["fontStyle","fontWeight","fontSize","fontFamily"];function b(t){return"string"!=typeof t||-1===t.indexOf("px")&&-1===t.indexOf("rem")&&-1===t.indexOf("em")?isNaN(+t)?d.gI+"px":t+"px":t}function x(t,e){for(var n=0;n<y.length;n++){var r=y[n],i=e[r];null!=i&&(t[r]=i)}}function w(t){if(t){t.font=m.makeFont(t);var e=t.align;"middle"===e&&(e="center"),t.align=null==e||g[e]?e:"left";var n=t.verticalAlign;"center"===n&&(n="middle"),t.verticalAlign=null==n||v[n]?n:"top",t.padding&&(t.padding=(0,a.normalizeCssArray)(t.padding))}}function _(t,e){return null==t||e<=0||"transparent"===t||"none"===t?null:t.image||t.colorStops?"#000":t}function S(t){return null==t||"none"===t?null:t.image||t.colorStops?"#000":t}function E(t,e,n){return"right"===e?t-n[1]:"center"===e?t+n[3]/2-n[1]/2:t+n[3]}function A(t){var e=t.text;return null!=e&&(e+=""),e}function M(t){return!!(t.backgroundColor||t.lineHeight||t.borderWidth&&t.borderColor)}const C=m},56448:(t,e,n)=>{"use strict";n.d(e,{Dl:()=>o,M:()=>r,pO:()=>i});var r=1,i=2,o=4},12191:(t,e,n)=>{"use strict";n.d(e,{OD:()=>s,SR:()=>a,xA:()=>l});var r=n(60501),i=n(59741),o=new r.Ay(50);function a(t){if("string"==typeof t){var e=o.get(t);return e&&e.image}return t}function s(t,e,n,r,a){if(t){if("string"==typeof t){if(e&&e.__zrImageSrc===t||!n)return e;var s=o.get(t),c={hostEl:n,cb:r,cbPayload:a};return s?!l(e=s.image)&&s.pending.push(c):((e=i.yh.loadImage(t,u,u)).__zrImageSrc=t,o.put(t,e.__cachedImgObj={image:e,pending:[c]})),e}return t}return e}function u(){var t=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<t.pending.length;e++){var n=t.pending[e],r=n.cb;r&&r(this,n.cbPayload),n.hostEl.dirty()}t.pending.length=0}function l(t){return t&&t.width&&t.height}},62406:(t,e,n)=>{"use strict";n.d(e,{EJ:()=>s,FQ:()=>m,j_:()=>h});var r=n(12191),i=n(98026),o=n(45558),a=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function s(t,e,n,r,i){if(!e)return"";var o=(t+"").split("\n");i=u(e,n,r,i);for(var a=0,s=o.length;a<s;a++)o[a]=l(o[a],i);return o.join("\n")}function u(t,e,n,r){r=r||{};var a=(0,i.extend)({},r);a.font=e,n=(0,i.retrieve2)(n,"..."),a.maxIterations=(0,i.retrieve2)(r.maxIterations,2);var s=a.minChar=(0,i.retrieve2)(r.minChar,0);a.cnCharWidth=(0,o.RG)("",e);var u=a.ascCharWidth=(0,o.RG)("a",e);a.placeholder=(0,i.retrieve2)(r.placeholder,"");for(var l=t=Math.max(0,t-1),c=0;c<s&&l>=u;c++)l-=u;var h=(0,o.RG)(n,e);return h>l&&(n="",h=0),l=t-h,a.ellipsis=n,a.ellipsisWidth=h,a.contentWidth=l,a.containerWidth=t,a}function l(t,e){var n=e.containerWidth,r=e.font,i=e.contentWidth;if(!n)return"";var a=(0,o.RG)(t,r);if(a<=n)return t;for(var s=0;;s++){if(a<=i||s>=e.maxIterations){t+=e.ellipsis;break}var u=0===s?c(t,i,e.ascCharWidth,e.cnCharWidth):a>0?Math.floor(t.length*i/a):0;t=t.substr(0,u),a=(0,o.RG)(t,r)}return""===t&&(t=e.placeholder),t}function c(t,e,n,r){for(var i=0,o=0,a=t.length;o<a&&i<e;o++){var s=t.charCodeAt(o);i+=0<=s&&s<=127?n:r}return o}function h(t,e){null!=t&&(t+="");var n,r=e.overflow,a=e.padding,s=e.font,c="truncate"===r,h=(0,o.ks)(s),d=(0,i.retrieve2)(e.lineHeight,h),f=!!e.backgroundColor,p="truncate"===e.lineOverflow,m=e.width,g=(n=null==m||"break"!==r&&"breakAll"!==r?t?t.split("\n"):[]:t?b(t,e.font,m,"breakAll"===r,0).lines:[]).length*d,v=(0,i.retrieve2)(e.height,g);if(g>v&&p){var y=Math.floor(v/d);n=n.slice(0,y)}if(t&&c&&null!=m)for(var x=u(m,s,e.ellipsis,{minChar:e.truncateMinChar,placeholder:e.placeholder}),w=0;w<n.length;w++)n[w]=l(n[w],x);var _=v,S=0;for(w=0;w<n.length;w++)S=Math.max((0,o.RG)(n[w],s),S);null==m&&(m=S);var E=S;return a&&(_+=a[0]+a[2],E+=a[1]+a[3],m+=a[1]+a[3]),f&&(E=m),{lines:n,height:v,outerWidth:E,outerHeight:_,lineHeight:d,calculatedLineHeight:h,contentWidth:S,contentHeight:g,width:m}}var d=function(){},f=function(t){this.tokens=[],t&&(this.tokens=t)},p=function(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]};function m(t,e){var n=new p;if(null!=t&&(t+=""),!t)return n;for(var u,l=e.width,c=e.height,h=e.overflow,d="break"!==h&&"breakAll"!==h||null==l?null:{width:l,accumWidth:0,breakAll:"breakAll"===h},f=a.lastIndex=0;null!=(u=a.exec(t));){var m=u.index;m>f&&g(n,t.substring(f,m),e,d),g(n,u[2],e,d,u[1]),f=a.lastIndex}f<t.length&&g(n,t.substring(f,t.length),e,d);var v=[],y=0,b=0,x=e.padding,w="truncate"===h,_="truncate"===e.lineOverflow;function S(t,e,n){t.width=e,t.lineHeight=n,y+=n,b=Math.max(b,e)}t:for(var E=0;E<n.lines.length;E++){for(var A=n.lines[E],M=0,C=0,T=0;T<A.tokens.length;T++){var k=(B=A.tokens[T]).styleName&&e.rich[B.styleName]||{},I=B.textPadding=k.padding,N=I?I[1]+I[3]:0,P=B.font=k.font||e.font;B.contentHeight=(0,o.ks)(P);var O=(0,i.retrieve2)(k.height,B.contentHeight);if(B.innerHeight=O,I&&(O+=I[0]+I[2]),B.height=O,B.lineHeight=(0,i.retrieve3)(k.lineHeight,e.lineHeight,O),B.align=k&&k.align||e.align,B.verticalAlign=k&&k.verticalAlign||"middle",_&&null!=c&&y+B.lineHeight>c){T>0?(A.tokens=A.tokens.slice(0,T),S(A,C,M),n.lines=n.lines.slice(0,E+1)):n.lines=n.lines.slice(0,E);break t}var L=k.width,R=null==L||"auto"===L;if("string"==typeof L&&"%"===L.charAt(L.length-1))B.percentWidth=L,v.push(B),B.contentWidth=(0,o.RG)(B.text,P);else{if(R){var D=k.backgroundColor,z=D&&D.image;z&&(z=r.SR(z),r.xA(z)&&(B.width=Math.max(B.width,z.width*O/z.height)))}var F=w&&null!=l?l-C:null;null!=F&&F<B.width?!R||F<N?(B.text="",B.width=B.contentWidth=0):(B.text=s(B.text,F-N,P,e.ellipsis,{minChar:e.truncateMinChar}),B.width=B.contentWidth=(0,o.RG)(B.text,P)):B.contentWidth=(0,o.RG)(B.text,P)}B.width+=N,C+=B.width,k&&(M=Math.max(M,B.lineHeight))}S(A,C,M)}n.outerWidth=n.width=(0,i.retrieve2)(l,b),n.outerHeight=n.height=(0,i.retrieve2)(c,y),n.contentHeight=y,n.contentWidth=b,x&&(n.outerWidth+=x[1]+x[3],n.outerHeight+=x[0]+x[2]);for(E=0;E<v.length;E++){var B,U=(B=v[E]).percentWidth;B.width=parseInt(U,10)/100*n.width}return n}function g(t,e,n,r,i){var a,s,u=""===e,l=i&&n.rich[i]||{},c=t.lines,h=l.font||n.font,p=!1;if(r){var m=l.padding,g=m?m[1]+m[3]:0;if(null!=l.width&&"auto"!==l.width){var v=(0,o.lo)(l.width,r.width)+g;c.length>0&&v+r.accumWidth>r.width&&(a=e.split("\n"),p=!0),r.accumWidth=v}else{var y=b(e,h,r.width,r.breakAll,r.accumWidth);r.accumWidth=y.accumWidth+g,s=y.linesWidths,a=y.lines}}else a=e.split("\n");for(var x=0;x<a.length;x++){var w=a[x],_=new d;if(_.styleName=i,_.text=w,_.isLineHolder=!w&&!u,"number"==typeof l.width?_.width=l.width:_.width=s?s[x]:(0,o.RG)(w,h),x||p)c.push(new f([_]));else{var S=(c[c.length-1]||(c[0]=new f)).tokens,E=S.length;1===E&&S[0].isLineHolder?S[0]=_:(w||!E||u)&&S.push(_)}}}var v=(0,i.reduce)(",&?/;] ".split(""),(function(t,e){return t[e]=!0,t}),{});function y(t){return!function(t){var e=t.charCodeAt(0);return e>=32&&e<=591||e>=880&&e<=4351||e>=4608&&e<=5119||e>=7680&&e<=8303}(t)||!!v[t]}function b(t,e,n,r,i){for(var a=[],s=[],u="",l="",c=0,h=0,d=0;d<t.length;d++){var f=t.charAt(d);if("\n"!==f){var p=(0,o.RG)(f,e),m=!r&&!y(f);(a.length?h+p>n:i+h+p>n)?h?(u||l)&&(m?(u||(u=l,l="",h=c=0),a.push(u),s.push(h-c),l+=f,u="",h=c+=p):(l&&(u+=l,l="",c=0),a.push(u),s.push(h),u=f,h=p)):m?(a.push(l),s.push(c),l=f,c=p):(a.push(f),s.push(p)):(h+=p,m?(l+=f,c+=p):(l&&(u+=l,l="",c=0),u+=f))}else l&&(u+=l,h+=c),a.push(u),s.push(h),u="",l="",c=0,h=0}return a.length||u||(u=t,l="",c=0),l&&(u+=l),u&&(a.push(u),s.push(h)),1===a.length&&(h+=i),{accumWidth:h,lines:a,linesWidths:s}}},59184:(t,e,n)=>{"use strict";n.d(e,{U:()=>i});var r=n(83509);function i(t,e,n){var i=e.smooth,o=e.points;if(o&&o.length>=2){if(i){var a=function(t,e,n,i){var o,a,s,u,l=[],c=[],h=[],d=[];if(i){s=[1/0,1/0],u=[-1/0,-1/0];for(var f=0,p=t.length;f<p;f++)(0,r.min)(s,s,t[f]),(0,r.max)(u,u,t[f]);(0,r.min)(s,s,i[0]),(0,r.max)(u,u,i[1])}for(f=0,p=t.length;f<p;f++){var m=t[f];if(n)o=t[f?f-1:p-1],a=t[(f+1)%p];else{if(0===f||f===p-1){l.push((0,r.clone)(t[f]));continue}o=t[f-1],a=t[f+1]}(0,r.sub)(c,a,o),(0,r.scale)(c,c,e);var g=(0,r.distance)(m,o),v=(0,r.distance)(m,a),y=g+v;0!==y&&(g/=y,v/=y),(0,r.scale)(h,c,-g),(0,r.scale)(d,c,v);var b=(0,r.add)([],m,h),x=(0,r.add)([],m,d);i&&((0,r.max)(b,b,s),(0,r.min)(b,b,u),(0,r.max)(x,x,s),(0,r.min)(x,x,u)),l.push(b),l.push(x)}return n&&l.push(l.shift()),l}(o,i,n,e.smoothConstraint);t.moveTo(o[0][0],o[0][1]);for(var s=o.length,u=0;u<(n?s:s-1);u++){var l=a[2*u],c=a[2*u+1],h=o[(u+1)%s];t.bezierCurveTo(l[0],l[1],c[0],c[1],h[0],h[1])}}else{t.moveTo(o[0][0],o[0][1]);u=1;for(var d=o.length;u<d;u++)t.lineTo(o[u][0],o[u][1])}n&&t.closePath()}}},14865:(t,e,n)=>{"use strict";n.d(e,{M7:()=>a,Op:()=>o,eB:()=>i});var r=Math.round;function i(t,e,n){if(e){var i=e.x1,o=e.x2,s=e.y1,u=e.y2;t.x1=i,t.x2=o,t.y1=s,t.y2=u;var l=n&&n.lineWidth;return l?(r(2*i)===r(2*o)&&(t.x1=t.x2=a(i,l,!0)),r(2*s)===r(2*u)&&(t.y1=t.y2=a(s,l,!0)),t):t}}function o(t,e,n){if(e){var r=e.x,i=e.y,o=e.width,s=e.height;t.x=r,t.y=i,t.width=o,t.height=s;var u=n&&n.lineWidth;return u?(t.x=a(r,u,!0),t.y=a(i,u,!0),t.width=Math.max(a(r+o,u,!1)-t.x,0===o?0:1),t.height=Math.max(a(i+s,u,!1)-t.y,0===s?0:1),t):t}}function a(t,e,n){if(!e)return t;var i=r(2*t);return(i+r(e))%2==0?i/2:(i+(n?1:-1))/2}},43471:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var r=n(15727),i=n(69099),o=function(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0},a=function(t){function e(e){return t.call(this,e)||this}return(0,r.C6)(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new o},e.prototype.buildPath=function(t,e){var n=e.cx,r=e.cy,i=Math.max(e.r,0),o=e.startAngle,a=e.endAngle,s=e.clockwise,u=Math.cos(o),l=Math.sin(o);t.moveTo(u*i+n,l*i+r),t.arc(n,r,i,o,a,!s)},e}(i.Ay);a.prototype.type="arc";const s=a},53849:(t,e,n)=>{"use strict";n.d(e,{A:()=>h});var r=n(15727),i=n(69099),o=n(83509),a=n(89259),s=[],u=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1};function l(t,e,n){var r=t.cpx2,i=t.cpy2;return null!=r||null!=i?[(n?a.rD:a.Yb)(t.x1,t.cpx1,t.cpx2,t.x2,e),(n?a.rD:a.Yb)(t.y1,t.cpy1,t.cpy2,t.y2,e)]:[(n?a.z7:a.k3)(t.x1,t.cpx1,t.x2,e),(n?a.z7:a.k3)(t.y1,t.cpy1,t.y2,e)]}var c=function(t){function e(e){return t.call(this,e)||this}return(0,r.C6)(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new u},e.prototype.buildPath=function(t,e){var n=e.x1,r=e.y1,i=e.x2,o=e.y2,u=e.cpx1,l=e.cpy1,c=e.cpx2,h=e.cpy2,d=e.percent;0!==d&&(t.moveTo(n,r),null==c||null==h?(d<1&&((0,a.kx)(n,u,i,d,s),u=s[1],i=s[2],(0,a.kx)(r,l,o,d,s),l=s[1],o=s[2]),t.quadraticCurveTo(u,l,i,o)):(d<1&&((0,a.YT)(n,u,c,i,d,s),u=s[1],c=s[2],i=s[3],(0,a.YT)(r,l,h,o,d,s),l=s[1],h=s[2],o=s[3]),t.bezierCurveTo(u,l,c,h,i,o)))},e.prototype.pointAt=function(t){return l(this.shape,t,!1)},e.prototype.tangentAt=function(t){var e=l(this.shape,t,!0);return o.normalize(e,e)},e}(i.Ay);c.prototype.type="bezier-curve";const h=c},31571:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var r=n(15727),i=n(69099),o=function(){this.cx=0,this.cy=0,this.r=0},a=function(t){function e(e){return t.call(this,e)||this}return(0,r.C6)(e,t),e.prototype.getDefaultShape=function(){return new o},e.prototype.buildPath=function(t,e){t.moveTo(e.cx+e.r,e.cy),t.arc(e.cx,e.cy,e.r,0,2*Math.PI)},e}(i.Ay);a.prototype.type="circle";const s=a},18393:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var r=n(15727),i=n(69099),o=function(){this.cx=0,this.cy=0,this.rx=0,this.ry=0},a=function(t){function e(e){return t.call(this,e)||this}return(0,r.C6)(e,t),e.prototype.getDefaultShape=function(){return new o},e.prototype.buildPath=function(t,e){var n=.5522848,r=e.cx,i=e.cy,o=e.rx,a=e.ry,s=o*n,u=a*n;t.moveTo(r-o,i),t.bezierCurveTo(r-o,i-u,r-s,i-a,r,i-a),t.bezierCurveTo(r+s,i-a,r+o,i-u,r+o,i),t.bezierCurveTo(r+o,i+u,r+s,i+a,r,i+a),t.bezierCurveTo(r-s,i+a,r-o,i+u,r-o,i),t.closePath()},e}(i.Ay);a.prototype.type="ellipse";const s=a},82861:(t,e,n)=>{"use strict";n.d(e,{A:()=>l});var r=n(15727),i=n(69099),o=n(14865),a={},s=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1},u=function(t){function e(e){return t.call(this,e)||this}return(0,r.C6)(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new s},e.prototype.buildPath=function(t,e){var n,r,i,s;if(this.subPixelOptimize){var u=(0,o.eB)(a,e,this.style);n=u.x1,r=u.y1,i=u.x2,s=u.y2}else n=e.x1,r=e.y1,i=e.x2,s=e.y2;var l=e.percent;0!==l&&(t.moveTo(n,r),l<1&&(i=n*(1-l)+i*l,s=r*(1-l)+s*l),t.lineTo(i,s))},e.prototype.pointAt=function(t){var e=this.shape;return[e.x1*(1-t)+e.x2*t,e.y1*(1-t)+e.y2*t]},e}(i.Ay);u.prototype.type="line";const l=u},52505:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(15727),i=n(69099),o=n(59184),a=function(){this.points=null,this.smooth=0,this.smoothConstraint=null},s=function(t){function e(e){return t.call(this,e)||this}return(0,r.C6)(e,t),e.prototype.getDefaultShape=function(){return new a},e.prototype.buildPath=function(t,e){o.U(t,e,!0)},e}(i.Ay);s.prototype.type="polygon";const u=s},39195:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(15727),i=n(69099),o=n(59184),a=function(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null},s=function(t){function e(e){return t.call(this,e)||this}return(0,r.C6)(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new a},e.prototype.buildPath=function(t,e){o.U(t,e,!1)},e}(i.Ay);s.prototype.type="polyline";const u=s},30010:(t,e,n)=>{"use strict";n.d(e,{A:()=>l});var r=n(15727),i=n(69099);var o=n(14865),a=function(){this.x=0,this.y=0,this.width=0,this.height=0},s={},u=function(t){function e(e){return t.call(this,e)||this}return(0,r.C6)(e,t),e.prototype.getDefaultShape=function(){return new a},e.prototype.buildPath=function(t,e){var n,r,i,a;if(this.subPixelOptimize){var u=(0,o.Op)(s,e,this.style);n=u.x,r=u.y,i=u.width,a=u.height,u.r=e.r,e=u}else n=e.x,r=e.y,i=e.width,a=e.height;e.r?function(t,e){var n,r,i,o,a,s=e.x,u=e.y,l=e.width,c=e.height,h=e.r;l<0&&(s+=l,l=-l),c<0&&(u+=c,c=-c),"number"==typeof h?n=r=i=o=h:h instanceof Array?1===h.length?n=r=i=o=h[0]:2===h.length?(n=i=h[0],r=o=h[1]):3===h.length?(n=h[0],r=o=h[1],i=h[2]):(n=h[0],r=h[1],i=h[2],o=h[3]):n=r=i=o=0,n+r>l&&(n*=l/(a=n+r),r*=l/a),i+o>l&&(i*=l/(a=i+o),o*=l/a),r+i>c&&(r*=c/(a=r+i),i*=c/a),n+o>c&&(n*=c/(a=n+o),o*=c/a),t.moveTo(s+n,u),t.lineTo(s+l-r,u),0!==r&&t.arc(s+l-r,u+r,r,-Math.PI/2,0),t.lineTo(s+l,u+c-i),0!==i&&t.arc(s+l-i,u+c-i,i,0,Math.PI/2),t.lineTo(s+o,u+c),0!==o&&t.arc(s+o,u+c-o,o,Math.PI/2,Math.PI),t.lineTo(s,u+n),0!==n&&t.arc(s+n,u+n,n,Math.PI,1.5*Math.PI)}(t,e):t.rect(n,r,i,a)},e.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},e}(i.Ay);u.prototype.type="rect";const l=u},42933:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var r=n(15727),i=n(69099),o=function(){this.cx=0,this.cy=0,this.r=0,this.r0=0},a=function(t){function e(e){return t.call(this,e)||this}return(0,r.C6)(e,t),e.prototype.getDefaultShape=function(){return new o},e.prototype.buildPath=function(t,e){var n=e.cx,r=e.cy,i=2*Math.PI;t.moveTo(n+e.r,r),t.arc(n,r,e.r,0,i,!1),t.moveTo(n+e.r0,r),t.arc(n,r,e.r0,0,i,!0)},e}(i.Ay);a.prototype.type="ring";const s=a},25014:(t,e,n)=>{"use strict";n.d(e,{A:()=>w});var r=n(15727),i=n(69099),o=n(98026),a=Math.PI,s=2*a,u=Math.sin,l=Math.cos,c=Math.acos,h=Math.atan2,d=Math.abs,f=Math.sqrt,p=Math.max,m=Math.min,g=1e-4;function v(t,e,n,r,i,o,a){var s=t-n,u=e-r,l=(a?o:-o)/f(s*s+u*u),c=l*u,h=-l*s,d=t+c,m=e+h,g=n+c,v=r+h,y=(d+g)/2,b=(m+v)/2,x=g-d,w=v-m,_=x*x+w*w,S=i-o,E=d*v-g*m,A=(w<0?-1:1)*f(p(0,S*S*_-E*E)),M=(E*w-x*A)/_,C=(-E*x-w*A)/_,T=(E*w+x*A)/_,k=(-E*x+w*A)/_,I=M-y,N=C-b,P=T-y,O=k-b;return I*I+N*N>P*P+O*O&&(M=T,C=k),{cx:M,cy:C,x0:-c,y0:-h,x1:M*(i/S-1),y1:C*(i/S-1)}}function y(t,e){var n,r=p(e.r,0),i=p(e.r0||0,0),y=r>0;if(y||i>0){if(y||(r=i,i=0),i>r){var b=r;r=i,i=b}var x=e.startAngle,w=e.endAngle;if(!isNaN(x)&&!isNaN(w)){var _=e.cx,S=e.cy,E=!!e.clockwise,A=d(w-x),M=A>s&&A%s;if(M>g&&(A=M),r>g)if(A>s-g)t.moveTo(_+r*l(x),S+r*u(x)),t.arc(_,S,r,x,w,!E),i>g&&(t.moveTo(_+i*l(w),S+i*u(w)),t.arc(_,S,i,w,x,E));else{var C=void 0,T=void 0,k=void 0,I=void 0,N=void 0,P=void 0,O=void 0,L=void 0,R=void 0,D=void 0,z=void 0,F=void 0,B=void 0,U=void 0,j=void 0,V=void 0,H=r*l(x),G=r*u(x),W=i*l(w),X=i*u(w),Y=A>g;if(Y){var q=e.cornerRadius;q&&(C=(n=function(t){var e;if((0,o.isArray)(t)){var n=t.length;if(!n)return t;e=1===n?[t[0],t[0],0,0]:2===n?[t[0],t[0],t[1],t[1]]:3===n?t.concat(t[2]):t}else e=[t,t,t,t];return e}(q))[0],T=n[1],k=n[2],I=n[3]);var $=d(r-i)/2;if(N=m($,k),P=m($,I),O=m($,C),L=m($,T),z=R=p(N,P),F=D=p(O,L),(R>g||D>g)&&(B=r*l(w),U=r*u(w),j=i*l(x),V=i*u(x),A<a)){var K=function(t,e,n,r,i,o,a,s){var u=n-t,l=r-e,c=a-i,h=s-o,d=h*u-c*l;if(!(d*d<g))return[t+(d=(c*(e-o)-h*(t-i))/d)*u,e+d*l]}(H,G,j,V,B,U,W,X);if(K){var Z=H-K[0],Q=G-K[1],J=B-K[0],tt=U-K[1],et=1/u(c((Z*J+Q*tt)/(f(Z*Z+Q*Q)*f(J*J+tt*tt)))/2),nt=f(K[0]*K[0]+K[1]*K[1]);z=m(R,(r-nt)/(et+1)),F=m(D,(i-nt)/(et-1))}}}if(Y)if(z>g){var rt=m(k,z),it=m(I,z),ot=v(j,V,H,G,r,rt,E),at=v(B,U,W,X,r,it,E);t.moveTo(_+ot.cx+ot.x0,S+ot.cy+ot.y0),z<R&&rt===it?t.arc(_+ot.cx,S+ot.cy,z,h(ot.y0,ot.x0),h(at.y0,at.x0),!E):(rt>0&&t.arc(_+ot.cx,S+ot.cy,rt,h(ot.y0,ot.x0),h(ot.y1,ot.x1),!E),t.arc(_,S,r,h(ot.cy+ot.y1,ot.cx+ot.x1),h(at.cy+at.y1,at.cx+at.x1),!E),it>0&&t.arc(_+at.cx,S+at.cy,it,h(at.y1,at.x1),h(at.y0,at.x0),!E))}else t.moveTo(_+H,S+G),t.arc(_,S,r,x,w,!E);else t.moveTo(_+H,S+G);if(i>g&&Y)if(F>g){rt=m(C,F),ot=v(W,X,B,U,i,-(it=m(T,F)),E),at=v(H,G,j,V,i,-rt,E);t.lineTo(_+ot.cx+ot.x0,S+ot.cy+ot.y0),F<D&&rt===it?t.arc(_+ot.cx,S+ot.cy,F,h(ot.y0,ot.x0),h(at.y0,at.x0),!E):(it>0&&t.arc(_+ot.cx,S+ot.cy,it,h(ot.y0,ot.x0),h(ot.y1,ot.x1),!E),t.arc(_,S,i,h(ot.cy+ot.y1,ot.cx+ot.x1),h(at.cy+at.y1,at.cx+at.x1),E),rt>0&&t.arc(_+at.cx,S+at.cy,rt,h(at.y1,at.x1),h(at.y0,at.x0),!E))}else t.lineTo(_+W,S+X),t.arc(_,S,i,w,x,E);else t.lineTo(_+W,S+X)}else t.moveTo(_,S);t.closePath()}}}var b=function(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0,this.cornerRadius=0},x=function(t){function e(e){return t.call(this,e)||this}return(0,r.C6)(e,t),e.prototype.getDefaultShape=function(){return new b},e.prototype.buildPath=function(t,e){y(t,e)},e.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},e}(i.Ay);x.prototype.type="sector";const w=x},47698:(t,e,n)=>{"use strict";n.r(e),n.d(e,{fastLerp:()=>w,fastMapToColor:()=>_,lerp:()=>S,lift:()=>b,liftColor:()=>N,lum:()=>T,mapToColor:()=>E,modifyAlpha:()=>M,modifyHSL:()=>A,parse:()=>v,random:()=>k,stringify:()=>C,toHex:()=>x});var r=n(60501),i=n(98026),o={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function a(t){return(t=Math.round(t))<0?0:t>255?255:t}function s(t){return t<0?0:t>1?1:t}function u(t){var e=t;return e.length&&"%"===e.charAt(e.length-1)?a(parseFloat(e)/100*255):a(parseInt(e,10))}function l(t){var e=t;return e.length&&"%"===e.charAt(e.length-1)?s(parseFloat(e)/100):s(parseFloat(e))}function c(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}function h(t,e,n){return t+(e-t)*n}function d(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function f(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}var p=new r.Ay(20),m=null;function g(t,e){m&&f(m,e),m=p.put(t,m||e.slice())}function v(t,e){if(t){e=e||[];var n=p.get(t);if(n)return f(e,n);var r=(t+="").replace(/ /g,"").toLowerCase();if(r in o)return f(e,o[r]),g(t,e),e;var i,a=r.length;if("#"===r.charAt(0))return 4===a||5===a?(i=parseInt(r.slice(1,4),16))>=0&&i<=4095?(d(e,(3840&i)>>4|(3840&i)>>8,240&i|(240&i)>>4,15&i|(15&i)<<4,5===a?parseInt(r.slice(4),16)/15:1),g(t,e),e):void d(e,0,0,0,1):7===a||9===a?(i=parseInt(r.slice(1,7),16))>=0&&i<=16777215?(d(e,(16711680&i)>>16,(65280&i)>>8,255&i,9===a?parseInt(r.slice(7),16)/255:1),g(t,e),e):void d(e,0,0,0,1):void 0;var s=r.indexOf("("),c=r.indexOf(")");if(-1!==s&&c+1===a){var h=r.substr(0,s),m=r.substr(s+1,c-(s+1)).split(","),v=1;switch(h){case"rgba":if(4!==m.length)return 3===m.length?d(e,+m[0],+m[1],+m[2],1):d(e,0,0,0,1);v=l(m.pop());case"rgb":return m.length>=3?(d(e,u(m[0]),u(m[1]),u(m[2]),3===m.length?v:l(m[3])),g(t,e),e):void d(e,0,0,0,1);case"hsla":return 4!==m.length?void d(e,0,0,0,1):(m[3]=l(m[3]),y(m,e),g(t,e),e);case"hsl":return 3!==m.length?void d(e,0,0,0,1):(y(m,e),g(t,e),e);default:return}}d(e,0,0,0,1)}}function y(t,e){var n=(parseFloat(t[0])%360+360)%360/360,r=l(t[1]),i=l(t[2]),o=i<=.5?i*(r+1):i+r-i*r,s=2*i-o;return d(e=e||[],a(255*c(s,o,n+1/3)),a(255*c(s,o,n)),a(255*c(s,o,n-1/3)),1),4===t.length&&(e[3]=t[3]),e}function b(t,e){var n=v(t);if(n){for(var r=0;r<3;r++)n[r]=e<0?n[r]*(1-e)|0:(255-n[r])*e+n[r]|0,n[r]>255?n[r]=255:n[r]<0&&(n[r]=0);return C(n,4===n.length?"rgba":"rgb")}}function x(t){var e=v(t);if(e)return((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1)}function w(t,e,n){if(e&&e.length&&t>=0&&t<=1){n=n||[];var r=t*(e.length-1),i=Math.floor(r),o=Math.ceil(r),u=e[i],l=e[o],c=r-i;return n[0]=a(h(u[0],l[0],c)),n[1]=a(h(u[1],l[1],c)),n[2]=a(h(u[2],l[2],c)),n[3]=s(h(u[3],l[3],c)),n}}var _=w;function S(t,e,n){if(e&&e.length&&t>=0&&t<=1){var r=t*(e.length-1),i=Math.floor(r),o=Math.ceil(r),u=v(e[i]),l=v(e[o]),c=r-i,d=C([a(h(u[0],l[0],c)),a(h(u[1],l[1],c)),a(h(u[2],l[2],c)),s(h(u[3],l[3],c))],"rgba");return n?{color:d,leftIndex:i,rightIndex:o,value:r}:d}}var E=S;function A(t,e,n,r){var i,o=v(t);if(t)return o=function(t){if(t){var e,n,r=t[0]/255,i=t[1]/255,o=t[2]/255,a=Math.min(r,i,o),s=Math.max(r,i,o),u=s-a,l=(s+a)/2;if(0===u)e=0,n=0;else{n=l<.5?u/(s+a):u/(2-s-a);var c=((s-r)/6+u/2)/u,h=((s-i)/6+u/2)/u,d=((s-o)/6+u/2)/u;r===s?e=d-h:i===s?e=1/3+c-d:o===s&&(e=2/3+h-c),e<0&&(e+=1),e>1&&(e-=1)}var f=[360*e,n,l];return null!=t[3]&&f.push(t[3]),f}}(o),null!=e&&(o[0]=(i=e,(i=Math.round(i))<0?0:i>360?360:i)),null!=n&&(o[1]=l(n)),null!=r&&(o[2]=l(r)),C(y(o),"rgba")}function M(t,e){var n=v(t);if(n&&null!=e)return n[3]=s(e),C(n,"rgba")}function C(t,e){if(t&&t.length){var n=t[0]+","+t[1]+","+t[2];return"rgba"!==e&&"hsva"!==e&&"hsla"!==e||(n+=","+t[3]),e+"("+n+")"}}function T(t,e){var n=v(t);return n?(.299*n[0]+.587*n[1]+.114*n[2])*n[3]/255+(1-n[3])*e:0}function k(){return C([Math.round(255*Math.random()),Math.round(255*Math.random()),Math.round(255*Math.random())],"rgb")}var I=new r.Ay(100);function N(t){if((0,i.isString)(t)){var e=I.get(t);return e||(e=b(t,-.1),I.put(t,e)),e}if((0,i.isGradientObject)(t)){var n=(0,i.extend)({},t);return n.colorStops=(0,i.map)(t.colorStops,(function(t){return{offset:t.offset,color:b(t.color,-.1)}})),n}return t}},97850:(t,e,n)=>{"use strict";n.d(e,{Gw:()=>H,AN:()=>O,mz:()=>B,AG:()=>G});var r=n(89259),i=n(69099),o=n(98026),a=n(83509),s=n(59442),u=n(92836),l=n(48813),c=n(29308),h=n(26346),d=n(52505),f=n(30010),p=n(25014),m=n(68717).A.CMD;function g(t,e){return Math.abs(t-e)<1e-5}function v(t){var e,n,r,i,o,a=t.data,s=t.len(),u=[],l=0,c=0,h=0,d=0;function f(t,n){e&&e.length>2&&u.push(e),e=[t,n]}function p(t,n,r,i){g(t,r)&&g(n,i)||e.push(t,n,r,i,r,i)}function v(t,n,r,i,o,a){var s=Math.abs(n-t),u=4*Math.tan(s/4)/3,l=n<t?-1:1,c=Math.cos(t),h=Math.sin(t),d=Math.cos(n),f=Math.sin(n),p=c*o+r,m=h*a+i,g=d*o+r,v=f*a+i,y=o*u*l,b=a*u*l;e.push(p-y*h,m+b*c,g+y*f,v-b*d,g,v)}for(var y=0;y<s;){var b=a[y++],x=1===y;switch(x&&(h=l=a[y],d=c=a[y+1],b!==m.L&&b!==m.C&&b!==m.Q||(e=[h,d])),b){case m.M:l=h=a[y++],c=d=a[y++],f(h,d);break;case m.L:p(l,c,n=a[y++],r=a[y++]),l=n,c=r;break;case m.C:e.push(a[y++],a[y++],a[y++],a[y++],l=a[y++],c=a[y++]);break;case m.Q:n=a[y++],r=a[y++],i=a[y++],o=a[y++],e.push(l+2/3*(n-l),c+2/3*(r-c),i+2/3*(n-i),o+2/3*(r-o),i,o),l=i,c=o;break;case m.A:var w=a[y++],_=a[y++],S=a[y++],E=a[y++],A=a[y++],M=a[y++]+A;y+=1;var C=!a[y++];n=Math.cos(A)*S+w,r=Math.sin(A)*E+_,x?f(h=n,d=r):p(l,c,n,r),l=Math.cos(M)*S+w,c=Math.sin(M)*E+_;for(var T=(C?-1:1)*Math.PI/2,k=A;C?k>M:k<M;k+=T){v(k,C?Math.max(k+T,M):Math.min(k+T,M),w,_,S,E)}break;case m.R:h=l=a[y++],d=c=a[y++],n=h+a[y++],r=d+a[y++],f(n,d),p(n,d,n,r),p(n,r,h,r),p(h,r,h,d),p(h,d,n,d);break;case m.Z:e&&p(l,c,h,d),l=h,c=d}}return e&&e.length>2&&u.push(e),u}function y(t,e,n,i,o,a,s,u,l,c){if(g(t,n)&&g(e,i)&&g(o,s)&&g(a,u))l.push(s,u);else{var h=2/c,d=h*h,f=s-t,p=u-e,m=Math.sqrt(f*f+p*p);f/=m,p/=m;var v=n-t,b=i-e,x=o-s,w=a-u,_=v*v+b*b,S=x*x+w*w;if(_<d&&S<d)l.push(s,u);else{var E=f*v+p*b,A=-f*x-p*w;if(_-E*E<d&&E>=0&&S-A*A<d&&A>=0)l.push(s,u);else{var M=[],C=[];(0,r.YT)(t,n,o,s,.5,M),(0,r.YT)(e,i,a,u,.5,C),y(M[0],C[0],M[1],C[1],M[2],C[2],M[3],C[3],l,c),y(M[4],C[4],M[5],C[5],M[6],C[6],M[7],C[7],l,c)}}}}function b(t,e,n){var r=t[e],i=t[1-e],o=Math.abs(r/i),a=Math.ceil(Math.sqrt(o*n)),s=Math.floor(n/a);0===s&&(s=1,a=n);for(var u=[],l=0;l<a;l++)u.push(s);var c=n-a*s;if(c>0)for(l=0;l<c;l++)u[l%a]+=1;return u}function x(t,e,n){for(var r=t.r0,i=t.r,o=t.startAngle,a=t.endAngle,s=Math.abs(a-o),u=s*i,l=i-r,c=u>Math.abs(l),h=b([u,l],c?0:1,e),d=(c?s:l)/h.length,f=0;f<h.length;f++)for(var p=(c?l:s)/h[f],m=0;m<h[f];m++){var g={};c?(g.startAngle=o+d*f,g.endAngle=o+d*(f+1),g.r0=r+p*m,g.r=r+p*(m+1)):(g.startAngle=o+p*m,g.endAngle=o+p*(m+1),g.r0=r+d*f,g.r=r+d*(f+1)),g.clockwise=t.clockwise,g.cx=t.cx,g.cy=t.cy,n.push(g)}}function w(t,e,n,r){return t*r-n*e}function _(t,e,n,r,i,o,a,s){var u=n-t,l=r-e,c=a-i,d=s-o,f=w(c,d,u,l);if(Math.abs(f)<1e-6)return null;var p=w(t-i,e-o,c,d)/f;return p<0||p>1?null:new h.A(p*u+t,p*l+e)}function S(t,e,n){var r=new h.A;h.A.sub(r,n,e),r.normalize();var i=new h.A;return h.A.sub(i,t,e),i.dot(r)}function E(t,e){var n=t[t.length-1];n&&n[0]===e[0]&&n[1]===e[1]||t.push(e)}function A(t){var e=t.points,n=[],r=[];(0,l.Cr)(e,n,r);var i=new c.A(n[0],n[1],r[0]-n[0],r[1]-n[1]),o=i.width,a=i.height,s=i.x,u=i.y,d=new h.A,f=new h.A;return o>a?(d.x=f.x=s+o/2,d.y=u,f.y=u+a):(d.y=f.y=u+a/2,d.x=s,f.x=s+o),function(t,e,n){for(var r=t.length,i=[],o=0;o<r;o++){var a=t[o],s=t[(o+1)%r],u=_(a[0],a[1],s[0],s[1],e.x,e.y,n.x,n.y);u&&i.push({projPt:S(u,e,n),pt:u,idx:o})}if(i.length<2)return[{points:t},{points:t}];i.sort((function(t,e){return t.projPt-e.projPt}));var l=i[0],c=i[i.length-1];if(c.idx<l.idx){var h=l;l=c,c=h}var d=[l.pt.x,l.pt.y],f=[c.pt.x,c.pt.y],p=[d],m=[f];for(o=l.idx+1;o<=c.idx;o++)E(p,t[o].slice());for(E(p,f),E(p,d),o=c.idx+1;o<=l.idx+r;o++)E(m,t[o%r].slice());return E(m,d),E(m,f),[{points:p},{points:m}]}(e,d,f)}function M(t,e,n,r){if(1===n)r.push(e);else{var i=Math.floor(n/2),o=t(e);M(t,o[0],i,r),M(t,o[1],n-i,r)}return r}function C(t,e){var n,r=[],i=t.shape;switch(t.type){case"rect":!function(t,e,n){for(var r=t.width,i=t.height,o=r>i,a=b([r,i],o?0:1,e),s=o?"width":"height",u=o?"height":"width",l=o?"x":"y",c=o?"y":"x",h=t[s]/a.length,d=0;d<a.length;d++)for(var f=t[u]/a[d],p=0;p<a[d];p++){var m={};m[l]=d*h,m[c]=p*f,m[s]=h,m[u]=f,m.x+=t.x,m.y+=t.y,n.push(m)}}(i,e,r),n=f.A;break;case"sector":x(i,e,r),n=p.A;break;case"circle":x({r0:0,r:i.r,startAngle:0,endAngle:2*Math.PI,cx:i.cx,cy:i.cy},e,r),n=p.A;break;default:var a=t.getComputedTransform(),u=a?Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1],a[2]*a[2]+a[3]*a[3])):1,c=(0,o.map)(function(t,e){var n=v(t),r=[];e=e||1;for(var i=0;i<n.length;i++){var o=n[i],a=[],s=o[0],u=o[1];a.push(s,u);for(var l=2;l<o.length;){var c=o[l++],h=o[l++],d=o[l++],f=o[l++],p=o[l++],m=o[l++];y(s,u,c,h,d,f,p,m,a,e),s=p,u=m}r.push(a)}return r}(t.getUpdatedPathProxy(),u),(function(t){return function(t){for(var e=[],n=0;n<t.length;)e.push([t[n++],t[n++]]);return e}(t)})),h=c.length;if(0===h)M(A,{points:c[0]},e,r);else if(h===e)for(var m=0;m<h;m++)r.push({points:c[m]});else{var g=0,w=(0,o.map)(c,(function(t){var e=[],n=[];(0,l.Cr)(t,e,n);var r=(n[1]-e[1])*(n[0]-e[0]);return g+=r,{poly:t,area:r}}));w.sort((function(t,e){return e.area-t.area}));var _=e;for(m=0;m<h;m++){var S=w[m];if(_<=0)break;var E=m===h-1?_:Math.ceil(S.area/g*e);E<0||(M(A,{points:S.poly},E,r),_-=E)}}n=d.A}if(!n)return function(t,e){for(var n=[],r=0;r<e;r++)n.push((0,s.rR)(t));return n}(t,e);var C,T,k=[];for(m=0;m<r.length;m++){var I=new n;I.setShape(r[m]),C=t,(T=I).setStyle(C.style),T.z=C.z,T.z2=C.z2,T.zlevel=C.zlevel,k.push(I)}return k}function T(t,e){var n=t.length,i=e.length;if(n===i)return[t,e];for(var o=[],a=[],s=n<i?t:e,u=Math.min(n,i),l=Math.abs(i-n)/6,c=(u-2)/6,h=Math.ceil(l/c)+1,d=[s[0],s[1]],f=l,p=2;p<u;){var m=s[p-2],g=s[p-1],v=s[p++],y=s[p++],b=s[p++],x=s[p++],w=s[p++],_=s[p++];if(f<=0)d.push(v,y,b,x,w,_);else{for(var S=Math.min(f,h-1)+1,E=1;E<=S;E++){var A=E/S;(0,r.YT)(m,v,b,w,A,o),(0,r.YT)(g,y,x,_,A,a),m=o[3],g=a[3],d.push(o[1],a[1],o[2],a[2],m,g),v=o[5],y=a[5],b=o[6],x=a[6]}f-=S-1}}return s===t?[d,e]:[t,d]}function k(t,e){for(var n=t.length,r=t[n-2],i=t[n-1],o=[],a=0;a<e.length;)o[a++]=r,o[a++]=i;return o}function I(t){for(var e=0,n=0,r=0,i=t.length,o=0,a=i-2;o<i;a=o,o+=2){var s=t[a],u=t[a+1],l=t[o],c=t[o+1],h=s*c-l*u;e+=h,n+=(s+l)*h,r+=(u+c)*h}return 0===e?[t[0]||0,t[1]||0]:[n/e/3,r/e/3,e]}function N(t,e,n,r){for(var i=(t.length-2)/6,o=1/0,a=0,s=t.length,u=s-2,l=0;l<i;l++){for(var c=6*l,h=0,d=0;d<s;d+=2){var f=0===d?c:(c+d-2)%u+2,p=t[f]-n[0],m=t[f+1]-n[1],g=e[d]-r[0]-p,v=e[d+1]-r[1]-m;h+=g*g+v*v}h<o&&(o=h,a=l)}return a}function P(t){for(var e=[],n=t.length,r=0;r<n;r+=2)e[r]=t[n-r-2],e[r+1]=t[n-r-1];return e}function O(t){return t.__isCombineMorphing}var L="__mOriginal_";function R(t,e,n){var r=L+e,i=t[r]||t[e];t[r]||(t[r]=t[e]);var o=n.replace,a=n.after,s=n.before;t[e]=function(){var t,e=arguments;return s&&s.apply(this,e),t=o?o.apply(this,e):i.apply(this,e),a&&a.apply(this,e),t}}function D(t,e){var n=L+e;t[n]&&(t[e]=t[n],t[n]=null)}function z(t,e){for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.length;){var o=r[i],a=r[i+1];r[i++]=e[0]*o+e[2]*a+e[4],r[i++]=e[1]*o+e[3]*a+e[5]}}function F(t,e){var n=t.getUpdatedPathProxy(),r=e.getUpdatedPathProxy(),i=function(t,e){for(var n,r,i,o=[],a=[],s=0;s<Math.max(t.length,e.length);s++){var u=t[s],l=e[s],c=void 0,h=void 0;u?l?(r=c=(n=T(u,l))[0],i=h=n[1]):(h=k(i||u,u),c=u):(c=k(r||l,l),h=l),o.push(c),a.push(h)}return[o,a]}(v(n),v(r)),o=i[0],s=i[1],u=t.getComputedTransform(),l=e.getComputedTransform();u&&z(o,u),l&&z(s,l),R(e,"updateTransform",{replace:function(){this.transform=null}}),e.transform=null;var c=function(t,e,n,r){for(var i,o=[],a=0;a<t.length;a++){var s=t[a],u=e[a],l=I(s),c=I(u);null==i&&(i=l[2]<0!=c[2]<0);var h=[],d=[],f=0,p=1/0,m=[],g=s.length;i&&(s=P(s));for(var v=6*N(s,u,l,c),y=g-2,b=0;b<y;b+=2){var x=(v+b)%y+2;h[b+2]=s[x]-l[0],h[b+3]=s[x+1]-l[1]}if(h[0]=s[v]-l[0],h[1]=s[v+1]-l[1],n>0)for(var w=r/n,_=-r/2;_<=r/2;_+=w){var S=Math.sin(_),E=Math.cos(_),A=0;for(b=0;b<s.length;b+=2){var M=h[b],C=h[b+1],T=u[b]-c[0],k=u[b+1]-c[1],O=T*E-k*S,L=T*S+k*E;m[b]=O,m[b+1]=L;var R=O-M,D=L-C;A+=R*R+D*D}if(A<p){p=A,f=_;for(var z=0;z<m.length;z++)d[z]=m[z]}}else for(var F=0;F<g;F+=2)d[F]=u[F]-c[0],d[F+1]=u[F+1]-c[1];o.push({from:h,to:d,fromCp:l,toCp:c,rotation:-f})}return o}(o,s,10,Math.PI),h=[];R(e,"buildPath",{replace:function(t){for(var n=e.__morphT,r=1-n,i=[],o=0;o<c.length;o++){var s=c[o],u=s.from,l=s.to,d=s.rotation*n,f=s.fromCp,p=s.toCp,m=Math.sin(d),g=Math.cos(d);(0,a.lerp)(i,f,p,n);for(var v=0;v<u.length;v+=2){var y=u[v],b=u[v+1],x=y*r+(E=l[v])*n,w=b*r+(A=l[v+1])*n;h[v]=x*g-w*m+i[0],h[v+1]=x*m+w*g+i[1]}var _=h[0],S=h[1];t.moveTo(_,S);for(v=2;v<u.length;){var E=h[v++],A=h[v++],M=h[v++],C=h[v++],T=h[v++],k=h[v++];_===E&&S===A&&M===T&&C===k?t.lineTo(T,k):t.bezierCurveTo(E,A,M,C,T,k),_=T,S=k}}}})}function B(t,e,n){if(!t||!e)return e;var r=n.done,i=n.during;return F(t,e),e.__morphT=0,e.animateTo({__morphT:1},(0,o.defaults)({during:function(t){e.dirtyShape(),i&&i(t)},done:function(){D(e,"buildPath"),D(e,"updateTransform"),e.__morphT=-1,e.createPathProxy(),e.dirtyShape(),r&&r()}},n)),e}function U(t,e,n,r,i,o){t=i===n?0:Math.round(32767*(t-n)/(i-n)),e=o===r?0:Math.round(32767*(e-r)/(o-r));for(var a,s=0,u=32768;u>0;u/=2){var l=0,c=0;(t&u)>0&&(l=1),(e&u)>0&&(c=1),s+=u*u*(3*l^c),0===c&&(1===l&&(t=u-1-t,e=u-1-e),a=t,t=e,e=a)}return s}function j(t){var e=1/0,n=1/0,r=-1/0,i=-1/0,a=(0,o.map)(t,(function(t){var o=t.getBoundingRect(),a=t.getComputedTransform(),s=o.x+o.width/2+(a?a[4]:0),u=o.y+o.height/2+(a?a[5]:0);return e=Math.min(s,e),n=Math.min(u,n),r=Math.max(s,r),i=Math.max(u,i),[s,u]}));return(0,o.map)(a,(function(o,a){return{cp:o,z:U(o[0],o[1],e,n,r,i),path:t[a]}})).sort((function(t,e){return t.z-e.z})).map((function(t){return t.path}))}function V(t){return C(t.path,t.count)}function H(t,e,n){var r=[];!function t(e){for(var n=0;n<e.length;n++){var o=e[n];O(o)?t(o.childrenRef()):o instanceof i.Ay&&r.push(o)}}(t);var a=r.length;if(!a)return{fromIndividuals:[],toIndividuals:[],count:0};var s=(n.dividePath||V)({path:e,count:a});if(s.length!==a)return console.error("Invalid morphing: unmatched splitted path"),{fromIndividuals:[],toIndividuals:[],count:0};r=j(r),s=j(s);for(var l=n.done,c=n.during,h=n.individualDelay,d=new u.Ay,f=0;f<a;f++){var p=r[f],m=s[f];m.parent=e,m.copyTransform(d),h||F(p,m)}function g(t){for(var e=0;e<s.length;e++)s[e].addSelfToZr(t)}function v(){e.__isCombineMorphing=!1,e.__morphT=-1,e.childrenRef=null,D(e,"addSelfToZr"),D(e,"removeSelfFromZr")}e.__isCombineMorphing=!0,e.childrenRef=function(){return s},R(e,"addSelfToZr",{after:function(t){g(t)}}),R(e,"removeSelfFromZr",{after:function(t){for(var e=0;e<s.length;e++)s[e].removeSelfFromZr(t)}});var y=s.length;if(h){var b=y,x=function(){0===--b&&(v(),l&&l())};for(f=0;f<y;f++){var w=h?(0,o.defaults)({delay:(n.delay||0)+h(f,y,r[f],s[f]),done:x},n):n;B(r[f],s[f],w)}}else e.__morphT=0,e.animateTo({__morphT:1},(0,o.defaults)({during:function(t){for(var n=0;n<y;n++){var r=s[n];r.__morphT=e.__morphT,r.dirtyShape()}c&&c(t)},done:function(){v();for(var e=0;e<t.length;e++)D(t[e],"updateTransform");l&&l()}},n));return e.__zr&&g(e.__zr),{fromIndividuals:r,toIndividuals:s,count:y}}function G(t,e,n){var r=e.length,a=[],u=n.dividePath||V;if(O(t)){!function t(e){for(var n=0;n<e.length;n++){var r=e[n];O(r)?t(r.childrenRef()):r instanceof i.Ay&&a.push(r)}}(t.childrenRef());var l=a.length;if(l<r)for(var c=0,h=l;h<r;h++)a.push((0,s.rR)(a[c++%l]));a.length=r}else{a=u({path:t,count:r});var d=t.getComputedTransform();for(h=0;h<a.length;h++)a[h].setLocalTransform(d);if(a.length!==r)return console.error("Invalid morphing: unmatched splitted path"),{fromIndividuals:[],toIndividuals:[],count:0}}a=j(a),e=j(e);var f=n.individualDelay;for(h=0;h<r;h++){var p=f?(0,o.defaults)({delay:(n.delay||0)+f(h,r,a[h],e[h])},n):n;B(a[h],e[h],p)}return{fromIndividuals:a,toIndividuals:e,count:e.length}}},59442:(t,e,n)=>{"use strict";n.d(e,{rR:()=>k,UJ:()=>M,Qh:()=>C,uc:()=>T});var r=n(15727),i=n(69099),o=n(68717),a=n(83509),s=o.A.CMD,u=[[],[],[]],l=Math.sqrt,c=Math.atan2;function h(t,e){if(e){var n,r,i,o,h,d,f=t.data,p=t.len(),m=s.M,g=s.C,v=s.L,y=s.R,b=s.A,x=s.Q;for(i=0,o=0;i<p;){switch(n=f[i++],o=i,r=0,n){case m:case v:r=1;break;case g:r=3;break;case x:r=2;break;case b:var w=e[4],_=e[5],S=l(e[0]*e[0]+e[1]*e[1]),E=l(e[2]*e[2]+e[3]*e[3]),A=c(-e[1]/E,e[0]/S);f[i]*=S,f[i++]+=w,f[i]*=E,f[i++]+=_,f[i++]*=S,f[i++]*=E,f[i++]+=A,f[i++]+=A,o=i+=2;break;case y:d[0]=f[i++],d[1]=f[i++],(0,a.applyTransform)(d,d,e),f[o++]=d[0],f[o++]=d[1],d[0]+=f[i++],d[1]+=f[i++],(0,a.applyTransform)(d,d,e),f[o++]=d[0],f[o++]=d[1]}for(h=0;h<r;h++){var M=u[h];M[0]=f[i++],M[1]=f[i++],(0,a.applyTransform)(M,M,e),f[o++]=M[0],f[o++]=M[1]}}t.increaseVersion()}}var d=n(98026),f=Math.sqrt,p=Math.sin,m=Math.cos,g=Math.PI;function v(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function y(t,e){return(t[0]*e[0]+t[1]*e[1])/(v(t)*v(e))}function b(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(y(t,e))}function x(t,e,n,r,i,o,a,s,u,l,c){var h=u*(g/180),d=m(h)*(t-n)/2+p(h)*(e-r)/2,v=-1*p(h)*(t-n)/2+m(h)*(e-r)/2,x=d*d/(a*a)+v*v/(s*s);x>1&&(a*=f(x),s*=f(x));var w=(i===o?-1:1)*f((a*a*(s*s)-a*a*(v*v)-s*s*(d*d))/(a*a*(v*v)+s*s*(d*d)))||0,_=w*a*v/s,S=w*-s*d/a,E=(t+n)/2+m(h)*_-p(h)*S,A=(e+r)/2+p(h)*_+m(h)*S,M=b([1,0],[(d-_)/a,(v-S)/s]),C=[(d-_)/a,(v-S)/s],T=[(-1*d-_)/a,(-1*v-S)/s],k=b(C,T);if(y(C,T)<=-1&&(k=g),y(C,T)>=1&&(k=0),k<0){var I=Math.round(k/g*1e6)/1e6;k=2*g+I%2*g}c.addData(l,E,A,a,s,M,k,h,o)}var w=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,_=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;var S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.C6)(e,t),e.prototype.applyTransform=function(t){},e}(i.Ay);function E(t){return null!=t.setData}function A(t,e){var n=function(t){var e=new o.A;if(!t)return e;var n,r=0,i=0,a=r,s=i,u=o.A.CMD,l=t.match(w);if(!l)return e;for(var c=0;c<l.length;c++){for(var h=l[c],d=h.charAt(0),f=void 0,p=h.match(_)||[],m=p.length,g=0;g<m;g++)p[g]=parseFloat(p[g]);for(var v=0;v<m;){var y=void 0,b=void 0,S=void 0,E=void 0,A=void 0,M=void 0,C=void 0,T=r,k=i,I=void 0,N=void 0;switch(d){case"l":r+=p[v++],i+=p[v++],f=u.L,e.addData(f,r,i);break;case"L":r=p[v++],i=p[v++],f=u.L,e.addData(f,r,i);break;case"m":r+=p[v++],i+=p[v++],f=u.M,e.addData(f,r,i),a=r,s=i,d="l";break;case"M":r=p[v++],i=p[v++],f=u.M,e.addData(f,r,i),a=r,s=i,d="L";break;case"h":r+=p[v++],f=u.L,e.addData(f,r,i);break;case"H":r=p[v++],f=u.L,e.addData(f,r,i);break;case"v":i+=p[v++],f=u.L,e.addData(f,r,i);break;case"V":i=p[v++],f=u.L,e.addData(f,r,i);break;case"C":f=u.C,e.addData(f,p[v++],p[v++],p[v++],p[v++],p[v++],p[v++]),r=p[v-2],i=p[v-1];break;case"c":f=u.C,e.addData(f,p[v++]+r,p[v++]+i,p[v++]+r,p[v++]+i,p[v++]+r,p[v++]+i),r+=p[v-2],i+=p[v-1];break;case"S":y=r,b=i,I=e.len(),N=e.data,n===u.C&&(y+=r-N[I-4],b+=i-N[I-3]),f=u.C,T=p[v++],k=p[v++],r=p[v++],i=p[v++],e.addData(f,y,b,T,k,r,i);break;case"s":y=r,b=i,I=e.len(),N=e.data,n===u.C&&(y+=r-N[I-4],b+=i-N[I-3]),f=u.C,T=r+p[v++],k=i+p[v++],r+=p[v++],i+=p[v++],e.addData(f,y,b,T,k,r,i);break;case"Q":T=p[v++],k=p[v++],r=p[v++],i=p[v++],f=u.Q,e.addData(f,T,k,r,i);break;case"q":T=p[v++]+r,k=p[v++]+i,r+=p[v++],i+=p[v++],f=u.Q,e.addData(f,T,k,r,i);break;case"T":y=r,b=i,I=e.len(),N=e.data,n===u.Q&&(y+=r-N[I-4],b+=i-N[I-3]),r=p[v++],i=p[v++],f=u.Q,e.addData(f,y,b,r,i);break;case"t":y=r,b=i,I=e.len(),N=e.data,n===u.Q&&(y+=r-N[I-4],b+=i-N[I-3]),r+=p[v++],i+=p[v++],f=u.Q,e.addData(f,y,b,r,i);break;case"A":S=p[v++],E=p[v++],A=p[v++],M=p[v++],C=p[v++],x(T=r,k=i,r=p[v++],i=p[v++],M,C,S,E,A,f=u.A,e);break;case"a":S=p[v++],E=p[v++],A=p[v++],M=p[v++],C=p[v++],x(T=r,k=i,r+=p[v++],i+=p[v++],M,C,S,E,A,f=u.A,e)}}"z"!==d&&"Z"!==d||(f=u.Z,e.addData(f),r=a,i=s),n=f}return e.toStatic(),e}(t),r=(0,d.extend)({},e);return r.buildPath=function(t){if(E(t)){t.setData(n.data),(e=t.getContext())&&t.rebuildPath(e,1)}else{var e=t;n.rebuildPath(e,1)}},r.applyTransform=function(t){h(n,t),this.dirtyShape()},r}function M(t,e){return new S(A(t,e))}function C(t,e){var n=A(t,e);return function(t){function e(e){var r=t.call(this,e)||this;return r.applyTransform=n.applyTransform,r.buildPath=n.buildPath,r}return(0,r.C6)(e,t),e}(S)}function T(t,e){for(var n=[],r=t.length,o=0;o<r;o++){var a=t[o];n.push(a.getUpdatedPathProxy(!0))}var s=new i.Ay(e);return s.createPathProxy(),s.buildPath=function(t){if(E(t)){t.appendPath(n);var e=t.getContext();e&&t.rebuildPath(e,1)}},s}function k(t,e){e=e||{};var n=new i.Ay;return t.shape&&n.setShape(t.shape),n.setStyle(t.style),e.bakeTransform?h(n.path,t.getComputedTransform()):e.toLocal?n.setLocalTransform(t.getComputedTransform()):n.copyTransform(t),n.buildPath=t.buildPath,n.applyTransform=n.applyTransform,n.z=t.z,n.z2=t.z2,n.zlevel=t.zlevel,n}},82755:(t,e,n)=>{"use strict";n.r(e),n.d(e,{dispose:()=>lt,disposeAll:()=>ct,getElementSSRData:()=>ft,getInstance:()=>ht,init:()=>ut,registerPainter:()=>dt,registerSSRDataGetter:()=>pt,version:()=>mt});var r=n(38123),i=n(98026),o=n(15727),a=n(83509),s=function(t,e){this.target=t,this.topTarget=e&&e.topTarget};const u=function(){function t(t){this.handler=t,t.on("mousedown",this._dragStart,this),t.on("mousemove",this._drag,this),t.on("mouseup",this._dragEnd,this)}return t.prototype._dragStart=function(t){for(var e=t.target;e&&!e.draggable;)e=e.parent||e.__hostTarget;e&&(this._draggingTarget=e,e.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.handler.dispatchToElement(new s(e,t),"dragstart",t.event))},t.prototype._drag=function(t){var e=this._draggingTarget;if(e){var n=t.offsetX,r=t.offsetY,i=n-this._x,o=r-this._y;this._x=n,this._y=r,e.drift(i,o,t),this.handler.dispatchToElement(new s(e,t),"drag",t.event);var a=this.handler.findHover(n,r,e).target,u=this._dropTarget;this._dropTarget=a,e!==a&&(u&&a!==u&&this.handler.dispatchToElement(new s(u,t),"dragleave",t.event),a&&a!==u&&this.handler.dispatchToElement(new s(a,t),"dragenter",t.event))}},t.prototype._dragEnd=function(t){var e=this._draggingTarget;e&&(e.dragging=!1),this.handler.dispatchToElement(new s(e,t),"dragend",t.event),this._dropTarget&&this.handler.dispatchToElement(new s(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null},t}();var l=n(57861),c=n(35452),h=function(){function t(){this._track=[]}return t.prototype.recognize=function(t,e,n){return this._doTrack(t,e,n),this._recognize(t)},t.prototype.clear=function(){return this._track.length=0,this},t.prototype._doTrack=function(t,e,n){var r=t.touches;if(r){for(var i={points:[],touches:[],target:e,event:t},o=0,a=r.length;o<a;o++){var s=r[o],u=c.Yo(n,s,{});i.points.push([u.zrX,u.zrY]),i.touches.push(s)}this._track.push(i)}},t.prototype._recognize=function(t){for(var e in f)if(f.hasOwnProperty(e)){var n=f[e](this._track,t);if(n)return n}},t}();function d(t){var e=t[1][0]-t[0][0],n=t[1][1]-t[0][1];return Math.sqrt(e*e+n*n)}var f={pinch:function(t,e){var n=t.length;if(n){var r,i=(t[n-1]||{}).points,o=(t[n-2]||{}).points||i;if(o&&o.length>1&&i&&i.length>1){var a=d(i)/d(o);!isFinite(a)&&(a=1),e.pinchScale=a;var s=[((r=i)[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2];return e.pinchX=s[0],e.pinchY=s[1],{type:"pinch",target:t[0].target,event:e}}}}},p=n(29308),m="silent";function g(){c.ds(this.event)}var v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handler=null,e}return(0,o.C6)(e,t),e.prototype.dispose=function(){},e.prototype.setCursor=function(){},e}(l.A),y=function(t,e){this.x=t,this.y=e},b=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],x=new p.A(0,0,0,0),w=function(t){function e(e,n,r,i,o){var a=t.call(this)||this;return a._hovered=new y(0,0),a.storage=e,a.painter=n,a.painterRoot=i,a._pointerSize=o,r=r||new v,a.proxy=null,a.setHandlerProxy(r),a._draggingMgr=new u(a),a}return(0,o.C6)(e,t),e.prototype.setHandlerProxy=function(t){this.proxy&&this.proxy.dispose(),t&&(i.each(b,(function(e){t.on&&t.on(e,this[e],this)}),this),t.handler=this),this.proxy=t},e.prototype.mousemove=function(t){var e=t.zrX,n=t.zrY,r=E(this,e,n),i=this._hovered,o=i.target;o&&!o.__zr&&(o=(i=this.findHover(i.x,i.y)).target);var a=this._hovered=r?new y(e,n):this.findHover(e,n),s=a.target,u=this.proxy;u.setCursor&&u.setCursor(s?s.cursor:"default"),o&&s!==o&&this.dispatchToElement(i,"mouseout",t),this.dispatchToElement(a,"mousemove",t),s&&s!==o&&this.dispatchToElement(a,"mouseover",t)},e.prototype.mouseout=function(t){var e=t.zrEventControl;"only_globalout"!==e&&this.dispatchToElement(this._hovered,"mouseout",t),"no_globalout"!==e&&this.trigger("globalout",{type:"globalout",event:t})},e.prototype.resize=function(){this._hovered=new y(0,0)},e.prototype.dispatch=function(t,e){var n=this[t];n&&n.call(this,e)},e.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},e.prototype.setCursorStyle=function(t){var e=this.proxy;e.setCursor&&e.setCursor(t)},e.prototype.dispatchToElement=function(t,e,n){var r=(t=t||{}).target;if(!r||!r.silent){for(var i="on"+e,o=function(t,e,n){return{type:t,event:n,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:n.zrX,offsetY:n.zrY,gestureEvent:n.gestureEvent,pinchX:n.pinchX,pinchY:n.pinchY,pinchScale:n.pinchScale,wheelDelta:n.zrDelta,zrByTouch:n.zrByTouch,which:n.which,stop:g}}(e,t,n);r&&(r[i]&&(o.cancelBubble=!!r[i].call(r,o)),r.trigger(e,o),r=r.__hostTarget?r.__hostTarget:r.parent,!o.cancelBubble););o.cancelBubble||(this.trigger(e,o),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer((function(t){"function"==typeof t[i]&&t[i].call(t,o),t.trigger&&t.trigger(e,o)})))}},e.prototype.findHover=function(t,e,n){var r=this.storage.getDisplayList(),i=new y(t,e);if(S(r,i,t,e,n),this._pointerSize&&!i.target){for(var o=[],a=this._pointerSize,s=a/2,u=new p.A(t-s,e-s,a,a),l=r.length-1;l>=0;l--){var c=r[l];c===n||c.ignore||c.ignoreCoarsePointer||c.parent&&c.parent.ignoreCoarsePointer||(x.copy(c.getBoundingRect()),c.transform&&x.applyTransform(c.transform),x.intersect(u)&&o.push(c))}if(o.length)for(var h=Math.PI/12,d=2*Math.PI,f=0;f<s;f+=4)for(var m=0;m<d;m+=h){if(S(o,i,t+f*Math.cos(m),e+f*Math.sin(m),n),i.target)return i}}return i},e.prototype.processGesture=function(t,e){this._gestureMgr||(this._gestureMgr=new h);var n=this._gestureMgr;"start"===e&&n.clear();var r=n.recognize(t,this.findHover(t.zrX,t.zrY,null).target,this.proxy.dom);if("end"===e&&n.clear(),r){var i=r.type;t.gestureEvent=i;var o=new y;o.target=r.target,this.dispatchToElement(o,i,r.event)}},e}(l.A);function _(t,e,n){if(t[t.rectHover?"rectContain":"contain"](e,n)){for(var r=t,i=void 0,o=!1;r;){if(r.ignoreClip&&(o=!0),!o){var a=r.getClipPath();if(a&&!a.contain(e,n))return!1}r.silent&&(i=!0);var s=r.__hostTarget;r=s||r.parent}return!i||m}return!1}function S(t,e,n,r,i){for(var o=t.length-1;o>=0;o--){var a=t[o],s=void 0;if(a!==i&&!a.ignore&&(s=_(a,n,r))&&(!e.topTarget&&(e.topTarget=a),s!==m)){e.target=a;break}}}function E(t,e,n){var r=t.painter;return e<0||e>r.getWidth()||n<0||n>r.getHeight()}i.each(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],(function(t){w.prototype[t]=function(e){var n,r,i=e.zrX,o=e.zrY,s=E(this,i,o);if("mouseup"===t&&s||(r=(n=this.findHover(i,o)).target),"mousedown"===t)this._downEl=r,this._downPoint=[e.zrX,e.zrY],this._upEl=r;else if("mouseup"===t)this._upEl=r;else if("click"===t){if(this._downEl!==this._upEl||!this._downPoint||a.dist(this._downPoint,[e.zrX,e.zrY])>4)return;this._downPoint=null}this.dispatchToElement(n,t,e)}}));const A=w;var M=n(83470),C=n(56448),T=!1;function k(){T||(T=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function I(t,e){return t.zlevel===e.zlevel?t.z===e.z?t.z2-e.z2:t.z-e.z:t.zlevel-e.zlevel}const N=function(){function t(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=I}return t.prototype.traverse=function(t,e){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(t,e)},t.prototype.getDisplayList=function(t,e){e=e||!1;var n=this._displayList;return!t&&n.length||this.updateDisplayList(e),n},t.prototype.updateDisplayList=function(t){this._displayListLen=0;for(var e=this._roots,n=this._displayList,r=0,i=e.length;r<i;r++)this._updateAndAddDisplayable(e[r],null,t);n.length=this._displayListLen,(0,M.A)(n,I)},t.prototype._updateAndAddDisplayable=function(t,e,n){if(!t.ignore||n){t.beforeUpdate(),t.update(),t.afterUpdate();var r=t.getClipPath();if(t.ignoreClip)e=null;else if(r){e=e?e.slice():[];for(var i=r,o=t;i;)i.parent=o,i.updateTransform(),e.push(i),o=i,i=i.getClipPath()}if(t.childrenRef){for(var a=t.childrenRef(),s=0;s<a.length;s++){var u=a[s];t.__dirty&&(u.__dirty|=C.M),this._updateAndAddDisplayable(u,e,n)}t.__dirty=0}else{var l=t;e&&e.length?l.__clipPaths=e:l.__clipPaths&&l.__clipPaths.length>0&&(l.__clipPaths=[]),isNaN(l.z)&&(k(),l.z=0),isNaN(l.z2)&&(k(),l.z2=0),isNaN(l.zlevel)&&(k(),l.zlevel=0),this._displayList[this._displayListLen++]=l}var c=t.getDecalElement&&t.getDecalElement();c&&this._updateAndAddDisplayable(c,e,n);var h=t.getTextGuideLine();h&&this._updateAndAddDisplayable(h,e,n);var d=t.getTextContent();d&&this._updateAndAddDisplayable(d,e,n)}},t.prototype.addRoot=function(t){t.__zr&&t.__zr.storage===this||this._roots.push(t)},t.prototype.delRoot=function(t){if(t instanceof Array)for(var e=0,n=t.length;e<n;e++)this.delRoot(t[e]);else{var r=i.indexOf(this._roots,t);r>=0&&this._roots.splice(r,1)}},t.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},t.prototype.getRoots=function(){return this._roots},t.prototype.dispose=function(){this._displayList=null,this._roots=null},t}();var P=n(45825),O=n(84722);function L(){return(new Date).getTime()}const R=function(t){function e(e){var n=t.call(this)||this;return n._running=!1,n._time=0,n._pausedTime=0,n._pauseStart=0,n._paused=!1,e=e||{},n.stage=e.stage||{},n}return(0,o.C6)(e,t),e.prototype.addClip=function(t){t.animation&&this.removeClip(t),this._head?(this._tail.next=t,t.prev=this._tail,t.next=null,this._tail=t):this._head=this._tail=t,t.animation=this},e.prototype.addAnimator=function(t){t.animation=this;var e=t.getClip();e&&this.addClip(e)},e.prototype.removeClip=function(t){if(t.animation){var e=t.prev,n=t.next;e?e.next=n:this._head=n,n?n.prev=e:this._tail=e,t.next=t.prev=t.animation=null}},e.prototype.removeAnimator=function(t){var e=t.getClip();e&&this.removeClip(e),t.animation=null},e.prototype.update=function(t){for(var e=L()-this._pausedTime,n=e-this._time,r=this._head;r;){var i=r.next;r.step(e,n)?(r.ondestroy(),this.removeClip(r),r=i):r=i}this._time=e,t||(this.trigger("frame",n),this.stage.update&&this.stage.update())},e.prototype._startLoop=function(){var t=this;this._running=!0,(0,P.A)((function e(){t._running&&((0,P.A)(e),!t._paused&&t.update())}))},e.prototype.start=function(){this._running||(this._time=L(),this._pausedTime=0,this._startLoop())},e.prototype.stop=function(){this._running=!1},e.prototype.pause=function(){this._paused||(this._pauseStart=L(),this._paused=!0)},e.prototype.resume=function(){this._paused&&(this._pausedTime+=L()-this._pauseStart,this._paused=!1)},e.prototype.clear=function(){for(var t=this._head;t;){var e=t.next;t.prev=t.next=t.animation=null,t=e}this._head=this._tail=null},e.prototype.isFinished=function(){return null==this._head},e.prototype.animate=function(t,e){e=e||{},this.start();var n=new O.A(t,e.loop);return this.addAnimator(n),n},e}(l.A);var D,z,F=r.A.domSupported,B=(z={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},{mouse:D=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],touch:["touchstart","touchend","touchmove"],pointer:i.map(D,(function(t){var e=t.replace("mouse","pointer");return z.hasOwnProperty(e)?e:t}))}),U=["mousemove","mouseup"],j=["pointermove","pointerup"],V=!1;function H(t){var e=t.pointerType;return"pen"===e||"touch"===e}function G(t){t&&(t.zrByTouch=!0)}function W(t,e){for(var n=e,r=!1;n&&9!==n.nodeType&&!(r=n.domBelongToZr||n!==e&&n===t.painterRoot);)n=n.parentNode;return r}var X=function(t,e){this.stopPropagation=i.noop,this.stopImmediatePropagation=i.noop,this.preventDefault=i.noop,this.type=e.type,this.target=this.currentTarget=t.dom,this.pointerType=e.pointerType,this.clientX=e.clientX,this.clientY=e.clientY},Y={mousedown:function(t){t=(0,c.e0)(this.dom,t),this.__mayPointerCapture=[t.zrX,t.zrY],this.trigger("mousedown",t)},mousemove:function(t){t=(0,c.e0)(this.dom,t);var e=this.__mayPointerCapture;!e||t.zrX===e[0]&&t.zrY===e[1]||this.__togglePointerCapture(!0),this.trigger("mousemove",t)},mouseup:function(t){t=(0,c.e0)(this.dom,t),this.__togglePointerCapture(!1),this.trigger("mouseup",t)},mouseout:function(t){W(this,(t=(0,c.e0)(this.dom,t)).toElement||t.relatedTarget)||(this.__pointerCapturing&&(t.zrEventControl="no_globalout"),this.trigger("mouseout",t))},wheel:function(t){V=!0,t=(0,c.e0)(this.dom,t),this.trigger("mousewheel",t)},mousewheel:function(t){V||(t=(0,c.e0)(this.dom,t),this.trigger("mousewheel",t))},touchstart:function(t){G(t=(0,c.e0)(this.dom,t)),this.__lastTouchMoment=new Date,this.handler.processGesture(t,"start"),Y.mousemove.call(this,t),Y.mousedown.call(this,t)},touchmove:function(t){G(t=(0,c.e0)(this.dom,t)),this.handler.processGesture(t,"change"),Y.mousemove.call(this,t)},touchend:function(t){G(t=(0,c.e0)(this.dom,t)),this.handler.processGesture(t,"end"),Y.mouseup.call(this,t),+new Date-+this.__lastTouchMoment<300&&Y.click.call(this,t)},pointerdown:function(t){Y.mousedown.call(this,t)},pointermove:function(t){H(t)||Y.mousemove.call(this,t)},pointerup:function(t){Y.mouseup.call(this,t)},pointerout:function(t){H(t)||Y.mouseout.call(this,t)}};i.each(["click","dblclick","contextmenu"],(function(t){Y[t]=function(e){e=(0,c.e0)(this.dom,e),this.trigger(t,e)}}));var q={pointermove:function(t){H(t)||q.mousemove.call(this,t)},pointerup:function(t){q.mouseup.call(this,t)},mousemove:function(t){this.trigger("mousemove",t)},mouseup:function(t){var e=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",t),e&&(t.zrEventControl="only_globalout",this.trigger("mouseout",t))}};function $(t,e){var n=e.domHandlers;r.A.pointerEventsSupported?i.each(B.pointer,(function(r){Z(e,r,(function(e){n[r].call(t,e)}))})):(r.A.touchEventsSupported&&i.each(B.touch,(function(r){Z(e,r,(function(i){n[r].call(t,i),function(t){t.touching=!0,null!=t.touchTimer&&(clearTimeout(t.touchTimer),t.touchTimer=null),t.touchTimer=setTimeout((function(){t.touching=!1,t.touchTimer=null}),700)}(e)}))})),i.each(B.mouse,(function(r){Z(e,r,(function(i){i=(0,c.mK)(i),e.touching||n[r].call(t,i)}))})))}function K(t,e){function n(n){Z(e,n,(function(r){r=(0,c.mK)(r),W(t,r.target)||(r=function(t,e){return(0,c.e0)(t.dom,new X(t,e),!0)}(t,r),e.domHandlers[n].call(t,r))}),{capture:!0})}r.A.pointerEventsSupported?i.each(j,n):r.A.touchEventsSupported||i.each(U,n)}function Z(t,e,n,r){t.mounted[e]=n,t.listenerOpts[e]=r,(0,c.q2)(t.domTarget,e,n,r)}function Q(t){var e=t.mounted;for(var n in e)e.hasOwnProperty(n)&&(0,c.f)(t.domTarget,n,e[n],t.listenerOpts[n]);t.mounted={}}var J=function(t,e){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=t,this.domHandlers=e};const tt=function(t){function e(e,n){var r=t.call(this)||this;return r.__pointerCapturing=!1,r.dom=e,r.painterRoot=n,r._localHandlerScope=new J(e,Y),F&&(r._globalHandlerScope=new J(document,q)),$(r,r._localHandlerScope),r}return(0,o.C6)(e,t),e.prototype.dispose=function(){Q(this._localHandlerScope),F&&Q(this._globalHandlerScope)},e.prototype.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")},e.prototype.__togglePointerCapture=function(t){if(this.__mayPointerCapture=null,F&&+this.__pointerCapturing^+t){this.__pointerCapturing=t;var e=this._globalHandlerScope;t?K(this,e):Q(e)}},e}(l.A);var et=n(47698),nt=n(73098),rt=n(43870),it={},ot={};var at,st=function(){function t(t,e,n){var o=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,n=n||{},this.dom=e,this.id=t;var a=new N,s=n.renderer||"canvas";it[s]||(s=i.keys(it)[0]),n.useDirtyRect=null!=n.useDirtyRect&&n.useDirtyRect;var u=new it[s](e,a,n,t),l=n.ssr||u.ssrOnly;this.storage=a,this.painter=u;var c,h=r.A.node||r.A.worker||l?null:new tt(u.getViewportRoot(),u.root),d=n.useCoarsePointer;(null==d||"auto"===d?r.A.touchEventsSupported:!!d)&&(c=i.retrieve2(n.pointerSize,44)),this.handler=new A(a,u,h,u.root,c),this.animation=new R({stage:{update:l?null:function(){return o._flush(!0)}}}),l||this.animation.start()}return t.prototype.add=function(t){!this._disposed&&t&&(this.storage.addRoot(t),t.addSelfToZr(this),this.refresh())},t.prototype.remove=function(t){!this._disposed&&t&&(this.storage.delRoot(t),t.removeSelfFromZr(this),this.refresh())},t.prototype.configLayer=function(t,e){this._disposed||(this.painter.configLayer&&this.painter.configLayer(t,e),this.refresh())},t.prototype.setBackgroundColor=function(t){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this.refresh(),this._backgroundColor=t,this._darkMode=function(t){if(!t)return!1;if("string"==typeof t)return(0,et.lum)(t,1)<nt.ps;if(t.colorStops){for(var e=t.colorStops,n=0,r=e.length,i=0;i<r;i++)n+=(0,et.lum)(e[i].color,1);return(n/=r)<nt.ps}return!1}(t))},t.prototype.getBackgroundColor=function(){return this._backgroundColor},t.prototype.setDarkMode=function(t){this._darkMode=t},t.prototype.isDarkMode=function(){return this._darkMode},t.prototype.refreshImmediately=function(t){this._disposed||(t||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},t.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},t.prototype.flush=function(){this._disposed||this._flush(!1)},t.prototype._flush=function(t){var e,n=L();this._needsRefresh&&(e=!0,this.refreshImmediately(t)),this._needsRefreshHover&&(e=!0,this.refreshHoverImmediately());var r=L();e?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:r-n})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},t.prototype.setSleepAfterStill=function(t){this._sleepAfterStill=t},t.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},t.prototype.refreshHover=function(){this._needsRefreshHover=!0},t.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&"canvas"===this.painter.getType()&&this.painter.refreshHover())},t.prototype.resize=function(t){this._disposed||(t=t||{},this.painter.resize(t.width,t.height),this.handler.resize())},t.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},t.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},t.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},t.prototype.setCursorStyle=function(t){this._disposed||this.handler.setCursorStyle(t)},t.prototype.findHover=function(t,e){if(!this._disposed)return this.handler.findHover(t,e)},t.prototype.on=function(t,e,n){return this._disposed||this.handler.on(t,e,n),this},t.prototype.off=function(t,e){this._disposed||this.handler.off(t,e)},t.prototype.trigger=function(t,e){this._disposed||this.handler.trigger(t,e)},t.prototype.clear=function(){if(!this._disposed){for(var t=this.storage.getRoots(),e=0;e<t.length;e++)t[e]instanceof rt.A&&t[e].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},t.prototype.dispose=function(){var t;this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,t=this.id,delete ot[t])},t}();function ut(t,e){var n=new st(i.guid(),t,e);return ot[n.id]=n,n}function lt(t){t.dispose()}function ct(){for(var t in ot)ot.hasOwnProperty(t)&&ot[t].dispose();ot={}}function ht(t){return ot[t]}function dt(t,e){it[t]=e}function ft(t){if("function"==typeof at)return at(t)}function pt(t){at=t}var mt="5.5.0"}}]);