"use strict";(self.webpackChunkvisualization_collection=self.webpackChunkvisualization_collection||[]).push([[6519],{6519:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});var n=a(96540),r=a(6442),o=a(89740),i=a(19532),c=a(39437),s=a(53912),l=a(17024),f=a(64236),h=a(46935),u=a(9169);const d="ThrowDice_container__-FZ9P",p="ThrowDice_btn__t62zE",w="ThrowDice_btn_inner__Q9zyK",m="ThrowDice_numBox__Noiek";var y=a(74848);const P=10,M=0,b=40,I=120,v=()=>{const e=(0,r.A)(),{menuWidth:t}=(0,h.S)(),a=(0,n.useRef)(null),v=(0,n.useRef)(null),_=(0,n.useRef)([]),g=(0,n.useRef)(null),[R,S]=(0,n.useState)(1),j=(0,n.useRef)(1),k=(0,n.useRef)(!1),x=e=>{const t=document.createElement("canvas"),a=500;t.width=a,t.height=a;const n=t.getContext("2d");switch(n.fillStyle="#eeeeee",n.fillRect(0,0,a,a),e){case 1:n.fillStyle="#d30704",n.arc(250,250,100,0,2*Math.PI),n.fill();break;case 2:n.fillStyle="#153f87",n.arc(250,1500/11,60,0,2*Math.PI),n.arc(250,4e3/11,60,0,2*Math.PI),n.fill();break;case 3:n.fillStyle="#153f87",n.arc(4e3/11,1500/11,60,0,2*Math.PI),n.arc(250,250,60,0,2*Math.PI),n.arc(1500/11,4e3/11,60,0,2*Math.PI),n.fill();break;case 4:n.fillStyle="#d30704",n.beginPath(),n.arc(1500/11,1500/11,60,0,2*Math.PI),n.arc(4e3/11,1500/11,60,0,2*Math.PI),n.fill(),n.beginPath(),n.arc(1500/11,4e3/11,60,0,2*Math.PI),n.arc(4e3/11,4e3/11,60,0,2*Math.PI),n.fill();break;case 5:n.fillStyle="#153f87",n.beginPath(),n.arc(1500/11,1500/11,60,0,2*Math.PI),n.arc(4e3/11,1500/11,60,0,2*Math.PI),n.fill(),n.beginPath(),n.arc(1500/11,4e3/11,60,0,2*Math.PI),n.arc(4e3/11,4e3/11,60,0,2*Math.PI),n.fill(),n.beginPath(),n.arc(250,250,60,0,2*Math.PI),n.fill();break;case 6:n.fillStyle="#153f87",n.beginPath(),n.arc(150,1500/11,50,0,2*Math.PI),n.arc(350,1500/11,50,0,2*Math.PI),n.fill(),n.beginPath(),n.arc(150,250,50,0,2*Math.PI),n.arc(350,250,50,0,2*Math.PI),n.fill(),n.beginPath(),n.arc(150,4e3/11,50,0,2*Math.PI),n.arc(350,4e3/11,50,0,2*Math.PI),n.fill()}return t},q=(0,n.useRef)(new s.j(P,P,P,1,1.4)),B=(0,n.useRef)([new c._4j({map:new c.GOR(x(1)),color:"#ffffff"}),new c._4j({map:new c.GOR(x(6)),color:"#ffffff"}),new c._4j({map:new c.GOR(x(3)),color:"#ffffff"}),new c._4j({map:new c.GOR(x(4)),color:"#ffffff"}),new c._4j({map:new c.GOR(x(5)),color:"#ffffff"}),new c._4j({map:new c.GOR(x(2)),color:"#ffffff"})]),C=()=>{k.current||(j.current?(k.current=!0,_.current.forEach(((e,t)=>{if(t<=j.current-1){let a=10,n=24,r=-Math.floor(t/2)*P*1.5;(t+1)%2==0&&(a+=15),e.body.position=new f.eB(a,n,r),e.mesh.position.copy(e.body.position),e.mesh.rotation.set(1*Math.PI*Math.random(),0,2*Math.PI*Math.random()),e.body.quaternion.copy(e.mesh.quaternion);const o=2+5*Math.random();e.body.applyImpulse(new f.eB(-16,o,-5))}else e.body.position=new f.eB(0,-55,1e3+P*t),e.mesh.position.copy(e.body.position),e.mesh.rotation.set(0,0,0),e.body.quaternion.copy(e.mesh.quaternion)})),setTimeout((()=>{k.current=!1}),2e3)):o.Ay.warning(e.formatMessage({id:"page.threeJs3D.enterDiceNum"})))},{resize:A}=(0,u.A)(a,((e,t,n)=>{if(a.current){e.background=new c.Q1f("#224141"),t.position.set(M,b,I),t.lookAt(0,0,0),n.setClearColor("#224141");const a=new c.$p8(16777215,.5);e.add(a);const r=new c.HiM(16777215,1);r.position.set(100,200,-10),r.castShadow=!0,r.shadow.camera.near=5,r.shadow.camera.far=400,e.add(r);const o=new l.N(t,n.domElement);o.enableRotate=!1,o.maxDistance=1e3,v.current=o,g.current=new f.HK({allowSleep:!0,gravity:new f.eB(0,-420,0)}),g.current.defaultContactMaterial.restitution=.36,(e=>{var t;const a=new c.eaF(new c.bdM(300,300),new c.q2({opacity:.1}));a.receiveShadow=!0,a.position.y=-60,a.quaternion.setFromAxisAngle(new c.Pq0(-1,0,0),.5*Math.PI),e.add(a);const n=new f.nB({type:f.nB.STATIC,shape:new f.Zc});n.position.copy(a.position),n.quaternion.copy(a.quaternion),null===(t=g.current)||void 0===t||t.addBody(n)})(e),(e=>{for(let a=0;a<10;a++){var t;const a=new c.eaF(q.current,B.current);a.castShadow=!0,e.add(a);const n=new f.nB({mass:1,shape:new f.az(new f.eB(5,5,5)),sleepTimeLimit:.1});null===(t=g.current)||void 0===t||t.addBody(n),_.current.push({mesh:a,body:n})}})(e),C()}}),null,(()=>{var e,t;null===(e=g.current)||void 0===e||e.fixedStep();for(let e of _.current)e.mesh.position.copy(e.body.position),e.mesh.quaternion.copy(e.body.quaternion);v.current&&(null===(t=v.current)||void 0===t||t.update())}));return(0,n.useLayoutEffect)((()=>{A()}),[t]),(0,n.useEffect)((()=>()=>{var e,t;null===(e=q.current)||void 0===e||e.dispose(),null===(t=B.current)||void 0===t||t.forEach((e=>{e.dispose()}))}),[]),(0,y.jsxs)("div",{className:d,ref:a,children:[(0,y.jsx)("div",{className:p,children:(0,y.jsx)("div",{className:w,onClick:C,children:"Start"})}),(0,y.jsxs)("div",{className:m,children:[(0,y.jsxs)("span",{children:[e.formatMessage({id:"page.threeJs3D.diceNum"}),"ï¼š"]}),(0,y.jsx)(i.A,{min:1,max:10,precision:0,size:"large",value:R,onChange:e=>{j.current=e,S(e)}})]})]})}}}]);